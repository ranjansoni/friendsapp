;/*FB_PKG_DELIM*/

__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(t,n,r,o,a,i,l){var e,s="javascript-sandbox",u="OverrideServer",c="www_sandbox",d="www_tier",m=(function(){function t(){}var o=t.prototype;return o.patchRequestHeaders=function(o){var t={},a=r("RTISubscriptionManagerConfig").bladerunner_www_sandbox,i=r("RTISubscriptionManagerConfig").is_intern;if((e||(e=r("isEmpty")))(r("WebDriverConfig").auxiliaryServiceInfo))a!=null&&(t[s]=a);else{var l,m=(l=r("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?l:r("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];m!=null?(typeof m.ip_address=="string"?t[u]=m.ip_address+":18295":typeof m.hostname=="string"&&(t[u]=m.hostname+":18295"),typeof r("WebDriverConfig").originHost=="string"&&(t[c]="www."+r("WebDriverConfig").originHost)):a!=null&&(t[s]=a)}if(i===!0&&(t[d]="intern"),r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var p=n("cr:3024")==null?void 0:n("cr:3024").get();p!=null&&(t.is_test="true",t.original_request_id=p)}r("gkx")("20929")&&(t["Accept-Ack"]="RSAck");for(var _ in o)t[_]=o[_];return t.http_referer=window.location.href,t},t})(),p=new m,_=p;l.default=_}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(t,n,r,o,a,i,l){var e,s="bladerunner_js_client",u={info:"info",warning:"warning",exception:"exception"},c=(function(){function t(){this.setFBLoggerLevel(1)}var n=t.prototype;return n.info=function(t){this.$2>=2&&r("FBLogger")(s).info("BladeRunner info: %s",t),this.$3(u.info,t)},n.warn=function(t){this.$2>=1&&r("FBLogger")(s).warn("BladeRunner warn: %s",t),this.$3(u.warning,t)},n.exception=function(t,n){n===void 0&&(n="");var e=n+" "+t.toString();this.$2>=0&&r("FBLogger")(s).warn("BladeRunner exception: %s, %s",n,t.toString()),this.$3(u.exception,e)},n.trimForLogging=function(t){var e=1024;return typeof t=="string"&&t.length>e?"[trimmed]:"+t.substring(0,e)+"...":t},n.bumpCounter=function(n,r){r===void 0&&(r=1),(e||(e=o("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",n,r)},n.setClientSessionId=function(t){this.$1=t},n.setFBLoggerLevel=function(t){this.$2=t},n.$3=function(t,n){},t})(),d=new c,m=d;l.default=m}),98);
__d("BladeRunnerTypes",[],(function(t,n,r,o,a,i,l){var e={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6},s={BLADE_RUNNER:1,GATEWAY:2};l.StreamFrameType=e,l.StreamRequestType=s}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")},t.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.updateRetryRequestPayload=function(t){t!=null?this.payload=r("Base64").encode(t):this.payload=null},e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.requestType=f(n.requestType),t.payload=y(n.payload),t.headers=v(n.headers),t.extraHeader=y(n.extraHeader),t.requestTarget=y(n.requestTarget),t.instrumentationData=y(n.instrumentationData),t},e})(),s=(function(){function e(){}e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=g(n.dataId),t.data=y(n.data),t.shouldAck=R(n.shouldAck),t};var t=e.prototype;return t.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data},t.rawDataSize=function(){return this.data==null?0:this.data.length},t.decodeData=function(){if(this.data==null)throw new Error("Expected data");return r("Base64").decode(this.data)},t.setData=function(t){this.data=r("Base64").encode(t)},t.getInstrumentationData=function(){return this.instrumentationData!=null?JSON.parse(this.instrumentationData):null},e})(),u=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=f(n.dataId),t.success=S(n.success),t.message=y(n.message),t.code=g(n.code),t},e})();u.ACK_CODE_LANDED_AND_ACCEPTED=20,u.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21,u.ACK_CODE_FAILED_TO_LAND=50;var c=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=g(n.streamId),t.message=y(n.message),t},e})(),d=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.status=f(n.status),t.message=y(n.message),t.code=g(n.code),t.shouldRetry=R(n.shouldRetry),t.retryDelayMs=g(n.retryDelayMs),t},e})(),m=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.newBody=y(n.newBody),t.newExtraHeader=y(n.newExtraHeader),t.patchExtraHeader=y(n.patchExtraHeader),t.killBody=R(n.killBody),t.temporary=R(n.temporary),t},e})(),p=(function(){function t(){}var n=t.prototype;return n.getRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")},n.getData=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")},n.getDataAck=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")},n.getStatusUpdate=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")},n.getLog=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")},n.getRewriteRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")},n.getStreamId=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")},n.isInstrumented=function(){return this.type===o("BladeRunnerTypes").StreamFrameType.REQUEST?this.getRequest().instrumentationData!=null:this.type===o("BladeRunnerTypes").StreamFrameType.DATA?this.getData().instrumentationData!=null:!1},t.readObject=function(a){var n=new t;switch(n.type=f(a.type),n.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:n.request=e.readObject(C(a.request));break;case o("BladeRunnerTypes").StreamFrameType.DATA:n.data=s.readObject(C(a.data));break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:n.dataAck=u.readObject(C(a.dataAck));break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:n.statusUpdate=d.readObject(C(a.statusUpdate));break;case o("BladeRunnerTypes").StreamFrameType.LOG:n.log=c.readObject(C(a.log));break;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:n.rewriteRequest=m.readObject(C(a.rewriteRequest));break;default:return r("BladeRunnerLogger").warn("Frame with unexpected type: "+n.type),null}return n},t.newRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REQUEST,e.request=n,e},t.newDataFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA,e.data=n,e},t.newDataAckFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA_ACK,e.dataAck=n,e},t.newStatusUpdateFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE,e.statusUpdate=n,e},t.newLogFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.LOG,e.log=n,e},t.newRewriteRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST,e.rewriteRequest=n,e},t})(),_=(function(){function e(e,t,n){this.batchId=e,this.frames=t,this.instrumentationData=n}var t=e.prototype;return t.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")},t.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var e,t=JSON.parse(this.instrumentationData);return(e=t.dataFlowTracingData)==null?void 0:e.traceId}catch(e){return null}else return null},t.write=function(){return JSON.stringify(this)},t.isInstrumented=function(){return this.getFrames().some(function(e){return e.isInstrumented()})},e.read=function(n){var t=JSON.parse(n),r=t.batchId||0,o=[];for(var a of t.frames){var i=p.readObject(a);i!=null&&o.push(i)}var l=t.instrumentationData||null;return new e(r,o,l)},e})();function f(e){if(typeof e=="number")return e;throw new Error("Expected number")}function g(e){return e==null?null:f(e)}function h(e){if(typeof e=="string")return e;throw new Error("Expected string")}function y(e){return e==null?null:h(e)}function C(e){if(typeof e=="object"&&e!=null)return e;throw new Error("Expected object")}function b(e){if(typeof e=="object"&&e!=null){var t=e,n={};return Object.keys(t).forEach(function(e){var r=t[e];typeof r=="string"&&r!=null&&(n[e]=r)}),n}throw new Error("Expected string map")}function v(e){return e==null?null:b(e)}function S(e){if(typeof e=="boolean"&&e!=null)return e;throw new Error("Expected boolean")}function R(e){return e==null?null:S(e)}l.GatewayStreamRequest=e,l.GatewayStreamData=s,l.GatewayStreamDataAck=u,l.GatewayStreamLog=c,l.GatewayStreamStatusUpdate=d,l.GatewayStreamRewriteRequest=m,l.GatewayStreamFrame=p,l.GatewayStreamBatch=_}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});i.default=e}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});i.default=e}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","getErrorSafe","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=1e3,s=(function(){function t(e,t,n){this.$2=e,this.$1=t,this.$3=n}var n=t.prototype;return n.onProxyResponse=function(t){var e,n;this.$4(t);var a=[];for(var i of t.getFrames())this.$2.witnessFrame(i)&&a.push(i);var l=this.$2.getRequest();(e=l.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,{},(n=t.getInstrumentationData())==null?void 0:n.auxId,null,t.getInstrumentationDataDfTraceId()),a.length>0&&this.$5(new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(t.batchId,a,t.instrumentationData))},n.onDisconnect=function(){this.$2.resetErrors();var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=this.$2.getRequest().streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,e.shouldRetry=!0,e.retryDelayMs=0;var t=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);this.onProxyResponse(t)},n.$4=function(n){var t=this,a=n.getFrames().filter(function(e){return e.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var i of a){var l=i.getStatusUpdate();if(l.status==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||l.status==o("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var s=l.shouldRetry!=null&&l.shouldRetry,u=l.message!=null?l.message:"null";if(s&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){l.status=o("BladeRunnerStreamStatus").StreamStatus.STOPPED;var c=e;l.retryDelayMs!=null&&(c=l.retryDelayMs),r("BladeRunnerLogger").info("Can retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", retryDelay "+c+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString()),this.$2.getRetryRequestScheduled()?r("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(r("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),c>0?r("setTimeoutAcrossTransitions")(function(){return t.$6()},c):this.$6())}else r("BladeRunnerLogger").info("Will not retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+s.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),s?r("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):r("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(l.streamId)}}},n.$6=function(){if(this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()){var e=this.$1.getUpdatedRequestBody();e!=null&&this.$2.updateRetryRequestPayload(e),this.$3.sendRetryStreamRequest(this.$2)}},n.$5=function(t){r("BladeRunnerLogger").bumpCounter("send_to_handler");var e=[];this.$1.onBatch(t);for(var n of t.getFrames())try{switch(n.type){case o("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(n.getData()),e.push(n.getData());break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(n.getStatusUpdate().status);break;case o("BladeRunnerTypes").StreamFrameType.LOG:var a=n.getLog().message;a!=null&&this.$1.onLog(a);break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(e){var i=r("getErrorSafe")(e);r("BladeRunnerLogger").bumpCounter("send_to_handler_error"),r("BladeRunnerLogger").exception(i,"Failed sending frame to stream handler")}this.$7(e)},n.$7=function(t){var e=[];for(var n of t)if(n.shouldAck===!0&&n.dataId!=null){var r=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;r.streamId=n.streamId,r.dataId=n.dataId,r.success=!0,e.push(r)}this.$3.sendDataAcks(e)},t})();l.default=s}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("819"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",e),u=s;l.default=u}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1857112"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client",e),u=s;l.default=u}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rs_debug_logging",u=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","GRAPHQL:CometNotificationsReceiveLiveQuery"],c=0;function d(){var e=Date.now();return c>=e?c+=1:c=e,c.toString()}var m=(function(){function e(e,t,n,r,a,i,l,s,u,c){this.$10=[],this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$12=c!=null?c:!1;var d=o("ConstUriUtils").getUri(window.location.href);d&&(this.$13=d.getDomain())}var t=e.prototype;return t.logE2EEvent=function(t,n,r,o,a,i,l){if(r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),l===void 0&&(l=null),this.$3!=="Falco"){var e={request_id:this.$1,resume_id:"0",retry_id:a,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:t,event:n,timestamp_ms:d(),aux_id:o,additional_data:r,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:i};this.$14(e,l)}},t.$14=function(t,n){if(!this.$12){r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return t});return}if(this.$10.push(t),this.$11||t.event==r("RequestStreamE2EClientLoggerEvent").FAILURE||t.message_type==r("RequestStreamE2EClientLoggerMessageType").RESPONSE){var e={events:this.$10};r("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return e}),this.$10=[],this.$11=!0}},t.getRequestId=function(){return this.$1},e})();function p(e,t,n){if(e==null||e.method==null)return null;var r=!1;if(u.includes(e.method)&&(r=!0),t==null||t.length==0)return null;var o=JSON.parse(t);return o.requestId==null?null:new m(o.requestId,n,e.method,_(e.method,e),o.requestLogContext,o.forceLogContext,o.sampleRate,o.dgwStreamGroupLoggingId,o.dgwCountPriorStreamsInGroup,r)}function _(e,t){if(e==="FBLQ"&&t.config_id)return t.config_id;if(e==="SKY"){if(t.topic){var n=t.topic.lastIndexOf("/");return n>0?t.topic.substr(0,n):t.topic}return}return e}function f(e,t,n,o,a,i){if(a===void 0&&(a=null),i===void 0&&(i=null),!(e==null||e.requestId==null||e.clientLoggingDisabled!=null)){var l={request_id:e.requestId,resume_id:"0",transport:t,e2e_sample_rate:e.sampleRate,message_type:n,event:o,timestamp_ms:d(),aux_id:e.auxId,additional_data:a,df_trace_id:i};r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return l})}}l.RequestStreamE2ELogger=m,l.createStreamLogger=p,l.logRequestStreamE2EEventStatic=f}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);i.RequestStreamTransport=e}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","getErrorSafe","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Connected",u="Disconnected",c="/br_sr",d="/sr_res",m=null;function p(e){var t,n;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return(t=e.request)==null?void 0:t.getInstrumentationData();case o("BladeRunnerTypes").StreamFrameType.DATA:return(n=e.data)==null?void 0:n.getInstrumentationData()}return null}function _(e){switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case o("BladeRunnerTypes").StreamFrameType.DATA:return r("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function f(e){if(e===null)return null;switch(e){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case o("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function g(e){var t,n={};return e==null||(t=e.frames)==null||t.forEach(function(e){if(e.type===o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){var t,r=(t=e.statusUpdate)==null?void 0:t.status,a=f(r);a!==null&&(n.flow_status=a)}}),n}function h(e,t){var n,r;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:t.data_base64_size=(n=e.request)==null||(n=n.payload)==null||(n=n.length)==null?void 0:n.toString();break;case o("BladeRunnerTypes").StreamFrameType.DATA:t.data_base64_size=(r=e.data)==null||(r=r.rawDataSize())==null?void 0:r.toString();break}return null}function y(e,t,n){var a,i=p(e);if(i!=null){var l=_(e);if(l!=null){var s=null;switch(t){case o("MqttPublishListener").MqttPublishEvent.SENT:s=r("RequestStreamE2EClientLoggerEvent").SENT;break;case o("MqttPublishListener").MqttPublishEvent.ACKED:s=r("RequestStreamE2EClientLoggerEvent").PUBACK;break;case o("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:s=r("RequestStreamE2EClientLoggerEvent").FAILURE,n.reason==null&&(n.reason=t);break}if(s!=null)if(h(e,n),((a=e.request)==null?void 0:a.e2eLogger)!=null&&i.clientLoggingDisabled==null){var u;(u=e.request)==null||u.e2eLogger.logE2EEvent(l,s,n,i.auxId)}else o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(i,o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,l,s,n)}}}var C=(function(){function t(e){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map,this.$7=e!=null?e:r("FBMqttChannel"),this.$8=new Map,r("BladeRunnerLogger").setClientSessionId(r("uuidv4")()),this.$9()}t.get=function(){return m==null&&(m=new t(r("FBMqttChannel"))),m};var a=t.prototype;return a.sendNewStreamRequest=function(n,o){var e=new(r("BladeRunnerEventHandler"))(n,o,this),a=n.getRequest();if(this.$6.set(a.streamId,e),!this.$10()){this.$11(e,a.streamId);return}this.getStreamCount()<=t.maxStreamCount?this.$12(a):(r("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),r("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(n.getRequest().getHeaders())),this.$11(e,a.streamId))},a.sendRetryStreamRequest=function(t){this.$12(t.getRequest())},a.sendCancel=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_cancel");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=t.streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,this.$13(e,t),this.removeStream(t.streamId)},a.sendAmendment=function(t,n,a){r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamData;e.streamId=t,e.setData(n),a!=null&&(e.instrumentationData=a),this.$14(e)},a.sendAmendmentWithAck=function(a,i,l){var t=this;r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var s=this.$15(),u=new(o("BladeRunnerTypesInternal")).GatewayStreamData;u.streamId=a,u.setData(i),u.shouldAck=!0,u.dataId=s,l!=null&&(u.instrumentationData=l);var c=new(e||(e=n("Promise")))(function(e,n){t.$8.set(s,{resolve:e,reject:n})});return this.$14(u),c},a.$14=function(t){this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(t)),this.$16()},a.sendDataAcks=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_data_ack",t.length),this.$17(t)},a.removeStream=function(t){this.$6.delete(t)},a.getStreamCount=function(){return this.$6.size},a.getNextStreamId=function(){return this.$5++,this.$5},a.onMQTTStateChanged=function(t){this.$16(),!(t!=u&&t!=s||this.$4==t)&&(this.$4=t,r("BladeRunnerLogger").info("MQTTStateChanged: "+t),t==u?(r("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):t==s&&r("BladeRunnerLogger").bumpCounter("mqtt_state_connected"))},a.$12=function(t){if(r("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(t)),!this.$16()){var e;(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}},a.$13=function(t,n){if(this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(t)),this.$16()){var e;(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").SENT)}},a.$17=function(t){for(var e of t)this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e));this.$16()},a.$19=function(){return this.$2++,this.$2},a.$15=function(){return this.$3++,this.$3},a.$16=function(){var e=!1;if(this.$7.getConnectionState()===s&&this.$1.length>0)try{this.$20(this.$1),e=!0}catch(e){}finally{this.$1=[]}return e},a.$20=function(t){var e=this,n=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(this.$19(),t),a=n.write();if(a.length>this.$21()){var i=Math.floor(t.length/2);if(i===0){t.forEach(function(e){return y(e,o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var l=new Error("Publish is too long: "+a.length);throw l.stack,this.$22(n,l,"Publish is too long"),l}this.$20(t.slice(0,i)),this.$20(t.slice(i,t.length))}else try{r("BladeRunnerLogger").info("send message to "+c+" ("+a.length+" bytes)");var s={qos:1,skipBuffer:!1};if(n.isInstrumented()){var u=Date.now();s.listener={onEvent:function(n){var e=(Date.now()-u).toString();t.forEach(function(t){y(t,n,{latency:e})})}}}this.$7.publish(c,a,s).catch(function(t){e.$22(n,t,"Failed publishing to MQTT")}),r("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(e){var d=r("getErrorSafe")(e);throw this.$22(n,d,"Failed publishing to MQTT"),d}},a.$9=function(){var e=this;r("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent),this.onMQTTStateChanged(this.$7.getConnectionState()),this.$7.subscribeChannelEvents({onMQTTStateChanged:function(n){e.onMQTTStateChanged(n)},onJSError:function(t){var e=t!=null&&typeof t.isRecoverable=="boolean"?t.isRecoverable:!1;e?r("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(r("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof t=="object"&&t!=null?t.toString():"unknown error")+", "+JSON.stringify(t)),r("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}}),this.$7.subscribe(c,function(e){throw new Error("Unexpected response: "+c+" "+e.toString())}),this.$7.subscribe(d,function(t){e.$23(t)})},a.$23=function(t){var e=o("BladeRunnerTypesInternal").GatewayStreamBatch.read(t);this.processBatch(e)},a.$22=function(t,n,a){for(var e of t.getFrames())if(e.type===o("BladeRunnerTypes").StreamFrameType.REQUEST){var i=e.getRequest(),l=this.$6.get(i.streamId);l!=null&&this.$24(l,i.streamId,o("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(e.type===o("BladeRunnerTypes").StreamFrameType.DATA){var s=e.getData(),u=s.dataId;if(s.shouldAck!=null&&s.shouldAck&&u!=null){var c=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;c.streamId=s.streamId,c.dataId=u,c.success=!1,c.code=o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND,c.message=a,this.$25(c)}}r("BladeRunnerLogger").info("Failed publishing to MQTT: "+n.message),r("BladeRunnerLogger").bumpCounter("mqtt_publish_error")},a.$25=function(t){var e=this.$8.get(t.dataId);e!=null&&(this.$8.delete(t.dataId),t.success?e.resolve(!0):t.code===o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?e.resolve(!1):e.reject(t.message))},a.processBatch=function(t){try{o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(t.getInstrumentationData(),o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,g(t),t.getInstrumentationDataDfTraceId()),r("BladeRunnerLogger").bumpCounter("socket_process_batch");var e=JSON.stringify(t);r("BladeRunnerLogger").info("Received batch ("+e.length+" bytes)");var n=null;for(var a of t.getFrames()){var i=a.getStreamId();if(n==null&&(n=i),i!=null&&n!=i)throw new Error("Received batch with frames for multiple streams");a.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(a.getDataAck())}if(n!=null){var l=this.$6.get(n);l!=null?l.onProxyResponse(t):r("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+n)}else r("BladeRunnerLogger").info("Received batch with no frames")}catch(e){var s=r("getErrorSafe")(e);throw r("BladeRunnerLogger").exception(s,"Failed processing batch from MQTT"),r("BladeRunnerLogger").bumpCounter("socket_process_batch_error"),s}},a.$18=function(){this.$6.forEach(function(e,t,n){e.onDisconnect()})},a.$11=function(t,n){this.$24(t,n,o("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)},a.$24=function(t,n,r,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=n,e.status=r,e.shouldRetry=a,e.retryDelayMs=i;var l=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);t.onProxyResponse(l)},a.$10=function(){return r("CurrentUser").isLoggedIn()?!0:(r("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out"),!1)},a.$21=function(){var e=1048576,t=512*1024;try{var n=r("justknobx")._("317");t=n*e}catch(e){}return Math.max(t-1024,0)},t})();C.maxStreamCount=2e3,l.default=C}),98);
__d("BladeRunnerStream",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.getStreamHandler=function(){return this.$1},t.cancel=function(){},t.amendWithAck=async function(t){return!1},t.amendFireAndForget=function(t){},t.amendWithoutAck=function(t){},t.start=function(){return Promise.resolve()},t.isAlive=function(){return!1},t.canAmend=function(){return!1},t.getStatus=function(){return null},t.getStreamId=function(){return 0},e})();i.default=e}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var t=e.prototype;return t.getRequest=function(){return this.$1},t.updateRetryRequestPayload=function(t){this.$1.updateRetryRequestPayload(t)},t.isAlive=function(){return!(this.$2==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.REJECTED)},t.canAmend=function(){return this.$2==o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STOPPED},t.getLastStatus=function(){return this.$2},t.setLastStatus=function(t){this.$2=t},t.onError=function(){this.$3+=1},t.getErrorCount=function(){return this.$3},t.resetErrors=function(){this.$3=0},t.getRetryRequestScheduled=function(){return this.$6},t.setRetryRequestScheduled=function(t){this.$6=t},t.witnessFrame=function(t){switch(t.type){case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var e=t.getStatusUpdate(),n=!0;switch(e.status){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:n=!this.$4,this.$4||(this.$4=!0);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:n=this.getLastStatus()!=o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:n=this.getLastStatus()==o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:n=!0}return this.setLastStatus(e.status),n;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:return this.$7(t.getRewriteRequest()),!1;default:return!0}},t.setRetriesAllowed=function(t){this.$5=t},t.getRetriesAllowed=function(){return this.$5},t.$7=function(t){if(!(t.temporary!=null||t.temporary==!0)){if(t.newBody!=null&&(this.$1.payload=t.newBody),t.newExtraHeader!=null&&(this.$1.extraHeader=t.newExtraHeader,this.$1.headers=JSON.parse(t.newExtraHeader)),t.patchExtraHeader!=null)try{var e=JSON.parse(t.patchExtraHeader),n=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var o of Object.keys(e))this.$1.headers[o]=e[o],n[o]=e[o];this.$1.extraHeader=JSON.stringify(n)}catch(e){r("BladeRunnerLogger").warn("Failed to patch header: "+t.patchExtraHeader)}t.killBody!=null&&t.killBody==!0&&(this.$1.payload=null)}},e})();l.default=e}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","uuidv4"],(function(t,n,r,o,a,i,l){var e=4,s={reason:"stream_dead"},u=(function(t){function n(n,o,a){var i;return i=t.call(this,n)||this,i.$BladeRunnerSocketStream$p_1=a,i.$BladeRunnerSocketStream$p_2=new(r("BladeRunnerStreamState"))(o),i.$BladeRunnerSocketStream$p_2.setRetriesAllowed(e),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.start=function(){var e=this;return new Promise(function(t){e.send(),t()})},a.send=function(){var e,t,n=this.$BladeRunnerSocketStream$p_2.getRequest();(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(t=n.payload)==null||(t=t.length)==null?void 0:t.toString()}),this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())},a.amendWithAck=async function(t){var e,n=this.$BladeRunnerSocketStream$p_2.getRequest(),o=n.getInstrumentationData();if(o){var a,i;o.auxId=r("uuidv4")(),(a=n.e2eLogger)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(i=t.length)==null?void 0:i.toString()},o.auxId)}if(this.canAmend()){if(o){var l,u;(l=n.e2eLogger)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(u=t.length)==null?void 0:u.toString()},o.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(n.streamId,this.$BladeRunnerSocketStream$p_3(t),o==null?null:JSON.stringify(o))}return(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,s,o==null?void 0:o.auxId),Promise.reject("Stream is closed or not accepted")},a.amendFireAndForget=function(t){var e=this.$BladeRunnerSocketStream$p_2.getRequest(),n=e.getInstrumentationData();if(n){var o,a;n.auxId=r("uuidv4")(),(o=e.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(a=t.length)==null?void 0:a.toString()},n.auxId)}if(this.canAmend()){if(this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(t),n==null?null:JSON.stringify(n)),n){var i,l;(i=e.e2eLogger)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(l=t.length)==null?void 0:l.toString()},n.auxId)}}else{var u;throw(u=e.e2eLogger)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,s,n==null?void 0:n.auxId),new Error("Stream is closed or not accepted")}},a.amendWithoutAck=function(t){this.amendFireAndForget(t)},a.$BladeRunnerSocketStream$p_3=function(t){return typeof t=="object"?btoa(new TextDecoder("utf8").decode(t)):t},a.cancel=function(){var e,t=this.$BladeRunnerSocketStream$p_2.getRequest();(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(o("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())},a.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()},a.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()},a.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()},a.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId},n})(r("BladeRunnerStream"));l.default=u}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e==null?!1:e.requestId!=null&&typeof e.requestId=="string"&&e.forceLogContext!=null&&typeof e.forceLogContext=="string"}function u(e,t){var n=r("RequestStreamE2EClientSamplingConfig").sampleRate;if(n>1&&e!=null){var o=r("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[e];o==0?n=0:o!=null&&(n/=o)}return n==1?1:n/t}function c(e,t,n,o){var a=r("uuidv4")();(t.requestId==null||t.requestId===""||typeof t.requestId!="string")&&(e.requestId!=null&&typeof e.requestId=="string"?t.requestId=e.requestId:t.requestId=a),t.requestId+="/_"+a.substring(0,4),t.resumeId="0",n!=null?t.sampleRate=n:t.sampleRate=void 0;var i="";o!=null&&o.length>0&&(i=o),i.length>0&&(t.requestLogContext!=null&&t.requestLogContext.length>0?t.requestLogContext+=":":t.requestLogContext="",t.requestLogContext+=i),(e==null?void 0:e.method)==="Falco"&&(t.clientLoggingDisabled="Falco");var l={};for(var s of Object.keys(t).sort())l[s]=t[s];return JSON.stringify(l)}function d(t,n,o,a){n&&(!n.requestId.includes("/")&&!n.requestId.includes("#")||s(0,41721));var i=u(t.method,a!=null?a:1);return r("Random").coinflip(i)?c(t,n||{requestId:""},i,o):e(n)?c(t,n||{requestId:""},null,o):""}l.isForceLogged=e,l.getSampleRateForLogging=u,l.normalizeInstrumentationData=c,l.validateInstrumentationData=d}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=e!=null?e:r("BladeRunnerSocket").get(),t&&(this.$2=t)}var t=e.prototype;return t.createStream=function(t,n,r,o){return this.$3(t,n,r,o)},t.requestStream=function(t,r,o,a){var e=this.$3(t,r,o,a);return e.send(),n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),e},t.logInfo=function(t){r("BladeRunnerLogger").info(t)},t.bumpCounter=function(t){r("BladeRunnerLogger").bumpCounter(t)},t.$3=function(t,n,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamRequest;return e.streamId=this.$1.getNextStreamId(),e.requestType=o("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER,e.headers=r("BladeRunnerConfig").patchRequestHeaders(t),e.extraHeader=JSON.stringify(e.headers),e.payload=n!=null?r("Base64").encode(n):null,i!=null&&(i.transport="WEB_RS_MQTT"),e.instrumentationData=o("RequestStreamE2ESampling").validateInstrumentationData(e.headers||{},i),e.e2eLogger=o("RequestStreamE2ELogger").createStreamLogger(e.headers,e.instrumentationData,this.$2),new(r("BladeRunnerSocketStream"))(a,e,this.$1)},e})();l.default=e}),98);
__d("jsbi",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"&&typeof a!="undefined"?a.exports=t():typeof define=="function"&&define.amd?define(t):e.JSBI=t()})(this,function(){"use strict";function e(t){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(){return s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),a=new o;return n&&i(a,n.prototype),a},s.apply(null,arguments)}function u(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function c(e){var t=typeof Map=="function"?new Map:void 0;return c=function(e){function n(){return s(e,arguments,a(this).constructor)}if(e===null||!u(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},c(e)}function d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:d(e)}var p=(function(n){var i=Math.abs,l=Math.max,s=Math.imul,u=Math.clz32;function c(e,n){var r;if(t(this,c),e>c.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r=m(this,a(c).call(this,e)),r.sign=n,r}return o(c,n),r(c,[{key:"toDebugString",value:function(){var e=["BigInt["],t=!0,n=!1,r=void 0;try{for(var o,a,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)a=o.value,e.push((a&&(a>>>0).toString(16))+", ")}catch(e){n=!0,r=e}finally{try{t||i.return==null||i.return()}finally{if(n)throw r}}return e.push("]"),e.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?c.__toStringBasePowerOfTwo(this,e):c.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new c(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return u(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var r=65535&e,o=e>>>16,a=0,i=65535&t,l=t>>>16,u=0;u<n;u++){var c=this.__digit(u),d=65535&c,m=c>>>16,p=s(d,r),_=s(d,o),f=s(m,r),g=s(m,o),h=i+(65535&p),y=l+a+(h>>>16)+(p>>>16)+(65535&_)+(65535&f);i=(_>>>16)+(f>>>16)+(65535&g)+(y>>>16),a=i>>>16,i&=65535,l=g>>>16,this.__setDigit(u,65535&h|y<<16)}if(a!==0||i!==0||l!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var r,o=0,a=0;a<n;a++)r=this.__halfDigit(t+a)+e.__halfDigit(a)+o,o=r>>>16,this.__setHalfDigit(t+a,r);return o}},{key:"__inplaceSub",value:function(e,t,n){var r=0;if(1&t){t>>=1;for(var o=this.__digit(t),a=65535&o,i=0;i<n-1>>>1;i++){var l=e.__digit(i),s=(o>>>16)-(65535&l)-r;r=1&s>>>16,this.__setDigit(t+i,s<<16|65535&a),o=this.__digit(t+i+1),a=(65535&o)-(l>>>16)-r,r=1&a>>>16}var u=e.__digit(i),c=(o>>>16)-(65535&u)-r;if(r=1&c>>>16,this.__setDigit(t+i,c<<16|65535&a),t+i+1>=this.length)throw new RangeError("out of bounds");(1&n)==0&&(o=this.__digit(t+i+1),a=(65535&o)-(u>>>16)-r,r=1&a>>>16,this.__setDigit(t+e.length,4294901760&o|65535&a))}else{t>>=1;for(var d=0;d<e.length-1;d++){var m=this.__digit(t+d),p=e.__digit(d),_=(65535&m)-(65535&p)-r;r=1&_>>>16;var f=(m>>>16)-(p>>>16)-r;r=1&f>>>16,this.__setDigit(t+d,f<<16|65535&_)}var g=this.__digit(t+d),h=e.__digit(d),y=(65535&g)-(65535&h)-r;r=1&y>>>16;var C=0;(1&n)==0&&(C=(g>>>16)-(h>>>16)-r,r=1&C>>>16),this.__setDigit(t+d,C<<16|65535&y)}return r}},{key:"__inplaceRightShift",value:function(e){if(e!==0){for(var t,n=this.__digit(0)>>>e,r=this.length-1,o=0;o<r;o++)t=this.__digit(o+1),this.__setDigit(o,t<<32-e|n),n=t>>>e;this.__setDigit(r,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,r=this.__digit(n),o=1&e?65535&r|t<<16:4294901760&r|65535&t;this.__setDigit(n,o)}}],[{key:"BigInt",value:function(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return c.__zero();if((0|t)===t)return 0>t?c.__oneDigit(-t,!0):c.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return c.__fromDouble(t)}if(typeof t=="string"){var o=c.__fromString(t);if(o===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return o}if(typeof t=="boolean")return t===!0?c.__oneDigit(1,!1):c.__zero();if(e(t)==="object"){if(t.constructor===c)return t;var a=c.__toPrimitive(t);return c.BigInt(a)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(t===0)return 0;if(t===1){var n=e.__unsignedDigit(0);return e.sign?-n:n}var r=e.__digit(t-1),o=u(r),a=32*t-o;if(1024<a)return e.sign?-1/0:1/0;var i=a-1,l=r,s=t-1,d=o+1,m=d===32?0:l<<d;m>>>=12;var p=d-12,_=12<=d?0:l<<20+d,f=20+d;0<p&&0<s&&(s--,l=e.__digit(s),m|=l>>>32-p,_=l<<p,f=p),0<f&&0<s&&(s--,l=e.__digit(s),_|=l>>>32-f,f-=32);var g=c.__decideRounding(e,f,s,l);if((g===1||g===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(m++,m>>>20!=0&&(m=0,i++,1023<i))))return e.sign?-1/0:1/0;var h=e.sign?-2147483648:0;return i=i+1023<<20,c.__kBitConversionInts[1]=h|i|m,c.__kBitConversionInts[0]=_,c.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(e.length===0)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?c.__absoluteSubOne(e).__trim():c.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return c.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&t.__digit(0))==0?c.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(n===1)return e;if(n>=c.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){var r=1+(n>>>5),o=e.sign&&(1&n)!=0,a=new c(r,o);a.__initializeDigits();var i=1<<(31&n);return a.__setDigit(r-1,i),a}var l=null,s=e;for((1&n)!=0&&(l=e),n>>=1;n!==0;n>>=1)s=c.multiply(s,s),(1&n)!=0&&(l===null?l=s:l=c.multiply(l,s));return l}},{key:"multiply",value:function(e,t){if(e.length===0)return e;if(t.length===0)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--;var r=new c(n,e.sign!==t.sign);r.__initializeDigits();for(var o=0;o<e.length;o++)c.__multiplyAccumulate(t,e.__digit(o),r,o);return r.__trim()}},{key:"divide",value:function(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(e,t))return c.__zero();var n,r=e.sign!==t.sign,o=t.__unsignedDigit(0);if(t.length===1&&65535>=o){if(o===1)return r===e.sign?e:c.unaryMinus(e);n=c.__absoluteDivSmall(e,o,null)}else n=c.__absoluteDivLarge(e,t,!0,!1);return n.sign=r,n.__trim()}},{key:"remainder",value:function(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(t,n))return t;var e=n.__unsignedDigit(0);if(n.length===1&&65535>=e){if(e===1)return c.__zero();var r=c.__absoluteModSmall(t,e);return r===0?c.__zero():c.__oneDigit(r,t.sign)}var o=c.__absoluteDivLarge(t,n,!1,!0);return o.sign=t.sign,o.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?c.__absoluteAdd(e,t,n):0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n):c.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__rightShiftByAbsolute(e,t):c.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__leftShiftByAbsolute(e,t):c.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>c.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=c.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<c.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=c.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!c.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length)+1,r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteOr(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}return c.__absoluteAndNot(e,c.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length),r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return c.__absoluteXor(r,o,r).__trim()}var a=l(e.length,t.length)+1;if(e.sign){var i=[t,e];e=i[0],t=i[1]}var s=c.__absoluteSubOne(t,a);return s=c.__absoluteXor(s,e,s),c.__absoluteAddOne(s,!0,s).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=l(e.length,t.length);if(!e.sign&&!t.sign)return c.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteAnd(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}var i=c.__absoluteSubOne(t,n);return i=c.__absoluteAndNot(i,e,i),c.__absoluteAddOne(i,!0,i).__trim()}},{key:"asIntN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=t.__unsignedDigit(n-1),o=1<<(31&e-1);if(t.length===n&&r<o)return t;if((r&o)!==o)return c.__truncateToNBits(e,t);if(!t.sign)return c.__truncateAndSubFromPowerOfTwo(e,t,!0);if((r&o-1)==0){for(var a=n-2;0<=a;a--)if(t.__digit(a)!==0)return c.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&r===o?t:c.__truncateToNBits(e,t)}return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(t.sign){if(e>c.__kMaxLengthBits)throw new RangeError("BigInt too big");return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=31&e;if(t.length==n){if(r==0)return t;var o=t.__digit(n-1);if(!(o>>>r))return t}return c.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)&&c.__isBigInt(t))return c.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return c.__compare(e,t,0)}},{key:"LE",value:function(e,t){return c.__compare(e,t,1)}},{key:"GT",value:function(e,t){return c.__compare(e,t,2)}},{key:"GE",value:function(e,t){return c.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(c.__isBigInt(t))return c.__isBigInt(n)?c.equal(t,n):c.EQ(n,t);if(typeof t=="number"){if(c.__isBigInt(n))return c.__equalToNumber(n,t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="string"){if(c.__isBigInt(n))return t=c.__fromString(t),t!==null&&c.equal(t,n);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="boolean"){if(c.__isBigInt(n))return c.__equalToNumber(n,+t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="symbol"){if(c.__isBigInt(n))return!1;if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="object"){if(e(n)==="object"&&n.constructor!==c)return t==n;t=c.__toPrimitive(t)}else return t==n}}},{key:"NE",value:function(e,t){return!c.EQ(e,t)}},{key:"__zero",value:function(){return new c(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new c(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,r){if(0<t)return-1;var o;if(0>t)o=-t-1;else{if(n===0)return-1;n--,r=e.__digit(n),o=31}var a=1<<o;if((r&a)==0)return-1;if(a-=1,(r&a)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}},{key:"__fromDouble",value:function(e){c.__kBitConversionDouble[0]=e;var t,n=2047&c.__kBitConversionInts[1]>>>20,r=n-1023,o=(r>>>5)+1,a=new c(o,0>e),i=1048575&c.__kBitConversionInts[1]|1048576,l=c.__kBitConversionInts[0],s=20,u=31&r,d=0;if(u<s){var m=s-u;d=m+32,t=i>>>m,i=i<<32-m|l>>>m,l<<=32-m}else if(u===s)d=32,t=i,i=l;else{var p=u-s;d=32-p,t=i<<p|l>>>32-p,i=l<<p}a.__setDigit(o-1,t);for(var _=o-2;0<=_;_--)0<d?(d-=32,t=i,i=l):t=0,a.__setDigit(_,t);return a.__trim()}},{key:"__isWhitespace",value:function(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=0,r=e.length,o=0;if(o===r)return c.__zero();for(var a=e.charCodeAt(o);c.__isWhitespace(a);){if(++o===r)return c.__zero();a=e.charCodeAt(o)}if(a===43){if(++o===r)return null;a=e.charCodeAt(o),n=1}else if(a===45){if(++o===r)return null;a=e.charCodeAt(o),n=-1}if(t===0){if(t=10,a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(t=16,++o===r)return null;a=e.charCodeAt(o)}else if(a===79||a===111){if(t=8,++o===r)return null;a=e.charCodeAt(o)}else if(a===66||a===98){if(t=2,++o===r)return null;a=e.charCodeAt(o)}}}else if(t===16&&a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(++o===r)return null;a=e.charCodeAt(o)}}for(;a===48;){if(++o===r)return c.__zero();a=e.charCodeAt(o)}var i=r-o,l=c.__kMaxBitsPerChar[t],s=c.__kBitsPerCharTableMultiplier-1;if(i>1073741824/l)return null;var u=l*i+s>>>c.__kBitsPerCharTableShift,d=new c(u+31>>>5,!1),m=10>t?t:10,p=10<t?t-10:0;if((t&t-1)==0){l>>=c.__kBitsPerCharTableShift;var _=[],f=[],g=!1;do{for(var h,y=0,C=0;;){if(h=void 0,a-48>>>0<m)h=a-48;else if((32|a)-97>>>0<p)h=(32|a)-87;else{g=!0;break}if(C+=l,y=y<<l|h,++o===r){g=!0;break}if(a=e.charCodeAt(o),32<C+l)break}_.push(y),f.push(C)}while(!g);c.__fillFromParts(d,_,f)}else{d.__initializeDigits();var b=!1,v=0;do{for(var S,R=0,L=1;;){if(S=void 0,a-48>>>0<m)S=a-48;else if((32|a)-97>>>0<p)S=(32|a)-87;else{b=!0;break}var E=L*t;if(4294967295<E)break;if(L=E,R=R*t+S,v++,++o===r){b=!0;break}a=e.charCodeAt(o)}s=32*c.__kBitsPerCharTableMultiplier-1;var k=l*v+s>>>c.__kBitsPerCharTableShift+5;d.__inplaceMultiplyAdd(L,R,k)}while(!b)}if(o!==r){if(!c.__isWhitespace(a))return null;for(o++;o<r;o++)if(a=e.charCodeAt(o),!c.__isWhitespace(a))return null}return n!==0&&t!==10?null:(d.sign=n===-1,d.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var r=0,o=0,a=0,i=t.length-1;0<=i;i--){var l=t[i],s=n[i];o|=l<<a,a+=s,a===32?(e.__setDigit(r++,o),a=0,o=0):32<a&&(e.__setDigit(r++,o),a-=32,o=l>>>s-a)}if(o!==0){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,o)}for(;r<e.length;r++)e.__setDigit(r,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,r=t-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);var o=r,a=t-1,i=e.__digit(n-1),l=u(i),s=0|(32*n-l+o-1)/o;if(e.sign&&s++,268435456<s)throw new Error("string too long");for(var d=Array(s),m=s-1,p=0,_=0,f=0;f<n-1;f++){var g=e.__digit(f),h=(p|g<<_)&a;d[m--]=c.__kConversionChars[h];var y=o-_;for(p=g>>>y,_=32-y;_>=o;)d[m--]=c.__kConversionChars[p&a],p>>>=o,_-=o}var C=(p|i<<_)&a;for(d[m--]=c.__kConversionChars[C],p=i>>>o-_;p!==0;)d[m--]=c.__kConversionChars[p&a],p>>>=o;if(e.sign&&(d[m--]="-"),m!==-1)throw new Error("implementation bug");return d.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var r=e.length;if(r===0)return"";if(r===1){var o=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(o="-"+o),o}var a=32*r-u(e.__digit(r-1)),i=c.__kMaxBitsPerChar[t],l=i-1,s=a*c.__kBitsPerCharTableMultiplier;s+=l-1,s=0|s/l;var d,m,p=s+1>>1,_=c.exponentiate(c.__oneDigit(t,!1),c.__oneDigit(p,!1)),f=_.__unsignedDigit(0);if(_.length===1&&65535>=f){d=new c(e.length,!1),d.__initializeDigits();for(var g,h=0,y=2*e.length-1;0<=y;y--)g=h<<16|e.__halfDigit(y),d.__setHalfDigit(y,0|g/f),h=0|g%f;m=h.toString(t)}else{var C=c.__absoluteDivLarge(e,_,!0,!0);d=C.quotient;var b=C.remainder.__trim();m=c.__toStringGeneric(b,t,!0)}d.__trim();for(var v=c.__toStringGeneric(d,t,!0);m.length<p;)m="0"+m;return n===!1&&e.sign&&(v="-"+v),v+m}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return c.__unequalSign(n);var r=c.__absoluteCompare(e,t);return 0<r?c.__absoluteGreater(n):0>r?c.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(!0|t){var n=e.sign,r=0>t;if(n!==r)return c.__unequalSign(n);if(e.length===0){if(r)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return c.__absoluteGreater(n);var o=i(t),a=e.__unsignedDigit(0);return a>o?c.__absoluteGreater(n):a<o?c.__absoluteLess(n):0}return c.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;var n=e.sign;if(n!==0>t)return c.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;c.__kBitConversionDouble[0]=t;var r=2047&c.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");var o=r-1023;if(0>o)return c.__absoluteGreater(n);var a=e.length,i=e.__digit(a-1),l=u(i),s=32*a-l,d=o+1;if(s<d)return c.__absoluteLess(n);if(s>d)return c.__absoluteGreater(n);var m=1048576|1048575&c.__kBitConversionInts[1],p=c.__kBitConversionInts[0],_=20,f=31-l;if(f!==(s-1)%31)throw new Error("implementation bug");var g,h=0;if(f<_){var y=_-f;h=y+32,g=m>>>y,m=m<<32-y|p>>>y,p<<=32-y}else if(f===_)h=32,g=m,m=p;else{var C=f-_;h=32-C,g=m<<C|p>>>32-C,m=p<<C}if(i>>>=0,g>>>=0,i>g)return c.__absoluteGreater(n);if(i<g)return c.__absoluteLess(n);for(var b=a-2;0<=b;b--){0<h?(h-=32,g=m>>>0,m=p,p=0):g=0;var v=e.__unsignedDigit(b);if(v>g)return c.__absoluteGreater(n);if(v<g)return c.__absoluteLess(n)}if(m!==0||p!==0){if(h===0)throw new Error("implementation bug");return c.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|t===0?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===i(t):c.__compareToDouble(e,t)===0}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return 0<e;case 3:return 0<=e}throw new Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(c.__isBigInt(e)&&typeof t=="string")return t=c.__fromString(t),t!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof e=="string"&&c.__isBigInt(t))return e=c.__fromString(e),e!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)){if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return c.__comparisonResultToBool(c.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return c.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);var r=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&r++;for(var o=new c(r,n),a=0,i=0;i<t.length;i++){var l=t.__digit(i),s=e.__digit(i),u=(65535&s)+(65535&l)+a,d=(s>>>16)+(l>>>16)+(u>>>16);a=d>>>16,o.__setDigit(i,65535&u|d<<16)}for(;i<e.length;i++){var m=e.__digit(i),p=(65535&m)+a,_=(m>>>16)+(p>>>16);a=_>>>16,o.__setDigit(i,65535&p|_<<16)}return i<o.length&&o.__setDigit(i,a),o.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);for(var r=new c(e.length,n),o=0,a=0;a<t.length;a++){var i=e.__digit(a),l=t.__digit(a),s=(65535&i)-(65535&l)-o;o=1&s>>>16;var u=(i>>>16)-(l>>>16)-o;o=1&u>>>16,r.__setDigit(a,65535&s|u<<16)}for(;a<e.length;a++){var d=e.__digit(a),m=(65535&d)-o;o=1&m>>>16;var p=(d>>>16)-o;o=1&p>>>16,r.__setDigit(a,65535&m|p<<16)}return r.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length;n===null?n=new c(r,t):n.sign=t;for(var o=!0,a=0;a<r;a++){var i=e.__digit(a),l=i===-1;o&&(i=0|i+1),o=l,n.__setDigit(a,i)}return o&&n.__setDigitGrow(r,1),n}},{key:"__absoluteSubOne",value:function(e,t){var n=e.length;t=t||n;for(var r=new c(t,!1),o=!0,a=0;a<n;a++){var i=e.__digit(a),l=i===0;o&&(i=0|i-1),o=l,r.__setDigit(a,i)}for(var s=n;s<t;s++)r.__setDigit(s,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=a;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;r<o&&(a=r);var i=r;n===null?n=new c(i,!1):i=n.length;for(var l=0;l<a;l++)n.__setDigit(l,e.__digit(l)&~t.__digit(l));for(;l<r;l++)n.__setDigit(l,e.__digit(l));for(;l<i;l++)n.__setDigit(l,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(n!=0)return n;for(var r=e.length-1;0<=r&&e.__digit(r)===t.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>t.__unsignedDigit(r)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,r){if(t!==0){for(var o=65535&t,a=t>>>16,i=0,l=0,u=0,c=0;c<e.length;c++,r++){var d=n.__digit(r),m=65535&d,p=d>>>16,_=e.__digit(c),f=65535&_,g=_>>>16,h=s(f,o),y=s(f,a),C=s(g,o),b=s(g,a);m+=l+(65535&h),p+=u+i+(m>>>16)+(h>>>16)+(65535&y)+(65535&C),i=p>>>16,l=(y>>>16)+(C>>>16)+(65535&b)+i,i=l>>>16,l&=65535,u=b>>>16,d=65535&m|p<<16,n.__setDigit(r,d)}for(;i!==0||l!==0||u!==0;r++){var v=n.__digit(r),S=(65535&v)+l,R=(v>>>16)+(S>>>16)+u+i;l=0,u=0,i=R>>>16,v=65535&S|R<<16,n.__setDigit(r,v)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,r,o){for(var a=n,i=0,l=0;l<r;l++){var u=e.__digit(l),c=s(65535&u,t),d=(65535&c)+i+a;a=d>>>16;var m=s(u>>>16,t),p=(65535&m)+(c>>>16)+a;a=p>>>16,i=m>>>16,o.__setDigit(l,p<<16|65535&d)}if(o.length>r)for(o.__setDigit(r++,a+i);r<o.length;)o.__setDigit(r++,0);else if(a+i!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){n===null&&(n=new c(e.length,!1));for(var r=0,o=2*e.length-1;0<=o;o-=2){var a=(r<<16|e.__halfDigit(o))>>>0,i=0|a/t;r=0|a%t,a=(r<<16|e.__halfDigit(o-1))>>>0;var l=0|a/t;r=0|a%t,n.__setDigit(o>>>1,i<<16|l)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n,r=0,o=2*e.length-1;0<=o;o--)n=(r<<16|e.__halfDigit(o))>>>0,r=0|n%t;return r}},{key:"__absoluteDivLarge",value:function(e,t,n,r){var o=t.__halfDigitLength(),a=t.length,i=e.__halfDigitLength()-o,l=null;n&&(l=new c(i+2>>>1,!1),l.__initializeDigits());var u=new c(o+2>>>1,!1);u.__initializeDigits();var d=c.__clz16(t.__halfDigit(o-1));0<d&&(t=c.__specialLeftShift(t,d,0));for(var m=c.__specialLeftShift(e,d,1),p=t.__halfDigit(o-1),_=0,f=i;0<=f;f--){var g=65535,h=m.__halfDigit(f+o);if(h!==p){var y=(h<<16|m.__halfDigit(f+o-1))>>>0;g=0|y/p;for(var C=0|y%p,b=t.__halfDigit(o-2),v=m.__halfDigit(f+o-2);s(g,b)>>>0>(C<<16|v)>>>0&&(g--,C+=p,!(65535<C)););}c.__internalMultiplyAdd(t,g,0,a,u);var S=m.__inplaceSub(u,f,o+1);S!==0&&(S=m.__inplaceAdd(t,f,o),m.__setHalfDigit(f+o,m.__halfDigit(f+o)+S),g--),n&&(1&f?_=g<<16:l.__setDigit(f>>>1,_|g))}return r?(m.__inplaceRightShift(d),n?{quotient:l,remainder:m}:m):n?l:void 0}},{key:"__clz16",value:function(e){return u(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var r=e.length,o=new c(r+n,!1);if(t===0){for(var a=0;a<r;a++)o.__setDigit(a,e.__digit(a));return 0<n&&o.__setDigit(r,0),o}for(var i,l=0,s=0;s<r;s++)i=e.__digit(s),o.__setDigit(s,i<<t|l),l=i>>>32-t;return 0<n&&o.__setDigit(r,l),o}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=c.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var r=n>>>5,o=31&n,a=e.length,i=o!==0&&e.__digit(a-1)>>>32-o!=0,l=a+r+(i?1:0),s=new c(l,e.sign);if(o===0){for(var u=0;u<r;u++)s.__setDigit(u,0);for(;u<l;u++)s.__setDigit(u,e.__digit(u-r))}else{for(var d=0,m=0;m<r;m++)s.__setDigit(m,0);for(var p,_=0;_<a;_++)p=e.__digit(_),s.__setDigit(_+r,p<<o|d),d=p>>>32-o;if(i)s.__setDigit(a+r,d);else if(d!==0)throw new Error("implementation bug")}return s.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,r=e.sign,o=c.__toShiftAmount(t);if(0>o)return c.__rightShiftByMaximum(r);var a=o>>>5,i=31&o,l=n-a;if(0>=l)return c.__rightShiftByMaximum(r);var s=!1;if(r){if((e.__digit(a)&(1<<i)-1)!=0)s=!0;else for(var u=0;u<a;u++)if(e.__digit(u)!==0){s=!0;break}}if(s&&i===0){var d=e.__digit(n-1);~d==0&&l++}var m=new c(l,r);if(i===0)for(var p=a;p<n;p++)m.__setDigit(p-a,e.__digit(p));else{for(var _,f=e.__digit(a)>>>i,g=n-a-1,h=0;h<g;h++)_=e.__digit(h+a+1),m.__setDigit(h,_<<32-i|f),f=_>>>i;m.__setDigit(g,f)}return s&&(m=c.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?c.__oneDigit(1,!0):c.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>c.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(e(t)!=="object"||t.constructor===c)return t;var r=t[Symbol.toPrimitive];if(r){var o=r(n);if(e(o)!=="object")return o;throw new TypeError("Cannot convert object to primitive value")}var a=t.valueOf;if(a){var i=a.call(t);if(e(i)!=="object")return i}var l=t.toString;if(l){var s=l.call(t);if(e(s)!=="object")return s}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return c.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return e(t)==="object"&&t.constructor===c}},{key:"__truncateToNBits",value:function(e,t){for(var n=e+31>>>5,r=new c(n,t.sign),o=n-1,a=0;a<o;a++)r.__setDigit(a,t.__digit(a));var i=t.__digit(o);if((31&e)!=0){var l=32-(31&e);i=i<<l>>>l}return r.__setDigit(o,i),r.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var r=Math.min,o=e+31>>>5,a=new c(o,n),i=0,l=o-1,s=0,u=r(l,t.length);i<u;i++){var d=t.__digit(i),m=0-(65535&d)-s;s=1&m>>>16;var p=0-(d>>>16)-s;s=1&p>>>16,a.__setDigit(i,65535&m|p<<16)}for(;i<l;i++)a.__setDigit(i,0|-s);var _,f=l<t.length?t.__digit(l):0,g=31&e;if(g===0){var h=0-(65535&f)-s;s=1&h>>>16;var y=0-(f>>>16)-s;_=65535&h|y<<16}else{var C=32-g;f=f<<C>>>C;var b=1<<32-C,v=(65535&b)-(65535&f)-s;s=1&v>>>16;var S=(b>>>16)-(f>>>16)-s;_=65535&v|S<<16,_&=b-1}return a.__setDigit(l,_),a.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),c})(c(Array));return p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(t,n,r,o,a,i,l){var e,s,u=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),c=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:u.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:u.CT_BOOLEAN_FALSE}),d=[u.CT_STOP,0,u.CT_BOOLEAN_TRUE,u.CT_BYTE,u.CT_DOUBLE,0,u.CT_I16,0,u.CT_I32,0,u.CT_I64,u.CT_BINARY,u.CT_STRUCT,u.CT_MAP,u.CT_SET,u.CT_LIST,0,0,0,u.CT_FLOAT],m=Math.pow(2,7)-1,p=-1*Math.pow(2,7),_=Math.pow(2,15)-1,f=-1*Math.pow(2,15),g=Math.pow(2,31)-1,h=-1*Math.pow(2,31),y=Math.pow(2,32)-1,C=(s=r("jsbi")).BigInt("9223372036854775807"),b=s.BigInt("-9223372036854775808"),v=s.BigInt("18446744073709551615"),S=s.BigInt(63),R=s.BigInt(1),L=s.BigInt(0),E=s.BigInt(7),k=s.BigInt(70),I=s.BigInt(127),T=s.BigInt(128),D=Math.pow(2,4),x=(function(){function t(e){this.$4=null,this.$5=null,this.$1=e,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var n=t.prototype;return n.readStructBegin=function(){this.$2.push(this.$3),this.$3=0},n.readStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeStructBegin=function(t){return this.$2.push(this.$3),this.$3=0,0},n.writeStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeFieldBegin=function(n){return n.ftype===(e||(e=r("ThriftTypes"))).BOOL?(this.$4={fid:n.fid,fname:n.fname,ftype:n.ftype},0):this.$7(n,c.NONE)},n.writeListBegin=function(t){return this.$8(t)},n.writeListEnd=function(){return 0},n.writeSetBegin=function(t){return this.$8(t)},n.writeSetEnd=function(){return 0},n.writeMapBegin=function(t){var e=0;if(t.size===0)e+=this.$1.writeByte(0);else if(e+=this.writeVarint32(t.size),t.ktype!=null&&t.vtype!=null)e+=this.$1.writeByte(this.$9(t.ktype)<<4|this.$9(t.vtype));else throw new Error("received invalid map info: "+JSON.stringify(t));return e},n.writeMapEnd=function(){return 0},n.$7=function(t,n){var e=0,r=n===c.NONE?this.$9(t.ftype):n;return t.fid>this.$3&&t.fid-this.$3<=D-1?e+=this.$1.writeByte(t.fid-this.$3<<4|r):(e+=this.$1.writeByte(r),e+=this.writeI16(t.fid)),this.$3=t.fid,e},n.$8=function(t){var e=0,n=this.$9(t.etype);return t.size<=D-2?e+=this.$1.writeByte(t.size<<4|n):(e+=this.$1.writeByte(240|n),e+=this.writeVarint32(t.size)),e},n.readFieldBegin=function(){var t=this.$1.readByte(),n=t&15;if(n===(e||(e=r("ThriftTypes"))).STOP)return{ftype:(e||(e=r("ThriftTypes"))).STOP,fid:0};var o=(t&240)>>>4,a;o===0?a=this.readI16():a=this.$3+o;var i=this.$10(n);return(n===u.CT_BOOLEAN_TRUE||n===u.CT_BOOLEAN_FALSE)&&(this.$5=n===u.CT_BOOLEAN_TRUE),this.$3=a,{ftype:i,fid:a}},n.readListBegin=function(){return this.$11()},n.readListEnd=function(){return 0},n.readSetBegin=function(){return this.$11()},n.readSetEnd=function(){return 0},n.readMapBegin=function(){var e=this.readVarint32();if(e>0){var t=this.$1.readByte(),n=this.$12(t>>4,"readMapBegin:key"),r=this.$12(t&15,"readMapBegin:value");return{ktype:this.$10(n),vtype:this.$10(r),size:e}}return{size:e}},n.readMapEnd=function(){return 0},n.$12=function(t,n){if(t<0||t>13)throw new Error(n+" read invalid compact type: "+t);return t},n.$11=function(){var e=this.$1.readByte(),t=this.$12(e&15,"_readListOrSetBegin"),n=this.$10(t),r=e>>4&15;return r===15&&(r=this.readVarint32()),{etype:n,size:r}},n.readFieldEnd=function(){return 0},n.readByte=function(){return this.$6.setUint8(0,this.$1.readByte()),this.$6.getInt8(0)},n.writeByte=function(t){if(t<p||t>m)throw new Error("byte to write is out of range: "+t);return this.$6.setInt8(0,t),this.$1.writeByte(this.$6.getUint8(0))},n.readFloat=function(){return this.$1.readFloatBE()},n.writeFloat=function(t){return this.$1.writeFloatBE(t)},n.readDouble=function(){return this.$1.readDoubleBE()},n.writeDouble=function(t){return this.$1.writeDoubleBE(t)},n.writeString=function(t){return this.writeBinary(o("StringToUtf8").StringToUtf8(t))},n.skip=function(n){switch(n){case(e||(e=r("ThriftTypes"))).STOP:return;case(e||(e=r("ThriftTypes"))).BOOL:this.readBool();break;case(e||(e=r("ThriftTypes"))).BYTE:this.readByte();break;case(e||(e=r("ThriftTypes"))).DOUBLE:this.readDouble();break;case(e||(e=r("ThriftTypes"))).I16:this.readI16();break;case(e||(e=r("ThriftTypes"))).I32:this.readI32();break;case(e||(e=r("ThriftTypes"))).I64:this.readI64();break;case(e||(e=r("ThriftTypes"))).STRING:this.readString();break;case(e||(e=r("ThriftTypes"))).STRUCT:{this.readStructBegin();for(var t;t=this.readFieldBegin(),t.ftype!==(e||(e=r("ThriftTypes"))).STOP;)this.skip(t.ftype);this.readStructEnd();break}case(e||(e=r("ThriftTypes"))).MAP:{var o=this.readMapBegin();if(o.size>0&&o.ktype!=null&&o.vtype!=null)for(var a=o.ktype,i=o.vtype,l=0;l<o.size;l++)this.skip(a),this.skip(i);break}case(e||(e=r("ThriftTypes"))).SET:case(e||(e=r("ThriftTypes"))).LIST:{for(var s=this.$11(),u=0;u<s.size;u++)this.skip(s.etype);break}case(e||(e=r("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+n+" in skip")}},n.toByteArray=function(){return this.$1.toByteArray()},n.writeFieldEnd=function(){return 0},n.writeFieldStop=function(){return this.$1.writeByte((e||(e=r("ThriftTypes"))).STOP)},n.writeI16=function(t){if(t<f||t>_)throw new Error("trying to write i16 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI16=function(){var e=this.zigzagToI32(this.readVarint32());if(e<f||e>_)throw new Error("read invalid i16: "+e);return e},n.writeI32=function(t){if(t<h||t>g)throw new Error("i32 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI32=function(){return this.zigzagToI32(this.readVarint32())},n.writeI64=function(t){return this.writeVarint64(this.i64ToZigzag(t))},n.readI64=function(){return this.zigzagToI64(this.readVarint64())},n.readBool=function(){var e;return this.$5!=null?(e=this.$5,this.$5=null):e=this.$1.readByte()===u.CT_BOOLEAN_TRUE,e},n.writeBool=function(t){var e=0;return this.$4!=null?(e+=this.$7(this.$4,t?c.CT_BOOLEAN_TRUE:c.CT_BOOLEAN_FALSE),this.$4=null):e+=this.$1.writeByte(t?u.CT_BOOLEAN_TRUE:u.CT_BOOLEAN_FALSE),e},n.readBinary=function(){var e=this.readVarint32();return e===0?new Uint8Array(0):this.$1.readBytes(e)},n.writeBinary=function(t){var e=0;return e+=this.writeVarint32(t.length),e+=this.$1.write(t),e},n.i32ToZigzag=function(t){if(t<h||t>g)throw new Error("number: "+t+" is out of range of i32");return(t<<1^(t<0?4294967295:0))>>>0},n.zigzagToI32=function(t){if(t<0||t>y)throw new Error("number: "+t+" is out of range of uint32");return t>>>1^-1*(t&1)},n.i64ToZigzag=function(t){if(r("jsbi").greaterThan(t,C)||r("jsbi").lessThan(t,b))throw new Error("i64 out of range: "+t.toString());return r("jsbi").bitwiseXor(r("jsbi").signedRightShift(t,S),r("jsbi").leftShift(t,R))},n.zigzagToI64=function(t){if(r("jsbi").lessThan(t,0)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());return r("jsbi").equal(r("jsbi").bitwiseAnd(t,R),R)?r("jsbi").bitwiseNot(r("jsbi").signedRightShift(t,R)):r("jsbi").signedRightShift(t,R)},n.writeVarint32=function(t){if(t<0||t>y)throw new Error("writeVarint32 received out of range uint32: "+t);for(var e=t,n=0;;)if(e>>>7)this.$1.writeByte(e&127|128),n++,e>>>=7;else{this.$1.writeByte(e),n++;break}return n},n.readVarint32=function(){for(var e=0,t=0,n;;){if(n=this.$1.readByte(),e=(e|(n&127)<<t)>>>0,t+=7,(n&128)==0){if(t===35&&(n&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(t>28)throw new Error("result exceeded 32 bit limit")}return e},n.writeVarint64=function(t){if(r("jsbi").lessThan(t,L)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());for(var e=t,n=0;;)if(r("jsbi").equal(r("jsbi").signedRightShift(e,E),L)){this.$1.writeByte(r("jsbi").toNumber(e)),n++;break}else{var o,a=(o=r("jsbi")).toNumber(o.bitwiseOr(o.bitwiseAnd(e,I),T));this.$1.writeByte(a),n++,e=o.signedRightShift(e,E)}return n},n.readVarint64=function(){for(var e=L,t=L,n;;){var o;if(n=(o=r("jsbi")).BigInt(this.$1.readByte()),e=o.bitwiseOr(e,o.leftShift(o.bitwiseAnd(n,I),t)),t=o.add(t,E),r("jsbi").equal(r("jsbi").bitwiseAnd(n,T),L)){if(r("jsbi").equal(t,k)&&r("jsbi").notEqual(n,R))throw new Error("result exceeded 64 bit limit");break}if(r("jsbi").greaterThan(t,S))throw new Error("result exceeded 64 bit limit")}return e},n.readString=function(){return o("Utf8ToString").Utf8ToString(this.readBinary())},n.getLastFieldId=function(){return this.$3},n.getLastField=function(){return this.$2},n.getBooleanFieldInfo=function(){return this.$4},n.getBooleanValue=function(){return this.$5},n.$9=function(t){return d[t]},n.$10=function(n){switch(n){case u.CT_STOP:return(e||(e=r("ThriftTypes"))).STOP;case u.CT_BOOLEAN_FALSE:case u.CT_BOOLEAN_TRUE:return(e||(e=r("ThriftTypes"))).BOOL;case u.CT_BYTE:return(e||(e=r("ThriftTypes"))).BYTE;case u.CT_I16:return(e||(e=r("ThriftTypes"))).I16;case u.CT_I32:return(e||(e=r("ThriftTypes"))).I32;case u.CT_I64:return(e||(e=r("ThriftTypes"))).I64;case u.CT_DOUBLE:return(e||(e=r("ThriftTypes"))).DOUBLE;case u.CT_FLOAT:return(e||(e=r("ThriftTypes"))).FLOAT;case u.CT_BINARY:return(e||(e=r("ThriftTypes"))).STRING;case u.CT_LIST:return(e||(e=r("ThriftTypes"))).LIST;case u.CT_SET:return(e||(e=r("ThriftTypes"))).SET;case u.CT_MAP:return(e||(e=r("ThriftTypes"))).MAP;case u.CT_STRUCT:return(e||(e=r("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}},t})();l.default=x}),98);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new(r("TReadBuffer"))(e),o=new(r("TCompactProtocolPolyfill"))(n);return t(o)}function s(t,n,r){try{return e(t,n)}catch(e){r!=null&&r(e)}return null}function u(e,t,n){n===void 0&&(n=!1);var o;if(n){var a=new(r("TNoOpWriteBuffer")),i=new(r("TCompactProtocolPolyfill"))(a);t(e,i),o=new(r("TWriteBuffer"))(a.currentSize())}else o=new(r("TWriteBuffer"));var l=new(r("TCompactProtocolPolyfill"))(o);return t(e,l),l.toByteArray()}function c(e,t,n,r){n===void 0&&(n=!1);try{return u(e,t,n)}catch(e){r!=null&&r(e)}return null}l.deserialize=e,l.deserializeNoThrow=s,l.serialize=u,l.serializeNoThrow=c}),98);
__d("ContextualConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=", ",s={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"},u={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"},c=[],d=[],m=[],p={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},_=10,f=", ",g={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};i.ANALYTICS_SAMPLE_RATE=e,i.BUCKET_DELIMITER=l,i.CONTEXT_BUCKET_STRATEGY=s,i.CONFIG_TYPE=u,i.EMPTY_RESOLVED_CONTEXTS=c,i.EMPTY_RESOLVED_MONITORS=d,i.EMPTY_RESULT_PARAMS=m,i.ERROR=p,i.JSON_SUB_SAMPLE_RATE=_,i.LIST_DELIMITER=f,i.TYPE=g}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[];for(var n of t){var r=n.bucketIndex;if(r==null)break;e.push(r)}return e},l=function(t){var e=[];for(var n of t){var r=n.bucketName;if(r===void 0)break;e.push(r)}return e},s=function(t){return t.name},u=function(t){return t.map(s)},c=function(t){var e=[];for(var n of t){var r=n.value;if(r===void 0)break;e.push(r)}return e};i.getBucketIndices=e,i.getBucketNames=l,i.getContextNames=u,i.getContextValues=c}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["cfg_ver_timestamp","policy_id","version","sample_rate"],s=function(t){return t.join(o("ContextualConfigConstants").LIST_DELIMITER)},u=function(n,r){for(var t of e)r[t]!=null&&(n[t]=r[t]);r.name&&(n.config_name=r.name)},c=function(t,n){var e=n[0],r=n[1],a=n[2],i=n[3];e!=null&&(t.exception=e.message),t.result=s(r.map(function(e){return e.value}))||"INVALID",t.context=s(o("ContextualConfigResolvedContextsUtils").getContextNames(a)),t.context_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(a)),t.bucket_name=s(o("ContextualConfigResolvedContextsUtils").getBucketNames(a)),t.monitor=s(o("ContextualConfigResolvedContextsUtils").getContextNames(i)),t.monitor_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(i))};function d(e,t,n){var r={sample_rate:o("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return u(r,e),c(r,t),n&&(r.config_contents=JSON.stringify(e)),r}l.default=d}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2=e,this.$4=o("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(t){var e=this.$2,n=this.$3,r=this.$4;return t&&n(e),r&&this.$1(e),this},t.isSampled=function(){return this.$4},e})();l.default=e}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=e,this.$1=t}var t=e.prototype;return t.createEvent=function(t){var e=new(r("ContextualConfigExposureEvent"))(t,this.$2,this.$1);return e},e})();function s(t,n){return new e(t,n)}l.default=s}),98);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){},s=function(t){o("MarauderLogger").log("contextual_config_exposure","",t)},u=r("ContextualConfigExposureLoggerFactory")(e,s);l.default=u}),98);
__d("ContextualConfigAssert",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===!1)throw new Error(t)}i.default=e}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Array.isArray(t)},s=function(t){return typeof t=="boolean"},u=function(t){return t!=null},c=function(t){return(function(e){return Object.prototype.hasOwnProperty.call(t,e)})},d=function(t){return p(t)&&t%1===0},m=function(t){return _(t)&&t.length>0},p=function(t){return typeof t=="number"&&!isNaN(t)&&t!==1/0&&t!==-1/0},_=function(t){return typeof t=="string"},f=function(t){switch(t){case o("ContextualConfigConstants").TYPE.BOOL:case o("ContextualConfigConstants").TYPE.FLOAT:case o("ContextualConfigConstants").TYPE.INT:case o("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};l.isArray=e,l.isBoolean=s,l.isDefined=u,l.isKey=c,l.isInteger=d,l.isNonEmptyString=m,l.isNumber=p,l.isString=_,l.isType=f}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(o("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}l.default=e}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var a=r("ContextualConfigParseBoolean")(e);n=function(t){return t===a};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:n=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:n=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:n=function(t){return!0};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return n(e)}}l.default=e}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseFloat(t);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseInt(t,10);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(n>0,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},u=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n<a,o("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};l.assertHasValues=s,l.assertNumberOfValues=u,l.assertValueOrder=c}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){var l=a.map(i?r("ContextualConfigParseInteger"):e||(e=r("ContextualConfigParseFloat"))),s;switch(n){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=i?r("ContextualConfigParseInteger")(t):(e||(e=r("ContextualConfigParseFloat")))(t);s=function(t){return i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===u};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:s=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:s=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:s=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,2),o("ContextualConfigPredAssertions").assertValueOrder(l[0],l[1]),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]&&t<l[1]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<=l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t!==l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return s(e)}}l.default=s}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=/^\/(.+)\/(.*)$/;function s(t){try{var n=t.match(e);return n!=null?new RegExp(n[1],n[2]):new RegExp(t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}l.default=s}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(typeof t!="string")throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return t},s=function(n){var t=[];for(var r of n)t.push(e(r));return t};function u(e,t,n){var a=s(n),i;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:i=function(n){return typeof n!="string"?!1:n===e};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)===-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),i=function(t){return typeof t!="string"?!1:t.indexOf(a[0])!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var l=r("ContextualConfigParseRegExp")(a[0]);i=function(t){return typeof t!="string"?!1:l.test(t)};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return i(e)}}l.default=u}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},c=o("ContextualConfigValidators").isKey(o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n)&&c(n.toUpperCase()),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},p=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},_=function(t,n){var e=n.name;p(e);var a=n.strategy;d(a);var i=n.values||[];switch(m(i),t){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParsePredBoolean")(e,a);case o("ContextualConfigConstants").TYPE.FLOAT:return r("ContextualConfigParsePredNumeric")(e,a,i,!1);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParsePredNumeric")(e,a,i,!0);case o("ContextualConfigConstants").TYPE.STRING:return r("ContextualConfigParsePredString")(e,a,i);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},f=function(t,n){s(n);var e=n.name;return p(e),{name:e,pred:_(t,n)}};function g(e,t){return u(t),t.map(function(t){return f(e,t)})}l.default=g}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n)&&n.length>0,o("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type,o=t.buckets;return c(e),d(n),{name:e,type:n,buckets:r("ContextualConfigParseContextBuckets")(n,o)}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigIsEqualParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],o=t[n];if(r.name!==o.name||r.type!==o.type)return!1}return!0}i.default=e}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n),o("ContextualConfigConstants").ERROR.INVALID_STRING)};function c(e,t){switch(u(t),e){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParseBoolean")(t);case o("ContextualConfigConstants").TYPE.FLOAT:return(s||(s=r("ContextualConfigParseFloat")))(t);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParseInteger")(t);case o("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}l.default=c}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_RESULTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},p=function(t,n){for(var e of t)if(e.name===n)return e.type;throw new Error(o("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},_=function(t){return(function(e){c(e);var n=e.name;d(n);var o=p(t,n);m(o);var a=(s||(s=r("ContextualConfigParseResultParamValue")))(o,e.value);return{name:n,type:o,value:a}})};function f(e,t){return u(t),t.map(_(e))}l.default=f}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}}));return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}l.default=e}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type;return c(e),d(n),{name:e,type:n}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(m(n),o("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(t){var e={};for(var n of t){if(e[n.name])return!1;e[n.name]=!0}return!0},p=function(t){return c(t.name),u(t.type),t};function _(e){s(e);var t=e.map(p);return d(t),t}l.default=_}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_VECTOR)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},d=function(t,n){c(t.length,n.length);for(var e=0;e<t.length;e+=1){var o=t[e].type,a=n[e];(s||(s=r("ContextualConfigParseResultParamValue")))(o,a)}},m=function(t){return t.reduce(function(e,t){var n=t.buckets;return e*n.length},1)};function p(e,t,n){u(n);var r=m(t),o=e.length;c(r*o,n.length);for(var a=0;a<r;a+=1){var i=a*o;d(e,n.slice(i,i+o))}return n}l.default=p}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e];try{if(r.pred(n))return[r.name,e]}catch(e){return null}}return null};function s(t,n,r){var a=null,i=t.map(function(t){var i=t.name,l={name:i};if(a!=null)return l;var s;if(r[i]!=null?s=r[i]:n[i]!=null?s=n[i]():s=null,l.value=s,t.buckets!=null){var u=e(t.buckets,s);if(u==null)return a=new Error(o("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),l;var c=u[0],d=u[1];l.bucketName=c,l.bucketIndex=d}return l});return[a,i]}l.default=s}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(t){for(var e=[],n=1,r=t.length-1;r>=0;r-=1)e.push(n),n*=t[r].buckets.length;return e.reverse()},c=function(t,n,o,a){try{var e=n.slice(o,o+t.length);return[null,r("ContextualConfigParseDenseResultParams")(t,e)]}catch(e){return[r("getErrorSafe")(e),a]}},d=function(n,o,a){try{var t=a.reduce(function(t,o,a){return(e||(e=r("ContextualConfigAssert")))(a<n.length,"Auxillery index out of range."),t+n[a]*o},0);return[null,t*o]}catch(e){return[r("getErrorSafe")(e),-1]}},m=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs),o=r("ContextualConfigParseContexts")(e.contexts);this.aux=u(o),this.contexts=o,this.defaults=r("ContextualConfigParseDenseDefaults")(n,e.vectorDefaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=n,this.vector=r("ContextualConfigParseVector")(n,o,e.vector)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.aux,n=this.globalContextProviders,a=this.contexts,i=this.defaults,l=this.monitors,s=this.outputs,u=this.vector,m=r("ContextualConfigResolveContexts")(a,n,t),p=m[0],_=m[1];if(p!=null)return[p,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var f=d(e,s.length,o("ContextualConfigResolvedContextsUtils").getBucketIndices(_)),g=f[0],h=f[1];if(g!=null)return[g,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var y=c(s,u,h,i),C=y[0],b=y[1];if(C!=null)return[C,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var v=r("ContextualConfigResolveContexts")(l,n,t),S=v[0],R=v[1];return S!=null?[S,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,b,_,R]},e})();l.default=m}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.values=r("ContextualConfigParseResultParams")(n,e.values)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.values,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.monitors,a=this.values,i=r("ContextualConfigResolveContexts")(n,e,t),l=i[0],s=i[1];return l!=null?[l,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,s]},e})();l.default=u}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};for(var r of t)n[r.name]=r;var o=[];for(var a of e){var i=n[a.name];o.push(i!=null&&i.name===a.name&&i.type===a.type?i:a)}return o}i.default=e}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t);return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(t,n){u(n);var e=n.bucket,o=n.values;return c(e),d(o),{bucket:e,values:r("ContextualConfigParseResultParams")(t,o)}};function p(e,t){return s(t),t.reduce(function(t,n){var r=m(e,n);return t[r.bucket]=r.values,t},{})}l.default=p}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=(function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.contexts=r("ContextualConfigParseContexts")(e.contexts),this.defaults=r("ContextualConfigParseDefaults")(n,e.defaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.table=r("ContextualConfigParseTable")(n,e.table)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[e,this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.contexts,a=this.defaults,i=this.monitors,l=this.table,u=r("ContextualConfigResolveContexts")(n,e,t),c=u[0],d=u[1];if(c!=null)return[c,a,d,[]];var m=o("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(o("ContextualConfigConstants").BUCKET_DELIMITER),p=l[m]||s,_=r("ContextualConfigMergePartialResultParams")(a,p),f=r("ContextualConfigResolveContexts")(i,e,t),g=f[0],h=f[1];return g!=null?[g,_,d,[]]:[null,_,d,h]},e})();l.default=c}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[1],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n)&&o("ContextualConfigValidators").isDefined(n.version),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(s.indexOf(n)!==-1,o("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function d(e,t){switch(u(e),c(e.version),e.cctype){case o("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(r("DenseContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(r("MultiOutputResolvedContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(r("TableContextualConfig"))(e,t);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}l.default=d}),98);
__d("ContextualConfigWarn",[],(function(t,n,r,o,a,i){"use strict";function e(e){}i.default=e}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name,r=t.value;return e[n]=r,e},{}),this.$2=e}var t=e.prototype;return t.get=function(t,n){try{var e=this.$1[t];return typeof e!=typeof n?(r("ContextualConfigWarn")(o("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),n):e}catch(e){return r("ContextualConfigWarn")(r("getErrorSafe")(e).message),n}},t.getParams=function(){return this.$2},e})();l.default=e}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.error=e}var t=e.prototype;return t.resolve=function(t){return[this.error,o("ContextualConfigConstants").EMPTY_RESULT_PARAMS,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e})();l.default=e}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1/o("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,s=1,u=(function(){function t(e,t){t===void 0&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var n=t.prototype;return n.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4,n;try{n=r("ContextualConfigParseConfig")(t,e)}catch(e){n=new(r("ErrorContextualConfig"))(r("getErrorSafe")(e))}return this.$1=n,n},n.$6=function(n){var t=this.isDebugLoggingEnabled,a=this.$3,i=!a&&o("Random").random()<e;i&&(this.$3=!0);var l=r("ContextualConfigCollateExposureData")(this.$4,n,i),s=r("ContextualConfigExposureLogger").createEvent(l);s.log(t)},n.resolve=function(t){t===void 0&&(t={});var e=this.$1||this.$5(),n=e.resolve(t);return this.$6(n),new(r("ContextualConfigResult"))(n[s])},t})();l.default=u}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),s=(function(){function t(e){this.$1=new Map,this.$2=e}var n=t.prototype;return n.waitForAck=async function(n,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var t=this.$1;try{var i=await new Promise(function(r,o){t.set(n,new e(n,a,r))});return i===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+n,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+n+" timed out after "+a+"ms")),t.delete(n),i}catch(e){var l=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),t.delete(n),l}},n.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},n.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=s}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=4;function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function c(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var d=null,m=null;function p(){return m==null&&(m=Promise.resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){d=e})),m}var _=(function(){function t(){}return t.initialize=async function(){return p()},t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,d=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+d,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=c(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),f=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=async function(){return p()};var t=e.prototype;return t.malloc=function(t){try{var e=d.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){d.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=d.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(s*4);if(i!==-1){var l=i,u=l+s,c=u+s,m=c+s,p=d.__DgwCodecDecode(n,t,l,u,c,m);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=d.HEAPU32.subarray(m/s,m/s+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=d.HEAPU32.subarray(u/s,u/s+1)[0],C=d.HEAPU32.subarray(l/s,l/s+1)[0],b=[],v=function(){var t=d.__getDGWFramePtr(C,S),n=d.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=d.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=d.__getStreamIdFromStreamGroupFrame(t),s=d.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(d.HEAPU8.subarray(s,s+d.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=d.__getStreamIdFromStreamGroupFrame(t),m=d.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(d.HEAPU8.subarray(m,m+d.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(m);var _=d.__getRequiresAckFromGroupedStreamDataFrame(t)?d.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=d.__getStreamIdFromStreamGroupFrame(t),g=d.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=d.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=d.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var u=this.malloc(s*2),c=u,m=u+s,p=d.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,m);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=d.HEAPU32.subarray(c/s,c/s+1)[0],g=d.HEAPU32.subarray(m/s,m/s+1)[0],h=new Uint8Array(d.HEAPU8.subarray(f,f+g));return this.free(f),this.free(u),h},t.encodeAck=function(t,n){var e=this.malloc(s*2);if(e===-1)return null;var r=e,a=e+s,i=d.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=d.HEAPU32.subarray(a/s,a/s+1)[0],m=new Uint8Array(d.HEAPU8.subarray(u,u+c));return this.free(u),this.free(e),m},t.encodeDrain=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=d.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(s*2),l=i,u=i+s,c=d.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,u);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var m;return(m=this.$2)==null||m.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=d.HEAPU32.subarray(l/s,l/s+1)[0],_=d.HEAPU32.subarray(u/s,u/s+1)[0],f=new Uint8Array(d.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),u},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=u,u},e})();l.uuidv4=u,l.Uint8ArrayToBase64UrlStr=c,l.DGWUtils=_,l.DGWCodec=f}),98);
__d("DGWExponentialBackoff",[],(function(t,n,r,o,a,i){"use strict";var e={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},l=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));async function s(t,n){n===void 0&&(n=e);try{return await u(t,n)}catch(e){throw e.errors[e.errors.length-1]}}async function u(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=await e();return i}catch(e){r.push(e)}await c(o*Math.pow(a,n)),++n}throw new l("Max call count exceeded",r)}async function c(e){await new Promise(function(t){return window.setTimeout(t,e)})}i.callWithExponentialBackoff=s}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(701242292,"2919"),u=(function(){function t(t,n,a,i,l,u,c){this.$1=t,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=n,this.$7=a,this.$8=i,this.$2=u,this.$9=l,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(e||(e=r("QuickPerformanceLogger"))).markerStart(s,this.$14)}var n=t.prototype;return n.send=async function(t,n){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(t,!0,e);if(!this.$16(r,!0,e))return!1;var a=await this.$10.waitForAck(e,n!=null?n:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a},n.sendFrame=async function(t,n,r){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,a=this.$15(n,!0,e);if(a==null)return!1;var i=new Uint8Array(t.length+a.length);if(i.set(t),i.set(a,t.length),!this.$16(i,!0,e))return!1;var l=await this.$10.waitForAck(e,r!=null?r:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(l?"ack_recevied":"ack_timeout"),l||(this.__endMarker(3),Promise.reject(o("DGWStream").StreamError.ACK_TIMEOUT))},n.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},n.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},n.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},n.loggingContext=function(){return this.$9},n.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},n.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},n.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},n.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},n.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},n.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},n.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},n.__markerPoint=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,n,{instanceKey:t})},n.__markerAnnotate=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,n,{instanceKey:t})},n.__endMarker=function(n){(e||(e=r("QuickPerformanceLogger"))).markerEnd(s,n,this.$14)},n.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},n.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},n.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=u}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","QuickPerformanceLogger","Random","Run","StreamIdGenerator","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701238781,"3037"),c=(e=r("qex")._("2103"))!=null?e:!1,d=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},m=(function(){function e(t,n,a,i,l,c,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$21=!1,this.$22=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$22||(p.$22=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(c,f,i.dgwVersion),this.$20=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$23=o("DGWGlobalLogger").getInstance(),this.$24=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$23.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$23.streamRequested(i.serviceId),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$20),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$1.close()},t.onClose=function(t){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$23.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=async function(n,r,a,i,l,s){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(i);t.transportEstablishmentPending();var u=function(){return e.$25("",a,t,l,i,n,r)};try{var c=await o("DGWExponentialBackoff").callWithExponentialBackoff(u,s),d=c.$16!=null?c.$16:c.establishGroupedStream(r,n,new(o("DGWLoggingContext")).DGWLoggingContext(a.dgwVersion,n.loggingId,a.serviceId,a.fbId,a.loggingId,n.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}},e.getTransport_DEPRECATED=async function(n,r,a,i,l){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(a);t.transportEstablishmentPending();var s=function(){return e.$25(n,r,t,i,a)};try{return await o("DGWExponentialBackoff").callWithExponentialBackoff(s,l)}catch(e){throw e}},t.establishGroupedStream=async function(t,n,o,a,i,l){var e=this;i===void 0&&(i=!0);var s=this.getStreamId(),u=this.createEstablishStreamFrame(s,n),c=this.__createGroupedStream(s,t,n,o);c.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:n.streamTraceId}}),l!=null&&c.__markerAnnotate(l);var d=this.waitForEstablishStream(s,c,n,function(t){e.$5.set(s,t)},function(){e.$17.putBackStreamId(s)});if(a!=null){var m;c.__markerPoint("send_payload_start"),c.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var p=(m=n.ackTimeoutMs)!=null?m:3e4,_=i?await c.sendFrame(u,a,p):c.sendFrameAndForget(u,a);return _?(c.__markerPoint("send_payload_end"),c.__endMarker(2),Promise.resolve(c)):(c.__endMarker(3),Promise.reject("Failed to send data when establishing stream"))}if(c.__markerPoint("send_establish_stream_start"),!this.send(u))throw c.__endMarker(3),r("err")("Websocket connection closed before stream established");c.__markerPoint("send_establish_stream_end");var f=await d;return c.__endMarker(2),f},e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=async function(t,n,r,o,a){var e=this;this.$13.streamEstablishmentPending(t,r.loggingId);try{var i=await new Promise(function(r,o){e.$6.set(t,new d(n,r,o,3e4,function(){e.streamEndCallback(t)}))});return o(n),this.$13.streamEstablishmentSuccess(t,r.loggingId),i}catch(e){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,t,r.loggingId),e}},e.$25=async function(n,r,a,i,l,s,u){var t=new e(n,o("DGWWebSocketTransport").getWebSocketConnection,a,r,i,l,s,u);t.$1.onmessage=e.$26(t),t.$1.onopen=function(){t.__markerPoint("onopen"),a.transportEstablished(n),t.$10!=null&&t.$10.cancel(),t.$7!=null&&(t.$10=new(o("DGWPinger")).DGWPinger(t.$7,function(){t.$27()},function(){t.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+t.$1.readyState+", bufferedAmount:"+t.$1.bufferedAmount)}))},t.$1.onerror=function(){t.__markerPoint("onerror"),t.$13.transportError("onerror","readyState: "+t.$1.readyState)},t.$1.onclose=e.$28(t);var c=await e.getTransportPromise(t);return c},e.getTransportPromise=async function(t){var e=await new Promise(function(e,n){var r=t.$1.onerror,a=t.$1.onmessage,i=t.$1.onclose;t.$19=window.setTimeout(function(){t.$15(),t.$13.transportClosed(!1,"TIMEOUT"),t.__markerPoint("connect_timeout"),t.close(),n(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},t.$24),t.$1.onerror=function(){t.$19!=null&&(window.clearTimeout(t.$19),t.$19=null),r(),t.close(),c||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},t.$1.onclose=function(e){t.$19!=null&&(window.clearTimeout(t.$19),t.$19=null),i(e),e.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(e.code+":"+e.reason)},t.$1.onmessage=function(n){a(n),t.$19!=null&&!t.$3&&(window.clearTimeout(t.$19),t.$19=null,t.__markerPoint("connect_success"),e(t))}});return e},e.$26=function(t){return function(e){var n;if(t.$21||(t.$21=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){t.$13.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$28=function(t){return function(e){var n,r=t.$23.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$23.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$27=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$20;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$20;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},t.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$20)},e})();l.StreamGroupWebSocketTransport=m}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var n=t.prototype;return n.initTransport=async function(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n},n.establishStream=async function(n,r,a,i,l){var t=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=await o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(n,r,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);var s;try{s=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(n,r,a,i,l)},n.establishStreamWithTransport=async function(t,n,r,a,i){var e,l=t.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(r!=null),!0,l);var s=await this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,t.disableFalcoLogging,(e=t.verboseLoggingEnabled)!=null?e:!1),r,a,i);return s},n.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},n.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){if(!r("CurrentUser").isLoggedInNow()&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){var i={};for(var l of Object.entries(e)){var s=l[0],u=l[1];typeof u=="string"?i["XRSS-"+s]=u:typeof u=="number"?i["XRSN-"+s]=u.toString():typeof u=="boolean"?i["XRSB-"+s]=u.toString():typeof u=="object"&&u!=null&&(i["XRSO-"+s]=r("Base64").encode(JSON.stringify(u)))}if(t&&(i["xrs-body"]="true"),o!=null&&o.length>0&&(i["xrs-instrumentation"]=r("Base64").encode(o)),i["XRS-Accept-Ack"]="RSAck",a!=null&&a.ackTimeoutSec!=null&&(i["XRS-SRAck-Timeout"]=a.ackTimeoutSec.toString()),i["XRSS-http_referer"]=window.location.href,r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var c=n("cr:3024")==null?void 0:n("cr:3024").get();c!=null&&(i["XRSB-is_test"]="true",i["XRSS-original_request_id"]=c)}return i}function s(e){return Object.keys(e).reduce(function(t,n){return(typeof e[n]=="string"||typeof e[n]=="boolean"||typeof e[n]=="number"||typeof e[n]=="object")&&(t[n]=e[n]),t},{})}function u(e){if(e.response&&e.response.instrumentation_data!=null&&e.response.instrumentation_data.length>0)try{var t,n=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data));return{auxId:n.auxId,dfTraceId:(t=n.dataFlowTracingData)==null?void 0:t.traceId}}catch(e){}return null}function c(e,t){var n=e.headers,r=e.body;if(t.kill_body===!0&&(r=null),t.new_body!=null&&(r=t.new_body),t.new_headers!=null)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(t.patch_headers!=null)try{n=babelHelpers.extends({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:r}}l.convertHeaders=e,l.cleanHeaders=s,l.getInstrumentationDataFieldsFromPayload=u,l.transformContextWithRewriteDelta=c}),98);
__d("DGWStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$1=!0}var t=e.prototype;return t.onClose=function(t){this.$1&&this.$2(t)},t.onDataReceived=function(t){this.$1&&this.$3(t)},t.onError=function(t){this.$1&&this.$4(t)},t.onStreamMustDrain=function(t,n){this.$1&&this.$5(t,n)},t.onServerHasFinishedSendingData=function(t){this.$1&&this.$6(t)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e})();i.default=e}),66);
__d("InflightAmends",["Deferred","err"],(function(t,n,r,o,a,i,l){"use strict";var e="inflight_amends_timeout",s="inflight_amends_duplicate_id",u=(function(){function t(e,t,n){this.$1=e,this.$3=t,this.$4=n,this.$2=new Map}var n=t.prototype;return n.add=function(n){var t=this;if(this.$2.has(n))throw r("err")(s);var o=new(r("Deferred")),a=Date.now(),i=setTimeout(function(){t.$2.has(n)&&t.reject(n,r("err")(e))},this.$1);return this.$2.set(n,{id:n,deferred:o,createdTimestampMs:a,timeoutId:i}),o.getPromise()},n.getPromise=function(t){var e;return(e=this.$5(t))==null?void 0:e.deferred.getPromise()},n.resolve=function(t,n){var e=this.$5(t);e&&(e.deferred.resolve==null||e.deferred.resolve(n),this.$3(e.id,Date.now()-e.createdTimestampMs),this.$6(e))},n.reject=function(t,n){var e=this.$5(t);e&&(e.deferred.reject==null||e.deferred.reject(n),this.$4(e.id,n),this.$6(e))},n.rejectAll=function(t){for(var e of this.$2.entries()){var n=e[0],r=e[1];this.reject(n,t)}},n.getSize=function(){return this.$2.size},n.getAllPromises=function(){var e=[];for(var t of this.$2.values())e.push(t.deferred.getPromise());return e},n.$6=function(t){clearTimeout(t.timeoutId),this.$2.delete(t.id)},n.$5=function(t){return this.$2.get(t)},t})();l.default=u}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);i.RequestStreamCloseReason=e}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{expected_existing_headers:"",patch_headers_if_match:""}}function c(){return{bytes:Uint8Array.of()}}function d(){return{message:""}}function m(){return{reason:o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function p(){return{}}function _(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function f(){return{caller_timestamp_ms:"0"}}function g(){return{original_ping_timestamp_ms:"0"}}function h(){return{}}function y(t,n){n.writeStructBegin("ResponseRewriteRequest"),t.new_headers!=null&&(n.writeFieldBegin({fname:"new_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.new_headers),n.writeFieldEnd()),t.new_body!=null&&(n.writeFieldBegin({fname:"new_body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.new_body),n.writeFieldEnd()),t.patch_headers!=null&&(n.writeFieldBegin({fname:"patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers),n.writeFieldEnd()),t.kill_body!=null&&(n.writeFieldBegin({fname:"kill_body",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.kill_body),n.writeFieldEnd()),t.temporary!=null&&(n.writeFieldBegin({fname:"temporary",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:5}),n.writeBool(t.temporary),n.writeFieldEnd()),t.conditional_patch_headers!=null&&(n.writeFieldBegin({fname:"conditional_patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),C(t.conditional_patch_headers,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ResponseRewriteConditionalPatchHeaders"),n.writeFieldBegin({fname:"expected_existing_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.expected_existing_headers!=null)n.writeString(t.expected_existing_headers);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"patch_headers_if_match",ftype:e.STRING,fid:2}),t.patch_headers_if_match!=null)n.writeString(t.patch_headers_if_match);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.patch_headers_otherwise!=null&&(n.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers_otherwise),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bytes!=null)n.writeBinary(t.bytes);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.metadata!=null&&(n.writeFieldBegin({fname:"metadata",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.retry_delay_ms!=null&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(r("jsbi").BigInt(t.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){n.writeStructBegin("AmendStreamAck"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),t.accepted!=null&&(n.writeFieldBegin({fname:"accepted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:2}),n.writeBool(t.accepted),n.writeFieldEnd()),t.result!=null&&(n.writeFieldBegin({fname:"result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.stream_id!=null)n.writeI64(r("jsbi").BigInt(t.stream_id));else{var a="0";n.writeI64(r("jsbi").BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:e.I32,fid:2}),t.last_sequencer!=null)n.writeI32(t.last_sequencer);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:e.I32,fid:4}),t.amendment_count!=null)n.writeI32(t.amendment_count);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:e.I32,fid:3}),t.last_status!=null){var s;n.writeI32((s=t.last_status)!=null?s:0)}else{var u=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.caller_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.caller_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.streams_to_check!=null){n.writeFieldBegin({fname:"streams_to_check",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.streams_to_check.length});for(var a of t.streams_to_check)L(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.original_ping_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.original_ping_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.stream_ids_missing!=null){n.writeFieldBegin({fname:"stream_ids_missing",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I64,size:t.stream_ids_missing.length});for(var a of t.stream_ids_missing)n.writeI64(r("jsbi").BigInt(a));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_behind!=null){n.writeFieldBegin({fname:"stream_ids_behind",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.I64,size:t.stream_ids_behind.length});for(var i of t.stream_ids_behind)n.writeI64(r("jsbi").BigInt(i));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_lost_amendments!=null){n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_lost_amendments.length});for(var l of t.stream_ids_with_lost_amendments)n.writeI64(r("jsbi").BigInt(l));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_wrong_status!=null){n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_wrong_status.length});for(var s of t.stream_ids_with_wrong_status)n.writeI64(r("jsbi").BigInt(s));n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("StreamResponseDelta"),t.flow_status!=null){var o;n.writeFieldBegin({fname:"flow_status",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.flow_status)!=null?o:0),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.log!=null){n.writeFieldBegin({fname:"log",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),v(t.log,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.rewrite!=null){n.writeFieldBegin({fname:"rewrite",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),y(t.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.data!=null){n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),b(t.data,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.termination!=null){n.writeFieldBegin({fname:"termination",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),S(t.termination,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend_ack!=null){n.writeFieldBegin({fname:"amend_ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),R(t.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function T(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.new_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.new_body=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.kill_body=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).BOOL?n.temporary=t.readBool():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conditional_patch_headers=D(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function D(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.expected_existing_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_if_match=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_otherwise=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.expected_existing_headers===void 0&&(n.expected_existing_headers=""),n.patch_headers_if_match===void 0&&(n.patch_headers_if_match=""),n}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bytes=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.metadata=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bytes===void 0&&(n.bytes=Uint8Array.of()),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n}function P(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.retry_delay_ms=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.accepted=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.result=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.stream_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.last_sequencer=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.amendment_count=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stream_id===void 0&&(n.stream_id="0"),n.last_sequencer===void 0&&(n.last_sequencer=0),n.amendment_count===void 0&&(n.amendment_count=0),n.last_status===void 0&&(n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.caller_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.streams_to_check=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.streams_to_check.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.caller_timestamp_ms===void 0&&(n.caller_timestamp_ms="0"),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.original_ping_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_missing=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.stream_ids_missing.push(u)}}else t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_behind=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readI64().toString();n.stream_ids_behind.push(m)}}else t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_lost_amendments=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readI64().toString();n.stream_ids_with_lost_amendments.push(f)}}else t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_wrong_status=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readI64().toString();n.stream_ids_with_wrong_status.push(y)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.original_ping_timestamp_ms===void 0&&(n.original_ping_timestamp_ms="0"),n}function F(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).I32)if(n==null)a.flow_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()),n="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.log=$(t),n="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.rewrite=T(t),n="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.data=x(t),n="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.termination=P(t),n="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend_ack=N(t),n="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.ResponseRewriteRequest$DefaultConstructor=s,l.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=u,l.ResponseData$DefaultConstructor=c,l.LogMessage$DefaultConstructor=d,l.Termination$DefaultConstructor=m,l.AmendStreamAck$DefaultConstructor=p,l.StreamCheck$DefaultConstructor=_,l.Ping$DefaultConstructor=f,l.Pong$DefaultConstructor=g,l.StreamResponseDelta$DefaultConstructor=h,l.serializeResponseRewriteRequest=y,l.serializeResponseRewriteConditionalPatchHeaders=C,l.serializeResponseData=b,l.serializeLogMessage=v,l.serializeTermination=S,l.serializeAmendStreamAck=R,l.serializeStreamCheck=L,l.serializePing=E,l.serializePong=k,l.serializeStreamResponseDelta=I,l.deserializeResponseRewriteRequest=T,l.deserializeResponseRewriteConditionalPatchHeaders=D,l.deserializeResponseData=x,l.deserializeLogMessage=$,l.deserializeTermination=P,l.deserializeAmendStreamAck=N,l.deserializeStreamCheck=M,l.deserializePing=w,l.deserializePong=A,l.deserializeStreamResponseDelta=F}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),l=n("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});a.exports={Ack:e,Payload$Types:l}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{body:Uint8Array.of()}}function c(){return{amendment:Uint8Array.of()}}function d(){return{ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function m(){return{delta:[]}}function p(){return{}}function _(t,n){n.writeStructBegin("RequestStreamHeaders"),t.headers!=null&&(n.writeFieldBegin({fname:"headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.headers),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeBinary(t.body);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("AmendStream"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.amendment!=null)n.writeBinary(t.amendment);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.is_query!=null&&(n.writeFieldBegin({fname:"is_query",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.is_query),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("StreamResponseAck"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.ack!=null){var a;n.writeI32((a=t.ack)!=null?a:0)}else{var i=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.query_result!=null&&(n.writeFieldBegin({fname:"query_result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("StreamResponse"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.delta!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.delta.length});for(var a of t.delta)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(l,n);n.writeListEnd()}if(n.writeFieldEnd(),t.ack_level!=null){var s;n.writeFieldBegin({fname:"ack_level",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((s=t.ack_level)!=null?s:0),n.writeFieldEnd()}t.query_request!=null&&(n.writeFieldBegin({fname:"query_request",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.query_request),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("Payload"),t.request_headers!=null){n.writeFieldBegin({fname:"request_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),_(t.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.request_body!=null){n.writeFieldBegin({fname:"request_body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),f(t.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend!=null){n.writeFieldBegin({fname:"amend",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),g(t.amend,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ack!=null){n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),h(t.ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.response!=null){n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),y(t.response,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ping!=null){n.writeFieldBegin({fname:"ping",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePing(t.ping,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.pong!=null){n.writeFieldBegin({fname:"pong",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePong(t.pong,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.headers=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function v(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=Uint8Array.of()),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.amendment=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_query=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.amendment===void 0&&(n.amendment=Uint8Array.of()),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.query_result=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.ack===void 0&&(n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.delta=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(t);n.delta.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.ack_level=o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.query_request=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.delta===void 0&&(n.delta=[]),n}function E(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_headers=b(t),n="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_body=v(t),n="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend=S(t),n="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ack=R(t),n="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.response=L(t),n="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ping=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(t),n="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);else t.skip(l);break;case 7:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.pong=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(t),n="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.RequestStreamHeaders$DefaultConstructor=s,l.RequestStreamBody$DefaultConstructor=u,l.AmendStream$DefaultConstructor=c,l.StreamResponseAck$DefaultConstructor=d,l.StreamResponse$DefaultConstructor=m,l.Payload$DefaultConstructor=p,l.serializeRequestStreamHeaders=_,l.serializeRequestStreamBody=f,l.serializeAmendStream=g,l.serializeStreamResponseAck=h,l.serializeStreamResponse=y,l.serializePayload=C,l.deserializeRequestStreamHeaders=b,l.deserializeRequestStreamBody=v,l.deserializeAmendStream=S,l.deserializeStreamResponseAck=R,l.deserializeStreamResponse=L,l.deserializePayload=E}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted||e.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e:{flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return!e.seenAccepted||e.flowStatus===t?e:{flowStatus:t,seenAccepted:!0}}}l.getNextState=e}),98);
__d("StreamRetryState",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=120*1e3,s=(function(){function t(){this.$1=0}var n=t.prototype;return n.resetErrorAndRetryCount=function(){this.$1=0},n.onRetry=function(){this.$1+=1},n.getRetryCount=function(){return this.$1},n.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return e*Math.random();var t=e*Math.pow(2,this.$1-3),n=t*Math.random(),r=t+n;return Math.min(r,l)},t})();i.default=s}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","err","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=4,d=0,m=1e3,p=2,_=r("gkx")("20915")?3e4:5e3,f="dgw_stream_send_ack_failure",g=(e=r("qex")._("2097"))!=null?e:!1,h=(s=r("qex")._("2100"))!=null?s:!1;function y(e){if(!e){var t=r("err")(f);throw t.stack,t}}function C(e,t){if(e==null||e.length===0)return null;var n=JSON.parse(e);return n.auxId=t,new TextEncoder().encode(JSON.stringify(n))}function b(e){var t={},n=e.delta;return n.forEach(function(e){if(e.flow_status)switch(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped";break}else e.log?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var v=(function(){function e(e,t,n,a,i,l){var s=this,u,d,m;this.$6=null,this.$7={},this.$10=!1,this.$15=new(r("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var p=null;typeof t=="string"?p=new TextEncoder().encode(t):typeof t=="object"&&(p=t),this.$1={headers:e,body:p},this.$3=n,this.$4=a,this.$12=c,this.$9=!1,this.$14=!1,this.$20=l;var g=a==null?void 0:a.serviceId;i!=null&&(this.$22()||(i.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(g)),i.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(g),i.transport="WEB_RS_STARGATE"),this.$5=o("RequestStreamE2ESampling").validateInstrumentationData(e,i,a==null?void 0:a.requestLogContext,a==null?void 0:a.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=o("RequestStreamE2ELogger").createStreamLogger(e,this.$5,o("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),(a==null?void 0:a.deviceId)!=null&&(this.$7.deviceId=a.deviceId),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),a&&a.overrideUrl!=null&&(this.$7.overrideUrl=a.overrideUrl),g!=null&&(this.$7.serviceId=g),this.$8={flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(r("InflightAmends"))(_,function(e,t){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},s.$23(),{latency:t.toString()}),e)},function(e,t){if(t.message!==f){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},s.$23(),{reason:t.message}),e)}}),(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(d=t==null||(m=t.length)==null?void 0:m.toString())!=null?d:"0"},"0","0")}var t=e.prototype;return t.getInstrumentationData=function(){return this.$5},t.getE2EClientLogger=function(){return this.$6},t.amendWithAck=function(t){var e=this.$24(t,!0);return e==null?Promise.resolve(!1):this.$19.getPromise(e)||Promise.resolve(!1)},t.amendWithoutAck=function(t){this.$24(t,!1)},t.cancel=function(){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},t.start=function(t){var e=this;t===void 0&&(t=!1);var n=String(this.$16++),a=Date.now();return this.$26(n).then(function(){var t;e.$14=!1,e.$21=0;var o=(Date.now()-a).toString();(t=e.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:o},n,String(e.$18))}).catch(function(a){if(a.stack,!(a.message===f&&e.$10))if(e.$14=!1,a!==o("DGWStream").StreamError.ESTABLISHMENT_ERROR){var i,l=a.message;if(a===o("DGWStream").StreamError.UNAUTHENTICATED?l="UNAUTHENTICATED":a===o("DGWStream").StreamError.UNAUTHORIZED&&(l="UNAUTHORIZED"),(i=e.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:l},n,String(e.$18)),e.$25(t?o("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:o("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,l,!0),a===o("DGWStream").StreamError.UNAUTHENTICATED||a===o("DGWStream").StreamError.UNAUTHORIZED)return;throw a}else{var s,u;(s=e.$6)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(u=a.message)!=null?u:a},n,String(e.$18)),e.$15.onRetry();var c=r("gkx")("20916")?e.$15.getBackoffDelayMs():m*Math.pow(p,e.$21);return new Promise(function(e){return window.setTimeout(e,c)}).then(function(){return e.$21++,e.$18++,e.start()})}})},t.getFlowStatus=function(){return this.$8.flowStatus},t.shouldTerminateOrRetry=function(t,n,a,i){var e=this;if(!this.$14){var l=n;if(this.$12||(l="cannot retry for error: "+n+" because of hit max retry limitation"),t!==o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){var s;(s=this.$6)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:l},null,String(this.$18))}var u=a&&(r("gkx")("20916")||this.$12);if(this.$25(t,l,!u),u){var c=r("gkx")("20916")?Math.max(i!=null?i:0,this.$15.getBackoffDelayMs()):i!=null?i:d;return this.$14=!0,new Promise(function(e){return window.setTimeout(e,c)}).then(function(){return e.$27()}).catch(function(e){})}}},t.$28=function(){return this.$11!=null},t.$24=function(t,n){var e,a=this,i=typeof t=="string"?new TextEncoder().encode(t):t,l=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l);var s=C(this.$5,l),u={amend:{amendment:i,instrumentation_data:s}};n&&u.amend&&(u.amend.amendment_id=l);var c=o("CompactSerializerPolyfill").serialize(u,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),d=Date.now();if(this.$29()&&this.$11!=null){var m,p,_;return n&&this.$19.add(l),this.$11.send(c).then(function(e){var t;y(e);var n=(Date.now()-d).toString();(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},l)}).catch(function(e){var t;(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),a.$19.reject(l,e)}),(m=this.$6)==null||m.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(p=t==null||(_=t.length)==null?void 0:_.toString())!=null?p:"0"},l),l}else{var f;(f=this.$6)==null||f.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)}},t.$26=async function(t){var e=this;if(this.$9)throw new Error("stream_already_canceled");var n,a=this.$2||this.$1;try{var i=this.$30();this.$13=i;var l=a.headers.graphiql_sandbox,s=babelHelpers.extends({},a.headers,this.$31());l!=null&&(s=babelHelpers.extends({},s,{www_sandbox:l,distillery_sandbox:l+":8086"}));var u=o("DGWRequestStreamUtils").convertHeaders(s,a.body!=null,this.$5);this.$11=await this.$20.establishStream(u,i,this.$7)}catch(e){if(e===o("DGWStream").StreamError.ESTABLISHMENT_ERROR||o("DGWStream").StreamError.isValid(e)&&!o("DGWStream").isRetryableError(e))throw e;if(o("DGWStream").StreamError.isValid(e)&&o("DGWStream").isRetryableError(e)){this.$32(e);return}throw e}if(this.$9){this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}var d=new Uint8Array([]);if(a.body!=null){var m={request_body:{body:a.body}};d=o("CompactSerializerPolyfill").serialize(m,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");var p=this.$11.send(d).then(function(t){y(t),e.$9&&e.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});return(n=this.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").SENT,{},t,String(this.$18)),this.$12=c,p},t.$29=function(){return this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},t.$25=function(t,n,r){var e;this.$11&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),(e=this.$13)==null||e.stop(),this.$11=null,this.$10=!0,this.$33(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),r&&!this.$9&&this.$3.onTermination("terminate stream because "+t+" with msg : "+n)},t.$33=function(t){var e=this.$8;return this.$8=o("RequestStreamState").getNextState(e,t),e!==this.$8},t.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},t.$34=function(t){var e=this,n=o("CompactSerializerPolyfill").deserialize(t,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(n.response){var a,i,l=o("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(n),s=l==null?void 0:l.auxId,c=l==null?void 0:l.dfTraceId;if(!this.$28()){var d;(d=this.$6)==null||d.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},s,String(this.$18),c);return}var m;(a=this.$6)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,b(n.response),s,String(this.$18),c,m);var p=n.response.delta;p.forEach(function(t){if(t.data)e.$15.resetErrorAndRetryCount(),r("justknobx")._("4109")?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):e.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):(u||(u=o("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(e.$22()?"falco":"graphql"));else if(t.flow_status){var n=t.flow_status;n===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&e.$15.resetErrorAndRetryCount(),e.$33(n)&&e.$3.onFlowStatus(n)}else if(t.termination){var a,i=(a=t.termination.message)!=null?a:"unknown termination msg";e.$2=null,e.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,i,t.termination.reason===o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,t.termination.retry_delay_ms!=null?parseInt(t.termination.retry_delay_ms,10):null)}else if(t.log)e.$3.onLog(t.log.message);else if(t.amend_ack){var l=t.amend_ack.amendment_id;if(l!=null){var s=t.amend_ack.accepted||!1;e.$19.resolve(l,s)}}else if(t.rewrite){var c=o("DGWRequestStreamUtils").transformContextWithRewriteDelta(e.$1,t.rewrite);t.rewrite.temporary===!0?e.$2=c:e.$1=c}}),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,b(n.response),s,String(this.$18),c),n.response.ack_level===o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&n.response.response_id!=null&&this.$35(n.response.response_id,s)}else{var _;(_=this.$6)==null||_.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}},t.$35=function(t,n){var e={ack:{response_id:t,ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},a=o("CompactSerializerPolyfill").serialize(e,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){var i;this.$11.send(a),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").SENT,{},n,String(this.$18))}else{var l;(l=this.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},n,String(this.$18))}},t.$22=function(){return this.$1.headers.method==="Falco"},t.$30=function(){return new(r("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))},t.$39=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},t.$36=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},t.$37=function(t){try{this.$34(t)}catch(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},t.$32=function(t){var e="",n=o("DGWStream").isRetryableError(t);e="StreamError: Received "+t;var r=g?this.$12>0:n,a=h?m*p:void 0;this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,e,r,a)},t.$38=function(t,n){this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,n,!0)},t.$31=function(){return r("RtiWebRequestStreamClient").overrideHeaders},t.$23=function(){var e={};return r("gkx")("20918")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e})();l.default=v}),98);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="realtime",u=1e4,c=null,d=(function(){function t(){this.$1={}}t.get=function(){return c==null&&(c=new t),c};var o=t.prototype;return o.$2=function(t){var e;this.$1=(e={},e[t]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},e)},o.getStreamGroupLoggingId=function(t){var e;return t===void 0&&(t=null),(e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupLoggingId},o.guessStreamGroupPriorStreamCount=function(t){var e;return t===void 0&&(t=null),((e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupPriorStreamCountGuess)||0},o.establishStream=function(o,a,i){var t,l=this,c=i.serviceId==null?s:i.serviceId,d=(t=this.$1[c])==null?void 0:t.dgwStreamGroup;if(d==null||!d.canCreateGroupedStream()){var m={deviceId:i.deviceId,serviceId:c,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:i.authToken,authType:i.authType};i.overrideUrl!=null&&(m.overrideUrl=i.overrideUrl),m.keepAliveMs=u,r("gkx")("20920")&&(m.loggingId=r("uuidv4")());try{d=r("DGWClient")().createStreamGroup(new(r("DGWStreamGroupHandler"))(function(){l.$2(c)},function(){l.$2(c)},function(){l.$2(c)}),m),this.$1[c]={dgwStreamGroup:d,multiStreamGroupLoggingId:m.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(t){return(e||(e=n("Promise"))).reject(t)}}return this.$1[c].multiStreamGroupPriorStreamCountGuess++,d.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:o},a)},t})();l.default=d}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e!=null?e:r("DGWStreamFactory").get()}var o=t.prototype;return o.createStream=function(o,a,i,l,s){return n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),(e||(e=n("Promise"))).resolve(new(r("DGWRequestStreamRef"))(o,a,l,s,i,this.$1))},t})();l.default=s}),98);/*FB_PKG_DELIM*/
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);var i=this["on"+t];i!=null&&i.apply(void 0,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSThreadMediaGalleryGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});i.default=e}),66);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function d(e,t){switch(e){case 1:return{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function p(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?d(t.length,r===n?l:i):m(t.length,i,l);if(e===n)return u(t.length,i,l);var p=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,p,r===n?l:i):c(t.length,p,i,l)}function _(t,n){return babelHelpers.extends({},p(t,n),{version:e})}l.createAddParticipantsAdminMessage=_}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r,a){switch(e){case 1:return a?{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function d(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[i],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(e===n)return u(t.length,i,l,r===n);var d=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,d,r===n?l:i):c(t.length,d,i,l,r===e)}function m(t,n){return babelHelpers.extends({},d(t,n),{version:e})}l.createRemoveParticipantsAdminMessage=m}),98);
__d("MAWAdminWriteGroupNameChangeAdminMsgContent",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r,a=[];return e===n?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_NAMED_GROUP,a.push(t)):e==null?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_NAMED_GROUP,a.push(t)):(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_NAMED_GROUP,a.push(o("WAJids").userIdFromJid(e),t)),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30});i.default=e}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21,FUBS_EXCLUSIVE_CONTENT_TEASER:22});i.default=e}),66);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Random","ReQL","WAArmadilloXMA.pb","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n,r,a,i,l){var s=n.ctas,u=n.defaultCTA,c=d(n.targetId,n.targetType),p=(e||(e=o("I64"))).of_int32(o("Random").uint32());if(u!=null){var h=_(u,p,a,r,i,c,n.targetType);await g(t,h,p,l.defaultCta)}var y=o("MAWXMAUtils").isFBXMAPostMention(n.targetType)&&n.author===o("WAJids").AUTHOR_ME,C=[];return s!=null&&!y&&(C=await Promise.all(s.map(function(e,n){var o=m(p,n),s=f(e,o,a,r,i,c),u=n===0?l.attachmentCta1:n===1?l.attachmentCta2:n===2?l.attachmentCta3:void 0;return g(t,s,o,u)}))),{attachmentCta1Id:C.length>0?C[0]:void 0,attachmentCta2Id:C.length>1?C[1]:void 0,attachmentCta3Id:C.length>2?C[2]:void 0,defaultCtaId:u==null?void 0:p}}function c(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function d(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function m(t,n){return(e||(e=o("I64"))).add(t,e.of_int32(n+1))}function p(t,n,r,a,i,l,s){var u;s===void 0&&(s="xma_web_url");var c=t.actionUrl,d=t.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:i,attachmentIndex:(e||(e=o("I64"))).zero,ctaId:n,enableExtensions:!1,extensionHeightType:void 0,messageId:r,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:l!=null?l:void 0,threadKey:a,title:(u=t.title)!=null?u:"Tap to view status update",type_:s!=null?s:"xma_web_url",urlWebviewType:void 0}}function _(e,t,n,r,o,a,i){var l=c(i);return p(e,t,n,r,o,a,l)}function f(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return p(e,t,n,r,o,a,i)}async function g(e,t,n,r){return r!=null?await e.attachment_ctas.upsert([r.ctaId],t):await e.attachment_ctas.add(t),n}async function h(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=await y(e,r.defaultCtaId),a.attachmentCta1=await y(e,r.attachmentCta1Id),a.attachmentCta2=await y(e,r.attachmentCta2Id),a.attachmentCta3=await y(e,r.attachmentCta3Id)),[r,a]}function y(e,t){var n;return t==null?Promise.resolve(void 0):(n=o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachment_ctas).getKeyRange(t)))!=null?n:void 0}function C(t,n,a,i,l,u,c,d,m){var p,_,f,g,h,y,C,E,k=(e||(e=o("I64"))).zero,I=b(t),T=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(t.targetType),D=T?(e||(e=o("I64"))).of_int32(T):void 0,x=(p=t==null||(_=t.defaultCTA)==null?void 0:_.actionUrl)!=null?p:t==null||(f=t.defaultCTA)==null?void 0:f.nativeUrl;t.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+t.targetType+"."+(t.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:l,attachmentCta2Id:u,attachmentCta3Id:c,attachmentFbid:a,attachmentIndex:e.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:e.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:S(t.ctas,1),cta1Type:v(t.ctas,1),cta2Title:S(t.ctas,2),cta2Type:v(t.ctas,2),cta3Title:S(t.ctas,3),cta3Type:v(t.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=t.defaultCTA)==null?void 0:g.title,defaultCtaType:I.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:t.filesize!=null?(e||(e=o("I64"))).of_int32(t.filesize):void 0,gatingTitle:t.overlayTitle,gatingType:t.overlayIconGlyph!=null?String(t.overlayIconGlyph):void 0,hasMedia:t.hasMedia!=null?t.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?t.faviconPlaintextHash!=null:t.faviconMediaId!=null,hasXmaHeaderImage:$?t.headerMediaPlaintextHash!=null:t.headerMediaId!=null,hasXmaPreview:$?t.defaultPreviewMediaPlaintextHash!=null:t.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:t.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:t.maxSubtitleNumOfLines!=null?(e||(e=o("I64"))).of_int32(t.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:t.maxTitleNumOfLines!=null?(e||(e=o("I64"))).of_int32(t.maxTitleNumOfLines):void 0,messageId:i,miniPreview:void 0,offlineAttachmentId:(h=t.offlineAttachmentId)!=null?h:a,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:I.height,previewHeightLarge:t.previewHeightLarge!=null?(e||(e=o("I64"))).of_int32(t.previewHeightLarge):void 0,previewImageDecorationType:L(t.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:I.width,previewWidthLarge:t.previewWidthLarge!=null?(e||(e=o("I64"))).of_int32(t.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:t.subtitleText,targetId:void 0,threadKey:n,timestampMs:k,titleText:t.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:t.xmaDataclass,xmaFaviconFbid:$?t.faviconPlaintextHash:(y=t.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?t.headerMediaPlaintextHash:(C=t.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:t.xmaLayoutType!=null?R(t.xmaLayoutType):void 0,xmaPreviewFbid:$?t.defaultPreviewMediaPlaintextHash:(E=t.defaultPreviewMediaId)==null?void 0:E.toString(),xmasTemplateType:t.xmaLayoutType!=null?R(t.xmaLayoutType):void 0}}function b(t){var n;switch(t.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:n={height:(e||(e=o("I64"))).of_int32(108),width:(e||(e=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:n={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:n={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:n={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:n={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:n={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:n={xmaContentType:"xma_rtc_missed_group_video"};break;default:n={height:t.previewHeight!=null?(e||(e=o("I64"))).of_int32(t.previewHeight):void 0,width:t.previewWidth!=null?(e||(e=o("I64"))).of_int32(t.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return n}function v(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function S(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function R(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function L(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=u,l.maybeBridgeToLSTargetId=d,l.getCtaIdFromDefaultCtaId=m,l.composeDefaultAttachmentCta=_,l.composeAttachmentCta=f,l.getExistingAttachmentAndAttachmentCtas=h,l.composeAttachmentXMA=C}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e,t){var n=(e+t).split("");return Math.abs(n.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0))}i.convertStringToOptionHash=e,i.convertOptionHashToString=l,i.generateStableIdFromOptionHash=s}),66);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(await(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=await e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:await e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:await e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i,l,s,u){i===void 0&&(i=1);try{var c=await o("MAWKeychainCrypto").getAccountKeys(i),d=await Promise.all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),Promise.all(c.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,n).catch(function(){return null})}))]),m=d[0],p=d[1],_=await Promise.all(p.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(m,e).catch(function(){return null})})),f=_.filter(Boolean);if(f.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:f,version:a}}catch(t){var g=null,h=null,y=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&y!=null&&(g=y.userKeyBase===r("MessengerWebInitData").userKeyBase,h=y.fbId===o("MAWCurrentUser").getID());var C=o("MAWWebInitDataHelpers").getAccountKeysString(i),b=C&&C[0]!=null?await o("MAWKeychainCrypto").generateHashString(C[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",l!=null,C!=null,l===b,s!=null,r("MessengerWebInitData").userKeyBase!=null,s===await o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase),u,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,g,h,i),t}}l.default=s}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},u={global_ear:s(),maw_ear:s()},c=null,d=(function(){var e=Object.keys(u).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=c)==null||t.updateState()}}})();function m(e){u[e]=s(),d.set(e,"none")}function p(e,t){d.set(e,t)}function _(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var f={global_ear:function(){return null},maw_ear:function(){return null}},g=function(t){return f[t]()},h=function(t,n){f[t]=function(){return n}},y=function(t,n){h(t,n),L(t).dbReady.resolve()},C={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},b=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});async function v(t,n,a){var i;if(a===void 0&&(a=B),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",t),c=F(t),d.is(t,"success")&&L(t).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(R(t));var l=o("MAWCurrentUser").getID(),s=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+l);s.onEventReceive("notifyEarKeychainV2",N);var u=(e||(e=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";a(t+"_ear_init_start",{string:(i={},i["initFlow_"+t+"_"+u]=n,i)});try{var m,p=await O(s,t,void 0,a);a(t+"_ear_import_end");for(var _ of p)L(t).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return P(t),b(t,l).listenToRequest(function(){return JSON.stringify(Array.from(L(t).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),a(t+"_ear_init_end",{string_array:(m={},m[t+"_randomisedVersionKeys"+u]=S(t).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),m)}),d.set(t,"success"),o("WAResultOrError").makeResult(R(t))}catch(e){return d.set(t,"failure"),a(t+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",t),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(e))}}function S(e){return Array.from(L(e).databaseEncryptionKeys.entries())}function R(e){return L(e).latestVersion}function L(e){return u[e]}function E(t,n){var a=n!=null?n:R(t),i=L(t).databaseEncryptionKeys.get(a);if(i==null){r("promiseDone")(D(t).then(function(e){var t=e.map(function(e){return e.version}).includes(a);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,a,e.length)}));var l=R(t),s=Array.from(L(t).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",a,l,L(t).databaseEncryptionKeys.get(l)==null,L(t).databaseEncryptionKeys.size,Math.max.apply(Math,s),d.get(t),(e||(e=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+a+" was null.")}return{dbEntry:i.dbEntry,keys:i.keys,randomisedVersion:i.dbEntry.randomisedVersion,version:a}}function k(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var I=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function T(e){if(e.length===0)return{reason:I.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:I.EXPIRED_KEY,result:!0}}function D(e){var t=$(e,"readonly");return new Promise(function(n,r){t.onabort=function(){return r(t.error)},t.onerror=function(){return r(t.error)};var o=t.objectStore(C[e]).getAll();o.onsuccess=function(){return n(o.result)},o.onerror=function(){return r(o.error)}}).then(x)}function x(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function $(e,t){var n=g(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(C[e],t,{durability:"strict"})}var P=function(t){var e=Array.from(L(t).databaseEncryptionKeys.keys());e.length>0?L(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},N=function(n){var t=n.namespace,o=n.version;r("promiseDone")((async function(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",t),await L(t).dbReady.getPromise();var n=(await D(t)).find(function(e){return e.version===o});if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var a=await k(n);L(t).databaseEncryptionKeys.set(a.version,{dbEntry:n,keys:a.keys}),P(t),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",t)}catch(n){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(n)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(e||(e=r("ExecutionEnvironment"))).isInWorker,t)}})())};function M(e){return d.get(e)!=="none"}function w(e){return d.get(e)}function A(e){return d.is(e,"success")?(L(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function F(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:A(e).toString(),latestVersion:R(e).toString()},reason:d.get(e),state:(function(){switch(d.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}async function O(t,n,o,a){var i=await r("MAWEARGenNewKeychainCryptoKey")();a(n+"_ear_raw_key_generated");var l=await new Promise(function(l,s){var u=$(n,"readwrite");u.onerror=function(){return s(u.error)},u.onabort=function(){return s(u.error)};var c=u.objectStore(C[n]).getAll();c.onerror=function(){return s(c.error)},c.onsuccess=function(){var d;a(n+"_ear_keys_fetched");var m=x(c.result),p=T(m),f=p.reason,g=p.result;if((o==null?void 0:o.forceKeyRotation)!==!0&&!g)return l(m);var h=(o==null?void 0:o.forceKeyRotation)===!0?I.FORCE_KEY_ROTATION:f!=null?f:I.UNKNOWN,y=m.map(function(e){return e.version}),b=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),b,n,(e||(e=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},i,{randomisedVersion:_(m),source:h,version:b+1});a(n+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:n,version:v.version}),a(n+"_ear_gen_key_end"),l(m)};var S=u.objectStore(C[n]).add(v);S.onerror=function(){return s(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});a(n+"_ear_import_start");var s=await Promise.allSettled(l.map(function(e){return k(e).then(function(t){return{entry:e,result:t}})})),u=s[s.length-1];if(u.status==="rejected"){var c,d=(c=o==null?void 0:o.corruptedEARRetryCount)!=null?c:0;if(d>=1)throw u.reason;return O(t,n,{corruptedEARRetryCount:d+1,forceKeyRotation:!0},a)}return s.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}var B=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),W(t,n)},W=function(n,a){var t=r("qpl")._(25310776,"6155");(e||(e=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(t,"backend_"+n,{annotations:a}):(r("QPLUserFlow").addPoint(t,"ui_"+n),a!=null&&r("QPLUserFlow").addAnnotations(t,a))},q=function(t,n){return b(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);L(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),P(t),d.set(t,"success"),!0},function(){return!1})};l.InitStatus=d,l.resetKeychain__TEST_ONLY_DO_NOT_USE=m,l.setInitStatus__TEST_ONLY_DO_NOT_USE=p,l.generateNewRandomisedVersionNumber=_,l.setNamespaceSourceDbWithoutMarkingDbReady=h,l.setNamespaceSourceDbAndMarkAsReady=y,l.getEncryptionKeysTabCommunication=b,l.init=v,l.getLatestVersion=R,l.getKeychain=L,l.getDbEncryptionKey=E,l.isKeychainSettled=M,l.getKeychainInitStatus=w,l.isKeychainInitialised=A,l.logMawInitPoint=W,l.importKeysFromOtherTab=q}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("MAWEphemeralUtils",["MAWLocalizationType","MAWUserJidWrapper","WAArmadilloApplication.pb","WAJids","err"],(function(t,n,r,o,a,i,l){"use strict";var e=60,s=60*e,u=24*s;function c(t,n,r,a){var i,l=[],c=n===u,d=t===o("MAWUserJidWrapper").getMyUserJid();if(a)i=o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(t==null)n===0?i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:n<e?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(n.toString())):n<s?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push((n/e).toString())):n<u||c?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,l.push((n/s).toString())):(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,l.push((n/u).toString()));else{var m=o("WAJids").extractUserId(t).toString();n===0?d?i=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,l.push(m)):n<e?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(m)),l.push(n.toString())):n<s?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push(m)),l.push((n/e).toString())):n<u||c?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,l.push(m)),l.push((n/s).toString())):(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,l.push(m)),l.push((n/u).toString()))}return{adminMsgContent:l,adminType:i,version:1}}function d(e,t,n){var a,i=[],l=o("WAJids").extractUserId(t).toString();switch(e){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,i.push(l));break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,i.push(l));break;default:throw r("err")("Received unexpected screenshot action type")}return{ephemeralScreenshotActionContent:i,ephemeralScreenshotActionType:a}}l.getEphemeralSettingChangeData=c,l.getEphemeralScreenshotActionData=d}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("MAWWriteLimitSharingAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r;return t?(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED?[e]:[]):(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED?[e]:[]),{adminMsgContent:r,adminType:n,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e===o("MAWCurrentUser").getID(),r=n?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a=[];return r===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?a.push(t):a.push(e,t),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("MAWCurrentUser").getID(),a=e===r&&e!==t,i=t===r&&t!==e,l=t===e&&r===t,s=t===e&&r!==t,u;l&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:s&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:s&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:a&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:a&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:i&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:i&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;var c=[];switch(u){case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:c.push(t,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:c.push(e,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:c.push(n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:c.push(t);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.push(e);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:c.push(e,t,n);break;default:break}return{adminMsgContent:c,adminType:u,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MessengerThreadThemeType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8,AI_INTERACTIVE_THEME:9,AI_INTERACTIVE_THEME_GENERATED:10,MSGR_CUSTOM_THEME:11,AI_SCROLLABLE_THEME:12}),l=e;i.default=l}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){var a=e===o("MAWCurrentUser").getID(),i=u(a,r),l=[];return i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?l.push(n):l.push(e,n),t!=null&&l.push(t),{adminMsgContent:l,adminType:i,version:1}}function u(t,n){if(n!=null)try{var a=r("MessengerThreadThemeType").cast(parseInt(n,10))===7;if(a)return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""])),t)}return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}l.getAdminMsgContent=s}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE,n=[e];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWAdminAddParticipantMsg","MAWAdminMsgHelpers","MAWAdminRemoveParticipantMsg","MAWAdminWriteGroupNameChangeAdminMsgContent","MAWEphemeralUtils","MAWJids","MAWWriteLimitSharingAdminMsgContent","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadPhotoCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","err","getErrorSafe","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","skipBumpThread","skipSnippetUpdate"],s=["type"],u=["type"],c=["type"],d=["type"],m=["type"],p=["type"],_=["type"],f=["type"],g=["type"],h=["type"],y=["type"],C=["type"],b=["type"],v=["type"],S=["type"],R=["type"],L=["type"],E=["type"],k=["type"],I=["type"];function T(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.emojiName,"emojiName is null"))}function D(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.threadIcon,"threadIcon is null"))}function x(e,t){var n;return o("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(e,t.themeEmoji,r("nullthrows")(t.themeName,"themeName is null"),""+((n=t.themeType)!=null?n:""))}function $(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?o("MAWWritePinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED?o("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNSET||t.action===null||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function P(e,t){return o("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.targetUserId,"targetUserId is null"),r("nullthrows")(t.nickname,"nickname is null"))}function N(e){var t;return o("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(r("nullthrows")((t=e.ukOsaAdminText)==null?void 0:t.initiatorUserId,"initiatorUserId is null"))}function M(e,t){var n,r;return o("MAWEphemeralUtils").getEphemeralSettingChangeData(o("MAWJids").toUserJid(e),(n=t.disappearingSettingDurationSeconds)!=null?n:0,((r=t.oldDisappearingSettingDurationSeconds)!=null?r:0)===0,!1)}function w(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.CHANGED||t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.REMOVED?o("MAWWriteThreadPhotoCustomizationAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function A(e,t){return t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!0):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!1):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET||t.sharingType===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.sharingType)})()}function F(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.ADDED?o("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.REMOVED?o("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function O(e,t){return o("MAWAdminWriteGroupNameChangeAdminMsgContent").getAdminMsgContent(o("MAWJids").toUserJid(e),r("nullthrows")(t.groupName))}function B(e,t){var n,a;return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.ADDED?o("MAWAdminMsgHelpers").createParticipantPromoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((n=t.targetUserId)==null?void 0:n[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.REMOVED?o("MAWAdminMsgHelpers").createParticipantDemoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((a=t.targetUserId)==null?void 0:a[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function W(e,t){return t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ADMINS_ONLY?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"admin_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ALL_MEMBERS?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"all_member_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.UNSET||t.mode===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.mode)})()}function q(e,t){return M(e,{disappearingSettingDurationSeconds:t.disappearingSettingTime!=null?Number(t.disappearingSettingTime):0,oldDisappearingSettingDurationSeconds:t.oldDisappearingSettingTime!=null?Number(t.oldDisappearingSettingTime):0})}function U(e){return e.initiatorUserId!=null?N({ukOsaAdminText:{initiatorUserId:e.initiatorUserId}}):null}function V(e,t){return A(e,{sharingType:t.limitSharingType==="disabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED:t.limitSharingType==="enabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET})}function H(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED})}function G(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED})}function z(e,t){return x(e,{themeEmoji:t.themeEmoji,themeName:t.themeNameWithSubtitle,themeType:t.themeType})}function j(e,t){return t.threadIcon!=null?D(e,{threadIcon:t.threadIcon}):null}function K(e,t){return t.participantId!=null&&t.nickname!=null?P(e,{nickname:t.nickname,targetUserId:""+t.participantId}):null}function Q(e,t){return t.threadQuickReactionEmoji!=null?T(e,{emojiName:t.threadQuickReactionEmoji}):null}function X(e){var t=Object.keys(e);if(t.length!==1)throw r("err")("Expected exactly one key");var n=t[0];return babelHelpers.extends({type:n},e[n])}function Y(t,n){var r=n.$$unknownFieldCount,o=n.skipBumpThread,a=n.skipSnippetUpdate,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=X(i);return(function(e){if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="quickReactionChanged"){var n=e.type,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return T(t,r)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="iconChanged"){var o=e.type,a=babelHelpers.objectWithoutPropertiesLoose(e,u);return D(t,a)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="chatThemeChanged"){var i=e.type,l=babelHelpers.objectWithoutPropertiesLoose(e,c);return x(t,l)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="messagePinned"){var X=e.type,Y=babelHelpers.objectWithoutPropertiesLoose(e,d);return $(t,Y)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="nicknameChanged"){var J=e.type,Z=babelHelpers.objectWithoutPropertiesLoose(e,m);return P(t,Z)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="linkCta"){var ee=e.type,te=babelHelpers.objectWithoutPropertiesLoose(e,p);return N(te)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="disappearingSettingChanged"){var ne=e.type,re=babelHelpers.objectWithoutPropertiesLoose(e,_);return M(t,re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupImageChanged"){var oe=e.type,ae=babelHelpers.objectWithoutPropertiesLoose(e,f);return w(t,ae)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="limitSharingChanged"){var ie=e.type,le=babelHelpers.objectWithoutPropertiesLoose(e,g);return A(t,le)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupParticipantChanged"){var se=e.type,ue=babelHelpers.objectWithoutPropertiesLoose(e,h);return F(t,ue)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupNameChanged"){var ce=e.type,de=babelHelpers.objectWithoutPropertiesLoose(e,y);return O(t,de)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupAdminChanged"){var me=e.type,pe=babelHelpers.objectWithoutPropertiesLoose(e,C);return B(t,pe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupMembershipAddModeChanged"){var _e=e.type,fe=babelHelpers.objectWithoutPropertiesLoose(e,b);return W(t,fe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatDisappearingSetting"){var ge=e.type,he=babelHelpers.objectWithoutPropertiesLoose(e,v);return q(t,he)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatLinkCta"){var ye=e.type,Ce=babelHelpers.objectWithoutPropertiesLoose(e,S);return U(Ce)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessagingLimitSharing"){var be=e.type,ve=babelHelpers.objectWithoutPropertiesLoose(e,R);return V(t,ve)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatPinMessageV2")return H(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUnpinMessageV2")return G(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThemeColor"){var Se=e.type,Re=babelHelpers.objectWithoutPropertiesLoose(e,L);return z(t,Re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadIcon"){var Le=e.type,Ee=babelHelpers.objectWithoutPropertiesLoose(e,E);return j(t,Ee)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadNickname"){var ke=e.type,Ie=babelHelpers.objectWithoutPropertiesLoose(e,k);return K(t,Ie)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadQuickReaction"){var Te=e.type,De=babelHelpers.objectWithoutPropertiesLoose(e,I);return Q(t,De)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatFriendRequestConfirmedEncrypted"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatInstantGameEncryptedDynamicCustomUpdate"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMagicWords"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerQrCodeScanned"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumAddition"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumContentRemoval"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumDeletion"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumRename"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbum"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatGenaiTaskAdd"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUpdatePayments")return null;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(l)}function J(e){var t,n,a,i,l=(t=e.deserialize().adminMessage())==null?void 0:t.proto;if(l!=null){var s;try{s=Y(e.message.senderId,l)}catch(e){r("FBLogger")("mps").catching(r("getErrorSafe")(e)).warn("Failed to get admin message content")}var u={ack:o("MAWAckLevel").ACK.received,adminContent:(n=s)==null?void 0:n.adminMsgContent,adminType:(a=s)==null?void 0:a.adminType,adminVersion:(i=s)==null?void 0:i.version,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:u}}}l.getMessageContent=Y,l.adminMsgToBridgeMsg=J}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsBumpMessageToBridgeMsg",["MAWAckLevel","MAWMsgType","MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.bumpExistingMessage;if(i==null||((n=i.key)==null?void 0:n.id)==null||a==null)return null;var l=o("MpsTypes").toMessageId(i.key.id),s={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),replyContent:{isBumpMsg:!0,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(e.message.threadId,l),replyType:"MESSAGE"},replySourceId:(r=i.key)==null?void 0:r.id,sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return{kind:"bridgeMsg",value:s}}l.bumpMessageToBridgeMsg=e}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","MAWMpsGating","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(o("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(e.getExternalId()))),a=e.topLevelMetadata(),i={author:e.getAuthor(),editExternalId:o("WAStanzaUtils").toStanzaId(e.getExternalId()),editMsgHistoryId:n,editTs:e.getUnixTs(),msgContent:t,originalMsgExternalId:o("WAStanzaUtils").toStanzaId(a.getExternalId()),originalMsgId:a.getMsgId(),sendStatus:r("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:e.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:i}}function s(t){var n,r,a=(n=t.deserialize().encryptedTransportMessage())==null||(n=n.consumerMessage())==null||(n=n.payload)==null||(n=n.content)==null||(n=n.editMessage)==null?void 0:n.message;if(a!=null)return e(t,{commands:a==null?void 0:a.commands,content:((r=a==null?void 0:a.text)!=null?r:"")+(o("MAWMpsGating").isFullMpsEnabled()?" *":""),mentionedJids:a==null?void 0:a.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)})}function u(t){var n,r,o,a,i=t.supplementals,l=t.topLevel;if(l.kind!=="bridgeMsg")return t;var s=i.map(function(e){return e.kind==="bridgeEditHistoryMsg"?e.value:null}).filter(Boolean).sort(function(e,t){return t.editTs-e.editTs});if(s.length===0)return t;i.push(e(t.message,{commands:l.value.commands&&[].concat(l.value.commands),content:(n=l.value.content)!=null?n:"",mentionedJids:l.value.mentionedJids&&[].concat(l.value.mentionedJids)}));var u=s[0].msgContent;return l.value=babelHelpers.extends({},l.value,{commands:(r=u.commands)!=null?r:l.value.commands,content:(o=u.content)!=null?o:l.value.content,editCount:s.length,mentionedJids:(a=u.mentionedJids)!=null?a:l.value.mentionedJids}),babelHelpers.extends({},t,{supplementals:i,topLevel:l})}l.editMessageToBridgeMsg=s,l.processEditedMessage=u}),98);
__d("MpsEphemeralMessageToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.supplementals,r=e.topLevel,a=(t=e.message.deserialize().encryptedTransportMessage())==null||(t=t.proto.metadata)==null||(t=t.chatEphemeralSetting)==null?void 0:t.ephemeralExpiration;if(a==null||a===0)return e;var i=o("WATimeUtils").castToUnixTime(e.message.getUnixTs()+a),l=o("WATimeUtils").cappedMillisecondsUntil(i);return l<=0?e:(r.kind==="bridgeMsg"&&(r.value=babelHelpers.extends({},r.value,{ephemeralDurationInSec:a})),e.supplementals.push({kind:"bridgeMsgsStartCountdown",value:{msgs:[{countdownTs:i,millisecondsUntilCountdownTs:l,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),babelHelpers.extends({},e,{supplementals:n,topLevel:r}))}l.processEphemeralMessage=e}),98);
__d("MpsForwardToBridge",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i=e.message,l=e.topLevel,s=i.deserialize().encryptedTransportMessage();return s==null||l.kind!=="bridgeMsg"||((t=s.proto.metadata)==null?void 0:t.isForwarded)!==!0||(l.value=babelHelpers.extends({},l.value,{forwardingScore:(n=(r=s.proto.metadata)==null?void 0:r.forwardingScore)!=null?n:0,isForwarded:(o=(a=s.proto.metadata)==null?void 0:a.isForwarded)!=null?o:!1,replyContent:{replyType:"FORWARD"}})),e}i.processForwarding=e}),66);
__d("MpsFutureproofToBridge",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF};return{kind:"bridgeMsg",value:t}}l.futureproofBridgeMsg=e}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null;if(r("gkx")("5398")){var i,l=(i=e.integral)==null||(i=i.transport)==null||(i=i.ancillary)==null?void 0:i.mimetype;if(a&&l===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE)return"gif"}else if(a)return"gif";return"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWAudioUtils","MAWDbMedia","MAWImageUtils","MAWMsgType","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(e.proto);if(t!=null)return s(t)}function s(e){return e==="ptt"?o("MAWMsgType").MSG_TYPE.PTT:e==="image"?o("MAWMsgType").MSG_TYPE.IMAGE:e==="video"?o("MAWMsgType").MSG_TYPE.VIDEO:e==="gif"?o("MAWMsgType").MSG_TYPE.GIF:e==="sticker"?o("MAWMsgType").MSG_TYPE.STICKER:e==="document"?o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e==="xma-image"?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function u(t){var n,r,a,i=t.deserialize().encryptedTransportMessage(),l=i==null?void 0:i.consumerMessage();if(!(i==null||l==null)){var s=e(l);if(s!=null){var u={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),externalId:t.getExternalId(),forwardingScore:0,groupId:(n=i.proto.metadata)==null?void 0:n.groupId,groupIndex:(r=i.proto.metadata)==null?void 0:r.groupIndex,groupSize:(a=i.proto.metadata)==null?void 0:a.groupSize,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:s};return{kind:"bridgeMsg",value:u}}}}function c(e,t,n){var r,a,i={height:n==null||(r=n.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.thumbnailHeight,width:n==null||(a=n.transport)==null||(a=a.ancillary)==null||(a=a.thumbnail)==null?void 0:a.thumbnailWidth},l={height:t==null?void 0:t.height,width:t==null?void 0:t.width};if(e==="Sticker"){var s;i=(s=o("MAWImageUtils")).boundHeightWidth(i.height,i.width,s.STICKER_THUMBNAIL_MAX_SIZE),l=s.boundHeightWidth(l.height,l.width,s.STICKER_THUMBNAIL_MAX_SIZE)}return{previewHeight:i.height,previewHeightLarge:l.height,previewWidth:i.width,previewWidthLarge:l.width}}function d(e,t,n,r){var a,i,l,s,u,d,m,p,_,f=e.ancillary,g=e.integral;if(!(f==null||g==null)&&!(f.receiverFetchId!=null||(g==null?void 0:g.receiverFetchId)!=null)){var h=n.getMsgId(),y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.mediaKeyTimestamp,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,b=C!=null?o("WAHashUtils").toPlaintextHash(C):void 0,v=f.waveform!=null?o("MAWAudioUtils").serializeWaveform(f.waveform):void 0;return babelHelpers.extends({accessibilitySummaryText:f.accessibilityLabel,defaultFilename:r,duration:((l=f.seconds)!=null?l:0)*1e3,filenames:r!=null?(s={},s[h]=r,s):void 0,filesize:o("WALongInt").numberOrThrowIfTooLarge((u=g==null||(d=g.transport)==null||(d=d.ancillary)==null?void 0:d.fileLength)!=null?u:0),gifPlayback:f.gifPlayback,hasMedia:!0,hasPreviewMedia:(g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.thumbnail)!=null},f.hdType!=null?{hdTypes:(p={},p[h]=f.hdType,p)}:{},{mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:t,messagesSortOrderMs:(_={},_[h]=n.topLevel.timestampMs,_),msgIds:[h],offlineAttachmentId:b,plaintextHash:b},c(t,f,g),{sortOrderMs:y!=null?o("WATimeUtils").castLongIntToMillisTime(y):void 0,threadJid:n.getChatJid(),transportKey:"WhatsApp",ts:n.getUnixTs(),waveformData:v})}}function m(t,n){var o,a,i=(o=t.documentMessage())==null?void 0:o.fileName,l=(a=t.attachmentMessage())==null?void 0:a.payload;if(l!=null){var s=e(t);if(s==null){r("FBLogger")("mps").mustfix("media type is null for attachment message");return}return d(l,s,n,i)}}function p(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=m(n,e.message);return r==null||e.supplementals.push({kind:"bridgeMedia",value:r}),e}l.getMediaTypeForMessage=e,l.getMediaTypeForServerMediaType=s,l.mediaToBridge=u,l.getBridgeFromAttachmentTransport=d,l.getBridgeMediaFromConsumerMessage=m,l.processAttachment=p}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.offset,s=i.length,u=i.mentionedJid,c=i.mentionType;c!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||l==null||s==null||u==null||(r.push(u+"@msgr"),n.push(t.substring(a,l)),n.push("@"+u+"@msgr"),a=l+s)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e=/^[ \r\n\s]*$/;function s(t,n){if(t==null)return!1;var r=o("ReStoreVaulting").maybeUnvault(t),a=o("EmojiRenderer").parse(r).map(function(e){return{length:e.length,offset:e.offset}}),i=n?o("EmoticonRenderer").parse(r).map(function(e){return{length:e.chars.length,offset:e.offset}}):[],l=a.concat(i);if(l.length===0)return!1;var s=l.sort(function(e,t){return e.offset-t.offset|0}),u={contents:0},c={contents:0},d=s.some(function(t){u.contents===t.offset?(u.contents=u.contents+t.length|0,c.contents=u.contents):c.contents=t.offset;var n=r.substring(u.contents,c.contents);return u.contents=t.offset+t.length|0,e.test(n)===!1}),m=u.contents!==r.length&&!e.test(r.substring(c.contents));return d?!1:!m}l.default=s}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWMpsGating","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s=e.deserialize().encryptedTransportMessage(),u=s==null?void 0:s.consumerMessage(),c=(u==null||(t=u.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(u==null||(n=u.payload)==null||(n=n.content)==null?void 0:n.messageText);if(!(u==null||c==null||s==null)){var d=(a=c.text)!=null?a:"";o("MAWMpsGating").isFullMpsEnabled()&&!r("mwv2MessageIsEmojiOnly")(d,!0)&&(d+="*"),d=o("MAWVault").vault(d);var m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),commands:c.commands,content:d,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,mentionedJids:c.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,specialTextSize:(i=(l=u.metadata)==null?void 0:l.specialTextSize)!=null?i:void 0,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:m}}}l.messageTextToBridgeMsg=e}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("MpsReceiverFetchInfoToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a,i,l=e.ancillary,s=e.integral,u=(n=s==null?void 0:s.receiverFetchId)!=null?n:l==null?void 0:l.receiverFetchId,c=s==null||(r=s.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(!(u==null||c==null)){var d=(a=l==null?void 0:l.width)!=null?a:0,m=(i=l==null?void 0:l.height)!=null?i:0;return{accessibilitySummaryText:l==null?void 0:l.accessibilityLabel,mimetype:c,msgId:t.getMsgId(),previewHeight:m,previewWidth:d,receiverFetchId:u,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(t.message.timestampMs),threadJid:t.getChatJid(),transportKey:"WhatsApp",type:"sticker"}}}function s(t,n){var r,o=(r=t.stickerMessage())==null?void 0:r.payload;if(o!=null)return e(o,n)}function u(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=s(n,e.message);return r==null||e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:r}),e}l.getReceiverFetchInfoForAttachmentTransport=e,l.getReceiverFetchInfoFromConsumerMessage=s,l.processReceiverFetchInfo=u}),98);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("MpsXmaToBridge",["MAWAckLevel","MAWBridgeXMA","MAWDbMedia","MAWDbXMA","MAWParseCollapsibleIdFromXMADataClass","MAWXMAUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","WAArmadilloXMA.pb","WAHashUtils","WAJids","WALongInt","WAMedia","WATimeUtils","maybeConvertMessageTextMentionsV2ToV1","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"];function s(e){var t,n,o;if(((t=(n=e.payload.messageText)==null?void 0:n.length)!=null?t:0)>0)return r("maybeConvertMessageTextMentionsV2ToV1")({commands:e.payload.commands,mentionedJid:e.payload.mentionedJid,mentions:e.payload.mentions,text:e.payload.messageText});var a=(o=e.associatedMessage())==null||(o=o.consumerMessage())==null||(o=o.payload)==null||(o=o.content)==null?void 0:o.messageText;if(a!=null&&a.text!=null)return r("maybeConvertMessageTextMentionsV2ToV1")(a)}function u(e){if(e!=null){var t=o("WATimeUtils").castLongIntToUnixTime(e);if(t!=null){var n=o("WATimeUtils").cappedMillisecondsUntil(t);if(n!=null){var r=n<=0;return{countdownTs:t,isExpiredXmaMsg:r,millisecondsUntilCountdownTs:n}}}}}function c(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage();if(!(n==null||r==null||o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType))){var a,i=o("MWXMAV2XmaDataClass").parseXmaDataClass(r.payload.xmaDataclass);o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(i)&&(a=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(i));var l=s(r),c=u(r==null?void 0:r.payload.targetExpiringAtSec),d=babelHelpers.extends({ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid()},a!=null?{collapsibleId:a}:{},{commands:l==null?void 0:l.commands,content:l==null?void 0:l.text,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isExpiredXmaMsg:c==null?void 0:c.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(r.payload.targetType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(r.payload.targetType),isForwarded:!1,isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(r.payload.targetType),isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(r.payload.targetType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(r.payload.targetType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(r.payload.targetType),isPostPrivateReply:o("MAWXMAUtils").isXMAPostPrivateReply(r.payload.targetType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(r.payload.targetType),isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(r.payload.targetType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(r.payload.targetType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType),isStoryShare:o("MAWXMAUtils").isXMAStoryShare(r.payload.targetType),mentionedJids:l==null?void 0:l.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:"XMA",xmaMessageType:r.payload.targetType});return{kind:"bridgeMsg",value:d}}}function d(t){var n,a,i,l,s,u,c,d,m,p,_=t.message,f=t.topLevel;if(f.value.type_!=="XMA")return t;var g=_.deserialize().encryptedTransportMessage(),h=g==null||(n=g.armadillo())==null?void 0:n.extendedContentMessage();if(g==null||h==null)return t;var y=h.payload.ctas.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),C=r("nullthrows")(h.payload.targetType),b=C===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,v=b?[null,h.previews().at(0)]:[h.previews().at(0),h.favicon()],S=v[0],R=v[1],L=S==null||(a=S.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.fileSha256,E=L!=null?o("WAHashUtils").toPlaintextHash(L):void 0,k=R==null||(i=R.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,I=k!=null?o("WAHashUtils").toPlaintextHash(k):void 0,T=(l=h.headerImage())==null||(l=l.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,D=T!=null?o("WAHashUtils").toPlaintextHash(T):void 0,x=o("WAMedia").MEDIA_TYPE.IMAGE,$=o("MAWBridgeXMA").mediaTypeToMimeType(x),P={author:_.getAuthor(),contentRef:h.payload.contentRef,ctas:y.slice(1),defaultCTA:y.at(0),defaultPreviewMediaId:o("MAWDbMedia").convertNumberToMediaId(0),defaultPreviewMediaPlaintextHash:E,duration:null,faviconMediaId:o("MAWDbMedia").convertNumberToMediaId(0),faviconPlaintextHash:I,filesize:o("WALongInt").numberOrThrowIfTooLarge((s=S==null||(u=S.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null?void 0:u.fileLength)!=null?s:0),hasMedia:E!=null,hasXmaFaviconMedia:k!=null,hasXmaHeaderMedia:T!=null,headerMediaId:o("MAWDbMedia").convertNumberToMediaId(0),headerMediaPlaintextHash:D,headerTitle:h.payload.headerTitle,maxSubtitleNumOfLines:h.payload.maxSubtitleNumOfLines,maxTitleNumOfLines:h.payload.maxTitleNumOfLines,mediaType:x,msgId:t.message.getMsgId(),offlineAttachmentId:E,overlayIconGlyph:h.payload.overlayIconGlyph,overlayTitle:h.payload.overlayTitle,playableUrlMimeType:$,previewHeight:S==null||(c=S.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,previewHeightLarge:S==null||(d=S.ancillary)==null?void 0:d.height,previewUrlMimeType:$,previewWidth:S==null||(m=S.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null||(m=m.thumbnail)==null?void 0:m.thumbnailWidth,previewWidthLarge:S==null||(p=S.ancillary)==null?void 0:p.width,subtitleText:h.payload.subtitleText,targetId:h.payload.targetId,targetType:C,targetUsername:h.payload.targetUsername,threadJid:t.message.getChatJid(),titleText:h.payload.titleText,ts:t.message.getUnixTs(),xmaDataclass:h.payload.xmaDataclass,xmaId:o("MAWDbXMA").convertNumberToXMAId(0),xmaLayoutType:h.payload.xmaLayoutType};return t.supplementals.push({kind:"bridgeXMA",value:P}),t}function m(e){var t,n,r=e.message.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null?void 0:t.extendedContentMessage(),i=a==null||(n=a.associatedMessage())==null?void 0:n.consumerMessage();if(i==null)return e;var l=o("MpsMediaToBridge").getBridgeMediaFromConsumerMessage(i,e.message);l!=null&&e.supplementals.push({kind:"bridgeMedia",value:l});var s=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoFromConsumerMessage(i,e.message);return s!=null&&e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:s}),e}function p(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage(),o=u(r==null?void 0:r.payload.targetExpiringAtSec);if(o==null)return e;var a=o.countdownTs,i=o.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeXMAStartCountdown",value:{msgs:[{countdownTs:a,millisecondsUntilCountdownTs:i,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}l.computeXmaContent=s,l.getExpiredXMAParams=u,l.xmaToBridge=c,l.processXmaAttachment=d,l.processXmaAssociatedMessageAttachment=m,l.processXmaExpiration=p}),98);
__d("MpsNoteReplyToBridge",["MAWAckLevel","MAWVault","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","MpsXmaToBridge","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e==null?void 0:e.videoContent(),n=e==null?void 0:e.stickerContent(),a=t!=null?t:n;if(a!=null){var i=t!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(t):void 0,l=n!=null?"sticker":void 0,s=r("nullthrows")(i!=null?i:l);return o("MpsMediaToBridge").getMediaTypeForServerMediaType(s)}}function s(t){var n,r,a=t.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply();if(!(a==null||i==null)){var l=i.payload,s=l.noteText,u=l.noteTimestampMs,c=l.textContent,d=i.payload.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(i.payload.noteTimestampMs)):void 0,m=o("MpsXmaToBridge").getExpiredXMAParams(d),p=t.message.senderId,_=e(i),f={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:(c==null?void 0:c.text)==null?void 0:o("MAWVault").vault(c.text),editCount:0,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isExpiredMsg:!1,isForwarded:!1,isNoteReply:!0,msgId:t.getMsgId(),replyContent:{noteContent:m!=null&&m.isExpiredXmaMsg?void 0:o("MAWVault").vault((r=s==null?void 0:s.text)!=null?r:""),replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(u)):void 0,replyToMsgId:t.getMsgId(),replyToUserId:p,replyType:"LIGHTWEIGHT_STATUS"},sender:p,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:_!=null?_:"Text"};return{kind:"bridgeMsg",value:f}}}function u(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.noteReplyMessage;if(n==null||r==null)return e;var a=r.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(r.noteTimestampMs)):void 0,i=o("MpsXmaToBridge").getExpiredXMAParams(a);if(i==null)return e;var l=i.countdownTs,s=i.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeNoteReplyStartCountdown",value:{msgs:[{countdownTs:l,millisecondsUntilCountdownTs:s,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}function c(t){var n,r=t.message,a=r.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply(),l=i==null?void 0:i.videoContent(),s=i==null?void 0:i.stickerContent(),u=l!=null?l:s,c=e(i);if(u==null||c==null)return t;var d=o("MpsMediaToBridge").getBridgeFromAttachmentTransport(u,c,r);if(d!=null&&t.supplementals.push({kind:"bridgeMedia",value:d}),s!=null){var m=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(s,r);m!=null&&t.supplementals.push({kind:"bridgeReceiverFetchInfo",value:m})}return t}l.noteReplyToBridge=s,l.processNoteReply=u,l.processNoteReplyAttachment=c}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MpsRavenToBridge",["EphemeralMediaViewMode","FBLogger","MAWAckLevel","MAWDbMedia","MAWProtobufDeserializers","RavenMessagingState","WAArmadilloApplication.pb","WAHashUtils","WAMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,o=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr;return!!o}function s(t){if(e(t)){var n={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:"",externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.RAVEN};return{kind:"bridgeMsg",value:n}}}function u(e){var t,n,a,i=e.message,l=(t=i.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,s=(n=l==null?void 0:l.ravenMessage)!=null?n:l==null?void 0:l.ravenMessageMsgr;if(s==null)return e;var u,c;e.supplementalMessages.forEach(function(e){var t,n,r=(t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.payload).encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content;u=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr,c=r==null?void 0:r.ravenActionNotifMessage});var d=(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.videoMessage=="object"&&u.videoMessage!==null||typeof u.videoMessage=="function")?o("WAMsgType").MSG_TYPE.VIDEO:(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.imageMessage=="object"&&u.imageMessage!==null||typeof u.imageMessage=="function")?o("WAMsgType").MSG_TYPE.IMAGE:null;if(d==null&&c==null)return r("FBLogger")("mps").mustfix("Unsupported Raven type"),e;var m=e.message.getMsgId(),p=s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.VIEW_ONCE?r("EphemeralMediaViewMode").READ_ONCE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.ALLOW_REPLAY?r("EphemeralMediaViewMode").REPLAYABLE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.KEEP_IN_CHAT?r("EphemeralMediaViewMode").PERMANENT:s.ephemeralType===void 0?void 0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s.ephemeralType)})(),_={duration:null,ephemeralMediaState:c==null?r("RavenMessagingState").UNSEEN:r("RavenMessagingState").SEEN,ephemeralMediaViewMode:p,filesize:100,hasMedia:!1,hasPreviewMedia:!1,mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:d||o("WAMsgType").MSG_TYPE.IMAGE,messagesSortOrderMs:(a={},a[m]=e.message.topLevel.timestampMs,a),msgIds:[e.message.getMsgId()],plaintextHash:o("WAHashUtils").stringToPlaintextHash("aaa"),previewHeight:1,previewHeightLarge:1,previewWidth:1,previewWidthLarge:1,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(e.message.topLevel.timestampMs),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()};return e.supplementals.push({kind:"bridgeMedia",value:_}),e}l.isRavenMsg=e,l.ravenToBridge=s,l.processRavenAttachment=u}),98);
__d("MpsReactionToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.consumerMessage())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.reactionMessage;if(r!=null){var a=r.senderTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WATimeUtils").castLongIntToMillisTime(r.senderTimestampMs)):e.getUnixTs(),i=(n=r.text)!=null?n:"",l=i===""?{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId()},type:"delete"}:{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId(),reaction:i,ts:a},type:"upsert"};return{kind:"bridgeReactionAction",value:l}}}l.reactionMessageToBridgeMsg=e}),98);
__d("MpsReplyToBridge",["MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage();if(r.kind!=="bridgeMsg"||a==null)return e;var i=(t=a.proto.metadata)==null?void 0:t.quotedMessage;if(i==null||i.stanzaId==null||r.value.replyContent!=null)return e;var l=o("MpsTypes").toMessageId(i.stanzaId);return r.value=babelHelpers.extends({},r.value,{replyContent:{isBumpMsg:!1,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(n.message.threadId,l),replyType:"MESSAGE"}}),babelHelpers.extends({},e,{topLevel:r})}l.processReplyMessage=e}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.consumerMessage())==null||(t=t.payload)==null||(t=t.applicationData)==null?void 0:t.revoke;if(!(n==null||r==null))return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.REVOKED}}}l.revokeMessageToBridgeMsg=e}),98);
__d("MpsScreenshotActionToBridgeMsg",["MAWAckLevel","MAWEphemeralUtils","WAArmadilloApplication.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=e.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.screenshotAction;if(!(a==null||r==null)){var i=o("MAWEphemeralUtils").getEphemeralScreenshotActionData((n=a.screenshotType)!=null?n:o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,e.getSenderJid(),e.isAuthorMe()),l={ack:o("MAWAckLevel").ACK.received,adminContent:i.ephemeralScreenshotActionContent,adminType:i.ephemeralScreenshotActionType,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:l}}}l.screenshotActionToBridgeMsg=e}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("MpsUnsupportedMessagesToBridge",["MAWAckLevel","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","WACommon.pb","WAMsgType","WAParseReadOnlyMetadataDataclassUtils","gkx","justknobx","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s,u,c=e.deserialize().encryptedTransportMessage();if(c!=null){var d=c==null?void 0:c.consumerMessage(),m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF},p=(d==null||(t=d.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(d==null||(n=d.payload)==null||(n=n.content)==null?void 0:n.messageText);if(p!=null){var _,f=((_=p.commands)==null?void 0:_.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(f&&!r("gkx")("12661"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"metaAiMessage"})}}var g=c==null||(a=c.armadillo())==null?void 0:a.paymentsTransactionMessage(),h=g!=null?g:c==null||(i=c.armadillo())==null?void 0:i.extendedContentMessage();if(h!=null){var y=h.payload,C=y.targetType,b=y.xmaDataclass;if(C==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:C,xmaDataclass:b})){var v=g!=null;return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(C,b,v)})}}}var S=d==null||(l=d.stickerMessage())==null?void 0:l.payload;if(S!=null){var R,L,E=((R=S.integral)==null?void 0:R.receiverFetchId)!=null||((L=S.ancillary)==null?void 0:L.receiverFetchId)!=null;if(E&&!r("justknobx")._("3677"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"stickerReceiverFetchMessage"})}}var k=d==null||(s=d.documentMessage())==null?void 0:s.payload;if(k!=null&&r("gkx")("23924"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m)};if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(c.proto.metadata))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"noteMention"})};var I=d==null||(u=d.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage;if(I!=null)return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"pollCreationMessage"})}}}l.unsupportedMessagesBridgeMsg=e}),98);
__d("MpsWaAdminMsgToBridge",["MAWAckLevel","MAWGetUserDeviceChangeAdminType","MAWJids","MAWLocalizationType","MAWUserJidWrapper","WAArmadilloTransportEvent.pb","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize(),i=(t=a.encryptedTransportEvent())==null?void 0:t.proto.event;if(i){var l=i.deviceChange,s=i.icdcAlert;if(((n=a.proto.metadata)==null?void 0:n.senderId)!=null){var u=o("WAJids").unsafeCoerceToUserJid((r=a.proto.metadata)==null?void 0:r.senderId),c=o("MAWJids").toUserJid(u),d=c===o("MAWUserJidWrapper").getMyUserJid()?[]:[o("WAJids").userIdFromJid(c)];if(s)return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ICDC_ALERT}};if(l){var m,p,_=(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED?"add":(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED?"remove":typeof l=="object"&&l!==null||typeof l=="function"?"update":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})();if(((m=a.proto.metadata)==null?void 0:m.senderId)==null)return;var f=o("WAJids").unsafeCoerceToUserJid((p=a.proto.metadata)==null?void 0:p.senderId),g=o("MAWJids").toUserJid(f),h=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(_,g===o("MAWUserJidWrapper").getMyUserJid()),y={ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:h,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:y}}}}}l.waAdminMsgToBridgeMsg=e}),98);
__d("MpsWaPlaceholderToBridge",["MAWAckLevel","WAArmadilloTransportEvent.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportEvent(),r=n==null||(t=n.proto.placeholder)==null?void 0:t.type;if(!(n==null||r==null)){var a={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:r===o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.UNAVAILABLE_MESSAGE?o("WAMsgType").MSG_TYPE.UNAVAILABLE:o("WAMsgType").MSG_TYPE.CIPHERTEXT};return{kind:"bridgeMsg",value:a}}}l.waPlaceholderToBridgeMsg=e}),98);
__d("MpsXmaMentionToBridge",["MAWUserJidWrapper","MAWXMAUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null?void 0:t.extendedContentMessage(),l=i==null?void 0:i.payload.targetType,s=o("MAWXMAUtils").isXMAStoryMention(l)||o("MAWXMAUtils").isFBXMAPostMention(l);if(a==null||i==null||!s||r.kind!=="bridgeMsg")return e;var u=o("MAWXMAUtils").isFBXMAPostMention(l),c=o("WAJids").interpretAsUserJid(n.getChatJid()),d=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),m=c==null?d:o("WAJids").userIdFromJid(c),p={mentionedUserId:m!=null?m:d,timestampMs:o("WATimeUtils").castToMillisTime(n.message.timestampMs)},_=u?babelHelpers.extends({},p,{replyType:"FB_POST_MENTION"}):babelHelpers.extends({},p,{replyType:"FB_STORY_MENTION"});return r.value=babelHelpers.extends({},r.value,{replyContent:_}),e}l.processXmaMention=e}),98);
__d("MpsXmaStoryReplyToBridge",["MAWAckLevel","MAWDbMedia","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MpsMediaToBridge","MpsXmaToBridge","WAHashUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WAJids").interpretAsUserJid(t.getChatJid()))!=null?n:t.getSenderJid(),a=o("MAWUserJidWrapper").getMyUserJid();return o("MAWXMAUtils").isXMAStoryProducerReply(e.targetType)?t.isAuthorMe()?a:r:t.isAuthorMe()?r:a}function s(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null||(n=l.armadillo())==null?void 0:n.extendedContentMessage();if(!(l==null||s==null||!o("MAWXMAUtils").isXMAStoryReply(s.payload.targetType))){var u=o("MpsXmaToBridge").computeXmaContent(s),c=s.previews().at(0),d=c==null||(r=c.integral)==null||(r=r.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,m=d!=null?o("WAHashUtils").toPlaintextHash(d):void 0,p=(a=s.payload.ctas.at(0))==null?void 0:a.nativeUrl,_=e(s.payload,t),f=o("MAWXMAUtils").isXMAStoryProducerReply(s.payload.targetType),g=(i=s.associatedMessage())==null?void 0:i.consumerMessage(),h=g!=null?o("MpsMediaToBridge").getMediaTypeForMessage(g):null,y=o("MpsXmaToBridge").getExpiredXMAParams(s==null?void 0:s.payload.targetExpiringAtSec),C=f?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:o("MAWDbMedia").convertNumberToMediaId(1),storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyMsgType:o("MAWMsgType").MSG_TYPE.IMAGE,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)}:{replyType:"STORY",storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)},b={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),commands:u==null?void 0:u.commands,content:u==null?void 0:u.text,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,isStoryReply:!0,mentionedJids:u==null?void 0:u.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:t.getMsgId(),replyContent:C,sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:h!=null?h:"Text"};return{kind:"bridgeMsg",value:b}}}l.storyReplyToBridge=s}),98);
__d("MpsMessageToBridge",["FBLogger","MAWMsgType","MpsAdminMsgToBridge","MpsBumpMessageToBridgeMsg","MpsEditToBridge","MpsEphemeralMessageToBridge","MpsForwardToBridge","MpsFutureproofToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsNoteReplyToBridge","MpsRavenToBridge","MpsReactionToBridge","MpsReceiverFetchInfoToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg","MpsScreenshotActionToBridgeMsg","MpsUnsupportedMessagesToBridge","MpsWaAdminMsgToBridge","MpsWaPlaceholderToBridge","MpsXmaMentionToBridge","MpsXmaStoryReplyToBridge","MpsXmaToBridge","WAGetPlatformFromStanzaId","WAJids","WAStanzaUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MpsUnsupportedMessagesToBridge").unsupportedMessagesBridgeMsg,o("MpsMessageTextToBridge").messageTextToBridgeMsg,o("MpsMediaToBridge").mediaToBridge,o("MpsAdminMsgToBridge").adminMsgToBridgeMsg,o("MpsScreenshotActionToBridgeMsg").screenshotActionToBridgeMsg,o("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg,o("MpsBumpMessageToBridgeMsg").bumpMessageToBridgeMsg,o("MpsWaAdminMsgToBridge").waAdminMsgToBridgeMsg,(e=o("MpsXmaToBridge")).xmaToBridge,o("MpsXmaStoryReplyToBridge").storyReplyToBridge,o("MpsRavenToBridge").ravenToBridge,o("MpsNoteReplyToBridge").noteReplyToBridge,o("MpsWaPlaceholderToBridge").waPlaceholderToBridgeMsg,o("MpsFutureproofToBridge").futureproofBridgeMsg],u=[o("MpsEditToBridge").editMessageToBridgeMsg,o("MpsReactionToBridge").reactionMessageToBridgeMsg],c=[o("MpsEditToBridge").processEditedMessage,o("MpsReplyToBridge").processReplyMessage,o("MpsMediaToBridge").processAttachment,o("MpsEphemeralMessageToBridge").processEphemeralMessage,o("MpsReceiverFetchInfoToBridge").processReceiverFetchInfo,e.processXmaAttachment,e.processXmaAssociatedMessageAttachment,o("MpsXmaMentionToBridge").processXmaMention,o("MpsRavenToBridge").processRavenAttachment,o("MpsForwardToBridge").processForwarding,o("MpsNoteReplyToBridge").processNoteReply,o("MpsNoteReplyToBridge").processNoteReplyAttachment,e.processXmaExpiration];function d(e,t){for(var n of e)try{var a=n(t);if(a!=null)return a}catch(e){var i=o("WAStanzaUtils").toStanzaId(t.getExternalId()),l=o("WAJids").interpretAsGroupJid(t.getChatJid())!=null;throw r("FBLogger")("mps").catching(r("getErrorSafe")(e)).mustfixThrow("mpsMessagetoBridge failed to create a bridge object for message from platform: %s, is_group: %s",o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(i),l)}}function m(e){var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e.toplevelProtobuf),n=d(s,t);if(n!=null&&!(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.ADMIN&&n.value.adminType==null)){if(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.FUTUREPROOF)return{supplementals:[],topLevel:n};var r=e.supplementalProtobufs.values().toArray().map(function(t){return d(u,o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(t,e.toplevelProtobuf))}).filter(Boolean),a=c.reduce(function(e,t){return t(e)},{message:t,supplementalMessages:e.supplementalProtobufs,supplementals:r,topLevel:n});return{supplementals:a.supplementals,topLevel:a.topLevel}}}l.mpsFullMessagetoBridge=m}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("WACryptoCurve25519Dependencies",["Promise","WACryptoPrimitives","WASignalKeys","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).resolve().then(function(){return o("WASignalKeys").makeKeyPair()})}function u(t,r){return(e||(e=n("Promise"))).resolve().then(function(){return o("WACryptoPrimitives").scalarMult(o("WASignalOther").ensureSize(r,32),o("WASignalOther").ensureSize(t,32)).buffer})}var c={generateIdentityKeyPair:s,calculateAgreement:u};l.calculateAgreement=u,l.CURVE25519_SIGNAL_DEPENDENCIES=c}),98);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAGetSafeQPLError","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",""])),t.id),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("WAGetSafeQPLError").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);/*FB_PKG_DELIM*/
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=o("react-compiler-runtime").c(9),r=e.dataSource,a=t===void 0?!1:t,i=m(a),l=i[0],s=i[1],u=d(null),p;n[0]!==r?(p=function(t){var e,n=t.onResolvePayload,o=t.requestParams;(e=u.current)==null||e.unsubscribe(),u.current=r.fetchNetwork(o).subscribe({complete:function(){s(!1)},error:function(t){s(!1)},next:function(t){return n(t)},start:function(t){s(!0)},unsubscribe:function(){s(!1)}})},n[0]=r,n[1]=p):p=n[1];var _=p,f,g;n[2]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return function(){var e;(e=u.current)==null||e.unsubscribe()}},g=[],n[2]=f,n[3]=g):(f=n[2],g=n[3]),c(f,g);var h;n[4]!==l?(h={isLoading:l},n[4]=l,n[5]=h):h=n[5];var y;return n[6]!==_||n[7]!==h?(y=[h,_],n[6]=_,n[7]=h,n[8]=y):y=n[8],y}l.default=p}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolver",["FBLogger","cometTypeaheadODSLogFetchNetworkEvent","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=o("react-compiler-runtime").c(17),a=e.dataSource,i=e.dataSourceFetchConfigParams,l=e.onResolvePayload,s;n[0]!==i?(s=i===void 0?{}:i,n[0]=i,n[1]=s):s=n[1];var u=s,m=u.requestFlow,p=u.shouldDebounceNetwork,_=p===void 0?!0:p,f;n[2]!==a?(f={dataSource:a},n[2]=a,n[3]=f):f=n[3];var g=r("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")(f),h=g[0],y=g[1],C=h.isLoading,b=r("useDebouncedComet")(y),v;n[4]!==l?(v=function(t,n){var e=n.isTraceComplete,o=n.source;try{l(t,{isTraceComplete:e,source:o})}catch(e){r("FBLogger")("search").mustfix("Failed to resolve fetched payload")}return o},n[4]=l,n[5]=v):v=n[5];var S=v,R=d(m),L;n[6]!==S?(L=function(t){S(t,{isTraceComplete:!0,source:t.entries.length>0?"network":"network-no-results"}),r("cometTypeaheadODSLogFetchNetworkEvent")&&r("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},n[6]=S,n[7]=L):L=n[7];var E=L,k,I;n[8]!==y||n[9]!==b||n[10]!==t||n[11]!==E||n[12]!==_?(k=function(){var e=function(t){var e=t.requestParams,n=e.requestFlow;n!=null&&(R.current=n);var r={onResolvePayload:E,requestParams:babelHelpers.extends({},e,{requestFlow:R.current})};_?b(r):y(r)};t!=null&&e(t)},I=[y,b,t,E,_],n[8]=y,n[9]=b,n[10]=t,n[11]=E,n[12]=_,n[13]=k,n[14]=I):(k=n[13],I=n[14]),c(k,I);var T;return n[15]!==C?(T=[{isLoading:C}],n[15]=C,n[16]=T):T=n[16],T}l.default=m}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetch",["FBLogger","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolver"],(function(t,n,r,o,a,i,l){"use strict";var e=["loggingEventTrace"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useState;function m(t){var n,a=o("react-compiler-runtime").c(9),i=d(null),l=i[0],s=i[1],u=r("useBaseTypeaheadSubscriptionDataSourceFetchResolver")(t,l),c=u[0],m=c.isLoading,p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=function(t,n){var e=n===void 0?"all":n;s({requestParams:t,source:e})},a[0]=p):p=a[0];var _=p,f;a[1]!==l?(f=function(n){var t=n||{},o=t.requestFlow,a=t.source;if(l==null){r("FBLogger")("search").mustfix("Refetch cannot be called with undefined `fetchParams`");return}var i=l.requestParams,s=i.loggingEventTrace,u=babelHelpers.objectWithoutPropertiesLoose(i,e),c=babelHelpers.extends({loggingEventTrace:babelHelpers.extends({},s,{sequenceID:String(Date.now())}),requestFlow:o},u);_(c,a)},a[1]=l,a[2]=f):f=a[2];var g=f,h=(n=l==null?void 0:l.source)!=null?n:"all",y;a[3]!==m||a[4]!==h?(y={isLoading:m,source:h},a[3]=m,a[4]=h,a[5]=y):y=a[5];var C;return a[6]!==g||a[7]!==y?(C=[y,_,g],a[6]=g,a[7]=y,a[8]=C):C=a[8],C}l.default=m}),98);
__d("TypeaheadLoggingFetchRequestFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1880031"),s=o("FalcoLoggerInternal").create("typeahead_logging_fetch_request",e),u=s;l.default=u}),98);
__d("CometTypeaheadVolumeLoggingProvider",["FBLogger","TypeaheadLoggingFetchRequestFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return Math.random().toString()},s=(function(){function t(t){this.$2=null,this.$1=t,this.$2=e()}var n=t.prototype;return n.getContext=function(){return this.$1},n.getSessionID=function(){return this.$2==null&&r("FBLogger")("search").mustfix("Logging sessionID requested from %s surface does not exist.",this.getContext()),this.$2},n.logRequest=function(t){var e={context:this.getContext(),requestType:t,sessionID:this.getSessionID()};r("TypeaheadLoggingFetchRequestFalcoEvent").log(function(){return{fetchRequest:e}})},t})();l.default=s}),98);
__d("useCometTypeaheadVolumeLoggingProvider",["CometTypeaheadVolumeLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?"UNKNOWN":e,a,i;return t[0]!==n?(i=new(r("CometTypeaheadVolumeLoggingProvider"))(n),t[0]=n,t[1]=i):i=t[1],a=i,a}l.default=u}),98);
__d("CometInternalTypeaheadSubscriptionProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","useBaseTypeaheadSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher","useCometTypeaheadVolumeLoggingProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=e.children,n=e.dataSource,o=e.dataSourceFetchConfigParams,a=e.loggingContext,i=e.onFetchEntries_DO_NOT_USE,l=e.traceProvider,u=r("useCometInternalTypeaheadStateDispatcher")(),m=u.dispatchActiveEntries,p=r("useCometTypeaheadVolumeLoggingProvider")(a),_=r("useBaseTypeaheadSubscriptionDataSourceFetch")({dataSource:n,dataSourceFetchConfigParams:o,onResolvePayload:c(function(e,t){var n=e.entries,r=t.isTraceComplete,o=t.source;m(n!=null?n:[]),p.logRequest(h),i&&i(n),l&&!l.isResolved()&&r&&(o==="cache"&&n.length>=l.getEntriesCountForVisualComplete()?l.setEndReason("max_suggestions_reached"):o==="network"?l.setEndReason("all_queries_completed"):o==="network-no-results"&&l.setEndReason("all_queries_completed_no_network_results"),l.resolve())},[m,i,l])}),f=_[0],g=f.isLoading,h=f.source,y=_[1],C=_[2],b=d(function(){return{fetch:y,isLoading:g,refetch:C,source:h}},[y,g,C,h]);return s.jsx(r("CometInternalTypeaheadFetchContext").Provider,{value:b,children:s.jsx(r("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:g,source:h,children:t})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("BaseSubscriptionTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadStateProvider","CometInternalTypeaheadSubscriptionProvider","emptyFunction","react","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["autoOpen","autoFocus","isDisabled","errorMessage","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","inputRef","viewRole","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useId,p=c.useMemo;function _(t){var n=t.autoOpen,o=n===void 0?!1:n,a=t.autoFocus,i=a===void 0?!1:a,l=t.isDisabled,s=l===void 0?!1:l,c=t.errorMessage,_=c===void 0?null:c,f=t.inputStrategyRenderer,g=t.dataSource,h=t.dataSourceFetchConfigParams,y=t.decorators,C=y===void 0?[]:y,b=t.emptyEntries_DO_NOT_USE,v=t.id,S=t.label,R=S===void 0?"":S,L=t.loggingContext,E=t.onBackspace,k=E===void 0?r("emptyFunction"):E,I=t.onBlur,T=I===void 0?r("emptyFunction"):I,D=t.onChange,x=t.onClose,$=x===void 0?r("emptyFunction"):x,P=t.onEnter,N=P===void 0?r("emptyFunction"):P,M=t.onEscape,w=M===void 0?r("emptyFunction"):M,A=t.onFetchEntries_DO_NOT_USE,F=t.onFocus,O=F===void 0?r("emptyFunction"):F,B=t.onOpen,W=B===void 0?r("emptyFunction"):B,q=t.onPressEntry,U=t.placeholder,V=U===void 0?"":U,H=t.shouldQueryStringFollowHighlightedEntry,G=H===void 0?!0:H,z=t.shouldQueryStringUpdateFromSelectedEntryOnClick,j=z===void 0?!0:z,K=t.testid,Q=K===void 0?"":K,X=t.traceProvider,Y=t.inputRef,J=t.viewRole,Z=J===void 0?"listbox":J,ee=t.viewStrategyRenderer,te=babelHelpers.objectWithoutPropertiesLoose(t,e),ne=m(),re=p(function(){var e=r("CometInternalTypeahead.react");return C.forEach(function(t){var n=t.decorate,r=t.params;e=n(e,r)}),e},[C]),oe=d(function(e){j&&D(e.label),q&&q(e)},[D,q,j]),ae=p(function(){return r("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(f,{shouldQueryStringFollowHighlightedEntry:G})},[f,G]),ie=R||V;return u.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:u.jsx(r("CometInternalTypeaheadStateProvider"),{autoOpen:o,emptyEntries_DO_NOT_USE:b,onClose:$,onOpen:W,children:u.jsx(r("CometInternalTypeaheadSubscriptionProvider"),{dataSource:g,dataSourceFetchConfigParams:h,loggingContext:L,onFetchEntries_DO_NOT_USE:A,traceProvider:X,children:u.jsx(re,babelHelpers.extends({},te,{autoFocus:i,errorMessage:_,id:v!=null?v:ne,inputRef:Y,inputStrategyRenderer:ae,isDisabled:s,label:ie,onBackspace:k,onBlur:T,onChange:D,onDownArrow:r("emptyFunction"),onEnter:N,onEscape:w,onFocus:O,onHighlightEntry:r("emptyFunction"),onPressEntry:oe,onShiftTab:r("emptyFunction"),onTab:r("emptyFunction"),onUpArrow:r("emptyFunction"),placeholder:V,testid:void 0,viewRole:Z,viewStrategyRenderer:ee}))})})})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("CancellablePromise",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s="CancellationToken.TokenCancelled";function u(t,o,a){return a.then(function(a){return t.isCancelled()?(e||(e=n("Promise"))).reject(r("err")(s)):o(a)})}function c(t,o){return o.catch(function(o){return o instanceof Error&&o.message===s?(e||(e=n("Promise"))).resolve(t):(e||(e=n("Promise"))).reject(r("err"))})}l.then_=u,l.ignoreFailed=c}),98);
__d("CancellationToken",[],(function(t,n,r,o,a,i){"use strict";function e(){var e={contents:!1};return{cancel:function(){e.contents=!0},isCancelled:function(){return e.contents}}}i.default=e}),66);
__d("MWTopNavListDropdownTitle.react",["fbt","BaseHeading.react","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=[];function d(e){var t=o("react-compiler-runtime").c(16),n=e.actions,a=e.onReturn,i=e.testid,l=e.title,d=n===void 0?c:n,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 x78zum5 x2lah0s x1qughib x21xpn4 x1whwgri x1hndj7l xdwfu72 xnx504b"},t[0]=p):p=t[0];var _;t[1]!==a?(_=a!=null?u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Back"),icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),iconRatio:"large",onPress:a,size:32,type:"deemphasized"})}):null,t[1]=a,t[2]=_):_=t[2];var f;t[3]!==l?(f=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("BaseHeading.react"),{isPrimaryHeading:!0,children:u.jsx(r("MWXText.react"),{type:"headlineEmphasized1",children:l})})}),t[3]=l,t[4]=f):f=t[4];var g;t[5]!==_||t[6]!==f?(g=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:[_,f]}),t[5]=_,t[6]=f,t[7]=g):g=t[7];var h;t[8]!==d?(h=d.map(m),t[8]=d,t[9]=h):h=t[9];var y;t[10]!==h?(y=u.jsx(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:h}),t[10]=h,t[11]=y):y=t[11];var C;return t[12]!==g||t[13]!==y||t[14]!==i?(C=u.jsxs("header",babelHelpers.extends({},p,{"data-testid":void 0,children:[g,y]})),t[12]=g,t[13]=y,t[14]=i,t[15]=C):C=t[15],C}function m(e,t){return u.jsx(r("MWXRowItem.react"),{children:e},t)}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),226);
__d("CometMessagingJewelDropdownContentGlimmer.react",["FDSListCellGlimmer.react","MWTopNavListDropdownTitle.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.isFullHeight,a=e.title,i=e.withBackButton,l=n===void 0?!1:n,u=i===void 0?!1:i,c;t[0]!==l?(c={0:{},1:{className:"x9f619 x20eyyc xvv7f4i x1cvmir6"}}[!!l<<0],t[0]=l,t[1]=c):c=t[1];var d;t[2]!==a||t[3]!==u?(d=a!=null&&s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:u?r("emptyFunction"):void 0,title:a}),t[2]=a,t[3]=u,t[4]=d):d=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(r("FDSListCellGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:Math.max(Math.ceil((window.innerHeight-72-45)/76),1)}),t[5]=m):m=t[5];var p;return t[6]!==c||t[7]!==d?(p=s.jsxs("div",babelHelpers.extends({},c,{children:[d,m]})),t[6]=c,t[7]=d,t[8]=p):p=t[8],p}l.default=u}),98);
__d("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql",["CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsJewelNuxWrapper_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownQPBannerContainer_viewer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e,t],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[t],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null},e],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],storageKey:null},{if:null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{if:null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],storageKey:null}]}]}]},params:{id:n("CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownEBUpsellContainerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:n("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQPBannerContainer_viewer",selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer.react",["CometMessagingJewelDropdownQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPageletWithDiv.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i,l=o("react-compiler-runtime").c(9),s=t.viewer,c=o("CometRelay").useFragment(e!==void 0?e:e=n("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql"),s),m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m={context_surface_id:8439,context_trigger:"messaging_jewel_open"},l[0]=m):m=l[0];var p=r("useQuickPromotionFalcoEvent")(m),_;if(l[1]!==(c==null||(a=c.jewel_qp)==null?void 0:a.nodes)){var f,g;_=c==null||(f=c.jewel_qp)==null||(f=f.nodes)==null?void 0:f.find(d),l[1]=c==null||(g=c.jewel_qp)==null?void 0:g.nodes,l[2]=_}else _=l[2];var h=_,y=h==null||(i=h.comet_qp_sections)==null?void 0:i.renderer_strategy;if(y==null)return null;var C;l[3]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx(r("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),l[3]=C):C=l[3];var b;l[4]!==y?(b=u.jsx(o("CometRelay").MatchContainer,{match:y}),l[4]=y,l[5]=b):b=l[5];var v;return l[6]!==p||l[7]!==b?(v=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:C,name:"CometMessagingJewelDropdownQPBannerContainer",children:u.jsx(r("CometQuickPromotionLoggerContext.react").Provider,{value:p,children:b})}),l[6]=p,l[7]=b,l[8]=v):v=l[8],v}function d(e){var t;return((t=e.comet_qp_sections)==null?void 0:t.renderer_strategy)!=null}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEncryptedBackupsJewelNuxWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapperDeferred.react"));function c(e){return s.jsx(u,babelHelpers.extends({},e))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPageletWithDiv.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.onError,i;t[0]!==n?(i=s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxQuickPromotionWrapper",children:s.jsx(u,{children:n})}),t[0]=n,t[1]=i):i=t[1];var l;return t[2]!==a||t[3]!==i?(l=s.jsx(r("CometErrorBoundary.react"),{onError:a,children:i}),t[2]=a,t[3]=i,t[4]=l):l=t[4],l}l.default=c}),98);
__d("CometMessagingJewelDropdownEBUpsellContainer.react",["CometMessagingJewelDropdownEBUpsellContainerQuery.graphql","CometMessagingJewelDropdownQPBannerContainer.react","CometRelay","FBLogger","MWEncryptedBackupsJewelNuxWrapperDeferred.react","MWInboxContextSwitcherUtils","MWInboxQuickPromotionWrapper.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.ebSoftblockUpsell,a=e.ebUpsellContainerQueryRef,i=e.selectedFilterTab,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(i)&&n==null?u.jsx(r("MWInboxQuickPromotionWrapper.react"),{onError:d,children:u.jsx(m,{ebUpsellContainerQueryRef:a})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function d(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}function m(t){var a=o("react-compiler-runtime").c(5),i=t.ebUpsellContainerQueryRef,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql"),i),s;a[0]!==l.viewer?(s=u.jsx(r("CometMessagingJewelDropdownQPBannerContainer.react"),{viewer:l.viewer}),a[0]=l.viewer,a[1]=s):s=a[1];var c;return a[2]!==l||a[3]!==s?(c=u.jsx(r("MWEncryptedBackupsJewelNuxWrapperDeferred.react"),{query:l,children:s}),a[2]=l,a[3]=s,a[4]=c):c=a[4],c}l.default=c}),98);
__d("MWInboxContextSwitcherDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxContextSwitcher.react").__setRef("MWInboxContextSwitcherDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={tabPlaceholder:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x78zum5 xu0aao5 x1y1aw1k xwib8y2 xf7dkkf xv54qhq x3bhodz",children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:u.tabPlaceholder})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("useMWJewelSettingsButtonBadge",["cr:4042","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e,t=(e=n("cr:4042")==null?void 0:n("cr:4042")())!=null?e:{},r=t.badge,o=r===void 0?null:r;return{badge:o,onButtonPress:function(){}}}l.default=u}),98);
__d("MWJewelDropdownHeader.react",["fbt","CometHomeChatSettings.entrypoint","FDSCircleButton.react","FDSComposeFilled16Icon","FDSDots3HorizontalFilled20Icon","FDSEntryPointPopoverTrigger.react","FDSTooltip.react","LSThreadAttributionStore","MWJewelDropdownHeaderSeeAllButton.react","MWJewelPopoverDialogContext.react","MWPSearchSystem","MWTopNavListDropdownTitle.react","MessengerWebUXLogger","emptyFunction","react","react-compiler-runtime","useCometPreloader","useMWChatOpenNewTab","useMWJewelSettingsButtonBadge","useMWNewChatTabContainerPreload","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext;function _(e){var t=o("react-compiler-runtime").c(13),n=e.onOpenArchivedChats,a=e.onOpenMessageRequests,i=e.onOpenRestrictedAccountsList,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Options"),t[0]=l):l=t[0];var u=l,d=p(r("MWJewelPopoverDialogContext.react")),m=d.setIsOpenForDialog,_=r("useMWJewelSettingsButtonBadge")(),f=_.badge,g=_.onButtonPress,h;t[1]===Symbol.for("react.memo_cache_sentinel")?(h={},t[1]=h):h=t[1];var y=n!=null?n:void 0,C=a!=null?a:void 0,b=i!=null?i:void 0,v;t[2]!==y||t[3]!==C||t[4]!==b?(v={onOpenArchivedChats:y,onOpenMessageRequests:C,onOpenRestrictedAccountsList:b},t[2]=y,t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==f||t[7]!==g||t[8]!==m?(S=function(t,n,o,a,i,l){return c.jsxs(r("FDSTooltip.react"),{align:"end",tooltip:u,children:[f,c.jsx(r("FDSCircleButton.react"),{"aria-label":u,color_DEPRECATED:"secondary",icon:r("FDSDots3HorizontalFilled20Icon"),onHoverIn:a,onHoverOut:i,onPress:function(){m(!1),n(),g()},onPressIn:l,ref:t,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})]})},t[6]=f,t[7]=g,t[8]=m,t[9]=S):S=t[9];var R;return t[10]!==v||t[11]!==S?(R=c.jsx(r("FDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:h,otherProps:v,popoverEntryPoint:r("CometHomeChatSettings.entrypoint"),position:"below",preloadTrigger:"button",children:S}),t[10]=v,t[11]=S,t[12]=R):R=t[12],R}function f(t){var n=o("react-compiler-runtime").c(35),a=t.inboxUrl,i=t.onClose,l=t.onOpenArchivedChats,u=t.onOpenMessageRequests,d=t.onOpenRestrictedAccountsList,m=t.onReturn,p=t.title,f=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g=r("useMWChatOpenNewTab")("jewelNewMessage"),h=r("MessengerWebUXLogger").useInteractionLogger(),y;n[0]!==f||n[1]!==h||n[2]!==i||n[3]!==g?(y=function(){o("LSThreadAttributionStore").setSourceForNewThread("jewelNewMessage"),f&&(g(!1),i()),h==null||h({eventName:"create_thread"})},n[0]=f,n[1]=h,n[2]=i,n[3]=g,n[4]=y):y=n[4];var C=y,b=r("useMWNewChatTabContainerPreload")(),v=b[0],S=b[1],R=(e||(e=r("useReStore")))(),L;n[5]!==R?(L=function(){return o("MWPSearchSystem").makeAll(R)},n[5]=R,n[6]=L):L=n[6];var E=L,k=r("useCometPreloader")("button_aggressive",r("emptyFunction"),E),I=k.onHoverInPreloader,T=k.onHoverMovePreloader,D=k.onHoverOutPreloader,x;n[7]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"New message"),n[7]=x):x=n[7];var $=x,P;n[8]!==l||n[9]!==u||n[10]!==d?(P=c.jsx(_,{onOpenArchivedChats:l,onOpenMessageRequests:u,onOpenRestrictedAccountsList:d},"mw-jewel-settings"),n[8]=l,n[9]=u,n[10]=d,n[11]=P):P=n[11];var N;n[12]!==a||n[13]!==i?(N=c.jsx(r("MWJewelDropdownHeaderSeeAllButton.react"),{onClose:i,testid:void 0,url:a},"mw-jewel-see-all-button"),n[12]=a,n[13]=i,n[14]=N):N=n[14];var M;n[15]!==v||n[16]!==I?(M=function(t){v(t),I(t)},n[15]=v,n[16]=I,n[17]=M):M=n[17];var w;n[18]!==S||n[19]!==D?(w=function(){S(),D()},n[18]=S,n[19]=D,n[20]=w):w=n[20];var A;n[21]!==C||n[22]!==E||n[23]!==T||n[24]!==M||n[25]!==w?(A=c.jsx(r("FDSTooltip.react"),{align:"end",tooltip:$,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":$,color_DEPRECATED:"secondary",icon:r("FDSComposeFilled16Icon"),onFocusIn:E,onHoverIn:M,onHoverMove:T,onHoverOut:w,onPress:C,role:"button",size:32,testid:void 0,type_DEPRECATED:"deemphasized"})},"mw-jewel-new-message"),n[21]=C,n[22]=E,n[23]=T,n[24]=M,n[25]=w,n[26]=A):A=n[26];var F;n[27]!==P||n[28]!==N||n[29]!==A?(F=[P,N,A].filter(Boolean),n[27]=P,n[28]=N,n[29]=A,n[30]=F):F=n[30];var O;return n[31]!==m||n[32]!==F||n[33]!==p?(O=c.jsx(r("MWTopNavListDropdownTitle.react"),{actions:F,onReturn:m,title:p}),n[31]=m,n[32]=F,n[33]=p,n[34]=O):O=n[34],O}l.default=f}),226);
__d("MWJewelNestedFolderThreadListHeader.react",["MWTopNavListDropdownTitle.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.onReturn,a=e.title,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:n,title:a}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWXListCellStrict.react",["cr:1357","cr:2004","cr:321","cr:3296","cr:6221","cr:842","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(22),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:1357")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:1357"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:321")!=null&&n("cr:6221")!=null&&n("cr:3296")!=null&&n("cr:842")!=null&&n("cr:2004")!=null){var s=a,c=s.addOnStart,d=s.disabled,m=s.headline,p=s.linkProps,_=s.onHoverIn,f=s.onHoverOut,g=s.onPress,h=s.onPressIn,y=s.selected,C=s.testid,b;r[6]!==c||r[7]!==d?(b=c!=null?u.jsx(n("cr:3296"),{addOnStart:c,disabled:d!=null?d:!1}):void 0,r[6]=c,r[7]=d,r[8]=b):b=r[8];var v=b,S;r[9]!==m?(S=u.jsx(n("cr:6221"),{type:"headline4",children:m}),r[9]=m,r[10]=S):S=r[10];var R;return r[11]!==p||r[12]!==_||r[13]!==f||r[14]!==g||r[15]!==h||r[16]!==i||r[17]!==y||r[18]!==S||r[19]!==C||r[20]!==v?(R=u.jsx(n("cr:842"),{paddingHorizontal:8,paddingVertical:0,children:u.jsx(n("cr:2004"),{children:u.jsx(n("cr:321"),{addOnStart:v,content:S,linkProps:p,onHoverIn:_,onHoverOut:f,onPress:g,onPressIn:h,ref:i,selected:y,size:"medium",testid:void 0})})}),r[11]=p,r[12]=_,r[13]=f,r[14]=g,r[15]=h,r[16]=i,r[17]=y,r[18]=S,r[19]=C,r[20]=v,r[21]=R):R=r[21],R}return null}l.default=c}),98);
__d("MWJewelMessageRequestsThread.react",["fbt","FDSChevronLeftFilled16Icon","FDSChevronRightFilled16Icon","FDSIcon.react","FDSMessagesFilled24Icon","I64","LSIntEnum","Locale","MWJewelThreadSnippet.react","MWXListCellStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(){var t=o("react-compiler-runtime").c(5),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.contacts||t[1]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(-1)).filter(_).map(function(e){var t=e.snippetSenderContactId;if(t!=null){var r=o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(t),i.id+":51");return r?r.name:void 0}})},t[0]=n.tables.contacts,t[1]=n.tables.threads,t[2]=a):a=t[2];var l;return t[3]!==n?(l=[n],t[3]=n,t[4]=l):l=t[4],o("ReQLSuspense").useFirst(a,l,i.id+":36")}function _(e){return(c||(c=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function f(e){var t=o("react-compiler-runtime").c(17),n=e.onOpenMessageRequests,a=e.unreadRequestsCount,i;t[0]!==a?(i=s._(/*BTDS*/"_j{\"*\":\"New message requests\",\"_1\":\"New message request\"}",[s._plural(a)]),t[0]=a,t[1]=i):i=t[1];var l=i,u;t[2]!==a?(u=s._(/*BTDS*/"_j{\"someone\":\"From someone you may know\",\"people\":\"From people you may know\"}",[s._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]),t[2]=a,t[3]=u):u=t[3];var c=u,d=p();if(d!=null)if(a===1){var _;t[4]!==d?(_=s._(/*BTDS*/"From {name}",[s._param("name",d)]),t[4]=d,t[5]=_):_=t[5],c=_}else{var f;t[6]!==d||t[7]!==a?(f=s._(/*BTDS*/"From {name} and {count} more",[s._param("name",d),s._param("count",a-1)]),t[6]=d,t[7]=a,t[8]=f):f=t[8],c=f}var g,h;t[9]===Symbol.for("react.memo_cache_sentinel")?(g={addOn:m.jsx(r("FDSIcon.react"),{color:"secondary",icon:o("Locale").isRTL()?r("FDSChevronLeftFilled16Icon"):r("FDSChevronRightFilled16Icon")}),type:"body"},h={icon:r("FDSMessagesFilled24Icon"),size:56,type:"contained-icon"},t[9]=g,t[10]=h):(g=t[9],h=t[10]);var y;t[11]!==c?(y=m.jsx(r("MWJewelThreadSnippet.react"),{isUnread:!0,text:c}),t[11]=c,t[12]=y):y=t[12];var C;return t[13]!==n||t[14]!==y||t[15]!==l?(C=m.jsx(r("MWXListCellStrict.react"),{addOnEnd:g,addOnStart:h,body:y,headline:l,level:4,onPress:n}),t[13]=n,t[14]=y,t[15]=l,t[16]=C):C=t[16],C}l.default=f}),226);
__d("useMWLSJewelLoadMoreThreads",["Int64Hooks","loadMoreLSThreads","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==t||n[1]!==a?(l=function(){return function(){var e=a.runInTransaction(function(e){return r("loadMoreLSThreads")(e,t)},"readwrite",void 0,void 0,i.id+":26");r("promiseDone")(e)}},s=[a,t],n[0]=t,n[1]=a,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("Int64Hooks").useMemoInt64(l,s)}l.default=s}),98);
__d("useMWLSLoadThreadFolderIfNotPresent",["CancellablePromise","CancellationToken","I64","Int64Hooks","ReQL","promiseDone","react-compiler-runtime","useMWLSJewelLoadMoreThreads","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(8),a=(s||(s=r("useReStore")))(),i=r("useMWLSJewelLoadMoreThreads")(t),l;n[0]!==a.tables.threads_ranges_v2__generated||n[1]!==i||n[2]!==t?(l=function(){var n=r("CancellationToken")();return r("promiseDone")(o("CancellablePromise").ignoreFailed(void 0,o("CancellablePromise").then_(n,function(e){e==null&&i()},o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads_ranges_v2__generated).filter(function(n){return(e||(e=o("I64"))).equal(n.parentThreadKey,t)}))))),n.cancel},n[0]=a.tables.threads_ranges_v2__generated,n[1]=i,n[2]=t,n[3]=l):l=n[3];var u;n[4]!==a||n[5]!==i||n[6]!==t?(u=[i,a,t],n[4]=a,n[5]=i,n[6]=t,n[7]=u):u=n[7],o("Int64Hooks").useEffectInt64(l,u)}l.default=u}),98);
__d("MWLSJewelMessageRequestsThreadContainer.react",["I64","LSIntEnum","MWJewelMessageRequestsThread.react","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","useMWLSLoadThreadFolderIfNotPresent","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(-1)).filter(p)},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var u=o("ReQLSuspense").useArray(a,l,i.id+":27");return u.length}function p(e){return(u||(u=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function _(e){var t=o("react-compiler-runtime").c(4),n=e.onOpenMessageRequests,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(s||(s=o("LSIntEnum"))).ofNumber(-1),t[0]=a):a=t[0],r("useMWLSLoadThreadFolderIfNotPresent")(a);var i=m();if(n==null||i===0||r("gkx")("17132"))return null;var l;return t[1]!==n||t[2]!==i?(l=d.jsx(r("MWJewelMessageRequestsThread.react"),{onOpenMessageRequests:n,unreadRequestsCount:i}),t[1]=n,t[2]=i,t[3]=l):l=t[3],l}l.default=_}),98);
__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.neq(e[10],void 0)?r[0]=e[10]:r[0]=t.i64.cast([0,0]),e[11]!==void 0?r[1]=e[11]:r[1]="",(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)||e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))&&!(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)&&e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))?t.sequence([function(o){return r[3]=e[4]==null?t.i64.cast([-2147483648,0]):e[4],r[4]=e[7]==null?t.i64.cast([0,1]):e[7],r[10]=t.i64.gt(r[4],t.i64.cast([0,1]))&&t.i64.gt(r[3],t.i64.cast([-2147483648,0])),t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,1])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return r[5]=new t.Map,r[5].set("cursor",r[2]),r[5].set("filter",e[1]),r[5].set("is_after",e[3]),r[5].set("parent_thread_key",e[0]),r[5].set("reference_activity_timestamp",e[3]?e[6]:e[7]),r[5].set("reference_thread_key",e[3]?e[5]:e[4]),r[5].set("secondary_filter",r[0]),r[5].set("filter_value",r[1]),r[5].set("sync_group",t.i64.cast([0,1])),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[6]=t.i64.add(r[11],t.i64.cast([0,0]))):r[6]=t.i64.cast([0,0]),r[7]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),"trq",t.i64.cast([0,313]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[8]=t[0],t})},function(n){return t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}).next().then(function(n,o){var a=n.done,i=n.value;return a?t.db.table(247).add({folderName:"",parentThreadKey:e[0],minThreadKey:r[3]==null?t.i64.cast([-2147483648,0]):r[3],minLastActivityTimestampMs:r[4]==null?t.i64.cast([0,1]):r[4],threadRangeFilter:e[1],secondaryThreadRangeFilter:r[0],threadRangeFilterValue:r[1],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1,syncGroup:t.i64.cast([0,1])}):(o=i.item,t.forEach(t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}),function(e){var t=e.update,n=e.item;return t({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1})}))})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFilteredThreadsRangesQueryStoredProcedure",e.__tables__=["filtered_threads_ranges_v3__generated"],a.exports=e}),null);
__d("LSFilteredThreadsRangesQueryStoredProcedure",["LSFilteredThreadsRangesQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFilteredThreadsRangesQuery"),a.parentThreadKey,a.filter,a.isLoadingBefore,a.isLoadingAfter,a.minThreadKey,a.maxThreadKey,a.maxLastActivityTimestampMs,a.minLastActivityTimestampMs,a.numThreads,a.numMessages,a.secondaryFilter,a.filterValue);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWPBaseThreadListUtils",["I64","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){c===void 0&&(c=!1);var d=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE));r("promiseDone")((async function(){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(1)));m!=null&&(e||(e=o("I64"))).equal(m.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))&&await t.runInTransaction(function(t){return u==null||u(),d?r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{additionalPagesToFetch:(e||(e=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:e.max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,shouldSkipE2eeThreadsRanges:c}):r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{filter:a,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:(e||(e=o("I64"))).max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,secondaryFilter:l})},"readwrite","ui",void 0,i.id+":56")})())}l.loadMoreThreadsForEmptyRangeDefault=u}),98);
__d("ReQLScrollAnchored.react",["BaseScrollableAreaContext","BaseThemeProvider.react","CometPlaceholder.react","CometSSRSuspendOnServer.react","MWXScrollableAreaStyles","intersectionObserverEntryIsIntersecting","react","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useImperativeHandle,f=c.useLayoutEffect,g=c.useMemo,h=c.useRef,y=c.useState,C=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.render=function(){return t.props.children},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n,r){var e=t.children;this.props.componentDidUpdate(e,r)},n.getSnapshotBeforeUpdate=function(t){var e=t.children;return this.props.getSnapshotBeforeUpdate(e)},t})(u.PureComponent),b={hideScrollbar:{MsOverflowStyle:"x1pq812k",scrollbarWidth:"x1rohswg","::-webkit-scrollbar_height":"x1yqm8si","::-webkit-scrollbar_width":"xjx87ck",$$css:!0},overscrollBehaviorContain:{overscrollBehavior:"xish69e",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},v=typeof ResizeObserver!="undefined";function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e,t){return e-t.scrollTop>t.clientHeight*2}var L=5;function E(t){var n=t.ref,o=t.hasReachedBottom,a=o===void 0?!0:o,i=t.hasReachedTop,l=i===void 0?!0:i,s=t.setScrollTopInResetForBottomAnchor,c=s===void 0?!0:s,E=t.initialAnchor,k=t.initialRenderComplete,I=t.onReachingBottom,T=t.onReachingTop,D=t.onScroll,x=t.onUserScroll,$=t.renderEmptyContent,P=t.renderFooter,N=t.renderHeader,M=t.renderHeaderContentSpacer,w=t.renderLoadingAnimation,A=t.isSufficientContentLoadedAbove,F=A===void 0?S:A,O=t.isSufficientContentLoadedBelow,B=O===void 0?R:O,W=t.headerStyle,q=t.hideScrollbar,U=t.snapThreshold,V=U===void 0?5:U,H=t.xstyle,G=t.shouldOverscrollBehaviourContain,z=t.elements,j=m(r("BaseScrollableAreaContext")),K=h(),Q=g(function(){return[].concat(j,[{getDOMNode:function(){return K==null?void 0:K.current}}])},[j]),X=h(),Y=h(),J=y(E),Z=J[0],ee=J[1],te=h(E),ne=h(null),re=d(function(){var e=K.current,t=Y.current;if(!(e==null||t==null||e.offsetParent===null||t.offsetParent===null)){var n=B(t.clientHeight,e);if(ne.current=e.scrollTop,!n&&!a&&I!=null){I();return}var r=F(e);ne.current=e.scrollTop,!r&&!l&&T!=null&&T()}},[a,l,F,B,I,T]);p(re,[re,z.length]);var oe=d(function(e){if(e.scrollHeight!==e.clientHeight){var t=e.scrollHeight-e.clientHeight-e.scrollTop<V&&a?"bottom":"top";ee(te.current=t),ne.current=e.scrollTop}},[a,V]),ae=d(function(){var e=K.current,t=ne.current;t==null||e==null||e.scrollTop!==t&&(e.scrollTop=t,D&&D(e))},[D]),ie=d(function(){var e=K.current,t=Y.current;e==null||t==null||(E==="bottom"?(c&&(e.scrollTop=e.scrollHeight),D&&D(e)):l||(e.scrollTop=t.offsetTop,D&&D(e)),a&&e.scrollHeight-e.clientHeight-e.scrollTop<V?ee(te.current="bottom"):ee(te.current=E),ne.current=e.scrollTop)},[a,l,E,D,V,c]),le=h(!1);f(function(){le.current||(ie(),le.current=!0)},[ie]);var se=d(function(){var e=K.current;e!=null&&(k&&e.scrollHeight>e.clientHeight&&k(),te.current==="bottom"&&(e.scrollTop=e.scrollHeight,D&&D(e)),ne.current=e.scrollTop)},[k,D]),ue=d(function(){var e=K.current;e!=null&&(D&&D(e),e.scrollTop!==ne.current&&(ne.current=null,re(),oe(e),x&&x()))},[re,D,x,oe]),ce=d(function(){se(),re()},[se,re]),de=d(function(){return se()},[se]),me=r("useResizeObserver")(de),pe=r("useResizeObserver")(ce),_e=d(function(e){me(e),Y.current=e},[me]),fe=d(function(e){pe(e),K.current=e},[pe]),ge=d(function(e,t){if(t!=null){var n=t.element,r=t.height,o=t.scrollAreaElement,a=n.clientHeight;ne.current=o.scrollTop,a!==r&&!(a<=r&&te.current==="bottom")&&(o.scrollTop+=a-r,ne.current=o.scrollTop,D&&D(o))}},[D]),he=d(function(){if(K.current!=null){var e=K.current;e.scrollTop=e.scrollHeight,ne.current=e.scrollTop,D&&D(e)}ee(te.current=a?"bottom":"top")},[a,D]);function ye(){if(K.current!=null){var e=K.current,t=e.scrollHeight-e.scrollTop-e.clientHeight<L;return ne.current=e.scrollTop,t}else return!1}var Ce=h(null),be=d(function(e,t){var n=Ce.current,o=K.current;if(n!=null&&o!=null){var a=new IntersectionObserver(function(e){var n=e[0];(n.boundingClientRect.height!==0||n.boundingClientRect.width!==0)&&t(r("intersectionObserverEntryIsIntersecting")(n))},{root:o,rootMargin:e+"px"});return a.observe(n),function(){return a.disconnect()}}},[]),ve=d(function(){var e=K.current;if(e!=null){var t=e.scrollHeight-e.clientHeight>0;return ne.current=e.scrollTop,t}return!1},[]);function Se(){var e=K.current;if(e==null)return null;var t={clientHeight:e.clientHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop};return ne.current=e.scrollTop,t}_(n,function(){return{doesContentFillScroll:ve,getScrollAreaElement:function(){return K.current},getScrollerMeasurements:Se,isAtBottom:ye,onCloseToBottom:be,resetScrollPosition:ie,restoreScrollPosition:ae,scrollToBottom:he}},[ve,be,ie,ae,he]);var Re=g(function(){return u.jsx(C,{componentDidUpdate:ge,getSnapshotBeforeUpdate:function(t){var e=Y.current,n=K.current;if(e!=null&&n!=null&&!(l&&n.scrollTop===0)&&(!t.length||z.length&&t[0].key!==z[0].key&&t.length!==z.length)){var r=e.clientHeight;return ne.current=n.scrollTop,{element:e,height:r,scrollAreaElement:n}}return null},children:z})},[z,ge,l]);return u.jsx(r("BaseScrollableAreaContext").Provider,{value:Q,children:u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(H),{children:u.jsx("div",babelHelpers.extends({},{0:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6 x1xzczws"}}[(Z==="bottom")<<0],{children:u.jsx(r("BaseThemeProvider.react"),{children:function(n,o){return u.jsxs("div",{className:(e||(e=r("stylex")))(b.scrollArea,G===!0&&b.overscrollBehaviorContain,q===!0&&b.hideScrollbar,r("MWXScrollableAreaStyles").themed,n),"data-testid":void 0,onScroll:ue,ref:fe,style:o,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.ScrollArea",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=ce)}})})}),u.jsxs(C,{componentDidUpdate:ge,getSnapshotBeforeUpdate:function(){var e=X.current,t=K.current;if(e!=null&&t!=null&&(ne.current=t.scrollTop,ne.current!==0)){var n=e.clientHeight;return{element:e,height:n,scrollAreaElement:t}}return null},children:[u.jsx("div",babelHelpers.extends({},e.props(W),{ref:X,children:l?N&&N():w&&w("onTop",z.length)})),$!=null?$():null]}),M!=null&&M(),u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x1us19tq"}}[(z.length!==0&&!l&&!a)<<0],{children:u.jsxs("div",{className:"x1n2onr6",ref:_e,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.elementsHOC",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=se)}})})}),Re,u.jsx("div",{className:"x1ey2m1c xjm9jq1 x1y332i5 x47corl x10l6tqk",ref:Ce}),a?P&&P():w&&w("onBottom",z.length)]})}))]})}})}))}))})}E.displayName=E.name+" [from "+i.id+"]",l.default=E}),98);
__d("useStableValue",["I64","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useRef;function c(e){return d(e,(s||(s=o("I64"))).equal)}function d(e,t){var n=u(e);return t(n.current,e)||(n.current=e),n.current}l.useStableI64=c,l.useStableValue=d}),98);
__d("useStableBounds",["deepEquals","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("useStableValue").useStableValue(e,r("deepEquals"))}l.default=e}),98);
__d("ReQLPaginatedList.react",["FBLogger","I64","PromiseOrValue","ReQL","ReQLScrollAnchored.react","ReQLSuspense","SortedAsyncIterable","deepEquals","getErrorSafe","promiseDone","react","useMergeRefs","useStableBounds","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useLayoutEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=d.useTransition;function C(e,t){return t==null?e:e.bounds(t)}function b(e){if(e instanceof Promise)throw e;return e}function v(e){return{direction:e.direction,iterator:function(n,r){var t=e.iterator(n,r);return{next:function(n){return(s||(s=o("PromiseOrValue"))).map(t.next(n),function(e){return e.done?e:{done:!1,value:[e.value[0],e.value]}})}}},keyLength:e.keyLength,subscribe:function(n,r){return e.subscribe(async function(e,t,r){t.operation==="delete"?await n(e,t,r):t.operation==="add"?await n(e,{operation:"add",value:[e,t.value]},r):t.operation==="put"&&await n(e,{operation:"put",value:[e,t.value]},r)},r)}}}function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e){var t=e.bounds,n=e.direction,a=n===void 0?"asc":n,l=e.hasReachedBottom,s=l===void 0?!0:l,u=e.hasReachedTop,d=u===void 0?!0:u,R=e.imperativeRef,E=e.initialAnchor,k=e.initialRenderComplete,I=e.onDataLoaded,T=e.onPageLoaded,D=e.onReachingBottom,x=e.onReachingTop,$=e.onScroll,P=e.onUserScroll,N=e.pageSize,M=N===void 0?15:N,w=e.renderEmptyContent,A=e.renderFooter,F=e.renderHeader,O=e.renderHeaderContentSpacer,B=e.renderItem,W=e.renderLoadingAnimation,q=e.headerStyle,U=e.isSufficientContentLoadedAbove,V=U===void 0?S:U,H=e.isSufficientContentLoadedBelow,G=e.snapThreshold,z=G===void 0?5:G,j=e.setScrollTopInResetForBottomAnchor,K=j===void 0?!0:j,Q=e.data,X=Q.ascending,Y=Q.descending,J=e.xstyle,Z=e.isLogDuplicatedItemEnabled,ee=Z===void 0?!1:Z,te=e.shouldOverscrollBehaviourContain,ne=y(),re=ne[0],oe=ne[1],ae=r("useStableBounds")(t);if(E!=null&&E!=="top"&&E!=="bottom"){var ie=C(Y,ae).bounds({lt:E}).iterator(new WeakMap).next();if(ie instanceof Promise)throw ie;E=ie.done?"top":ie.value[0]}var le=o("useStableValue").useStableValue(E,r("deepEquals")),se=f(function(){var e,t;return le==="top"||le==null?(e=o("ReQL").empty(),t=a==="asc"?X:Y):le==="bottom"?(e=a==="asc"?Y:X,t=o("ReQL").empty()):(e=a==="asc"?Y.bounds({lt:le}):X.bounds({gt:le}),t=a==="asc"?X.bounds({gte:le}):Y.bounds({lte:le})),{after:t,before:e}},[le,X,Y,a]),ue=g(!1),ce=f(function(){var e,t,n,r=b(o("SortedAsyncIterable").toArray(C(se.before,ae).take(le==="bottom"?M:0),i.id+":204")).reverse(),a=b(o("SortedAsyncIterable").toArray(C(se.after,ae).take(M),i.id+":211")),l=le==="bottom"?!0:a.length<M,s=le==="top"||le==null?!0:le==="bottom"?r.length<M:!1;return{firstKey:s?void 0:le==="bottom"?(e=r[0])==null?void 0:e[0]:(t=a[0])==null?void 0:t[0],lastKey:l||(n=a[a.length-1])==null?void 0:n[0]}},[le,ae,se.after,se.before,M]),de=h(function(){return{anchor:le,iterables:se,values:ce}}),me=de[0],pe=de[1],_e=me.iterables===se&&me.anchor===le,fe=_e?me.values:ce,ge=fe.firstKey,he=fe.lastKey,ye=o("ReQLSuspense").useArray(function(){return v(ge==null?C(se.before,ae).take(M):C(se.before,ae).bounds(a==="asc"?{gte:ge}:{lte:ge}))},[ae,a,ge,se.before,M],i.id+":246"),Ce=f(function(){return[].concat(ye).reverse()},[ye]);p(function(){Ce.length===M&&ge==null&&oe(function(){return pe({anchor:le,iterables:se,values:{firstKey:Ce[0][0],lastKey:he}})})},[Ce,ge,le,se,he,M]);var be=o("ReQLSuspense").useArray(function(){return v(he==null?C(se.after,ae).take(M):C(se.after,ae).bounds(a==="asc"?{lte:he}:{gte:he}))},[ae,a,se.after,he,M],i.id+":273");p(function(){be.length===M&&he==null&&oe(function(){return pe({anchor:le,iterables:se,values:{firstKey:ge,lastKey:be[be.length-1][0]}})})},[be,ge,le,se,he,M]);var ve=f(function(){return[].concat(Ce,be)},[Ce,be]);p(function(){I==null||I(ve)},[ve,I]);var Se=o("ReQLSuspense").useFirst(function(){return ve.length===0?o("ReQL").empty():C(se.before,ae).bounds(a==="asc"?{lt:ve[0][0]}:{gt:ve[0][0]})},[ve,ae,a,se.before],i.id+":305")==null,Re=o("ReQLSuspense").useFirst(function(){return ve.length===0?o("ReQL").empty():C(se.after,ae).bounds(a==="asc"?{gt:ve[ve.length-1][0]}:{lt:ve[ve.length-1][0]})},[ve,ae,a,se.after],i.id+":315")==null,Le=y(),Ee=Le[0],ke=Le[1],Ie=m(function(){if(!(ue.current||Ee))if(Re){if(!s&&D!=null)return D()}else{ue.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(a==="asc"?X:Y,ae).bounds(a==="asc"?{gt:ve[ve.length-1][0]}:{lt:ve[ve.length-1][0]}).take(M),i.id+":342")),function(e){ue.current=!1,T!=null&&T("bottom",ve[ve.length-1][1],e.map(function(e){return e[1]})),ke(function(){var t,n;return pe({anchor:le,iterables:se,values:{firstKey:ge,lastKey:(t=(n=e[e.length-1])==null?void 0:n[0])!=null?t:ve[ve.length-1][0]}})})});return}},[Ee,Re,s,D,a,X,Y,ae,ve,M,T,ge,se,le]),Te=y(),De=Te[0],xe=Te[1],$e=g(!0),Pe=m(function(){if(!(ue.current||De)){if(Se)return d||x==null?void 0:x();ue.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(a==="asc"?Y:X,ae).bounds(a==="asc"?{lt:ve[0][0]}:{gt:ve[0][0]}).take(M),i.id+":414")),function(e){ue.current=!1,T!=null&&($e.current?($e.current=!1,T("top",null,ve.slice(0,M).map(function(e){return e[1]}).reverse())):T("top",ve[0][1],e.map(function(e){return e[1]}))),e.reverse(),xe(function(){var t,n;return pe({anchor:le,iterables:se,values:{firstKey:(t=(n=e[0])==null?void 0:n[0])!=null?t:ve[0][0],lastKey:he}})})})}},[De,Se,d,x,a,Y,X,ae,ve,M,T,he,se,le]),Ne=Se&&d?0:1,Me=ve.length-(Re&&s?0:1),we=f(function(){for(var e=new Array(Me>Ne?Me-Ne:0),t=Ne;t<Me;t++){var n,r;e[t-Ne]=B(ve[t][1],{nextItem:(n=ve[t+1])==null?void 0:n[1],previousItem:(r=ve[t-1])==null?void 0:r[1]},Me-Ne-t)}return e},[ve,Ne,B,Me]),Ae=g(null),Fe=r("useMergeRefs")(Ae,R);_(function(){var e;(e=Ae.current)==null||e.resetScrollPosition()},[le]);var Oe=m(function(){return A==null?void 0:A(ve.length>0?ve[ve.length-1][1]:void 0)},[ve,A]);return L(ee,ve),c.jsx(r("ReQLScrollAnchored.react"),{elements:we,hasReachedBottom:Re&&s,hasReachedTop:Se&&d,headerStyle:q,initialAnchor:le==="bottom"?"bottom":"top",initialRenderComplete:k,isSufficientContentLoadedAbove:V,isSufficientContentLoadedBelow:H,onReachingBottom:Ie,onReachingTop:Pe,onScroll:$,onUserScroll:P,pageSize:M,ref:Fe,renderEmptyContent:w,renderFooter:Oe,renderHeader:F,renderHeaderContentSpacer:O,renderLoadingAnimation:W,setScrollTopInResetForBottomAnchor:K,shouldOverscrollBehaviourContain:te,snapThreshold:z,xstyle:J})}R.displayName=R.name+" [from "+i.id+"]";function L(e,t){var n=h(!1),a=n[0],i=n[1];p(function(){try{if(e&&!a){var n=new Set,l=[];for(var s of t){var c=s[1];if(typeof c=="object"&&(c==null?void 0:c.threadKey)!=null&&(u||(u=o("I64"))).isI64(c==null?void 0:c.threadKey)){var d=(u||(u=o("I64"))).to_string(c==null?void 0:c.threadKey);n.has(d)&&l.push(d),n.add(d)}}n.size!==t.length&&(i(!0),r("FBLogger")("messenger_web").warn("Duplicated thread item detected in ReQLPaginatedList %s",l.join(",")))}}catch(e){var m=r("getErrorSafe")(e);r("FBLogger")("messenger_web").warn("Duplicated thread item error",m.message)}},[t,a,e])}l.default=R}),98);
__d("useMWCMMarkBumpedThreadsSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWCMMarkBumpedThreadsSeen").__setRef("useMWCMMarkBumpedThreadsSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return function(e){return n.MWCMMarkBumpedThreadsSeen(t,e)}}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMarkSeenWhenVisible",["CometDebounce","Int64Hooks","ReQL","UserActivity","promiseDone","react","useMWCMMarkBumpedThreadsSeen","useMWPMarkSeen","useMWPWatchFolderFocusChanges","useReStore","useSimpleImpression","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef;function m(t){var n=(e||(e=r("useReStore")))(),a=d(!1),l=r("useMWCMMarkBumpedThreadsSeen")(t),s=r("useVisibilityObserver")({onHidden:function(){a.current=!1},onVisible:function(){a.current=!0}}),u=r("useMWPMarkSeen")(t),m=r("CometDebounce")(c(function(){r("promiseDone")((async function(){var e=await Promise.all([u.load(),l.load()]),t=e[0],r=e[1];await n.runInTransaction(async function(e){await t(e),await r(e)},"readwrite",void 0,void 0,i.id+":56")})())},[u,l,n]),{leading:!0,wait:500});return r("useMWPWatchFolderFocusChanges")(m,a),r("useSimpleImpression")(m),o("Int64Hooks").useEffectInt64(function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),[]).getKeyRange(t).take(1).subscribe(function(){r("UserActivity").isOnTab()&&a.current===!0&&m()})},[n,t,m]),s}l.default=m}),98);
__d("MWPBaseThreadList.react",["Box.react","FBLogger","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","MAWMaybeWithTimeout","MWPBaseThreadListHooks","MWPBaseThreadListUtils","MWThreadListFocusableTable.react","ReQL","ReQLPaginatedList.react","ReQLSuspense","react","react-compiler-runtime","useMarkSeenWhenVisible","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useEffect,f={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},g=1e4;function h(e,t,n,a){a===void 0&&(a=!1),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var i,l=await(i=e.threads_ranges_v2__generated).get.apply(i,t);if(!(l==null||l.isLoadingBefore))return n&&n(),r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{additionalPagesToFetch:(u||(u=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:l.maxLastActivityTimestampMs,maxThreadKey:l.maxThreadKey,minLastActivityTimestampMs:l.minLastActivityTimestampMs,minThreadKey:l.minThreadKey,parentThreadKey:l.parentThreadKey,shouldSkipE2eeThreadsRanges:a})},"readwrite","ui",void 0,i.id+":91"),g,function(){r("FBLogger")("messenger_web").warn("Paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2]))})}function y(e,t,n,a,l){a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var o,i=await(o=e.filtered_threads_ranges_v3__generated).get.apply(o,t);if(!(i==null||i.isLoadingBefore))return l&&l(),r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{filter:n,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:i.maxLastActivityTimestampMs,maxThreadKey:i.maxThreadKey,minLastActivityTimestampMs:i.minLastActivityTimestampMs,minThreadKey:i.minThreadKey,parentThreadKey:i.parentThreadKey,secondaryFilter:a})},"readwrite","ui",void 0,i.id+":150"),g,function(){r("FBLogger")("messenger_web").warn("Filtered paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2])+`
        thread_range_filter: `+u.to_string(t[3])+`
        secondary_thread_range_filter: `+u.to_string(t[5]))})}function C(e,t,n,a,i,l){if(a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l===void 0&&(l=!1),t!=null)if(t.threadRangeFilter){var u=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs,t.threadRangeFilter,t.folderName,t.secondaryThreadRangeFilter,t.threadRangeFilterValue];y(e,u,n,a,i)}else{var s=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs];h(e,s,i,l)}}function b(e,t,n,a){var l=o("react-compiler-runtime").c(14),s;l[0]!==n?(s=(u||(u=o("I64"))).equal(n,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l[0]=n,l[1]=s):s=l[1];var d=s,m,p;l[2]!==e||l[3]!==d||l[4]!==t?(m=function(){return d?o("ReQL").fromTableDescending(e.tables.threads_ranges_v2__generated).getKeyRange(t):o("ReQL").empty()},p=[e,t,d],l[2]=e,l[3]=d,l[4]=t,l[5]=m,l[6]=p):(m=l[5],p=l[6]);var _=o("ReQLSuspense").useFirst(m,p,i.id+":250"),f,g;l[7]!==e||l[8]!==n||l[9]!==d||l[10]!==t||l[11]!==a?(f=function(){return d?o("ReQL").empty():o("ReQL").fromTableDescending(e.tables.filtered_threads_ranges_v3__generated).getKeyRange(t).filter(function(e){return(u||(u=o("I64"))).equal(e.threadRangeFilter,n)&&(a==null||(u||(u=o("I64"))).equal(e.secondaryThreadRangeFilter,a))})},g=[e,n,t,a,d],l[7]=e,l[8]=n,l[9]=d,l[10]=t,l[11]=a,l[12]=f,l[13]=g):(f=l[12],g=l[13]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":257");return d?_:h}function v(t){var n=o("react-compiler-runtime").c(71),a=t.afterContent,l=t.beforeContent,s=t.containerStyle,m=t.customThreadFilter,p=t.emptyContent,g=t.filter,h=t.gridLabel,y=t.imperativeRef,v=t.isSufficientContentLoadedBelow,S=t.loadMoreThreads,R=t.loadMoreThreadsForEmptyRange,L=t.onDataLoaded,E=t.onLoadMoreThreads,k=t.onReachingTop,I=t.onScroll,T=t.onThreadsLoaded,D=t.pageSize,x=t.parentThreadKey,$=t.renderItem,P=t.renderLoadingAnimation,N=t.role,M=t.secondaryFilter,w=t.setIsEmptyInbox,A=t.shouldSkipE2eeThreadsRanges,F;n[0]!==g?(F=g===void 0?(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE):g,n[0]=g,n[1]=F):F=n[1];var O=F,B=S===void 0?C:S,W=R===void 0?o("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault:R,q=N===void 0?"grid":N,U=A===void 0?!1:A,V=(e||(e=r("useReStore")))(),H=b(V,x,O,M);H!=null&&!H.isLoadingBefore&&T&&T();var G=o("MWPBaseThreadListHooks").useMWPBaseThreadListBounds(H),z;n[2]!==m||n[3]!==V||n[4]!==x?(z={customThreadFilter:m,db:V,parentThreadKey:x},n[2]=m,n[3]=V,n[4]=x,n[5]=z):z=n[5];var j=o("MWPBaseThreadListHooks").useMWPBaseThreadListFilteredData(z),K;n[6]!==G||n[7]!==j.descending?(K=function(){return j.descending.bounds(G)},n[6]=G,n[7]=j.descending,n[8]=K):K=n[8];var Q;n[9]!==G||n[10]!==j?(Q=[G,j],n[9]=G,n[10]=j,n[11]=Q):Q=n[11];var X=o("ReQLSuspense").useFirst(K,Q,i.id+":345")==null,Y,J;n[12]!==X||n[13]!==w?(Y=function(){w&&w(X)},J=[X,w],n[12]=X,n[13]=w,n[14]=Y,n[15]=J):(Y=n[14],J=n[15]),_(Y,J);var Z,ee;n[16]!==V||n[17]!==H||n[18]!==O||n[19]!==W||n[20]!==E||n[21]!==x||n[22]!==M?(Z=function(){H==null&&W(V,x,O,M,E)},ee=[x,H,V,O,M,E,W],n[16]=V,n[17]=H,n[18]=O,n[19]=W,n[20]=E,n[21]=x,n[22]=M,n[23]=Z,n[24]=ee):(Z=n[23],ee=n[24]),o("Int64Hooks").useEffectInt64(Z,ee);var te=r("useMarkSeenWhenVisible")(x),ne;n[25]!==V||n[26]!==H||n[27]!==O||n[28]!==B||n[29]!==E||n[30]!==M||n[31]!==U?(ne=function(){B(V,H,O,M,E,U)},n[25]=V,n[26]=H,n[27]=O,n[28]=B,n[29]=E,n[30]=M,n[31]=U,n[32]=ne):ne=n[32];var re=ne,oe;n[33]!==$?(oe=function(t){return d.jsx(d.Fragment,{children:$(t)},(u||(u=o("I64"))).to_string(t.threadKey))},n[33]=$,n[34]=oe):oe=n[34];var ae=oe,ie;if(H==null){var le;n[35]!==P?(le=P!=null?P("nullState",0):null,n[35]=P,n[36]=le):le=n[36],ie=le}else{var se=!H.hasMoreBefore,ue=!H.hasMoreAfter,ce;n[37]!==H.isLoadingAfter||n[38]!==H.isLoadingBefore||n[39]!==p||n[40]!==X?(ce=function(){return X&&!H.isLoadingAfter&&!H.isLoadingBefore?d.jsx(r("Box.react"),{xstyle:f.emptyContentContainer,children:p}):null},n[37]=H.isLoadingAfter,n[38]=H.isLoadingBefore,n[39]=p,n[40]=X,n[41]=ce):ce=n[41];var de;n[42]!==a?(de=function(){return a},n[42]=a,n[43]=de):de=n[43];var me;n[44]!==l?(me=function(){return l},n[44]=l,n[45]=me):me=n[45];var pe;n[46]!==G||n[47]!==j||n[48]!==y||n[49]!==v||n[50]!==L||n[51]!==re||n[52]!==k||n[53]!==I||n[54]!==D||n[55]!==ae||n[56]!==P||n[57]!==se||n[58]!==ue||n[59]!==ce||n[60]!==de||n[61]!==me?(pe=d.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:d.jsx(r("ReQLPaginatedList.react"),{bounds:G,data:j,direction:"desc",hasReachedBottom:se,hasReachedTop:ue,imperativeRef:y,isLogDuplicatedItemEnabled:!0,isSufficientContentLoadedBelow:v,onDataLoaded:L,onReachingBottom:re,onReachingTop:k,onScroll:I,pageSize:D,renderEmptyContent:ce,renderFooter:de,renderHeader:me,renderItem:ae,renderLoadingAnimation:P,shouldOverscrollBehaviourContain:!0,xstyle:f.list})}),n[46]=G,n[47]=j,n[48]=y,n[49]=v,n[50]=L,n[51]=re,n[52]=k,n[53]=I,n[54]=D,n[55]=ae,n[56]=P,n[57]=se,n[58]=ue,n[59]=ce,n[60]=de,n[61]=me,n[62]=pe):pe=n[62],ie=pe}var _e;n[63]!==s?(_e=[f.container,s],n[63]=s,n[64]=_e):_e=n[64];var fe;return n[65]!==ie||n[66]!==h||n[67]!==q||n[68]!==_e||n[69]!==te?(fe=d.jsx(r("Box.react"),{"aria-label":h,"data-testid":void 0,ref:te,role:q,xstyle:_e,children:ie}),n[65]=ie,n[66]=h,n[67]=q,n[68]=_e,n[69]=te,n[70]=fe):fe=n[70],fe}l.default=v}),98);
__d("MWPParentThreadKeyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MWThreadListFolderItem.react",["BaseView.react","CometTextWithEntities.react","I64","MAWVault","MWAddOnCircleContainer.react","MWCMThreadTypes.react","MWChatTextTransform","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListLastMessage.react","MWXListCellPressable.react","MWXTextPairing.react","react","react-compiler-runtime","useMatchMedia"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo;function p(e){var t=o("react-compiler-runtime").c(28),n=e.icon,a=e.onClick,i=e.responsive,l=e.selected,c=e.size,d=e.thread,m=e.threadName,p=r("useMatchMedia")("(min-width: 900px)")||!i,_,f;t[0]!==d.snippet?(f=d.snippet!=null?o("MAWVault").unvault(d.snippet):null,t[0]=d.snippet,t[1]=f):f=t[1],_=f;var g=_,h;t[2]!==d.lastActivityTimestampMs?(h=(s||(s=o("I64"))).to_float(d.lastActivityTimestampMs),t[2]=d.lastActivityTimestampMs,t[3]=h):h=t[3];var y=h,C=o("MWPIsThreadUnread").useIsThreadUnread(d.threadKey),b,v;t[4]!==n||t[5]!==c?(v=u.jsx(r("MWAddOnCircleContainer.react"),{size:c,children:n}),t[4]=n,t[5]=c,t[6]=v):v=t[6],b=v;var S=b,R;R=m!=null?m:d.threadName;var L=R,E;t[7]!==a?(E=function(){return a()},t[7]=a,t[8]=E):E=t[8];var k=E,I;t[9]===Symbol.for("react.memo_cache_sentinel")?(I={className:"xmzvs34 xf159sx"},t[9]=I):I=t[9];var T;t[10]!==p||t[11]!==C||t[12]!==y||t[13]!==g||t[14]!==d.threadType?(T=p?u.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:!1,isUnread:C,lastMessageCtaType:null,lastMessageTimestamp:y,showTimestamp:!o("MWCMThreadTypes.react").isUnjoinedCMThread(d.threadType),snippet:g}):null,t[10]=p,t[11]=C,t[12]=y,t[13]=g,t[14]=d.threadType,t[15]=T):T=t[15];var D;t[16]!==L||t[17]!==p?(D=p?u.jsx(r("CometTextWithEntities.react"),{text:L.toString(),transforms:o("MWChatTextTransform").textTransforms}):null,t[16]=L,t[17]=p,t[18]=D):D=t[18];var x=!C,$;t[19]!==D||t[20]!==x||t[21]!==T?($=u.jsx(r("MWXTextPairing.react"),{body:T,bodyLineLimit:1,headline:D,headlineLineLimit:1,level:4,reduceEmphasis:x}),t[19]=D,t[20]=x,t[21]=T,t[22]=$):$=t[22];var P;return t[23]!==S||t[24]!==k||t[25]!==l||t[26]!==$?(P=u.jsx(r("BaseView.react"),{testid:void 0,children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:u.jsx("div",{role:"row",children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:u.jsx("div",babelHelpers.extends({},I,{role:"gridcell",children:u.jsx(r("MWXListCellPressable.react"),{addOnStart:S,content:$,onPress:k,selected:l,size:"large"})}))})})})}),t[23]=S,t[24]=k,t[25]=l,t[26]=$,t[27]=P):P=t[27],P}l.default=p}),98);
__d("MWThreadListJobsItem.react",["fbt","ix","LSIntEnum","MWThreadListFolderItem.react","MWXIcon_DEPRECATED.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(11),n=e.onClick,a=e.responsive,i=e.selected,l=e.size,m=e.thread,p;t[0]!==n?(p=function(){return n((c||(c=o("LSIntEnum"))).ofNumber(-13))},t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIcon_DEPRECATED.react"),{color:"primary",icon:o("fbicon")._(u("512668"),32),size:48}),t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=(c||(c=o("LSIntEnum"))).ofNumber(-13),t[3]=g):g=t[3];var h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Jobs").toString(),t[4]=h):h=t[4];var y;return t[5]!==_||t[6]!==a||t[7]!==i||t[8]!==l||t[9]!==m?(y=d.jsx(r("MWThreadListFolderItem.react"),{icon:f,onClick:_,responsive:a,selected:i,size:l,systemFolder:g,thread:m,threadName:h}),t[5]=_,t[6]=a,t[7]=i,t[8]=l,t[9]=m,t[10]=y):y=t[10],y}l.default=m}),226);
__d("MAWThreadAPI",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.tables.threads.subscribe(function(e,n){n.operation==="delete"&&t(n.prevValue)})}i.subscribeToThreadsDeletion=e}),66);
__d("useClearDraftOnThreadDelete",["MAWMiActMappingTableAPI","MAWThreadAPI","MAWUIPersistedDataServices","Promise","gkx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(t,r){return o("MAWMiActMappingTableAPI").getChatJidForThreadKey(t.tables,r.threadKey,r.threadType).then(function(t){return t!=null?o("MAWUIPersistedDataServices").getMAWUIPersistedDataServices().sendUpdateFor("messageComposerDrafts",[{key:t,timestamp:0,value:{draftText:""}}]):(e||(e=n("Promise"))).resolve()})}function d(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){r("gkx")("16991")&&o("MAWThreadAPI").subscribeToThreadsDeletion(e,function(t){return r("promiseDone")(c(e,t))})},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),u(n,a)}l.default=d}),98);
__d("MWThreadList.react",["CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","CometPageletWithDiv.react","CometRouterFocusRegion.react","CometTransientDialogProvider.react","CometVisualCompletion","CurrentEnvironment","FBLogger","FocusRegion.react","FocusRegionType","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSThreadBitOffset","MWCMGetValidId","MWCreatorMessagingUtils","MWJewelPopoverThreadlistContext.react","MWLSJewelMessageRequestsThreadContainer.react","MWPBaseThreadList.react","MWPBumpEntityKey","MWPParentThreadKeyContext","MWPThreadIsPage.react","MWPThreadsForThreadList","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWThreadKey.react","MWThreadListEmptyContainer.react","MWThreadListGlimmer.react","MWThreadListItem.react","MWThreadListJobsItem.react","MWThreadListSupportedThreadTypes","MWXacGating","MessagingFolderTag","MessengerWebUXLogger","QPLUserFlow","ReQL","ReQLSuspense","VirtualizationContainerContext","cr:12043","cr:13568","cr:21161","cr:21162","cr:2261","cr:6055","emptyFunction","focusScopeQueries","gkx","isMWXacGroupThread","mwCMIsThreadBumped","qpl","react","react-compiler-runtime","useClearDraftOnThreadDelete","useCommunityFolder","useEmptyFunction","useGroupsCometIsInCCNegativeTest","useMWGetInboxFocusTargetFromRoute","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=d||(d=o("react")),f=d,g=f.useCallback,h=f.useContext,y=f.useId,C=f.useMemo,b=f.useRef;function v(e){var t=o("react-compiler-runtime").c(1),n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n={computeInboxFollowUps:S,reminders:[]},t[0]=n):n=t[0],n}function S(){}var R=(e=n("cr:12043"))!=null?e:{useInboxFollowUps:v},L=(s=(u=n("cr:21162"))==null?void 0:u.useFilterPinnedThreads)!=null?s:r("useEmptyFunction"),E=n("cr:6055")||r("useEmptyFunction");function k(e){return(m||(m=o("I64"))).equal(e.threadType,(p||(p=o("LSIntEnum"))).ofNumber(15))&&(m||(m=o("I64"))).equal(e.authorityLevel,(p||(p=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&(m||(m=o("I64"))).equal(e.lastReadWatermarkTimestampMs,(m||(m=o("I64"))).of_int32(-1))&&(m||(m=o("I64"))).equal(e.lastActivityTimestampMs,(m||(m=o("I64"))).of_int32(-1))}var I=5;function T(e){var t=e.lsEntryPoint,a=e.lsSubEntryPoint,i=e.messagingEntrypoint,l=e.onClickNestedFolderThread,s=e.onClose,u=e.responsive,c=e.selected,d=e.showFollowUpReminder,f=e.thread,g=h(r("MWJewelPopoverThreadlistContext.react")),y=r("useCommunityFolder")({parentThreadKey:(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(17))?f.threadKey:f.parentThreadKey}),C=h(r("MWResponsiveLayoutContext.react")),v=C.pushCard,S=f.threadKey;o("Int64Hooks").useEffectInt64(function(){if(n("cr:2261")!=null)return g==null||g.add(S),function(){g==null||g.delete(S)}},[g,S]);var R=b({loggingTimeout:null,threadKey:(m||(m=o("I64"))).of_int32(-1)}),L=b(m.of_int32(-1)),E=h(r("MWPParentThreadKeyContext"));o("Int64Hooks").useEffectInt64(function(){if(E!=null){var e=(m||(m=o("I64"))).to_string(f.parentThreadKey),t=m.to_string(E);!(m||(m=o("I64"))).equal(L.current,S)&&f.folderName!==r("MessagingFolderTag").COMMUNITY&&e!==t&&r("FBLogger")("messenger_threadlist_folder_inconsistency").mustfix("Render thread item expected folder %s but receive %s",t,e)}k(f)?(m||(m=o("I64"))).equal(R.current.threadKey,S)||(R.current.threadKey=S,R.current.loggingTimeout=window.setTimeout(function(){r("FBLogger")("messenger_web").mustfix("Thread ID %s showing up as ghost",(m||(m=o("I64"))).to_string(S)),R.current.loggingTimeout=null},5e3)):(m||(m=o("I64"))).equal(R.current.threadKey,S)&&R.current.loggingTimeout!=null&&window.clearTimeout(R.current.loggingTimeout)},[E,f,S]);var I=o("Int64Hooks").useCallbackInt64(function(){o("MWCreatorMessagingUtils").isAPPlusMessageRequest(f)&&r("QPLUserFlow").start(r("qpl")._(421070823,"2981"),{annotations:{string:{entrypoint:o("MWCreatorMessagingUtils").fetchQPLEntrypoint(f)}},instanceKey:(m||(m=o("I64"))).to_int32(f.threadKey)}),r("mwCMIsThreadBumped")({secondaryParentThreadKey:f.secondaryParentThreadKey,threadType:f.threadType})&&o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_bumped:"true"},community_id:y?(m||(m=o("I64"))).to_string(y.folderId):(m||(m=o("I64"))).to_string(f.parentThreadKey),event:"thread_open",group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(y==null?void 0:y.fbGroupId)?(m||(m=o("I64"))).to_string(y.fbGroupId):null,source:"chat_row",surface:t==="jewel"?"jewel_tray":"messenger_inbox",thread_id:(m||(m=o("I64"))).to_string(S)}),c&&v(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL)},[f.secondaryParentThreadKey,f.threadType,f.parentThreadKey,y,t,S,c,v]);return(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(6))?(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-13))?_.jsx(r("MWThreadListJobsItem.react"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:2261")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-12))&&!r("gkx")("17132")?_.jsx(n("cr:2261"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:13568")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-18))?_.jsx(n("cr:13568"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):null:_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:_.jsx(r("MWThreadListGlimmer.react"),{parentComponentForDebug:"MWThreadListItem"}),name:"MWThreadListThreadListRow",children:_.jsx(o("MWPThreadIsPage.react").Provider,{threadKey:f.threadKey,children:_.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:f.threadKey,children:_.jsx(r("CometTransientDialogProvider.react"),{children:_.jsx(r("MWThreadListItem.react"),{lsEntryPoint:t,lsSubEntryPoint:a,messagingEntrypoint:i,onClose:s,onThreadSelected:I,selected:c,showFollowUpReminder:d,size:56,thread:f})})})})})}T.displayName=T.name+" [from "+i.id+"]";var D=_.memo(T);function x(e){var t=e.gridLabel,a=e.filter,l=e.customThreadFilter,s=e.header,u=e.lsEntryPoint,d=e.onOpenMessageRequests,f=e.lsSubEntryPoint,h=e.parentThreadKey,v=e.responsive,S=e.selectedThreadKey,k=e.setHasScrolled,T=e.setIsEmptyInbox,x=e.threadListMessagingEntrypoint,P=e.onClose,N=P===void 0?r("emptyFunction"):P,M=e.onClickNestedFolderThread,w=M===void 0?r("emptyFunction"):M,A=e.preamble,F=(c||(c=r("useReStore")))(),O=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(F.tables.threads_ranges_v2__generated).getKeyRange(h)},[F,h],i.id+":386");r("useClearDraftOnThreadDelete")(F);var B=o("ReQLSuspense").useArray(function(){return o("MWPThreadsForThreadList").createIterable(F,h,O,["lastActivityTimestampMs","threadType"].concat(o("LSThreadBitOffset").threadCapabilityFields)).filter(function(e){return r("MWThreadListSupportedThreadTypes").some(function(t){return(m||(m=o("I64"))).equal(e.threadType,t)})?o("MWXacGating").isGroupsEnabled()?!0:!r("isMWXacGroupThread")(e):!1}).take(5)},[F,h,O],i.id+":401").pop(),W=y(),q=o("ReQLSuspense").useFirst(function(){return S!=null?o("ReQL").fromTableAscending(F.tables.threads,["parentThreadKey"]).getKeyRange(S):o("ReQL").empty()},[F,S],i.id+":427");E(W);var U=o("useGroupsCometIsInCCNegativeTest").useShouldDisableBumpToInboxForNegativeTest(),V=R.useInboxFollowUps(F),H=V.computeInboxFollowUps,G=V.reminders,z=g(function(e){if(e==null)return _.jsx("div",{});if(o("CurrentEnvironment").facebookdotcom&&r("mwCMIsThreadBumped")({secondaryParentThreadKey:e.secondaryParentThreadKey,threadType:e.threadType})&&U)return _.jsx("div",{});var t;return(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-13))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-12))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-18))?t=q!=null&&(m||(m=o("I64"))).equal(e.threadKey,q.parentThreadKey):t=S!=null&&(m||(m=o("I64"))).equal(S,e.threadKey),e!=null?_.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"thread_list",disableHiding:!0,children:_.jsx(D,{lsEntryPoint:u==="inboxThreadList"?B!=null&&(m||(m=o("I64"))).le(e.lastActivityTimestampMs,B.lastActivityTimestampMs)?"inboxRecentThreads":"inboxRemainingThreads":u,lsSubEntryPoint:f,messagingEntrypoint:x!=null?x:"jewel",onClickNestedFolderThread:w,onClose:N,responsive:v,selected:t,showFollowUpReminder:G.find(function(t){return(m||(m=o("I64"))).equal(t,e.threadKey)})!=null,thread:e})}):_.jsx("div",{})},[u,B,x,w,N,v,q,S,U,G]),j=g(function(e){k&&k(function(t){return e.scrollTop>0})},[k]),K=r("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_impression"}),Q=b(null),X=C(function(){return{rootElementRef:Q}},[Q]),Y=g(function(e){var t;Q.current=(t=e==null?void 0:e.getScrollAreaElement())!=null?t:null},[]),J=L(),Z=g(function(e){return(J!=null?J(e):!0)&&(l!=null?l(e):!0)},[J,l]),ee=r("useMWGetInboxFocusTargetFromRoute")(),te=ee===1,ne=_.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xmz0i5r x6ikm8r x10wlt62",fallback:null,name:"MWThreadList",children:_.jsx(r("MWPParentThreadKeyContext").Provider,{value:h,children:_.jsx(r("VirtualizationContainerContext").Provider,{value:X,children:_.jsx(r("MWPBaseThreadList.react"),{beforeContent:_.jsxs(_.Fragment,{children:[_.jsx(r("MWLSJewelMessageRequestsThreadContainer.react"),{onOpenMessageRequests:d}),A,n("cr:21161")&&_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWPinnedThreadsList",children:_.jsx(n("cr:21161"),{customThreadFilter:l,parentThreadKey:h,renderItem:z})})]}),customThreadFilter:Z,emptyContent:_.jsx(r("MWThreadListEmptyContainer.react"),{filter:a,parentThreadKey:h}),filter:a,gridLabel:t,imperativeRef:Y,onDataLoaded:H,onLoadMoreThreads:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.threadlist","load_more_threads"),r("CometVisualCompletion").addFirstMarkerPoint("threadListLoadMoreThreads")},onScroll:j,pageSize:15,parentThreadKey:h,renderItem:z,renderLoadingAnimation:function(t,n){var e=t==="onBottom"&&n>I;return _.jsxs("div",{children:[_.jsx(r("MWThreadListGlimmer.react"),{numberOfItems:2,parentComponentForDebug:"MWThreadListLoadingAnimation",vcIgnore:e}),_.jsx(r("CometHeroHoldTrigger.react"),{description:"ThreadListLoadingMoreItems."+t,hold:!e})]})},setIsEmptyInbox:T})})})});return _.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",id:W,ref:K,children:[s!=null?_.jsx(o("FocusRegion.react").FocusRegion,{children:s}):null,_.jsx($,{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,enabled:te,children:_.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:te?o("focusScopeQueries").tabbableScopeQuery:void 0,recoverFocusQuery:o("focusScopeQueries").tabbableScopeQuery,recoverFocusStrategy:o("FocusRegionType").RecoverFocusStrategy.Nearest,children:ne})})]})}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=o("react-compiler-runtime").c(3),n=e.autoFocusQuery,a=e.children,i=e.enabled;if(!i)return a;var l;return t[0]!==n||t[1]!==a?(l=_.jsx(r("CometRouterFocusRegion.react"),{autoFocusQuery:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2],l}l.default=x}),98);
__d("MWJewelNestedFolderThreadList.react",["CometScrollView.react","CometTopNavListDropdownCard.react","MWJewelNestedFolderThreadListHeader.react","MWThreadList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.folder,a=e.onClose,i=e.onReturn,l=e.title,u;t[0]!==i||t[1]!==l?(u=s.jsx(r("MWJewelNestedFolderThreadListHeader.react"),{onReturn:i,title:l}),t[0]=i,t[1]=l,t[2]=u):u=t[2];var c;t[3]!==l?(c=typeof l=="string"?l:l.toString(),t[3]=l,t[4]=c):c=t[4];var d;t[5]!==n||t[6]!==a||t[7]!==c?(d=s.jsx(r("MWThreadList.react"),{gridLabel:c,lsEntryPoint:"jewelNestedFolder",onClose:a,parentThreadKey:n,responsive:!1}),t[5]=n,t[6]=a,t[7]=c,t[8]=d):d=t[8];var m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"x1qx5ct2"}),t[9]=m):m=t[9];var p;return t[10]!==u||t[11]!==d?(p=s.jsx(r("CometTopNavListDropdownCard.react"),{useMaxHeight:!0,children:s.jsxs(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[u,d,m]})}),t[10]=u,t[11]=d,t[12]=p):p=t[12],p}l.default=u}),98);
__d("MWSearchLoggingTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Jewel:"jewel",Inbox:"inbox"});i.SearchSurface=e}),66);
__d("UniversalSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("843"),s=o("FalcoLoggerInternal").create("universal_search_query_changed",e),u=s;l.default=u}),98);
__d("UniversalSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("840"),s=o("FalcoLoggerInternal").create("universal_search_start",e),u=s;l.default=u}),98);
__d("MWJewelLightspeedSearchTypeaheadViewList.react",["CometScrollView.react","MWChatSearchLightspeedTypeaheadViewList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react")),c={scroll:{maxHeight:"x1wxkln1",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(10),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[c.scroll,i],n[3]=i,n[4]=l):l=n[4];var s;n[5]!==a?(s=u.jsx(r("MWChatSearchLightspeedTypeaheadViewList.react"),babelHelpers.extends({showActionItems:!1},a)),n[5]=a,n[6]=s):s=n[6];var d;return n[7]!==l||n[8]!==s?(d=u.jsx(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:l,children:s}),n[7]=l,n[8]=s,n[9]=d):d=n[9],d}l.default=d}),98);
__d("MWJewelSearchEmptyState.react",["fbt","MWXText.react","react","react-compiler-runtime","useCometTypeaheadEmptyState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.queryString,a=r("useCometTypeaheadEmptyState")(),i;return t[0]!==a||t[1]!==n?(i=a?u.jsxs("div",{className:"xz9dl7a xpdmqnj xsag5q8 x1g0dm76",children:[u.jsx(r("MWXText.react"),{align:"center",type:"body2",children:s._(/*BTDS*/"Nothing found")}),u.jsx("br",{}),u.jsx(r("MWXText.react"),{align:"center",color:"tertiary",type:"body3",children:s._(/*BTDS*/"We couldn't find any matches for \"{query}.\" Try checking for typos or using complete words.",[s._param("query",n)])})]}):null,t[0]=a,t[1]=n,t[2]=i):i=t[2],i}l.default=c}),226);
__d("createMWJewelSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWJewelLightspeedSearchTypeaheadViewList.react","MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE"],s,u=s||(s=o("react"));function c(t,n){return function(a){var o=a.ariaProps,i=a.entries,l=a.extraViewProps,s=a.highlightedEntry,c=a.isLoading,d=a.onAbandonTypeahead_DO_NOT_USE,m=babelHelpers.objectWithoutPropertiesLoose(a,e),p=i.length===0&&m.queryString.length>0,_=i.length>0&&c,f=i.length===0&&c&&m.queryString.length===0&&r("gkx")("15587");return f?u.jsx(r("CometTypeaheadProgressGlimmer.react"),{}):p?u.jsx(r("MWJewelSearchEmptyState.react"),{queryString:m.queryString}):u.jsxs(u.Fragment,{children:[u.jsx(r("MWJewelLightspeedSearchTypeaheadViewList.react"),{ariaProps:o,entries:i,highlightedEntry:s,xstyle:t,children:function(t){var e=t.entry,o=t.isActive,a=t.itemRole;return u.createElement(r("MWJewelSearchTypeaheadViewItem.react"),babelHelpers.extends({},m,{entry:e,extraViewItemProps:{loggingSessionId:n},isActive:o,key:e.key,role:a}))}}),_&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})}}l.default=c}),98);
__d("MWJewelSearchSubscriptionTypeahead.react",["fbt","BaseSubscriptionTypeahead.react","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWFacebookUserWithoutMessengerAccess","MWInboxRouteBuilder","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPConversationSearchLogger","MWSearchLogging","MWSearchLoggingTypes","MWSearchQPLLogger","UniversalSearchEndFalcoEvent","UniversalSearchQueryChangedFalcoEvent","UniversalSearchStartFalcoEvent","cr:2012305","cr:8414","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","react","useCometRouterDispatcher","useReStore","uuidv4","xplatToDOMRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onChange","onFocus","onPressEntry","onSelectFreeformQuery"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useMemo,g=m.useRef,h=m.useState,y={searchInput:{marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"x1e56ztr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},searchView:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},C=function(t){return r("createMWJewelSearchTypeaheadViewStrategy.react")(null,t)},b=r("gkx")("23390");function v(t){var a=t.onChange,i=t.onFocus,l=t.onPressEntry,c=t.onSelectFreeformQuery,m=babelHelpers.objectWithoutPropertiesLoose(t,e),v=h(null),S=v[0],R=v[1],L=g(null),E=(u||(u=r("useReStore")))(),k=g(!1),I=n("cr:8414")();_(function(){var e=L.current;return n("cr:2012305")!==null&&e!=null&&n("cr:2012305").trackTypingPerf(e,"MWJewelSearchTypeahead"),function(){n("cr:2012305")!==null&&e!=null&&n("cr:2012305").unregisterTypingPerf(e)}},[L]);var T=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=f(function(){return new(r("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:E,excludedIDs:[],includeGroupSearch:T!=="ChatTab",includeMessageSearchEntry:r("gkx")("5801"),includeRecommendations:!0,lightspeedSupportedTypes:o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,source:r("MWChatSearchSurfaces").universal})},[E,T]),x=p(function(){R(null),S!=null&&(k.current||(r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:8,is_epd:b,session_id:S,transport_type:null}}),k.current=!0)),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon"),a("")},[a,S]),$=r("useCometRouterDispatcher")(),P=p(function(e){var t=e.rawData.resultType;if(t===r("MWChatSearchResultType").MESSAGE&&e.rawData.query!=null&&r("gkx")("5801")){var n=o("MWInboxRouteBuilder").buildMultiThreadMesageSearchURL({search:e.rawData.query});$!=null&&n!=null&&(r("MWPConversationSearchLogger").logUniversalMessageSearch(),$.go(n,{}))}else I==null||I(e);var a=function(){l!=null&&l(e)};if(S==null){a();return}o("MWSearchLogging").logResultSelected(S,m.queryString,e,k),a()},[l,S,m.queryString,$,I]);_(function(){return function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon")}},[]);var N=p(function(){var e=r("uuidv4")();R(e),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:"",sessionInstanceId:e,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel}),k.current=!1,r("UniversalSearchStartFalcoEvent").log(function(){return{is_epd:b,search_surface:0,session_id:e}}),r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:"0",query_string:null,session_id:e}})},[E]),M=p(function(e){S!=null&&(r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:e.length.toString(),query_string:e,session_id:S}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:e,sessionInstanceId:S,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel})),a(e)},[a,S]),w=function(){i()},A=o("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),F=s._(/*BTDS*/"Search Messenger"),O=s._(/*BTDS*/"Search messages"),B=A?O:F;return d.jsx(r("BaseSubscriptionTypeahead.react"),{dataSource:D,dataSourceFetchConfigParams:r("isArmadillo")()?{requestFlow:"network-upon-approve"}:void 0,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:o("xplatToDOMRef").xplatToInputRef(L),inputStartContent:S!=null?d.jsx(r("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:r("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:r("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:M,onClose:x,onFocus:w,onOpen:N,onPressEntry:P,onSelectFreeformQuery:c,placeholder:B,queryString:m.queryString,shouldCloseOnEnter:!1,shouldHandleCloseAfterHandlePressEntry:!0,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:C(S),xstyles:{inputXStyle:y.searchInput,viewXStyle_DO_NOT_USE:y.searchView}})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);
__d("MWJewelThreadListSearchTypeahead.react",["CometRelay","FBLogger","I64","MWChatSearchFilteringUtils","MWChatSearchResultType","MWJewelSearchSubscriptionTypeahead.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWPSearchSystem","MWThreadCreationUtil","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","setTimeoutCometSpeculative","useCometPreloader","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useState;function f(t){var n=o("react-compiler-runtime").c(25),a=t.onClose,i=_(""),l=i[0],u=i[1],d=r("useMWChatOpenTabForGroup")("jewelSearch"),m=d[0],f=r("useMWChatOpenTabForPage")("jewelSearch"),h=r("useMWChatOpenTabForUser")("jewelSearch"),y=h.openTabByThreadKey,C=h.openTabForUserWithoutPreloadedNavigationData,b=(e||(e=r("useReStore")))(),v=o("CometRelay").useRelayEnvironment(),S;n[0]!==b?(S=function(){return o("MWPSearchSystem").makeAll(b)},n[0]=b,n[1]=S):S=n[1];var R=S,L;n[2]!==R?(L=function(){r("setTimeoutCometSpeculative")(R,1e4)},n[2]=R,n[3]=L):L=n[3],p(L,void 0);var E;n[4]!==b||n[5]!==v||n[6]!==y||n[7]!==C?(E=function(t,n){var e=o("MWChatSearchFilteringUtils").getIsE2ee(n.rawData);if(e)return y(t,!0);o("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(n,v,b).then(async function(e){var r=e.isSecureThread,a=e.reason;if(a==="default_e2ee")C({unpreloadedReason:"jewelsearch_not_support_gql",userId:t});else{var i,l,u,c,d=await b.tables.threads.get((s||(s=o("I64"))).of_string(t));C({isSecureThread:r,reason:"MWJewelThreadListSearchTypeahead, FBID: "+t+", reason: "+(a!=null?a:"")+", searchSource: "+((i=n.rawData.searchSource)!=null?i:"")+", otherUserId: "+((l=n.rawData.otherUserId)!=null?l:"")+", hasCutoverThread: "+((u=(c=n.rawData.hasCutoverThread)==null?void 0:c.toString())!=null?u:"false")+", threadAuthorityLevel: "+(d!=null?(s||(s=o("I64"))).to_string(d.authorityLevel):"null"),unpreloadedReason:"jewelsearch_not_support_gql",userId:t})}}).catch(g)},n[4]=b,n[5]=v,n[6]=y,n[7]=C,n[8]=E):E=n[8];var k=E,I;n[9]!==a||n[10]!==m||n[11]!==f||n[12]!==k?(I=function(t){var e=t.rawData,n=e.id,o=e.resultType;e:switch(o){case r("MWChatSearchResultType").MESSAGE:break e;case r("MWChatSearchResultType").GROUP:{m(n);break e}case r("MWChatSearchResultType").USER:case r("MWChatSearchResultType").AI_BOT:{k(n,t);break e}case r("MWChatSearchResultType").PAGE:f(n)}a()},n[9]=a,n[10]=m,n[11]=f,n[12]=k,n[13]=I):I=n[13];var T=I,D=r("useCometPreloader")("button_aggressive",r("emptyFunction"),R),x=D.onHoverInPreloader,$=D.onHoverMovePreloader,P=D.onHoverOutPreloader,N;n[14]!==R?(N=function(){o("MWLogInteraction").logPopoverOpenCancel("initiate_search"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_search"),R(),r("QPLUserFlow").start(r("qpl")._(25312244,"1683"))},n[14]=R,n[15]=N):N=n[15];var M;n[16]!==T||n[17]!==l||n[18]!==N?(M=c.jsx(r("MWJewelSearchSubscriptionTypeahead.react"),{onChange:u,onFocus:N,onPressEntry:T,queryString:l}),n[16]=T,n[17]=l,n[18]=N,n[19]=M):M=n[19];var w;return n[20]!==x||n[21]!==$||n[22]!==P||n[23]!==M?(w=c.jsx("div",{onMouseEnter:x,onMouseLeave:P,onMouseMove:$,children:M}),n[20]=x,n[21]=$,n[22]=P,n[23]=M,n[24]=w):w=n[24],w}function g(e){r("FBLogger")("messenger_search").mustfix("Error fetching contact capabilities: %s",e)}var h=c.memo(f);l.default=h}),98);
__d("CometMessagingJewelDropdownContent.react",["fbt","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometMessagingJewelDropdownContentGlimmer.react","CometMessagingJewelDropdownEBUpsellContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","CometTopNavListDropdownCard.react","FBLogger","I64","InteractionTracing","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSPlatformErrorsCatcher.react","LSThreadRangeFilter","MAWUnrecoverableErrorBoundary.react","MWCMJewelContext","MWInboxContextSwitcherDeferred.react","MWInboxContextSwitcherGlimmer.react","MWInboxContextSwitcherUtils","MWJewelDropdownHeader.react","MWJewelMessengerLink.react","MWJewelNestedFolderThreadList.react","MWJewelPopoverDialogContext.react","MWJewelThreadListSearchTypeahead.react","MWThreadList.react","ODS","ReQL","ReQLSuspense","WebUXLoggingEntryPointContextProvider","XCometMessengerControllerRouteBuilder","gkx","lazyLoadComponent","qpl","react","react-compiler-runtime","useCometInteractionTracing","useMWChatSearchClearSearchResults","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=m,f=_.memo,g=_.useCallback,h=_.useContext,y=_.useEffect,C=_.useState,b=r("lazyLoadComponent")(r("JSResourceForInteraction")("MAWJewelMessageRequestsAndSpamDropdownWithTab.react").__setRef("CometMessagingJewelDropdownContent.react")),v=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWRestrictedAccountsList.react").__setRef("CometMessagingJewelDropdownContent.react")),S=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWJewelArchivedChatsDropdown.react").__setRef("CometMessagingJewelDropdownContent.react")),R=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometMessagingJewelDropdownErrorState.react").__setRef("CometMessagingJewelDropdownContent.react")),L=s._(/*BTDS*/"Chats");function E(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}var k=r("gkx")("22839")===!0;function I(t){var n=o("react-compiler-runtime").c(94),a=t.ebSoftblockUpsell,l=t.ebUpsellContainerQueryRef,m=t.onClose,_=t.pushPage,f=h(r("MWJewelPopoverDialogContext.react")),g=f.setIsOpenForDialog,R=r("useMWChatSearchClearSearchResults")(),I;n[0]!==R||n[1]!==m?(I=function(){R(),m()},n[0]=R,n[1]=m,n[2]=I):I=n[2];var D=I,x,$;n[3]!==R?(x=function(){return R},$=[R],n[3]=R,n[4]=x,n[5]=$):(x=n[4],$=n[5]),y(x,$);var P;n[6]===Symbol.for("react.memo_cache_sentinel")?(P=r("XCometMessengerControllerRouteBuilder").buildURL({}),n[6]=P):P=n[6];var N=P,M=h(r("MWCMJewelContext")),w=M.MWCMBlendedThreadListEntrypointRef,A=M.selectedFilterTab,F=M.setSelectedFilterTab,O=C(),B=O[0],W=O[1],q;n[7]===Symbol.for("react.memo_cache_sentinel")?(q=r("qpl")._(30610001,"3003"),n[7]=q):q=n[7];var U=r("useCometInteractionTracing")(q,"fast","INTERACTION"),V=(e||(e=r("useReStore")))(),H;n[8]!==V.tables._user_info?(H=function(){return o("ReQL").fromTableAscending(V.tables._user_info).map(T)},n[8]=V.tables._user_info,n[9]=H):H=n[9];var G;n[10]!==V?(G=[V],n[10]=V,n[11]=G):G=n[11];var z=o("ReQLSuspense").useFirst(H,G,i.id+":148"),j;n[12]!==V.tables.contacts||n[13]!==z?(j=function(){return z!=null?o("ReQL").fromTableAscending(V.tables.contacts,["capabilities","capabilities2"]).getKeyRange(z):o("ReQL").empty()},n[12]=V.tables.contacts,n[13]=z,n[14]=j):j=n[14];var K;n[15]!==V||n[16]!==z?(K=[V,z],n[15]=V,n[16]=z,n[17]=K):K=n[17];var Q=o("ReQLSuspense").useFirst(j,K,i.id+":152"),X;n[18]!==D||n[19]!==_?(X=function(){var e=r("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:r("qpl")._(30607516,"756"),tracePolicy:"comet.jewel.message_requests",traceType:"INTERACTION"});_(function(t){var n=t.onReturn;return p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!1,title:L,withBackButton:!0}),name:"MAWJewelMessageRequestsAndSpamDropdownWithTab",children:p.jsx(b,{interactionID:e,onClose:D,onReturn:n})})})},n[18]=D,n[19]=_,n[20]=X):X=n[20];var Y=X,J;n[21]!==Y||n[22]!==A?(J=o("MWInboxContextSwitcherUtils").shouldShowMessageRequestsFromFilter(A)?Y:void 0,n[21]=Y,n[22]=A,n[23]=J):J=n[23];var Z=J,ee;n[24]!==D||n[25]!==_?(ee=function(){_(function(e){var t=e.onReturn;return p.jsx(v,{hidePage:t,onClose:D})})},n[24]=D,n[25]=_,n[26]=ee):ee=n[26];var te=ee,ne;n[27]!==D||n[28]!==_?(ne=function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"mw_jewel","archived_chats"),_(function(e){var t=e.onReturn;return p.jsx(S,{onClose:D,onReturn:t})})},n[27]=D,n[28]=_,n[29]=ne):ne=n[29];var re=ne,oe;n[30]!==D||n[31]!==_||n[32]!==Q?(oe=function(t){_(function(e){var n=e.onReturn;switch((c||(c=o("I64"))).to_int32(t)){case-13:return p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:s._(/*BTDS*/"Jobs")});case-12:{var a=Q!=null&&o("LSContactBitOffset").has(86,Q),i=s._(/*BTDS*/"Marketplace");return a&&(i=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"6a9a0529abd169ff91b49b4022dbf5a5\",1]")),p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:i})}default:return r("FBLogger")("messenger_web_entrypoints").mustfix("Attempted to show an unimplemented nested system folder"),null}})},n[30]=D,n[31]=_,n[32]=Q,n[33]=oe):oe=n[33];var ae=oe,ie;n[34]!==a||n[35]!==l||n[36]!==A?(ie=p.jsx(r("CometMessagingJewelDropdownEBUpsellContainer.react"),{ebSoftblockUpsell:a,ebUpsellContainerQueryRef:l,selectedFilterTab:A}),n[34]=a,n[35]=l,n[36]=A,n[37]=ie):ie=n[37];var le=ie,se;n[38]!==A?(se=o("MWInboxContextSwitcherUtils").getCustomThreadFilter(A),n[38]=A,n[39]=se):se=n[39];var ue=se,ce;n[40]!==A?(ce=o("MWInboxContextSwitcherUtils").getParentThreadKeyFromFilter(A),n[40]=A,n[41]=ce):ce=n[41];var de=ce,me=!(a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A)),pe;n[42]!==D||n[43]!==re||n[44]!==Y||n[45]!==te?(pe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelDropdownHeader",children:p.jsx(r("MWJewelDropdownHeader.react"),{inboxUrl:N,onClose:D,onOpenArchivedChats:re,onOpenMessageRequests:Y,onOpenRestrictedAccountsList:te,title:L})}),n[42]=D,n[43]=re,n[44]=Y,n[45]=te,n[46]=pe):pe=n[46];var _e;n[47]===Symbol.for("react.memo_cache_sentinel")?(_e={className:"x1c4vz4f"},n[47]=_e):_e=n[47];var fe;n[48]!==D||n[49]!==_?(fe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelThreadListSearchTypeahead",children:p.jsx(r("MWJewelThreadListSearchTypeahead.react"),{onClose:D,pushPage:_})}),n[48]=D,n[49]=_,n[50]=fe):fe=n[50];var ge;n[51]===Symbol.for("react.memo_cache_sentinel")?(ge=p.jsx(r("MWInboxContextSwitcherGlimmer.react"),{}),n[51]=ge):ge=n[51];var he;n[52]!==U||n[53]!==g||n[54]!==F?(he=function(t){U(function(e){W(e.getTraceId())},void 0,void 0,"comet.jewel.messenger."+o("MWInboxContextSwitcherUtils").getTracePolicyFromFilter(t)),g(!1),F==null||F(t)},n[52]=U,n[53]=g,n[54]=F,n[55]=he):he=n[55];var ye;n[56]!==ae||n[57]!==Y||n[58]!==de||n[59]!==A||n[60]!==he?(ye=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:ge,name:"MWInboxContextSwitcher",children:p.jsx(r("MWInboxContextSwitcherDeferred.react"),{entryPoint:"jewel",onTabChange:he,parentThreadKey:de,selectedFilterTab:A,showMessageRequests:Y,showNestedFolderThreads:ae})}),n[56]=ae,n[57]=Y,n[58]=de,n[59]=A,n[60]=he,n[61]=ye):ye=n[61];var Ce;n[62]!==fe||n[63]!==ye?(Ce=p.jsxs("div",babelHelpers.extends({},_e,{children:[fe,ye]})),n[62]=fe,n[63]=ye,n[64]=Ce):Ce=n[64];var be=me&&le,ve;n[65]!==pe||n[66]!==Ce||n[67]!==be?(ve=p.jsxs(p.Fragment,{children:[pe,Ce,be]}),n[65]=pe,n[66]=Ce,n[67]=be,n[68]=ve):ve=n[68];var Se=ve,Re;n[69]!==A?(Re=o("MWInboxContextSwitcherUtils").getJewelEntryPointFromFilter(A),n[69]=A,n[70]=Re):Re=n[70];var Le=Re,Ee;n[71]!==A?(Ee=o("MWInboxContextSwitcherUtils").getJewelLsSubEntryPointFromFilter(A),n[71]=A,n[72]=Ee):Ee=n[72];var ke=Ee,Ie;n[73]!==w||n[74]!==ue||n[75]!==a||n[76]!==ke||n[77]!==ae||n[78]!==D||n[79]!==Z||n[80]!==de||n[81]!==A?(Ie=a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A)?p.jsx(p.Fragment,{children:a}):p.jsxs(p.Fragment,{children:[k&&(c||(c=o("I64"))).equal(A,(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))?p.jsx(r("CometPlaceholder.react"),{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0}),name:"CometMessagingJewelDropdownContent.MWCMBlendedThreadList",children:w!=null?p.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:w,props:{filter:A,gridLabel:L.toString(),header:null,lsEntryPoint:"jewel",lsSubEntryPoint:ke,onDropdownClose:D,onError:E,parentThreadKey:de}}):null}):p.jsx(r("MWThreadList.react"),{customThreadFilter:ue,filter:A,gridLabel:L.toString(),lsEntryPoint:"jewel",lsSubEntryPoint:ke,onClickNestedFolderThread:ae,onClose:D,onOpenMessageRequests:Z,parentThreadKey:de,responsive:!1},(c||(c=o("I64"))).to_string(A)),p.jsx(r("MWJewelMessengerLink.react"),{onClick:D,url:N})]}),n[73]=w,n[74]=ue,n[75]=a,n[76]=ke,n[77]=ae,n[78]=D,n[79]=Z,n[80]=de,n[81]=A,n[82]=Ie):Ie=n[82];var Te;n[83]!==Se||n[84]!==Ie?(Te=p.jsxs(r("CometTopNavListDropdownCard.react"),{testid:void 0,useFullHeight:!0,useMaxHeight:!0,children:[Se,Ie]}),n[83]=Se,n[84]=Ie,n[85]=Te):Te=n[85];var De=Te,xe;n[86]===Symbol.for("react.memo_cache_sentinel")?(xe=p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0,title:L}),n[86]=xe):xe=n[86];var $e;n[87]!==B||n[88]!==A||n[89]!==De?($e=B!=null?p.jsx(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"JewelThreadList."+o("MWInboxContextSwitcherUtils").getInteractionDescFromFilter(A),interactionUUID:B,children:De}):De,n[87]=B,n[88]=A,n[89]=De,n[90]=$e):$e=n[90];var Pe;return n[91]!==$e||n[92]!==Le?(Pe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:xe,name:"MWJewelDropdownContent",children:p.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:Le,children:$e})}),n[91]=$e,n[92]=Le,n[93]=Pe):Pe=n[93],Pe}function T(e){return e.facebookUserId}function D(e){var t=o("react-compiler-runtime").c(2),n=x,a;return t[0]!==e?(a=p.jsx(r("MAWUnrecoverableErrorBoundary.react"),{fallback:n,children:p.jsx(r("CometErrorBoundary.react"),{fallback:n,children:p.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:n,children:p.jsx(I,babelHelpers.extends({},e))})})}),t[0]=e,t[1]=a):a=t[1],a}function x(e){return p.jsx(R,{error:e})}x.displayName=x.name+" [from "+i.id+"]";var $=f(D);l.default=$}),226);
__d("CometMessagingJewelDropdown.react",["fbt","BaseMultiStepContainer.react","BasePopoverReflowSheetContext","CometMessagingJewelDropdownContent.react","CometTopNavListDropdown.react","MWLogInboxFiltersInteraction","MWLogInteraction","justknobx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(9),n=e.props,a=e.queries,i=n.onClose,l=a.ebUpsellContainerQueryRef,c=o("MWLogInteraction").getPopoverTrace();c==null||c.addAnnotation("PopoverEntrypoint","CometMessagingJewelDropdown");var d=m(r("BasePopoverReflowSheetContext")),p=d.isReflowSheet,f=_,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Messenger"),t[0]=g):g=t[0];var h;t[1]!==p?(h={0:{className:"x1cvmir6"},1:{className:"x14atkfc"}}[!!p<<0],t[1]=p,t[2]=h):h=t[2];var y;t[3]!==l||t[4]!==i?(y=u.jsx(r("BaseMultiStepContainer.react"),{fitContentWidth:!0,onPageChange:f,children:function(t){return u.jsx(r("CometMessagingJewelDropdownContent.react"),{ebUpsellContainerQueryRef:l,onClose:i,pushPage:t})}}),t[3]=l,t[4]=i,t[5]=y):y=t[5];var C;return t[6]!==h||t[7]!==y?(C=u.jsx(r("CometTopNavListDropdown.react"),{label:g,name:"MWJewelDropdown",children:u.jsx("div",babelHelpers.extends({},h,{children:y}))}),t[6]=h,t[7]=y,t[8]=C):C=t[8],C}function _(e){e>0&&r("justknobx")._("3802")&&(o("MWLogInteraction").logPopoverOpenCancel("popover_page_change"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("popover_page_change"))}l.default=p}),226);
__d("FDSResizeFreeFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("580260"),20),u=e;l.default=u}),98);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("gkx")("23433"),c={logoGlimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1qx5ct2",$$css:!0}};function d(){var e=o("react-compiler-runtime").c(6),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!u<<0],e[0]=t):t=e[0];var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.logoGlimmer})}),e[1]=n):n=e[1];var a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsxs(r("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[n,s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})]}),e[2]=a):a=e[2];var i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x16ngw23 xwib8y2",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})}),e[3]=i):i=e[3];var l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MWXRow.react"),{direction:"forward",wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:c.pinInputGlimmer})})}),e[4]=l):l=e[4];var d;return e[5]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("div",babelHelpers.extends({},t,{children:s.jsxs(r("MWXColumn.react"),{spacing:8,style:c.root,children:[a,i,l,s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x18xe386 xpdvgm7 x1y1aw1k",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})})]})})),e[5]=d):d=e[5],d}l.default=d}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var n=o("react-compiler-runtime").c(18),a=t.upsellType,l=(e||(e=r("useReStore")))(),s,u;n[0]!==a?(u=o("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),n[0]=a,n[1]=u):u=n[1],s=u;var c=s,d=c.countdownInMS,m=c.impressionsCountKey,p=c.lastImpressionTimeKey,_=c.maxImpressionLimit,f;n[2]!==d||n[3]!==l.tables.experiences_shared_state||n[4]!==p?(f=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(p).map(function(e){var t=e.stateValue;return t!=null&&+t+d>Date.now()})},n[2]=d,n[3]=l.tables.experiences_shared_state,n[4]=p,n[5]=f):f=n[5];var g;n[6]!==d||n[7]!==l||n[8]!==p?(g=[d,l,p],n[6]=d,n[7]=l,n[8]=p,n[9]=g):g=n[9];var h=o("ReQLSuspense").useFirst(f,g,i.id+":41"),y;n[10]!==l.tables.experiences_shared_state||n[11]!==m||n[12]!==_?(y=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(m).map(function(e){var t=e.stateValue;return!(_===o("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+t<_)})},n[10]=l.tables.experiences_shared_state,n[11]=m,n[12]=_,n[13]=y):y=n[13];var C;n[14]!==l||n[15]!==m||n[16]!==_?(C=[l,m,_],n[14]=l,n[15]=m,n[16]=_,n[17]=C):C=n[17];var b=o("ReQLSuspense").useFirst(y,C,i.id+":56");return h===!0||b===!0}l.default=c}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(e){var t=o("react-compiler-runtime").c(5),n=e.upsellType,a=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),i=s(!1),l=i[0],u=i[1],c;t[0]!==n?(c={upsellType:n},t[0]=n,t[1]=c):c=t[1];var d=r("useMWEBIsUpsellDeferred")(c),m=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),p=m.virtualDeviceInfo,_=p.doesUserHaveOtcEligibleDevices;if(a&&n===o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!_){var f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=[!0,u],t[2]=f):f=t[2],f}var g=d===!0||l,h;return t[3]!==g?(h=[g,u],t[3]=g,t[4]=h):h=t[4],h}l.default=u}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),d=r("gkx")("3952");function m(t){var a=o("react-compiler-runtime").c(15),i=t.children,l=t.fragmentKey,s=t.trigger,m=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),l),p=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),_=r("useMWEBGetUpsellState")(),f=_.isRestoreUpsellsDismissed,g;a[0]===Symbol.for("react.memo_cache_sentinel")?(g={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},a[0]=g):g=a[0];var h=r("useMWEncryptedBackupsIsUpsellDismissed")(g),y=h[0],C=h[1],b;a[1]===Symbol.for("react.memo_cache_sentinel")?(b={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},a[1]=b):b=a[1];var v=r("useMWEncryptedBackupsIsUpsellDismissed")(b),S=v[0],R=v[1],L;a[2]===Symbol.for("react.memo_cache_sentinel")?(L={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},a[2]=L):L=a[2];var E=r("useMWEncryptedBackupsIsUpsellDismissed")(L),k=E[0],I=E[1],T;a[3]!==p?(T={backupState:4,isCooldownOrLockOutState:p},a[3]=p,a[4]=T):T=a[4];var D=r("useHasRestoreInterstitialSoftblockBeenDismissed")(T),x=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),$=y||S;if(f||$&&!d||$&&d&&k)return i;var P;a[5]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),a[5]=P):P=a[5];var N;a[6]!==i||a[7]!==x||a[8]!==m||a[9]!==$||a[10]!==I||a[11]!==C||a[12]!==R||a[13]!==s?(N=u.jsx(r("CometPlaceholder.react"),{fallback:P,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:u.jsx(c,{children:i,currentSupportedPlatform:x,fragmentKey:m,hasDismissedQps:$,setHasDismissedBanner:I,setHasDismissedQp:C,setHasDismissedQpWithPin:R,trigger:s})}),a[6]=i,a[7]=x,a[8]=m,a[9]=$,a[10]=I,a[11]=C,a[12]=R,a[13]=s,a[14]=N):N=a[14];var M=N;switch(x){case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return D?M:i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return M}}l.default=m}),98);
__d("MWFDSMarketplace.svg.react",["cr:21707"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21707")}),98);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:22393","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22393")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadListMarketplaceItem.react",["fbt","CometMarketplaceLogger","LSContactBitOffset","LSIntEnum","MWPBumpEntityKey","MWThreadListFolderItem.react","MWXIconGroup","MWXIconMarketplace","MWXIconStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useLogMarketplaceClick","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var n=o("react-compiler-runtime").c(27),a=t.onClick,l=t.responsive,c=t.selected,p=t.size,g=t.thread,h=r("useLogMarketplaceClick")("marketplace_inbox_folder"),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables._user_info?(C=function(){return o("ReQL").fromTableAscending(y.tables._user_info).map(f)},n[0]=y.tables._user_info,n[1]=C):C=n[1];var b;n[2]!==y?(b=[y],n[2]=y,n[3]=b):b=n[3];var v=o("ReQLSuspense").useFirst(C,b,i.id+":51"),S;n[4]!==y.tables.contacts||n[5]!==v?(S=function(){return v!=null?o("ReQL").fromTableAscending(y.tables.contacts,[].concat(o("LSContactBitOffset").contactCapabilityFields)).getKeyRange(v):o("ReQL").empty()},n[4]=y.tables.contacts,n[5]=v,n[6]=S):S=n[6];var R;n[7]!==y||n[8]!==v?(R=[y,v],n[7]=y,n[8]=v,n[9]=R):R=n[9];var L=o("ReQLSuspense").useFirst(S,R,i.id+":56"),E=L!=null&&o("LSContactBitOffset").has(86,L),k;n[10]===Symbol.for("react.memo_cache_sentinel")?(k=[],n[10]=k):k=n[10],m(_,k);var I;n[11]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Marketplace").toString(),n[11]=I):I=n[11];var T=I,D=r("MWXIconMarketplace");if(E===!0){var x;n[12]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"3a9a1e192465754ec4427995fe1cffb4\",1]").toString(),n[12]=x):x=n[12],T=x,D=r("MWXIconGroup")}var $;n[13]!==D?($=d.jsx(r("MWXIconStrict.react"),{color:"primary",icon:D,size:36}),n[13]=D,n[14]=$):$=n[14];var P;n[15]!==h||n[16]!==a?(P=function(){return h(),a((u||(u=o("LSIntEnum"))).ofNumber(-12)),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","marketplace_threads")},n[15]=h,n[16]=a,n[17]=P):P=n[17];var N;n[18]===Symbol.for("react.memo_cache_sentinel")?(N=(u||(u=o("LSIntEnum"))).ofNumber(-12),n[18]=N):N=n[18];var M;return n[19]!==l||n[20]!==c||n[21]!==p||n[22]!==$||n[23]!==P||n[24]!==g||n[25]!==T?(M=d.jsx(r("MWThreadListFolderItem.react"),{icon:$,onClick:P,responsive:l,selected:c,size:p,systemFolder:N,thread:g,threadName:T}),n[19]=l,n[20]=c,n[21]=p,n[22]=$,n[23]=P,n[24]=g,n[25]=T,n[26]=M):M=n[26],M}function _(){return o("CometMarketplaceLogger").logImpression("marketplace_inbox_folder")}function f(e){return e.facebookUserId}l.default=p}),226);
__d("useHasUnjoinedCMThreads",["LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(4),n=(s||(s=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").union(o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange((e||(e=o("LSIntEnum"))).ofNumber(24)),o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(e.ofNumber(19)))},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;return t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3],!!o("ReQLSuspense").useFirst(a,l,i.id+":22")}l.default=u}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e=="object"&&typeof l!="undefined"?l.exports=n():(t=typeof globalThis!="undefined"?globalThis:t||self,t.Dexie=n())})(this,(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function n(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r.apply(this,arguments)};function o(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var a=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:t,i=Object.keys,l=Array.isArray;typeof Promise!="undefined"&&!a.Promise&&(a.Promise=Promise);function s(e,t){return typeof t!="object"||i(t).forEach(function(n){e[n]=t[n]}),e}var u=Object.getPrototypeOf,c={}.hasOwnProperty;function d(e,t){return c.call(e,t)}function m(e,t){typeof t=="function"&&(t=t(u(e))),(typeof Reflect=="undefined"?i:Reflect.ownKeys)(t).forEach(function(n){_(e,n,t[n])})}var p=Object.defineProperty;function _(e,t,n,r){p(e,t,s(n&&d(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_(e.prototype,"constructor",e),{extend:m.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function h(e,t){var n=g(e,t),r;return n||(r=u(e))&&h(r,t)}var y=[].slice;function C(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function S(e){a.setImmediate?setImmediate(e):setTimeout(e,0)}function R(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function L(e,t){if(typeof t=="string"&&d(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var a=L(e,t[r]);n.push(a)}return n}var i=t.indexOf(".");if(i!==-1){var l=e[t.substr(0,i)];return l==null?void 0:L(l,t.substr(i+1))}}function E(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)E(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var i=t.substr(0,a),s=t.substr(a+1);if(s==="")n===void 0?l(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n;else{var u=e[i];(!u||!d(e,i))&&(u=e[i]={}),E(u,s,n)}}else n===void 0?l(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e,t){typeof t=="string"?E(e,t,void 0):"length"in t&&[].map.call(t,function(t){E(e,t,void 0)})}function I(e){var t={};for(var n in e)d(e,n)&&(t[n]=e[n]);return t}var T=[].concat;function D(e){return T.apply([],e)}var x="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return a[e]}),$=new Set(x.map(function(e){return a[e]}));function P(e){var t={};for(var n in e)if(d(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||$.has(r.constructor)?r:P(r)}return t}function N(e){for(var t in e)if(d(e,t))return!1;return!0}var M=null;function w(e){M=new WeakMap;var t=A(e);return M=null,t}function A(e){if(!e||typeof e!="object")return e;var t=M.get(e);if(t)return t;if(l(e)){t=[],M.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(A(e[n]))}else if($.has(e.constructor))t=e;else{var o=u(e);t=o===Object.prototype?{}:Object.create(o),M.set(e,t);for(var a in e)d(e,a)&&(t[a]=A(e[a]))}return t}var F={}.toString;function O(e){return F.call(e).slice(8,-1)}var B=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",W=typeof B=="symbol"?function(e){var t;return e!=null&&(t=e[B])&&t.apply(e)}:function(){return null};function q(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var U={};function V(e){var t,n,r,o;if(arguments.length===1){if(l(e))return e.slice();if(this===U&&typeof e=="string")return[e];if(o=W(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var H=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],j=G.concat(z),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Q(e,t){this.name=e,this.message=t}f(Q).from(Error).extend({toString:function(){return this.name+": "+this.message}});function X(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Y(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}f(Y).from(Q);function J(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=X(e,this.failures)}f(J).from(Q);var Z=j.reduce(function(e,t){return e[t]=t+"Error",e},{}),ee=Q,te=j.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?typeof e=="string"?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):typeof e=="object"&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=K[t]||n,this.inner=null)}return f(r).from(ee),e[t]=r,e},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var ne=z.reduce(function(e,t){return e[t+"Error"]=te[t],e},{});function re(e,t){if(!e||e instanceof Q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ne[e.name])return e;var n=new ne[e.name](t||e.message,e);return"stack"in e&&_(n,"stack",{get:function(){return this.inner.stack}}),n}var oe=j.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=te[t]),e},{});oe.ModifyError=Y,oe.DexieError=Q,oe.BulkError=J;function ae(){}function ie(e){return e}function le(e,t){return e==null||e===ie?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ue(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),o&&(this.onerror=this.onerror?se(o,this.onerror):o),a!==void 0?a:n}}function ce(e,t){return e===ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function de(e,t){return e===ae?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?se(o,this.onsuccess):o),a&&(this.onerror=this.onerror?se(a,this.onerror):a),r===void 0?i===void 0?void 0:i:s(r,i)}}function me(e,t){return e===ae?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function pe(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var _e=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fe(e,t){_e=e}var ge={},he=100,ye=typeof Promise=="undefined"?[]:(function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]})(),Ce=ye[0],be=ye[1],ve=ye[2],Se=be&&be.then,Re=Ce&&Ce.constructor,Le=!!ve;function Ee(){queueMicrotask(Ge)}var ke=function(e,t){Me.push([e,t]),Te&&(Ee(),Te=!1)},Ie=!0,Te=!0,De=[],xe=[],$e=ie,Pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ae,pgp:!1,env:{},finalize:ae},Ne=Pe,Me=[],we=0,Ae=[];function Fe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Ne;if(typeof e!="function"){if(e!==ge)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&qe(this,this._value);return}this._state=null,this._value=null,++t.ref,We(this,e)}var Oe={get:function(){var e=Ne,t=ot;function n(n,r){var o=this,a=!e.global&&(e!==Ne||t!==ot),i=a&&!st(),l=new Fe(function(t,l){Ve(o,new Be(ft(n,e,a,i),ft(r,e,a,i),t,l,e))});return this._consoleTask&&(l._consoleTask=this._consoleTask),l}return n.prototype=ge,n},set:function(e){_(this,"then",e&&e.prototype===ge?Oe:{get:function(){return e},set:Oe.set})}};m(Fe.prototype,{then:Oe,_then:function(e,t){Ve(this,new Be(null,null,e,t,Ne))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(e){return e instanceof t?n(e):Je(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Je(e)})},finally:function(e){return this.then(function(t){return Fe.resolve(e()).then(function(){return t})},function(t){return Fe.resolve(e()).then(function(){return Je(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Fe(function(r,o){var a=setTimeout(function(){return o(new te.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&_(Fe.prototype,Symbol.toStringTag,"Dexie.Promise"),Pe.env=pt();function Be(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}m(Fe,{all:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,a){return Fe.resolve(o).then(function(n){e[a]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Fe)return e;if(e&&typeof e.then=="function")return new Fe(function(t,n){e.then(t,n)});var t=new Fe(ge,!0,e);return t},reject:Je,race:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.map(function(e){return Fe.resolve(e).then(t,n)})})},PSD:{get:function(){return Ne},set:function(e){return Ne=e}},totalEchoes:{get:function(){return ot}},newPSD:it,usePSD:_t,scheduler:{get:function(){return ke},set:function(e){ke=e}},rejectionMapper:{get:function(){return $e},set:function(e){$e=e}},follow:function(e,t){return new Fe(function(n,r){return it(function(t,n){var r=Ne;r.unhandleds=[],r.onunhandled=n,r.finalize=se(function(){var e=this;Qe(function(){e.unhandleds.length===0?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}}),Re&&(Re.allSettled&&_(Fe,"allSettled",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,o){return Fe.resolve(e).then(function(e){return r[o]={status:"fulfilled",value:e}},function(e){return r[o]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),Re.any&&typeof AggregateError!="undefined"&&_(Fe,"any",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(e,a){return Fe.resolve(e).then(function(e){return t(e)},function(e){o[a]=e,--r||n(new AggregateError(o))})})})}));function We(e,t){try{t(function(t){if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&typeof t.then=="function"?We(e,function(e,n){t instanceof Fe?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Ue(e)),n&&je()}},qe.bind(null,e))}catch(t){qe(e,t)}}function qe(e,t){if(xe.push(t),e._state===null){var n=e._lib&&ze();t=$e(t),e._state=!1,e._value=t,Xe(e),Ue(e),n&&je()}}function Ue(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ve(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),we===0&&(++we,ke(function(){--we===0&&Ke()},[]))}function Ve(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,ke(He,[n,e,t])}function He(e,t,n){try{var r,o=t._value;!t._state&&xe.length&&(xe=[]),r=_e&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),!t._state&&xe.indexOf(o)===-1&&Ye(t),n.resolve(r)}catch(e){n.reject(e)}finally{--we===0&&Ke(),--n.psd.ref||n.psd.finalize()}}function Ge(){_t(Pe,function(){ze()&&je()})}function ze(){var e=Ie;return Ie=!1,Te=!1,e}function je(){var e,t,n;do for(;Me.length>0;)for(e=Me,Me=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Me.length>0);Ie=!0,Te=!0}function Ke(){var e=De;De=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Qe(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++we,ke(function(){--we===0&&Ke()},[])}function Xe(e){De.some(function(t){return t._value===e._value})||De.push(e)}function Ye(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Je(e){return new Fe(ge,!1,e)}function Ze(e,t){var n=Ne;return function(){var r=ze(),o=Ne;try{return mt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{mt(o,!1),r&&je()}}}var et={awaits:0,echoes:0,id:0},tt=0,nt=[],rt=0,ot=0,at=0;function it(e,t,n,r){var o=Ne,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++at,Pe.env,a.env=Le?{Promise:Fe,PromiseProp:{value:Fe,configurable:!0,writable:!0},all:Fe.all,race:Fe.race,allSettled:Fe.allSettled,any:Fe.any,resolve:Fe.resolve,reject:Fe.reject}:{},t&&s(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=_t(a,e,n,r);return a.ref===0&&a.finalize(),i}function lt(){return et.id||(et.id=++tt),++et.awaits,et.echoes+=he,et.id}function st(){return et.awaits?(--et.awaits===0&&(et.id=0),et.echoes=et.awaits*he,!0):!1}(""+Se).indexOf("[native code]")===-1&&(lt=st=ae);function ut(e){return et.echoes&&e&&e.constructor===Re?(lt(),e.then(function(e){return st(),e},function(e){return st(),ht(e)})):e}function ct(e){++ot,(!et.echoes||--et.echoes===0)&&(et.echoes=et.awaits=et.id=0),nt.push(Ne),mt(e,!0)}function dt(){var e=nt[nt.length-1];nt.pop(),mt(e,!1)}function mt(e,t){var n=Ne;if((t?et.echoes&&(!rt++||e!==Ne):rt&&(!--rt||e!==Ne))&&queueMicrotask(t?ct.bind(null,e):dt),e!==Ne&&(Ne=e,n===Pe&&(Pe.env=pt()),Le)){var r=Pe.env.Promise,o=e.env;(n.global||e.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function pt(){var e=a.Promise;return Le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function _t(e,t,n,r,o){var a=Ne;try{return mt(e,!0),t(n,r,o)}finally{mt(a,!1)}}function ft(e,t,n,r){return typeof e!="function"?e:function(){var o=Ne;n&&lt(),mt(t,!0);try{return e.apply(this,arguments)}finally{mt(o,!1),r&&queueMicrotask(st)}}}function gt(e){Promise===Re&&et.echoes===0?rt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var ht=Fe.reject;function yt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!Ne.letThrough&&!e._vip){if(e._state.openComplete)return ht(new te.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return ht(new te.DatabaseClosed);e.open().catch(ae)}return e._state.dbReadyPromise.then(function(){return yt(e,t,n,r)})}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,n,r)})):ht(o)}return o._promise(t,function(e,t){return it(function(){return Ne.trans=o,r(e,t,o)})}).then(function(e){if(t==="readwrite")try{o.idbtrans.commit()}catch(e){}return t==="readonly"?e:o._completion.then(function(){return e})})}}var Ct="4.0.1",bt="\uFFFF",vt=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Rt="String expected.",Lt=[],Et="__dbnames",kt="readonly",It="readwrite";function Tt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Dt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=w(t),delete t[e]),t}:function(e){return e}}function $t(){throw te.Type()}function Pt(e,t){try{var n=wt(e),r=wt(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Mt(At(e),At(t));case"Array":return Nt(e,t)}}catch(e){}return NaN}function Nt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a){var i=Pt(e[a],t[a]);if(i!==0)return i}return n===r?0:n<r?-1:1}function Mt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function wt(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=O(e);return n==="ArrayBuffer"?"binary":n}function At(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ft=(function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Ne.trans,o=this.name,a=_e&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function i(e,n,r){if(!r.schema[o])throw new te.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var l=ze();try{var s=r&&r.db._novip===this.db._novip?r===Ne.trans?r._promise(e,i,n):it(function(){return r._promise(e,i,n)},{trans:r,transless:Ne.transless||Ne}):yt(this.db,e,[this.name],i);return a&&(s._consoleTask=a,s=s.catch(function(e){return console.trace(e),ht(e)})),s}finally{l&&je()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ht(new te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(l(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var n=0;n<t.length;++n)if(t.indexOf(e.keyPath[n])===-1)return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==bt){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&_e&&"The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]");var o=this.schema.idxByName,a=this.db._deps.indexedDB;function s(e,t){return a.cmp(e,t)===0}var u=t.reduce(function(t,n){var r=t[0],a=t[1],i=o[n],u=e[n];return[r||i,r||!i?Tt(a,i&&i.multi?function(e){var t=L(e,n);return l(t)&&t.some(function(e){return s(u,e)})}:function(e){return s(u,L(e,n))}):a]},[null,null]),c=u[0],d=u[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,l(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var t=this,r=t.db,o=t.name;this.schema.mappedClass=e,e.prototype instanceof $t&&(e=(function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),t.prototype.table=function(){return o},t})(e));for(var a=new Set,i=e.prototype;i;i=u(i))Object.getOwnPropertyNames(i).forEach(function(e){return a.add(e)});var l=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(!a.has(r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),e},e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[i]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.update=function(e,t){if(typeof e=="object"&&!l(e)){var n=L(e,this.schema.primKey.keyPath);return n===void 0?ht(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}else return this.where(":id").equals(e).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:t!=null?[t]:null})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Dt})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),a=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(l){var s=[],u=[];e.forEach(function(e,n){var r=e.key,o=e.changes,i=l[n];if(i){for(var c=0,d=Object.keys(o);c<d.length;c++){var m=d[c],p=o[m];if(m===t.schema.primKey.keyPath){if(Pt(p,r)!==0)throw new te.Constraint("Cannot update primary key in bulkUpdate()")}else E(i,m,p)}a.push(n),s.push(r),u.push(i)}});var c=s.length;return n.mutate({trans:i,type:"put",keys:s,values:u,updates:{keys:r,changeSpecs:o}}).then(function(e){var n=e.numFailures,r=e.failures;if(n===0)return c;for(var o=0,i=Object.keys(r);o<i.length;o++){var l=i[o],s=a[Number(l)];if(s!=null){var u=r[l];delete r[l],r[s]=u}}throw new J("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)})})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,o=e.lastResult,a=e.failures;if(r===0)return o;throw new J("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),a)})},e})();function Ot(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return t[n].subscribe.apply(null,a),e}else if(typeof n=="string")return t[n]};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return n;function a(e,r,o){if(typeof e=="object")return s(e);r||(r=me),o||(o=ae);var a={subscribers:[],fire:o,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}function s(e){i(e).forEach(function(t){var n=e[t];if(l(n))a(t,e[t][0],e[t][1]);else if(n==="asap")var r=a(t,ie,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){S(function(){e.apply(null,t)})})});else throw new te.InvalidArgument("Invalid event config")})}}function Bt(e,t){return f(t).from({prototype:e}),t}function Wt(e){return Bt(Ft.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ot(null,{creating:[ue,ae],reading:[le,ie],updating:[de,ae],deleting:[ce,ae]})})}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=Tt(e.filter,t)}function Vt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Tt(r(),t())}:t,e.justLimit=n&&!r}function Ht(e,t){e.isMatch=Tt(e.isMatch,t)}function Gt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function zt(e,t,n){var r=Gt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){var o=e.replayFilter?Tt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},i=function(e,n,r){if(!o||o(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var i=n.primaryKey,l=""+i;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(i)),d(a,l)||(a[l]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),Kt(zt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}else return Kt(zt(e,r,n),Tt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Kt(e,t,n,r){var o=r?function(e,t,o){return n(r(e),t,o)}:n,a=Ze(o);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};(!t||t(e,function(e){return n=e},function(t){e.stop(t),n=ae},function(t){e.fail(t),n=ae}))&&a(e.value,e,function(e){return n=e}),n()})})}var Qt=Symbol(),Xt=(function(){function e(e){Object.assign(this,e)}return e.prototype.execute=function(e){var t,n=(t=this.replacePrefix)===null||t===void 0?void 0:t[0];return n&&typeof e=="string"&&e.startsWith(n)?this.replacePrefix[1]+e.substring(n.length):e},e})(),Yt=(function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Tt(t.algorithm,e)},e.prototype._iterate=function(e,t){return jt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(qt(n,!0))return r.count({trans:e,query:{index:Gt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var o=0;return jt(n,function(){return++o,!1},e,r).then(function(){return o})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var i=this._ctx.dir==="next"?1:-1;function l(e,t){var n=a(e,o),r=a(t,o);return n<r?-i:n>r?i:0}return this.toArray(function(e){return e.sort(l)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if(n.dir==="next"&&qt(n,!0)&&n.limit>0){var r=n.valueMapper,o=Gt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}else{var a=[];return jt(n,function(e){return a.push(e)},e,n.table.core).then(function(){return a})}},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,qt(t)?Vt(t,function(){var t=e;return function(e,n){return t===0?!0:t===1?(--t,!1):(n(function(){e.advance(t),t=0}),!1)}}):Vt(t,function(){var t=e;return function(){return--t<0}}),this)},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Ut(this._ctx,function(n,r,o){return e(n.value)?(r(o),t):!0}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Ut(this._ctx,function(t){return e(t.value)}),Ht(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&qt(t,!0)&&t.limit>0)return this._read(function(e){var n=Gt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){var t=e.result;return t}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,function(e){var t=e.primaryKey.toString(),r=d(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o;if(typeof e=="function")o=e;else{var a=i(e),l=a.length;o=function(t){for(var n=!1,r=0;r<l;++r){var o=a[r],i=e[o],s=L(t,o);i instanceof Xt?(E(t,o,i.execute(s)),n=!0):s!==i&&(E(t,o,i),n=!0)}return n}}var s=n.table.core,u=s.schema.primaryKey,c=u.outbound,d=u.extractKey,m=t.db._options.modifyChunkSize||200,p=[],_=0,f=[],g=function(e,t){var n=t.failures,r=t.numFailures;_+=e-r;for(var o=0,a=i(n);o<a.length;o++){var l=a[o];p.push(n[l])}};return t.clone().primaryKeys().then(function(t){var a=function(i){var l=Math.min(m,t.length-i);return s.getMany({trans:r,keys:t.slice(i,i+l),cache:"immutable"}).then(function(u){for(var p=[],_=[],f=c?[]:null,h=[],y=0;y<l;++y){var C=u[y],b={value:w(C),primKey:t[i+y]};o.call(b,b.value,b)!==!1&&(b.value==null?h.push(t[i+y]):!c&&Pt(d(C),d(b.value))!==0?(h.push(t[i+y]),p.push(b.value)):(_.push(b.value),c&&f.push(t[i+y])))}var v=qt(n)&&n.limit===1/0&&(typeof e!="function"||e===Jt)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then(function(e){for(var t in e.failures)h.splice(parseInt(t),1);g(p.length,e)})).then(function(){return(_.length>0||v&&typeof e=="object")&&s.mutate({trans:r,type:"put",keys:f,values:_,criteria:v,changeSpec:typeof e!="function"&&e}).then(function(e){return g(_.length,e)})}).then(function(){return(h.length>0||v&&e===Jt)&&s.mutate({trans:r,type:"delete",keys:h,criteria:v}).then(function(e){return g(h.length,e)})}).then(function(){return t.length>i+l&&a(i+m)})})};return a(0).then(function(){if(p.length>0)throw new Y("Error modifying one or more objects",p,_,f);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Y("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})}):this.modify(Jt)},e})(),Jt=function(e,t){return t.value=null};function Zt(e){return Bt(Yt.prototype,function(n,r){this.db=e;var t=Dt,o=null;if(r)try{t=r()}catch(e){o=e}var a=n._ctx,i=a.table,l=i.hook.reading.fire;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:l!==ie?l:null}})}function en(e,t){return e<t?-1:e===t?0:1}function tn(e,t){return e>t?-1:e===t?0:1}function nn(e,t,n){var r=e instanceof dn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function rn(e){return new e.Collection(e,function(){return cn("")}).limit(0)}function on(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function an(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ln(e,t,n,r,o,a){for(var i=Math.min(e.length,r.length),l=-1,s=0;s<i;++s){var u=t[s];if(u!==r[s])return o(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;o(e[s],u)<0&&(l=s)}return i<r.length&&a==="next"?e+n.substr(e.length):i<e.length&&a==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function sn(e,t,n,r){var o,a,i,l,s,u,c,d=n.length;if(!n.every(function(e){return typeof e=="string"}))return nn(e,Rt);function m(e){o=on(e),a=an(e),i=e==="next"?en:tn;var t=n.map(function(e){return{lower:a(e),upper:o(e)}}).sort(function(e,t){return i(e.lower,t.lower)});l=t.map(function(e){return e.upper}),s=t.map(function(e){return e.lower}),u=e,c=e==="next"?"":r}m("next");var p=new e.Collection(e,function(){return un(l[0],s[d-1]+r)});p._ondirectionchange=function(e){m(e)};var _=0;return p._addAlgorithm(function(e,n,r){var o=e.key;if(typeof o!="string")return!1;var m=a(o);if(t(m,s,_))return!0;for(var p=null,f=_;f<d;++f){var g=ln(o,m,l[f],s[f],i,u);g===null&&p===null?_=f+1:(p===null||i(p,g)>0)&&(p=g)}return n(p!==null?function(){e.continue(p+c)}:r),!1}),p}function un(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function cn(e){return{type:1,lower:e,upper:e}}var dn=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(n||r)&&!(n&&r)?rn(this):new this.Collection(this,function(){return un(e,t,!n,!r)})}catch(e){return nn(this,St)}},e.prototype.equals=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return cn(e)})},e.prototype.above=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!1)})},e.prototype.below=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e)})},e.prototype.startsWith=function(e){return typeof e!="string"?nn(this,Rt):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):sn(this,function(e,t){return e.indexOf(t[0])===0},[e],bt)},e.prototype.equalsIgnoreCase=function(e){return sn(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.indexOf(e)!==-1},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.some(function(t){return e.indexOf(t)===0})},e,bt)},e.prototype.anyOf=function(){var e=this,t=V.apply(U,arguments),n=this._cmp;try{t.sort(n)}catch(e){return nn(this,St)}if(t.length===0)return rn(this);var r=new this.Collection(this,function(){return un(t[0],t[t.length-1])});r._ondirectionchange=function(r){n=r==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(e,r,a){for(var i=e.key;n(i,t[o])>0;)if(++o,o===t.length)return r(a),!1;return n(i,t[o])===0?!0:(r(function(){e.continue(t[o])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[vt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=V.apply(U,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return nn(this,St)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[vt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,a=this._descending,i=this._min,l=this._max;if(e.length===0)return rn(this);if(!e.every(function(e){return e[0]!==void 0&&e[1]!==void 0&&o(e[0],e[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var s=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;function c(e,t){for(var n=0,o=e.length;n<o;++n){var a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=i(a[0],t[0]),a[1]=l(a[1],t[1]);break}}return n===o&&e.push(t),e}var d=o;function m(e,t){return d(e[0],t[0])}var p;try{p=e.reduce(c,[]),p.sort(m)}catch(e){return nn(this,St)}var _=0,f=u?function(e){return o(e,p[_][1])>0}:function(e){return o(e,p[_][1])>=0},g=s?function(e){return a(e,p[_][0])>0}:function(e){return a(e,p[_][0])>=0};function h(e){return!f(e)&&!g(e)}var y=f,C=new this.Collection(this,function(){return un(p[0][0],p[p.length-1][1],!s,!u)});return C._ondirectionchange=function(e){e==="next"?(y=f,d=o):(y=g,d=a),p.sort(m)},C._addAlgorithm(function(e,t,r){for(var a=e.key;y(a);)if(++_,_===p.length)return t(r),!1;return h(a)?!0:(n._cmp(a,p[_][1])===0||n._cmp(a,p[_][0])===0||t(function(){d===o?e.continue(p[_][0]):e.continue(p[_][1])}),!1)}),C},e.prototype.startsWithAnyOf=function(){var e=V.apply(U,arguments);return e.every(function(e){return typeof e=="string"})?e.length===0?rn(this):this.inAnyRange(e.map(function(e){return[e,e+bt]})):nn(this,"startsWithAnyOf() only works with strings")},e})();function mn(e){return Bt(dn.prototype,function(n,r,o){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o},this._cmp=this._ascending=Pt,this._descending=function(e,t){return Pt(t,e)},this._max=function(e,t){return Pt(e,t)>0?e:t},this._min=function(e,t){return Pt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new te.MissingAPI})}function pn(e){return Ze(function(t){return _n(t),e(t.target.error),!1})}function _n(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",gn="x-storagemutated-1",hn=Ot(null,fn),yn=(function(){function e(){}return e.prototype._lock=function(){return v(!Ne.global),++this._reculock,this._reculock===1&&!Ne.global&&(Ne.lockOwnerFor=this),this},e.prototype._unlock=function(){if(v(!Ne.global),--this._reculock===0)for(Ne.global||(Ne.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_t(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return v(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Ze(function(n){_n(n),t._reject(e.error)}),e.onabort=Ze(function(n){_n(n),t.active&&t._reject(new te.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Ze(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hn.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ht(new te.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new te.TransactionInactive);if(this._locked())return new Fe(function(o,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,a)},Ne])});if(n)return it(function(){var e=new Fe(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new Fe(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Fe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)})()}var o=t._waitingFor;return new Fe(function(e,r){n.then(function(n){return t._waitingQueue.push(Ze(e.bind(null,n)))},function(e){return t._waitingQueue.push(Ze(r.bind(null,e)))}).finally(function(){t._waitingFor===o&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(d(t,e))return t[e];var n=this.schema[e];if(!n)throw new te.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e})();function Cn(e){return Bt(yn.prototype,function(n,r,o,a,i){var t=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Ot(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Fe(function(e,n){t._resolve=e,t._reject=n}),this._completion.then(function(){t.active=!1,t.on.complete.fire()},function(e){var n=t.active;return t.active=!1,t.on.error.fire(e),t.parent?t.parent._reject(e):n&&t.idbtrans&&t.idbtrans.abort(),ht(e)})})}function bn(e,t,n,r,o,a,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+vn(t)}}function vn(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Sn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:R(n,function(e){return[e.name,e]})}}function Rn(e){return e.length===1?e[0]:e}var Ln=function(e){try{return e.only([[]]),Ln=function(){return[[]]},[[]]}catch(e){return Ln=function(){return bt},bt}};function En(e){return e==null?function(){}:typeof e=="string"?kn(e):function(t){return L(t,e)}}function kn(e){var t=e.split(".");return t.length===1?function(t){return t[e]}:function(t){return L(t,e)}}function In(e){return[].slice.call(e)}var Tn=0;function Dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function xn(e,t,n){function r(e,t){var n=In(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=l(t),o=t==null,a={},i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:En(t)},indexes:In(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,i=l(o),s={name:t,compound:i,keyPath:o,unique:n,multiEntry:r,extractKey:En(o)};return a[Dn(o)]=s,s}),getIndexByKeyPath:function(e){return a[Dn(e)]}};return a[":id"]=i.primaryKey,t!=null&&(a[Dn(t)]=i.primaryKey),i})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen,a=e.upperOpen,i=n===void 0?r===void 0?null:t.upperBound(r,!!a):r===void 0?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!a);return i}function a(e){var t=e.name;function n(e){var n=e.trans,r=e.type,a=e.keys,i=e.values,l=e.range;return new Promise(function(e,s){e=Ze(e);var u=n.objectStore(t),c=u.keyPath==null,d=r==="put"||r==="add";if(!d&&r!=="delete"&&r!=="deleteRange")throw new Error("Invalid operation type: "+r);var m=(a||i||{length:1}).length;if(a&&i&&a.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(m===0)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p,_=[],f=[],g=0,h=function(e){++g,_n(e)};if(r==="deleteRange"){if(l.type===4)return e({numFailures:g,failures:f,results:[],lastResult:void 0});l.type===3?_.push(p=u.clear()):_.push(p=u.delete(o(l)))}else{var y=d?c?[i,a]:[i,null]:[a,null],C=y[0],b=y[1];if(d)for(var v=0;v<m;++v)_.push(p=b&&b[v]!==void 0?u[r](C[v],b[v]):u[r](C[v])),p.onerror=h;else for(var v=0;v<m;++v)_.push(p=u[r](C[v])),p.onerror=h}var S=function(t){var n=t.target.result;_.forEach(function(e,t){return e.error!=null&&(f[t]=e.error)}),e({numFailures:g,failures:f,results:r==="delete"?a:_.map(function(e){return e.result}),lastResult:n})};p.onerror=function(e){h(e),S(e)},p.onsuccess=S})}function r(e){var n=e.trans,r=e.values,a=e.query,i=e.reverse,l=e.unique;return new Promise(function(e,s){e=Ze(e);var u=a.index,c=a.range,d=n.objectStore(t),m=u.isPrimaryKey?d:d.index(u.name),p=i?l?"prevunique":"prev":l?"nextunique":"next",_=r||!("openKeyCursor"in m)?m.openCursor(o(c),p):m.openKeyCursor(o(c),p);_.onerror=pn(s),_.onsuccess=Ze(function(t){var r=_.result;if(!r){e(null);return}r.___id=++Tn,r.done=!1;var o=r.continue.bind(r),a=r.continuePrimaryKey;a&&(a=a.bind(r));var i=r.advance.bind(r),l=function(){throw new Error("Cursor not started")},u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=l,r.fail=Ze(s),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=Ze(e),_.onerror=pn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}}),n=function(){if(_.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return _.onsuccess=Ze(function(e){_.onsuccess=n,n()}),r.continue=o,r.continuePrimaryKey=a,r.advance=i,n(),t},e(r)},s)})}function a(e){return function(n){return new Promise(function(r,a){r=Ze(r);var i=n.trans,l=n.values,s=n.limit,u=n.query,c=s===1/0?void 0:s,d=u.index,m=u.range,p=i.objectStore(t),_=d.isPrimaryKey?p:p.index(d.name),f=o(m);if(s===0)return r({result:[]});if(e){var g=l?_.getAll(f,c):_.getAllKeys(f,c);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=pn(a)}else{var h=0,y=l||!("openKeyCursor"in _)?_.openCursor(f):_.openKeyCursor(f),C=[];y.onsuccess=function(e){var t=y.result;if(!t)return r({result:C});if(C.push(l?t.value:t.primaryKey),++h===s)return r({result:C});t.continue()},y.onerror=pn(a)}})}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,o){e=Ze(e);for(var a=n.objectStore(t),i=r.length,l=new Array(i),s=0,u=0,c,d=function(t){var n=t.target;(l[n._pos]=n.result)!=null,++u===s&&e(l)},m=pn(o),p=0;p<i;++p){var _=r[p];_!=null&&(c=a.get(r[p]),c._pos=p,c.onsuccess=d,c.onerror=m,++s)}s===0&&e(l)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,o){e=Ze(e);var a=n.objectStore(t),i=a.get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=pn(o)})},query:a(u),openCursor:r,count:function(e){var n=e.query,r=e.trans,a=n.index,i=n.range;return new Promise(function(e,n){var l=r.objectStore(t),s=a.isPrimaryKey?l:l.index(a.name),u=o(i),c=u?s.count(u):s.count();c.onsuccess=Ze(function(t){return e(t.target.result)}),c.onerror=pn(n)})}}}var i=r(e,n),s=i.schema,u=i.hasGetAll,c=s.tables.map(function(e){return a(e)}),d={};return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=d[e];if(!t)throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Ln(t),schema:s}}function $n(e,t){return t.reduce(function(e,t){var n=t.create;return r(r({},e),n(e))},e)}function Pn(e,t,n,r){var o=n.IDBKeyRange;n.indexedDB;var a=$n(xn(t,o,r),e.dbcore);return{dbcore:a}}function Nn(e,t){var n=t.db,r=Pn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Mn(e,t,n,r){n.forEach(function(n){var o=r[n];t.forEach(function(t){var r=h(t,n);(!r||"value"in r&&r.value===void 0)&&(t===e.Transaction.prototype||t instanceof e.Transaction?_(t,n,{get:function(){return this.table(n)},set:function(e){p(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))})})}function wn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function An(e,t){return e._cfg.version-t._cfg.version}function Fn(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Sn("$meta",Xn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var l=a._reject.bind(a),s=Ne.transless||Ne;it(function(){if(Ne.trans=a,Ne.transless=s,t===0)i(o).forEach(function(e){Un(n,e,o[e].primKey,o[e].indexes)}),Nn(e,n),Fe.follow(function(){return e.on.populate.fire(a)}).catch(l);else return Nn(e,n),Bn(e,a,t).then(function(t){return Wn(e,t,a,n)}).catch(l)})}function On(e,t){Vn(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=zn(e,e.idbdb,t);Qn(e,e._dbSchema,t);for(var r=qn(n,e._dbSchema),o=function(e){if(e.change.length||e.recreate)return"Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key."),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){_e&&"Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src),Gn(n,t)})},a=0,i=r.change;a<i.length;a++){var l=i[a],s=o(l);if(typeof s=="object")return s.value}}function Bn(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return e!=null?e:n}):Fe.resolve(n)}function Wn(e,t,n,r){var o=[],a=e._versions,l=e._dbSchema=zn(e,e.idbdb,r),s=a.filter(function(e){return e._cfg.version>=t});if(s.length===0)return Fe.resolve();s.forEach(function(a){o.push(function(){var o=l,s=a._cfg.dbschema;Qn(e,o,r),Qn(e,s,r),l=e._dbSchema=s;var u=qn(o,s);u.add.forEach(function(e){Un(r,e[0],e[1].primKey,e[1].indexes)}),u.change.forEach(function(e){if(e.recreate)throw new te.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){return Gn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Gn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=a._cfg.contentUpgrade;if(c&&a._cfg.version>t){Nn(e,r),n._memoizedTables={};var d=I(s);u.del.forEach(function(e){d[e]=o[e]}),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],i(d),d),n.schema=d;var m=H(c);m&&lt();var p,_=Fe.follow(function(){if(p=c(n),p&&m){var e=st.bind(null,null);p.then(e,e)}});return p&&typeof p.then=="function"?Fe.resolve(p):_.then(function(){return p})}}),o.push(function(t){var r=a._cfg.dbschema;Hn(r,t),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===a._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return e!=="$meta"})):t.objectStore("$meta").put(a._cfg.version,"version"))})});function u(){return o.length?Fe.resolve(o.shift()(n.idbtrans)).then(u):Fe.resolve()}return u().then(function(){Vn(l,r)})}function qn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],a=t[r];if(!o)n.add.push([r,a]);else{var i={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto)i.recreate=!0,n.change.push(i);else{var l=o.idxByName,s=a.idxByName,u=void 0;for(u in l)s[u]||i.del.push(u);for(u in s){var c=l[u],d=s[u];c?c.src!==d.src&&i.change.push(d):i.add.push(d)}(i.del.length>0||i.add.length>0||i.change.length>0)&&n.change.push(i)}}}return n}function Un(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Gn(o,e)}),o}function Vn(e,t){i(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Un(t,n,e[n].primKey,e[n].indexes)})}function Hn(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function zn(e,t,n){var r={},o=C(t.objectStoreNames,0);return o.forEach(function(e){for(var t=n.objectStore(e),o=t.keyPath,a=bn(vn(o),o||"",!0,!1,!!t.autoIncrement,o&&typeof o!="string",!0),i=[],l=0;l<t.indexNames.length;++l){var s=t.index(t.indexNames[l]);o=s.keyPath;var u=bn(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&typeof o!="string",!1);i.push(u)}r[e]=Sn(e,a,i)}),r}function jn(e,t,n){e.verno=t.version/10;var r=e._dbSchema=zn(e,t,n);e._storeNames=C(t.objectStoreNames,0),Mn(e,[e._allTables],i(r),r)}function Kn(e,t){var n=zn(e,e.idbdb,t),r=qn(n,e._dbSchema);return!(r.add.length||r.change.some(function(e){return e.add.length||e.change.length}))}function Qn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],l=n.objectStore(i);e._hasGetAll="getAll"in l;for(var s=0;s<l.indexNames.length;++s){var u=l.indexNames[s],c=l.index(u).keyPath,d=typeof c=="string"?c:"["+C(c).join("+")+"]";if(t[i]){var m=t[i].idxByName[d];m&&(m.name=u,delete t[i].idxByName[d],t[i].idxByName[u]=m)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Xn(e){return e.split(",").map(function(e,t){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return bn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),l(r),t===0)})}var Yn=(function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach(function(n){if(e[n]!==null){var r=Xn(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new te.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),t[n]=Sn(n,o,r)}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach(function(e){s(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)}),t._dbSchema=o,wn(t,[t._allTables,t,t.Transaction.prototype]),Mn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=pe(this._cfg.contentUpgrade||ae,e),this},e})();function Jn(e){return Bt(Yn.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new eo(Et,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function er(e){return e&&typeof e.databases=="function"}function tr(e){var t=e.indexedDB,n=e.IDBKeyRange;return er(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==Et})}):Zn(t,n).toCollection().primaryKeys()}function nr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).put({name:t}).catch(ae)}function rr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).delete(t).catch(ae)}function or(e){return it(function(){return Ne.letThrough=!0,e()})}function ar(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)})}var ir;function lr(e){return!("from"in e)}var sr=function(e,t){if(this)s(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new sr;return e&&"d"in e&&s(n,e),n}};m(sr.prototype,(ir={add:function(e){return cr(this,e),this},addKey:function(e){return ur(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return ur(t,e,e)}),this}},ir[B]=function(){return mr(this)},ir));function ur(e,t,n){var r=Pt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(lr(e))return s(e,{from:t,to:n,d:1});var o=e.l,a=e.r;if(Pt(n,e.from)<0)return o?ur(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},pr(e);if(Pt(t,e.to)>0)return a?ur(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},pr(e);Pt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Pt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var i=!e.r;o&&!e.l&&cr(e,o),a&&i&&cr(e,a)}}function cr(e,t){function n(e,t){var r=t.from,o=t.to,a=t.l,i=t.r;ur(e,r,o),a&&n(e,a),i&&n(e,i)}lr(t)||n(e,t)}function dr(e,t){var n=mr(t),r=n.next();if(r.done)return!1;for(var o=r.value,a=mr(e),i=a.next(o.from),l=i.value;!r.done&&!i.done;){if(Pt(l.from,o.to)<=0&&Pt(l.to,o.from)>=0)return!0;Pt(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(i=a.next(o.from)).value}return!1}function mr(e){var t=lr(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Pt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Pt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function pr(e){var t,n,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=o>1?"r":o<-1?"l":"";if(a){var i=a==="r"?"l":"r",l=r({},e),s=e[a];e.from=s.from,e.to=s.to,e[a]=s[a],l[a]=s[i],e[i]=l,l.d=_r(l)}e.d=_r(e)}function _r(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function fr(e,t){return i(t).forEach(function(n){e[n]?cr(e[n],t[n]):e[n]=P(t[n])}),e}function gr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&dr(t[n],e[n])})}var hr={},yr={},Cr=!1;function br(e,t){fr(yr,e),Cr||(Cr=!0,setTimeout(function(){Cr=!1;var e=yr;yr={},vr(e,!1)},0))}function vr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(hr);r<o.length;r++){var a=o[r];Sr(a,e,n,t)}else for(var i in e){var l=/^idb\:\/\/(.*)\/(.*)\//.exec(i);if(l){var s=l[1],u=l[2],a=hr["idb://".concat(s,"/").concat(u)];a&&Sr(a,e,n,t)}}n.forEach(function(e){return e()})}function Sr(e,t,n,r){for(var o=[],a=0,i=Object.entries(e.queries.query);a<i.length;a++){for(var l=i[a],s=l[0],u=l[1],c=[],d=0,m=u;d<m.length;d++){var p=m[d];gr(t,p.obsSet)?p.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(p)}r&&o.push([s,c])}if(r)for(var _=0,f=o;_<f.length;_++){var g=f[_],s=g[0],c=g[1];e.queries.query[s]=c}}function Rr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ht(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(e.verno*10),a=!1;function i(){if(t.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}var l=t.dbReadyResolve,s=null,u=!1,c=function(){return new Fe(function(r,l){if(i(),!n)throw new te.MissingAPI;var d=e.name,m=t.autoSchema||!o?n.open(d):n.open(d,o);if(!m)throw new te.MissingAPI;m.onerror=pn(l),m.onblocked=Ze(e._fireOnBlocked),m.onupgradeneeded=Ze(function(r){if(s=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=_n,s.abort(),m.result.close();var o=n.deleteDatabase(d);o.onsuccess=o.onerror=Ze(function(){l(new te.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{s.onerror=pn(l);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=i<1,e.idbdb=m.result,a&&On(e,s),Fn(e,i/10,s,l)}},l),m.onsuccess=Ze(function(){s=null;var n=e.idbdb=m.result,i=C(n.objectStoreNames);if(i.length>0)try{var l=n.transaction(Rn(i),"readonly");if(t.autoSchema)jn(e,n,l);else if(Qn(e,e._dbSchema,l),!Kn(e,l)&&!a)return n.close(),o=n.version+1,a=!0,r(c());Nn(e,l)}catch(e){}Lt.push(e),n.onversionchange=Ze(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Ze(function(t){e.on("close").fire(t)}),u&&nr(e._deps,d),r()},l)}).catch(function(e){switch(e==null?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,c();break;case"VersionError":if(o>0)return o=0,c();break}return Fe.reject(e)})};return Fe.race([r,(typeof navigator=="undefined"?Fe.resolve():ar()).then(c)]).then(function(){return i(),t.onReadyBeingFired=[],Fe.resolve(or(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(pe,ae);return t.onReadyBeingFired=[],Fe.resolve(or(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),ht(n)}).finally(function(){t.openComplete=!0,l()}).then(function(){if(u){var t={};e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new sr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new sr(-1/0,[[[]]])}),hn(fn).fire(t),vr(t,!0)}return e})}function Lr(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=a(t),o=a(n);function a(e){return function(t){var n=e(t),a=n.value;return n.done?a:!a||typeof a.then!="function"?l(a)?Promise.all(a).then(r,o):r(a):a.then(r,o)}}return a(t)()}function Er(e,t,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=D(o);return[e,a,n]}function kr(e,t,n,r,o){return Fe.resolve().then(function(){var a=Ne.transless||Ne,i=e._createTransaction(t,n,e._dbSchema,r);i.explicit=!0;var l={trans:i,transless:a};if(r)i.idbtrans=r.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return kr(e,t,n,null,o)})):ht(r)}var s=H(o);s&&lt();var u,c=Fe.follow(function(){if(u=o.call(i,i),u)if(s){var e=st.bind(null,null);u.then(e,e)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Lr(u))},l);return(u&&typeof u.then=="function"?Fe.resolve(u).then(function(e){return i.active?e:ht(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return u})).then(function(e){return r&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),ht(e)})})}function Ir(e,t,n){for(var r=l(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function Tr(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema,a={},i=[];function l(e,t,n){var o=Dn(e),s=a[o]=a[o]||[],u=e==null?0:typeof e=="string"?1:e.length,c=t>0,d=r(r({},n),{name:c?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:t,keyLength:u,extractKey:En(e),unique:!c&&n.unique});if(s.push(d),d.isPrimaryKey||i.push(d),u>1){var m=u===2?e[0]:e.slice(0,u-1);l(m,t+1,n)}return s.sort(function(e,t){return e.keyTail-t.keyTail}),d}var s=l(o.primaryKey.keyPath,0,o.primaryKey);a[":id"]=[s];for(var u=0,c=o.indexes;u<c.length;u++){var d=c[u];l(d.keyPath,0,d)}function m(e){var t=a[Dn(e)];return t&&t[0]}function p(t,n){return{type:t.type===1?2:t.type,lower:Ir(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Ir(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0}}function _(e){var t=e.query.index;return t.isVirtual?r(r({},e),{query:{index:t.lowLevelIndex,range:p(e.query.range,t.keyTail)}}):e}var f=r(r({},n),{schema:r(r({},o),{primaryKey:s,indexes:i,getIndexByKeyPath:m}),count:function(e){return n.count(_(e))},query:function(e){return n.query(_(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,a=r.isVirtual,i=r.keyLength;if(!a)return n.openCursor(t);function l(n){function r(r){r!=null?n.continue(Ir(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}var a=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Ir(t,e.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return i===1?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}});return a}return n.openCursor(_(t)).then(function(e){return e&&l(e)})}});return f}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Tr};function xr(e,t,n,r){return n=n||{},r=r||"",i(e).forEach(function(o){if(!d(t,o))n[r+o]=void 0;else{var a=e[o],i=t[o];if(typeof a=="object"&&typeof i=="object"&&a&&i){var l=O(a),s=O(i);l!==s?n[r+o]=t[o]:l==="Object"?xr(a,i,n,r+o+"."):a!==i&&(n[r+o]=t[o])}else a!==i&&(n[r+o]=t[o])}}),i(t).forEach(function(o){d(e,o)||(n[r+o]=t[o])}),n}function $r(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Pr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey,i=r(r({},n),{mutate:function(e){var i=Ne.trans,l=i.table(t).hook,s=l.deleting,u=l.creating,c=l.updating;switch(e.type){case"add":if(u.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"put":if(u.fire===ae&&c.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"delete":if(s.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"deleteRange":if(s.fire===ae)break;return i._promise("readwrite",function(){return p(e)},!0)}return n.mutate(e);function m(e){var t=Ne.trans,i=e.keys||$r(a,e);if(!i)throw new Error("Keys missing");return e=e.type==="add"||e.type==="put"?r(r({},e),{keys:i}):r({},e),e.type!=="delete"&&(e.values=o([],e.values,!0)),e.keys&&(e.keys=o([],e.keys,!0)),Nr(n,e,i).then(function(r){var o=i.map(function(n,o){var i=r[o],l={onerror:null,onsuccess:null};if(e.type==="delete")s.fire.call(l,n,i,t);else if(e.type==="add"||i===void 0){var m=u.fire.call(l,n,e.values[o],t);n==null&&m!=null&&(n=m,e.keys[o]=n,a.outbound||E(e.values[o],a.keyPath,n))}else{var p=xr(i,e.values[o]),_=c.fire.call(l,p,n,i,t);if(_){var f=e.values[o];Object.keys(_).forEach(function(e){d(f,e)?f[e]=_[e]:E(f,e,_[e])})}}return l});return n.mutate(e).then(function(t){for(var n=t.failures,a=t.results,l=t.numFailures,s=t.lastResult,u=0;u<i.length;++u){var c=a?a[u]:i[u],d=o[u];c==null?d.onerror&&d.onerror(n[u]):d.onsuccess&&d.onsuccess(e.type==="put"&&r[u]?e.values[u]:c)}return{failures:n,results:a,numFailures:l,lastResult:s}}).catch(function(e){return o.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function p(e){return _(e.trans,e.range,1e4)}function _(e,t,o){return n.query({trans:e,values:!1,query:{index:a,range:t},limit:o}).then(function(n){var a=n.result;return m({type:"delete",keys:a,trans:e}).then(function(n){return n.numFailures>0?Promise.reject(n.failures[0]):a.length<o?{failures:[],numFailures:0,lastResult:void 0}:_(e,r(r({},t),{lower:a[a.length-1],lowerOpen:!0}),o)})})}}});return i}})}};function Nr(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Mr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)Pt(t.keys[o],e[a])===0&&(r.push(n?w(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch(e){return null}}var wr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Mr(e.keys,e.trans._cache,e.cache==="clone");return t?Fe.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:e.cache==="clone"?w(t):t},t})},mutate:function(e){return e.type!=="add"&&(e.trans._cache=null),n.mutate(e)}})}}}};function Ar(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Fr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Or={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new sr(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,n,r){if(Ne.subscr&&n!=="readonly")throw new te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return e.transaction(t,n,r)},table:function(o){var a=e.table(o),s=a.schema,u=s.primaryKey,c=u.extractKey,d=u.outbound,m=r(r({},a),{mutate:function(e){var r=e.trans,i=e.mutatedParts||(e.mutatedParts={}),c=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return i[n]||(i[n]=new sr)},d=c(""),m=c(":dels"),p=e.type,_=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[$r(u,e).filter(function(e){return e}),e.values]:[],f=_[0],g=_[1],h=e.trans._cache;if(l(f)){d.addKeys(f);var y=p==="delete"||f.length===g.length?Mr(f,h):null;y||m.addKeys(f),(y||g)&&Br(c,s,y,g)}else if(f){var C={from:f.lower,to:f.upper};m.add(C),d.add(C)}else d.add(n),m.add(n),s.indexes.forEach(function(e){return c(e.name).add(n)});return a.mutate(e).then(function(t){return f&&(e.type==="add"||e.type==="put")&&d.addKeys(t.results),r.mutatedParts=fr(r.mutatedParts||{},i),t})}}),p=function(t){var n,r,o=t.query,a=o.index,i=o.range;return[a,new sr((n=i.lower)!==null&&n!==void 0?n:e.MIN_KEY,(r=i.upper)!==null&&r!==void 0?r:e.MAX_KEY)]},_={get:function(e){return[u,new sr(e.key)]},getMany:function(e){return[u,new sr().addKeys(e.keys)]},count:p,query:p,openCursor:p};return i(_).forEach(function(e){m[e]=function(i){var l=Ne.subscr,s=!!l,u=Ar(Ne,a)&&Fr(e,i),m=u?i.obsSet={}:l;if(s){var p=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return m[n]||(m[n]=new sr)},f=p(""),g=p(":dels"),h=_[e](i),y=h[0],C=h[1];if(e==="query"&&y.isPrimaryKey&&!i.values?g.add(C):p(y.name||"").add(C),!y.isPrimaryKey)if(e==="count")g.add(n);else{var b=e==="query"&&d&&i.values&&a.query(r(r({},i),{values:!1}));return a[e].apply(this,arguments).then(function(t){if(e==="query"){if(d&&i.values)return b.then(function(e){var n=e.result;return f.addKeys(n),t});var n=i.values?t.result.map(c):t.result;i.values?f.addKeys(n):g.addKeys(n)}else if(e==="openCursor"){var r=t,o=i.values;return r&&Object.create(r,{key:{get:function(){return g.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return g.addKey(e),e}},value:{get:function(){return o&&f.addKey(r.primaryKey),r.value}}})}return t})}}return a[e].apply(this,arguments)}}),m}})}};function Br(e,t,n,r){function o(t){var o=e(t.name||"");function a(e){return e!=null?t.extractKey(e):null}var i=function(e){return t.multiEntry&&l(e)?e.forEach(function(e){return o.addKey(e)}):o.addKey(e)};(n||r).forEach(function(e,t){var o=n&&a(n[t]),l=r&&a(r[t]);Pt(o,l)!==0&&(o!=null&&i(o),l!=null&&i(l))})}t.indexes.forEach(o)}function Wr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===o)return null;var a=r({},t);return l(a.keys)&&(a.keys=a.keys.filter(function(e,t){return!(t in n.failures)})),"values"in a&&l(a.values)&&(a.values=a.values.filter(function(e,t){return!(t in n.failures)})),a}function qr(e,t){return t.lower===void 0?!0:t.lowerOpen?Pt(e,t.lower)>0:Pt(e,t.lower)>=0}function Ur(e,t){return t.upper===void 0?!0:t.upperOpen?Pt(e,t.upper)<0:Pt(e,t.upper)<=0}function Vr(e,t){return qr(e,t)&&Ur(e,t)}function Hr(e,t,n,r,o,a){if(!n||n.length===0)return e;var i=t.query.index,s=i.multiEntry,u=t.query.range,c=r.schema.primaryKey,d=c.extractKey,m=i.extractKey,p=(i.lowLevelIndex||i).extractKey,_=n.reduce(function(e,n){var r=e,o=n.type==="add"||n.type==="put"?n.values.filter(function(e){var t=m(e);return s&&l(t)?t.some(function(e){return Vr(e,u)}):Vr(t,u)}).map(function(e){return e=w(e),a&&Object.freeze(e),e}):[];switch(n.type){case"add":r=e.concat(t.values?o:o.map(function(e){return d(e)}));break;case"put":var i=new sr().addKeys(n.values.map(function(e){return d(e)}));r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),i)}).concat(t.values?o:o.map(function(e){return d(e)}));break;case"delete":var c=new sr().addKeys(n.keys);r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),c)});break;case"deleteRange":var p=n.range;r=e.filter(function(e){return!Vr(d(e),p)});break}return r},e);return _===e?e:(_.sort(function(e,t){return Pt(p(e),p(t))||Pt(d(e),d(t))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(o.dirty=!0)),a?Object.freeze(_):_)}function Gr(e,t){return Pt(e.lower,t.lower)===0&&Pt(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function zr(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return o}function jr(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return o}function Kr(e,t){return zr(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&jr(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Qr(e,t,n,r){var o=hr["idb://".concat(e,"/").concat(t)];if(!o)return[];var a=o.queries[n];if(!a)return[null,!1,o,null];var i=r.query?r.query.index.name:null,l=a[i||""];if(!l)return[null,!1,o,null];switch(n){case"query":var s=l.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Gr(e.req.query.range,r.query.range)});if(s)return[s,!0,o,l];var u=l.find(function(e){var t="limit"in e.req?e.req.limit:1/0;return t>=r.limit&&(r.values?e.req.values:!0)&&Kr(e.req.query.range,r.query.range)});return[u,!1,o,l];case"count":var c=l.find(function(e){return Gr(e.req.query.range,r.query.range)});return[c,!!c,o,l]}}function Xr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&Yr(e,t)})}function Yr(e,t){setTimeout(function(){e.subscribers.size===0&&q(t,e)},3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=r(r({},e),{transaction:function(n,r,o){var a=e.transaction(n,r,o);if(r==="readwrite"){var i=new AbortController,l=i.signal,s=function(o){return function(){if(i.abort(),r==="readwrite"){for(var l=new Set,s=0,u=n;s<u.length;s++){var c=u[s],d=hr["idb://".concat(t,"/").concat(c)];if(d){var m=e.table(c),p=d.optimisticOps.filter(function(e){return e.trans===a});if(a._explicit&&o&&a.mutatedParts)for(var _=0,f=Object.values(d.queries.query);_<f.length;_++)for(var g=f[_],h=0,y=g.slice();h<y.length;h++){var C=y[h];gr(C.obsSet,a.mutatedParts)&&(q(g,C),C.subscribers.forEach(function(e){return l.add(e)}))}else if(p.length>0){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==a});for(var b=0,v=Object.values(d.queries.query);b<v.length;b++)for(var g=v[b],S=0,R=g.slice();S<R.length;S++){var C=R[S];if(C.res!=null&&a.mutatedParts)if(o&&!C.dirty){var L=Object.isFrozen(C.res),E=Hr(C.res,C.req,p,m,C,L);C.dirty?(q(g,C),C.subscribers.forEach(function(e){return l.add(e)})):E!==C.res&&(C.res=E,C.promise=Fe.resolve({result:E}))}else C.dirty&&q(g,C),C.subscribers.forEach(function(e){return l.add(e)})}}}}l.forEach(function(e){return e()})}}};a.addEventListener("abort",s(!1),{signal:l}),a.addEventListener("error",s(!1),{signal:l}),a.addEventListener("complete",s(!0),{signal:l})}return a},table:function(n){var o=e.table(n),a=o.schema.primaryKey,i=r(r({},o),{mutate:function(e){var i=Ne.trans;if(a.outbound||i.db._options.cache==="disabled"||i.explicit)return o.mutate(e);var l=hr["idb://".concat(t,"/").concat(n)];if(!l)return o.mutate(e);var s=o.mutate(e);return(e.type==="add"||e.type==="put")&&(e.values.length>=50||$r(a,e).some(function(e){return e==null}))?s.then(function(t){var n=r(r({},e),{values:e.values.map(function(e,n){var o,i=!((o=a.keyPath)===null||o===void 0)&&o.includes(".")?w(e):r({},e);return E(i,a.keyPath,t.results[n]),i})}),o=Wr(l,n,t);l.optimisticOps.push(o),queueMicrotask(function(){return e.mutatedParts&&br(e.mutatedParts)})}):(l.optimisticOps.push(e),e.mutatedParts&&br(e.mutatedParts),s.then(function(t){if(t.numFailures>0){q(l.optimisticOps,e);var n=Wr(l,e,t);n&&l.optimisticOps.push(n),e.mutatedParts&&br(e.mutatedParts)}}),s.catch(function(){q(l.optimisticOps,e),e.mutatedParts&&br(e.mutatedParts)})),s},query:function(e){var r;if(!Ar(Ne,o)||!Fr("query",e))return o.query(e);var a=((r=Ne.trans)===null||r===void 0?void 0:r.db._options.cache)==="immutable",i=Ne,l=i.requery,s=i.signal,u=Qr(t,n,"query",e),c=u[0],d=u[1],m=u[2],p=u[3];if(c&&d)c.obsSet=e.obsSet;else{var _=o.query(e).then(function(e){var t=e.result;if(c&&(c.res=t),a){for(var n=0,r=t.length;n<r;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=w(t);return e}).catch(function(e){return p&&c&&q(p,c),Promise.reject(e)});c={obsSet:e.obsSet,promise:_,subscribers:new Set,type:"query",req:e,dirty:!1},p?p.push(c):(p=[c],m||(m=hr["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),m.queries.query[e.query.index.name||""]=p)}return Xr(c,p,l,s),c.promise.then(function(t){return{result:Hr(t.result,e,m==null?void 0:m.optimisticOps,o,c,a)}})}});return i}});return n}};function Zr(e,t){return new Proxy(e,{get:function(e,n,r){return n==="db"?t:Reflect.get(e,n,r)}})}var eo=(function(){function e(t,n){var o=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new Fe(function(e){l.dbReadyResolve=e}),l.openCanceller=new Fe(function(e,t){l.cancelOpen=t}),this._state=l,this.name=t,this.on=Ot(this,"populate","blocked","versionchange","close",{ready:[pe,ae]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=o._state;if(e.openComplete)e.dbOpenError||Fe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var a=o;r||t(function e(){a.on.ready.unsubscribe(n),a.on.ready.unsubscribe(e)})}})}}),this.Collection=Zt(this),this.Table=Wt(this),this.Transaction=Cn(this),this.Version=Jn(this),this.WhereClause=mn(this),this.on("versionchange",function(e){e.newVersion>0?"Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade."):"Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request."),o.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?"Dexie.delete('".concat(o.name,"') was blocked"):"Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(e.oldVersion/10)}),this._maxKey=Ln(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new o.Transaction(e,t,n,o._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){o.on("blocked").fire(e),Lt.filter(function(e){return e.name===o.name&&e!==o&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(wr),this.use(Jr),this.use(Or),this.use(Dr),this.use(Pr);var s=new Proxy(this,{get:function(e,t,n){if(t==="_vip")return!0;if(t==="table")return function(e){return Zr(o.table(e),s)};var r=Reflect.get(e,t,n);return r instanceof Ft?Zr(r,s):t==="tables"?r.map(function(e){return Zr(e,s)}):t==="_createTransaction"?function(){var e=r.apply(this,arguments);return Zr(e,s)}:r}});this.vip=s,i.forEach(function(e){return e(o)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new te.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(An),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?e():new Fe(function(e,n){if(t._state.openComplete)return n(new te.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen){n(new te.DatabaseClosed);return}t.open().catch(ae)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:r==null?10:r,name:o}),a.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:n?e.name!==n:!1})),this},e.prototype.open=function(){var e=this;return _t(Pe,function(){return Rr(e)})},e.prototype._close=function(){var e=this._state,t=Lt.indexOf(this);if(t>=0&&Lt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Fe(function(t){e.dbReadyResolve=t}),e.openCanceller=new Fe(function(t,n){e.cancelOpen=n}))},e.prototype.close=function(e){var t=e===void 0?{disableAutoOpen:!0}:e,n=t.disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new te.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new te.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},e.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=arguments.length>0&&typeof arguments[0]!="object",r=this._state;return new Fe(function(o,a){var i=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ze(function(){rr(t._deps,t.name),o()}),n.onerror=pn(a),n.onblocked=t._fireOnBlocked};if(n)throw new te.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Er.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=Ne.trans;(!o||o.db!==this||e.indexOf("!")!==-1)&&(o=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var i,l;try{if(l=t.map(function(e){var t=e instanceof r.Table?e.name:e;if(typeof t!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),e=="r"||e===kt)i=kt;else if(e=="rw"||e==It)i=It;else throw new te.InvalidArgument("Invalid transaction mode: "+e);if(o){if(o.mode===kt&&i===It)if(a)o=null;else throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&l.forEach(function(e){if(o&&o.storeNames.indexOf(e)===-1)if(a)o=null;else throw new te.SubTransaction("Table "+e+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,n){n(e)}):ht(e)}var s=kr.bind(null,this,i,l,o,n);return o?o._promise(i,s,"lock"):Ne.trans?_t(Ne.transless,function(){return r._whenReady(s)}):this._whenReady(s)},e.prototype.table=function(e){if(!d(this._allTables,e))throw new te.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e})(),to=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",no=(function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:n}:e)},e.prototype[to]=function(){return this},e})(),ro;try{ro={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(e){ro={indexedDB:null,IDBKeyRange:null}}function oo(e){var t=!1,n,r=new no(function(r){var o=H(e);function a(t){var n=ze();try{o&&lt();var r=it(e,t);return o&&(r=r.finally(st)),r}finally{n&&je()}}var i=!1,l,s={},u={},c={get closed(){return i},unsubscribe:function(){i||(i=!0,l&&l.abort(),d&&hn.storagemutated.unsubscribe(_))}};r.start&&r.start(c);var d=!1,m=function(){return gt(f)};function p(){return gr(u,s)}var _=function(e){fr(s,e),p()&&m()},f=function(){if(!(i||!ro.indexedDB)){s={};var o={};l&&l.abort(),l=new AbortController;var c={subscr:o,signal:l.signal,requery:m,querier:e,trans:null},p=a(c);Promise.resolve(p).then(function(e){t=!0,n=e,!(i||c.signal.aborted)&&(s={},u=o,!N(u)&&!d&&(hn(fn,_),d=!0),gt(function(){return!i&&r.next&&r.next(e)}))},function(e){t=!1,["DatabaseClosedError","AbortError"].includes(e==null?void 0:e.name)||i||gt(function(){i||r.error&&r.error(e)})})}};return setTimeout(m,0),c});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var ao=eo;m(ao,r(r({},oe),{delete:function(e){var t=new ao(e,{addons:[]});return t.delete()},exists:function(e){return new ao(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return tr(ao.dependencies).then(e)}catch(e){return ht(new te.MissingAPI)}},defineClass:function(){function e(e){s(this,e)}return e},ignoreTransaction:function(e){return Ne.trans?_t(Ne.transless,e):e()},vip:or,async:function(e){return function(){try{var t=Lr(e.apply(this,arguments));return!t||typeof t.then!="function"?Fe.resolve(t):t}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=Lr(e.apply(n,t||[]));return!r||typeof r.then!="function"?Fe.resolve(r):r}catch(e){return ht(e)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(e,t){var n=Fe.resolve(typeof e=="function"?ao.ignoreTransaction(e):e).timeout(t||6e4);return Ne.trans?Ne.trans.waitFor(n):n},Promise:Fe,debug:{get:function(){return _e},set:function(e){fe(e)}},derive:f,extend:s,props:m,override:b,Events:Ot,on:hn,liveQuery:oo,extendObservabilitySet:fr,getByKeyPath:L,setByKeyPath:E,delByKeyPath:k,shallowClone:I,deepClone:w,getObjectDiff:xr,cmp:Pt,asap:S,minKey:vt,addons:[],connections:Lt,errnames:Z,dependencies:ro,cache:hr,semVer:Ct,version:Ct.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),ao.maxKey=Ln(ao.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(hn(fn,function(e){if(!lo){var t;t=new CustomEvent(gn,{detail:e}),lo=!0,dispatchEvent(t),lo=!1}}),addEventListener(gn,function(e){var t=e.detail;lo||io(t)}));function io(e){var t=lo;try{lo=!0,hn.storagemutated.fire(e),vr(e,!0)}finally{lo=t}}var lo=!1,so,uo=function(){};typeof BroadcastChannel!="undefined"&&(uo=function(){so=new BroadcastChannel(gn),so.onmessage=function(e){return e.data&&io(e.data)}},uo(),typeof so.unref=="function"&&so.unref(),hn(fn,function(e){lo||so.postMessage(e)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(e){if(!eo.disableBfCache&&e.persisted){so==null||so.close();for(var t=0,n=Lt;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!eo.disableBfCache&&e.persisted&&(uo(),io({all:new sr(-1/0,[[]])}))}));function co(e,t){return new Xt({replacePrefix:[e,t]})}Fe.rejectionMapper=re,fe(_e);var mo=Object.freeze({__proto__:null,Dexie:eo,liveQuery:oo,Entity:$t,cmp:Pt,PropModSymbol:Qt,PropModification:Xt,replacePrefix:co,default:eo,RangeSet:sr,mergeRanges:cr,rangesOverlap:dr});return r(eo,mo,{default:eo}),eo}))}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(t,n,r,o,a,i){a.exports=n("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("remove-accents-0.4.2",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var e={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u1EA4:"A",\u1EAE:"A",\u1EB2:"A",\u1EB4:"A",\u1EB6:"A",\u00C6:"AE",\u1EA6:"A",\u1EB0:"A",\u0202:"A",\u00C7:"C",\u1E08:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u1EBE:"E",\u1E16:"E",\u1EC0:"E",\u1E14:"E",\u1E1C:"E",\u0206:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u1E2E:"I",\u020A:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u1ED0:"O",\u1E4C:"O",\u1E52:"O",\u020E:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u1EA5:"a",\u1EAF:"a",\u1EB3:"a",\u1EB5:"a",\u1EB7:"a",\u00E6:"ae",\u1EA7:"a",\u1EB1:"a",\u0203:"a",\u00E7:"c",\u1E09:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u1EBF:"e",\u1E17:"e",\u1EC1:"e",\u1E15:"e",\u1E1D:"e",\u0207:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u1E2F:"i",\u020B:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u1ED1:"o",\u1E4D:"o",\u1E53:"o",\u020F:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00FD:"y",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",C\u0306:"C",c\u0306:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u01F4:"G",\u011D:"g",\u01F5:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u1E2A:"H",\u1E2B:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u1E30:"K",\u1E31:"k",K\u0306:"K",k\u0306:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"l",\u0142:"l",\u1E3E:"M",\u1E3F:"m",M\u0306:"M",m\u0306:"m",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"n",N\u0306:"N",n\u0306:"n",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",P\u0306:"P",p\u0306:"p",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",R\u0306:"R",r\u0306:"r",\u0212:"R",\u0213:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u0218:"S",\u0219:"s",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u021B:"t",\u021A:"T",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",T\u0306:"T",t\u0306:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0216:"U",\u0217:"u",V\u0306:"V",v\u0306:"v",\u0174:"W",\u0175:"w",\u1E82:"W",\u1E83:"w",X\u0306:"X",x\u0306:"x",\u0176:"Y",\u0177:"y",\u0178:"Y",Y\u0306:"Y",y\u0306:"y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u017F:"s",\u0192:"f",\u01A0:"O",\u01A1:"o",\u01AF:"U",\u01B0:"u",\u01CD:"A",\u01CE:"a",\u01CF:"I",\u01D0:"i",\u01D1:"O",\u01D2:"o",\u01D3:"U",\u01D4:"u",\u01D5:"U",\u01D6:"u",\u01D7:"U",\u01D8:"u",\u01D9:"U",\u01DA:"u",\u01DB:"U",\u01DC:"u",\u1EE8:"U",\u1EE9:"u",\u1E78:"U",\u1E79:"u",\u01FA:"A",\u01FB:"a",\u01FC:"AE",\u01FD:"ae",\u01FE:"O",\u01FF:"o",\u00DE:"TH",\u00FE:"th",\u1E54:"P",\u1E55:"p",\u1E64:"S",\u1E65:"s",X\u0301:"X",x\u0301:"x",\u0403:"\u0413",\u0453:"\u0433",\u040C:"\u041A",\u045C:"\u043A",A\u030B:"A",a\u030B:"a",E\u030B:"E",e\u030B:"e",I\u030B:"I",i\u030B:"i",\u01F8:"N",\u01F9:"n",\u1ED2:"O",\u1ED3:"o",\u1E50:"O",\u1E51:"o",\u1EEA:"U",\u1EEB:"u",\u1E80:"W",\u1E81:"w",\u1EF2:"Y",\u1EF3:"y",\u0200:"A",\u0201:"a",\u0204:"E",\u0205:"e",\u0208:"I",\u0209:"i",\u020C:"O",\u020D:"o",\u0210:"R",\u0211:"r",\u0214:"U",\u0215:"u",B\u030C:"B",b\u030C:"b",\u010C\u0323:"C",\u010D\u0323:"c",\u00CA\u030C:"E",\u00EA\u030C:"e",F\u030C:"F",f\u030C:"f",\u01E6:"G",\u01E7:"g",\u021E:"H",\u021F:"h",J\u030C:"J",\u01F0:"j",\u01E8:"K",\u01E9:"k",M\u030C:"M",m\u030C:"m",P\u030C:"P",p\u030C:"p",Q\u030C:"Q",q\u030C:"q",\u0158\u0329:"R",\u0159\u0329:"r",\u1E66:"S",\u1E67:"s",V\u030C:"V",v\u030C:"v",W\u030C:"W",w\u030C:"w",X\u030C:"X",x\u030C:"x",Y\u030C:"Y",y\u030C:"y",A\u0327:"A",a\u0327:"a",B\u0327:"B",b\u0327:"b",\u1E10:"D",\u1E11:"d",\u0228:"E",\u0229:"e",\u0190\u0327:"E",\u025B\u0327:"e",\u1E28:"H",\u1E29:"h",I\u0327:"I",i\u0327:"i",\u0197\u0327:"I",\u0268\u0327:"i",M\u0327:"M",m\u0327:"m",O\u0327:"O",o\u0327:"o",Q\u0327:"Q",q\u0327:"q",U\u0327:"U",u\u0327:"u",X\u0327:"X",x\u0327:"x",Z\u0327:"Z",z\u0327:"z"},t=Object.keys(e).join("|"),n=new RegExp(t,"g"),r=new RegExp(t,""),o=function(t){return t.replace(n,function(t){return e[t]})},a=function(e){return!!e.match(r)};l.exports=o,l.exports.has=a,l.exports.remove=o}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("remove-accents",["remove-accents-0.4.2"],(function(t,n,r,o,a,i){a.exports=n("remove-accents-0.4.2")()}),null);/*FB_PKG_DELIM*/
__d("BizInboxUnifiedThreadsQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"before"},t={defaultValue:[],kind:"LocalArgument",name:"businessAssets"},n={defaultValue:!1,kind:"LocalArgument",name:"getShouldUnifyConfigQueries"},r={defaultValue:480,kind:"LocalArgument",name:"height"},o={defaultValue:null,kind:"LocalArgument",name:"ig_params"},a={defaultValue:!0,kind:"LocalArgument",name:"includeDeliveryReceipts"},i={defaultValue:!1,kind:"LocalArgument",name:"includeSeqID"},l={defaultValue:!1,kind:"LocalArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},s={defaultValue:!1,kind:"LocalArgument",name:"isWorkUser"},u={defaultValue:!1,kind:"LocalArgument",name:"is_work_teamwork_not_putting_muted_in_unreads"},c={defaultValue:null,kind:"LocalArgument",name:"item_after"},d={defaultValue:null,kind:"LocalArgument",name:"item_limit"},m={defaultValue:!1,kind:"LocalArgument",name:"loadThreadItems"},p={defaultValue:!0,kind:"LocalArgument",name:"loadThreads"},_={defaultValue:!1,kind:"LocalArgument",name:"load_delivery_receipts"},f={defaultValue:!0,kind:"LocalArgument",name:"load_items"},g={defaultValue:!0,kind:"LocalArgument",name:"load_messages"},h={defaultValue:!0,kind:"LocalArgument",name:"load_read_receipts"},y={defaultValue:null,kind:"LocalArgument",name:"message_limit"},C={defaultValue:null,kind:"LocalArgument",name:"msgr_params"},b={defaultValue:null,kind:"LocalArgument",name:"msgr_pending_params"},v={defaultValue:null,kind:"LocalArgument",name:"page_id"},S={defaultValue:null,kind:"LocalArgument",name:"selected_item_id"},R={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipMessage"},L={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipPageQuery"},E={defaultValue:!1,kind:"LocalArgument",name:"shouldUnifyContextCardQueries"},k={defaultValue:null,kind:"LocalArgument",name:"source"},I={defaultValue:!1,kind:"LocalArgument",name:"threadlistViewFieldsOnly"},T={defaultValue:null,kind:"LocalArgument",name:"wa_params"},D={defaultValue:null,kind:"LocalArgument",name:"wa_pending_params"},x={defaultValue:480,kind:"LocalArgument",name:"width"},$={alias:"unused",args:[{kind:"Variable",name:"string",variableName:"source"}],kind:"ScalarField",name:"xfb_returns_zero_make_parameter_used",storageKey:null},P=[{kind:"Variable",name:"ig_params",variableName:"ig_params"},{kind:"Variable",name:"msgr_params",variableName:"msgr_params"},{kind:"Variable",name:"selected_item_id",variableName:"selected_item_id"},{kind:"Variable",name:"wa_params",variableName:"wa_params"}],N={alias:null,args:null,kind:"ScalarField",name:"sync_sequence_id",storageKey:null},M={condition:"includeSeqID",kind:"Condition",passingValue:!0,selections:[N]},w={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},F={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null}],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},B=[{kind:"Literal",name:"last",value:1}],W={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},q=[w],U={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"commerce_message_type",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},z=[G],j={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description",plural:!1,selections:z,storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"native_url",storageKey:null},J=[K,Q,X,Y,{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null}],Z={alias:null,args:null,concreteType:"MessengerGenericXMATemplateExtraFields",kind:"LinkedField",name:"messenger_generic_xma_template_extra_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_pic_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url_fallback",storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"default_cta",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta1",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta2",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta3",plural:!1,selections:J,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_id_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_expiration_timestamp_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_fallback_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_title_text_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_accessibility_text_1",storageKey:null}],storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},te=[{kind:"Literal",name:"height",value:240},{kind:"Literal",name:"width",value:240}],ne={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},re=[ne],oe=[{kind:"Literal",name:"height",value:120},{kind:"Literal",name:"width",value:120}],ae={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},le={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},se=[w,{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"pack",plural:!1,selections:q,storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"frame_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frame_rate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_row",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_column",storageKey:null},{alias:"sprite_image_2x",args:te,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:re,storageKey:"sprite_image(height:240,width:240)"},{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:re,storageKey:"sprite_image(height:120,width:120)"},{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:re,storageKey:"padded_sprite_image(height:120,width:120)"},{alias:"padded_sprite_image_2x",args:te,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:re,storageKey:"padded_sprite_image(height:240,width:240)"},ae,ie,le],ue={kind:"InlineFragment",selections:se,type:"Sticker",abstractKey:null},ce=[ne,ie,le],de={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:null},me={kind:"Literal",name:"sizing",value:"contain-fit"},pe=[me],_e={alias:null,args:pe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(sizing:"contain-fit")'},fe={alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},ge={alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},ye={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[ue,de,_e,fe,ge,he],storageKey:null},Ce={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:z,storageKey:null},be={alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null},ve={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:z,storageKey:null},Se={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},Re={alias:null,args:null,concreteType:"AttachmentProperty",kind:"LinkedField",name:"properties",plural:!0,selections:[Se,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"value",plural:!1,selections:z,storageKey:null}],storageKey:null},Le={alias:"url",args:null,kind:"ScalarField",name:"messenger_dot_com_url",storageKey:null},Ee={alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},ke={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[Q,ae],storageKey:null},Ie={alias:null,args:null,concreteType:"MessagingAttribution",kind:"LinkedField",name:"messaging_attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attribution_id",storageKey:null},O,{alias:null,args:null,kind:"ScalarField",name:"icon_url",storageKey:null}],storageKey:null},Te={alias:"action_link",args:null,kind:"ScalarField",name:"action_url",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"action_open_type",storageKey:null},xe={alias:null,args:null,kind:"ScalarField",name:"preview_title",storageKey:null},$e={alias:null,args:null,kind:"ScalarField",name:"preview_subtitle",storageKey:null},Pe={alias:null,args:null,kind:"ScalarField",name:"target_display",storageKey:null},Ne={alias:null,args:null,kind:"ScalarField",name:"image_url",storageKey:null},Me={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[{kind:"InlineFragment",selections:[w,xe,$e,Pe,Ne],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null},we={alias:"title",args:null,kind:"ScalarField",name:"action_title",storageKey:null},Ae={alias:null,args:null,concreteType:"MessengerCTAUserConfirmation",kind:"LinkedField",name:"user_confirmation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cancel_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"continue_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_title",storageKey:null}],storageKey:null},Fe={alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},Oe={alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null},We={alias:"render_style",args:null,kind:"ScalarField",name:"cta_render_style",storageKey:null},qe={alias:null,args:null,concreteType:"MessengerPlatformWebviewMetadata",kind:"LinkedField",name:"webview_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fallback_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_extensions",storageKey:null},{alias:"webview_height_ratio",args:null,kind:"ScalarField",name:"height_ratio",storageKey:null},{alias:"webview_share_button",args:null,kind:"ScalarField",name:"hide_share_button",storageKey:null}],storageKey:null},Ue={alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},Ve={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},He={alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},Ge={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},ze={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},je={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"form_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_num_screens",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIFormScreenObject",kind:"LinkedField",name:"form_first_screen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_title",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIQuestionObject",kind:"LinkedField",name:"questions",plural:!0,selections:[w,K,Q,Ve,He,Ge,ze,{alias:null,args:null,kind:"ScalarField",name:"mask",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIBusinessPrivacyObject",kind:"LinkedField",name:"business_privacy",plural:!1,selections:[G,ae],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_color_theme",storageKey:null}],type:"MessengerDirectSendCallToActionData",abstractKey:null},Ke={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"feedback_form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackFormScreenObject",kind:"LinkedField",name:"feedback_form_first_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerFeedbackQuestionObject",kind:"LinkedField",name:"feedback_questions",plural:!0,selections:[w,Q,K,{alias:null,args:null,kind:"ScalarField",name:"score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"left_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"right_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score_option",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedBackQuestionFollowup",kind:"LinkedField",name:"follow_up",plural:!1,selections:[K,Ve],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_num_screens",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackBusinessPrivacyObject",kind:"LinkedField",name:"feedback_form_privacy_policy",plural:!1,selections:[G,ee,ae],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_state",storageKey:null}],type:"MessengerFeedbackFormOpenCallToActionData",abstractKey:null},Qe={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[je,Ke],storageKey:null},Xe={alias:null,args:null,kind:"ScalarField",name:"is_high_confidence",storageKey:null},Ye={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[Te,De,Me,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Qe,Xe,Y],storageKey:null},Je={alias:null,args:null,concreteType:"XMALayoutInfo",kind:"LinkedField",name:"xma_layout_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout_type",storageKey:null}],storageKey:null},Ze={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},et={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"listing_type",storageKey:null},{alias:null,args:null,concreteType:"CrisisListingCategoryWrapper",kind:"LinkedField",name:"listing_category",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"offer_image",plural:!1,selections:re,storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"request_image",plural:!1,selections:re,storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:315},{kind:"Literal",name:"width",value:851}],concreteType:"Image",kind:"LinkedField",name:"map_image",plural:!1,selections:re,storageKey:"map_image(height:315,width:851)"}],type:"CrisisListing",abstractKey:null},tt={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},nt={alias:null,args:null,kind:"ScalarField",name:"url_shimhash",storageKey:null},rt={alias:null,args:null,kind:"ScalarField",name:"extension",storageKey:null},ot={alias:null,args:null,kind:"ScalarField",name:"filesize",storageKey:null},at={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},it={alias:"transfer_id",args:null,kind:"ScalarField",name:"id",storageKey:null},lt={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:null},st=[w,{alias:"name",args:null,kind:"ScalarField",name:"short_name",storageKey:null},{alias:"full_name",args:null,kind:"ScalarField",name:"name",storageKey:null},lt,ae],ut={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:st,storageKey:null},ct={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"receiver",plural:!1,selections:st,storageKey:null},dt={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},mt={alias:"actionDatas",args:null,concreteType:"PaymentActivityActionData",kind:"LinkedField",name:"action_datas",plural:!0,selections:[Ze,{alias:"additionalInfo",args:null,concreteType:"PaymentActivityActionDataAdditionalInfo",kind:"LinkedField",name:"additional_info",plural:!0,selections:[Se,dt],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identifier",storageKey:null},{alias:"inputType",args:null,kind:"ScalarField",name:"input_type",storageKey:null},Ge,{alias:null,args:null,kind:"ScalarField",name:"optional",storageKey:null},{alias:"placeholderText",args:null,kind:"ScalarField",name:"placeholder_text",storageKey:null}],storageKey:null},pt={alias:"actionIdentifier",args:null,kind:"ScalarField",name:"action_identifier",storageKey:null},_t={alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},ft={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:z,storageKey:null},gt={kind:"InlineFragment",selections:[{alias:"receiptView",args:null,concreteType:"PaymentReceiptView",kind:"LinkedField",name:"receipt_view",plural:!1,selections:[{alias:"additionalInstruction",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"additional_instruction",plural:!1,selections:z,storageKey:null},w,{alias:"otherParticipant",args:null,concreteType:"PaymentActivityParticipantView",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:"imageUrl",args:null,kind:"ScalarField",name:"image_url",storageKey:null},He,Q],storageKey:null},{alias:null,args:null,concreteType:"PaymentActivityViewSection",kind:"LinkedField",name:"sections",plural:!0,selections:[{alias:"preferredPosition",args:null,kind:"ScalarField",name:"preferred_position",storageKey:null}],storageKey:null},ft],storageKey:null}],type:"P2POpenReceiptActionButton",abstractKey:null},ht={alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},yt={alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},Ct=[ht,yt,{alias:"formattedAmount",args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],bt={alias:"amount",args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:Ct,storageKey:null},vt=[Ze,mt,pt,_t,Q,gt,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[it,ut,ct,bt],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}],St={alias:"componentType",args:null,kind:"ScalarField",name:"component_type",storageKey:null},Rt={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},Lt={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"amount",plural:!1,selections:Ct,storageKey:null},Rt],type:"P2PBubbleAmountComponent",abstractKey:null},Et=[{alias:"dimensionlessCacheKey",args:null,kind:"ScalarField",name:"dimensionless_cache_key",storageKey:null},ie,{alias:"isSilhouette",args:null,kind:"ScalarField",name:"is_silhouette",storageKey:null},{alias:"mimeType",args:null,kind:"ScalarField",name:"mime_type",storageKey:null},O,{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},ne,le],kt={kind:"InlineFragment",selections:[{alias:"aspectRatio",args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Et,storageKey:null}],type:"P2PBubbleImageComponent",abstractKey:null},It={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},Rt,{alias:"facepileUsers",args:null,concreteType:"User",kind:"LinkedField",name:"facepile_users",plural:!0,selections:[w,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:Et,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:Et,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},G],type:"P2PBubbleTextComponent",abstractKey:null},Tt={alias:"iconCurrencyCode",args:null,kind:"ScalarField",name:"icon_currency_code",storageKey:null},Dt={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:vt,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[St,Lt,kt,It],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:vt,storageKey:null},Rt,Tt,G],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:vt,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"},xt={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},$t={kind:"InlineFragment",selections:[xt,ae],type:"User",abstractKey:null},Pt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[ht,{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],storageKey:null},Nt={alias:null,args:null,kind:"ScalarField",name:"transfer_status",storageKey:null},Mt={alias:"completedTime",args:null,kind:"ScalarField",name:"completed_time",storageKey:null},wt={alias:"updatedTime",args:null,kind:"ScalarField",name:"updated_time",storageKey:null},At={alias:"creationTime",args:null,kind:"ScalarField",name:"creation_time",storageKey:null},Ft={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:null},Ot=[Ft],Bt={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"transfer_theme",plural:!1,selections:q,storageKey:null},Wt={alias:null,args:null,kind:"ScalarField",name:"formatted",storageKey:null},qt=[Wt],Ut={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount_fb_discount",plural:!1,selections:qt,storageKey:null},Vt={alias:null,args:null,kind:"ScalarField",name:"funds_availability",storageKey:null},Ht={alias:null,args:null,kind:"ScalarField",name:"group_thread_fbid",storageKey:null},Gt={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},zt={alias:null,args:null,kind:"ScalarField",name:"status_description",storageKey:null},jt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:[yt],storageKey:null},Kt={alias:null,args:null,kind:"ScalarField",name:"memo_text",storageKey:null},Qt=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"P2PSenderReceiver"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[w,O,lt,$t],storageKey:null},Pt,Nt,it,Mt,wt,At,{alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:Ot,storageKey:null},Bt],storageKey:null},Ut,Vt,Ht,{alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[O,Gt,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:Ot,storageKey:null},ae],storageKey:null},w,zt,jt,Kt,Dt],Xt={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:[Wt,yt],storageKey:null},Yt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[ht],storageKey:null},Jt=[O,w,lt,$t],Zt={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:Jt,storageKey:null},en={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:Jt,storageKey:null},tn={alias:null,args:null,kind:"ScalarField",name:"request_status",storageKey:null},nn={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"request_theme",plural:!1,selections:q,storageKey:null},rn={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:Qt,storageKey:null},on={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},an={alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},ln={alias:"message",args:null,kind:"ScalarField",name:"snippet",storageKey:null},sn=[Te,De,Me,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Qe],un={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:sn,storageKey:null},cn={alias:null,args:null,kind:"ScalarField",name:"image_aspect_ratio",storageKey:null},dn={alias:null,args:null,kind:"ScalarField",name:"first_metaline",storageKey:null},mn={alias:null,args:null,kind:"ScalarField",name:"source_name",storageKey:null},pn={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null},_n={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:sn,storageKey:null},fn=[w,{alias:"large_preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:null}],gn={kind:"InlineFragment",selections:fn,type:"MessageImage",abstractKey:null},hn={kind:"InlineFragment",selections:fn,type:"Photo",abstractKey:null},yn={kind:"Literal",name:"media_type",value:"image/gif"},Cn={alias:null,args:[yn],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:'animated_image(media_type:"image/gif")'},bn={alias:"preview_image",args:[{kind:"Literal",name:"height",value:206},yn,{kind:"Literal",name:"width",value:206}],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:'animated_image(height:206,media_type:"image/gif",width:206)'},vn={kind:"InlineFragment",selections:[Cn,bn,{alias:"large_preview",args:[{kind:"Literal",name:"height",value:420},me,{kind:"Literal",name:"width",value:420}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:420,sizing:"contain-fit",width:420)'}],type:"MessageAnimatedImage",abstractKey:null},Sn={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"attribution_app",plural:!1,selections:[w,O,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"square_logo",plural:!1,selections:re,storageKey:null}],storageKey:null},Rn={alias:null,args:null,kind:"ScalarField",name:"attribution_metadata",storageKey:null},Ln=[ie,le,ne],En=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],kn={alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:En,storageKey:null},In={kind:"InlineFragment",selections:[Sn,Rn,tt,he,{alias:"chat_image",args:[{kind:"Literal",name:"height",value:200},me,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:200,sizing:"contain-fit",width:168)'},H,{alias:null,args:null,kind:"ScalarField",name:"video_type",storageKey:null},kn,fe,{alias:"large_image",args:[{kind:"Literal",name:"height",value:640},me,{kind:"Literal",name:"width",value:640}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:640,sizing:"contain-fit",width:640)'},{alias:"inbox_image",args:[{kind:"Literal",name:"height",value:450},me,{kind:"Literal",name:"width",value:450}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:450,sizing:"contain-fit",width:450)'}],type:"MessageVideo",abstractKey:null},Tn={kind:"InlineFragment",selections:[le,ie,w,he],type:"Video",abstractKey:null},Dn=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Gt,cn,Ne,dn,O,mn,pn,_n,un,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[Ze,gn,hn,vn,In,Tn],storageKey:null}],storageKey:null}],xn={kind:"InlineFragment",selections:[{alias:"video_id",args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null},$n={alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},Pn={alias:null,args:null,kind:"ScalarField",name:"latitude",storageKey:null},Nn={alias:null,args:null,kind:"ScalarField",name:"longitude",storageKey:null},Mn=[Pn,Nn],wn={kind:"InlineFragment",selections:[{alias:"live_location_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_expired",storageKey:null},$n,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"Coordinate",kind:"LinkedField",name:"coordinate",plural:!1,selections:Mn,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"location_title",storageKey:null},{alias:null,args:null,concreteType:"LiveLocationDestination",kind:"LinkedField",name:"sender_destination",plural:!1,selections:[Pn,Nn,ee],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stop_reason",storageKey:null}],type:"MessageLiveLocation",abstractKey:null},An={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"kept_by",plural:!1,selections:q,storageKey:null},Fn={alias:null,args:null,kind:"ScalarField",name:"kept_at",storageKey:null},On={alias:null,args:null,kind:"ScalarField",name:"is_keep_disabled",storageKey:null},Bn={alias:null,args:null,kind:"ScalarField",name:"blob_media_type",storageKey:null},Wn=[he,ae,Ft],qn={kind:"InlineFragment",selections:Wn,type:"MessageVideo",abstractKey:null},Un={kind:"InlineFragment",selections:Wn,type:"MessageImage",abstractKey:null},Vn={alias:null,args:null,kind:"ScalarField",name:"montage_container_id",storageKey:null},Hn={alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},Gn={alias:null,args:null,kind:"ScalarField",name:"calendar_sync_type",storageKey:null},zn={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[w,Gn,{alias:null,args:null,concreteType:"ServicesVerticalPageBasedInfo",kind:"LinkedField",name:"services_vertical_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_appointment_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_mbs_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_page_sp_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_zone_name",storageKey:null}],storageKey:null}],storageKey:null},jn={alias:null,args:null,kind:"ScalarField",name:"message_bubble_type",storageKey:null},Kn={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:q,storageKey:null},Qn={alias:null,args:null,kind:"ScalarField",name:"ls_xma_title",storageKey:null},Xn={alias:null,args:null,kind:"ScalarField",name:"ls_xma_subtitle",storageKey:null},Yn={alias:"availability",args:null,kind:"ScalarField",name:"user_availability",storageKey:null},Jn={alias:null,args:null,kind:"ScalarField",name:"request_flow_type",storageKey:null},Zn={alias:null,args:null,kind:"ScalarField",name:"service_general_info",storageKey:null},er={alias:null,args:null,kind:"ScalarField",name:"has_saved_to_calendar",storageKey:null},tr=[w,O,lt],nr={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:tr,storageKey:null},rr={alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},or={alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},ar=[rr,or],ir={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"suggested_time_range",plural:!1,selections:ar,storageKey:null},lr={alias:"duration",args:null,kind:"ScalarField",name:"duration_in_seconds",storageKey:null},sr={alias:null,args:null,kind:"ScalarField",name:"duration_type",storageKey:null},ur=[{kind:"Literal",name:"first",value:1}],cr={alias:null,args:[{kind:"Literal",name:"sizing",value:"cover-fill-cropped"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:'image(sizing:"cover-fill-cropped")'},dr={alias:"price",args:null,kind:"ScalarField",name:"display_price",storageKey:null},mr={alias:null,args:null,kind:"ScalarField",name:"requested_time",storageKey:null},pr={alias:null,args:null,kind:"ScalarField",name:"special_request",storageKey:null},_r={alias:null,args:null,kind:"ScalarField",name:"booking_status_value",storageKey:null},fr={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},gr={alias:null,args:null,kind:"ScalarField",name:"archived_status",storageKey:null},hr={alias:null,args:null,kind:"ScalarField",name:"reminder_bubble_text",storageKey:null},yr={alias:null,args:null,kind:"ScalarField",name:"request_admin_approval_type",storageKey:null},Cr={alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"job_application",plural:!1,selections:q,storageKey:null},br={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[w,xt,lt],storageKey:null},vr={alias:null,args:null,concreteType:"ServicesNativeBookingRequestAdditionalInfoField",kind:"LinkedField",name:"additional_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field_key",storageKey:null},dt,ee],storageKey:null},Sr={alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"consumer_phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},Rr={alias:null,args:null,kind:"ScalarField",name:"recur_message",storageKey:null},Lr={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:q,storageKey:null},Er={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"consumer",plural:!1,selections:q,storageKey:null},kr={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"formatted_available_time_ranges",plural:!0,selections:ar,storageKey:null},Ir={alias:null,args:null,kind:"ScalarField",name:"has_booking_request_created",storageKey:null},Tr={alias:null,args:null,kind:"ScalarField",name:"cta_click_events",storageKey:null},Dr={alias:null,args:null,kind:"ScalarField",name:"cta_texts",storageKey:null},xr={alias:null,args:null,concreteType:"ServicesWWWURL",kind:"LinkedField",name:"www_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_async",storageKey:null},ne],storageKey:null},$r={alias:null,args:null,kind:"ScalarField",name:"render_template",storageKey:null},Pr={alias:null,args:null,kind:"ScalarField",name:"primary_text",storageKey:null},Nr={alias:null,args:null,kind:"ScalarField",name:"visible_on_platforms",storageKey:null},Mr=[w,O],wr=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:Mr,storageKey:null}],Ar={alias:"eventID",args:null,kind:"ScalarField",name:"id",storageKey:null},Fr={alias:"guestStatus",args:null,kind:"ScalarField",name:"viewer_guest_status",storageKey:null},Or={alias:"canViewerJoin",args:null,kind:"ScalarField",name:"can_viewer_join",storageKey:null},Br={alias:"timeString",args:null,kind:"ScalarField",name:"start_time_sentence",storageKey:null},Wr=[O],qr={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"social_context",plural:!1,selections:z,storageKey:null},Ur={alias:"watchStatus",args:null,kind:"ScalarField",name:"viewer_watch_status",storageKey:null},Vr={alias:null,args:null,kind:"ScalarField",name:"connection_style",storageKey:null},Hr={alias:"canViewerWatch",args:null,kind:"ScalarField",name:"can_viewer_watch",storageKey:null},Gr={alias:null,args:[{kind:"Literal",name:"width",value:300}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(width:300)"},zr={alias:null,args:null,kind:"ScalarField",name:"start_timestamp",storageKey:null},jr={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"application_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"artist_names",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"music_title",storageKey:null}],type:"ExternalSong",abstractKey:null},Kr={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"lwa_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lwa_type",storageKey:null}],type:"LightweightAction",abstractKey:null},Qr={alias:"desc",args:null,kind:"ScalarField",name:"description",storageKey:null},Xr={alias:"thumb_url",args:null,kind:"ScalarField",name:"image_url",storageKey:null},Yr={alias:"item_url",args:null,kind:"ScalarField",name:"target_url",storageKey:null},Jr={alias:"source",args:null,kind:"ScalarField",name:"source_name",storageKey:null},Zr={alias:null,args:null,kind:"ScalarField",name:"second_metaline",storageKey:null},eo={alias:null,args:null,kind:"ScalarField",name:"third_metaline",storageKey:null},to={alias:"total_cost",args:null,kind:"ScalarField",name:"formated_price",storageKey:null},no={alias:"merchant_name",args:null,kind:"ScalarField",name:"seller_info",storageKey:null},ro={alias:"raw_amount",args:null,kind:"ScalarField",name:"price_amount",storageKey:null},oo={alias:null,args:null,concreteType:"MessengerCommercePayment",kind:"LinkedField",name:"payment",plural:!1,selections:q,storageKey:null},ao={alias:null,args:null,kind:"ScalarField",name:"price_currency",storageKey:null},io={alias:null,args:null,kind:"ScalarField",name:"price_amount",storageKey:null},lo={alias:null,args:null,kind:"ScalarField",name:"can_donate",storageKey:null},so={alias:null,args:null,kind:"ScalarField",name:"has_viewer_donated",storageKey:null},uo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_detailed_progress_text",plural:!1,selections:z,storageKey:null},co={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_subtitle_text",plural:!1,selections:z,storageKey:null},mo=[ne,le,ie],po={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:mo,storageKey:null},_o={alias:null,args:null,kind:"ScalarField",name:"recipient_name",storageKey:null},fo={alias:null,args:null,kind:"ScalarField",name:"merchant_name",storageKey:null},go={alias:null,args:null,kind:"ScalarField",name:"account_holder_name",storageKey:null},ho={alias:null,args:null,kind:"ScalarField",name:"receipt_id",storageKey:null},yo={alias:null,args:null,kind:"ScalarField",name:"shipping_method",storageKey:null},Co={alias:null,args:null,kind:"ScalarField",name:"order_payment_method",storageKey:null},bo={alias:null,args:null,kind:"ScalarField",name:"receipt_url",storageKey:null},vo={alias:null,args:null,kind:"ScalarField",name:"cancellation_url",storageKey:null},So={alias:null,args:null,kind:"ScalarField",name:"receipient_address",storageKey:null},Ro={alias:null,args:null,kind:"ScalarField",name:"streets",storageKey:null},Lo={alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},Eo={alias:null,args:null,kind:"ScalarField",name:"country",storageKey:null},ko={alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},Io={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},To={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"structured_address",plural:!1,selections:[Ro,Lo,Eo,ko,Io],storageKey:null},Do={alias:null,args:null,kind:"ScalarField",name:"total",storageKey:null},xo={alias:null,args:null,kind:"ScalarField",name:"tax",storageKey:null},$o={alias:null,args:null,kind:"ScalarField",name:"shipping_cost",storageKey:null},Po={alias:null,args:null,kind:"ScalarField",name:"subtotal",storageKey:null},No={alias:null,args:null,kind:"ScalarField",name:"bubble_type",storageKey:null},Mo={alias:null,args:null,kind:"ScalarField",name:"order_time_for_display",storageKey:null},wo={alias:null,args:null,concreteType:"RetailReceiptAdjustment",kind:"LinkedField",name:"retail_adjustments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"adjustment_amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adjustment_type",storageKey:null}],storageKey:null},Ao={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"partner_logo",plural:!1,selections:re,storageKey:null},Fo={alias:null,args:null,kind:"ScalarField",name:"payment_modules_client",storageKey:null},Oo={alias:null,args:null,kind:"ScalarField",name:"is_viewer_seller",storageKey:null},Bo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"payment_snippet",plural:!1,selections:z,storageKey:null},Wo={alias:null,args:null,kind:"ScalarField",name:"item_id",storageKey:null},qo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:z,storageKey:null},Uo=[ht,yt],Vo={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"unit_price",plural:!1,selections:Uo,storageKey:null},Ho={alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:re,storageKey:"images(height:120,width:120)"},Go={alias:null,args:null,kind:"ScalarField",name:"quantity",storageKey:null},zo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentComponent",kind:"LinkedField",name:"components",plural:!0,selections:[ft,qo,{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:120,width:120)"}],storageKey:null},jo=[Io,{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_detail",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"label",plural:!1,selections:z,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"checkmark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"extra_data",storageKey:null}],Ko={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"payment_call_to_actions",plural:!0,selections:jo,storageKey:null},Qo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"click_action",plural:!1,selections:jo,storageKey:null},Xo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"summary_action",plural:!1,selections:jo,storageKey:null},Yo={alias:null,args:null,kind:"ScalarField",name:"invoicer_id",storageKey:null},Jo={alias:null,args:null,kind:"ScalarField",name:"is_last_attachment",storageKey:null},Zo={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"payment_total",plural:!1,selections:Uo,storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"product_detail",storageKey:null},ta={alias:null,args:null,concreteType:"PaymentPlatformAttachmentIcon",kind:"LinkedField",name:"payment_status_icon",plural:!1,selections:[fr],storageKey:null},na={alias:null,args:null,kind:"ScalarField",name:"user_facing_payment_status",storageKey:null},ra={alias:null,args:null,kind:"ScalarField",name:"payment_sub_statuses",storageKey:null},oa={alias:null,args:null,kind:"ScalarField",name:"should_show_new_xma",storageKey:null},aa={alias:null,args:null,kind:"ScalarField",name:"buyer_name",storageKey:null},ia={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"group_commerce_item_description",plural:!1,selections:z,storageKey:null},la={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"formatted_price",plural:!1,selections:z,storageKey:null},sa={alias:null,args:null,kind:"ScalarField",name:"group_commerce_item_title",storageKey:null},ua={alias:null,args:pe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:'image(sizing:"contain-fit")'},ca={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[ua],storageKey:null},da={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"single_line_full_address",storageKey:null}],storageKey:null},ma={alias:null,args:null,kind:"ScalarField",name:"top_category_name",storageKey:null},pa={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[w,{alias:null,args:[{kind:"Literal",name:"height",value:720},me,{kind:"Literal",name:"width",value:720}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:mo,storageKey:'image(height:720,sizing:"contain-fit",width:720)'}],storageKey:null}],storageKey:null},_a={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:Mn,storageKey:null},fa={alias:null,args:null,concreteType:"Rating",kind:"LinkedField",name:"overall_star_rating",plural:!1,selections:[dt],storageKey:null},ga={alias:null,args:null,kind:"ScalarField",name:"price_range_description",storageKey:null},ha={alias:null,args:null,kind:"ScalarField",name:"event_title",storageKey:null},ya={alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},Ca={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},ha,ya],type:"MessengerEventReminder",abstractKey:null},ba={alias:null,args:null,kind:"ScalarField",name:"tracking_number",storageKey:null},va={alias:null,args:null,kind:"ScalarField",name:"shipdate_for_display",storageKey:null},Sa={alias:null,args:null,kind:"ScalarField",name:"estimated_delivery_time_for_display",storageKey:null},Ra={alias:null,args:null,kind:"ScalarField",name:"timezone",storageKey:null},La=[Eo,Lo,ko,Nn,Pn,Io,Ro,Ra],Ea={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_origin",plural:!1,selections:La,storageKey:null},ka={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_destination",plural:!1,selections:La,storageKey:null},Ia={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,un],storageKey:null}],storageKey:null},Ta={alias:null,args:null,kind:"ScalarField",name:"carrier_tracking_url",storageKey:null},Da=[le,ie,ne],xa={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:Da,storageKey:null},$a={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[O,Ta,xa],storageKey:null},Pa={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"messenger_commerce_location",plural:!1,selections:La,storageKey:null},Na={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Pa],storageKey:null}],storageKey:null},Ma={alias:null,args:null,kind:"ScalarField",name:"tracking_event_time_for_display",storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"shipment_tracking_event_type",storageKey:null},Aa={alias:null,args:null,kind:"ScalarField",name:"tracking_event_description",storageKey:null},Fa={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[O,Ta,xa,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"legal_terms_of_service_text",plural:!1,selections:z,storageKey:null}],storageKey:null},Oa={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,wa,Pa],storageKey:null}],storageKey:null},Ba={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"cover_image",plural:!1,selections:mo,storageKey:null},Wa={alias:null,args:null,kind:"ScalarField",name:"headline",storageKey:null},qa={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:Mr,storageKey:null},Ua={alias:null,args:null,concreteType:"LeadGenUserInfoField",kind:"LinkedField",name:"field_data",plural:!0,selections:[ee,O,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},Va=[G,K],Ha={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_formated",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_headline",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_has_admin_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_sticker_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_footer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_text",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"templated_message_buttons",plural:!0,selections:Va,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_has_expiration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_expiration_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_is_offer_code_personalized",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageCardShape",kind:"LinkedField",name:"templated_message_cards",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sample_handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"button",plural:!1,selections:Va,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_name",storageKey:null}],type:"WECMessage",abstractKey:null},Ga={alias:null,args:null,kind:"ScalarField",name:"is_malicious",storageKey:null},za={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail_image",plural:!1,selections:ce,storageKey:null},ja={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},Ka={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},Qa={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"ice_breaker_title",storageKey:null},{alias:null,args:null,concreteType:"IceBreakerMessage",kind:"LinkedField",name:"ice_breaker_messages",plural:!0,selections:[ja,{alias:null,args:null,kind:"ScalarField",name:"message_key",storageKey:null}],storageKey:null},Ka],type:"IceBreakerMessageAttachment",abstractKey:null},Xa={kind:"Literal",name:"height",value:280},Ya={kind:"Literal",name:"width",value:280},Ja=[Xa,Ya],Za={alias:"preview",args:Ja,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:"image(height:280,width:280)"},ei={kind:"Literal",name:"height",value:480},ti={kind:"Literal",name:"width",value:480},ni={alias:"large_preview",args:[ei,ti],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:"image(height:480,width:480)"},ri={alias:null,args:null,kind:"ScalarField",name:"module_name",storageKey:null},oi={alias:null,args:null,kind:"ScalarField",name:"program_name",storageKey:null},ai={alias:null,args:null,kind:"ScalarField",name:"curriculum_message",storageKey:null},ii={alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},li={alias:null,args:null,kind:"ScalarField",name:"step_count",storageKey:null},si={alias:null,args:null,kind:"ScalarField",name:"total_steps",storageKey:null},ui={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:"MentorshipCurriculum",kind:"LinkedField",name:"curriculum",plural:!1,selections:q,storageKey:null}],storageKey:null},ci={alias:null,args:null,kind:"ScalarField",name:"topics",storageKey:null},di=[xt],mi={alias:null,args:null,kind:"ScalarField",name:"xma_type",storageKey:null},pi={alias:null,args:null,kind:"ScalarField",name:"xma_title",storageKey:null},_i={alias:null,args:null,kind:"ScalarField",name:"xma_body",storageKey:null},fi={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},gi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi],storageKey:null}],storageKey:null},hi={alias:null,args:null,kind:"ScalarField",name:"block_type",storageKey:null},yi={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},Ci={alias:null,args:null,kind:"ScalarField",name:"depth",storageKey:null},bi={alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null},Ge,fi],storageKey:null},vi={alias:null,args:null,kind:"ScalarField",name:"comment_count_reduced",storageKey:null},Si={alias:null,args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},Ri={alias:null,args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},Li={kind:"Literal",name:"first",value:3},Ei=[Li,{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],ki={alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null},Ii={alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},Ti={alias:"description",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:z,storageKey:null},Di={kind:"InlineFragment",selections:di,type:"User",abstractKey:null},xi=[ae],$i={kind:"InlineFragment",selections:xi,type:"Entity",abstractKey:"__isEntity"},Pi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[Ze,O,w,Di,$i,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:ce,storageKey:null}],storageKey:null},Ni={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:null},Mi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[ge,Ni],storageKey:null},wi={alias:"title",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:z,storageKey:null},Ai=[Li],Fi={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},Oi=[{kind:"Literal",name:"if_style",value:"file_upload"}],Bi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:Ot,storageKey:null},Wi=[{kind:"Literal",name:"if_style",value:"photo"}],qi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:z,storageKey:null},Ui={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[Ze,O,w,Di,$i],storageKey:null},Vi={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:Ot,storageKey:null},Hi={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[Vi],storageKey:null},Gi={alias:null,args:null,kind:"ScalarField",name:"job_title",storageKey:null},zi={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[Gi],storageKey:null},ji={alias:null,args:null,kind:"ScalarField",name:"subscribe_status",storageKey:null},Ki={alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},Qi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"visibility_sentence",plural:!1,selections:z,storageKey:null},Xi={alias:null,args:null,kind:"ScalarField",name:"viewer_join_state",storageKey:null},Yi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:q,storageKey:null},Ji={alias:null,args:null,kind:"ScalarField",name:"attachment_type_name",storageKey:null},Zi={alias:null,args:null,kind:"ScalarField",name:"privacy_status",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"file_type_category",storageKey:null},tl={alias:null,args:null,kind:"ScalarField",name:"app_integration_type",storageKey:null},nl={alias:null,args:[{kind:"Literal",name:"size",value:"D32"}],concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:re,storageKey:'logo(size:"D32")'},rl={alias:null,args:null,kind:"ScalarField",name:"viewer_auth_link",storageKey:null},ol={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"attachment_icon",plural:!1,selections:re,storageKey:null},al={alias:null,args:null,kind:"ScalarField",name:"content_uri",storageKey:null},il={alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null},ll={alias:null,args:null,kind:"ScalarField",name:"referral_offer_link",storageKey:null},sl={alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},ul={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"action_prefill",storageKey:null},Ka,sl,{alias:null,args:null,kind:"ScalarField",name:"customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},Ue,{alias:null,args:null,kind:"ScalarField",name:"reply_image_uri",storageKey:null}],type:"InThreadMultiphotoItemCTAData",abstractKey:null},cl={alias:null,args:null,kind:"ScalarField",name:"viewer_id",storageKey:null},dl={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"payment_confirmation_status",storageKey:null}],type:"XFBPaymentInvoiceMediaMessageDetection",abstractKey:null},ml={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,et,{kind:"InlineFragment",selections:[w,tt,he,nt,rt,ot,at],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[it,ut,ct,Dt],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:Qt,type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[Xt,Yt,Zt,en,tn,nn,w,Kt,rn,on,Ht,an,zt,Dt,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[Xt,Yt,Zt,en,tn,nn,w,Kt,rn,on,Ht,an,zt,Dt],storageKey:null}],type:"PeerToPeerPaymentRequest",abstractKey:null},Dt,{kind:"InlineFragment",selections:[ln,un,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:Dn,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[ln,un,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:Dn,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},xn,wn,{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:q,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[An,Fn,On,Bn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[qn,Un],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[w,Vn,W,Hn],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[w,zn,jn,Kn,Qn,Xn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[{kind:"InlineFragment",selections:[Yn,Jn,Zn,w,Gn,er,nr,ir,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Gt,lr,sr,{alias:null,args:ur,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[cr],storageKey:"images(first:1)"},dr],storageKey:null}],storageKey:null},mr,pr,_r,fr,gr,hr,yr,Cr,br,vr,Sr,Qn,Xn,Rr],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[w,Lr,Er,kr,Ir],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[w,Tr,Dr,xr,$r,Pr,Nr],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:wr,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Ar,Fr,Or,Br,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:Wr,storageKey:null},qr,Ur,Vr,Hr,Gr,O,zr],type:"Event",abstractKey:null},jr,Kr,{kind:"InlineFragment",selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,_n,un],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[w,Qr,to,no,pn,Xr,ro,oo,ao,io,O],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[w,lo,so,uo,co,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[po],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[w,_o,fo,go,ho,yo,Co,bo,vo,So,To,fr,Do,xo,$o,Po,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:Dn,storageKey:null},No,Mo,wo,Ao],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Fo,Oo,Bo,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Wo,O,qo,Gt,Vo,Ho,Go],storageKey:null},zo,Ko,Qo,Xo,Yo,Jo,Zo,ea,ta,na,ra,oa,aa],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:q,type:"JobApplication",abstractKey:null},{kind:"InlineFragment",selections:[ia,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:q,storageKey:null},la,sa,ca,ae],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[la,ca],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[da,ma,pa,_a,O,fa,w,ga],type:"Page",abstractKey:null},Ca,{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[w,ba,va,Sa,Ea,ka,Ia,$a,Na],storageKey:null},Ma,wa,Pa,Aa,No],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[w,ba,va,Sa,Ea,ka,Ia,Fa,Oa,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ho],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:Wr,storageKey:null},No],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[w,Ba,Wa,O,qa],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[w,Ua],type:"UserLeadGenInfo",abstractKey:null},Ha,{kind:"InlineFragment",selections:[w,O,Ga,ne,rt,ot],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[w,he,nt,rt,ot,tt,ie,za,le],type:"WECMessageVideo",abstractKey:null},Qa,{kind:"InlineFragment",selections:[w,rt,Za,ni],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[w,ri,oi,ai,ii,li,si,ui],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[w,ci],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:di,storageKey:null}],storageKey:null},mi],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[w,mi],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[w,mi,pi,_i],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[gi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[hi,yi,Ci,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[vi,Si,Ri,{alias:null,args:Ei,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[ki],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'}],storageKey:null},Ii,on,Ti,Pi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[Ze,O,Di,$i],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[be,ae,Ce,j,Mi,wi,{alias:null,args:Ai,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[Fi,{alias:"files",args:Oi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[wi,Bi],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:Wi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[Bi],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[qi,Ui,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[Mi],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[w,O,lt,Hi,zi,ji],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[w,O,Ki,Qi,Xi,Hi,Yi,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:q,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[w,Ji,Zi,el,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[tl,O,nl,rl],storageKey:null},ol,al,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[Q,G,Rt,ze,il,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[lt,O],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:q,type:"OfferItem",abstractKey:null},{kind:"InlineFragment",selections:[_n],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[w,ll],type:"ApplicationReferralXMA",abstractKey:null},ul,{kind:"InlineFragment",selections:[w,cl],type:"XFBP2MXMA",abstractKey:null},dl],storageKey:null},pl={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je,ml,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je,ml],storageKey:null}],storageKey:null},_l={kind:"InlineFragment",selections:q,type:"Node",abstractKey:"__isNode"},fl={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[H,pl,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[_l,O],storageKey:null}],storageKey:null},pl],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},gl={alias:null,args:null,concreteType:"Sticker",kind:"LinkedField",name:"sticker",plural:!1,selections:se,storageKey:null},hl={kind:"Literal",name:"sizing",value:"cover-fill"},yl={alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},Cl={kind:"InlineFragment",selections:[Sn,Rn,tt,{alias:"preview",args:[Xa,hl,Ya],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:280,sizing:"cover-fill",width:280)'},{alias:"large_preview",args:[ei,hl,ti],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:480,sizing:"cover-fill",width:480)'},{alias:"thumbnail",args:[{kind:"Literal",name:"height",value:38},{kind:"Literal",name:"width",value:58}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:38,width:58)"},{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[w,le,ie,yl,{alias:null,args:null,kind:"ScalarField",name:"cdn_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:[{kind:"Literal",name:"thumbnail_dimensions",value:[{height:280,width:280},{height:480,width:480}]}],concreteType:"SphericalPhotoThumbnail",kind:"LinkedField",name:"thumbnails",plural:!0,selections:Da,storageKey:'thumbnails(thumbnail_dimensions:[{"height":280,"width":280},{"height":480,"width":480}])'},{alias:null,args:[{kind:"Literal",name:"tile_levels",value:[0]}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"face",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"col",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row",storageKey:null},ne],storageKey:"tiles(tile_levels:[0])"},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[yl,{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_left_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_top_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_roll_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_roll_degrees",storageKey:null}],storageKey:null}],storageKey:null},H,kn,{alias:null,args:null,kind:"ScalarField",name:"original_extension",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_as_sticker",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null}],type:"MessageImage",abstractKey:null},bl={kind:"InlineFragment",selections:[Sn,Rn,tt,Cn,{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},H,bn,kn],type:"MessageAnimatedImage",abstractKey:null},vl={alias:null,args:null,kind:"ScalarField",name:"url_skipshim",storageKey:null},Sl={kind:"InlineFragment",selections:[Sn,Rn,tt,he,fe,{alias:null,args:null,kind:"ScalarField",name:"is_voicemail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_type",storageKey:null},nt,vl],type:"MessageAudio",abstractKey:null},Rl={alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null},Ll={kind:"InlineFragment",selections:[Sn,Rn,tt,ae,{alias:null,args:null,kind:"ScalarField",name:"mimetype",storageKey:null},Rl,Ga,{alias:null,args:null,kind:"ScalarField",name:"message_file_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},nt,vl,{alias:"preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:null}],type:"MessageFile",abstractKey:null},El=[Ze,Cl,bl,Sl,In,Ll],kl={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:El,storageKey:null},Il={alias:null,args:null,kind:"ScalarField",name:"extensible_message_admin_text_type",storageKey:null},Tl={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"game",plural:!1,selections:q,storageKey:null},Dl={kind:"InlineFragment",selections:[Tl],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},xl={alias:null,args:null,kind:"ScalarField",name:"platform_xmd_encoded",storageKey:null},$l={alias:null,args:null,kind:"ScalarField",name:"message_unsendability_status",storageKey:null},Pl={alias:"last_message",args:B,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[W,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:q,storageKey:null}],storageKey:null},U,V,{kind:"InlineFragment",selections:[fl,gl,kl],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[Il,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Dl],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null},xl,$l],storageKey:null}],storageKey:"messages(last:1)"},Nl={alias:null,args:null,concreteType:"ThreadConnectivityData",kind:"LinkedField",name:"thread_connectivity_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"connectivity_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"first_sender_id",storageKey:null}],storageKey:null},Ml={alias:null,args:null,kind:"ScalarField",name:"job_status",storageKey:null},wl={alias:null,args:null,kind:"ScalarField",name:"should_show_jobs_feature",storageKey:null},Al={alias:null,args:null,kind:"ScalarField",name:"should_show_schdule_interview_dialog",storageKey:null},Fl={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Ml,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[wl,Al],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ol={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thread_associated_page_admin",plural:!1,selections:tr,storageKey:null},Bl={alias:null,args:null,kind:"ScalarField",name:"unread_count",storageKey:null},Wl={condition:"is_work_teamwork_not_putting_muted_in_unreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"unread_mentions_count",storageKey:null}]},ql={alias:null,args:null,kind:"ScalarField",name:"messages_count",storageKey:null},Ul={alias:null,args:[{kind:"Literal",name:"size",value:60}],concreteType:"Image",kind:"LinkedField",name:"square_image",plural:!1,selections:re,storageKey:"square_image(size:60)"},Vl={alias:null,args:null,kind:"ScalarField",name:"updated_time_precise",storageKey:null},Hl={alias:null,args:null,kind:"ScalarField",name:"mute_until",storageKey:null},Gl={alias:null,args:null,kind:"ScalarField",name:"is_pin_protected",storageKey:null},zl={alias:null,args:null,kind:"ScalarField",name:"is_pinned",storageKey:null},jl={alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null},Kl={alias:null,args:null,kind:"ScalarField",name:"is_other_recipient_page",storageKey:null},Ql={alias:null,args:null,kind:"ScalarField",name:"thread_queue_enabled",storageKey:null},Xl={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},Yl={alias:null,args:null,kind:"ScalarField",name:"has_viewer_archived",storageKey:null},Jl={alias:null,args:null,kind:"ScalarField",name:"is_page_follow_up",storageKey:null},Zl={alias:null,args:null,kind:"ScalarField",name:"is_page_unresponded_thread",storageKey:null},es={alias:null,args:null,kind:"ScalarField",name:"cannot_reply_reason",storageKey:null},ts={alias:null,args:null,kind:"ScalarField",name:"can_viewer_report",storageKey:null},ns={alias:null,args:null,kind:"ScalarField",name:"composer_input_disabled",storageKey:null},rs={alias:null,args:null,kind:"ScalarField",name:"ephemeral_ttl_mode",storageKey:null},os={alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},as={alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null},is={alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},ls={alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[as,is],storageKey:null},ss={alias:null,args:null,kind:"ScalarField",name:"outgoing_bubble_color",storageKey:null},us={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[os,ls,ss],storageKey:null},cs={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},ds={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},ms={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},ps={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},_s={alias:null,args:null,kind:"ScalarField",name:"keyframe_asset_uri",storageKey:null},fs={alias:null,args:null,kind:"ScalarField",name:"reaction_name",storageKey:null},gs={alias:null,args:null,kind:"ScalarField",name:"reaction_emoji",storageKey:null},hs={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"static_asset",plural:!1,selections:re,storageKey:null},ys={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[w,cs,ds,ms,ps,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[_s,fs,gs,hs],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Cs={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:q,storageKey:null},bs={alias:"approval_mode",args:null,kind:"ScalarField",name:"group_approval_mode",storageKey:null},vs={alias:null,args:null,concreteType:"MessageThreadJoinableMode",kind:"LinkedField",name:"joinable_mode",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null}],storageKey:null},Ss={alias:null,args:null,concreteType:"GroupApprovalQueueConnection",kind:"LinkedField",name:"group_approval_queue",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGroupRequesterInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"requester",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"inviter",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_timestamp",storageKey:null}],storageKey:null}],storageKey:null},Rs=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:q,storageKey:null}],Ls={alias:null,args:null,concreteType:"ApprovalRequestsOfThreadConnection",kind:"LinkedField",name:"approval_requests",plural:!1,selections:Rs,storageKey:null},Es={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[Ls],storageKey:null},ks={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"lightweight_event_creator",plural:!1,selections:q,storageKey:null},Is={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_type",storageKey:null},Ts={alias:null,args:null,kind:"ScalarField",name:"location_name",storageKey:null},Ds={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location_coordinates",plural:!1,selections:Mn,storageKey:null},xs={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_address",storageKey:null}],storageKey:null},$s={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_status",storageKey:null},Ps={alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},Ns={alias:null,args:null,kind:"ScalarField",name:"repeat_mode",storageKey:null},Ms={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},ws={alias:null,args:null,kind:"ScalarField",name:"seconds_to_notify_before",storageKey:null},As={alias:null,args:null,kind:"ScalarField",name:"allows_rsvp",storageKey:null},Fs={alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"related_event",plural:!1,selections:q,storageKey:null},Os={alias:null,args:null,concreteType:"MessengerEventReminderMembersConnection",kind:"LinkedField",name:"event_reminder_members",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminderMembersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"guest_list_state",storageKey:null}],storageKey:null}],storageKey:null},Bs={alias:null,args:ur,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,ks,ya,Is,Ts,Ds,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[xs],storageKey:null},$s,Ps,Ns,ha,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[Ms],storageKey:null},ws,As,Fs,Os],storageKey:null}],storageKey:"event_reminders(first:1)"},Ws={alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"montage_thread",plural:!1,selections:q,storageKey:null},qs=[U],Us={alias:"last_read_receipt",args:B,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:qs,storageKey:null}],storageKey:"read_receipts(last:1)"},Vs={alias:"is_flagged",args:[{kind:"Literal",name:"page_message_tag",value:"FLAG"}],kind:"ScalarField",name:"has_tag",storageKey:'has_tag(page_message_tag:"FLAG")'},Hs={alias:null,args:null,kind:"ScalarField",name:"label_color",storageKey:null},Gs={alias:null,args:null,kind:"ScalarField",name:"data_silo",storageKey:null},zs={alias:null,args:null,kind:"ScalarField",name:"label_source",storageKey:null},js={alias:null,args:null,kind:"ScalarField",name:"is_ad_response_label",storageKey:null},Ks={alias:null,args:null,concreteType:"PageMessageThreadCustomThreadLabelsConnection",kind:"LinkedField",name:"custom_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs,zs,js],storageKey:null}],storageKey:null},Qs=[w,O,Rt],Xs={alias:null,args:null,concreteType:"PageMessageThreadCustomTagsConnection",kind:"LinkedField",name:"custom_thread_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"nodes",plural:!0,selections:Qs,storageKey:null}],storageKey:null},Ys={alias:null,args:null,kind:"ScalarField",name:"is_ai_label",storageKey:null},Js={alias:null,args:null,kind:"ScalarField",name:"is_ai_handoff_label",storageKey:null},Zs={alias:null,args:null,concreteType:"PageMessageThreadCorpThreadLabelsConnection",kind:"LinkedField",name:"corp_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,zs,Gs,Ys,Js,js],storageKey:null}],storageKey:null},eu={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Vs,Lr,Ks,Xs,Zs],storageKey:null},tu={alias:null,args:null,kind:"ScalarField",name:"call_state",storageKey:null},nu={alias:null,args:null,kind:"ScalarField",name:"server_info_data",storageKey:null},ru={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[tu,nu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:q,storageKey:null}],storageKey:null},ou={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:[{alias:null,args:null,concreteType:"ReverseGeocodeData",kind:"LinkedField",name:"reverse_geocode",plural:!1,selections:[Lo,Io],storageKey:null}],storageKey:null},au={alias:null,args:null,kind:"ScalarField",name:"inventory_count",storageKey:null},iu={alias:null,args:null,kind:"ScalarField",name:"delivery_types",storageKey:null},lu={alias:null,args:null,kind:"ScalarField",name:"c2c_shipping_eligible",storageKey:null},su={alias:null,args:null,kind:"ScalarField",name:"is_pending",storageKey:null},uu={alias:null,args:null,kind:"ScalarField",name:"is_shipping_offered",storageKey:null},cu={alias:null,args:null,kind:"ScalarField",name:"is_sold",storageKey:null},du={alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[w,{alias:null,args:null,kind:"ScalarField",name:"is_commerce_post_item",storageKey:null}],storageKey:null},mu={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},pu={alias:null,args:null,concreteType:"MarketplaceRatingState",kind:"LinkedField",name:"rating_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_to_rate",storageKey:null}],storageKey:null},_u={alias:null,args:null,kind:"ScalarField",name:"is_eligible",storageKey:null},fu={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MarketplaceC2CShippingSeller",kind:"LinkedField",name:"marketplace_c2c_shipping_seller",plural:!1,selections:[_u],storageKey:null}],type:"User",abstractKey:null},gu={alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},hu={alias:null,args:null,concreteType:"MarketplaceThreadLabel",kind:"LinkedField",name:"seller_added_labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_string",storageKey:null},gu],storageKey:null},yu={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[w,Hn,sa,la,ou,au,iu,lu,su,uu,cu,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:Ot,storageKey:null},du,mu],storageKey:null},pu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[w,fu],storageKey:null},hu],storageKey:null},Cu={alias:"action_link",args:null,kind:"ScalarField",name:"url",storageKey:null},bu={alias:"room_type",args:null,kind:"ScalarField",name:"time_spent_room_type",storageKey:null},vu={alias:null,args:null,kind:"ScalarField",name:"privacy_mode",storageKey:null},Su={alias:null,args:null,kind:"ScalarField",name:"approval_mode_toggleable",storageKey:null},Ru={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:Mr,storageKey:null},Lu=[Fi],Eu={alias:null,args:null,concreteType:"GroupSavesConnection",kind:"LinkedField",name:"group_saves",plural:!1,selections:Lu,storageKey:null},ku={alias:null,args:[{kind:"Literal",name:"external_ref",value:"messenger"}],kind:"ScalarField",name:"verse_group_link",storageKey:'verse_group_link(external_ref:"messenger")'},Iu={kind:"InlineFragment",selections:[O,da],type:"Page",abstractKey:null},Tu={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[{kind:"InlineFragment",selections:[Cu,w,O,lt,Yi,bu,vu,Su,Ru,Eu,ku],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Cu,w,O,lt,bu,vu,Su,zr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Iu],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null},Du={alias:null,args:null,kind:"ScalarField",name:"reactions_mute_mode",storageKey:null},xu={alias:null,args:null,kind:"ScalarField",name:"mentions_mute_mode",storageKey:null},$u={alias:null,args:null,kind:"ScalarField",name:"customization_enabled",storageKey:null},Pu={alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},Nu={alias:null,args:null,kind:"ScalarField",name:"group_thread_subtype",storageKey:null},Mu={alias:null,args:null,kind:"ScalarField",name:"participant_add_mode_as_string",storageKey:null},wu={alias:null,args:null,kind:"ScalarField",name:"is_canonical_neo_user",storageKey:null},Au={alias:null,args:null,concreteType:"MessageThreadParticipantEventStatusInfo",kind:"LinkedField",name:"participants_event_status",plural:!0,selections:[as,{alias:null,args:null,kind:"ScalarField",name:"event_status",storageKey:null}],storageKey:null},Fu={alias:null,args:null,kind:"ScalarField",name:"comm_status",storageKey:null},Ou={alias:null,args:null,kind:"ScalarField",name:"comm_source_id",storageKey:null},Bu={alias:null,args:null,kind:"ScalarField",name:"is_priority",storageKey:null},Wu={alias:null,args:null,kind:"ScalarField",name:"biz_inbox_tags",storageKey:null},qu={alias:null,args:null,kind:"ScalarField",name:"priority_score",storageKey:null},Uu={alias:null,args:null,kind:"ScalarField",name:"trigger_id",storageKey:null},Vu=[{alias:null,args:null,kind:"ScalarField",name:"suggestion_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestion_content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggered_timestamp",storageKey:null},Uu],Hu={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"biz_inbox_suggested_reply",plural:!1,selections:Vu,storageKey:null},Gu={alias:null,args:null,kind:"ScalarField",name:"is_thread_currently_handled_by_ai_agent",storageKey:null},zu=[w,O,{alias:null,args:[{kind:"Literal",name:"height",value:20},{kind:"Literal",name:"width",value:20}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:20,width:20)"}],ju={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"admin",plural:!1,selections:zu,storageKey:null},Ku={alias:null,args:null,kind:"ScalarField",name:"comm_icon_type",storageKey:null},Qu={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[w,Fu,Ou,Bu,Wu,qu,Hu,Gu,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[ju],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:Ot,storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},Ku],storageKey:null},Xu={alias:null,args:null,kind:"ScalarField",name:"admin_model_status_string",storageKey:null},Yu={alias:null,args:null,kind:"ScalarField",name:"groups_sync_status_string",storageKey:null},Ju={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:xi,storageKey:null}],storageKey:null},Zu={alias:null,args:null,kind:"ScalarField",name:"pinning_time",storageKey:null},ec={alias:null,args:null,concreteType:"OmniMActionLite",kind:"LinkedField",name:"m_suggestions",plural:!0,selections:[w,ee,K,{alias:null,args:null,concreteType:"OmniMActionDataLite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"OmniMActionReminderDataLite",kind:"LinkedField",name:"reminder",plural:!1,selections:[il,{alias:null,args:null,kind:"ScalarField",name:"topic",storageKey:null}],storageKey:null}],storageKey:null},$n],storageKey:null},tc={alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},nc={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},rc={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[w,nc],storageKey:null},oc={alias:null,args:null,kind:"ScalarField",name:"ttl",storageKey:null},ac={alias:null,args:null,kind:"ScalarField",name:"unread",storageKey:null},ic={alias:null,args:null,kind:"ScalarField",name:"is_sponsored",storageKey:null},lc={alias:null,args:null,kind:"ScalarField",name:"ad_client_token",storageKey:null},sc={alias:null,args:null,concreteType:"MessageCustomization",kind:"LinkedField",name:"customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"customization_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"customization_value",storageKey:null}],storageKey:null},uc={alias:null,args:null,kind:"ScalarField",name:"tags_list",storageKey:null},cc={alias:null,args:null,concreteType:"MessageSourceData",kind:"LinkedField",name:"message_source_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_source",storageKey:null}],storageKey:null},dc={alias:null,args:null,concreteType:"MontageReplyData",kind:"LinkedField",name:"montage_reply_data",plural:!1,selections:[Ms,{alias:null,args:null,kind:"ScalarField",name:"reply_action",storageKey:null},W],storageKey:null},mc={alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null},pc={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[mc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:q,storageKey:null}],storageKey:null},_c={alias:null,args:null,kind:"ScalarField",name:"unsent_timestamp_precise",storageKey:null},fc={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[w,O,Di],storageKey:null}],storageKey:null},gc={alias:null,args:null,kind:"ScalarField",name:"verse_group_role_xmd",storageKey:null},hc={alias:null,args:null,kind:"ScalarField",name:"secondary_language_body",storageKey:null},yc={kind:"InlineFragment",selections:q,type:"Profile",abstractKey:"__isProfile"},Cc={kind:"InlineFragment",selections:q,type:"MessengerViewerGroupThread",abstractKey:null},bc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[A],storageKey:null}],type:"MessageThread",abstractKey:null},vc={alias:null,args:null,kind:"ScalarField",name:"message_profile_range_type",storageKey:null},Sc={alias:null,args:null,concreteType:"MetaAtRange",kind:"LinkedField",name:"meta_ranges",plural:!0,selections:[Ge,fi,K,yi],storageKey:null},Rc={alias:null,args:null,concreteType:"MessagePageAdminSender",kind:"LinkedField",name:"page_admin_sender",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"admin_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_type",storageKey:null},O,gu,Ue,{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null},Lc={kind:"InlineFragment",selections:[hc,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,yc,Cc,bc],storageKey:null},vc],storageKey:null}],storageKey:null},Sc,fl,gl,kl,Rc],type:"UserMessage",abstractKey:null},Ec={alias:null,args:null,kind:"ScalarField",name:"answered",storageKey:null},kc={kind:"InlineFragment",selections:[Ec,W],type:"VoiceCallMessage",abstractKey:null},Ic=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:El,storageKey:null}],Tc={kind:"InlineFragment",selections:[Ec,W,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Ic,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null},Dc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},W],type:"ThreadNameMessage",abstractKey:null},xc={alias:"preview",args:Ja,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:280,width:280)"},$c={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[xc,H,kn],storageKey:null},W],type:"ThreadImageMessage",abstractKey:null},Pc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_added",plural:!0,selections:q,storageKey:null},W],type:"ParticipantsAddedMessage",abstractKey:null},Nc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_removed",plural:!0,selections:q,storageKey:null},W],type:"ParticipantLeftMessage",abstractKey:null},Mc={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null},wc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:"total_count",args:null,kind:"ScalarField",name:"option_count",storageKey:null},{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[w,G,Mc,{alias:null,args:[{kind:"Literal",name:"orderby",value:"creation_time"}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,G,Mc,{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:Rs,storageKey:null}],storageKey:null}],storageKey:'options(orderby:"creation_time")'}],storageKey:null}],type:"GroupPollExtensibleMessageAdminText",abstractKey:null},Ac={alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null},Fc={alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"event_reminder",plural:!1,selections:[w,ya,ha,{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},Ts,Is,As,ws,ks,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:q,storageKey:null},Ds,{alias:null,args:null,concreteType:"TimezoneInfo",kind:"LinkedField",name:"timezone_id",plural:!1,selections:[Ac,Ra,{alias:null,args:null,kind:"ScalarField",name:"timezone_id",storageKey:null}],storageKey:null},Os],storageKey:null},Oc=[Fc],Bc={kind:"InlineFragment",selections:Oc,type:"LightweightEventCreateExtensibleMessageAdminText",abstractKey:null},Wc={kind:"InlineFragment",selections:Oc,type:"LightweightEventDeleteExtensibleMessageAdminText",abstractKey:null},qc={kind:"InlineFragment",selections:Oc,type:"LightweightEventNotifyBeforeEventExtensibleMessageAdminText",abstractKey:null},Uc={kind:"InlineFragment",selections:Oc,type:"LightweightEventNotifyExtensibleMessageAdminText",abstractKey:null},Vc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateExtensibleMessageAdminText",abstractKey:null},Hc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateLocationExtensibleMessageAdminText",abstractKey:null},Gc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateTimeExtensibleMessageAdminText",abstractKey:null},zc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateTitleExtensibleMessageAdminText",abstractKey:null},jc={alias:null,args:null,kind:"ScalarField",name:"guest_id",storageKey:null},Kc={kind:"InlineFragment",selections:[jc,{alias:null,args:null,kind:"ScalarField",name:"guest_status",storageKey:null},Fc],type:"LightweightEventRSVPExtensibleMessageAdminText",abstractKey:null},Qc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"theme_color",storageKey:null}],type:"ThemeColorExtensibleMessageAdminText",abstractKey:null},Xc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_icon",storageKey:null}],type:"ThreadIconExtensibleMessageAdminText",abstractKey:null},Yc={kind:"InlineFragment",selections:[is,{alias:"participant_id",args:null,kind:"ScalarField",name:"target_id",storageKey:null}],type:"ThreadNicknameExtensibleMessageAdminText",abstractKey:null},Jc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accepter_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requester_id",storageKey:null}],type:"AcceptPendingThreadExtensibleMessageAdminText",abstractKey:null},Zc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"contact_added_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contact_adder_id",storageKey:null}],type:"AddContactExtensibleMessageAdminText",abstractKey:null},ed={alias:null,args:null,kind:"ScalarField",name:"event",storageKey:null},td={kind:"InlineFragment",selections:[ed,{alias:null,args:null,kind:"ScalarField",name:"is_video_call",storageKey:null},nu],type:"RtcCallLogExtensibleMessageAdminText",abstractKey:null},nd={alias:null,args:null,kind:"ScalarField",name:"update_type",storageKey:null},rd={alias:null,args:null,kind:"ScalarField",name:"collapsed_text",storageKey:null},od={alias:null,args:null,kind:"ScalarField",name:"expanded_text",storageKey:null},ad={alias:null,args:null,kind:"ScalarField",name:"cta_url",storageKey:null},id={alias:null,args:null,kind:"ScalarField",name:"template",storageKey:null},ld={alias:null,args:null,kind:"ScalarField",name:"leaderboard_json",storageKey:null},sd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"game_type",storageKey:null}],type:"GameScoreExtensibleMessageAdminText",abstractKey:null},ud={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"parties_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parties_invite_type",storageKey:null}],type:"PartiesInviteExtensibleMessageAdminText",abstractKey:null},cd={alias:null,args:null,kind:"ScalarField",name:"icebreaker_type",storageKey:null},dd={alias:null,args:null,kind:"ScalarField",name:"icebreaker_title",storageKey:null},md={alias:null,args:null,kind:"ScalarField",name:"icebreaker_subtitle",storageKey:null},pd={alias:null,args:null,kind:"ScalarField",name:"vote_buttons_with_icons",storageKey:null},_d={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_request_recipient",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_sender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_subtype",storageKey:null},cd,dd,md,pd],type:"ConfirmFriendRequestExtensibleMessageAdminText",abstractKey:null},fd={alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},gd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"bump_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recipient_id",storageKey:null},fd,Q,Gt,{alias:null,args:null,kind:"ScalarField",name:"icon_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_ids",storageKey:null},sl,{alias:null,args:null,kind:"ScalarField",name:"cta_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"admin_message_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"banner_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_two_way",storageKey:null}],type:"MessengerGrowthGenericExtensibleMessageAdminText",abstractKey:null},hd={kind:"InlineFragment",selections:[Pr,{alias:null,args:null,kind:"ScalarField",name:"ios_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_redesign",storageKey:null}],type:"BizInboxDetectedOutcomesActivityAdminTextExtensibleMessageAdminText",abstractKey:null},yd={alias:null,args:null,kind:"ScalarField",name:"cta_text",storageKey:null},Cd={kind:"InlineFragment",selections:[Pr,yd,ad,{alias:null,args:null,kind:"ScalarField",name:"async_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"www_is_async_url",storageKey:null}],type:"LinkCTAExtensibleMessageAdminText",abstractKey:null},bd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"referer_uri",storageKey:null}],type:"MessengerLiveChatPluginURLUpdateAdminText",abstractKey:null},vd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fb_user_name",storageKey:null}],type:"MessengerLiveChatPluginFBUserStartChatAdminText",abstractKey:null},Sd={kind:"InlineFragment",selections:[$n],type:"MessengerLiveChatPluginGuestUserStartChatAdminText",abstractKey:null},Rd={kind:"InlineFragment",selections:[yd,ad,Ms,{alias:null,args:null,kind:"ScalarField",name:"recipient_is_the_sender",storageKey:null}],type:"WorkChatReminderLinkCTAExtensibleMessageAdminText",abstractKey:null},Ld={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_uri",storageKey:null}],type:"PostSharedFromGroupExtensibleMessageAdminText",abstractKey:null},Ed={alias:null,args:null,kind:"ScalarField",name:"ad_url",storageKey:null},kd={kind:"InlineFragment",selections:[Ed],type:"MessengerAdContextAdminText",abstractKey:null},Id={kind:"InlineFragment",selections:[lc,Ka,{alias:null,args:null,kind:"ScalarField",name:"ad_preferences_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ad_properties",storageKey:null}],type:"AdExtensibleMessageAdminText",abstractKey:null},Td={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"page_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_name",storageKey:null}],type:"AppointmentReminderExtensibleMessageAdminText",abstractKey:null},Dd=[Ue],xd={kind:"InlineFragment",selections:Dd,type:"GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText",abstractKey:null},$d={kind:"InlineFragment",selections:Dd,type:"ServicesLeadGenSurveyExtensibleMessageAdminText",abstractKey:null},Pd={kind:"InlineFragment",selections:Dd,type:"ServicesLeadGenSurveyEditExtensibleMessageAdminText",abstractKey:null},Nd={alias:null,args:null,kind:"ScalarField",name:"caller_id",storageKey:null},Md={alias:null,args:null,kind:"ScalarField",name:"callee_id",storageKey:null},wd={alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null},Ad={alias:null,args:null,kind:"ScalarField",name:"server_info",storageKey:null},Fd={alias:null,args:null,kind:"ScalarField",name:"video",storageKey:null},Od={alias:null,args:null,kind:"ScalarField",name:"call_duration",storageKey:null},Bd={alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},Wd={kind:"InlineFragment",selections:[cd,dd,md,{alias:null,args:null,kind:"ScalarField",name:"votes_cast",storageKey:null},pd],type:"MessengerIcebreakerVoteCastExtensibleMessageAdminText",abstractKey:null},qd={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},Ud={alias:null,args:null,kind:"ScalarField",name:"currency_code",storageKey:null},Vd=[Ue,qd,{alias:null,args:null,kind:"ScalarField",name:"receipt_photo_id",storageKey:null},Ud,{alias:null,args:null,kind:"ScalarField",name:"detection_type",storageKey:null}],Hd={kind:"InlineFragment",selections:Vd,type:"PagesMarkAsPaidExtensibleMessageAdminText",abstractKey:null},Gd={kind:"InlineFragment",selections:Vd,type:"PagesMarkAsPaidNewExtensibleMessageAdminText",abstractKey:null},zd={alias:null,args:null,kind:"ScalarField",name:"interaction_id",storageKey:null},jd={kind:"InlineFragment",selections:[Ue,qd,{alias:null,args:null,kind:"ScalarField",name:"interaction_type",storageKey:null},zd,{alias:null,args:null,kind:"ScalarField",name:"should_show_cta",storageKey:null}],type:"PageThreadActionSystemAddDetailsXMAT",abstractKey:null},Kd={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"bot_page",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_landing_page",storageKey:null}],type:"WorkBotInstalledExtensibleMessageAdminText",abstractKey:null},Qd={kind:"InlineFragment",selections:[Ed,{alias:null,args:null,kind:"ScalarField",name:"should_show_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"results_url",storageKey:null}],type:"AdReplyMessageAdminText",abstractKey:null},Xd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"new_magic_word_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"magic_word",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji_effect",storageKey:null}],type:"MagicWordsExtensibleMessageAdminText",abstractKey:null},Yd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"token_ent_id_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_action_type",storageKey:null}],type:"NotificationMessagesAdminText",abstractKey:null},Jd={alias:null,args:null,kind:"ScalarField",name:"admin_assigner_name",storageKey:null},Zd={kind:"InlineFragment",selections:[Jd,{alias:null,args:null,kind:"ScalarField",name:"assigned_admin_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"assign_conversation",storageKey:null}],type:"BizInboxAssignAdminAdminText",abstractKey:null},em={kind:"InlineFragment",selections:[Jd,{alias:null,args:null,kind:"ScalarField",name:"note_input",storageKey:null}],type:"BizInboxAdminAssignmentNoteAdminText",abstractKey:null},tm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email_thread_id",storageKey:null}],type:"BizInboxOmnichannelEmailSentAdminText",abstractKey:null},nm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_subscription_management_action_type",storageKey:null}],type:"InstantGameBotMessageSubscriptionManagementAdminText",abstractKey:null},rm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_mute_management_action_type",storageKey:null}],type:"InstantGameCustomUpdateMuteManagementAdminText",abstractKey:null},om={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,wc,Bc,Wc,qc,Uc,Vc,Hc,Gc,zc,Kc,Qc,Xc,Yc,Jc,Zc,td,{kind:"InlineFragment",selections:[Tl,nd,rd,od,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[{kind:"InlineFragment",selections:[ad,sl,Vi,id],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},ld],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},sd,ud,_d,gd,hd,Cd,bd,vd,Sd,Rd,Ld,kd,Id,Td,xd,$d,Pd,{kind:"InlineFragment",selections:[Nd,Md,wd,ed,Ad,Fd,Od,Bd,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Ic,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Wd,Hd,Gd,jd,Kd,Qd,Xd,Yd,Zd,em,tm,nm,rm],storageKey:null},Il,W],type:"GenericAdminTextMessage",abstractKey:null},am=[{alias:null,args:null,kind:"ScalarField",name:"transfer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_type",storageKey:null},{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:qt,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_receiver",plural:!1,selections:q,storageKey:null},W],im={kind:"InlineFragment",selections:am,type:"P2PPaymentRequestMessage",abstractKey:null},lm={kind:"InlineFragment",selections:am,type:"P2PPaymentMessage",abstractKey:null},sm=[ec,Ze,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,pc,_c,fc,gc,$l,Lc,kc,Tc,Dc,$c,Pc,Nc,om,im,lm,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[fr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[ec,Ze,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,pc,_c,fc,gc,$l,Lc,kc,Tc,Dc,$c,Pc,Nc,om,im,lm],storageKey:null}],storageKey:null}],um={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[Ms,Zu,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:sm,storageKey:null}]}],storageKey:null},cm={alias:null,args:null,kind:"ScalarField",name:"is_default_child_group",storageKey:null},dm={alias:null,args:null,kind:"ScalarField",name:"emoji_codepoints",storageKey:null},mm={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w,O,Ki,cm,lt,Eu,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[dm],storageKey:null}],storageKey:null}],storageKey:null},pm={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:sm,storageKey:null}]},_m={alias:null,args:null,kind:"ScalarField",name:"joinable_link",storageKey:null},fm={alias:null,args:null,kind:"ScalarField",name:"is_fuss_red_page",storageKey:null},gm={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"program_group",plural:!1,selections:[w,{alias:null,args:[{kind:"Literal",name:"height",value:24},{kind:"Literal",name:"width",value:24}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:24,width:24)"}],storageKey:null},hm={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"mentorship_group",plural:!1,selections:Mr,storageKey:null},ym={alias:null,args:null,kind:"ScalarField",name:"banner_title",storageKey:null},Cm={alias:null,args:null,kind:"ScalarField",name:"banner_subtitle",storageKey:null},bm={alias:null,args:ur,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,gm,hm,{alias:null,args:ur,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[ym,Cm],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"},vm={alias:null,args:null,kind:"ScalarField",name:"thread_unsendability_status",storageKey:null},Sm={alias:null,args:null,kind:"ScalarField",name:"thread_pin_timestamp",storageKey:null},Rm={alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null},Lm={alias:null,args:null,concreteType:"ConversionDetectionData",kind:"LinkedField",name:"conversion_detection_data",plural:!1,selections:[_u,{alias:null,args:null,kind:"ScalarField",name:"conversion_type",storageKey:null},Ud,{alias:null,args:null,kind:"ScalarField",name:"currency_amount",storageKey:null},{alias:"timestamp",args:null,kind:"ScalarField",name:"timestamp_graphql_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_reply",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_message",storageKey:null},Uu,{alias:null,args:null,kind:"ScalarField",name:"shipping_provider",storageKey:null},ba,{alias:null,args:null,kind:"ScalarField",name:"ctx_ad_info",storageKey:null}],storageKey:null},Em={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"suggested_reply_data",plural:!1,selections:Vu,storageKey:null},km={alias:null,args:null,kind:"ScalarField",name:"admin_type",storageKey:null},Im={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},Tm={alias:"big_image_src",args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:60,width:60)"},Dm={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},xm={alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},$m={alias:null,args:null,kind:"ScalarField",name:"is_messenger_user",storageKey:null},Pm={alias:null,args:null,kind:"ScalarField",name:"is_message_blocked_by_viewer",storageKey:null},Nm={alias:null,args:null,kind:"ScalarField",name:"is_viewer_coworker",storageKey:null},Mm={alias:null,args:null,kind:"ScalarField",name:"is_employee",storageKey:null},wm={alias:null,args:null,kind:"ScalarField",name:"is_aloha_proxy_confirmed",storageKey:null},Am={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null},Fm={alias:null,args:null,kind:"ScalarField",name:"messenger_account_status_category",storageKey:null},Om={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:Wr,storageKey:null},Gi],storageKey:null},Bm={kind:"InlineFragment",selections:[Im,ae,Tm,xt,xm,$m,Pm,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_managing_parent",storageKey:null}],type:"NeoApprovedUser",abstractKey:null},Wm={kind:"InlineFragment",selections:[ae,Tm,Dm,{alias:null,args:null,kind:"ScalarField",name:"accepts_messenger_user_feedback",storageKey:null},$m,{alias:null,args:null,kind:"ScalarField",name:"is_messenger_platform_bot",storageKey:null},Pm,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed_to_message_updates",storageKey:null},{alias:null,args:null,concreteType:"InstantGameChannelInfo",kind:"LinkedField",name:"instant_game_channel",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:q,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null}],type:"Page",abstractKey:null},qm=[ae,Tm,Pm],Um={kind:"InlineFragment",selections:qm,type:"SmsMessagingParticipant",abstractKey:null},Vm={kind:"InlineFragment",selections:[Tm,Pm],type:"InstagramMessagingUser",abstractKey:null},Hm=[Tm],Gm={kind:"InlineFragment",selections:Hm,type:"LiveChatOnlyPerson",abstractKey:null},zm={kind:"InlineFragment",selections:qm,type:"UnavailableMessagingActor",abstractKey:null},jm={kind:"InlineFragment",selections:Hm,type:"UnifiedMessagingInstagramUser",abstractKey:null},Km={alias:null,args:null,kind:"ScalarField",name:"is_blocked_by_viewer",storageKey:null},Qm=[ae,Tm,Dm],Xm={kind:"InlineFragment",selections:Qm,type:"Group",abstractKey:null},Ym={kind:"InlineFragment",selections:Qm,type:"Event",abstractKey:null},Jm={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"detail",storageKey:null},ee,K],storageKey:null}],type:"WorkForeignEntity",abstractKey:"__isWorkForeignEntity"},Zm=[ae,Tm,xt,Pm],ep={kind:"InlineFragment",selections:Zm,type:"XFBWorkroomsBaseUser",abstractKey:"__isXFBWorkroomsBaseUser"},tp={kind:"InlineFragment",selections:Zm,type:"XFBWorkroomsSystemUser",abstractKey:null},np={kind:"InlineFragment",selections:Hm,type:"MessengerCallGuestUser",abstractKey:null},rp={kind:"InlineFragment",selections:Hm,type:"WorkVCEndpointUser",abstractKey:null},op={kind:"InlineFragment",selections:Hm,type:"WECMailboxAccount",abstractKey:null},ap={kind:"InlineFragment",selections:Hm,type:"WECCustomer",abstractKey:null},ip={alias:null,args:null,kind:"ScalarField",name:"wec_group_creation_time",storageKey:null},lp={alias:null,args:null,kind:"ScalarField",name:"wec_group_invite_link",storageKey:null},sp={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:wr,storageKey:null},up={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[km,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[w,Ze,O,{kind:"InlineFragment",selections:[Im,ae,Tm,xt,Dm,xm,$m,Pm,Nm,Mm,wm,Am,Fm,Om],type:"User",abstractKey:null},Bm,Wm,Um,Vm,Gm,zm,jm,{kind:"InlineFragment",selections:[ae,Tm,Dm,Km,Pm,Om],type:"ReducedMessagingActor",abstractKey:null},Xm,Ym,Jm,ep,tp,np,rp,op,ap,{kind:"InlineFragment",selections:[Tm,ip,lp,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[sp,Fi],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[sp],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},cp={alias:"watermark",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},dp={alias:"action",args:null,kind:"ScalarField",name:"action_timestamp_precise",storageKey:null},mp={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[cp,dp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:q,storageKey:null}],storageKey:null}],storageKey:null},pp=[{alias:null,args:null,concreteType:"MessagingDeliveryReceiptsOfThreadConnection",kind:"LinkedField",name:"delivery_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingDeliveryReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:qs,storageKey:null}],storageKey:null}],_p={condition:"includeDeliveryReceipts",kind:"Condition",passingValue:!0,selections:pp},fp=[M,{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,F,O,Pl,Nl,Fl,Ol,Bl,Wl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,us,ys,Cs,bs,vs,Ss,Es,Bs,Ws,Us,eu,ru,yu,Tu,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Qu,Xu,Yu,Ju,um,mm,pm,Gt,_m,fm,bm,vm,Sm,Rm,Lm,Em,up,mp,_p],storageKey:null}],gp={alias:null,args:null,kind:"ScalarField",name:"instagram_user_id",storageKey:null},hp=[gp,lt],yp={alias:null,args:null,kind:"ScalarField",name:"unseen_count",storageKey:null},Cp={alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},bp={alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},vp={alias:null,args:null,kind:"ScalarField",name:"thread_v2_id",storageKey:null},Sp={alias:null,args:null,kind:"ScalarField",name:"instagram_message_thread_type",storageKey:null},Rp={alias:null,args:null,kind:"ScalarField",name:"thread_title",storageKey:null},Lp={alias:null,args:null,kind:"ScalarField",name:"is_group",storageKey:null},Ep={alias:null,args:null,kind:"ScalarField",name:"last_activity_at",storageKey:null},kp={alias:null,args:null,concreteType:"IGThreadLastSeenUser",kind:"LinkedField",name:"last_seen_at",plural:!0,selections:[Wo,il,qd],storageKey:null},Ip={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},Tp={alias:null,args:null,concreteType:"IGThreadDirectStoryData",kind:"LinkedField",name:"direct_story",plural:!1,selections:[yp,Ip],storageKey:null},Dp={alias:null,args:null,concreteType:"InstagramMessageThreadThreadLabelsConnection",kind:"LinkedField",name:"thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs,zs],storageKey:null}],storageKey:null},xp={alias:null,args:null,concreteType:"InstagramMessageThreadThreadCorpLabelsConnection",kind:"LinkedField",name:"thread_corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs],storageKey:null}],storageKey:null},$p={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"assigned_admin",plural:!1,selections:zu,storageKey:null},Pp={alias:null,args:null,kind:"ScalarField",name:"is_follow_up",storageKey:null},Np={alias:null,args:null,kind:"ScalarField",name:"is_read",storageKey:null},Mp={alias:null,args:null,kind:"ScalarField",name:"business_thread_folder",storageKey:null},wp={alias:null,args:null,concreteType:"IGThreadUserNodesData",kind:"LinkedField",name:"thread_users",plural:!1,selections:[{alias:null,args:null,concreteType:"IGThreadUserData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"eimu_id",storageKey:null},gp,Dm,O,{alias:null,args:null,concreteType:"IGThreadUserProfilePic",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null}],storageKey:null}],storageKey:null},Ap={alias:null,args:null,kind:"ScalarField",name:"input_mode",storageKey:null},Fp={alias:null,args:null,kind:"ScalarField",name:"is_partnership",storageKey:null},Op={alias:null,args:null,kind:"ScalarField",name:"time_stamp",storageKey:null},Bp={alias:null,args:null,kind:"ScalarField",name:"ig_item_type",storageKey:null},Wp={alias:null,args:null,kind:"ScalarField",name:"client_context",storageKey:null},qp={alias:null,args:null,concreteType:"IGThreadItemPlaceHolderSource",kind:"LinkedField",name:"ig_placeholder",plural:!1,selections:[Q,ja],storageKey:null},Up=[{kind:"Variable",name:"height",variableName:"height"},{kind:"Variable",name:"width",variableName:"width"}],Vp={alias:null,args:Up,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:re,storageKey:null},Hp={alias:null,args:Up,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"video_source",plural:!1,selections:mo,storageKey:null},Gp={alias:null,args:null,kind:"ScalarField",name:"expiring_at",storageKey:null},zp=[gp,Dm,O,lt],jp={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:zp,storageKey:null},Kp={alias:null,args:null,concreteType:"IGMessageThreadItemRavenMedia",kind:"LinkedField",name:"raven_media",plural:!1,selections:[Ip,{alias:null,args:null,kind:"ScalarField",name:"seen_user_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"view_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_count",storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Vp,Hp,Gp],storageKey:null}],storageKey:null},Qp={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:zp,storageKey:null},Xp={alias:null,args:Up,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:mo,storageKey:null},Yp={kind:"InlineFragment",selections:z,type:"IGMessageThreadItemMediaShare",abstractKey:null},Jp={alias:null,args:null,kind:"ScalarField",name:"story_type",storageKey:null},Zp={kind:"InlineFragment",selections:[Jp,G,K],type:"IGMessageThreadItemReelShare",abstractKey:null},e_={kind:"InlineFragment",selections:[Jp,ja,Q,G],type:"IGMessageThreadItemStoryShare",abstractKey:null},t_={kind:"InlineFragment",selections:[Q,G],type:"IGMessageThreadItemFelixShare",abstractKey:null},n_={kind:"InlineFragment",selections:[Q,He,G,{alias:null,args:null,kind:"ScalarField",name:"current_price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_price",storageKey:null},ne],type:"IGMessageThreadItemProductShare",abstractKey:null},r_={alias:null,args:null,kind:"ScalarField",name:"likes_count",storageKey:null},o_={alias:null,args:null,kind:"ScalarField",name:"emojis",storageKey:null},a_={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"media",plural:!0,selections:mo,storageKey:null},i_={alias:null,args:null,concreteType:"IGThreadItemActionLogSource",kind:"LinkedField",name:"action_log",plural:!1,selections:[Gt,{alias:null,args:null,concreteType:"IGThreadItemActionLogBoldSource",kind:"LinkedField",name:"bold",plural:!0,selections:ar,storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemActionLogTextAttributesSource",kind:"LinkedField",name:"text_attributes",plural:!0,selections:[rr,or,Rt,{alias:null,args:null,kind:"ScalarField",name:"intent",storageKey:null}],storageKey:null}],storageKey:null},l_={alias:null,args:null,concreteType:"IGThreadItemLinkSource",kind:"LinkedField",name:"link_source",plural:!1,selections:[Wp,G,{alias:null,args:null,concreteType:"IGThreadItemLinkContextSource",kind:"LinkedField",name:"link_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_summary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_image_url",storageKey:null}],storageKey:null}],storageKey:null},s_={alias:null,args:null,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"animated_media",plural:!1,selections:Da,storageKey:null},u_={alias:null,args:null,concreteType:"IGThreadItemVoiceMediaSource",kind:"LinkedField",name:"voice_media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_src",storageKey:null},at],storageKey:null},c_=[Ip,Xp],d_={alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!1,selections:c_,storageKey:null},m_={alias:null,args:null,concreteType:"IGMessageThreadItemHScrollShareItem",kind:"LinkedField",name:"hscroll_share",plural:!0,selections:[Q,He,ne,d_],storageKey:null},p_={alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},__={alias:null,args:null,kind:"ScalarField",name:"header_subtitle",storageKey:null},f_={alias:null,args:null,kind:"ScalarField",name:"header_icon_url",storageKey:null},g_={alias:null,args:null,concreteType:"IGMessageThreadItemCollectionShare",kind:"LinkedField",name:"shops_collection_share",plural:!1,selections:[p_,__,f_,Q,He,pn,d_],storageKey:null},h_={alias:null,args:null,concreteType:"IGMessageThreadItemAppointmentBooking",kind:"LinkedField",name:"appointment_booking",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"max_title_num_of_lines",storageKey:null},He,{alias:null,args:null,kind:"ScalarField",name:"max_subtitle_num_of_lines",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title_text",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"header_icon_url_info",plural:!1,selections:mo,storageKey:null},d_,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"preview_extra_urls_info",plural:!0,selections:mo,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_layout_type",storageKey:null},pn,{alias:null,args:null,concreteType:"IGXMAMessageCTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[X,Q],storageKey:null}],storageKey:null},y_={alias:null,args:null,concreteType:"IGMessageThreadItemShopShare",kind:"LinkedField",name:"shop_share",plural:!1,selections:[p_,__,f_,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"medias",plural:!0,selections:c_,storageKey:null},pn],storageKey:null},C_={alias:null,args:null,concreteType:"IGMessageThreadItemGenericXMA",kind:"LinkedField",name:"generic_xma",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"xma_template_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_layout_type",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"sub_title",storageKey:null},{alias:null,args:null,concreteType:"GenericXMACTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[Q,X],storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"preview_url_info",plural:!1,selections:c_,storageKey:null}],storageKey:null},b_={alias:null,args:null,kind:"ScalarField",name:"send_attribution",storageKey:null},v_={alias:null,args:null,concreteType:"IGMessageThreadItemRepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[G,Ms,il,qd],storageKey:null},S_={alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},R_={alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},L_={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[S_,R_],storageKey:null},E_=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,Wo,fd,Op,Bp,G,Wp,qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Ip,Vp,Hp,Gp,jp],storageKey:null},Kp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[Qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Ip,Xp,Hp,Gp,jp],storageKey:null},Yp,Zp,e_,t_,n_],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[r_,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:hp,storageKey:null},o_],storageKey:null},{alias:null,args:Up,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[Qp,a_],storageKey:null},i_,l_,s_,u_,m_,g_,h_,y_,C_,b_,v_],storageKey:null},L_],k_={alias:null,args:null,kind:"ScalarField",name:"selected_thread_type",storageKey:null},I_=[{kind:"Variable",name:"after",variableName:"item_after"},{kind:"Variable",name:"first",variableName:"item_limit"}],T_=[{kind:"Variable",name:"before_time_precise",variableName:"before"},{kind:"Variable",name:"last",variableName:"message_limit"}],D_={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null},x_={condition:"load_delivery_receipts",kind:"Condition",passingValue:!0,selections:pp},$_={kind:"Variable",name:"page_id",variableName:"page_id"},P_=[$_],N_={alias:null,args:null,kind:"ScalarField",name:"business_id",storageKey:null},M_={kind:"RootArgument",name:"page_id"},w_={kind:"Variable",name:"business_assets",variableName:"businessAssets"},A_={condition:"getShouldUnifyConfigQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:[w_,$_],concreteType:"BizInboxFeatureConfigWrapper",kind:"LinkedField",name:"selected_thread_biz_inbox_feature_config",plural:!1,selections:[{alias:null,args:null,concreteType:"BizInboxGatingConfig",kind:"LinkedField",name:"gating_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_commerce_invoice_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_product_picker_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_availability_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_create_appointment_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_customer_feedback_button_on_move_to_done",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_form_builder_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_inthread_forms_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_marketing_messages_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"marketing_messages_in_composer_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_gcash_id_share_and_copy_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_live_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_biz_ai_in_composer",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizInboxCommerceInvoiceButtonConfig",kind:"LinkedField",name:"commerce_invoice_button_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_confirm_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_payment_onboarding",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_request_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commerce_invoice_button_icon",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},F_=[yp],O_={alias:"xfb_unified_thread_list_pending",args:[{kind:"Variable",name:"msgr_params",variableName:"msgr_pending_params"},{kind:"Variable",name:"wa_params",variableName:"wa_pending_params"}],concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{condition:"isWorkUser",kind:"Condition",passingValue:!1,selections:[{alias:"wa_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:F_,storageKey:null},{alias:"msg_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:F_,storageKey:null}]}],storageKey:null},B_={alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_add_activities",storageKey:null}],storageKey:null},W_=[w_],q_=[Ze,w],U_={kind:"InlineFragment",selections:q,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},V_={kind:"InlineFragment",selections:q,type:"GenericAttachmentMedia",abstractKey:null},H_={kind:"InlineFragment",selections:q,type:"MontageImage",abstractKey:null},G_={kind:"InlineFragment",selections:q,type:"MontageVideo",abstractKey:null},z_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,ue,de,_e,fe,ge,he,_l,U_,V_,H_,G_],storageKey:null},j_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[Ze,Q,ae],storageKey:null},K_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[Ze,w,{kind:"InlineFragment",selections:[xe,$e,Pe,Ne],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null},Q_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[Ze,je,Ke],storageKey:null},X_={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[Te,De,K_,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Q_,Xe,Y],storageKey:null},Y_=[Ze,{kind:"TypeDiscriminator",abstractKey:"__isPaymentActivityAction"},mt,pt,_t,Q,gt,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[Ze,it,ut,ct,bt,w],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}],J_={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:Y_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[Ze,St,Lt,kt,It],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:Y_,storageKey:null},Rt,Tt,G],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:Y_,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"},Z_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[Ze,w,O,lt,$t],storageKey:null},ef=[Ft,w],tf={alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:ef,storageKey:null},Bt,w],storageKey:null},nf={alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[O,Gt,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:ef,storageKey:null},ae,w],storageKey:null},rf=[Ze,O,w,lt,$t],of={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:rf,storageKey:null},af={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:rf,storageKey:null},lf={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:[ut,Z_,Pt,Nt,it,Mt,wt,At,tf,Ut,Vt,Ht,nf,w,zt,jt,Kt,J_],storageKey:null},sf=[Te,De,K_,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Q_],uf={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:sf,storageKey:null},cf={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:sf,storageKey:null},df=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Gt,cn,Ne,dn,O,mn,pn,cf,uf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[Ze,gn,hn,vn,In,Tn,_l,U_,V_,H_,G_],storageKey:null}],storageKey:null}],mf=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,w,O],storageKey:null},w],pf={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[Ze,ua,w],storageKey:null},_f={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,uf],storageKey:null}],storageKey:null},ff=[O,w],gf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,ge,Ni,_l,U_,V_,H_,G_],storageKey:null},hf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,Ft,_l,U_,V_,H_,G_],storageKey:null},yf={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:ef,storageKey:null},Cf={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[yf],storageKey:null},bf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:q_,storageKey:null},vf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,w,et,{kind:"InlineFragment",selections:[tt,he,nt,rt,ot,at],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[it,ut,ct,J_],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:[ut,Z_,Pt,Nt,it,Mt,wt,At,tf,Ut,Vt,Ht,nf,zt,jt,Kt,J_],type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[Xt,Yt,of,af,tn,nn,Kt,lf,on,Ht,an,zt,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[Xt,Yt,of,af,tn,nn,w,Kt,lf,on,Ht,an,zt,J_],storageKey:null},J_],type:"PeerToPeerPaymentRequest",abstractKey:null},J_,{kind:"InlineFragment",selections:[ln,uf,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:df,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[ln,uf,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:df,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},xn,wn,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:q_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:q_,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[An,Fn,On,Bn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[Ze,qn,Un,_l],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[Vn,W,Hn],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[zn,jn,Kn,Qn,Xn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[Yn,Jn,Zn,Gn,er,nr,ir,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Gt,lr,sr,{alias:null,args:ur,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[cr,w],storageKey:"images(first:1)"},dr],storageKey:null}],storageKey:null},mr,pr,_r,fr,gr,hr,yr,Cr,br,vr,Sr,Qn,Xn,Rr],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[Lr,Er,kr,Ir],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[Tr,Dr,xr,$r,Pr,Nr],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:mf,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Ar,Fr,Or,Br,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Ze,O,_l],storageKey:null},qr,Ur,Vr,Hr,Gr,O,zr],type:"Event",abstractKey:null},jr,Kr,{kind:"InlineFragment",selections:[O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,cf,uf],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[Qr,to,no,pn,Xr,ro,oo,ao,io,O],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[lo,so,uo,co,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[po,w],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[_o,fo,go,ho,yo,Co,bo,vo,So,To,fr,Do,xo,$o,Po,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:df,storageKey:null},No,Mo,wo,Ao],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Fo,Oo,Bo,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Wo,O,qo,Gt,Vo,Ho,Go,w],storageKey:null},zo,Ko,Qo,Xo,Yo,Jo,Zo,ea,ta,na,ra,oa,aa],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:[ia,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:q_,storageKey:null},la,sa,pf,ae],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[la,pf],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[da,ma,pa,_a,O,fa,ga],type:"Page",abstractKey:null},Ca,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[w,ba,va,Sa,Ea,ka,_f,$a,Na],storageKey:null},Ma,wa,Pa,Aa,No],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[ba,va,Sa,Ea,ka,_f,Fa,Oa,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ho,w],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:ff,storageKey:null},No],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[Ba,Wa,O,qa],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[Ua],type:"UserLeadGenInfo",abstractKey:null},Ha,{kind:"InlineFragment",selections:[O,Ga,ne,rt,ot],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[he,nt,rt,ot,tt,ie,za,le],type:"WECMessageVideo",abstractKey:null},Qa,{kind:"InlineFragment",selections:[rt,Za,ni],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[ri,oi,ai,ii,li,si,ui],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[ci],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:[Ze,xt,w],storageKey:null}],storageKey:null},mi],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[mi],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[mi,pi,_i],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[gi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[Ze,hi,yi,Ci,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,_l],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[vi,Si,Ri,{alias:null,args:Ei,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[ki,w],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'},w],storageKey:null},Ii,on,Ti,Pi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[Ze,O,Di,$i,w],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[be,ae,Ce,j,gf,wi,{alias:null,args:Ai,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[Fi,{alias:"files",args:Oi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[wi,hf],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:Wi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[hf],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[qi,Ui,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[gf],storageKey:null},w],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[O,lt,Cf,zi,ji],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[O,Ki,Qi,Xi,Cf,bf,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:q_,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Ji,Zi,el,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[tl,O,nl,rl,w],storageKey:null},ol,al,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[Q,G,Rt,ze,il,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[lt,O,w],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:[cf],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[ll],type:"ApplicationReferralXMA",abstractKey:null},ul,{kind:"InlineFragment",selections:[cl],type:"XFBP2MXMA",abstractKey:null},dl],storageKey:null},Sf={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je,vf,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je,vf],storageKey:null}],storageKey:null},Rf={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[H,Sf,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,O,w,{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null},Sf],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null},w],storageKey:null},Lf=[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessageBlobAttachment"},Cl,bl,Sl,In,Ll,_l],Ef={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:Lf,storageKey:null},kf={alias:"last_message",args:B,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[Ze,W,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:q_,storageKey:null},w],storageKey:null},U,V,xl,$l,w,{kind:"InlineFragment",selections:[Rf,gl,Ef],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[Il,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,Dl],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null}],storageKey:null}],storageKey:"messages(last:1)"},If={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Ml,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[wl,Al,w],storageKey:null},w],storageKey:null}],storageKey:null}],storageKey:null},Tf={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[os,ls,ss,w],storageKey:null},Df={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[w,cs,ds,ms,ps,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[_s,fs,gs,hs,w],storageKey:null}],storageKey:null},w],storageKey:null}],storageKey:null},xf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:q_,storageKey:null},$f={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[Ze,Ls,w],storageKey:null},Pf={alias:null,args:ur,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,ks,ya,Is,Ts,Ds,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[xs,w],storageKey:null},$s,Ps,Ns,ha,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[Ms,w],storageKey:null},ws,As,Fs,Os],storageKey:null}],storageKey:"event_reminders(first:1)"},Nf={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Vs,Lr,Ks,Xs,Zs,w],storageKey:null},Mf={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[tu,nu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:q_,storageKey:null}],storageKey:null},wf={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[w,Hn,sa,la,ou,au,iu,lu,su,uu,cu,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[Ze,Ft,w],storageKey:null},du,mu],storageKey:null},pu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:q_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[Ze,w,fu],storageKey:null},hu],storageKey:null},Af={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[Cu,O,lt,bf,bu,vu,Su,Ru,Eu,ku],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Cu,O,lt,bu,vu,Su,zr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Ze,Iu,_l],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null},Ff={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[w,Fu,Ou,Bu,Wu,qu,Hu,Gu,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[ju,w],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[Ze,Ft,_l,{kind:"InlineFragment",selections:q,type:"CatalogMarketplaceEnhancementTransformedImage",abstractKey:null},{kind:"InlineFragment",selections:q,type:"XFBBasicMarketplaceImage",abstractKey:null}],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},Ku],storageKey:null},Of={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w],storageKey:null}],storageKey:null},Bf={kind:"TypeDiscriminator",abstractKey:"__isMessage"},Wf={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[mc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:q_,storageKey:null}],storageKey:null},qf={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,w,O,Di],storageKey:null},w],storageKey:null},Uf={kind:"InlineFragment",selections:[hc,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,yc,Cc,bc,_l],storageKey:null},vc],storageKey:null}],storageKey:null},Sc,Rf,gl,Ef,Rc],type:"UserMessage",abstractKey:null},Vf=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:Lf,storageKey:null}],Hf={kind:"InlineFragment",selections:[Ec,W,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Vf,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null},Gf={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[xc,H,kn,w],storageKey:null},W],type:"ThreadImageMessage",abstractKey:null},zf={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,wc,Bc,Wc,qc,Uc,Vc,Hc,Gc,zc,Kc,Qc,Xc,Yc,Jc,Zc,td,{kind:"InlineFragment",selections:[Tl,nd,rd,od,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[Ze,{kind:"InlineFragment",selections:[ad,sl,yf,id],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},ld],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},sd,ud,_d,gd,hd,Cd,bd,vd,Sd,Rd,Ld,kd,Id,Td,xd,$d,Pd,{kind:"InlineFragment",selections:[Nd,Md,wd,ed,Ad,Fd,Od,Bd,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Vf,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Wd,Hd,Gd,jd,Kd,Qd,Xd,Yd,Zd,em,tm,nm,rm],storageKey:null},Il,W],type:"GenericAdminTextMessage",abstractKey:null},jf=[Ze,Bf,ec,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,Wf,_c,qf,gc,$l,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[fr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[Ze,Bf,ec,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,Wf,_c,qf,gc,$l,w,Uf,kc,Hf,Dc,Gf,Pc,Nc,zf,im,lm],storageKey:null}],storageKey:null},w,Uf,kc,Hf,Dc,Gf,Pc,Nc,zf,im,lm],Kf={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[Ms,Zu,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:jf,storageKey:null}]}],storageKey:null},Qf={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w,O,Ki,cm,lt,Eu,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[dm,w],storageKey:null}],storageKey:null}],storageKey:null},Xf={alias:null,args:ur,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,gm,hm,{alias:null,args:ur,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[ym,Cm,w],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"},Yf={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:ff,storageKey:null},Gi],storageKey:null},Jf={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:mf,storageKey:null},Zf={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[km,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessagingActor"},w,O,{kind:"InlineFragment",selections:[Im,ae,Tm,xt,Dm,xm,$m,Pm,Nm,Mm,wm,Am,Fm,Yf],type:"User",abstractKey:null},Bm,Wm,Um,Vm,Gm,zm,jm,{kind:"InlineFragment",selections:[ae,Tm,Dm,Km,Pm,Yf],type:"ReducedMessagingActor",abstractKey:null},Xm,Ym,Jm,ep,tp,np,rp,op,ap,{kind:"InlineFragment",selections:[Tm,ip,lp,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[Jf,Fi],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[Jf],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null},w],storageKey:null}],storageKey:null}],storageKey:null},eg={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[cp,dp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:q_,storageKey:null}],storageKey:null}],storageKey:null},tg={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:jf,storageKey:null}]},ng=[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,F,O,kf,Nl,If,Ol,Bl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,Tf,Df,xf,bs,vs,Ss,$f,Pf,Ws,Us,Nf,Mf,wf,Af,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Ff,Xu,Yu,Of,Kf,Qf,Gt,_m,fm,Xf,vm,Sm,Rm,Lm,Em,Zf,eg,Wl,tg,_p],storageKey:null},M],rg=[gp,lt,w],og=[gp,Dm,O,lt,w],ag={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:og,storageKey:null},ig={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:og,storageKey:null},lg=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,Wo,fd,Op,Bp,G,Wp,qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Ip,Vp,Hp,Gp,ag],storageKey:null},Kp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[Ze,ig,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Ip,Xp,Hp,Gp,ag],storageKey:null},Yp,Zp,e_,t_,n_],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[r_,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:rg,storageKey:null},o_],storageKey:null},{alias:null,args:Up,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[ig,a_],storageKey:null},i_,l_,s_,u_,m_,g_,h_,y_,C_,b_,v_,w],storageKey:null},L_],sg={alias:null,args:null,kind:"ScalarField",name:"page_contact_id",storageKey:null},ug=[{kind:"Literal",name:"height",value:52},{kind:"Literal",name:"width",value:52}],cg=[{kind:"Literal",name:"first",value:20}],dg={alias:null,args:null,kind:"ScalarField",name:"contact_count",storageKey:null},mg={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},pg={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},_g={alias:null,args:null,kind:"ScalarField",name:"unit_type",storageKey:null},fg=[{kind:"Literal",name:"first",value:4},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_AND_VIDEO"}],gg={alias:"fbid",args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},hg={alias:"dim",args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:En,storageKey:null},yg={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[R_,S_],storageKey:null},Cg=[{kind:"Literal",name:"first",value:400}],bg={alias:null,args:null,kind:"ScalarField",name:"is_custom_event_reportable",storageKey:null},vg={alias:null,args:null,kind:"ScalarField",name:"is_synced_with_smb",storageKey:null},Sg={alias:null,args:null,kind:"ScalarField",name:"has_wa_contact",storageKey:null},Rg=[{kind:"Literal",name:"first",value:2}],Lg=[{alias:null,args:null,kind:"ScalarField",name:"nux_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_content_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_ui_type",storageKey:null}],Eg=[{alias:null,args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],kg={alias:null,args:[{kind:"Literal",name:"tab",value:"data_sharing"}],kind:"ScalarField",name:"settings_uri_in_business_view",storageKey:'settings_uri_in_business_view(tab:"data_sharing")'},Ig={alias:null,args:null,kind:"ScalarField",name:"__token",storageKey:null},Tg=[{kind:"Literal",name:"first",value:5},{kind:"Literal",name:"types",value:["BUSINESS_ORDER"]}],Dg={alias:null,args:null,kind:"ScalarField",name:"is_auto_detected",storageKey:null},xg={alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_redesigned_nux",storageKey:null},$g={alias:null,args:null,kind:"ScalarField",name:"is_classic_page",storageKey:null},Pg={alias:null,args:null,kind:"ScalarField",name:"is_detected_outcomes_label",storageKey:null},Ng={alias:null,args:Cg,concreteType:"CustomLabelsConnection",kind:"LinkedField",name:"custom_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"CustomLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,js,bg,Pg,vg,Sg,{alias:null,args:null,kind:"ScalarField",name:"is_immutable",storageKey:null},Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"custom_labels(first:400)"},Mg={alias:null,args:Cg,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_custom_labels",kind:"LinkedHandle",name:"custom_labels"},wg={alias:null,args:Cg,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_corp_labels",kind:"LinkedHandle",name:"corp_labels"},Ag={alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:q,storageKey:null},Fg=[{kind:"Literal",name:"gk_name",value:"mcom_kbank_integration_rollout"}],Og=[{alias:"passes",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],Bg=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_order_integration_gk"}],Wg=[{alias:"is_order_integration_enabled",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],qg=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_timeline_actions_gk"}],Ug=[{alias:"showTimelineActions",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x],kind:"Fragment",metadata:null,name:"BizInboxUnifiedThreadsQuery",selections:[$,{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:fp,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:fp,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:hp,storageKey:null},N,yp,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:ur,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:E_,storageKey:"thread_items(first:1)"}]}],storageKey:null},L_]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[k_,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I_,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:E_,storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[w,F,O,Pl,Nl,Fl,Ol,Bl,Wl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,us,ys,Cs,bs,vs,Ss,Es,Bs,Ws,Us,eu,ru,yu,Tu,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Qu,Xu,Yu,Ju,um,mm,pm,Gt,_m,fm,bm,vm,Sm,Rm,Lm,Em,up,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:T_,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[D_,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:sm,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[mp]},x_],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardContainerDetailsFrag_selectedContact",selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[N_],storageKey:null},{args:null,kind:"FragmentSpread",name:"BizKitContextCardContainer_contact"}],storageKey:null},{alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCard_config"}],storageKey:null}],args:null,argumentDefinitions:[M_]}]}],storageKey:null},A_],storageKey:null},O_,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardActivitySectionFrag_activitiesquery",selections:[{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivitySection_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityNuxForAutoDetected_contact"}],storageKey:null},B_],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:P_,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_page"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_page"}],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:W_,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_mbsBusinessAssets"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_mbsBusinessAssets"}],storageKey:null}]}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"businessAssets"},{kind:"RootArgument",name:"ig_params"},{kind:"RootArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},{kind:"RootArgument",name:"msgr_params"},M_,{kind:"RootArgument",name:"selected_item_id"},{kind:"RootArgument",name:"wa_params"}]}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,a,i,u,I,k,x,r,p,m,S,o,C,T,b,D,y,e,g,h,_,d,c,f,v,n,L,R,E,l,t],kind:"Operation",name:"BizInboxUnifiedThreadsQuery",selections:[$,{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:ng,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:ng,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:rg,storageKey:null},N,yp,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:ur,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:lg,storageKey:"thread_items(first:1)"}]},w],storageKey:null},L_]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[k_,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I_,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:lg,storageKey:null}]},w],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[w,F,O,kf,Nl,If,Ol,Bl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,Tf,Df,xf,bs,vs,Ss,$f,Pf,Ws,Us,Nf,Mf,wf,Af,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Ff,Xu,Yu,Of,Kf,Qf,Gt,_m,fm,Xf,vm,Sm,Rm,Lm,Em,Zf,Wl,tg,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:T_,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[D_,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:jf,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[eg]},x_],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[N_,K,{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sub_business_id",storageKey:null}],storageKey:null},w,{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[sg,{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[jc,{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},{alias:null,args:null,concreteType:"PageContactProfileURI",kind:"LinkedField",name:"profile_uris",plural:!0,selections:re,storageKey:null},{alias:null,args:ug,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris_prefetch",plural:!0,selections:re,storageKey:"profile_photo_uris_prefetch(height:52,width:52)"},{alias:null,args:null,kind:"ScalarField",name:"last_name",storageKey:null},{alias:"profile_photo_uri_about_section",args:[{kind:"Literal",name:"height",value:100},{kind:"Literal",name:"width",value:100}],concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:re,storageKey:"profile_photo_uris(height:100,width:100)"},{alias:null,args:null,kind:"ScalarField",name:"address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_name",storageKey:null},nc,{alias:"phone",args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"national_number",storageKey:null},{alias:"phoneNumber",args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},Io,{alias:null,args:null,kind:"ScalarField",name:"zip_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,concreteType:"PageContactBirthday",kind:"LinkedField",name:"birthday",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"formatted_birthday",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggested_email_address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fallback_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_state",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ban_action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_banned",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_blocked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_wec_blocked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_onsite_user",storageKey:null},Bu,{alias:null,args:cg,concreteType:"BizCRMContactSharedAttributesCorpLabelListConnection",kind:"LinkedField",name:"corp_label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesCorpLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,zs,dg,Gs,Ys,Js,js,Ze],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"corp_label_list(first:20)"},{alias:null,args:cg,filters:null,handle:"connection",key:"BizKitContextCard_corp_label_list",kind:"LinkedHandle",name:"corp_label_list"},{alias:null,args:cg,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsConnection",kind:"LinkedField",name:"suggested_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,w,O,Hs,{kind:"InlineFragment",selections:[Ac,Rl,{alias:null,args:null,kind:"ScalarField",name:"upsell",storageKey:null}],type:"BusinessPresenceDerivedLabel",abstractKey:null}],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"suggested_labels(first:20)"},{alias:null,args:cg,filters:null,handle:"connection",key:"BizKitContextCard_suggested_labels",kind:"LinkedHandle",name:"suggested_labels"},{alias:null,args:null,kind:"ScalarField",name:"is_guest_chat",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizCRMContactIGIDs",kind:"LinkedField",name:"ig_ids",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_id_v2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_eimu_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactIGAttributes",kind:"LinkedField",name:"ig_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_thread_id",storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactIGUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[_g,G],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[qd,{alias:null,args:null,concreteType:"BizCRMContactFBUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:[{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,ae,_l],storageKey:null},Ge,fi],storageKey:null},G],storageKey:null},_g],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessengerThreadAttribute",kind:"LinkedField",name:"messenger_thread",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"one_to_one_thread",plural:!1,selections:[{alias:"sharedMedia",args:fg,concreteType:"MessageSharedMediaConnection",kind:"LinkedField",name:"message_shared_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageSharedMediaEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessageSharedMedia"},_l,{kind:"InlineFragment",selections:[gg,Ft,hg],type:"MessageImage",abstractKey:null},{kind:"InlineFragment",selections:[gg,Ft,hg,he],type:"MessageVideo",abstractKey:null}],storageKey:null},mg],storageKey:null},yg],storageKey:'message_shared_media(first:4,message_shared_media_type:"PHOTO_AND_VIDEO")'},{alias:"sharedMedia",args:fg,filters:["message_shared_media_type"],handle:"connection",key:"BizKitContextCardSharedPhotos_sharedMedia",kind:"LinkedHandle",name:"message_shared_media"},w],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactBusinessAttributes",kind:"LinkedField",name:"business_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactCommunicationPreference",kind:"LinkedField",name:"communication_preference",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"email_subscription_status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttribute",kind:"LinkedField",name:"customer_labels",plural:!1,selections:[{alias:null,args:Cg,concreteType:"BizCRMContactMessageLabelAttributeLabelListConnection",kind:"LinkedField",name:"label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,js,bg,vg,Sg,Ze],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"label_list(first:400)"},{alias:null,args:Cg,filters:null,handle:"connection",key:"Contact_customer_label_list",kind:"LinkedHandle",name:"label_list"},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsConnection",kind:"LinkedField",name:"customer_custom_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"node",plural:!1,selections:Qs,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttribute",kind:"LinkedField",name:"admin_notes",plural:!1,selections:[{alias:null,args:Rg,concreteType:"BizCRMContactAdminNotesAttributeNotesListConnection",kind:"LinkedField",name:"notes_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttributeNotesListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageAdminNote",kind:"LinkedField",name:"node",plural:!1,selections:[w,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:z,storageKey:null},il,{alias:null,args:null,kind:"ScalarField",name:"note_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_source_type",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"underlying_admin_creator",plural:!1,selections:[Ze,O,w],storageKey:null},Ze],storageKey:null},mg],storageKey:null},yg,pg],storageKey:"notes_list(first:2)"},{alias:null,args:Rg,filters:null,handle:"connection",key:"BizKitContextCard_notes_list",kind:"LinkedHandle",name:"notes_list"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactWAAttributes",kind:"LinkedField",name:"wa_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"wa_customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_enable_ads_consent_in_ctwa",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_wa_automated_label_nux",storageKey:null},{alias:"adsDataSharingLabelsNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"LABEL_CREATION_WA"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"LABEL_CREATION_WA")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"gk_name",value:"ctm_custom_label_reporting_pages"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"ctm_custom_label_reporting_pages")'},kg,w,{alias:null,args:null,kind:"ScalarField",name:"is_p2m_lite_payment_onboarded",storageKey:null},{alias:null,args:[{kind:"Literal",name:"tab",value:"DATA_SHARING"}],kind:"ScalarField",name:"wa_settings_uri_in_business_view",storageKey:'wa_settings_uri_in_business_view(tab:"DATA_SHARING")'},{alias:null,args:null,concreteType:"WhatsAppBusinessAccount",kind:"LinkedField",name:"linked_whatsapp_business_account",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_consented_to_ctwa_data_sharing",storageKey:null},w],storageKey:null}],storageKey:null},Ig,{alias:null,args:null,concreteType:"BizCRMContactBusinessActions",kind:"LinkedField",name:"business_actions",plural:!1,selections:[{alias:null,args:Tg,concreteType:"BizCRMContactBusinessActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactBusinessActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{alias:null,args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"contact_action",plural:!1,selections:[Ze,il,ft,K,qo,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"descriptions",plural:!0,selections:z,storageKey:null},Ne,{alias:null,args:null,kind:"ScalarField",name:"click_url",storageKey:null},_t,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"invoice_id",storageKey:null},zd,Dg],type:"BizCRMContactAdAction",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:q,storageKey:null}],type:"BizCRMContactFacebookActionWithStory",abstractKey:null},{kind:"InlineFragment",selections:[zd,Gs,Dg,{alias:null,args:null,kind:"ScalarField",name:"show_ad_icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"data_silo_auto_detected_activity",storageKey:null}],type:"BizCRMContactCustomAction",abstractKey:null},{kind:"InlineFragment",selections:[Gs],type:"BizCRMContactBusinessOrderAction",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},mg],storageKey:null},yg],storageKey:'actions(first:5,types:["BUSINESS_ORDER"])'},{alias:null,args:Tg,filters:["types"],handle:"connection",key:"BizKitContextCardOrders__actions",kind:"LinkedHandle",name:"actions"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_consent_upsell_in_inbox_at_thread_entry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_event_sharing_consent_at_thread_entry",storageKey:null},{alias:null,args:null,concreteType:"XFBMBSAdsEventSharingSettings",kind:"LinkedField",name:"mbs_ads_event_sharing_settings",plural:!1,selections:[w,{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_business_opt_in_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_consumer_opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY_ON_THREAD_ENTRY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY_ON_THREAD_ENTRY")'},xg,{alias:null,args:null,kind:"ScalarField",name:"has_consented_to_contact_card_tos",storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[$g],storageKey:null}]},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[$g,w],storageKey:null}]},{condition:"shouldSkipMessage",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[{alias:null,args:ug,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:re,storageKey:"profile_photo_uris(height:52,width:52)"}],storageKey:null},{alias:null,args:null,concreteType:"PageContactCTAType",kind:"LinkedField",name:"contact_ctas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_type",storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"shouldSkipPageQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[Ng,Mg,{alias:null,args:Cg,concreteType:"PageCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,zs,dg,Gs,Ys,Js,js,Pg,Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"corp_labels(first:400)"},wg,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"if_viewer_can_manage_permissions",plural:!1,selections:q_,storageKey:null},Ag,{alias:"is_in_kbank_rollout",args:Fg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Og,storageKey:'gk_check(gk_name:"mcom_kbank_integration_rollout")'},{alias:"show_payment_onboarding_context_card",args:[{kind:"Literal",name:"gk_name",value:"messenger_p2m_lite_merchant_onboarding"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"messenger_p2m_lite_merchant_onboarding")'}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[Ng,Mg,{alias:null,args:Cg,concreteType:"XFBMBSBusinessAssetsCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssetsCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,Ys,Js,js,Pg,Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"corp_labels(first:400)"},wg,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page_if_viewer_can_manage_permissions",plural:!1,selections:q_,storageKey:null},Ag,{alias:"is_in_kbank_rollout",args:Fg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Og,storageKey:'gk_check_page(gk_name:"mcom_kbank_integration_rollout")'}],storageKey:null}]}]}],storageKey:null},{alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sections",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null}],storageKey:null}]}],storageKey:null},A_],storageKey:null},O_,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActions",kind:"LinkedField",name:"all_actions",plural:!1,selections:[{alias:null,args:Rg,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{alias:"codeSplitWrapper",args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{args:null,documentName:"BizKitContextCardActivityListItem3DWrapper_BizCRMContactAction3DWrapper",fragmentName:"BizKitContextCardActivityListItem_node",fragmentPropName:"node",kind:"ModuleImport"}],storageKey:null}],storageKey:null},mg],storageKey:null},yg,pg],storageKey:"actions(first:2)"},{alias:null,args:Rg,filters:null,handle:"connection",key:"BizKitContextCardActivityList_actions",kind:"LinkedHandle",name:"actions"},{alias:"interaction_count",args:null,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:Lu,storageKey:null}],storageKey:null},w,Ig,{alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[qd],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[sg],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_nux",storageKey:null},xg,{alias:"adsDataSharingActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"ACTIVITY")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[kg,w,{alias:"two_step_do_nux_tour_gk",args:[{kind:"Literal",name:"gk_name",value:"two_step_do_nux_tour"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"two_step_do_nux_tour")'}],storageKey:null},{alias:"adsDataSharingDetectedActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY")'}],storageKey:null},B_],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:P_,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:Bg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Wg,storageKey:'gk_check(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"translationFix",args:[{kind:"Literal",name:"qe_universe",value:"tas_bizweb_translation_fix_universe"}],concreteType:"QECheck",kind:"LinkedField",name:"qe_check",plural:!1,selections:[{alias:"is_enabled",args:[{kind:"Literal",name:"bool_default",value:!1},{kind:"Literal",name:"param_name",value:"has_string_translation"}],kind:"ScalarField",name:"bool",storageKey:'bool(bool_default:false,param_name:"has_string_translation")'}],storageKey:'qe_check(qe_universe:"tas_bizweb_translation_fix_universe")'},{alias:"timelineActionsCheck",args:qg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Ug,storageKey:'gk_check(gk_name:"ctm_www_tas_timeline_actions_gk")'},w],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:W_,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:Bg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Wg,storageKey:'gk_check_page(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"timelineActionsCheck",args:qg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Ug,storageKey:'gk_check_page(gk_name:"ctm_www_tas_timeline_actions_gk")'},w],storageKey:null}]}]}]},params:{id:"24450288948004961",metadata:{},name:"BizInboxUnifiedThreadsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("699"),s=o("FalcoLoggerInternal").create("armadillo_cutover_client",e),u=s;l.default=u}),98);
__d("DedupMiThreadCreationCache",["justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set,s=function(n){var t=r("justknobx")._("4749");t&&e.add(n)};l.DedupMiThreadCreationCache=e,l.addToDedupMiThreadCreationCache=s}),98);
__d("EBSMMainthreadAPI",["EBAPIQPLPoints","EBDeps","EBGating","EBMainThreadEBDBApiDeferred","EBSMWorkerThreadAPI","I64","LSIntEnum","MAWBridgeSendAndReceive","MAWWaitForBackendSetup","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","QPLFlow","ReQL","WAHashStringToNumber","WebSession","gkx","justknobx","qpl","requireDeferred","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u=r("requireDeferred"))("EBAddDeviceWithRecoveryCode").__setRef("EBSMMainthreadAPI"),d=u("EBAddVirtualDevice").__setRef("EBSMMainthreadAPI"),m=u("EBDeleteEncryptedBackup").__setRef("EBSMMainthreadAPI"),p=u("EBFetchBackupIds").__setRef("EBSMMainthreadAPI"),_=u("EBInitializeBackup").__setRef("EBSMMainthreadAPI"),f=u("EBOptOut").__setRef("EBSMMainthreadAPI"),g=u("EBOtcAddDevice").__setRef("EBSMMainthreadAPI"),h=u("EBRevokeVirtualDevice").__setRef("EBSMMainthreadAPI"),y=babelHelpers.extends({},r("EBSMWorkerThreadAPI"),{addDeviceWithRecoveryCode:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0||t[0]==null)return Promise.reject("Missing args");if(o("EBMainThreadEBDBApiDeferred").trackOverprompting(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent),r("gkx")("17731")&&t.length>0&&t[0]!=null)return o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","addDeviceWithRecoveryCodeInWorker",{recoveryCode:t[0].recoveryCode,userId:t[0].userId});var a=o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1}},timeoutInMs:r("justknobx")._("2444")});return c.load().then(function(e){return e.addDeviceWithRecoveryCode(babelHelpers.extends({},t[0],{qplFlow:a}))})},addVirtualDevice:async function(t){var e=t.actionType,n=o("QPLFlow").startQPLFlow(r("qpl")._(521483240,"615"),{annotations:{int:{actionType:e}},timeoutInMs:r("justknobx")._("4211")});n.addPoint("add_virtual_device_start");var a=await C();return a==null?(n.addPoint("add_virtual_device_no_recovery_code_data"),Promise.reject("Missing recovery code data for addVirtualDevice")):r("gkx")("12707")?o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","addVirtualDeviceInWorker",{actionType:e,qplInstanceKeyMainthread:n.getQPLAttrs().instanceKey,recoveryCodeData:a}):d.load().then(function(t){return t.addVirtualDevice({actionType:e,qplFlow:n,recoveryCodeData:a})})},deleteEncryptedBackup:function(t){var e=t.reason,n=o("QPLFlow").startQPLFlow(r("qpl")._(521484370,"2995"),{timeoutInMs:r("justknobx")._("4553")});return n.addPoint(o("EBAPIQPLPoints").EBDeleteEBQPLPoints.DELETE_EB_START),r("gkx")("12707")?(n.addPoint(o("EBAPIQPLPoints").EBDeleteEBQPLPoints.DELETE_EB_BRIDGE_CALL_START),o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","ebDeleteEncryptedBackupInWorker",{qplInstanceKeyMainthread:n.getQPLAttrs().instanceKey,reason:e})):m.load().then(function(t){return t.deleteEncryptedBackup({qplFlow:n,reason:e})})},ebOptOut:function(t){var e=o("QPLFlow").startQPLFlow(r("qpl")._(521482558,"2558"),{annotations:{bool:{isBackendSetupOnStart:o("MAWWaitForBackendSetup").isBackendSetupSuccessful()}}});return e.addPoint(o("EBAPIQPLPoints").EBOptOutQPLPoints.OPT_OUT_START),r("gkx")("12707")?(e.addPoint(o("EBAPIQPLPoints").EBOptOutQPLPoints.OPT_OUT_BRIDGE_CALL_START),e.addPoint("eb_fetch_backup_ids_bridge_call_start"),o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","ebOptOutInWorker",{qplInstanceKeyMainthread:e.getQPLAttrs().instanceKey})):f.load().then(function(t){return t.ebOptOut({qplFlow:e})})},fetchBackupIds:function(t,n){if(o("EBGating").isFetchBackupIdsFromWorker())return o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","fetchBackupIdsInWorker",{source:t});var e=o("QPLFlow").startQPLFlow(r("qpl")._(521471024,"2275"),{annotations:{bool:{isBackendSetupOnStart:o("MAWWaitForBackendSetup").isBackendSetupSuccessful()},string:{ebSessionIdentifier:o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),fetchBackupIdsVersion:"msys",sessionTabId:o("WebSession").getId(),source:t}}});return e.addPoint("eb_fetch_backup_ids_start"),p.load().then(function(n){return n.fetchBackupIds(t,e)})},initializeBackup:async function(n){var t=n.virtualDeviceId,a=n.virtualDeviceType;if(r("gkx")("17731")&&r("justknobx")._("5278")){var i=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(16)),l=i?null:await C();return l==null&&!i?Promise.reject("Missing recovery code data for initializeBackup"):(l!=null&&b(),o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","initializeBackupInWorker",{recoveryCodeData:l,virtualDeviceType:a}))}else{var u=o("WAHashStringToNumber").hashStringToNumber(r("uuidv4")()),c=o("QPLFlow").startQPLFlow(r("qpl")._(521478750,"2850"),{annotations:{int:{instanceKey:u,virtualDeviceType:(e||(e=o("I64"))).to_int32(a)}},instanceKey:u,timeoutInMs:r("justknobx")._("4211")});return c.addPoint(o("EBAPIQPLPoints").EBBackupInitQPLPoints.INITIALIZE_BACKUP_START),t!=null&&c.addAnnotations({string:{virtualDeviceId:t}}),_.load().then(function(e){return e.initializeBackup(c,a)})}},otcAddDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("EBDeps").getDeps().isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1,isInWorker:!1,isOtc:!0}},timeoutInMs:r("justknobx")._("2444")});return r("gkx")("17731")&&t.length>0&&t[0]!=null?o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","addDeviceWithOtcInWorker",{initiatorId:t[0].initiatorId,qplInstanceKeyMainthread:a.getQPLAttrs().instanceKey,secrets:t[0].secrets}):g.load().then(function(e){return e.otcAddDevice(babelHelpers.extends({},t[0],{qplFlow:a}))})},revokeVirtualDevice:function(t){var e=t.virtualDeviceId,n=o("QPLFlow").startQPLFlow(r("qpl")._(521473995,"3294"));return n.addPoint("revoked_virtual_device_mainthread_start"),r("gkx")("12707")?(n.addPoint("revoked_virtual_device_bridge_call_start"),o("MAWBridgeSendAndReceive").sendAndReceive("ebsmapi","revokeVirtualDeviceInWorker",{qplInstanceKeyMainthread:n.getQPLAttrs().instanceKey,virtualDeviceId:e})):h.load().then(function(t){return t.revokeVirtualDevice(e,n)})}});async function C(){var e=await o("EBDeps").getDeps().getLSDB(),t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_generated_recovery_code));if(t.length===0)return Promise.resolve(null);var n=t[0];return Promise.resolve({cloud_service_account:n.cloudServiceAccount,hsm_pin_normalization_status:n.hsmPinNormalizationStatus,recovery_code:n.recoveryCode,security_question_type:null,trusted_contact_id:null,virtual_device_type:n.virtualDeviceType})}async function b(){var e=await o("EBDeps").getDeps().getLSDB();return e.runInTransaction(async function(e){for(var t=e.secure_encrypted_backups_generated_recovery_code,n=t.entries(new WeakMap),r=await n.next();!r.done;)await t.delete.apply(t,r.value[0]),r=await n.next()},"readwrite")}var v=y;l.default=v}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function s(t,n){e.onReadyImmediately(function(e){var r=e.saveAs;r(n,t)})}l.saveFile=s}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("bump_timestamp_ms",e[1]),r[0].set("thread_key",e[0]),r[0].set("bumped_by_local_device_send",e[2]),r[0].set("tam_thread_subtype",t.i64.cast([0,0])),r[0].set("wa_jid",void 0),r[0].set("message_ephemeral_duration_in_sec",t.i64.cast([0,0])),r[0].set("message_product_type",void 0),r[0].set("is_message_deletion",!1),r[0].set("is_unbump",e[3]),r[1]=r[0].get("thread_key"),t.storedProcedure(n("LSCancelTaskByQueueName"),t.i64.to_string(r[1]),t.i64.cast([0,389]))},function(o){return r[2]=new t.Map,r[2].set("bump_timestamp_ms",e[1]),r[2].set("thread_key",e[0]),r[2].set("bumped_by_local_device_send",e[2]),r[2].set("tam_thread_subtype",t.i64.cast([0,0])),r[2].set("wa_jid",void 0),r[2].set("message_ephemeral_duration_in_sec",t.i64.cast([0,0])),r[2].set("message_product_type",void 0),r[2].set("is_message_deletion",!1),r[2].set("is_unbump",e[3]),r[3]=r[2].get("thread_key"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,389]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBumpE2EEMetadataThread"),a.threadKey,a.serverAuthoritativeTimestampMs,a.bumpedByLocalDeviceSend,a.isUnbump);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCreateE2EEMetadataThread",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSQplAnnotateInt.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][createE2EEMetadataThread] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[19]=new t.Map,r[19].set("error_msg","Expected a nonempty query result"),r[19].set("code",t.i64.cast([0,3])),r[19].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[20]=t.createArray(),r[21]=(r[20].push(r[19]),r[20]),o=[void 0,r[20]],r[2]=o[0],r[3]=o[1]):(n=l.item,r[19]=new t.Map,r[19].set("backup_id",n.backupId),r[19].set("device_public_key_blob",n.devicePublicKeyBlob),r[19].set("device_private_key_blob",n.devicePrivateKeyBlob),r[19].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[19].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[19].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[19].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[19].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[19].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[19].set("orf_client_state_v2_blob",void 0),r[19].set("orf_v2_authority_level",void 0),r[19].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[19].set("device_id",n.deviceId),r[19].set("backup_tenancy",n.backupTenancy),r[19].set("encryption_version",n.encryptionVersion),r[19].set("revision_version",n.revisionVersion),r[19].set("initialize_restore_result",void 0),r[19].set("device_creation_timestamp_sec",void 0),r[19].set("authority_level",n.authorityLevel),a=[r[19],void 0],r[2]=a[0],r[3]=a[1])})},function(e){return r[5]=new t.Map,r[5].set("value",r[2]),r[5].set("errors",r[3]),r[6]=r[5].get("value"),r[6]!==void 0?t.sequence([function(e){return r[19]=r[6].get("backup_id"),r[20]=r[6].get("device_public_key_blob"),r[21]=r[6].get("device_private_key_blob"),r[22]=r[6].get("epoch_storage_public_key_blob"),r[23]=r[6].get("epoch_storage_private_key_blob"),r[24]=r[6].get("epoch_auth_public_key_blob"),r[25]=r[6].get("epoch_auth_private_key_blob"),r[26]=r[6].get("mailbox_root_key_blob"),r[27]=r[6].get("ocmf_client_state_blob"),r[28]=r[6].get("orf_client_state_v2_blob"),r[29]=r[6].get("orf_v2_authority_level"),r[30]=r[6].get("oblivious_validation_token_blob"),r[31]=r[6].get("device_id"),r[32]=r[6].get("backup_tenancy"),r[33]=r[6].get("encryption_version"),r[34]=r[6].get("revision_version"),r[35]=r[6].get("initialize_restore_result"),r[36]=r[6].get("device_creation_timestamp_sec"),r[37]=r[6].get("authority_level"),t.i64.neq(r[31],void 0)?t.sequence([function(e){return r[39]=void 0,t.i64.neq(r[39],void 0)?t.resolve(r[40]=r[39]):t.sequence([function(e){return r[52]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[53]&&(r[62]=(r[52].push(t.i64.cast([0,0])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return r[54]&&(r[62]=(r[52].push(t.i64.cast([0,2])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return r[55]&&(r[62]=(r[52].push(t.i64.cast([0,3])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return r[56]&&(r[62]=(r[52].push(t.i64.cast([0,4])),r[52])),r[57]=t.createArray(),r[58]=t.i64.of_int32(r[52].length),t.i64.gt(r[58],t.i64.cast([0,0]))?t.loopAsync(r[58],function(e){return r[62]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[52],r[62]).then(function(e){var t;return t=e,r[63]=t[0],r[64]=t[1],t})},function(e){return r[65]=(r[57].push(r[63]),r[57])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[62]=t.createArray(),r[63]=t.i64.of_int32(r[57].length),t.i64.gt(r[63],t.i64.cast([0,0]))?t.loopAsync(r[63],function(e){return r[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[57],r[65]).then(function(e){var t;return t=e,r[66]=t[0],r[67]=t[1],t})},function(e){return r[68]=(r[62].push(t.i64.to_string(r[66])),r[62])}])}):t.resolve()},function(e){return r[64]=r[62].join(","),r[59]=r[64]}])},function(e){return r[57].some(function(e){return t.i64.eq(r[33],e)})?r[60]=r[33]:r[60]=void 0,t.i64.neq(r[60],void 0)?r[61]=r[60]:r[61]=void 0,r[40]=r[61]}])},function(e){return t.i64.neq(r[40],void 0)?r[41]=r[40]:r[41]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[42]=r[32]:r[42]=t.i64.cast([0,1]),t.nativeOperation(n("LSBase64Encode.nop"),r[27]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[26]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[45]=new t.Map,r[45].set("ocmf_client_state_blob",r[43]==null?"":r[43]),r[45].set("mailbox_root_key",r[44]==null?"":r[44]),r[46]=t.createArray(),t.forEach(t.filter(t.db.table(169).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),function(e){var t=e.item;return r[52]=(r[46].push(t.epochId),r[46])})},function(e){return r[50]="Queried locally available epochs. Count: ",r[47]=t.i64.of_int32(r[46].length),r[51]=t.i64.to_string(r[47]),r[48]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][MEBEpochClientUtils] ",r[48],r[50],r[48],r[51]].join("")),t.resolve()},function(e){return r[49]=new t.Map,r[49].set("device_id",r[31]),r[49].set("raw_tokens",r[45]),r[49].set("locally_available_epochs",r[46]),r[38]=r[49]}]):t.resolve(r[38]=void 0)},function(e){return r[7]=r[38]}]):t.resolve((r[19]=r[5].get("errors"),r[20]=r[5].get("errors"),r[7]=void 0))},function(e){return r[8]=t.i64.random(),r[9]=t.i64.to_string(r[8]),r[9]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,679677570]),r[9],!0,void 0):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,679677570]),r[9],"issue_task"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679677570]),r[9],"request_type","THREAD_POINT_QUERY"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateInt.nop"),t.i64.cast([0,679677570]),r[9],"task_creation_source",t.i64.cast([0,76])==null?t.i64.cast([-1,4294967295]):t.i64.cast([0,76])):t.resolve()},function(o){return r[10]=new t.Map,r[10].set("wa_jid",e[0]),r[10].set("offline_thread_key",e[1]),r[10].set("thread_type",e[2]),r[10].set("folder_type",e[3]),r[10].set("bump_timestamp_ms",e[4]),r[10].set("tam_thread_subtype",t.i64.cast([0,0])),r[10].set("created_by_local_device",e[5]),r[10].set("device_context",r[7]),r[10].set("qpl_instance_key",r[9]),r[10].set("should_run_privacy_and_folder_checks",!1),r[10].set("should_only_create_server_thread",!1),r[11]=r[10].get("offline_thread_key"),r[12]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[11]),t.i64.cast([0,388]),r[12],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[13]=t.i64.of_float(Date.now()),r[14]=t.i64.random(),r[16]="Finishing execution. Execution time: ",r[17]=t.i64.to_string(t.i64.sub(r[13],r[0])),r[18]=" ms",r[15]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][createE2EEMetadataThread] ",r[15],r[16],r[15],r[17],r[15],r[18]].join("")),t.i64.eq(t.i64.mod_(r[14],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[19]=",",r[20]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"createE2EEMetadataThread",[r[16],r[19],r[17],r[19],r[18]].join(""),r[20],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCreateE2EEMetadataThreadStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSCreateE2EEMetadataThreadStoredProcedure",["LSCreateE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateE2EEMetadataThread"),a.waJid,a.offlineThreadKey,a.threadType,a.folderType,a.bumpTimestampMs,a.createdByLocalDevice);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCreateOfflineThreadingIDStoredProcedure",["LSCreateOfflineThreadingID","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateOfflineThreadingID"),a.timestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),e[5]!==void 0?t.resolve(r[1]=e[5]):t.sequence([function(e){return r[27]=t.i64.random(),r[28]=t.i64.to_string(r[27]),r[28]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,637738637]),r[28],!0,void 0):t.resolve()},function(e){return r[1]=r[28]}])},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,637738637]),r[1],"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[2]=a[0],r[3]=a[1],r[4]=a[2],r[5]=a[3],r[6]=a[4],r[7]=a[5],r[8]=a[6],r[9]=a[7],r[10]=a[8],r[11]=a[9],r[12]=a[10],r[13]=a[11],r[14]=a[12],r[15]=a[13],r[16]=a[14],r[17]=a[15],r[18]=a[16],r[19]=a[17],a):(o=l.item,t.sequence([function(e){return r[32]=o.backupTenancy,r[31]=o.encryptionVersion,r[27]=void 0,t.i64.neq(r[27],void 0)?t.resolve(r[28]=r[27]):t.sequence([function(e){return r[33]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[43]=(r[33].push(t.i64.cast([0,0])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[43]=(r[33].push(t.i64.cast([0,2])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[43]=(r[33].push(t.i64.cast([0,3])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[43]=(r[33].push(t.i64.cast([0,4])),r[33])),r[38]=t.createArray(),r[39]=t.i64.of_int32(r[33].length),t.i64.gt(r[39],t.i64.cast([0,0]))?t.loopAsync(r[39],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[38].push(r[44]),r[38])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[43]=t.createArray(),r[44]=t.i64.of_int32(r[38].length),t.i64.gt(r[44],t.i64.cast([0,0]))?t.loopAsync(r[44],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[38],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=(r[43].push(t.i64.to_string(r[47])),r[43])}])}):t.resolve()},function(e){return r[45]=r[43].join(","),r[40]=r[45]}])},function(e){return r[38].some(function(e){return t.i64.eq(r[31],e)})?r[41]=r[31]:r[41]=void 0,t.i64.neq(r[41],void 0)?r[42]=r[41]:r[42]=void 0,r[28]=r[42]}])},function(e){var n;return t.i64.neq(r[28],void 0)?r[29]=r[28]:r[29]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[30]=r[32]:r[30]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[29],r[30],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[2]=n[0],r[3]=n[1],r[4]=n[2],r[5]=n[3],r[6]=n[4],r[7]=n[5],r[8]=n[6],r[9]=n[7],r[10]=n[8],r[11]=n[9],r[12]=n[10],r[13]=n[11],r[14]=n[12],r[15]=n[13],r[16]=n[14],r[17]=n[15],r[18]=n[16],r[19]=n[17]}]))})},function(o){return t.blobs.neq(r[5],void 0)?t.i64.neq(r[3],void 0)?(r[27]=t.i64.to_string(r[2]),r[27]!==void 0?t.sequence([function(o){return r[28]=t.createArray(),r[63]=(r[28].push(r[27]),r[28]),r[63]=(r[28].push(e[0]),r[28]),r[29]=t.toJSON(r[28]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[30]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[27]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[34]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(o){return r[38]=new t.Map,r[38].set("attachment_index_key",r[33]==null?"":r[33]),r[38].set("delivery_object_id",e[0]),r[38].set("device_id",r[3]),r[38].set("mailbox_partial_id",r[37]==null?"":r[37]),r[38].set("media_type",e[2]),r[38].set("product_type",e[1]),r[38].set("trace_id",r[1]),r[39]=new t.Map,r[39].set("otid",e[3]),r[39].set("server_thread_key",e[6]),r[39].set("timestamp",void 0),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[40]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[42]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(o){return r[38].set("salt_partial_id",r[43]==null?"":r[43]),t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[44]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[46]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(o){return r[38].set("thread_partial_id",r[47]==null?"":r[47]),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[48]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[50]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(o){return r[38].set("message_partial_id",r[51]==null?"":r[51]),r[52]=t.createArray(),r[63]=(r[52].push(e[3]),r[52]),r[63]=(r[52].push(e[0]),r[52]),r[53]=t.toJSON(r[52]),r[38].set("raw_identifiers",r[39]),r[38].set("backup_id",r[27]),r[38].set("thread_id",e[4]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[53]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[54]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return r[38].set("salt_partial_access_token",r[57]==null?"":r[57]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[58]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[59]).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[60]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[38].set("salt_partial_attachment_index_key",r[61]==null?"":r[61]),r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!0):t.resolve()},function(e){return r[62]=t.toJSON(r[38]),t.storedProcedure(n("LSIssueNewTask"),"encrypted_backups_attachment_upload",t.i64.cast([0,50012]),r[62],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):t.sequence([function(e){return r[29]="Missing backup_id for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))},function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_backup_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}])):t.sequence([function(e){return r[28]="Missing device_id for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[28]].join("")),r[27]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[28],r[27],t.i64.cast([0,3]))},function(e){return r[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_device_id"].join(""),r[1]!==void 0&&r[29]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[29]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}]):t.sequence([function(e){return r[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[28]].join("")),r[27]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[28],r[27],t.i64.cast([0,3]))},function(e){return r[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),r[1]!==void 0&&r[29]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[29]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}])},function(e){return r[21]=t.i64.of_float(Date.now()),r[22]=t.i64.random(),r[24]="Finishing execution. Execution time: ",r[25]=t.i64.to_string(t.i64.sub(r[21],r[0])),r[26]=" ms",r[23]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",r[23],r[24],r[23],r[25],r[23],r[26]].join("")),t.i64.eq(t.i64.mod_(r[22],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[27]=",",r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[r[24],r[27],r[25],r[27],r[26]].join(""),r[28],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueAttachmentBackupTask"),a.deliveryObjectId,a.productType,a.mediaType,a.messageId,a.threadId,a.traceId,a.serverThreadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSIssueAttachmentRestoreTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] Beginning execution."),e[7]!==void 0?t.resolve(r[1]=e[7]):t.sequence([function(e){return r[28]=t.i64.random(),r[29]=t.i64.to_string(r[28]),r[29]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,679684335]),r[29],!0,void 0):t.resolve()},function(e){return r[1]=r[29]}])},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,679684335]),r[1],"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[2]=a[0],r[3]=a[1],r[4]=a[2],r[5]=a[3],r[6]=a[4],r[7]=a[5],r[8]=a[6],r[9]=a[7],r[10]=a[8],r[11]=a[9],r[12]=a[10],r[13]=a[11],r[14]=a[12],r[15]=a[13],r[16]=a[14],r[17]=a[15],r[18]=a[16],r[19]=a[17],a):(o=l.item,t.sequence([function(e){return r[33]=o.backupTenancy,r[32]=o.encryptionVersion,r[28]=void 0,t.i64.neq(r[28],void 0)?t.resolve(r[29]=r[28]):t.sequence([function(e){return r[34]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[44]=(r[34].push(t.i64.cast([0,0])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[44]=(r[34].push(t.i64.cast([0,2])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[44]=(r[34].push(t.i64.cast([0,3])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[44]=(r[34].push(t.i64.cast([0,4])),r[34])),r[39]=t.createArray(),r[40]=t.i64.of_int32(r[34].length),t.i64.gt(r[40],t.i64.cast([0,0]))?t.loopAsync(r[40],function(e){return r[44]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],r[44]).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return r[47]=(r[39].push(r[45]),r[39])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[44]=t.createArray(),r[45]=t.i64.of_int32(r[39].length),t.i64.gt(r[45],t.i64.cast([0,0]))?t.loopAsync(r[45],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[39],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[44].push(t.i64.to_string(r[48])),r[44])}])}):t.resolve()},function(e){return r[46]=r[44].join(","),r[41]=r[46]}])},function(e){return r[39].some(function(e){return t.i64.eq(r[32],e)})?r[42]=r[32]:r[42]=void 0,t.i64.neq(r[42],void 0)?r[43]=r[42]:r[43]=void 0,r[29]=r[43]}])},function(e){var n;return t.i64.neq(r[29],void 0)?r[30]=r[29]:r[30]=t.i64.cast([0,0]),t.i64.neq(r[33],void 0)?r[31]=r[33]:r[31]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[30],r[31],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[2]=n[0],r[3]=n[1],r[4]=n[2],r[5]=n[3],r[6]=n[4],r[7]=n[5],r[8]=n[6],r[9]=n[7],r[10]=n[8],r[11]=n[9],r[12]=n[10],r[13]=n[11],r[14]=n[12],r[15]=n[13],r[16]=n[14],r[17]=n[15],r[18]=n[16],r[19]=n[17]}]))})},function(e){return t.storedProcedure(n("LSFindBackup")).then(function(e){var t;return t=e,r[21]=t[0],t})},function(o){return t.blobs.neq(r[5],void 0)?t.i64.neq(r[3],void 0)?r[21]!==void 0?t.blobs.neq(r[4],void 0)?t.sequence([function(o){return r[28]=t.createArray(),r[35]=(r[28].push(r[21]),r[28]),r[35]=(r[28].push(e[1]),r[28]),r[29]=t.toJSON(r[28]),r[30]=t.createArray(),r[35]=(r[30].push(t.i64.cast([0,32])),r[30]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",e[5]].join("")).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[31],void 0,r[4],r[30]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[32]?r[33]=!1:r[33]=!0,r[33]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),r[36]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[36]].join("")),r[35]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[36],r[35],t.i64.cast([0,3]))},function(e){return r[34]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[34]=r[35]}])},function(o){return t.blobs.neq(r[34],void 0)?t.sequence([function(o){return t.i64.neq(e[9],void 0)?r[35]=e[9]:r[35]=t.i64.cast([-1,4294967295]),t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[6]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[34],r[37],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[38]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[40]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[42]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[21]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[44]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[46]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[48]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[50]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[52]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[53]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[54]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[57]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[58]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(o){return r[60]=new t.Map,r[60].set("attachment_index_key",r[43]==null?"":r[43]),r[60].set("backup_ent_fbid",e[0]),r[60].set("delivery_object_id",e[1]),r[60].set("device_id",r[3]),r[60].set("mailbox_partial_id",r[47]==null?"":r[47]),r[60].set("media_type",e[3]),r[60].set("message_partial_id",r[51]==null?"":r[51]),r[60].set("product_type",e[2]),r[60].set("salt_partial_id",r[55]==null?"":r[55]),r[60].set("sort_key",r[39]==null?"":r[39]),r[60].set("thread_partial_id",r[59]==null?"":r[59]),r[60].set("trace_id",r[1]),r[60].set("source",r[35]),r[61]=new t.Map,r[61].set("otid",e[4]),r[61].set("server_thread_key",e[8]),r[61].set("timestamp",t.i64.to_string(e[6])),t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[63]=t[0],t})},function(o){return r[64]=new t.Map,r[64].set("ocmf_client_state_blob",r[62]==null?"":r[62]),r[64].set("mailbox_root_key",r[63]==null?"":r[63]),r[65]=t.createArray(),r[76]=(r[65].push(e[4]),r[65]),r[76]=(r[65].push(e[1]),r[65]),r[66]=t.toJSON(r[65]),r[60].set("raw_identifiers",r[61]),r[60].set("backup_id",r[21]),r[60].set("thread_id",e[5]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[66]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[67]).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[68]).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[69]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[60].set("salt_partial_access_token",r[70]==null?"":r[70]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[71]).then(function(e){var t;return t=e,r[72]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[72]).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[73]).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return r[60].set("salt_partial_attachment_index_key",r[74]==null?"":r[74]),r[60].set("raw_tokens",r[64]),r[75]=t.toJSON(r[60]),t.storedProcedure(n("LSIssueNewTask"),"encrypted_backups_attachment_restore",t.i64.cast([0,50020]),r[75],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):t.sequence([function(e){return r[37]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","OPE_key_is_null"].join(""),r[1]!==void 0&&r[37]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[37]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[36]="OPE key is null for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[36]].join("")),r[35]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[36],r[35],t.i64.cast([0,3]))}])}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_mailbox_root_key"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing mailbox_root_key for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_backup_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing backup_id for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_device_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing device_id for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing ocmf_client_state_blob for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}])},function(e){return r[22]=t.i64.of_float(Date.now()),r[23]=t.i64.random(),r[25]="Finishing execution. Execution time: ",r[26]=t.i64.to_string(t.i64.sub(r[22],r[0])),r[27]=" ms",r[24]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ",r[24],r[25],r[24],r[26],r[24],r[27]].join("")),t.i64.eq(t.i64.mod_(r[23],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[28]=",",r[29]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",[r[25],r[28],r[26],r[28],r[27]].join(""),r[29],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSIssueAttachmentRestoreTaskStoredProcedure",["LSIssueAttachmentRestoreTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueAttachmentRestoreTask"),a.backupEntFbid,a.deliveryObjectId,a.productType,a.mediaType,a.messageId,a.threadId,a.sortOrder,a.traceId,a.serverThreadKey,a.source);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][issueThreadRemove] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[15]=new t.Map,r[15].set("error_msg","Expected a nonempty query result"),r[15].set("code",t.i64.cast([0,3])),r[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[16]=t.createArray(),r[17]=(r[16].push(r[15]),r[16]),o=[void 0,r[16]],r[2]=o[0],r[3]=o[1]):(n=l.item,r[15]=new t.Map,r[15].set("backup_id",n.backupId),r[15].set("device_public_key_blob",n.devicePublicKeyBlob),r[15].set("device_private_key_blob",n.devicePrivateKeyBlob),r[15].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[15].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[15].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[15].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[15].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[15].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[15].set("orf_client_state_v2_blob",void 0),r[15].set("orf_v2_authority_level",void 0),r[15].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[15].set("device_id",n.deviceId),r[15].set("backup_tenancy",n.backupTenancy),r[15].set("encryption_version",n.encryptionVersion),r[15].set("revision_version",n.revisionVersion),r[15].set("initialize_restore_result",void 0),r[15].set("device_creation_timestamp_sec",void 0),r[15].set("authority_level",n.authorityLevel),a=[r[15],void 0],r[2]=a[0],r[3]=a[1])})},function(o){return r[5]=new t.Map,r[5].set("value",r[2]),r[5].set("errors",r[3]),r[6]=r[5].get("value"),r[6]!==void 0?t.sequence([function(o){return r[15]=r[6].get("backup_id"),r[16]=r[6].get("device_public_key_blob"),r[17]=r[6].get("device_private_key_blob"),r[18]=r[6].get("epoch_storage_public_key_blob"),r[19]=r[6].get("epoch_storage_private_key_blob"),r[20]=r[6].get("epoch_auth_public_key_blob"),r[21]=r[6].get("epoch_auth_private_key_blob"),r[22]=r[6].get("mailbox_root_key_blob"),r[23]=r[6].get("ocmf_client_state_blob"),r[24]=r[6].get("orf_client_state_v2_blob"),r[25]=r[6].get("orf_v2_authority_level"),r[26]=r[6].get("oblivious_validation_token_blob"),r[27]=r[6].get("device_id"),r[28]=r[6].get("backup_tenancy"),r[29]=r[6].get("encryption_version"),r[30]=r[6].get("revision_version"),r[31]=r[6].get("initialize_restore_result"),r[32]=r[6].get("device_creation_timestamp_sec"),r[33]=r[6].get("authority_level"),t.i64.neq(r[27],void 0)?t.sequence([function(e){return r[36]=void 0,t.i64.neq(r[36],void 0)?t.resolve(r[37]=r[36]):t.sequence([function(e){return r[43]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[44]&&(r[53]=(r[43].push(t.i64.cast([0,0])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[45]&&(r[53]=(r[43].push(t.i64.cast([0,2])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[46]&&(r[53]=(r[43].push(t.i64.cast([0,3])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[47]&&(r[53]=(r[43].push(t.i64.cast([0,4])),r[43])),r[48]=t.createArray(),r[49]=t.i64.of_int32(r[43].length),t.i64.gt(r[49],t.i64.cast([0,0]))?t.loopAsync(r[49],function(e){return r[53]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[43],r[53]).then(function(e){var t;return t=e,r[54]=t[0],r[55]=t[1],t})},function(e){return r[56]=(r[48].push(r[54]),r[48])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[53]=t.createArray(),r[54]=t.i64.of_int32(r[48].length),t.i64.gt(r[54],t.i64.cast([0,0]))?t.loopAsync(r[54],function(e){return r[56]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[48],r[56]).then(function(e){var t;return t=e,r[57]=t[0],r[58]=t[1],t})},function(e){return r[59]=(r[53].push(t.i64.to_string(r[57])),r[53])}])}):t.resolve()},function(e){return r[55]=r[53].join(","),r[50]=r[55]}])},function(e){return r[48].some(function(e){return t.i64.eq(r[29],e)})?r[51]=r[29]:r[51]=void 0,t.i64.neq(r[51],void 0)?r[52]=r[51]:r[52]=void 0,r[37]=r[52]}])},function(o){return t.i64.neq(r[37],void 0)?r[38]=r[37]:r[38]=t.i64.cast([0,0]),t.i64.neq(r[28],void 0)?r[39]=r[28]:r[39]=t.i64.cast([0,1]),r[40]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",e[0]].join(""),t.i64.cast([0,50026]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,93]),void 0,t.i64.le(t.i64.cast([0,0]),t.i64.cast([0,0]))?t.i64.cast([0,0]):t.i64.add(r[40],t.i64.sub(t.i64.cast([0,0]),t.i64.mod_(r[40],t.i64.cast([0,0])))),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(n){return t.db.table(177).add({pk:void 0,pendingBackupTaskId:r[41],actionType:t.i64.cast([0,2]),contentType:t.i64.cast([0,2]),backupStatus:t.i64.cast([0,1]),listKey:e[0],uniqueKey:e[0],sortKey:e[1],persistentId:"",isInstamadillo:!1,lsTraceId:e[3],error:e[4]})},function(n){return t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,1]))?t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,1]))?(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued message backup task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[45]=(r[43].push(", otid = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve()):(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued message remove task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[45]=(r[43].push(", otid = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve()):(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued thread remove task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve())},function(e){var n;return r[42]=new t.Map,r[42].set("task_id",r[41]),n=[r[42],void 0],r[34]=n[0],r[35]=n[1]}]):t.sequence([function(n){return r[36]=t.createArray(),r[39]=(r[36].push("Skipping thread remove since EB is disabled. act thread id = "),r[36]),r[39]=(r[36].push(e[0]),r[36]),r[37]=r[36].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[37]].join("")),t.resolve()},function(e){var n;return r[38]=new t.Map,r[38].set("error_code",t.i64.cast([0,24])),r[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),r[38].set("error_message",""),n=[void 0,r[38]],r[34]=n[0],r[35]=n[1]}])},function(e){var t;return t=[r[34],r[35]],r[7]=t[0],r[8]=t[1],t}]):t.sequence([function(n){return r[15]=r[5].get("errors"),r[16]=r[5].get("errors"),r[17]=t.createArray(),r[20]=(r[17].push("Skipping thread remove since EB is disabled. act thread id = "),r[17]),r[20]=(r[17].push(e[0]),r[17]),r[18]=r[17].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[18]].join("")),t.resolve()},function(e){var n;return r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,1])),r[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),r[19].set("error_message",""),n=[void 0,r[19]],r[7]=n[0],r[8]=n[1]}])},function(e){return r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"issueThreadRemove",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[7],r[8]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"],a.exports=e}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueThreadRemove"),a.actThreadId,a.sortKey,a.source,a.traceId,a.error);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,80]))?(r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"cpq_v2",t.i64.cast([0,207]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure",e.__tables__=["contacts"],a.exports=e}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSRefetchContactRowIfExists"),a.id);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("wa_jid",e[0]),r[0].set("tam_thread_subtype",t.i64.cast([0,0])),r[1]=r[0].get("wa_jid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,1021]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),a.waJid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[0].set("user_self_remove",!1),r[1]=r[0].get("thread_key"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,394]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateE2EEMetadataParticipants"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWFTSRawStringMatcher",["JSResourceForInteraction","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("WAFtsMultiLangTokenizer").__setRef("MAWFTSRawStringMatcher"),s=null;async function u(){return s=await e.load(),d}function c(e){return new(r("nullthrows")(s))().tokenize(e)}function d(e,t){var n=Array.from(c(e)).filter(function(e){return e.length>1});if(n.length===0)return!1;var r=Array.from(c(t));return n.every(function(e){return r.some(function(t){return t.startsWith(e)})})}l.load=u}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,n){var r,a,i,l,u=(e||(e=o("I64"))).add((r=t.matchCount)!=null?r:(e||(e=o("I64"))).of_string("1"),(a=n.matchCount)!=null?a:(e||(e=o("I64"))).of_string("1")),c=e.max((i=t.messageTimestampMs)!=null?i:(e||(e=o("I64"))).minus_one,(l=n.messageTimestampMs)!=null?l:(e||(e=o("I64"))).minus_one);return babelHelpers.extends({},t,{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[s._plural(e.to_int32(u),"number")]).toString(),matchCount:u,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(e||(e=o("I64"))).equal(c,(e||(e=o("I64"))).minus_one)?void 0:c})}l.mergeCutoverSearchResults=u}),226);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:5e3},s=r("qpl")._(25301522,"2409");function u(){return e.hasStarted&&c(),e.instanceKey++,e.hasStarted=!0,r("QPLUserFlow").start(s,{annotations:{bool:{isInThread:!1}},instanceKey:e.instanceKey}),e.instanceKey}function c(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endCancel(s,{instanceKey:e.instanceKey}))}function d(t){var n=t.annotations,o=t.instanceKey,a=t.point;!e.hasStarted||o!=null&&e.instanceKey!==o||(r("QPLUserFlow").addPoint(s,a,{instanceKey:e.instanceKey}),n!=null&&m({annotations:n,instanceKey:e.instanceKey}))}function m(t){var n=t.annotations,o=t.instanceKey;!e.hasStarted||o!=null&&e.instanceKey!==o||r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function p(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endSuccess(s,{annotations:{int:{result_count:e.currentResultCount}},instanceKey:e.instanceKey}))}var _={getCurrentInstanceKey:function(){return e.instanceKey},qplAddAnnotations:m,qplAddPoint:d,qplCancel:c,qplMarkFirstResultShowUp:r("emptyFunction"),qplStart:u,qplSuccess:p,updateCurrentResultCount:r("emptyFunction")},f=_;l.default=f}),98);
__d("escapeRegExp",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i.default=e}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=r("gkx")("1798");function d(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(e,t){var n=d(e).split(" "),o=d(t),a=[],i=[];return n.forEach(function(e){var t=new RegExp(r("escapeRegExp")(e),"gi"),n=o.matchAll(t),l=Array.from(n),s=l.map(function(e){return e.index}),u=s.map(function(t){return e.length});i.push.apply(i,s),a.push.apply(a,u)}),{matchLengths:a.join(","),matchOffsets:i.join(",")}}function p(t,n,a,i){if(a!=null&&(n===1||(e||(e=o("I64"))).equal(i,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE)))){var l=o("MAWVault").isVaulted(a)?o("MAWVault").unvault(a):a,c=m(t,l);return babelHelpers.extends({contextLine:l},c)}else return{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[s._plural(n,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function _(e,t){return e===1&&t!=null?t:void 0}function f(e,t){return e===1&&t!=null?t:void 0}function g(t){return t!=null?(e||(e=o("I64"))).of_float(t):void 0}function h(t,n){var r=(e||(e=o("I64"))).of_float(-t);return n==null?r:e.min(r,n)}function y(t,n){return!c||t.messageTimestampMs==null||n.messageTimestampMs==null?(e||(e=o("I64"))).gt(t.globalIndex,n.globalIndex)?1:(e||(e=o("I64"))).lt(t.globalIndex,n.globalIndex)?-1:0:(e||(e=o("I64"))).lt(t.messageTimestampMs,n.messageTimestampMs)?1:(e||(e=o("I64"))).gt(t.messageTimestampMs,n.messageTimestampMs)?-1:0}l.getContextLineAndMatches=p,l.getMessageOtid=_,l.getMessageId=f,l.getMessageTimestamp=g,l.getGlobalIndex=h,l.searchResultsCompareFn=y}),226);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","ReQL","WAJids","emptyFunction","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3e4,u=3e4;async function c(t){var n=await o("ReQL").toArrayAsync(t);return n.some(function(t){return t==null||(e||(e=o("I64"))).lt(t.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").AUTHORITATIVE))})===!1}async function d(t,n,a,i){a===void 0&&(a=r("emptyFunction")),i===void 0&&(i=r("emptyFunction"));var l=(e||(e=o("I64"))).of_string(o("MAWCurrentUser").getID()),s=o("ReQL").leftJoin(o("ReQL").fromTableAscending(t.tables.participants,["contactId"]).getKeyRange(n.serverThreadKey).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,l)}),o("ReQL").fromTableAscending(t.tables.contacts)).map(function(e){var t=e[0],n=e[1];return n}),d=null,m={contents:function(){}};function p(){a(n),m.contents()}if(await c(s))return p();m.contents=s.subscribe(async function(e,t){if(t.operation!=="delete"&&(d!=null&&window.clearTimeout(d),await c(s)))return p()}),d=window.setTimeout(function(){m.contents(),i(r("err")("Contacts timed out"))},u)}async function m(e,t){var n=o("MAWJids").convertChatJidToIntJid(t),a=o("WAJids").interpretAsGroupJid(t)!=null,l=o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table.index("jid")).getKeyRange(n),u=await o("ReQL").firstAsync(l);if(u!=null)return await d(e,u),Promise.resolve(u);var c=null,m=new Promise(function(t,n){var o={contents:function(){}};function a(e){o.contents(),t(e)}function i(e){o.contents(),n(e)}o.contents=l.subscribe(async function(t,n){n.operation!=="delete"&&(c!=null&&window.clearTimeout(c),await d(e,n.value,a,i))}),c=window.setTimeout(function(){i(r("err")("MiActMapping timed out"))},s)});r("promiseDone")(e.runInTransaction(function(e){return a?r("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(r("LSFactory")(e),{waJid:n}):r("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(r("LSFactory")(e),{waJid:n})},"readwrite",void 0,void 0,i.id+":150"));try{u=await m}catch(e){r("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",r("getErrorSafe")(e).message)}return u}l.default=m}),98);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","ReQL","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c=(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),d=new Map,m=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");async function p(e,t,n){await e.message_search_queries.put(babelHelpers.extends({hasNextPage:!1,query:t,threadKeyV2:(u||(u=o("I64"))).one,type_:c},n))}async function _(e,t){var n=(u||(u=o("I64"))).to_string(t.threadKey);t.matchCount!=null&&d.set(n,(u||(u=o("I64"))).to_float(t.matchCount));var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange(c,t.query,t.threadKey));if(r==null)await e.message_search_results.put(babelHelpers.extends({},t));else{var a=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(r,t);await e.message_search_results.upsert([c,r.query,r.threadKey,r.globalIndex],babelHelpers.extends({},a,{globalIndex:t.globalIndex}))}}function f(e,t){var n,r=(n=d.get((u||(u=o("I64"))).to_string(e)))!=null?n:0;r+=t,d.set((u||(u=o("I64"))).to_string(e),r)}function g(){d.clear()}function h(e,t){var n;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)&&(n=d.get((u||(u=o("I64"))).to_string(e)))!=null?n:null}async function y(t,n,a){d.clear(),await t.runInTransaction(async function(e){await p(e,a,{resultCount:(u||(u=o("I64"))).zero,status:(s||(s=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING)})},"readwrite",void 0,void 0,i.id+":142"),r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var l=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:a,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}),f=l.map(function(t){if(t.recordType==="msg"){var n=t.matchedTerms,r=t.recordType,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},o)}}).filter(Boolean),g=r("groupBy")(f,function(e){return e.chatJid}),h=Object.values(g);r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:h.length}},point:"search_local_result_end"}),r("promiseDone")(Promise.all(h.map(async function(e,l){var s=e[0].chatJid;await r("waitForMiActMappingForUniversalSearch")(t,s);var d=await o("MWSearchThreadUtils").getThreadDataForSearchResult(t,s,n,c);if(d!=null){var p=d.profilePicUrl,f=d.secondaryProfilePicUrl,g=d.threadDisplayName,h=d.threadKey,y=d.threadType,C=e.sort(function(e,t){return t.sortOrderMs-e.sortOrderMs})[0],b=e.length===1&&C.msg==null?{id:C.externalId,sortOrderMs:C.sortOrderMs}:null,v={displayName:g,globalIndex:o("MWContentSearchUtils").getGlobalIndex(C.sortOrderMs),matchCount:(u||(u=o("I64"))).of_int32(e.length),profilePicUrl:p,query:a,secondaryProfilePicUrl:f,threadKey:h,threadType:y,type_:c};if(b==null)await t.runInTransaction(async function(t){var n,r;await _(t,babelHelpers.extends({},v,o("MWContentSearchUtils").getContextLineAndMatches(a,e.length,C==null||(n=C.msg)==null?void 0:n.content,c),{messageId:o("MWContentSearchUtils").getMessageId(e.length,C==null||(r=C.msg)==null?void 0:r.msgId),messageOtid:o("MWContentSearchUtils").getMessageOtid(e.length,C==null?void 0:C.externalId),messageTimestampMs:o("MWContentSearchUtils").getMessageTimestamp(C==null?void 0:C.sortOrderMs)}))},"readwrite",void 0,void 0,i.id+":243");else{r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+l+"_start"});var S=await m.load().then(function(e){var t=e.issueQueryAsPromiseForSearchResult;return t(s,[b])});if(S!=null&&S.length!==0){var R=S[0];r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+l+"_end"}),await t.runInTransaction(async function(t){var n;await _(t,babelHelpers.extends({},v,o("MWContentSearchUtils").getContextLineAndMatches(a,e.length,C==null||(n=C.msg)==null?void 0:n.content,c),{messageOtid:R.externalId,messageTimestampMs:R.sortOrderMs!=null?(u||(u=o("I64"))).of_float(R.sortOrderMs):void 0}))},"readwrite",void 0,void 0,i.id+":282")}else r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+l+"_end"})}}})),function(){r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:h.length}},point:"issue_secure_search_query_end"}),r("promiseDone")(t.runInTransaction(async function(e){await p(e,a,{hasNextPage:!1,resultCount:(u||(u=o("I64"))).of_int32(h.length),status:(s||(s=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE)})},"readwrite",void 0,void 0,i.id+":322"))},function(e){r("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",e==null?void 0:e.message)})}l.updateSecureMsgMatchCountForThread=f,l.clearSecureMsgMatchCountForThread=g,l.getSecureMsgsMatchCountForThread=h,l.search=y}),98);
__d("isEBSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),d=r("justknobx")._("2605");function m(e,t,n){var r;return Promise.all([(r=o("ReQL")).mergeJoin(r.fromTableAscending(n.tables.participants,[]).getKeyRange(e),r.fromTableAscending(n.tables.contacts)),r.firstAsync(r.fromTableAscending(n.tables.threads).getKeyRange(e))]).then(function(e){var n=e[0],r=e[1],a=n.filter(function(e){var n=e[0],r=e[1],a=(s||(s=o("I64"))).equal(r.id,t);return!a}).map(function(e){var t=e[0],n=e[1];return n});return o("ReQL").firstAsync(a)})}function p(e,t){return o("MAWChatJid").toThreadKeyMaybe(t,e.chatJid).then(function(n){return n==null?Promise.resolve([null,e]):Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n)),Promise.resolve(e)])})}async function _(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange((s||(s=o("I64"))).of_string(t)));return n}function f(e,t){var n=t.query,a=t.threadKey;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),n,a))}function g(e,t,n,a,l,c,d,m){m===void 0&&(m=r("LSSearchRequestStatusType").COMPLETE);var g=function(d){return p(e,d).then(function(e){var i=e[0];if(i!=null){var p=e[1],g=p.msg;if(g!=null&&p!=null)return Promise.all([o("MWSearchThreadUtils").getThreadPics(i,l,c),o("MWSearchThreadUtils").getThreadParticipants(i,c),(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))?_(c,g.sender):Promise.resolve(null),(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))?f(d,{query:n,threadKey:i.threadKey}):Promise.resolve(null)]).then(function(e){var c=e[0],_=c[0],f=c[1],h=e[1],y=e[2],C=e[3];(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&o("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(i.threadKey,t);var b=babelHelpers.extends({},o("MWContentSearchUtils").getContextLineAndMatches(n,t,g.content,a),{displayName:o("MWSearchThreadUtils").getThreadDisplayName(l,i,h,y,a),globalIndex:(s||(s=o("I64"))).of_float(-p.sortOrderMs),matchCount:s.of_int32(t),messageId:g.msgId,messageOtid:p.externalId,messageTimestampMs:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&t>1?void 0:(s||(s=o("I64"))).of_string(""+p.sortOrderMs),profilePicUrl:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&y!=null?y.profilePictureUrl:_,query:n,secondaryProfilePicUrl:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&y!=null?y.profilePictureFallbackUrl:f,threadKey:i.threadKey,threadType:i.threadType,type_:a}),v;if((s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))||C==null)v=d.message_search_results.put(b);else{var S=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(C,b);v=d.message_search_results.upsert([a,C.query,C.threadKey,C.globalIndex],babelHelpers.extends({},S,{globalIndex:b.globalIndex}))}return Promise.all([d.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:n,resultCount:s.of_int32(t),status:(u||(u=o("LSIntEnum"))).ofNumber(m),threadKeyV2:i.threadKey,type_:a}),v]).then(r("emptyFunction"))})}})};return d!=null?g(d):c.runInTransaction(function(e){return g(e)},"readwrite",void 0,void 0,i.id+":284")}async function h(t,n,r,a){a!=null&&a.flow.qplAddPoint({instanceKey:a.instanceKey,point:"search_local_result_start"});var i=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:n,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH});return Promise.all(i.map(function(n){if(n.recordType==="msg"){var r=n.matchedTerms,a=n.recordType,i=babelHelpers.objectWithoutPropertiesLoose(n,e);return o("MAWChatJid").toThreadKeyMaybe(t.tables,i.chatJid).then(function(e){return[i,e]})}}).filter(Boolean)).then(function(e){var t=r!=null?e.filter(function(e){var t=e[0],n=e[1];return n!=null&&(s||(s=o("I64"))).equal(n,r)}):e.filter(function(e){var t=e[0],n=e[1];return n!=null}),n=null;return r!=null&&(n={int:{numResult:t.length}}),a!=null&&a.flow.qplAddPoint({annotations:babelHelpers.extends({},n),instanceKey:a.instanceKey,point:"search_local_result_end"}),t})}function y(e,t,n,a){return o("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread(),h(n,e,void 0,a).then(function(i){var l=Object.values(r("groupBy")(i,function(e){var t=e[0],n=e[1];return n==null?"":(s||(s=o("I64"))).to_string(n)}));return a!=null&&a.flow.qplAddAnnotations({annotations:{int:{numResult:l.length}}}),l.map(function(a){var i=a[0];if(i!==null){var l=i[0];return g(l,a.length,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),t,n)}}).reduce(function(e,t){return Promise.all([e,t]).then(r("emptyFunction"))},Promise.resolve())})}function C(e,t,n,a,i,l){return Promise.all(a.map(function(a){return g(a,i,n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),l,e,t)})).then(r("emptyFunction"))}function b(e,t,n,a,i){return Promise.all(n.map(function(n){return g(n,a,t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),i,e)})).then(r("emptyFunction"))}function v(e,t,n,a,l){return a.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(0),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":468").then(function(n){return h(a,e,t,l)}).then(function(m){var p=m.length,_=m.filter(function(e){var t=e[0],n=e[1];return t.msg!=null}).length,f=_,h=function(){var o=m.map(function(e){var t=e[0];return t}).filter(function(e){return e.msg==null});return o.length===0?Promise.resolve():(o=o.slice(0,d),l.flow.qplAddPoint({annotations:{int:{numRequestedMessages:o.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_start"}),r("MAWMiActOnActThreadReadyDeferred")(a,t,"MWMessageSearchInput.react",function(t,r){var i=o.map(function(e){return{id:e.externalId,sortOrderMs:e.sortOrderMs}});return c.load().then(function(t){var o=t.issueQueryAsPromiseForSearchResult,s=o(r,i);return s==null?Promise.resolve():s.then(async function(t){var s=t;if(t.length!==i.length){l.flow.qplAddPoint({annotations:{int:{numRemainingMessages:i.length-t.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_partial"});var u=i.filter(function(e){return!s.some(function(t){return t.externalId===e.id})});if(u.length>0){var c=await o(r,u);c!=null&&(s=[].concat(t,c))}}return f=_+s.length,l.flow.qplAddPoint({annotations:{int:{numRespondedMessages:s.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_end"}),b(a,e,s,f,n)})})}))};return Promise.all([m.map(function(t){var i=t[0];return g(i,p,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),n,a,void 0,r("LSSearchRequestStatusType").PENDING)}).reduce(function(e,t){return Promise.all([e,t]).then(r("emptyFunction"))},Promise.resolve()),r("isEBSearchEnabled")()?h():Promise.resolve()]).then(function(n){return a.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(f),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":618")}).then(function(e){return Promise.resolve()})})}l.getThreadOtherParticipantContact=m,l.searchSecureDatabaseThreads=y,l.addBridgeSearchMsgsToSearchResult=C,l.addMessagesToSearchResult=b,l.searchSecureDatabaseMessages=v}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD);async function c(e,t,n,a,l){var c;o("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(t,a.length);var d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.message_search_results).getKeyRange(u,n,t)),m=d==null,p=(s||(s=o("I64"))).to_int32((c=d==null?void 0:d.matchCount)!=null?c:(s||(s=o("I64"))).zero),_=p+a.length,f=await o("MWSearchThreadUtils").getThreadDataByThreadKey(e,t,s.of_string(o("MAWCurrentUser").getID()),u);if(f!=null){var g=f.profilePicUrl,h=f.secondaryProfilePicUrl,y=f.threadDisplayName,C=f.threadType,b=d==null?void 0:d.globalIndex,v=o("MWContentSearchUtils").getGlobalIndex(a[0].sortOrderMs,d==null?void 0:d.globalIndex),S=async function(r){var e;await r.message_search_results.upsert([u,n,t,b!=null?b:v],babelHelpers.extends({},o("MWContentSearchUtils").getContextLineAndMatches(n,_,(e=a[0].msg)==null?void 0:e.content,u),{displayName:y,globalIndex:v,matchCount:(s||(s=o("I64"))).of_int32(_),messageTimestampMs:o("MWContentSearchUtils").getMessageTimestamp(a[0].sortOrderMs),profilePicUrl:g,query:n,secondaryProfilePicUrl:h,threadKey:t,threadType:C,type_:u})),m&&await r.message_search_queries.put(babelHelpers.extends({},l,{resultCount:(s||(s=o("I64"))).add(l.resultCount,s.one)}))};r("promiseDone")(e.runInTransaction(async function(e){await S(e)},"readwrite",void 0,void 0,i.id+":113"))}}l.default=c}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWInboxSecureContentSearch","ReQL","addMAWBridgeSearchMessagesToUniversalSearch","emptyFunction","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),c=e.ofNumber(r("LSMessageSearchType").THREAD);function d(e,t,n){return n.length===0?Promise.resolve():Promise.all([p(e,t,n),_(e,t,n)]).then(r("emptyFunction"))}async function m(e,t){var n=await o("MAWFTSRawStringMatcher").load();return t.filter(function(t){var r,o=(r=t.msg)==null?void 0:r.content;return o==null?!1:n(e,o)})}async function p(e,t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.message_search_queries).getKeyRange(u));if(a.length!==0)return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(t,i){return(async function(){var r=a.filter(function(e){return(s||(s=o("I64"))).equal(e.threadKeyV2,i)})[0];if(r!=null){var l=r.query;if(!(l==null||l.length<2)){var u=(s||(s=o("I64"))).to_int32(r.resultCount),c=await m(l,n);c.length!==0&&await o("MWInboxSecureContentSearch").addBridgeSearchMsgsToSearchResult(e,t,r.query,c,u+c.length,s.of_string(o("MAWCurrentUser").getID()))}}})().then(r("emptyFunction"))})}async function _(e,t,n){if(r("isMAWUniversalSearchWithEBEnabled")()){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.message_search_queries).getKeyRange(c).filter(function(e){return(s||(s=o("I64"))).equal(e.threadKeyV2,s.one)}));if(a!=null){var i=a.query;if(!(i==null||i.length<2)){var l=await m(i,n);l.length!==0&&r("promiseDone")(r("waitForMiActMappingForUniversalSearch")(e,n[0].chatJid),function(t){if(t!=null)return r("addMAWBridgeSearchMessagesToUniversalSearch")(e,t.serverThreadKey,i,l,a)})}}}}l.call=d}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["MAWMpsGating","Promise","WAJids","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler");function u(t){var r=t.chatJid,a=t.decryptedMessagesProtobufs,i=t.isPointQuery,l=t.taskSource;return o("MAWMpsGating").isFullMpsEnabled()?(e||(e=n("Promise"))).resolve():s.load().then(function(e){return e.handleProtobufRestoreHelper(o("WAJids").threadIdForChatJid(r),{convertedProtobufs:a,type:"convertedProtobufs"},!1,void 0,!1,void 0,i,void 0,void 0,void 0,void 0,l,r)})}l.call=u}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeDeleteGroupInviteHandler",async function(t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.group_invites).getKeyRange(n));return Promise.all(a.map(function(e){return t.group_invites.delete(e.threadKey,e.inviterId,e.inviteeId)})).then(function(){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(n)),function(t){if(t!=null){var n=o("LSThreadBitOffset").clear([105],t.capabilities,t.capabilities2,t.capabilities3,t.capabilities4,t.capabilities5),r=n[0],a=n[1],i=n[2],l=n[3],s=n[4];return e.threads.put(babelHelpers.extends({},t,{capabilities:r,capabilities2:a,capabilities3:i,capabilities4:l,capabilities5:s,snippet:void 0}))}})})})}l.call=e}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n){if(n.actionType===2){if(!await o("EBIsEbEnabled").isEbEnabledLS(t))return;await r("LSIssueThreadRemoveStoredProcedure")(r("LSFactory")(t),{actThreadId:n.threadId,sortKey:n.ts.toString(),source:(e||(e=o("LSIntEnum"))).ofNumber(r("LSMEBTaskCreationSource").TAM_WEB)})}}l.call=s}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["MAWChatJid","MAWEphemeralSettingsUpdate","cr:17100"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var r=await o("MAWChatJid").toThreadKeyMaybe(e,t.chatJid);return r!=null?o("MAWEphemeralSettingsUpdate").updateEphemeralSettingsWithTxn(e,t.ephemeralSettingArgs.ephemeralExpirationInSec,await n("cr:17100").castUnixTimeToMillisTime(t.ephemeralSettingArgs.ephemeralLastUpdatedOrSetTimestamp),t.isEphemeralSettingReset,r,!1,t.author):Promise.resolve()}l.call=e}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWEBRestoreTrackingUtils","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return t.success?o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(t.value.traceId):o("MAWEBRestoreTrackingUtils").markEBRestoreFail(t.error.traceId),(e||(e=n("Promise"))).resolve()}l.call=s}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActMappingTableAPI","MWFBLogger","ODS","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","Middleware"]);async function p(t,n){var r,a=await o("MAWMiActMappingTableAPI").getMappingRowForChatJid(t,n.chatJid);if(a==null){m.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing thread key for chatJid: ",""])),n.chatJid);return}var i=(r=n.threadName)!=null?r:void 0,l=a.serverThreadKey,p=t.threads,_=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(p).getKeyRange(l));if(_==null){(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread"),m.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""])),(d||(d=o("I64"))).to_string(l));return}else i==null&&(i=_.threadName,m.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""])),(d||(d=o("I64"))).to_string(l)));var f=n.memberAddMode!=="all_member_add";await p.put(babelHelpers.extends({},_,{needsAdminApprovalForNewParticipant:f,threadName:i}))}l.call=p}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(t,i){var l=(s||(s=o("I64"))).of_string(a.inviterId);return(e||(e=n("Promise"))).all([o("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(t,i,l)]).then(r("emptyFunction"))})}l.call=u}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){return(e||(e=n("Promise"))).resolve()}i.call=l}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(e,n){return e.attachments.delete(n,t.msgId,String(t.plaintextHash))})}l.call=e}),98);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsgFetchLSReplyMsgAndAttachment","MAWUpdateMsg","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeMsgUpdatedHandler",async function(n,a){var i,l=await(i=o("ReQL")).firstAsync(i.fromTableAscending(n.messages.index("messageId")).getKeyRange(t.msgId)),u=await i.firstAsync(i.fromTableAscending(n.attachments).getKeyRange(a,t.msgId));if(l==null){r("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",t.type_,u==null);return}var c=await o("MAWAdminMsgCTA").getAdminMsgCtaStep(n,a,t),d=await s(e,t);return o("MAWUpdateMsg").call(n,d,l,c)})}async function s(e,t){if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){var n=await o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(e,t);return n!=null?n:t}return Promise.resolve(t)}l.call=e}),98);
__d("MAWBridgeNoteReplyStartCountdownHandler",["MAWMessageExpirationStorage","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return r.msgs.reduce(function(e,t){return e.then(function(){o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:t,expirationEvent:o("MAWMessageExpirationStorage").expirationNoteReplyEvent})})},(e||(e=n("Promise"))).resolve())}l.call=s}),98);
__d("MAWCreateOptimisticThread",["I64","LSAuthorityLevel","LSCreateOfflineThreadingIDStoredProcedure","LSFactory","LSIntEnum","LSMailboxType","LSRtcCallState"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){var n=await r("LSCreateOfflineThreadingIDStoredProcedure")(r("LSFactory")(t),{timestampMs:(e||(e=o("I64"))).of_float(Date.now())}),a=n[0];return a}async function c(t,n){var a={authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),folderName:"inbox",lastReadWatermarkTimestampMs:(e||(e=o("I64"))).of_float(0),mailboxType:s.ofNumber(r("LSMailboxType").MESSENGER),ongoingCallState:s.ofNumber(r("LSRtcCallState").NO_ONGOING_CALL),parentThreadKey:e.zero,threadKey:n,threadType:s.ofNumber(15)};return await t.threads.put(a),n}async function d(e){var t=await u(e);return await c(e,t),t}l.createOfflineThreadingId=u,l.createOptimisticThreadWithThreadKey=c,l.createOptimisticThread=d}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadLoadingState","MAWThreadUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";async function c(t,n){var a=n.bumpTimestampMs,i=n.creationSource,l=n.folderId,s=n.jid,u=n.optimisticThreadKey;p(i,s);var c=u!=null?await t.threads.get((e||(e=o("I64"))).of_string(u)):null;if(c!=null&&o("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(s)){h(s);return}if(c!=null&&d(c)){_(s,(e||(e=o("I64"))).to_string(c.threadKey));return}var f={bumpTimestampMs:a,createdByLocalDevice:i==="outgoing_message",folderType:o("MAWFolderUtils").systemFolderToLSCoreClientFolder(l),offlineThreadKey:await m(c,s,t),threadType:o("MAWThreadUtils").getLSThreadTypeFromJid(s),waJid:o("MAWJids").convertChatJidToIntJid(s)};return g(f),r("LSCreateE2EEMetadataThreadStoredProcedure")(r("LSFactory")(t),f).then(function(){o("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(s)})}function d(e){var t=(s||(s=o("LSIntEnum"))).unwrapIntEnum(e.authorityLevel);switch(t){case r("LSAuthorityLevel").CLIENT_PARTIAL:case r("LSAuthorityLevel").OPTIMISTIC:case r("LSAuthorityLevel").SERVER_PARTIAL:return!1;case r("LSAuthorityLevel").AUTHORITATIVE:case r("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case r("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}async function m(e,t,n){if(e!=null)return Promise.resolve(e.threadKey);var r=await o("MAWCreateOptimisticThread").createOfflineThreadingId(n);return f(t,r),await Promise.all([o("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(n,r),o("MAWThreadLoadingState").markActThreadLoadingAsCompleted(n,{intJid:o("MAWJids").convertChatJidToIntJid(t),threadKey:r})]),r}function p(e,t){r("FBLogger")("messenger_web").info(u+" handler called from %s for jid %s",e,t)}function _(e,t){r("FBLogger")("messenger_web").info(u+" handler returned early for jid %s because thread %s was already authoritative",e,t)}function f(t,n){r("FBLogger")("messenger_web").info(u+" no thread exists for jid %s, creating optimistic thread with key %s",t,(e||(e=o("I64"))).to_string(n))}function g(t){r("FBLogger")("messenger_web").info(u+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(e||(e=o("I64"))).to_string(t.bumpTimestampMs),t.createdByLocalDevice,e.to_string(t.folderType),e.to_string(t.offlineThreadKey),e.to_string(t.threadType),e.to_string(t.waJid))}function h(e){r("FBLogger")("messenger_web").info(u+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",e)}l.call=c}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeParticipantRemovedHandler",function(t,r){return t.participants.delete(r,(e||(e=o("I64"))).of_string(n.userId))})}l.call=s}),98);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e=["ephemeralMediaState"],s;function u(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeRavenActionMsgForUIHandler",async function(t,r){var a=t.attachments,i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a).getKeyRange(r,n.ravenMsgId));if(i==null||i.ephemeralMediaState==null)return Promise.resolve();var l=(s||(s=o("I64"))).to_int32(i.ephemeralMediaState);if(i.ephemeralMediaViewMode==null)return Promise.resolve();var u=s.to_int32(i.ephemeralMediaViewMode),c=o("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(l),d=o("MAWMsg").MAWRavenMsgEphemeralType.cast(u);if(c==null||d==null)return Promise.resolve();var m=o("MAWRavenUtils").getNextRavenMessageEphemeralState(c,d);if(m==null)return Promise.resolve();var p=i.ephemeralMediaState,_=babelHelpers.objectWithoutPropertiesLoose(i,e),f=babelHelpers.extends({ephemeralMediaState:s.of_int32(m)},_,{transportKey:"WhatsApp"}),g=[_.threadKey,_.messageId,_.attachmentFbid];return a.upsert(g,f)})}l.call=u}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r){var a=(e||(e=o("I64"))).of_string(n.fbid),i=o("MAWTimeUtils").toTimestamp(n.deliveredWatermarkTs),l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.participants).getKeyRange(r,a));l!=null&&await t.participants.put({authorityLevel:l.authorityLevel,contactId:l.contactId,deliveredWatermarkTimestampMs:(e||(e=o("I64"))).equal(i,(e||(e=o("I64"))).zero)?l.deliveredWatermarkTimestampMs:i,groupParticipantJoinState:l.groupParticipantJoinState,isAdmin:l.isAdmin,isModerator:l.isModerator,isSuperAdmin:l.isSuperAdmin,nickname:l.nickname,normalizedSearchTerms:l.normalizedSearchTerms,participantCapabilities:l.participantCapabilities,readActionTimestampMs:l.readActionTimestampMs,readWatermarkTimestampMs:l.readWatermarkTimestampMs,subscribeSource:l.subscribeSource,threadKey:l.threadKey,threadRoles:(e||(e=o("I64"))).zero})}function u(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeReceivedReceiptHandler",function(e,n){return s(e,t,n)})}l.callWithoutWaitingForAnything=s,l.call=u}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return r("LSRefetchContactRowIfExistsStoredProcedure")(r("LSFactory")(e),{id:t})}l.call=e}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["ReQL","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return(async function(){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.message_search_results).filter(function(e){return t.includes(e.messageOtid)}));await Promise.all(n.map(function(t){return e.message_search_results.delete(t.type_,t.query,t.threadKey,t.globalIndex)}))})().then(r("emptyFunction"))}l.call=e}),98);
__d("MAWBridgeResignAttachmentCDNUrlHandler",["I64","LSFactory","LSIssueAttachmentRestoreTaskStoredProcedure","MAWAsyncEBMediaDownloadPromise","MAWBridgeFireAndForget","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e,s="-8";function u(t,n){var a,i=n.traceId,l=(a=n.skipLegacyMediaDownloadFlow)!=null?a:!1;function u(e,t,n){!l&&i!=null&&o("MAWBridgeFireAndForget").fireAndForget("backend","addMediaDownloadQpl",{annotations:n!=null?n:void 0,pointName:t,qplInstanceKey:i,qplType:e})}return u("point","resign_cdn_url_bridge_handler_start"),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeResignAttachmentCDNUrlHandler",function(t,a){var l={backupEntFbid:(e||(e=o("I64"))).of_string(s),deliveryObjectId:n.deliveryObjectId,mediaType:n.mediaType,messageId:n.messageId,productType:n.productType,serverThreadKey:e.to_string(a),sortOrder:e.of_float(n.sortOrder),threadId:n.threadId,traceId:i.toString()};return n.skipLegacyMediaDownloadFlow!==!0&&o("MAWAsyncEBMediaDownloadPromise").setMediaDownloadPayload({messageId:n.msgId,objectId:n.deliveryObjectId,plaintextHash:n.plaintextHash,threadId:n.threadId}),u("point","resign_cdn_url_issue_attachment_task",{string:{taskTraceId:l.traceId}}),r("LSIssueAttachmentRestoreTaskStoredProcedure")(r("LSFactory")(t),l).then(function(){u("point","resign_cdn_url_issue_attachment_task_end")}).catch(function(e){u("fail","resign_cdn_url_issue_attachment_task_fail",{string:{error:e.toString()}})})})}l.call=u}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=String(t.xmaId);return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(e,a){return e.attachments.get(a,t.msgId,n).then(function(i){if(i==null)return Promise.resolve();var l=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean),s=l.map(function(t){return e.attachment_ctas.delete(t)});return Promise.all(s).then(function(){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(a,t.msgId,n)).then(async function(t){if(t!=null){var n=babelHelpers.extends({},t,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});await e.attachments.put(n)}return r("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment"),Promise.resolve()})})})})}l.call=e}),98);
__d("MAWBridgeStoryReplyStartCountdownHandler",["I64","MAWBridgeXMAShareTombstonedHandler","MAWDbXMA","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return n.msgs.reduce(function(n,r){return n.then(function(){return o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:r,expirationEvent:o("MAWMessageExpirationStorage").expirationStoryReplyEvent}),(e||(e=o("I64"))).of_int32(r.millisecondsUntilCountdownTs),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,r.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(e,t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,r.msgId)).then(async function(t){await Promise.all(t.map(function(t){var n=o("MAWDbXMA").convertNumberToXMAId(Number.parseInt(t.attachmentFbid,10)),a={msgId:r.msgId,threadJid:r.threadJid,xmaId:n};return o("MAWBridgeXMAShareTombstonedHandler").call(e,a)}))})})})},Promise.resolve())}l.call=s}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("CurrentMessengerUser").getID();function d(t,a){return a.reduce(function(e,n){var a=(s||(s=o("I64"))).of_string(n);return e.then(function(){return r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:c===n,workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}).then(r("emptyFunction"))},(e||(e=n("Promise"))).resolve())}l.call=d}),98);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n,"MAWBridgeThreadHiddenV2Handler",function(t,n){var a=r("LSFactory")(t);return r("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(e||(e=o("LSIntEnum"))).ofNumber(r("LSThreadRemoveType").DELETE_THREAD),threadKey:n})})}l.call=s}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","getMAWLastMessageCtaType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=t.folder!=null?o("MAWFolderUtils").getMessagingFolderTag(t.folder):e.folderName;return(n=t.cannotReplyReason)!=null?n:r==="inbox"?void 0:e.cannotReplyReason}async function s(t,n,a){var i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a));if(i!=null){var l=o("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(n,i.snippet),s=e(i,n),u=r("getMAWLastMessageCtaType")(n.snippetType),c=babelHelpers.extends({},i,{cannotReplyReason:s,folderName:i.folderName,lastMessageCtaType:u,parentThreadKey:i.parentThreadKey,snippet:l,snippetSenderContactId:n.snippetSenderContactId==null?i.snippetSenderContactId:o("MAWBridgeUIEventDataValidation").stringToI64Opt(n.snippetSenderContactId)});await t.threads.put(c)}}function u(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeThreadUpdatedHandler",function(e,n){return s(e,t,n)})}l.callWithoutWaitingForAnything=s,l.call=u}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){r("QPLUserFlow").start(r("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:t}},instanceKey:e})}function s(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056849266,"1765"),t,{instanceKey:e})}function u(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056849266,"1765"),{instanceKey:e})}function c(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:t}},instanceKey:e})}l.start=e,l.addAnnotations=s,l.endSuccess=u,l.endFailure=c}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){return(e||(e=n("Promise"))).resolve()}i.call=l}),66);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWUpdateClientRestoreStatusOperationType","ReQL","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.encrypted_backups_client_restore_status).filter(function(e){return e.threadId===t})).then(function(t){return t!=null?e.encrypted_backups_client_restore_status.delete(t.threadId).then(r("emptyFunction")):Promise.resolve()})}function c(t,n,a,i){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.encrypted_backups_client_restore_status).getKeyRange(n)).then(function(i){return i!=null?t.encrypted_backups_client_restore_status.put({lastUpdated:(e||(e=o("I64"))).of_float(Date.now()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:a,threadId:n}):Promise.resolve()})}function d(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.encrypted_backups_client_restore_status)).then(function(t){return t.reduce(function(t,n){return t.then(function(){return u(e,n.threadId)})},Promise.resolve())})}async function m(t,n){var a=n.threadId,i=n.action;return i===o("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?await t.encrypted_backups_client_restore_status.put({lastUpdated:(e||(e=o("I64"))).of_float(Date.now()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:void 0,threadId:a}):await c(t,n.threadId,void 0,n.ebPrefetch),Promise.resolve()}l.truncateClientRestoreStatusTable=d,l.call=m}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n){var a=n.contactUserId,i=n.threadJid,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.contacts).getKeyRange((e||(e=o("I64"))).of_string(a)));if(l==null){r("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var u=babelHelpers.extends({},l,{contactViewerRelationship:(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,i,"MAWBridgeUpdateContactAsConnectedHandler",async function(e,t){await Promise.allSettled([e.contacts.upsert([l.id],u),r("LSAddMessengerContactStoredProcedure")(r("LSFactory")(e),{contactId:l.id}),o("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(e,t),r("LSOptimisticAcceptMessageRequestStoredProcedure")(r("LSFactory")(e),{threadKey:t})])})}l.call=u}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeThreadsLoadedHandler",function(e,t){return r("LSUpdateE2EEMetadataParticipantsStoredProcedure")(r("LSFactory")(e),{threadKey:t})})}l.call=e}),98);
__d("MAWBridgeUpdateThreadActivityHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWChatJid","MAWFolderTypes","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MWFBLogger","ODS","WAJids","WATimeUtils","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","ActivityUpdate"]);async function c(t,n){var a=null;return r("gkx")("19864")?((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","verify"),await o("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(t,{authoritativeThreadKey:null,cannotReplyReason:null,clientThreadKey:null,description:"",folder:null,instanceKey:null,isGroup:o("WAJids").switchOnMsgrChatJidType(n.chatJid,{group:function(){return!0},user:function(){return!1}}),jid:n.chatJid,lastReadTs:o("WATimeUtils").castToMillisTime((s||(s=o("I64"))).to_float(n.bumpTimestampMs))}),a=await o("MAWChatJid").toThreadMaybe(t,n.chatJid),a==null&&((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","create"),await o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(t,{bumpTimestampMs:n.bumpTimestampMs,creationSource:n.source==="outgoing_msg"?"outgoing_message":"incoming_message",folderId:o("MAWFolderTypes").INBOX,jid:n.chatJid,optimisticThreadKey:null}),a=await o("MAWChatJid").toThreadMaybe(t,n.chatJid))):((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","create_no_verify"),await o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(t,{bumpTimestampMs:n.bumpTimestampMs,creationSource:n.source==="outgoing_msg"?"outgoing_message":"incoming_message",folderId:o("MAWFolderTypes").INBOX,jid:n.chatJid,optimisticThreadKey:null}),a=await o("MAWChatJid").toThreadMaybe(t,n.chatJid)),a==null?(await g(t,n.chatJid),null):a}async function d(e,t){var n=await o("MAWChatJid").toThreadMaybe(e,t.chatJid);e:{if(t.source==="outgoing_msg"||t.source==="incoming_msg"){var r=n!=null?n:await c(e,t);if(r==null){await g(e,t.chatJid);return}return m(e,r,t)}if(t.source==="deleted_msg"){if(n==null){await g(e,t.chatJid);return}return p(e,n,t)}if(t.source==="inserted_admin_msg"){if(n==null){await g(e,t.chatJid);return}return f(n,t,"No bump for admin message")}if(t.source==="eb_restore")return u.warn("Attempted bump from EB restore");throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.source)}}async function m(e,t,n){if(_(t,n)){f(t,n,"Stale incoming bump");return}await r("LSBumpE2EEMetadataThreadStoredProcedure")(r("LSFactory")(e),{bumpedByLocalDeviceSend:n.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:n.bumpTimestampMs,threadKey:t.threadKey}),f(t,n,"Thread bumped")}async function p(e,t,n){await e.threads.put(babelHelpers.extends({},t,{lastActivityTimestampMs:(s||(s=o("I64"))).min(t.lastActivityTimestampMs,n.bumpTimestampMs),lastReadWatermarkTimestampMs:s.min(t.lastReadWatermarkTimestampMs,n.bumpTimestampMs)})),f(t,n,"Thread unbumped")}function _(e,t){return t.source==="incoming_msg"&&(s||(s=o("I64"))).le(t.bumpTimestampMs,e.lastActivityTimestampMs)}function f(e,t,n){var r=[(s||(s=o("I64"))).to_string(e.threadKey),t.source,s.to_string(t.bumpTimestampMs),s.to_string(e.lastActivityTimestampMs),s.to_string(e.lastReadWatermarkTimestampMs)];u.debug.apply(u,[n+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(r))}async function g(e,t){var n=await o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(e,o("MAWJids").convertChatJidToIntJid(t),"MAWBridgeUpdateThreadActivityHandler");u.mustfix("Missing LSDBThread when updating thread activity. jid: %s, thread state: %s",t,n.type)}l.call=d}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.data_trace_meta).filter(function(e){var t=e.contextThree;return t!=null&&a.externalIds.includes(t)&&(u||(u=o("I64"))).equal(e.traceType,a.traceType)?e.shouldFlush===!1:!1})).then(function(l){var s=[];return l.reduce(function(e,n){return e.then(function(){s.push(n.traceId);var e=a.errorMessage;return e!=null?r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:i,dataTraceId:n.traceId,errorMessage:e,syncChannel:(u||(u=o("I64"))).neg_one}):r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:i,dataTraceId:n.traceId,syncChannel:(u||(u=o("I64"))).neg_one})})},(e||(e=n("Promise"))).resolve()).then(function(){return s})})}function d(t,o){return o.reduce(function(e,n){return e.then(function(){return r("updateAndFlushLSDataTrace")(t,n)})},(e||(e=n("Promise"))).resolve())}function m(t,a){var i=a.event;return i===r("MAWBridgeTraceEvent").ReceivedReceipt?c(t,a,o("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(e){return d(t,e)}):i===r("MAWBridgeTraceEvent").ReceivedSent?c(t,a,o("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(r("emptyFunction")):i===r("MAWBridgeTraceEvent").FlowEndForFailure?c(t,a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(e){return d(t,e)}):i===r("MAWBridgeTraceEvent").FlowEndForSuccess?c(t,a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(e){return d(t,e)}):(e||(e=n("Promise"))).resolve()}l.call=m}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSFactory","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","isInstamadilloEB"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){var i;if(r("isInstamadilloEB")())return(s||(s=n("Promise"))).resolve();var l=(i=a.traceId)!=null?i:r("LSRequestId").generate(),u=a.mediaType;return u==="document"?(s||(s=n("Promise"))).resolve():o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeUploadAttachmentHandler",function(t,i){var u=(e||(e=o("I64"))).to_string(i),c=o("MAWTimeUtils").isTimestampNewerThanXDays(a.ts,30);return o("MAWEncryptedBackupUtils").getBackupTenancy(t).then(function(e){var i=a.productType;return e!=null&&c?l!=null?(o("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:a.deliveryObjectId,flow:"old",mediaType:a.mediaType,messageId:a.messageId,threadId:a.threadId,traceId:l}),r("LSIssueAttachmentBackupTaskStoredProcedure")(r("LSFactory")(t),{deliveryObjectId:a.deliveryObjectId,mediaType:a.mediaType,messageId:a.messageId,productType:i,serverThreadKey:u,threadId:a.threadId,traceId:l})):r("LSIssueAttachmentBackupTaskStoredProcedure")(r("LSFactory")(t),{deliveryObjectId:a.deliveryObjectId,mediaType:a.mediaType,messageId:a.messageId,productType:i,serverThreadKey:u,threadId:a.threadId}):(o("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(l,!1,"old"),(s||(s=n("Promise"))).resolve())})})}l.call=u}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r,o){var a=String(o.xmaId);return t.attachments.get(r,o.msgId,a).then(function(i){if(i==null)return(e||(e=n("Promise"))).resolve();var l=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean),s=l.map(function(e){return t.attachment_ctas.delete(e)});return(e||(e=n("Promise"))).all(s).then(function(){return t.attachments.delete(r,o.msgId,a)})})}function u(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeXMAShareExpiredHandler",function(e,n){return s(e,n,t)})}l.callWithoutWaitingForAnything=s,l.call=u}),98);
__d("isInstamadilloDYI",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("665")===!0}l.default=e}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteMessagesOfThreadHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeEphemeralSettingsUpdatedForUIHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeNoteReplyStartCountdownHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeResignAttachmentCDNUrlHandler","MAWBridgeStartTraceHandler","MAWBridgeStoryReplyStartCountdownHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadUpdatedHandler","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateThreadActivityHandler","MAWBridgeUpdateTraceHandler","MAWBridgeUploadAttachmentHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWLoggerUtils","MAWMessageExpirationStorage","MWFBLogger","WAResultOrError","WATimeUtils","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("MWFBLogger").MWLogger().tags(["MAWBridgeUIEvent"]);function d(t,n,r){switch(r.tag){case"NewMsg":return o("MAWBridgeNewMsgHandler").call(n,r.value);case"MsgsStartCountdown":return o("MAWBridgeMsgsStartCountdownHandler").call(n,r.value);case"StoryReplyStartCountdown":return o("MAWBridgeStoryReplyStartCountdownHandler").call(n,r.value);case"NoteReplyStartCountdown":return o("MAWBridgeNoteReplyStartCountdownHandler").call(n,r.value);case"MsgClearCountdown":return Promise.resolve(o("MAWMessageExpirationStorage").clearMessageFromExpiration(r.value));case"DropAllSecureThreads":return o("MAWBridgeDropAllSecureThreadsHandler").call(n);case"VerifyThreadExists":{var a=r.value;return o("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(n,a)}case"CreateE2EEMetadataThreadV2":return o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(n,r.value);case"EditMsgHistoryAdded":return o("MAWBridgeEditMsgHistoryAddedHandler").call(t,n,r.value);case"MsgUpdated":return o("MAWBridgeMsgUpdatedHandler").call(n,r.value);case"NewMedia":return o("MAWBridgeNewMediaHandler").call(n,r.value);case"NewMediaRange":return o("MAWBridgeNewMediaRangeHandler").call(n,r.value);case"MediaExpired":return o("MAWBridgeMediaExpiredHandler").call(n,r.value);case"XMAShareExpired":return o("MAWBridgeXMAShareExpiredHandler").call(n,r.value);case"NewXMA":return o("MAWBridgeNewXMAHandler").call(n,r.value);case"XMAShareTombstoned":return o("MAWBridgeXMAShareTombstonedHandler").call(n,r.value);case"ParticipantRemoved":return o("MAWBridgeParticipantRemovedHandler").call(n,r.value);case"UpdateE2EEMetadataParticipants":return o("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(n,r.value);case"ReceivedReceipt":return o("MAWBridgeReceivedReceiptHandler").call(n,r.value);case"ThreadUpdated":return o("MAWBridgeThreadUpdatedHandler").call(n,r.value);case"GroupInfoUpdated":return o("MAWBridgeGroupInfoUpdatedHandler").call(n,r.value);case"UpdateThreadActivity":return o("MAWBridgeUpdateThreadActivityHandler").call(n,r.value);case"StartTrace":return o("MAWBridgeStartTraceHandler").call(n,r.value);case"UpdateTrace":return o("MAWBridgeUpdateTraceHandler").call(n,r.value);case"ThreadHiddenV2":return o("MAWBridgeThreadHiddenV2Handler").call(n,r.value);case"SyncContacts":return o("MAWBridgeSyncContacts").call(n,r.value);case"ReceivedChatState":return o("MAWBridgeReceivedChatStateHandler").call(n,r.value);case"ClockSkewUpdated":return Promise.resolve(o("WATimeUtils").setClockSkew(r.value));case"ABPropsUpdated":return c.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated"),Promise.resolve(o("MAWAbPropsClient").rewrite(r.value));case"COPDigestReceived":return o("MAWBridgeHandleCOPDigest").call(n,r.value);case"UpsertReaction":return o("MAWBridgeReactionUpsertHandler").call(n,r.value);case"DeleteReaction":return o("MAWBridgeDeleteReactionHandler").call(n,r.value);case"DeleteMessagesOfThread":return o("MAWBridgeDeleteMessagesOfThreadHandler").call(n,r.value);case"UploadAttachment":return o("MAWBridgeUploadAttachmentHandler").call(n,r.value);case"ResignAttachmentCDNUrl":return o("MAWBridgeResignAttachmentCDNUrlHandler").call(n,r.value);case"DeleteMessages":return o("MAWBridgeDeleteMessagesHandler").call(n,r.value);case"RestoreMessageBatch":return o("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]))),Promise.resolve();case"OneToOneMessageRequestLoaded":return o("MAWBridgeOneToOneMessageRequestLoadedHandler").call(n,r.value);case"GroupInviteUpdate":return o("MAWBridgeGroupInviteUpdateHandler").call(n,r.value);case"UpdateDyiStatus":return o("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]))),Promise.resolve();case"DeleteGroupInvite":return o("MAWBridgeDeleteGroupInviteHandler").call(n,r.value);case"TraceRecordCheckpoint":return o("MAWBridgeTraceRecordCheckpointHandler").call(n,r.value);case"ParticipantsUpdated":return o("MAWBridgeParticipantsUpdatedHandler").call(n,r.value);case"StartTraceWithTraceId":return Promise.resolve();case"UpdateClientRestoreStatus":return o("MAWBridgeUpdateClientRestoreStatus").call(n,r.value);case"NewMsgs":return o("MAWBridgeNewMsgHandler").bulkCall(n,r.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return o("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(n,r.value);case"EphemeralSettingsUpdatedForUI":return o("MAWBridgeEphemeralSettingsUpdatedForUIHandler").call(n,r.value);case"RavenActionUpdate":return o("MAWBridgeRavenActionMsgForUIHandler").call(n,r.value);case"GroupInviteLoaded":return o("MAWBridgeGroupInviteLoadedHandler").call(n,r.value);case"RemoveMessageSearchResult":return o("MAWBridgeRemoveMessageSearchResultHandler").call(n,r.value);case"AddMessageSearchResult":return o("MAWBridgeAddMessageSearchResultHandler").call(t,n,r.value);case"FulfillRestorePromise":return o("MAWBridgeFulfillRestorePromisePayloadHandler").call(r.value);case"UpdateContactAsConnected":return o("MAWBridgeUpdateContactAsConnectedHandler").call(n,r.value);case"RefreshContact":return o("MAWBridgeRefreshContactHandler").call(n,r.value);case"NewReceiverFetchInfo":return o("MAWBridgeNewReceiverFetchInfoHandler").call(n,r.value);case"RestoreNativeOp":return o("MAWBridgeCallRestoreNativeOpHandler").call(r.value);case"NewPoll":return o("MAWBridgeNewPollHandler").call(n,r.value);default:return Promise.resolve()}}function m(e,t){if(!r("isArmadillo")()&&!r("isInstamadilloDYI")()){c.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(t.length===1&&t[0].tag==="TraceRecordCheckpoint")){var n={};n=t.reduce(function(e,t){var n;return e[t.tag]=((n=e[t.tag])!=null?n:0)+1,e},n),c.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""])),JSON.stringify(n))}r("promiseDone")(p(e,t),r("emptyFunction"),function(e){c.catching(e).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",t.map(function(e){return e.tag}).join(", "))})}async function p(e,t){var n=await e,a=o("MAWLoggerUtils").getInstanceKey(),l=t.map(function(e){return e.tag}),s="";o("MAWBridgeUIEventQueueQPLLogger").start(a,l),o("MAWBridgeUIEventQueueQPLLogger").addAnnotations(a,{int:{queue_size:t.length}});var u;try{u=await n.runInTransaction(async function(e){for(var a=0;a<t.length;a++){var i=t[a];try{await d(n,e,i)}catch(e){return s=i.tag,o("WAResultOrError").makeError(r("getErrorSafe")(e))}}return o("WAResultOrError").makeResult(!0)},"readwrite","background",{events:t,type:"maw_ui_bridge"},i.id+":284")}catch(e){u=o("WAResultOrError").makeError(r("getErrorSafe")(e))}u.success?o("MAWBridgeUIEventQueueQPLLogger").endSuccess(a):(o("MAWBridgeUIEventQueueQPLLogger").endFailure(a,s),c.catching(u.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",s,l.toString()))}async function _(e,t,n){try{await d(e,t,n)}catch(e){var o=r("getErrorSafe")(e);throw c.catching(o).mustfix("[handleShimEvent] Failed to handle UI event: %s",n.tag),e}}l.handleEvents=m,l.handleShimEvent=_}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EBLogger","EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","QPLUserFlow","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){o("EncryptedBackupdDYIFileSaver").saveFile(e,t),window.setTimeout(function(){r("promiseDone")(n())},1e3)}async function s(t){var n=t.qplEvent,a=t.qplInstanceKeyE2E,i=t.status,l=o("EBLogger").EBLogger().tags(["dyi"]);if(i===o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw l.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var s=o("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,u=await o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),c=await o("EncryptedBackupsDYIFileUtils").readFile(u,s);await e(s,c,async function(){await u.removeEntry(s)}),l.info("Saving file with filename ",s),n!=null&&a!=null&&r("QPLUserFlow").endSuccess(n,{instanceKey:a}),l.info("DYI Complete")}catch(e){return l.catching(r("getErrorSafe")(e)).mustfix("Failed to download the DYI archive"),n!=null&&a!=null&&r("QPLUserFlow").endFailure(n,r("getErrorSafe")(e).message,{instanceKey:a}),o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}return i===o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&n!=null&&a!=null&&r("QPLUserFlow").endFailure(n,"Unknown error",{instanceKey:a}),i}l.call=s}),98);
__d("MWChatEncryptedBackupsAddDeviceWithEBKeys",["EBMainThreadEBDBApiDeferred","EBSMAPI","EBWorkerODSEntityName.enum","MAWBridgeFireAndForget"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.backupId,n=e.db,a=e.newDeviceRegistrationId,i=e.previousDeviceId;return r("EBSMAPI").addDeviceWithEBKeys({backupId:t,db:n,newDeviceRegistrationId:a,previousDeviceId:i,source:r("EBWorkerODSEntityName.enum").MW_EB_AUTO_RESTORE_MAIN_THREAD,trackAddingDevice:function(t){o("EBMainThreadEBDBApiDeferred").addNewDevice(t)}}).then(function(){return o("MAWBridgeFireAndForget").fireAndForget("backend","addDeviceWithKeysInWorker",{backupId:t,deviceRegistrationId:a,isAutoRestore:!0,previousDeviceId:i,source:r("EBWorkerODSEntityName.enum").MW_EB_AUTO_RESTORE_WORKER})})}l.addDeviceWithEBKeys=e}),98);
__d("MWEncryptedBackupsProcessBackupDataUtils",["EBFetchBackupIdsShared","MWEncryptedBackupsListenForChangesToBackupStateInitPath","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.data,n=e.dbPromise,a=e.isInitalLoad,i=e.setListenForChangesToBackupState,l=o("EBFetchBackupIdsShared").transformBackupDataForLS(t);r("promiseDone")(n,function(e){return o("EBFetchBackupIdsShared").updateBackupsTableWithTransformedData({storage:e,transformedData:l}).then(function(){i(!0),t.xfb_backup!=null&&t.xfb_backup.id!=null&&a.current===!0&&(a.current=!1,r("MWEncryptedBackupsListenForChangesToBackupStateInitPath").preloadEBData(e))})})}l.processBackupData=e}),98);
__d("WebStorageManagerEstimatesFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2144"),s=o("FalcoLoggerInternal").create("web_storage_manager_estimates",e),u=s;l.default=u}),98);
__d("mwEBSetBackupState",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.setBackupState,n=e.state;switch(n){case 1:break;case 2:t(2);break;case 3:t(3);break;case 4:t(4);break;case-1:t(-1);break;case 0:break}}i.default=e}),66);
__d("mwProcessBackupIds",["I64","LSAuthorityLevel","LSIntEnum","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","QPLEvent","QPLUserFlow","WebSession"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c="-1";function d(e){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,"EB_STATE_"+e+"."),o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent})}function m(t){var n=t.clientStateData,a=t.encryptedBackupData,i=a==null?void 0:a.backupId;return i==null?(d("NO_BACKUPS_PRESENT"),2):(e||(e=o("I64"))).to_string(i)===c?(o("MWChatEncryptedBackupsLogging").endFailure({errorName:"FETCH_ERROR",event:o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent}),-1):n==null||!(e||(e=o("I64"))).equal(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))?(d("DEVICE_NOT_ONBOARDED"),4):(e||(e=o("I64"))).equal(n.backupId,i)?(d("DEVICE_ONBOARDED"),3):(d("DEVICE_NOT_ONBOARDED_BACKUP_ID_MISMATCH"),4)}function p(t){var n=t.clientStateData,a=t.encryptedBackupData;if(a==null)return 0;var i=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();return r("QPLUserFlow").getActiveFlowIDs().includes((u||(u=o("QPLEvent"))).getMarkerId(o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent))||r("QPLUserFlow").start(o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:i,processBackupIdsVersion:"JS",sessionTabId:o("WebSession").getId()}}}),(e||(e=o("I64"))).equal(a.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))?(d("FETCH_IN_PROGRESS"),1):(e||(e=o("I64"))).equal(a.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))?m({clientStateData:n,encryptedBackupData:a}):(o("MWChatEncryptedBackupsLogging").endFailure({errorName:"FETCH_ERROR_WRONG_AUTHORITY_LEVEL",event:o("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent}),-1)}l.default=p}),98);
__d("useMWChatDisplayEncryptedBackupsRestoreToast",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","ReQL","ReQLSuspense","react","react-compiler-runtime","useMAWEncryptedBackupsRestoreToast","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useEffect,p=d.useState;function _(){var t=o("react-compiler-runtime").c(10),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.encrypted_backups_client_restore_status?(a=function(){return o("ReQL").fromTableAscending(n.tables.encrypted_backups_client_restore_status)},t[0]=n.tables.encrypted_backups_client_restore_status,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useArray(a,l,i.id+":27"),u=r("useMAWEncryptedBackupsRestoreToast")(),c=u.showInProgressToast,d=u.showSuccessToast,_=p(!1),g=_[0],h=_[1],y,C;t[4]!==g||t[5]!==s||t[6]!==c||t[7]!==d?(y=function(){var e=s.some(f);g&&!e?(h(!1),d()):!g&&e&&(h(!0),c())},C=[g,s,c,d],t[4]=g,t[5]=s,t[6]=c,t[7]=d,t[8]=y,t[9]=C):(y=t[8],C=t[9]),m(y,C)}function f(e){var t=e.restoreStatus;return t!=null&&(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS))}l.default=_}),98);
__d("useMWChatEncryptedBackupsAutoRestoreEffect",["EBSMGatingUI","MWChatEncryptedBackupsAddDeviceWithEBKeys","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsInitializeRestoreDeferred","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","ReQL","ReQLSuspense","WALogger","gkx","promiseDone","react","react-compiler-runtime","useLabyrinthLogging","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useEffect,p=d.useRef;function _(t){var n=o("react-compiler-runtime").c(13),a=t.backupState,l=t.clientData,s=t.epochData,c=t.isSubscribedToData,d=t.setIsSubscribedToData,_=r("MWChatEncryptedBackupsQPLSource.enum").AUTO_RESTORE,g=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),h=g.startFlow,y=p(!1),C=(u||(u=r("useReStore")))(),b,v;n[0]!==c||n[1]!==C?(b=function(){return c?o("ReQL").fromTableAscending(C.tables.experiences_shared_state):o("ReQL").empty()},v=[c,C],n[0]=c,n[1]=C,n[2]=b,n[3]=v):(b=n[2],v=n[3]);var S=o("ReQLSuspense").useArray(b,v,i.id+":68"),R,L;n[4]!==a||n[5]!==l||n[6]!==s||n[7]!==d||n[8]!==S||n[9]!==h||n[10]!==C?(R=function(){if(!(y.current||a===1||a===0)){if(a===3){var t=l==null?void 0:l.deviceId,n=o("MWEncryptedBackupsSharedState").getIsEntryPresentInSharedState({db:C,sharedStateTable:S,stateKey:"auto_restored"}),i=o("MWEncryptedBackupsSharedState").getIsEntryPresentInSharedState({db:C,sharedStateTable:S,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}),u=o("MWEncryptedBackupsSharedState").getIsEntryPresentInSharedState({db:C,sharedStateTable:S,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY}),c=n||i||u,m=o("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId();if(!c&&m!==""&&l!=null&&s!=null&&t!=null){o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT),h({additionalAnnotations:{device_type:"auto_restore"},event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_AUTO_RESTORE_AUTH,source:_});var p=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();if(h({additionalAnnotations:{eb_session_identifier:p,restore_upsell_first_impression_time:p},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:_}),r("gkx")("10572"))o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:C,onFailure:f,onSuccess:function(){r("promiseDone")(o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:C,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY})),o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM(),without_add_device:!0},string:{restore_type:"auto_restore"}},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_AUTO_RESTORE_AUTH}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wmi][eb] initialize auto-restore success"])))}});else{var g={backupId:l.backupId,db:C,newDeviceRegistrationId:m,previousDeviceId:t};o("MWChatEncryptedBackupsAddDeviceWithEBKeys").addDeviceWithEBKeys(g)}}}y.current=!0,d(!1)}},L=[a,l,s,S,_,h,C,d],n[4]=a,n[5]=l,n[6]=s,n[7]=d,n[8]=S,n[9]=h,n[10]=C,n[11]=R,n[12]=L):(R=n[11],L=n[12]),m(R,L)}function f(){o("MWChatEncryptedBackupsLogging").endFailure({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM(),without_add_device:!0}},errorName:"FAILED_TO_RESTORE_ENCRYPTED_BACKUP",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),o("MWChatEncryptedBackupsLogging").endFailure({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},errorName:"FAILED_TO_RESTORE_ENCRYPTED_BACKUP",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_AUTO_RESTORE_AUTH}),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[wmi][eb] initialize auto-restore failed"])))}l.default=_}),98);
__d("useMWChatEncryptedBackupsAutoRestore",["I64","LSAuthorityLevel","LSIntEnum","MWEBEntrypointsKillswitch.enum","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWChatEncryptedBackupsAutoRestoreEffect","useMWEBBackupState","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useState;function m(){var t=o("react-compiler-runtime").c(14),n=d(!0),a=n[0],l=n[1],s=(e||(e=r("useReStore")))(),u,c;t[0]!==a||t[1]!==s?(u=function(){return a?o("ReQL").fromTableAscending(s.tables.secure_encrypted_backups_epochs):o("ReQL").empty()},c=[a,s],t[0]=a,t[1]=s,t[2]=u,t[3]=c):(u=t[2],c=t[3]);var m=o("ReQLSuspense").useFirst(u,c,i.id+":27"),_,f;t[4]!==a||t[5]!==s?(_=function(){return a?o("ReQL").fromTableAscending(s.tables.secure_encrypted_backups_client_state).filter(p):o("ReQL").empty()},f=[a,s],t[4]=a,t[5]=s,t[6]=_,t[7]=f):(_=t[6],f=t[7]);var g=o("ReQLSuspense").useFirst(_,f,i.id+":34"),h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h={entrypoint:r("MWEBEntrypointsKillswitch.enum").AUTO_RESTORE},t[8]=h):h=t[8];var y=r("useMWEBBackupState")(h),C;t[9]!==y||t[10]!==g||t[11]!==m||t[12]!==a?(C={backupState:y,clientData:g,epochData:m,isSubscribedToData:a,setIsSubscribedToData:l},t[9]=y,t[10]=g,t[11]=m,t[12]=a,t[13]=C):C=t[13],r("useMWChatEncryptedBackupsAutoRestoreEffect")(C)}function p(e){var t=e.authorityLevel;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.default=m}),98);
__d("useMWChatEncryptedBackupsAutoRestorePicker",["cr:27509"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:27509")()}l.default=e}),98);
__d("useMWEBListenForChangesToBackupStateXDevice",["I64","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useRef;function p(t){var n=o("react-compiler-runtime").c(8),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.encrypted_backups_status_trigger?(l=function(){return o("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger)},n[0]=a.tables.encrypted_backups_status_trigger,n[1]=l):l=n[1];var u;n[2]!==a?(u=[a],n[2]=a,n[3]=u):u=n[3];var c=o("ReQLSuspense").useFirst(l,u,i.id+":27"),p=m(null),_,f;n[4]!==c||n[5]!==t?(_=function(){c!=null&&p.current!==c.pk&&!(s||(s=o("I64"))).equal(c.pk,(s||(s=o("I64"))).of_float(0))&&(p.current=c.pk,t())},f=[c,t],n[4]=c,n[5]=t,n[6]=_,n[7]=f):(_=n[6],f=n[7]),d(_,f)}l.default=p}),98);
__d("useMWEBPropagateEbStateChangesThroughRelay",["CometRelay","MWEBPropagateEbStateUtils","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(8),a=t.listenForChangesToBackupState,l=t.onStateChange,s=(e||(e=r("useReStore")))(),u=o("CometRelay").useRelayEnvironment(),c,d;n[0]!==s||n[1]!==a?(c=function(){return a?o("ReQL").fromTableAscending(s.tables.encrypted_backups):o("ReQL").empty()},d=[s,a],n[0]=s,n[1]=a,n[2]=c,n[3]=d):(c=n[2],d=n[3]);var m=o("ReQLSuspense").useFirst(c,d,i.id+":36"),p,_;n[4]!==s||n[5]!==a?(p=function(){return a?o("ReQL").fromTableAscending(s.tables.secure_encrypted_backups_client_state):o("ReQL").empty()},_=[s,a],n[4]=s,n[5]=a,n[6]=p,n[7]=_):(p=n[6],_=n[7]);var f=o("ReQLSuspense").useFirst(p,_,i.id+":43"),g=o("MWEBPropagateEbStateUtils").useBackupStateUpdate(u,l),h=o("MWEBPropagateEbStateUtils").useHasArmadilloError();o("MWEBPropagateEbStateUtils").useEbStatePropagationEffect(m,f,u,h,g)}l.default=s}),98);
__d("useMWEncryptedBackupsFetchBackupIdsV2Query_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25220416984279164"}),null);
__d("useMWEncryptedBackupsFetchBackupIdsV2Query.graphql",["useMWEncryptedBackupsFetchBackupIdsV2Query_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEncryptedBackupsFetchBackupIdsV2Query",selections:[{args:null,kind:"FragmentSpread",name:"EBFetchBackupIdsSharedFragment"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEncryptedBackupsFetchBackupIdsV2Query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"backup_tenancy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_user_opted_out",storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},{alias:null,args:null,kind:"ScalarField",name:"encryption_management_delegator_id",storageKey:null},{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_created_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"migration_status",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackupDevicesConnection",kind:"LinkedField",name:"devices",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupDevicesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEBDevice",kind:"LinkedField",name:"node",plural:!1,selections:[e],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEBUserPreferences",kind:"LinkedField",name:"xfb_eb_user_preferences",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"onboarding_decision",storageKey:null},e],storageKey:null}]},params:{id:n("useMWEncryptedBackupsFetchBackupIdsV2Query_facebookRelayOperation"),metadata:{},name:"useMWEncryptedBackupsFetchBackupIdsV2Query",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEncryptedBackupsFetchBackupIdsV2",["CometRelay","EBFetchBackupIdsShared","EBGating","EBSMAPI","MAWWaitForBackendSetup","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupDataUtils","ODS","QPLEvent","QPLUserFlow","WebSession","cr:27670","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWEBListenForChangesToBackupStateXDevice","useMWEncryptedBackupsFetchBackupIdsV2Query.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=d.useEffect,p=d.useRef,_=d.useState;function f(e){var t=o("react-compiler-runtime").c(10),a=r("useAsyncReStore")(),i=p(!0),l=p(!1),s=_(!1),d=s[0],f=s[1],g=o("CometRelay").useRefetchableFragment(o("EBFetchBackupIdsShared").fetchBackupIdsRefetchableFragment,e),h=g[0],y=g[1],C;t[0]!==h||t[1]!==y?(C=function(){var e=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();r("QPLUserFlow").getActiveFlowIDs().includes((u||(u=o("QPLEvent"))).getMarkerId(o("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||r("QPLUserFlow").start(o("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:e,fetchBackupIdsVersion:"GQL",sessionTabId:o("WebSession").getId()}}}),y({},{fetchPolicy:"network-only",onComplete:function(t){if(l.current=!1,r("QPLUserFlow").getActiveFlowIDs().includes((u||(u=o("QPLEvent"))).getMarkerId(o("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent)))if(t!=null)o("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{error:t.message,error_stack:t.stack}},errorName:"fetch_backup_ids_error",event:o("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent});else{var e,n,a;o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{isUserOptedOut:(e=h.xfb_backup)==null?void 0:e.is_user_opted_out},string:{backup_id:(n=(a=h.xfb_backup)==null?void 0:a.id)!=null?n:"null"}},event:o("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})}}})},t[0]=h,t[1]=y,t[2]=C):C=t[2];var b=C;r("useMWEBListenForChangesToBackupStateXDevice")(b);var v;t[3]!==d||t[4]!==b?(v={listenForChangesToBackupState:d,onStateChange:b},t[3]=d,t[4]=b,t[5]=v):v=t[5],n("cr:27670")(v);var S,R;t[6]!==h||t[7]!==a?(S=function(){l.current!==!0&&(l.current=!0,o("MAWWaitForBackendSetup").isBackendSetupSuccessful()&&o("EBGating").isFetchBackupIdsFromWorker()?((c||(c=o("ODS"))).bumpEntityKey(7319,"useMWEncryptedBackupsFetchBackupIdsV2.destination","worker"),r("promiseDone")(r("EBSMAPI").fetchBackupIds("useMWEncryptedBackupsFetchBackupIdsV2").then(function(){f(!0),h.xfb_backup!=null&&h.xfb_backup.id!=null&&i.current===!0&&(i.current=!1)}))):((c||(c=o("ODS"))).bumpEntityKey(7319,"useMWEncryptedBackupsFetchBackupIdsV2.destination","mainthread.gql.isBackendSetupSuccessful="+o("MAWWaitForBackendSetup").isBackendSetupSuccessful().toString()),o("MWEncryptedBackupsProcessBackupDataUtils").processBackupData({data:h,dbPromise:a,isInitalLoad:i,setListenForChangesToBackupState:f})))},R=[h,a],t[6]=h,t[7]=a,t[8]=S,t[9]=R):(S=t[8],R=t[9]),m(S,R)}function g(){var t=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("useMWEncryptedBackupsFetchBackupIdsV2Query.graphql"),{},{fetchPolicy:"network-only"});f(t)}l.default=g}),98);/*FB_PKG_DELIM*/
__d("hyperionChannel",["hyperionHook"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(){this.$1=new(e||(e=o("hyperionHook"))).Hook}var n=t.prototype;return n.pipe=function(t,n){var e=this.$1.add(n?function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];n(function(){t.emit.apply(t,[e].concat(o))})}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))});return e.$2=t,t},n.unpipe=function(t){return this.$1.removeIf(function(e){return e.$2===t})},n.emit=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.$1).call.apply(e,[t].concat(r))},t})(),u=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$Channel1=Object.create(null),babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$Channel2=function(n){var t=this.$Channel1[n];return t||(t=this.$Channel1[n]=new(e||(e=o("hyperionHook"))).Hook),t},r.on=function(t){return this.$Channel2(t)},r.addListener=function(t,n){return this.on(t).add(n)},r.removeListener=function(t,n){return this.on(t).remove(n),n},r.emit=function(n){for(var e,r,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(e=this.$Channel2(n)).call.apply(e,a),(r=t.prototype.emit).call.apply(r,[this,n].concat(a))},n})(s),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$PausableChannel1=!1,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.pause=function(){this.$PausableChannel1=!0},n.unpause=function(){this.$PausableChannel1=!1},n.isPaused=function(){return this.$PausableChannel1},n.emit=function(n){var t;if(!this.$PausableChannel1){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=e.prototype.emit).call.apply(t,[this,n].concat(o))}},t})(u);l.Channel=u,l.PausableChannel=c,l.PipeableEmitter=s}),98);
__d("ALChannel",["hyperionChannel"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("hyperionChannel")).Channel,s=e;l.default=s}),98);
__d("ALReactUtils",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return!0},s=function(t){var e=Object.keys(t).find(function(e){return e.startsWith("__reactFiber$")});return e!=null?t[e]:null},u=function(t){var e,n,r=(e=t.displayName)!=null?e:t.name;if(r==null)return null;var o=r.match(/.*\[from (.*)\.react\]/);return(n=o==null?void 0:o[1])!=null?n:r};function c(t,n){if(t==null)return r("FBLogger")("ads_manager_auto_logging").warn("[AL] Null element passed to getReactComponentName_THIS_CAN_BREAK."),null;var o=n||e,a=t;try{for(var i=s(a);i;){var l=i.type;if(l==null||typeof l=="string"){i=i.return;continue}var c=u(l);if(c==null&&l.render!=null&&(c=u(l.render)),c!=null&&c!==""&&o(c))return c;i=i.return}}catch(e){var d=r("getErrorSafe")(e);return r("FBLogger")("ads_manager_auto_logging").catching(d).warn("[AL] Caught exception in getReactComponentName_THIS_CAN_BREAK."),null}}l.getReactComponentName_THIS_CAN_BREAK=c}),98);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);
__d("AutoLoggingComponentValidatorListSitevarConfig.experimental",["cr:27482"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27482")}),98);
__d("AutoLoggingComponentNameValidator",["AutoLoggingComponentValidatorListSitevarConfig.experimental","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={COMPONENT_ALLOW_LIST:r("AutoLoggingComponentValidatorListSitevarConfig.experimental").COMPONENT_ALLOW_LIST,COMPONENT_BLOCK_LIST:r("AutoLoggingComponentValidatorListSitevarConfig.experimental").COMPONENT_BLOCK_LIST},s=function(t){return t.join("|")},u=null;function c(t){var n,o;u!=null&&u!==t&&r("FBLogger")("auto_logging").warn("Config name used to get validator changed, ensure you are using consistent init config across AutoLogging",u,t),u=t;var a=(n=(o=r("AutoLoggingComponentValidatorListSitevarConfig.experimental").TOOL_CONFIG)==null?void 0:o[t])!=null?n:e,i=s(a.COMPONENT_ALLOW_LIST),l=s(a.COMPONENT_BLOCK_LIST);return function(e){return e.match(i)!=null&&e.match(l)==null}}l.getComponentNameValidator=c}),98);
__d("AdsALReactUtils",["ALReactUtils","AutoLoggingComponentNameValidator"],(function(t,n,r,o,a,i,l){"use strict";var e=o("AutoLoggingComponentNameValidator").getComponentNameValidator("ads");function s(t,n){var r;return n===void 0&&(n=null),o("ALReactUtils").getReactComponentName_THIS_CAN_BREAK(t,((r=n)==null?void 0:r.skipValidator)===!0?function(){return!0}:e)}function u(t){return!e(t)}l.getReactComponentName_THIS_CAN_BREAK=s,l.isComponentNameBlocked=u}),98);
__d("AutoLoggingComponentValidatorListSitevarConfigJSModuleWrapper",["AutoLoggingComponentValidatorListSitevarConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("AutoLoggingComponentValidatorListSitevarConfig")}),98);
__d("BDSignalBufferData",[],(function(t,n,r,o,a,i){"use strict";var e={},l=e;i.default=l}),66);
__d("SignalValueContext",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.cn=e}var t=e.prototype;return t.getSignalValueContextName=function(){return this.cn},e})();i.default=e}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.signalType=e}var t=e.prototype;return t.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")},t.executeAsyncSignalCollection=async function(){var e=await this.executeSignalCollection();return e},e.getSanitizedURI=function(){var e=window.location.href,t=e.indexOf("?");return t<0?e:e.substring(0,t)},t.getContext=function(){return new(r("SignalValueContext"))(e.getSanitizedURI())},t.throwIfNotInitialized=function(){if(!(this.signalType in r("BDSignalBufferData")))throw new Error("Signal is not intialized")},e})();l.default=e}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(t,n,r,o,a,i,l){"use strict";var e="biometric_signal_collected",s=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){throw r("err")("Child class responsibility to implement listenForSignals")},n.executeSignalCollection=function(){throw r("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")},t})(r("BDSignalCollectorBase"));l.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=e,l.BDBiometricSignalCollectorBase=s}),98);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.signalFlags=e,this.signalType=t}var t=e.prototype;return t.getSignalCollector=function(){return r("SignalCollectorMap").get(this.signalType)},t.getBufferConfig=function(){return r("BDSignalBufferData")[this.signalType]},e})();l.default=e}),98);
__d("BDLoggingConstants",[],(function(t,n,r,o,a,i){"use strict";var e={ERROR:"error",WARNING:"warning",INFO:"info"},l={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"},s="JS";i.LEVELS=e,i.OPERATIONS=l,i.COMPONENT_NAME=s}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setBdSessionID=function(t){return this.$1.bd_session_id=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setDurationUs=function(t){return this.$1.duration_us=t,this},t.setExceptionMessage=function(t){return this.$1.exception_message=t,this},t.setExceptionStackTrace=function(t){return this.$1.exception_stack_trace=t,this},t.setExceptionType=function(t){return this.$1.exception_type=t,this},t.setIntValue=function(t){return this.$1.int_value=t,this},t.setLevel=function(t){return this.$1.level=t,this},t.setOperation=function(t){return this.$1.operation=t,this},t.setOperationInfo=function(t){return this.$1.operation_info=n("GeneratedLoggerUtils").serializeMap(t),this},t.setSessionlets=function(t){return this.$1.sessionlets=n("GeneratedLoggerUtils").serializeVector(t),this},e})(),l={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};i.default=e}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.INFO,t,n,r)}function s(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.WARNING,t,n,r)}function u(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.ERROR,t,n,r)}function c(e,t,n,a,i){if(a===void 0&&(a={}),o("Random").coinflip(d(n))){if(a===null)throw new Error("opeartion info null");a.source=e,new(r("BDOperationTypedLogger"))().setLevel(t).setDurationUs(i).setOperation(n).setComponent(o("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(a).log()}}function d(e){var t=o("BDLoggingConstants").OPERATIONS;switch(e){case t.APPEND_SIGNAL:case t.HB_COLLECTED:case t.GET_LOCAL_STORAGE_ERROR:case t.WEB_STORAGE:case t.SIGNAL_NOT_IMPLEMENTED:case t.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}l.logInfo=e,l.logWarning=s,l.logError=u,l.log=c,l.getFlipSamplingByOperation=d}),98);
__d("SignalErrorValueTypeDef",[],(function(t,n,r,o,a,i){"use strict";var e="ec",l="en",s="es",u=500,c=(function(){function t(e,t,n){this.$1=e,this.$2=t,n!=null&&(this.$3=n.substr(0,u))}var n=t.prototype;return n.getErrorCode=function(){return this.$1},n.getErrorName=function(){return this.$2},n.getErrorDetails=function(){return this.$3},n.isEqual=function(t){return this.$1===t.getErrorCode()&&this.$3===t.getErrorDetails()&&this.$2===t.getErrorName()},n.toJSON=function(){var t={};switch(t[e]=this.$1,this.$1){case 0:t[l]=this.$2,t[s]=this.$3;break}return t},t})();i.SignalErrorValueTypeDef=c}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e="SignalValueTypeDef",s="t",u="ctx",c="v",d="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"},p=(function(){function t(e,t,n,r,o){this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=o!=null?o:0}var n=t.prototype;return n.getTimeStampMS=function(){return this.$1},n.getSignalContext=function(){return this.$2},n.getSignalValue=function(){return this.$3},n.getSignalValueType=function(){return this.$4},n.isEqual=function(n,r){if(n==null)return o("BDOperationLogHelper").logWarning(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL),!1;if(this.getSignalValueType()!==n.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&n.getSignalValueType()===m.ERROR)return this.equalValue(n);var t=!1;return r.has(128)&&(t=this.equalValue(n)),r.has(256)&&(t=t&&this.getSignalContext()!=null&&n.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===n.getSignalContext().getSignalValueContextName()),r.has(512)&&(t=t&&Math.abs(this.getTimeStampMS()-n.getTimeStampMS())<=this.$5),t},n.equalValue=function(t){if(this.isPrimitiveType())return this.getSignalValue()===t.getSignalValue();throw new Error("Must implement in the subclasses")},n.toJSON=function(t){var e={};return t&&(e[s]=this.$1/1e3,this.$2!=null&&(e[u]=this.$2)),this.$3==null?e[d]=new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(2):this.addValueOrErrorToJSON(e),e},n.addValueOrErrorToJSON=function(t){if(this.isPrimitiveType())t[c]=this.$3;else throw new Error("Must implement in the subclasses")},n.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}},t})();l.BD_VALUE=c,l.BD_ERROR=d,l.VALUE_TYPES=m,l.SignalValueTypeDef=p}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;if(navigator.connection!=null&&navigator.connection.rtt!=null){var t=navigator.connection.rtt;e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),t)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.connection.rtt not supported"));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30004,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("HeartbeatObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.isAppForeground=!0}var t=e.prototype;return t.toJSON=function(){return{f:this.isAppForeground}},t.isEqual=function(t){return!1},e})();i.default=e}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatObject")));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38e3,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("KeyDownUpObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.action=null,this.key_code=null,this.action=e,this.key_code=t}var t=e.prototype;return t.toJSON=function(){return{action:this.action,key_code:this.key_code}},t.isEqual=function(n){return n instanceof e?this.action===n.action&&this.key_code===n.key_code:!1},e})();i.default=e}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){var e=this;r("gkx")("21049")&&(document.addEventListener("keydown",function(t){return e.collectSignals(2)}),document.addEventListener("keyup",function(t){return e.collectSignals(1)}))},n.collectSignals=function(t){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("KeyDownUpObject"))(t,0)),n={signalId:this.signalType,data:{valueOrError:e}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:n}))},t})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),s=null,u={signalType:30100,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("StringArrayObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.strings=[],this.strings=e}var t=e.prototype;return t.toJSON=function(){return this.strings},t.isEqual=function(n){if(!(n instanceof e))return!1;if(n.strings===this.strings)return!0;if(n.strings.length!==this.strings.length)return!1;for(var t=0;t<this.strings.length;t++)if(this.strings[t]!==n.strings[t])return!1;return!0},e})();i.default=e}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=[].concat(navigator.languages),t=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("StringArrayObject"))(e));return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30003,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.mimeTypes?navigator.mimeTypes.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30002,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BDLoggingConstants","BDOperationLogHelper","BooleanSignalValueType","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="BDTouchOrMouseSignalCollectorBase",s=(function(t){function n(e,n,r){var o;return o=t.call(this,e)||this,o.eventsToSubscribe=[],o.pauseTimeout=36e5,o.eventsToSubscribe=n,o.pauseTimeout=r,o.handler=function(e){return o.collectSignals(e)},o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.listenForSignals=function(){this.collectSignals(),this.addListeners()},a.addListeners=function(){var t=this;this.eventsToSubscribe.forEach(function(n){try{document.addEventListener(n,t.handler)}catch(t){var a=r("getErrorSafe")(t);o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:a.message})}})},a.pauseListeners=function(){var e=this;this.eventsToSubscribe.forEach(function(t){document.removeEventListener(t,e.handler)}),window.setTimeout(function(){return e.addListeners()},this.pauseTimeout)},a.collectSignals=function(t){var e=t!=null;e&&this.pauseListeners();var n=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e),a={signalId:this.signalType,data:{valueOrError:n}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))},n})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);l.default=s}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["mousedown","mousemove"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30106,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.appVersion,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30013,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=navigator.hardwareConcurrency)!=null?e:0);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30018,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30093,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeAsyncSignalCollection=async function(){var e;try{if(navigator.permissions){var t=await navigator.permissions.query({name:"notifications"});e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),t.state)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.permissions not supported"))}catch(t){e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"notifications cannot be queried from navigator.permissions"))}return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30008,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30015,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=10,s=(function(t){function n(){return t.call(this,c.signalType)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.executeSignalCollection=function(){var t=null;try{for(var n=navigator.plugins?navigator.plugins.length:0,a=new Set,i=0;i<n;i++){var l=navigator.plugins[i].filename;if(l){var s=l.indexOf(".");if(!(s==-1||s==l.length-1)&&(a.add(l.substr(s+1)),a.size>=e))break}}a.size&&(t=new(r("StringArrayObject"))(Array.from(a)))}catch(e){t=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.plugins is not defined"))}return{valueOrError:t}},n})(r("BDSignalCollectorBase")),u=null,c={signalType:30019,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30094,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.vendor,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30012,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;return window.Notification?e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"Notification not supported")),{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30007,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.plugins?navigator.plugins.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=new Date().getTimezoneOffset())!=null?e:999);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30040,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["touchstart","touchcancel"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30107,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=!!navigator.webdriver,t=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:3e4,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWebglSupportSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}var n=!!t,o=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),n);return{valueOrError:o}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30022,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30095,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("DimensionObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.width=null,this.height=null,this.width=e,this.height=t}var t=e.prototype;return t.toJSON=function(){return{w:this.width,h:this.height}},t.isEqual=function(n){return n instanceof e?this.width===n.width&&this.height===n.height:!1},e})();i.default=e}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=window.innerHeight,t=window.innerWidth,n=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("DimensionObject"))(t,e));return{valueOrError:n}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30005,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWebglSupportSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(t,n,r,o,a,i,l){"use strict";var e={get:function(t){switch(t){case 3e4:return r("BDWebdriverSignalCollector").get();case 30001:return r("BDPluginCountSignalCollector").get();case 30002:return r("BDMimeTypeCountSignalCollector").get();case 30003:return r("BDLanguagesSignalCollector").get();case 30004:return r("BDConnectionRTTSignalCollector").get();case 30005:return r("BDWindowOuterDimensionSignalCollector").get();case 30007:return r("BDNotificationPermissionSignalCollector").get();case 30008:return r("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return r("BDNavigatorVendorSignalCollector").get();case 30013:return r("BDNavigatorAppVersionSignalCollector").get();case 30015:return r("BDNavigatorPlatformSignalCollector").get();case 30018:return r("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return r("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30022:return r("BDWebglSupportSignalCollector").get();case 30040:return r("BDTimezoneOffsetSignalCollector").get();case 30093:return r("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return r("BDNavigatorUserAgentSignalCollector").get();case 30095:return r("BDWindowHistoryLengthSignalCollector").get();case 30100:return r("BDKeyDownUpSignalCollector").get();case 30106:return r("BDMousePresenceSignalCollector").get();case 30107:return r("BDTouchPresenceSignalCollector").get();case 38e3:return r("BDHeartbeatSignalCollector").get();case 38001:return r("BDHeartbeatV2SignalCollector").get()}}},s=e;l.default=s}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.id="",n.id=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toJSON=function(){return{f:this.isAppForeground,id:this.id}},t})(r("HeartbeatObject"));l.default=e}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatV2Object"))(r("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(t,n,r,o,a,i,l){"use strict";var e="BDClientConfig",s=(function(){function t(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map,this.heartbeatSignal=new(r("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var n=t.prototype;return n.setStaticSignalBufferSize=function(n){return n>0?this.staticSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"s"}),this},n.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize},n.setDynamicSignalBufferSize=function(n){return n>1?this.dynamicSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"d"}),this},n.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize},n.setBiometricSignalBufferSize=function(n){return n>1?this.biometricSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"b"}),this},n.setSID=function(t){return this.sid=t,this},n.setHeartbeatVersion=function(t){return this.hbVersion=t,this},n.getHeartbeatVersion=function(){return this.hbVersion},n.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize},n.setConfigGenerationTimeStamp=function(t){return this.signalConfigGenerationTimeStampMs=t,this},n.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs},n.setHeartbeatIntervalMinutes=function(t){return this.heartbeatIntervalMs=t*60*1e3,this},n.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs},n.setSuspiciousTiersFlushDurationMinutes=function(n){return n>0?this.suspiciousTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fds"}),this},n.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs},n.setAllTiersFlushDurationMinutes=function(n){return n>0?this.allTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fda"}),this},n.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs},n.addMultipleSignalsToClientConfig=function(t){var e=this;return t.forEach(function(t){return e.addSignalToClientConfig(t)}),this},n.addSignalToClientConfig=function(t){var e=t.getSignalFlags(),n=t.getSignalId();if(n===38e3)return this;var o=new(r("BDSignalWrapper"))(e,n);return n===38001?(this.heartbeatSignal=o,this):(e.includes(2)?e.includes(4)?this.biometricSignals.push(o):this.dynamicSignals.push(o):this.staticSignals.push(o),t.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[t.getSignalId()]=t.getBufferSize()),this)},n.setPeriodicCollectionIntervalSeconds=function(n){return n>0?this.periodicCollectionIntervalMs=n*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"pi"}),this},n.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs},n.getDynamicSignals=function(){return this.dynamicSignals},n.getStaticSignals=function(){return this.staticSignals},n.getBiometricSignals=function(){return this.biometricSignals},n.getBiometricSignalsMap=function(){return this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(e,t){return e.set(t.signalType,t)},new Map)),this.biometricSignalsMap},n.getHeartbeatSignal=function(){return this.heartbeatSignal},n.getBufferSizeBySignalId=function(t){return this.bufferSizeBySignalIdMap[t]},n.setParsingDone=function(t){this.parsingDone=t},n.isParsingDone=function(){return this.parsingDone},t})(),u=null,c={get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDCollectionTypeEnum",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});i.default=e}),66);
__d("BotDetection_SignalFlags",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});i.default=e}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerSignalConfig",s=(function(){function t(e,t,n){this.parsedSignalFlags=[],this.signalId=e,this.signalFlags=t,this.bufferSize=n}var n=t.prototype;return n.getSignalId=function(){return this.signalId},n.getSignalFlags=function(){var t=this;if(this.parsedSignalFlags.length===0){var n=Object.keys(r("BotDetection_SignalFlags"));n.forEach(function(e){(r("BotDetection_SignalFlags")[e]&t.signalFlags)===r("BotDetection_SignalFlags")[e]&&t.parsedSignalFlags.push(r("BotDetection_SignalFlags")[e])})}return this.parsedSignalFlags.length===0&&o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()}),this.parsedSignalFlags},n.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0},t})();l.default=s}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerConfig";function s(t){var n=[];try{var a=JSON.parse(t.sc),i=new Map(a.c);if(i.forEach(function(e,t){return n.push(new(r("BDServerSignalConfig"))(t,e))}),i.size===0){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}var l=r("BDClientConfig").get();l.setPeriodicCollectionIntervalSeconds(t.i).addMultipleSignalsToClientConfig(n).setConfigGenerationTimeStamp(a.t).setAllTiersFlushDurationMinutes(t.fda).setSuspiciousTiersFlushDurationMinutes(t.fds).setHeartbeatIntervalMinutes(t.hbi).setStaticSignalBufferSize(t.sbs).setDynamicSignalBufferSize(t.dbs).setBiometricSignalBufferSize(t.bbs).setSID(t.sid).setHeartbeatVersion(t.hbv).setParsingDone(!0)}catch(t){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:t})}}l.parseConfig=s}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(t,n,r,o,a,i,l){"use strict";var e="BDSignalBuffer";function s(e,t,n){if(!(e in r("BDSignalBufferData"))){var o=1;t!==void 0&&(o=t),r("BDSignalBufferData")[e]={values:[],max_buffer_size:o,signal_flags:n!=null?n:[]}}}function u(e){if(e in r("BDSignalBufferData"))r("BDSignalBufferData")[e].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function c(t,n){if(t in r("BDSignalBufferData")){var a=r("BDSignalBufferData")[t],i=a.max_buffer_size;a.values.length>=i&&a.values.shift(),a.values.push(n),o("BDOperationLogHelper").logInfo(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:t.toString()})}else throw o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:t.toString()}),new Error("Tried to append signal that was not intialized:")}function d(){var e=r("BDClientConfig").get(),t=e.getBiometricSignals();t.forEach(function(e){e.signalType in r("BDSignalBufferData")&&u(e.signalType)})}function m(e){var t,n=r("BDSignalBufferData")[e],o=n==null||(t=n.values)==null?void 0:t.length;return o!=null&&o>0?n.values[o-1]:{valueOrError:void 0}}function p(e){return r("BDSignalBufferData")[e].values}function _(e){var t={};for(var n of e)n in r("BDSignalBufferData")&&(t[n]=p(n).map(function(e){return e.valueOrError}));return t}function f(e){var t=g(e);return JSON.stringify(_(t))}function g(e){var t=r("BDClientConfig").get(),n=[];return e.forEach(function(e){switch(e){case r("BDCollectionTypeEnum").STATIC:n=[].concat(n,t.getStaticSignals());break;case r("BDCollectionTypeEnum").DYNAMIC:n=[].concat(n,t.getDynamicSignals());break;case r("BDCollectionTypeEnum").BIOMETRIC:n=[].concat(n,t.getBiometricSignals());break}}),n.map(function(e){return e.signalType})}l.initialize=s,l.clearBuffer=u,l.appendSignal=c,l.clearBiometricSignals=d,l.getLastSignalFormatBySignalId=m,l.retrieveSignal=p,l.retrieveSignals=_,l.getSignalsAsJSONString=f,l._getSignalIdsByCollectionType=g}),98);
__d("BDUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}i.uuid=e}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743095"),s=o("FalcoLoggerInternal").create("bd_pdc_signals",e),u=s;l.default=u}),98);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer"],(function(t,n,r,o,a,i,l){"use strict";var e="SignalCollectionManager",s=(function(){function t(){var e=this;this.$1=!1,this.$6=function(t){if(t instanceof CustomEvent&&t.detail!=null&&t.detail.data!=null){var n=r("BDClientConfig").get().getBiometricSignalsMap().get(t.detail.signalId);n!=null&&e.$4(t.detail.data,n)}}}var n=t.prototype;return n.collectSignals=async function(t){var e=this,n=[];t.forEach(function(t){t.signalFlags.includes(4)?e.$2(t):n.push(e.$3(t))}),await Promise.all(n)},n.isEqualToLastCollectedSignal=function(t,n){var e=o("BDSignalBuffer").getLastSignalFormatBySignalId(n.signalType);return e.valueOrError==null?!1:t.isEqual(e.valueOrError,new Set(n.signalFlags))},n.getCircularBufferSize=function(t){var e=r("BDClientConfig").get(),n=e.getBufferSizeBySignalId(t.signalType);return n!=null&&e.getBufferSizeBySignalId(t.signalType)>0?n:t.signalFlags.includes(2)?t.signalFlags.includes(4)?e.getBiometricSignalBufferSize():e.getDynamicSignalBufferSize():e.getStaticSignalBufferSize()},n.$3=async function(n){var t=n.getSignalCollector();if(t!=null)try{var r=await t.executeAsyncSignalCollection();this.$4(r,n)}catch(t){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:t})}},n.$2=function(t){this.$5();var e=t.getSignalCollector();e!=null&&e instanceof o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&e.listenForSignals()},n.$5=function(){this.$1||(window.addEventListener(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6),this.$1=!0)},n.$4=function(t,n){n.getBufferConfig()==null&&o("BDSignalBuffer").initialize(n.signalType,this.getCircularBufferSize(n),n.signalFlags),t.valueOrError&&!this.isEqualToLastCollectedSignal(t.valueOrError,n)&&o("BDSignalBuffer").appendSignal(n.signalType,t)},t})(),u=null,c={get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","SignalCollectionManager","WebStorage","getErrorSafe","javascript-blowfish"],(function(t,n,r,o,a,i,l){"use strict";var e,s="BDClientSignalCollectionTrigger",u="signal_flush_timestamp",c=!1,d=!1,m=!1,p=!1,_=0,f=0,g=0,h=30,y=5,C,b,v=o("BDUtils").uuid(),S=r("BDClientConfig").get(),R=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),L={startSignalCollection:async function(t){if(S.setSID(t.sid),!c){if(c=!0,o("BDServerConfig").parseConfig(t),!S.isParsingDone()){o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(t)}),c=!1;return}t!=null&&(f=t.hbcbc&&t.hbcbc>0?t.hbcbc:f,g=t.hbvbc&&t.hbvbc>0?t.hbvbc:g,h=t.hbbi&&t.hbbi>0?t.hbbi:h),L.startHeartbeatDelayed(),b=new Promise(function(e,t){try{S.getDynamicSignals().length>0&&(L.collectDynamicSignals(),o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),S.getBiometricSignals().length>0&&(L.collectBiometricSignals(),o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),e()}catch(e){t(e)}}),await b,await L.startSignalPosting()}c&&!m&&!p&&y>0&&(y-=1,o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),L.startHeartbeatDelayed())},retrieveSignals:async function(){await b,await L.postSignals([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC,r("BDCollectionTypeEnum").STATIC])},postSignals:async function(t){await L.collectStaticSignals(),L._postSignalsHelper(o("BDSignalBuffer").getSignalsAsJSONString(t),R.NONE)&&L.setTimestampInStorage(Date.now(),u)},_postSignalsHelper:function(t,n){if(t.length<=2)return!1;var e=S.getConfigGenerationTimeStamp(),a=L.encryptDataUsingAsid(v,t),i=function(){return{asid:v,ct:e,sjd:a,sid:S.sid}},l=!1;try{n===R.CRITICAL?r("BdPdcSignalsFalcoEvent").logCritical(i):n===R.VITAL?r("BdPdcSignalsFalcoEvent").logImmediately(i):r("BdPdcSignalsFalcoEvent").log(i),l=!0}catch(e){var u=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,{error:u.message}),l=!1}finally{return l}},getInitialVector:function(t){if(t.length!==16)return o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.INVALID_LENGTH),"";for(var e="",n=0;n<8;n++)e+=String.fromCharCode(t.charCodeAt(n)^t.charCodeAt(8+n));return e},encryptDataUsingAsid:function(t,n){if(t.length!==36)return o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.INVALID_GUID),n;var e=t.slice(19,23)+t.slice(24,36),a=L.getInitialVector(e),i=new(r("javascript-blowfish"))(e,"cbc");return i.base64Encode(i.encrypt(n,a))},startSignalPosting:async function(){var e=L.getTimestampInStorage(u),t=Date.now()-e;t>=S.getAllTiersFlushDurationMs()?await L.postSignalsIntermittently():window.setTimeout(function(){L.postSignalsIntermittently()},S.getAllTiersFlushDurationMs()-t)},postSignalsIntermittently:function(){L.postSignals([r("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){L.postSignals([r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC])},S.getAllTiersFlushDurationMs())},setTimestampInStorage:function(n,a){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t){o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}var i=e.setItemGuarded(t,a,n.toString());i!=null&&o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:i.message})},getTimestampInStorage:function(n){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t)return o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR),0;var a=t.getItem(n);if(a==null)return 0;var i=Number.parseInt(a,10);return Number.isFinite(i)?i:0},resetHeartbeatStartedForTest:function(){m=!1,p=!1},startHeartbeatDelayed:function(){if(!(m||p)){var e=L.getTimestampInStorage(L.HEARTBEAT_TIMESTAMP_STORAGE_KEY),t=Date.now()-e;try{t>=S.getHeartbeatIntervalMs()?L.startHeartbeat():(window.setTimeout(function(){return L.startHeartbeat()},S.getHeartbeatIntervalMs()-t),p=!0)}catch(e){var n=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:t.toString(),hbi:S.getHeartbeatIntervalMs().toString(),error:n.message})}}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!m&&S.getHeartbeatIntervalMs()>0&&(L.collectHeartbeatTimes(f,g),_!==0&&(window.clearInterval(_),o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),_=window.setInterval(function(){return L.collectHeartbeatTimes(f,g)},S.getHeartbeatIntervalMs()),m=!0)},collectHeartbeatTimes:function(t,n){t<=0&&n<=0||(t>0&&L.collectHeartbeat(R.CRITICAL),n>0&&L.collectHeartbeat(R.VITAL),(t>1||n>1)&&window.setTimeout(function(){return L.collectHeartbeatTimes(t-1,n-1)},h*1e3))},collectHeartbeat:function(t){var e,n=S==null||(e=S.getHeartbeatSignal())==null||(e=e.getSignalCollector())==null?void 0:e.executeSignalCollection();if(n==null){o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:t.toString()});return}else o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:t.toString()});L.postHeartbeat(t,n)&&L.setTimestampInStorage(Date.now(),L.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(t,n){var e={};e[38001]=[n==null?void 0:n.valueOrError];var r=JSON.stringify(e);return L._postSignalsHelper(r,t)},collectStaticSignals:async function(){await L.collectSignalsOneTime(S.getStaticSignals())},collectDynamicSignals:function(){L.stopDynamicSignalCollection(),C=window.setInterval(async function(){await L.collectSignalsOneTime(S.getDynamicSignals())},S.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){L.collectSignalsOneTime(S.getBiometricSignals())},stopDynamicSignalCollection:function(){C!=null&&(window.clearInterval(C),C=null)},collectSignalsOneTime:async function(t){await r("SignalCollectionManager").get().collectSignals(t)},startLoginTimeSignalCollection:async function(t){d||(d=!0,o("BDServerConfig").parseConfig(t),await L.collectSignalsOneTime(S.getDynamicSignals()),await L.collectSignalsOneTime(S.getBiometricSignals()),await L.collectSignalsOneTime(S.getStaticSignals()))},getSignalsAsJSONString:function(){return o("BDSignalBuffer").getSignalsAsJSONString([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").BIOMETRIC])}},E=L;l.default=E}),98);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("BDClientSignalCollectionTrigger").startSignalCollection(r("BDSignalCollectionData"))}l.initSignalCollection=e}),98);
__d("Chromedome",["fbt"],(function(t,n,r,o,a,i,l,s){function e(){if(document.domain==null)return null;var e=document.domain,t=/^intern\./.test(e);if(t)return null;var n=/(^|\.)facebook\.(com|sg)$/.test(e);if(n)return"facebook";var r=/(^|\.)instagram\.com$/.test(e);if(r)return"instagram";var o=/(^|\.)threads\.(com|net)$/.test(e);if(o)return"threads";var a=/(^|\.)messenger\.com$/.test(e);return a?"messenger":null}function u(e){return e==="instagram"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable an Instagram feature or \"hack\" someone's account, it is a scam and will give them access to your Instagram account."):e==="threads"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Threads feature or \"hack\" someone's account, it is a scam and will give them access to your Threads account."):s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account.")}function c(t){if(top===window){var n=e();if(n!=null){var r=s._(/*BTDS*/"Stop!"),o=u(n),a=s._(/*BTDS*/"See {url} for more information.",[s._param("url","https://www.facebook.com/selfxss")]),i="font-family:helvetica; font-size:20px; ";[[r,i+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[o,i],[a,i],["",""]].map(function(e){window.setTimeout(console.log.bind(console,"\n%c"+e[0].toString(),e[1]))})}}}l.start=c}),226);
__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1764786"),s=o("FalcoLoggerInternal").create("client_consistency",e),u=s;l.default=u}),98);
__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")}),null);
__d("CometBrowserDimensionsLogger",["CometDebounce","Cookie","ExecutionEnvironment","SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions","isInIframe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=!1,c={height:0,width:0};function d(){return s===null&&(s=r("getViewportDimensions")()),s}function m(){var e=r("getViewportDimensions")(),t=e.height,n=e.width;(c.width!==n||c.height!==t)&&(c={height:t,width:n},r("Cookie").set("wd",n+"x"+t))}function p(){!(e||(e=r("ExecutionEnvironment"))).canUseDOM||r("isInIframe")()||u||(u=!0,m(),window.addEventListener("resize",r("CometDebounce")(m,{wait:250}),{passive:!0}),window.addEventListener("focus",m,{passive:!0}))}function _(e){var t,n=d();p();var o={client_hint_width:e==null?void 0:e.clientHintWidth,pixel_ratio:(t=window.devicePixelRatio)!=null?t:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:r("SiteData").pr,server_viewport_x:e==null?void 0:e.viewportWidth,server_viewport_y:e==null?void 0:e.viewportHeight,viewport_x:n.width,viewport_y:n.height};if(window.navigator&&window.navigator.hardwareConcurrency&&(o.cpu_cores_count=window.navigator.hardwareConcurrency),window.innerWidth>0&&window.outerWidth>0){var a=Math.round(window.outerWidth/window.innerWidth*100)/100;o.zoom_ratio=a}if(window.getComputedStyle&&document.documentElement!=null){var i=window.getComputedStyle(document.documentElement);i!=null&&(o.document_font_size=i.fontSize)}r("WebBrowserDimensionsTypedLoggerLite").log(o)}l.init=_}),98);
__d("CometChromeDome",["JSScheduler","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("Chromedome").__setRef("CometChromeDome");function u(){s.onReady(function(t){(e||(e=o("JSScheduler"))).scheduleLoggingPriCallback(function(){t.start({})})})}l.init=u}),98);
__d("CometFBUncaughtError.react",["fbt","CometContentArea.react","FDSNullState.react","NullStateGeneral","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"x6s0dn4 x78zum5 x1dr59a3 xl56j7k xixxii4 xh8yej3"},e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx("div",babelHelpers.extends({},t,{children:u.jsx(r("CometContentArea.react"),{verticalAlign:"middle",children:u.jsx(r("FDSNullState.react"),{headline:s._(/*BTDS*/"Sorry! Something went wrong :("),icon:r("NullStateGeneral")})})})),e[1]=n):n=e[1],n}l.default=c}),226);
__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("CometSVGIcon.react"),babelHelpers.extends({viewBox:"0 0 24 24"},e,{children:n})),t[1]=e,t[2]=a):a=t[2],a}l.default=u}),98);
__d("CometLogoutHandlerQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"logout_hash",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"has_confirmed_contactpoints",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[r],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometLogoutHandlerQuery",selections:[e,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"pending_contactpoints",plural:!0,selections:[{kind:"InlineFragment",selections:o,type:"PendingEmail",abstractKey:null},{kind:"InlineFragment",selections:o,type:"Phone",abstractKey:null}],storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometLogoutHandlerQuery",selections:[e,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"pending_contactpoints",plural:!0,selections:[r,{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:"29300489429598867",metadata:{},name:"CometLogoutHandlerQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("useLogoutWithPendingContactpointConfirmation",["fbt","react","react-compiler-runtime","useCometConfirmationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useCallback;function c(e,t){var n=o("react-compiler-runtime").c(4),a=r("useCometConfirmationDialog")(),i;n[0]!==e||n[1]!==t||n[2]!==a?(i=function(){a({body:e==="PhoneNumber"?s._(/*BTDS*/"Are you sure you want to log out of Facebook before you confirm your mobile number? Confirming the mobile number on your account ensures you will be able to log in again."):s._(/*BTDS*/"Are you sure you want to log out of Facebook before you confirm your email? Confirming the email on your account ensures you will be able to log in again."),cancel:s._(/*BTDS*/"Confirm account"),confirm:s._(/*BTDS*/"Log out"),title:s._(/*BTDS*/"Log out of Facebook?")},t)},n[0]=e,n[1]=t,n[2]=a,n[3]=i):i=n[3];var l=i;return e==="PendingEmail"||e==="PhoneNumber"?l:null}l.default=c}),226);
__d("CometLogoutHandler.react",["Banzai","CometComposerDraftingUtils","CometLogoutHandlerQuery.graphql","CometRelay","CometVisualCompletionAttributes","FBLogger","ServiceWorkerLoginAndLogout","WebStorageMonster","XLogoutControllerRouteBuilder","react","react-compiler-runtime","useLogoutWithPendingContactpointConfirmation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useImperativeHandle,_=c.useRef;function f(t){var a,i,l=o("react-compiler-runtime").c(17),s=t.ref,c=t.shouldInitiateLogout,d=_(!1),f=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("CometLogoutHandlerQuery.graphql"),{}),h=f.logout_whitelist,y=f.viewer,C=_(),b;l[0]!==h?(b=function(){if(!d.current){d.current=!0;var e=C.current;if(e==null){r("FBLogger")("web_navigation_and_bookmarks").mustfix("Unable to get logout form ref to submit");return}r("WebStorageMonster").cleanOnLogout(h,"CometLogoutHandler"),r("ServiceWorkerLoginAndLogout").logout(),o("CometComposerDraftingUtils").clearAllDraftsFromIndexedDB().catch(g),r("Banzai").flush(),e.submit()}},l[0]=h,l[1]=b):b=l[1];var v=b,S=r("useLogoutWithPendingContactpointConfirmation")((y==null||(a=y.actor)==null?void 0:a.has_confirmed_contactpoints)!==!0?y==null||(i=y.actor)==null||(i=i.pending_contactpoints)==null||(i=i[0])==null?void 0:i.__typename:null,v),R;l[2]!==v||l[3]!==S?(R=function(){S?S():v()},l[2]=v,l[3]=S,l[4]=R):R=l[4];var L=R,E;l[5]!==L?(E=function(){return{logout:L}},l[5]=L,l[6]=E):E=l[6],p(s,E);var k,I;l[7]!==L||l[8]!==c?(k=function(){C.current==null?r("FBLogger")("web_navigation_and_bookmarks").mustfix("Expected logout form ref to be valid"):c===!0&&L()},I=[L,c],l[7]=L,l[8]=c,l[9]=k,l[10]=I):(k=l[9],I=l[10]),m(k,I);var T;l[11]===Symbol.for("react.memo_cache_sentinel")?(T=r("XLogoutControllerRouteBuilder").buildURL({button_location:"settings",button_name:"logout"}),l[11]=T):T=l[11];var D=T,x=y==null?void 0:y.logout_hash,$;l[12]!==x?($=u.jsx("input",{name:"h",type:"hidden",value:x}),l[12]=x,l[13]=$):$=l[13];var P;l[14]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx("input",{name:"ref",type:"hidden",value:"mb"}),l[14]=P):P=l[14];var N;return l[15]!==$?(N=u.jsxs("form",babelHelpers.extends({action:D,method:"POST",ref:C},r("CometVisualCompletionAttributes").IGNORE,{children:[$,P]})),l[15]=$,l[16]=N):N=l[16],N}function g(e){return r("FBLogger")("comet_composer").mustfix("Error clearing drafts on logout: "+e.message)}l.default=f}),98);
__d("CometNetworkStatusToast",["fbt","BaseToasterStateManager","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","FDSIcon.react","FDSWirelessFilled24Icon","NetworkStatus","SVGIcon","cometPushToast","gkx","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=null,d=null,m=r("gkx")("22885");function p(e){var t=e.online,n=r("BaseToasterStateManager").getInstance();c!=null&&(n.expire(c),c=null),t&&!m&&(c=o("cometPushToast").cometPushToast({icon:u.jsx(r("FDSIcon.react"),{color:"positive",icon:r("FDSWirelessFilled24Icon"),size:24}),message:s._(/*BTDS*/"Your internet connection was restored.")},4e3,n)),t||(c=o("cometPushToast").cometPushToast({action:m?void 0:{label:s._(/*BTDS*/"Refresh"),onPress:function(){o("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(e,t,n){n.invalidateStore()})}},icon:u.jsx(r("FDSIcon.react"),{color:"disabled",icon:o("SVGIcon").legacySVGIcon(r("CometIconWirelessSlashFilled.react")),size:24}),message:s._(/*BTDS*/"You are currently offline.")},1/0,n))}function _(){d=r("NetworkStatus").onChange(p)}function f(){var e;(e=d)==null||e.remove(),d=null}l.subscribe=_,l.unsubscribe=f}),226);
__d("CometPixelRatioUpdater",["Cookie","Run","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e="dpr";function s(t){r("Cookie").set(e,String(t))}function u(){window.devicePixelRatio!==o("WebPixelRatio").get()&&s(window.devicePixelRatio)}function c(){u(),o("Run").onBeforeUnload(u,!1),"onpagehide"in window&&window.addEventListener("pageHide",u)}l.startDetecting=c}),98);
__d("CometVirtualCursorStatus",["UserAgent","cr:1345969","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=null;function u(){s||(s=window.addEventListener("blur",function(){e=null,c()}))}function c(){s&&(s.remove(),s=null)}function d(t){e=t.keyCode,u()}function m(t){e=null,c()}if(typeof window!="undefined"&&window.document&&window.document.createElement){var p=document.documentElement;if(p){if(p.addEventListener)p.addEventListener("keydown",d,!0),p.addEventListener("keyup",m,!0);else if(p.attachEvent){var _=p.attachEvent;_("onkeydown",d),_("onkeyup",m)}}}var f={getKeyDownCode:function(){return e},isKeyDown:function(){return!!e}},g=!1,h=!1,y=null,C=!1;function b(e){var t=new Set,n=f.isKeyDown(),o=e.WEBKIT_FORCE_AT_MOUSE_DOWN,a=e.clientX,i=e.clientY,l=e.isTrusted,s=e.mozInputSource,u=e.offsetX,c=e.offsetY,d=e.webkitForce;if(a===0&&i===0&&u>=0&&c>=0&&h&&l&&s==null&&t.add("Chrome"),g&&h&&!n&&d!=null&&d<o&&u===0&&c===0&&s==null&&t.add("Safari-edge"),a===0&&i===0&&u<0&&c<0&&h&&s==null&&t.add("Safari-old"),!g&&!h&&!n&&l&&r("UserAgent").isBrowser("IE >= 10")&&s==null){var m=e.target,p=m.clientHeight,_=m.clientWidth;a<0&&i<0?t.add("IE"):(u<0||u>_)&&(c<0||c>p)&&t.add("MSIE")}return s===0&&l&&t.add("Firefox"),t}function v(){g=!0,r("setTimeout")(function(){g=!1},0)}function S(){h=!0,r("setTimeout")(function(){h=!1},0)}function R(e){C&&n("cr:1345969").log({extra_data:{source_app:"comet"},indicated_browsers:y,is_virtual_cursor_action:e})}function L(e){y===null&&(y=Array.from(b(e))),C=y!=null&&y.length>0;var t=e.target!=null&&e.target.getAttribute!=null&&e.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";R(t),r("setTimeout")(function(){C=!1,y=null},0)}function E(){document.addEventListener("click",L,!0),document.addEventListener("mousedown",v,!0),document.addEventListener("mouseup",S,!0)}l.initLogging=E}),98);
__d("SimplePageLoadLogger",["ODS","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){(s||(s=o("ODS"))).bumpEntityKey(1678,"www_client_navigations",c())}function c(){if((e||(e=r("performance"))).navigation==null||(e||(e=r("performance"))).navigation.type==null)return"UNSUPPORTED";switch((e||(e=r("performance"))).navigation.type){case(e||(e=r("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(e||(e=r("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(e||(e=r("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(e||(e=r("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}l.logPageNavigationType=u}),98);
__d("setCometDeferredCookies",["DeferredCookie","ErrorGuard"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u=new Set;function c(e){s?e():u.add(e)}function d(t){Object.entries(t).forEach(function(e){var t=e[0],n=e[1],o=n.expiration_for_js,a=n.first_party_only,i=n.path,l=n.secure,s=n.value;r("DeferredCookie").addToQueue(t,s,o,i,a,!1,l)}),s=!0,u.forEach(function(t){return(e||(e=r("ErrorGuard"))).applyWithGuard(t,null,[])}),u.clear()}l.onCometDeferredCookieSet=c,l.setCometDeferredCookies=d}),98);
__d("CometRootDeferredShared",["CometBootloaderErrorLoggerUtil","CometBootloaderLoggerUtil","CometOfflineTracing","CometVirtualCursorStatus","ErrorGuard","JSScheduler","RunComet","SimplePageLoadLogger","WebStorageMonster","cr:1201738","cr:1332233","cr:1516609","cr:17080","cr:1813330","cr:22915","cr:2718","gkx","setCometDeferredCookies","vc-tracker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(t){var a=t.blLoggingCavalryFields,i=t.deferredCookies,l=t.networkStatusToast,u=l===void 0?n("cr:17080"):l;if((s||(s=r("ErrorGuard"))).applyWithGuard(function(){return o("CometBootloaderLoggerUtil").initLogging(a)},null,[]),s.applyWithGuard(function(){return o("CometBootloaderErrorLoggerUtil").initLogging(a)},null,[]),s.applyWithGuard(function(){return o("CometVirtualCursorStatus").initLogging()},null,[]),u!=null&&!r("gkx")("11394")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return u.subscribe()},null,[]),s.applyWithGuard(function(){return o("CometOfflineTracing").initialize()},null,[]),s.applyWithGuard(function(){return o("SimplePageLoadLogger").logPageNavigationType()},null,[]),(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(function(){r("WebStorageMonster").schedule()}),n("cr:1201738")&&r("vc-tracker").VisualCompletionTraceObserver.subscribe(function(e){e.interactionType==="INITIAL_LOAD"&&n("cr:1201738").init("comet.idle")}),o("setCometDeferredCookies").setCometDeferredCookies(i),n("cr:1332233")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1332233")()},null,[]),n("cr:1516609")!=null&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1516609").initSignalCollection()},null,[]),n("cr:1813330")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1813330").init()},null,[]),n("cr:2718")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:2718").init()},null,[]),n("cr:22915"))var c=o("RunComet").onAfterLoad(function(){(s||(s=r("ErrorGuard"))).applyWithGuard(function(){n("cr:22915")==null||n("cr:22915").startRSTFromMainThread(),c.remove()},null,[])})}l.initDeferred=c}),98);
__d("CometToasterView_DO_NOT_USE.react",["BaseContextualLayerAnchorRoot.react","BasePortal.react","BaseToastAnimationInternal.react","CometVisualCompletionAttributes","XPlatReactToasterView.react","gkx","react","react-compiler-runtime","useToasterStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m={root:{display:"x78zum5",insetInlineEnd:"xtijo5x",insetInlineStart:"x17syakg",left:null,right:null,pointerEvents:"x47corl",position:"xixxii4",width:"xh8yej3",zIndex:"xoegz02",$$css:!0},rootBlue:{zIndex:"x1jvg36b",$$css:!0},rootWorkplaceLegacy:{zIndex:"xdwmgzo",$$css:!0},toast:{paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",pointerEvents:"x71s49j","@media (max-width: 899px)_maxWidth":"xx1nl2z",$$css:!0}},p={bottom:{bottom:"x1ey2m1c",$$css:!0},top:{top:"x13vifvy",$$css:!0}},_={center:{justifyContent:"xl56j7k",$$css:!0},end:{justifyContent:"x13a6bvl",$$css:!0},start:{justifyContent:"x1nhvcw1",$$css:!0}},f={full:{maxWidth:"x193iq5w",$$css:!0},regular:{maxWidth:"x1xi1syu",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(24),n=e.align,a=e.filterToasts,i=e.maxVisible,l=e.maxWidth,u=e.position,g=e.xstyle,h=n===void 0?"start":n,y=i===void 0?1:i,C=l===void 0?"full":l,b=u===void 0?"bottom":u,v=r("useToasterStateManager")(),S;t[0]!==v?(S=function(){return v.getEmptyState()},t[0]=v,t[1]=S):S=t[1];var R=d(S),L=R[0],E=R[1],k,I;t[2]!==v?(k=function(){var e=v.registerView(E,0);return e.remove},I=[v],t[2]=v,t[3]=k,t[4]=I):(k=t[3],I=t[4]),c(k,I);var T=_[h],D=p[b],x;t[5]!==T||t[6]!==D||t[7]!==g?(x=[m.root,r("gkx")("20935")?null:r("gkx")("22885")?m.rootWorkplaceLegacy:m.rootBlue,T,D,g],t[5]=T,t[6]=D,t[7]=g,t[8]=x):x=t[8];var $;t[9]===Symbol.for("react.memo_cache_sentinel")?($={className:"x78zum5 xdt5ytf x3ct3a4 x193iq5w"},t[9]=$):$=t[9];var P;t[10]!==v?(P=function(t){v.expire(t)},t[10]=v,t[11]=P):P=t[11];var N;t[12]!==C||t[13]!==b?(N=function(t,n,o,a){return s.jsx(r("BaseToastAnimationInternal.react"),{expired:o,id:n,position:a,toasterPosition:b,xstyle:[m.toast,f[r("gkx")("22886")?"regular":C]],children:s.jsx(r("BaseContextualLayerAnchorRoot.react"),{children:t})},a)},t[12]=C,t[13]=b,t[14]=N):N=t[14];var M;t[15]!==a||t[16]!==y||t[17]!==P||t[18]!==N||t[19]!==L?(M=s.jsx("ul",babelHelpers.extends({},$,{children:s.jsx(r("XPlatReactToasterView.react"),{filterToasts:a,maxVisible:y,onExpireToast:P,toasterState:L,children:N})})),t[15]=a,t[16]=y,t[17]=P,t[18]=N,t[19]=L,t[20]=M):M=t[20];var w;return t[21]!==x||t[22]!==M?(w=s.jsx(r("BasePortal.react"),babelHelpers.extends({target:document.body,xstyle:x},r("CometVisualCompletionAttributes").IGNORE,{children:M})),t[21]=x,t[22]=M,t[23]=w):w=t[23],w}l.default=g}),98);
__d("FacebookAppIDs",[],(function(t,n,r,o,a,i){var e=Object.freeze({ABRA_WEB:0x4d31ba8e7e89d,ACCOUNT_QUALITY:293651901511648,ADS_AMI_BRAZIL_ONBOARDING:616624215510791,ADS_AMI_ONBOARDING:0x9f8db845dc737,ADS_EVENTS_MANAGER:0x770a46dafb86b,ADS_INCUBATOR:306597163753304,ADS_PAYMENT:0x6ff4d5e1ac7e,ADS_POWER_EDITOR:0x6c6c24b58878,ADS_WHATSAPP_MARKETING_MESSAGE_APP:871411417255253,ADS_WHATSAPP_MARKETING_MESSAGE_TEST_APP:755928642753606,ARMADILLO_WEB_DEVSERVER_CLIENT:0x39f22521e351a,AT_WORK_FOR_ANDROID:0x52007e36d879c,AT_WORK_FOR_IOS:0xd4f831db9136,BIG_COMMERCE_CATALOG_SYNC:483365901841566,BIZWEB:514771569228061,BOOSTED_INSTAGRAM_MEDIA_MOBILE:871306629649317,BOOSTED_PAGE:0x4126068d9e82b,BUSINESS_ACCOUNTS:436761779744620,BUSINESS_MANAGER_WORKPLACE_LOGIN:0xad49b0b25f84,CHATPROXY_WEB:0xd116b60e0618,COMMERCE_MANAGER:515496645328243,DOLLY:0xc7269b363f3c,EVENTS:2344061033,FACEBOOK_FOR_ANDROID:74769995908,FACEBOOK_FOR_ANDROID2:350685531728,FACEBOOK_FOR_EMERGING_MARKET_ANDROID:0xfa57ba2cd207,FACEBOOK_FOR_IPAD:0x9e1d0efc8522,FACEBOOK_FOR_IPHONE:6628568379,FACEBOOK_MEDIA_EFFECTS:0x652443a0f98c5,FACEBOOK_MESSENGER_FOR_ANDROID:0xe8d530ffbaef,FACEBOOK_SPACES_2:0x74ed7b6f24452,FBPAGES:2530096808,GAMES_INSTANT_SOAP_MITIGATION:0x479866448f2fe,HORIZON_WEB:351299233827255,INSTAGRAM:0x70ccb8b19e36,INSTAGRAM_BARCELONA_ANDROID:0xc262242628b7d,INSTAGRAM_BARCELONA_DESKTOP_WEB:0xd8b241bd3597,INSTAGRAM_BARCELONA_IOS:0x57e5b8a320745,INSTAGRAM_BARCELONA_MOBILE_WEB:0x5046b60d6e3e0,INSTAGRAM_CARBON:905593853150754,INSTAGRAM_FOR_ANDROID_ANALYTICS_ONLY:567067343352427,INSTAGRAM_WEB:0x453bf7349370c,INSTAGRAM_WEB_DESKTOP:936619743392459,INSTAGRAM_WEB_OCULUS_PWA:0x3ae327b82f808,INSTAGRAM_WEB_PWA_FOR_WINSTORE:487152425211411,INTERN_ADS_PREVIEW_GENERATION_APP:0x71ed0026bfc4d,KADABRA_VOICE:949958857019662,LIFT_STUDY_CREATION:367378623468359,LIFT_STUDY_VIEW:0x555782cd54234,M_SITE:412378670482,M_TOUCH_SITE:333176286769482,MAGENTO_CATALOG_SYNC:0xb1a27526b722,MARKETPLACE:0x5b56ce1cca15b,MARKETPLACE_SOAP_MITIGATION:359197717007187,MEDIA_MANAGER:0x7222ff5caba9d,MESSENGER_DESKTOP:0xb1b197d121cc,MESSENGER_DESKTOP_ARCHON_MACOS:451384735309667,MESSENGER_DESKTOP_ARCHON_WINDOWS:0x6dc8d8c927bd6,MESSENGERDOTCOM:772021112871879,MOBILE_ADS_MANAGER_FOR_ANDROID:438142079694454,MOBILE_ADS_MANAGER_FOR_IOS:0x541ccf22bd856,MOST_RECENT_FEED:608920319153834,MQTT_WEB:0xc815778a650a,OCULUS_ANDROID_TWILIGHT:624536201004543,OCULUS_IOS_TWILIGHT:0x8668046de342,OCULUS_IOS_TWILIGHT_DEV:0x5cf6459f9af74,OCULUS_IOS_TWILIGHT_IN_HOUSE:0x57bdfcd178eda,OCULUS_IOS_TWILIGHT_LOCAL:0x5f8be51836b2a,OCULUS_MSITE:0x399e2d8359725,OCULUS_WEBSITE:0x9d143786e51a6,PAGE_INBOX:0xf0047b325274,PHOTOS:2305272732,POSTS:0x3b3ea6ccca1e8,SAVED_FOR_LATER:586254444758776,SFCC_CATALOG_SYNC:414303402113306,SHOPIFY_API_INTEGRATION_2P:699341854433150,SHOPIFY_CONFIGURATION:0xad2be55025f82,SHOPIFY_PARTNER_INTEGRATION:372033192897621,TRANSLATIONS:4329892722,TURDUCKEN:400954310366822,UNIFIED_AMI_ONBOARDING:685960845183976,WHATSAPP_ANDROID:994766073959253,WHATSAPP_BUSINESS_ACCOUNT_MANAGER:0xcccd29987550,WHATSAPP_IPHONE:306069495113,WHATSAPP_KAIOS:412254059643627,WHATSAPP_MAC:346387865799334,WHATSAPP_SMB_ANDROID:473039703209605,WHATSAPP_SMB_IPHONE:450645302121512,WHATSAPP_SMB_WEB:656096963291760,WHATSAPP_VR:0x781bc9ae30ee,WHATSAPP_WEB:0x97e965c4439a,WHATSAPP_WINDOWS:0x6dd986e64fbb,WHATSAPP_WINDOWS_PHONE:0x6c3eee54771a9,WIT:0xb40d34a14679,WORKPLACE_BILLING:0x4cc2de2d9d4b4,WORKPLACE_DESKTOP:0xf3be6c242e39,WORKPLACE_FOR_EVERY_PHONE:0x47d5fb1e8a56c,WORKPLACE_FOR_WEB:0x5a31088e0c758,WORKROOMS:305152727005396,WORKROOMS_WEB:424940172743869,WWW:256281040558,WWW_COMET:0x7e36f3fcc43bc});i.default=e}),66);
__d("LogBrowserCrashReportsLowerRetentionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("856"),s=o("FalcoLoggerInternal").create("log_browser_crash_reports_lower_retention",e),u=s;l.default=u}),98);
__d("QPLCrashResiliencePlugin",["FBLogger","QPLEvent","QPLMarkerMap","QuickPerformanceLogger","RSTLogForCrash","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){if(r("gkx")("11050")!==!1){var e=new m().getListener();(s||(s=r("QuickPerformanceLogger"))).addListener(e)}}var c=100,d=10,m=(function(){function t(){var e=this;this.$2=!1,this.$1=new(r("QPLMarkerMap"))({totalLimit:c,perMarkerLimit:d}),o("RSTLogForCrash").logForCrashReadyPromise.getPromise().then(function(){e.$2=!0,e.$3()}).catch(function(){})}var n=t.prototype;return n.$3=function(){var e=this;(s||(s=r("QuickPerformanceLogger"))).activeMarkers.forEach(function(t,n){t.forEach(function(t,r){t.isCrashResilient&&e.$1.set(n,r,1)})}),this.$4()},n.$4=function(){if(this.$2){var e=this.$1.toString();o("RSTLogForCrash").isValidStringValue(e)||(e="{}",r("FBLogger")("qpl-crash-resilience-js").warn("Exceeded RST log limit")),o("RSTLogForCrash").logForCrash("active_qpls",e,o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_WRITE,{immediateFlush:!0})}},n.getListener=function(){var e=this,t=this;return{onMarkerStarted:function(n,r,o,a){t.onMarkerStarted(n,r,o,a)},onMarkerEnd:function(n,r,o,a,i){return e.onMarkerEnd(n,r,o,a,i)},onMarkerDrop:function(n,r,o,a){t.onMarkerDrop(n,r,o,a)}}},n.onMarkerStarted=function(n,r,a,i){var t,l=(t=i.isCrashResilient)!=null?t:!1;l&&(this.$1.set((e||(e=o("QPLEvent"))).getMarkerId(n),r,1),this.$4())},n.onMarkerEnd=function(n,r,a,i,l){var t,s=(t=l.isCrashResilient)!=null?t:!1;!l.passesSampling||!s||(this.$1.delete((e||(e=o("QPLEvent"))).getMarkerId(r),a),this.$4())},n.onMarkerDrop=function(n,r,a,i){var t,l=(t=i.isCrashResilient)!=null?t:!1;!i.passesSampling||!l||(this.$1.delete((e||(e=o("QPLEvent"))).getMarkerId(n),r),this.$4())},t})();l.startQPLCrashResilience=u}),98);
__d("RSTAdsManagerUtilsMainThread",["requireWeak"],(function(t,n,r,o,a,i,l){"use strict";var e=null;r("requireWeak")("AdsAccountStore",function(t){e=t});var s=null;r("requireWeak")("AdsPERouterHelper",function(e){s=e});function u(){try{var e,t,n,r,o,a=(e=(t=s)==null||(t=t.getRouter())==null?void 0:t.getQueryParams())!=null?e:{},i=a.selected_campaign_ids,l=a.selected_adset_ids,u=a.selected_ad_ids,c=(n=u==null?void 0:u.toArray())!=null?n:[],d=(r=l==null?void 0:l.toArray())!=null?r:[],m=(o=i==null?void 0:i.toArray())!=null?o:[];return{adIds:c.map(function(e){return String(e)}),adsetIds:d.map(function(e){return String(e)}),campaignIds:m.map(function(e){return String(e)})}}catch(e){return{adIds:[],adsetIds:[],campaignIds:[]}}}function c(){var t,n;return(t=(n=e)==null?void 0:n.getSelectedAccountID())!=null?t:"0"}function d(){var t,n;return(t=(n=e)==null?void 0:n.getSelectedBusinessID())!=null?t:"0"}function m(){return{}}l.getAdEntityIds=u,l.getAdAccountID=c,l.getBusinessID=d,l.getAdsAnnotations=m}),98);
__d("RSTExternalLoggingDataStoreMainThread",["FBLogger","RSTConfig","RSTLogForCrash","getErrorSafe","nextCrashLoggingSpanId"],(function(t,n,r,o,a,i,l){var e=500,s=5e3,u=500,c=(function(){function t(){this.$5=!1,this.$1=new Map,this.$2=new Map,this.$3=new Map,this.$4=new Map}var n=t.prototype;return n.isValidValue=function(t){return t==null||t.length<=s},n.$6=function(n,o,a){return n.length>e||!this.isValidValue(o)?(this.$5||r("FBLogger")("responsive-tracker").warn(a,n,o),this.$5=!0,!1):this.totalStoredPairCount()>u?(this.$5||r("FBLogger")("responsive-tracker").warn("Too many key-value pairs for external span logging data (ignored)"),this.$5=!0,!1):!0},n.logSpanEnd=function(t){this.$4.delete(t)},n.logSpanStart=function(t,n){if(n===void 0&&(n=null),!this.$6(t,n,"Invalid key or annotation for external logging data (ignored), key: %s, annotation: %s"))return-1;var e=this.$7(t,n),r=o("nextCrashLoggingSpanId").nextCrashLoggingSpanId();return this.$4.set(r,{id:r,name:t,start:Date.now(),annotation:e}),r},n.log=function(t,n,a){if(!this.$6(t,n,"Invalid key or value for external logging data (ignored), key: %s, value: %s"))return!1;var e=!1;if(a===o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_HEARTBEAT)e=this.$8(this.$2,t,n),this.$2.set(t,n);else if(a===o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_WRITE)e=this.$8(this.$1,t,n),this.$1.set(t,n);else if(a===o("RSTLogForCrash").RSTLogMode.VALID_FOR_5_SECONDS||a===o("RSTLogForCrash").RSTLogMode.VALID_FOR_2_MINUTES){var i;e=!0,this.$3.set(t,{value:n,createTime:Date.now(),expirationTime:(i=o("RSTLogForCrash").getExpirationTime(a))!=null?i:Date.now()})}else r("FBLogger")("responsive-tracker").warn("Invalid logMode");return e},n.$8=function(t,n,r){return!t.has(n)||t.get(n)!==r},n.totalStoredPairCount=function(){return this.$1.size+this.$2.size+this.$3.size+this.$4.size},n.get=function(t){if(this.$2.has(t))return this.$2.get(t)||null;if(this.$1.has(t))return this.$1.get(t)||null;var e=this.$3.get(t);if(e!=null){if(Date.now()<e.expirationTime)return e.value;this.$3.delete(t)}return null},n.clear=function(){this.$1.clear(),this.clearNextHeartbeatStore()},n.clearNextHeartbeatStore=function(){this.$2.clear()},n.clearSpanStore=function(){this.$4.clear()},n.getAllSpanData=function(){var e={};return this.$4.forEach(function(t,n){e[""+n]=t}),e},n.$9=function(){var e=Date.now();for(var t of this.$3){var n=t[0],r=t[1];e>=r.expirationTime&&this.$3.delete(n)}},n.getTimedStoreData=function(){return this.$9(),Object.fromEntries(Array.from(this.$3.entries()).map(function(e){var t=e[0],n=e[1];return[t,n.value]}))},n.getAll=function(){return babelHelpers.extends({},this.getTimedStoreData(),Object.fromEntries(this.$1),Object.fromEntries(this.$2))},n.$7=function(t,n){var e=r("RSTConfig").logSpanAnnotationsMapping.get(t);if(e!=null)try{return e(t,n)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to attach built-in annotations for key %s",t)}return n},t})(),d=new c;l.loggingDataStore=d}),98);
__d("RSTClearExternalLoggingDataStoreMainThread",["RSTEvents","RSTEventsMessageQueue","RSTExternalLoggingDataStoreMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.clearNextHeartbeatStore()}function s(){o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.HEART_BEAT,e),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND,e),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND,e)}l.registerClearExternalLoggingData=s}),98);
__d("RSTUtilsMainThread",["CurrentUser","FacebookAppIDs","RSTConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){if(e.has(t)){var n,r=(n=e.get(t))!=null?n:0;return r<=0?(e.delete(t),!1):(e.set(t,r-1),!0)}return e.set(t,Math.floor(Math.random()*10)),!0}var u=r("CurrentUser").getAppID();function c(e){switch(e){case""+r("FacebookAppIDs").ADS_POWER_EDITOR:return"Ads";case""+r("FacebookAppIDs").WWW_COMET:return"Comet";case""+r("FacebookAppIDs").ADS_EVENTS_MANAGER:return"Business";default:return"(Unset-in-RST)"}}var d=new Set([r("FacebookAppIDs").ADS_POWER_EDITOR,r("FacebookAppIDs").ADS_EVENTS_MANAGER,r("FacebookAppIDs").BIZWEB].map(function(e){return""+e})),m=u!=null&&d.has(u),p=c(u);function _(e){if(e==null)return null;for(var t of e)if(!r("RSTConfig").isReactComponentNameBlocked(t))return t;return null}function f(e,t,n){if(n===void 0&&(n=r("RSTConfig").DEFAULT_REACT_COMPONENT_CONTEXT_SIZE),e==null)return null;var o=new Set,a=[];for(var i of e){if(a.length>=n)break;!o.has(i)&&!t(i)&&(a.push(i),o.add(i))}return a}l.shouldSkipProcessingIncident=s,l.isMonetizationApp=m,l.appName=p,l.getAllowListedComponentName=_,l.getReactComponentContext=f}),98);
__d("RSTIncidentLoggingMainThread",["Env","InteractionTracingConfigDefault","QPLEvent","RSTConfig","RSTConstants","RSTEvents","RSTEventsMessageQueue","RSTUtils","RSTUtilsMainThread","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LogBrowserCrashReportsLowerRetentionFalcoEvent").__setRef("RSTIncidentLoggingMainThread"),c=new Set;function d(){return c}function m(e){var t,n,a,i,l,s,u,c,d,m,_=e.unresponsiveEvent,h=_!=null?Date.now()-(_==null?void 0:_.detectTime):0,y=_==null?void 0:_.lastHeartBeatMetadata,C=(y==null?void 0:y.brsid)!=null?String(y.brsid):null,b=(t=y==null?void 0:y.cpp)!=null?t:null,v=(n=y==null?void 0:y.ccrt)!=null?n:null,S=(a=y==null?void 0:y.cr)!=null?a:null,R=(i=y==null?void 0:y.annotations)!=null?i:{},L=(l=y==null?void 0:y.spans)!=null?l:{},E=e.isRecoverable?r("RSTConstants").reportReason.recoverable:(_==null?void 0:_.incidentType)!==r("RSTConstants").incidentType.unexpectedExit?r("RSTConstants").reportReason.unrecoverable:r("RSTConstants").reportReason.unexpectedExit,k=_==null?void 0:_.traces,I=g(k),T=I.qplMarkerId,D=I.tracePolicy,x=f(_==null?void 0:_.lastTrace);return{application_name:o("RSTUtilsMainThread").appName,reason:E,url:o("RSTUtils").sanitizeURL(y==null?void 0:y.url),age:String(h),brsid:C,qpl_event_marker_id:o("RSTUtils").intToString(T),trace_policy:D,last_qpl_event_marker_id:o("RSTUtils").intToString(x.qplMarkerId),last_trace_policy:x.tracePolicy,ad_account_id:(s=y==null?void 0:y.i2)!=null?s:"0",business_id:(u=y==null?void 0:y.i3)!=null?u:"0",canonical_route:v,client_push_phase:b,client_revision:S,freeze_time_in_ms:String((c=_==null?void 0:_.unrecoverLastsForMs)!=null?c:0),normalized_component_stack:(d=y==null?void 0:y.rcs)!=null?d:[],session_start_timestamp_in_ms:String((m=y==null?void 0:y.st)!=null?m:""),rst_annotations:p(R,L,_)}}function p(e,t,n){var o,a=[];for(var i of Object.keys(e))a.push(i+":"+e[i]);var l=n==null?void 0:n.detectTime;for(var u of Object.keys(t)){var c,d=t[u],m=l!=null?l-d.start:0;a.push("span:"+d.name+":"+((c=d.annotation)!=null?c:"")+":"+m)}return a.push("processingBrsid:"+((o=(s||(s=r("Env"))).brsid)!=null?o:"")),_(a,n),a}function _(e,t){if(!r("RSTConfig").shouldCollectAdditionalMetadata())return e;var n=t==null?void 0:t.lastTrace,o=n==null?void 0:n.endTimestamp,a=t==null?void 0:t.detectTime;o!=null&&a!=null&&e.push("msSinceLastInteractionEnds:"+(a-o));var i=t!=null?t:{},l=i.incidentID;return l!=null&&e.push("incidentID:"+l),(t==null?void 0:t.isFirstUnrecoverable)===!0&&e.push("isFirstUnrecoverable:true"),(t==null?void 0:t.hasOverlappingResponsiveIndicents)===!0&&e.push("hasOverlappingResponsiveIndicents:true"),(t==null?void 0:t.hasDecryptionError)===!0&&e.push("hasDecryptionError:true"),e}function f(t){if(t==null)return{qplMarkerId:null,tracePolicy:null};if(t.qplEvent==null)return{qplMarkerId:null,tracePolicy:null};var n=(e||(e=o("QPLEvent"))).getMarkerId(t.qplEvent),r=t.tracePolicy;return{qplMarkerId:n,tracePolicy:r}}function g(e){if(e==null)return{qplMarkerId:null,tracePolicy:null};var t=0,n=null;return e.forEach(function(e){(e==null?void 0:e.qplEvent)==null||e.tracePolicy===o("InteractionTracingConfigDefault").DEFAULT_TRACING_CONFIG.defaultTracePolicy||e.startTime>t&&(t=e.startTime,n=e)}),f(n)}function h(e,t){u.onReady(function(n){var r=n.log;r(function(){return m({unresponsiveEvent:e,isRecoverable:t})})})}function y(){r("RSTConfig").SHOULD_SAMPLE_RECOVERABLE&&o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,function(e){var t=e.unresponsiveEventRecord;t==null||c.has(t.incidentID)||(c.add(t.incidentID),o("RSTUtils").debugLogImportant("logging recoverable unresponsiveness event"),h(t,!0))}),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.CRASH_INCIDENT,function(e){var t=e.unresponsiveEventRecord;if(t==null||c.has(t.incidentID)){o("RSTUtils").debugLogImportant("not logging incident because it was already logged");return}if(r("RSTConfig").ONE_UNRECOVERABLE_INCIDENT_PER_SESSION&&t.isFirstUnrecoverable!==!0){var n,a=(n=t.incidentType)!=null?n:"";o("RSTUtils").debugLogImportant("not logging unrecoverable "+a+" event (because it's not the first incident in the session)");return}c.add(t.incidentID),o("RSTUtils").debugLogImportant("logging unrecoverable unresponsiveness event:"),h(t,!1)})}l.getLoggedIncidentIDs=d,l.registerIncidentLogging=y}),98);
__d("RSTLocalStorageMainThread",["FBLogger","WebStorage","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e,s="RSTData",u=200,c=2880*60*1e3,d=(function(){function t(){this.$2=!0,this.$1=(e||(e=r("WebStorage"))).getLocalStorage(),this.probeAndInit()}var n=t.prototype;return n.$3=function(t,n){var e=r("fb-error").getErrorSafe(t);r("FBLogger")("responsive-tracker").catching(e).warn("%s error in RSTLocalStorage",n)},n.$4=function(){if(!this.$2)return{};try{var e,t=(e=this.$1)==null?void 0:e.getItem(s),n=t!=null?JSON.parse(t):{};return typeof n=="object"&&n!==null?n:{}}catch(e){return this.$3(e,"readStore"),{}}},n.$5=function(t){if(this.$2)try{var e;(e=this.$1)==null||e.setItem(s,JSON.stringify(t))}catch(e){this.$3(e,"writeStore");return}},n.probeAndInit=function(){if(this.$1==null){this.$2=!1;return}var e=this.$1;try{var t=e.getItem(s);if(t!=null)return;e.setItem(s,"{}")}catch(e){this.$3(e,"probeAndInit"),this.$2=!1}},n.cleanUpExpiredEntries=function(){if(this.$2)try{var e=this.$6(this.$4());this.$5(e)}catch(e){this.$3(e,"cleanUpExpiredEntries");return}},n.$6=function(t){var e=Date.now();for(var n of Object.entries(t)){var r=n[0],o=n[1];(e-o.lastWriteTime>c||typeof o.lastWriteTime!="number")&&delete t[r]}return t},n.$7=function(t){var e=Object.entries(t);if(e.length<=u)return t;e.sort(function(e,t){return e[1].lastWriteTime-t[1].lastWriteTime});var n=e.slice(e.length-u);return Object.fromEntries(n)},n.set=function(t,n){if(this.$2){var e=this.$4();e=this.$6(e),e[t]={value:n,lastWriteTime:Date.now()},e=this.$7(e),this.$5(e)}},n.get=function(t){if(!this.$2)return null;var e=this.$4(),n=e[t];return n?n.value:null},n.delete=function(t){try{if(!this.$2)return;var e=this.$4();delete e[t],this.$5(e)}catch(e){this.$3(e,"delete");return}},n.has=function(t){if(!this.$2)return!1;var e=this.$4(),n=e[t];return n?Date.now()-n.lastWriteTime<=c:!1},n.clear=function(){this.$2&&this.$5({})},n.keys=function(){if(!this.$2)return[];var e=this.$6(this.$4());return Object.keys(e)},n.entries=function(){if(!this.$2)return[];var e=this.$6(this.$4());return Object.entries(e).map(function(e){var t=e[0],n=e[1];return[t,n.value]})},t})(),m=new d,p=m;l.default=p}),98);
__d("RSTMarkFirstUnrecoverableMainThread",["FBLogger","RSTLocalStorageMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="rst-first-unrecoverable-marking";async function s(t){var n=t.sessionID,o=t.incidentID,a=n+":first-unrecoverable";try{"locks"in navigator&&await navigator.locks.request(e,function(){r("RSTLocalStorageMainThread").has(a)||(r("RSTLocalStorageMainThread").set(a,o),t.isFirstUnrecoverable=!0)})}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to acquire lock for marking first unrecoverable incident")}}l.markFirstUnrecoverableIncident=s}),98);
__d("RSTSessionID",["Env","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(){if(s!=null)return s;var t=(e||(e=r("Env"))).brsid!=null?""+(e||(e=r("Env"))).brsid:r("uuidv4")(),n="rst-"+Date.now();return s=n+"-"+t,s}l.getSessionID=u}),98);
__d("ResponsiveTrackerMainThread",["ClientServiceWorkerMessage","FBLogger","RSTCloseObserver","RSTConfig","RSTConstants","RSTEvents","RSTEventsMessageQueue","RSTEventsRegisterUseCasesMainThread","RSTIncidentLoggingMainThread","RSTIndexedDBSafe","RSTLocalStorageMainThread","RSTMarkFirstUnrecoverableMainThread","RSTMetadataCollectorMainThread","RSTMetadataMainThread","RSTSessionID","RSTUtils","RSTUtilsMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";r("RSTEventsRegisterUseCasesMainThread")();var e=(function(){function e(){this.$1=null,this.$2=new Set,this.$3=!1,this.$4=!1}var t=e.prototype;return t.init=function(t){this.$1=t,this.startLoggingUnresponsiveEvents(),this.startSendingHeartBeatToWorker(),this.startMonitorPageHiding(),this.startMonitoringPageUnload(),o("RSTMetadataCollectorMainThread").start(),r("RSTLocalStorageMainThread").probeAndInit(),r("RSTIndexedDBSafe").maybeClearObsoleteIncidents()},t.startLoggingUnresponsiveEvents=function(){var e=this;this.logAndDeleteUnresponsiveEvents(),window.setInterval(function(){e.logAndDeleteUnresponsiveEvents()},r("RSTConfig").MAIN_THREAD_LOGGING_INTERVAL_MS)},t.startSendingHeartBeatToWorker=function(){var e=this;window.setInterval(function(){e.postEvent(o("RSTEvents").RSTEvent.HEART_BEAT)},r("RSTConfig").HEART_BEAT_INTERVAL_MS)},t.startMonitorPageHiding=function(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.postEvent(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND):e.postEvent(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND)})},t.startMonitoringPageUnload=function(){o("RSTCloseObserver").initPageCloseObserver()},t.postEvent=function(t,n){n===void 0&&(n=o("RSTMetadataMainThread").getMainThreadMetadata());var e={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:document.hidden},sessionID:o("RSTSessionID").getSessionID(),metadata:n};o("RSTEventsMessageQueue").notify(t,{mainToWorkerMessage:e}),this.$5(e),this.$6(e)},t.postEventLightweight=function(t,n){n===void 0&&(n=o("RSTMetadataMainThread").getMainThreadMetadataWithExternalAnnotationsOnly());var e={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:document.hidden},sessionID:o("RSTSessionID").getSessionID(),metadata:n};o("RSTEventsMessageQueue").notify(t,{mainToWorkerMessage:e}),this.$5(e),this.$6(e)},t.$6=function(t){try{var e;(e=this.$1)==null||e.postMessage(t)}catch(e){var n;if(this.$4)return;var o=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(o).warn((n=o.message)!=null?n:"Failed to post message to web worker"),this.$4=!0}},t.$5=function(t){if(r("RSTConfig").ENABLE_SERVICE_WORKER)try{new(r("ClientServiceWorkerMessage"))(r("RSTConfig").MESSAGE_TYPE,t).sendViaController()}catch(t){var e;if(this.$3)return;var n=r("getErrorSafe")(t);r("FBLogger")("responsive-tracker").catching(n).warn((e=n.message)!=null?e:"Failed to post message to service worker"),this.$3=!0}},t.$7=function(t){var e;return Date.now()-((e=t.remoteLoggerProposeTime)!=null?e:0)>r("RSTConfig").INCIDENT_PROPOSED_PROCESSOR_OWNERSHIP_EXPIRE_MS},t.$8=async function(t,n){if(t!=null){var e=t.incidentID;if(o("RSTIncidentLoggingMainThread").getLoggedIncidentIDs().has(e)){n.add(e);return}var a=t.sessionID===o("RSTSessionID").getSessionID();if(a){t.hasRecovered=!0,o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,{unresponsiveEventRecord:t}),n.add(e);return}var i=Date.now()-t.lastHeartBeatTimeStamp;if(!(i<r("RSTConfig").WAIT_MS_FOR_OTHER_SESSION_BEFORE_PROCESSING)){if(i>r("RSTConfig").OBSOLETE_PENDING_INCIDENT_THRESHOLD_MS){if(o("RSTUtilsMainThread").shouldSkipProcessingIncident(e))return;o("RSTUtils").debugLogImportant("pending incident "+e+" cleaned"),n.add(e);return}var l=t.remoteLoggerSessionID==null||this.$7(t);if(l){await r("RSTIndexedDBSafe").updateIncidentInDB(function(t){return t.incidentID!==e?!1:(o("RSTUtils").debugLogImportant("propose as logger for incident "+t.incidentID),t.remoteLoggerSessionID=o("RSTSessionID").getSessionID(),t.remoteLoggerProposeTime=Date.now(),!0)});return}if(t.remoteLoggerSessionID===o("RSTSessionID").getSessionID()&&!this.$7(t))if(o("RSTUtils").debugLogImportant("act as logger for incident "+e),t.hasRecovered)o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,{unresponsiveEventRecord:t}),n.add(e);else{if(t.incidentType!==r("RSTConstants").incidentType.unexpectedExit&&t.unrecoverLastsForMs<r("RSTConfig").UNRECOVER_LASTS_THRESHOLD_MS)return;!r("RSTConfig").ONE_UNRECOVERABLE_INCIDENT_PER_SESSION||!this.$2.has(t.sessionID)?(await o("RSTMarkFirstUnrecoverableMainThread").markFirstUnrecoverableIncident(t),o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.CRASH_INCIDENT,{unresponsiveEventRecord:t}),this.$2.add(t.sessionID)):o("RSTUtils").debugLogImportant("skip logging unrecoverable incident "+e+" "+("from session "+t.sessionID+" since it has been logged")),n.add(e)}}}},t.logAndDeleteUnresponsiveEvents=async function(){try{o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.CHECKING_INDEXDB_FOR_EVENTS,{});var e=await r("RSTIndexedDBSafe").readEventsFromDB(),t=new Set;for(var n of e)try{await o("RSTUtils").scheduleYield(),await this.$8(n,t)}catch(e){var a,i=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(i).warn((a=i.message)!=null?a:"Failed to process incident")}await r("RSTIndexedDBSafe").clearIncidentFromDB(t)}catch(e){var l,s=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(s).warn((l=s.message)!=null?l:"Failed to log incidents")}},e})(),s=new e,u=s;l.default=u}),98);
__d("RSTDebugConsoleMainThread",["RSTEvents","RSTEventsMessageQueue","RSTUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(){}l.registerDebugConsole=e}),98);
__d("RSTEventsRegisterUseCasesMainThread",["RSTClearExternalLoggingDataStoreMainThread","RSTClearInteractionDataMainThread","RSTDebugConsoleMainThread","RSTIncidentLoggingMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTDebugConsoleMainThread").registerDebugConsole(),o("RSTIncidentLoggingMainThread").registerIncidentLogging(),o("RSTClearInteractionDataMainThread").registerClearInteractionData(),o("RSTClearExternalLoggingDataStoreMainThread").registerClearExternalLoggingData()}l.default=e}),98);
__d("RSTClearInteractionDataMainThread",["RSTEvents","RSTEventsMessageQueue","RSTInteractionDataMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.HEART_BEAT,o("RSTInteractionDataMainThread").clearInteractionData),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND,o("RSTInteractionDataMainThread").clearInteractionData),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND,o("RSTInteractionDataMainThread").clearInteractionData)}l.registerClearInteractionData=e}),98);
__d("RSTInteractionTrackingMainThread",["RSTConfig","RSTEvents","RSTMetadataMainThread","ResponsiveTrackerMainThread","one-trace"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(["RESPONSIVENESS","INP","LONGTASK","UNKNOWN"]);function s(){r("RSTConfig").SHOULD_CAPTURE_INTERACTION_DATA&&(r("one-trace").subscribe("trace-policy-set",function(t){if(!e.has(t.traceType)){var n=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.TRACE_POLICY_SET,babelHelpers.extends({trace:babelHelpers.extends({},t)},n))}}),r("one-trace").subscribe("trace-end",function(t){if(!e.has(t.traceType)){var n=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.TRACE_END,babelHelpers.extends({trace:babelHelpers.extends({},t,{endTimestamp:Date.now()})},n))}}))}l.start=s}),98);
__d("RSTRecoverableUnresponsivenessTrackingMainThread",["RSTConfig","one-trace","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set(["INP","LONGTASK"]);function u(){r("one-trace").subscribe("trace-end",function(e){s.has(e.traceType)&&d.getInstance().addEvent(babelHelpers.extends({},e))})}function c(){return d.getInstance().getStats()}var d=(function(){function t(){this.WINDOW_MS=r("RSTConfig").TRACE_STATS_WINDOW_SIZE_MS,this.MAX_EVENTS=r("RSTConfig").TRACE_STATS_MAX_QUEUE_SIZE,this.eventQueue=[]}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.addEvent=function(t){if(!(t.startTime==null||t.endTime==null)){var e={traceType:t.traceType,startTime:t.startTime,duration:t.endTime-t.startTime,endTime:t.endTime};this.eventQueue.push(e),this.cleanupOldEvents(),this.eventQueue.length>=this.MAX_EVENTS&&this.eventQueue.shift()}},n.getStats=function(){this.cleanupOldEvents();var e={};this.eventQueue.forEach(function(t){t.traceType in e?(e[t.traceType].count++,e[t.traceType].totalDurationMs+=t.duration):e[t.traceType]={count:1,totalDurationMs:t.duration,averageDurationMs:0}});for(var t of Object.keys(e)){var n=e[t].totalDurationMs/e[t].count;e[t].averageDurationMs=Math.floor(n)}return e},n.cleanupOldEvents=function(){for(var t=(e||(e=r("performanceNow")))();this.eventQueue.length>0;){var n=this.eventQueue[0];if(n.endTime>=t-this.WINDOW_MS)break;this.eventQueue.shift()}},t})();d.instance=null,l.start=u,l.getStats=c}),98);
__d("RSTMetadataCollectorMainThread",["FBLogger","QPLCrashResiliencePlugin","RSTInteractionTrackingMainThread","RSTRecoverableUnresponsivenessTrackingMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(){if(!e)try{o("RSTInteractionTrackingMainThread").start(),o("RSTRecoverableUnresponsivenessTrackingMainThread").start(),o("QPLCrashResiliencePlugin").startQPLCrashResilience(),e=!0}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to start RST metadata collector")}}l.start=s}),98);
__d("RSTCloseObserver",["FBLogger","RSTConfig","RSTEvents","RSTSessionID","ResponsiveTrackerMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(r("RSTConfig").ENABLE_SERVICE_WORKER){var t=e.persisted?o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND:o("RSTEvents").RSTEvent.BROWSER_TAB_CLOSED,n={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:!1},sessionID:o("RSTSessionID").getSessionID(),metadata:null};try{if("serviceWorker"in navigator){var a;(a=navigator.serviceWorker)==null||(a=a.controller)==null||a.postMessage({command:"responsiveness",data:n})}}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to send quick browser tab close event to worker")}try{r("ResponsiveTrackerMainThread").postEvent(t)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to send browser tab close/background event to worker")}}}function s(){window.addEventListener("pagehide",e)}l.initPageCloseObserver=s}),98);
__d("RSTInteractionDataMainThread",["ALChannel","AdsALReactUtils","FBLogger","RSTConfig","RSTEvents","RSTMetadataMainThread","RSTUtilsMainThread","ResponsiveTrackerMainThread","getErrorSafe","getReactComponentStackFromDOMElement_THIS_CAN_BREAK"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=[],u=100,c=10,d=[];function m(t){s.push(t),s.length>e&&s.shift(),d.push(t),d.length>u&&d.shift()}function p(){s.length=0}function _(){var e=s;return e[e.length-1]}function f(){return[].concat(s)}function g(e){return e===void 0&&(e=c),d.slice(-1*e)}function h(e,t){var n=e!=null?e:{},a=n.name,i=n.stack,l=n.context;(a!=null||i!=null)&&m({componentName:a,componentStack:i,componentContext:l,eventType:"click",eventTime:Date.now(),componentText:t});try{var s=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.INTERACTION_DATA,babelHelpers.extends({},s))}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to send interaction data to worker")}}y();function y(){r("RSTConfig").SHOULD_CAPTURE_INTERACTION_DATA&&(o("RSTUtilsMainThread").isMonetizationApp?b():C())}function C(){window.addEventListener("click",function(e){var t=e.target;if(t instanceof Element)try{var n=r("getReactComponentStackFromDOMElement_THIS_CAN_BREAK")(t),a={name:o("RSTUtilsMainThread").getAllowListedComponentName(n),stack:n!=null?n:[],context:o("RSTUtilsMainThread").getReactComponentContext(n,r("RSTConfig").isReactComponentNameBlocked)},i=v(t,a);h(a,i)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to get react component stack from Shim")}},!0)}function b(){r("ALChannel").addListener("al_ui_event_capture",function(e){if(e.event==="click")try{var t,n={name:e.reactComponentName,stack:(t=e.reactComponentStack)!=null?t:[],context:o("RSTUtilsMainThread").getReactComponentContext(e.reactComponentStack,o("AdsALReactUtils").isComponentNameBlocked)},a=e.targetElement,i=v(a,n);h(n,i)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to get react component stack from AL")}})}function v(e,t){var n;if(!r("RSTConfig").SHOULD_CAPTURE_INTERACTION_ELEMENT_TEXT||(t==null?void 0:t.stack)==null)return null;for(var o of t.stack)if(r("RSTConfig").isReactComponentTextBlocked(o))return null;var a=(n=e==null?void 0:e.textContent)!=null?n:null;if(typeof a=="string"){a=a.trim();var i=r("RSTConfig").ELEMENT_TEXT_SIZE_LIMIT;a.length>i&&(a=a.substr(0,i)+("... ("+(a.length-i)+" code units omitted)"))}return a===""?null:a}l.clearInteractionData=p,l.getLastInteractionDataSinceLastMessageToWorker=_,l.getInteractionDataSinceLastMessageToWorker=f,l.getInteractionHistory=g}),98);
__d("RSTMetadataMainThread",["CurrentCanonicalRoute","CurrentUser","Env","MemoryUtils","RSTAdsManagerUtilsMainThread","RSTConfig","RSTExternalLoggingDataStoreMainThread","RSTInteractionDataMainThread","RSTRecoverableUnresponsivenessTrackingMainThread","RSTUtils","SiteData","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var e=Date.now(),t=babelHelpers.extends({},o("RSTAdsManagerUtilsMainThread").getAdsAnnotations());m(t);var n=Date.now();return t.rstAnnotationsCollectedInMs=""+(n-e),t}function c(){var e=babelHelpers.extends({},o("RSTAdsManagerUtilsMainThread").getAdsAnnotations());return r("RSTConfig").shouldCollectAdditionalMetadata()&&y(e),e}function d(){return r("RSTConfig").shouldCollectAdditionalMetadata()?o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.getAllSpanData():{}}function m(e){r("RSTConfig").shouldCollectAdditionalMetadata()&&(g(e),C(e),b(e),y(e),p(e),h(e))}function p(e){var t=o("RSTAdsManagerUtilsMainThread").getAdEntityIds();e.selectedAdIds=t.adIds.join(","),e.selectedAdSetIds=t.adsetIds.join(","),e.selectedCampaignIds=t.campaignIds.join(",")}function _(){try{var e,t=(e=o("RSTInteractionDataMainThread").getLastInteractionDataSinceLastMessageToWorker())==null?void 0:e.componentStack;return t!=null?t:[]}catch(e){return[]}}function f(){try{var e,t=(e=o("RSTInteractionDataMainThread").getLastInteractionDataSinceLastMessageToWorker())==null?void 0:e.componentContext;return t!=null?t:[]}catch(e){return[]}}function g(e){if(r("RSTConfig").SHOULD_COLLECT_RST_ANNOTATIONS_INTERACTION_DATA){var t=o("RSTInteractionDataMainThread").getInteractionDataSinceLastMessageToWorker().map(function(e){return e.componentName}).filter(function(e){return e!=null}).join(",");t!==""&&(e.interactedComponentsSinceLastResponsiveState=t);var n=f();n.length>0&&(e.interactedComponentContextSinceLastResponsiveState=n.join(" < "));var a=o("RSTInteractionDataMainThread").getInteractionHistory().map(function(e){return e.componentName}).filter(function(e){return e!=null}).join(",");a!==""&&(e.interactedComponentHistory=a);var i=o("RSTInteractionDataMainThread").getInteractionHistory().map(function(e){return o("RSTUtils").getInteractionDetail(e)}).filter(function(e){return e!=null}).join(",");i!==""&&(e.interactionDetailHistory=i)}}function h(e){e.crashDataOncall=r("RSTConfig").PROJECT_ONCALL,e.crashLogger=r("RSTConfig").PROJECT_NAME}function y(e){if(r("RSTConfig").SHOULD_COLLECT_RST_ANNOTATIONS_LOG_FOR_CRASH){var t=o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.getAll(),n=function(a){r("RSTConfig").BLOCKED_ANNOTATION_KEYS.some(function(e){return e.test(a)})||(e[o("RSTUtils").getExternalAnnotationKey(a)]=t[a])};for(var a of Object.keys(t))n(a)}}function C(e){var t=o("MemoryUtils").getCurrentMemory({runGC:!1}),n=t.jsHeapSizeLimit,r=t.usedJSHeapSize,a=t.totalJSHeapSize;n!=null&&(e.js_heap_size_limit=n.toString()),r!=null&&(e.used_js_heap_size=r.toString()),a!=null&&(e.total_js_heap_size=a.toString())}function b(e){var t=o("RSTRecoverableUnresponsivenessTrackingMainThread").getStats();if(t!=null)for(var n of Object.keys(t)){var r=t[n];if(r!=null){var a=n.toLowerCase();for(var i of Object.keys(r)){var l=r[i];l!=null&&(e[a+"-"+i]=l.toString())}}}}function v(){var t=document.URL,n=(e||(e=r("Env"))).brsid;try{var a,i,l,c;return{url:t,brsid:n,i1:(a=r("CurrentUser").getID())!=null?a:"0",i2:(i=o("RSTAdsManagerUtilsMainThread").getAdAccountID())!=null?i:"0",i3:(l=o("RSTAdsManagerUtilsMainThread").getBusinessID())!=null?l:"0",cpp:(c=r("SiteData").push_phase)!=null?c:"unknown",cr:""+r("SiteData").client_revision,rcs:_(),st:Math.floor(Date.now()-(s||(s=r("performance"))).now()),annotations:u(),spans:d(),ccrt:o("CurrentCanonicalRoute").getForGlobalLoggingOnly()}}catch(e){return{url:t,brsid:n,i1:"0",i2:"0",i3:"0"}}}function S(){var t=document.URL,n=(e||(e=r("Env"))).brsid;try{var a,i,l;return{url:t,brsid:n,i1:(a=r("CurrentUser").getID())!=null?a:"0",i2:(i=o("RSTAdsManagerUtilsMainThread").getAdAccountID())!=null?i:"0",i3:(l=o("RSTAdsManagerUtilsMainThread").getBusinessID())!=null?l:"0",externalAnnotations:c(),spans:d(),isLightweight:!0}}catch(e){return{url:t,brsid:n,i1:"0",i2:"0",i3:"0"}}}l.getMainThreadMetadata=v,l.getMainThreadMetadataWithExternalAnnotationsOnly=S}),98);
__d("RSTWebWorkerClientMainThreadImpl",["ErrorGuard","FBLogger","RSTConfig","RSTUtils","ResponsiveTrackerMainThread","Run","WorkerMessagePort","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("4909"),u=(function(){function t(e){this.$1=null,this.$2=!1,this.$3=e}var n=t.prototype;return n.$4=function(){return this.$1==null&&(this.$1=this.$3()),this.$1},n.startRSTFromMainThread=function(t){var e,n=this;if(t===void 0&&(t={}),!(!s||this.$2||!o("RSTUtils").isIndexedDBSupported())){var a=Math.max((e=t.extraDelayInMs)!=null?e:0,r("RSTConfig").START_RST_FROM_MAIN_THREAD_EXTRA_DELAY_IN_MS);window.setTimeout(function(){try{var e=n.$4(),t=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(e,"RSTWorkerClient");r("ResponsiveTrackerMainThread").init(t),n.$2=!0}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(a).warn("Failed to start worker: "+a.message)}},a)}},n.startRSTAfterPageLoadFromMainThread=function(n){var t=this;n===void 0&&(n={});var a=o("Run").onAfterLoad(function(){(e||(e=r("ErrorGuard"))).applyWithGuard(function(){return t.startRSTFromMainThread(n)},null,[])})},t})();l.default=u}),98);
__d("RSTWebWorkerClientMainThreadSwitch",["cr:22916"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:22916")}),98);
__d("RSTWebWorkerClientMainThreadV2",["RSTWebV2WorkerResource","RSTWebWorkerClientMainThreadImpl","WebWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("RSTWebWorkerClientMainThreadImpl"))(function(){return o("WebWorkerV2Resource").createDedicatedV2WebWorker(r("RSTWebV2WorkerResource"),"RSTWebWorker").worker}),s=e;l.default=s}),98);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1871697"),s=o("FalcoLoggerInternal").create("web_perf_device_info_log",e),u=s;l.default=u}),98);
__d("XDeviceClassRealtimeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/web_perf/get_perf_level/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");if(r){var o=n.getParameter(r.UNMASKED_RENDERER_WEBGL),a=n.getParameter(r.UNMASKED_VENDOR_WEBGL);e.gpu_vendor=a,e.gpu_renderer=o}}}function u(){var e=window.navigator,t={};return e&&e.hardwareConcurrency!==void 0&&(t.cpu_cores=e.hardwareConcurrency),e&&e.deviceMemory!==void 0&&(t.ram=e.deviceMemory),r("WebDevicePerfInfoData").needsFullUpdate&&s(t),t}function c(){var e=u();r("WebPerfDeviceInfoLogFalcoEvent").log(function(){var t,n,r,o;return{cpu_cores:(t=e.cpu_cores)!=null?t:null,ram:(n=e.ram)!=null?n:null,gpu_renderer:(r=e.gpu_renderer)!=null?r:null,gpu_vendor:(o=e.gpu_vendor)!=null?o:null}})}async function d(){var e=u(),t=await new(r("AsyncTypedRequest"))(r("XDeviceClassRealtimeControllerRouteBuilder").buildURL({})).setData(e).promisePayload();return t.devicePerfClassLevel}function m(){(r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate)&&(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(c)}function p(){return new Promise(function(t,n){r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate?(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(function(){d().then(t).catch(n)}):t()})}l.doLog=m,l.doLogPromise=p}),98);/*FB_PKG_DELIM*/
__d("CometTahoeCustomVideoAreaContext",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState,m=s.createContext({customVideoAreaHidden:!0,setCustomVideoAreaHidden:r("emptyFunction")});function p(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=d(!0),a=r[0],i=r[1],l,u;t[0]!==a?(u={customVideoAreaHidden:a,setCustomVideoAreaHidden:i},t[0]=a,t[1]=u):u=t[1],l=u;var c=l,p;return t[2]!==n||t[3]!==c?(p=s.jsx(m.Provider,{value:c,children:n}),t[2]=n,t[3]=c,t[4]=p):p=t[4],p}l.CometTahoeCustomVideoAreaContext=m,l.CometTahoeCustomVideoAreaContextProvider=p}),98);
__d("CometTahoeSidePaneContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={rightRailExpanded:!1,rightRailHidden:!1,setRightRailExpanded:function(){},setRightRailHidden:function(){}},c=s.createContext(u);l.default=c}),98);
__d("CometVideoPictureInPictureManager.react",["CometSetWatchAndScrollVideoContext","CometVideoPictureInPictureManagerContext","CometWatchAndScrollVideoContext","XCometWatchControllerRouteBuilder","clearTimeout","gkx","react","requireDeferred","setTimeout","useCometRouterDispatcher","useMinifiedProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState,g=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("CometVideoPictureInPictureManager.react"),h=r("gkx")("22889"),y=50,C=["286211568997787","214604021960500","108677131037"],b=window.document.pictureInPictureEnabled;function v(e){var t=e.children,n=e.isPipEnabled,a=r("useCometRouterDispatcher")(),i=n,l=f(null),u=l[0],C=l[1],v=f(!1),S=v[0],R=v[1],L=f(!1),E=L[0],k=L[1],I=_(!1),T=c(function(e){I.current=e},[]),D=p(function(){return{hasNextChainedVideo:E,isPipEnabled:i,setHasNextChainedVideo:k,setSkippedFromPipPlayer:R,skippedFromPipPlayer:S}},[S,R,E,k,i]),x=f(null),$=x[0],P=x[1],N=d(r("CometWatchAndScrollVideoContext")),M=d(r("CometSetWatchAndScrollVideoContext")),w=_(null),A=_(null),F=r("useMinifiedProductAttribution")(),O=c(function(e){e===void 0&&(e=null),g.onReady(function(t){t.log({attribution_id_v2:F,click_point:e,event:"click"})})},[]),B=c(function(){var e=N==null?void 0:N.videoID,t=N==null?void 0:N.videoUrl;if(e!=null&&t!=null){var n=N==null?void 0:N.routeTracePolicy,o=N==null?void 0:N.subOrigin,i=h?t:r("XCometWatchControllerRouteBuilder").buildURL({v:e});a&&(a.go(i,{passthroughProps:{portableVideoID:$,portalingRouteTracePolicy:n,portalingSubOrigin:o}}),M(null))}},[a,N,$,M]),W=c(function(){u!=null&&(w.current=r("setTimeout")(function(){var e=u.getCurrentState(),t=e.lastPauseReason,n=e.paused;I.current||(i&&(n===!1||n===!0&&t==="product_initiated")?(B(),O("control_pip_player_return_to_tab")):window.document.pictureInPictureElement===null&&(M(null),O("control_pip_player_close")))},y))},[u,i,B,M,O]),q=c(function(){u!=null&&(I.current||(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("pause",function(){u.pause("product_initiated")})),E||window.navigator.mediaSession.setActionHandler("nexttrack",null))},[u,E,O,T]),U=c(function(e){e.requestPictureInPicture(),X(!1);var t=e.internal_getVideoElement();A.current=t==null?void 0:t.currentSrc},[]),V=c(function(){if(u!=null){var e=u.getIsDesktopPictureInPicture();if(e){u.exitPictureInPicture();return}U(u)}},[U,u]),H=c(function(e){C(e)},[C]),G=c(function(e){e!=null&&P(e)},[P]),z=p(function(){return{openPipPlayer:V,setController:H,setPipPortableVideoID:G}},[V,H,G]),j=_(!1),K=f(!1),Q=K[0],X=K[1];return m(function(){var e=null;if(b&&u!=null&&window.document.pictureInPictureElement){var t=u.internal_getVideoElement(),n=t==null?void 0:t.currentSrc,r=!1,o=!1;e=u.subscribe(function(){var e=u.getCurrentState(),t=e.playing,n=e.isDesktopPictureInPicture;!r&&t&&j.current&&!I.current&&(j.current=!1,X(!0)),o&&!n&&W(),!o&&n&&q(),r=t,o=n}),n!==A.current?Q?U(u):(u.play("user_initiated"),j.current=!0):i&&(q(),A.current=n)}return function(){e!=null&&e.remove()}},[U,u,V,E,q,W,i,Q]),m(function(){return function(){w.current!=null&&(r("clearTimeout")(w.current),w.current=null)}},[]),s.jsx(o("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerContext.Provider,{value:D,children:s.jsx(o("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerAPIContext.Provider,{value:z,children:t})})}v.displayName=v.name+" [from "+i.id+"]",l.EXCLUDED_PROVIDERS=C,l.CometVideoPictureInPictureManager=v}),98);
__d("useLiveCostreamerTagSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24610591811969724"}),null);
__d("useLiveCostreamerTagSubscription.graphql",["VideoPlayerRelay_video$normalization.graphql","useLiveCostreamerTagSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"data",variableName:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[r],a={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"tagged_page",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:o,storageKey:null}],storageKey:null},i={args:null,documentName:"useLiveCostreamerTagSubscription",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"},l={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:t,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoPlayerCostreamingThumbnailRowInner_video"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},l],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:t,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[i,r],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_channel",plural:!1,selections:[s,r],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:u,storageKey:null},r],storageKey:null},{args:null,fragment:n("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:u,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null},r],storageKey:null}],storageKey:null},r],storageKey:null}],storageKey:null}],storageKey:null},l],storageKey:null}]},params:{id:n("useLiveCostreamerTagSubscription_facebookRelayOperation"),metadata:{subscriptionName:"live_video_tag_subscribe"},name:"useLiveCostreamerTagSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("useLiveCostreamerTagSubscription.react",["CometRelay","react","react-compiler-runtime","useLiveCostreamerTagSubscription.graphql","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t,a,i){var l=o("react-compiler-runtime").c(8),s;l[0]===Symbol.for("react.memo_cache_sentinel")?(s=e!==void 0?e:e=n("useLiveCostreamerTagSubscription.graphql"),l[0]=s):s=l[0];var u=s,c,m;l[1]===Symbol.for("react.memo_cache_sentinel")?(m=r("uuidv4")(),l[1]=m):m=l[1];var p;l[2]!==t||l[3]!==a?(p={input:{client_subscription_id:m,tagged_page_id:t,tagged_video_id:a}},l[2]=t,l[3]=a,l[4]=p):p=l[4];var _=p,f;l[5]!==i||l[6]!==_?(f={onNext:i,subscription:u,updater:d,variables:_},l[5]=i,l[6]=_,l[7]=f):f=l[7],c=f;var g=c;o("CometRelay").useSubscription(g)}function d(e){var t,n=e.getRootField("live_video_tag_subscribe"),r=n==null||(t=n.getLinkedRecord("tagged_page"))==null?void 0:t.getLinkedRecord("currently_live_video"),o=n==null?void 0:n.getLinkedRecord("tagged_video");r==null&&o!=null&&o.setValue(null,"if_viewer_can_see_costreaming_tools")}l.default=c}),98);
__d("LiveCostreamerTagSubscription.react",["useLiveCostreamerTagSubscription.react"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.onNext,n=e.pageID,o=e.videoID;return r("useLiveCostreamerTagSubscription.react")(n,o,t),null}l.default=e}),98);
__d("LiveVideoLatencyMenuContextProvider_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveVideoLatencyMenuContextProvider_video",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu",fragmentName:"VideoPlayerSettingsMenuLatencyPane_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu"},{kind:"RequiredField",field:{alias:"if_viewer_can_use_latency_menu_toggle",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu_toggle",fragmentName:"VideoPlayerSettingsMenuLatencyPaneToggle_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu_toggle"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("LiveVideoLatencyMenu.react",["fbt","CometRelay","FBLogger","LiveVideoLatencyMenuContextProvider_video.graphql","VideoPlayerHooks","react","react-compiler-runtime","useSelectedLatencySetting"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=u.useMemo,p=s._(/*BTDS*/"Latency"),_=[g("low"),g("normal")],f=d.createContext({liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null});function g(e){switch(e){case"low":return{description:s._(/*BTDS*/"A near-realtime experience."),title:s._(/*BTDS*/"Low latency"),value:e};case"normal":return{description:s._(/*BTDS*/"Best for performance and slower connections."),title:s._(/*BTDS*/"Normal"),value:e};case"ultra-low":return{description:s._(/*BTDS*/"Best for interactive broadcasts."),title:s._(/*BTDS*/"Ultra-low"),value:e};default:return r("FBLogger")("gaming_video").mustfix("Setting %s is not valid",e),{description:s._(/*BTDS*/"Error"),title:s._(/*BTDS*/"Error"),value:e}}}function h(e,t){var n=o("react-compiler-runtime").c(10),a=(c||(c=o("VideoPlayerHooks"))).useController(),i=c.useLatencyLevel(),l=r("useSelectedLatencySetting")(e,t),s=l[1],u;n[0]!==i?(u=g(i),n[0]=i,n[1]=u):u=n[1];var d=u,m=d.title,p;n[2]!==a||n[3]!==i||n[4]!==s?(p=function(t){i!==t&&(s(t),a.setLatencyLevel(t))},n[2]=a,n[3]=i,n[4]=s,n[5]=p):p=n[5];var _=p,f;return n[6]!==i||n[7]!==_||n[8]!==m?(f={selectedLatencySetting:i,selectedLatencySettingTitle:m,setSelectedLatencySetting:_},n[6]=i,n[7]=_,n[8]=m,n[9]=f):f=n[9],f}var y=e!==void 0?e:e=n("LiveVideoLatencyMenuContextProvider_video.graphql");function C(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.video,a=o("CometRelay").useFragment(y,r),i;e:{if(a==null){var l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null},t[0]=l):l=t[0],i=l;break e}var s;t[1]!==a.if_viewer_can_use_latency_menu||t[2]!==a.if_viewer_can_use_latency_menu_toggle?(s={liveVideoLatencyMenuPaneMatchPointer:a.if_viewer_can_use_latency_menu,liveVideoLatencyMenuPaneToggleMatchPointer:a.if_viewer_can_use_latency_menu_toggle},t[1]=a.if_viewer_can_use_latency_menu,t[2]=a.if_viewer_can_use_latency_menu_toggle,t[3]=s):s=t[3],i=s}var u=i,c;return t[4]!==n||t[5]!==u?(c=d.jsx(f.Provider,{value:u,children:n}),t[4]=n,t[5]=u,t[6]=c):c=t[6],c}l.LATENCY_MENU_TITLE=p,l.LATENCY_SETTING_OPTIONS=_,l.LiveVideoLatencyMenuContext=f,l.getLiveVideoLatencySettingToInfoMapping=g,l.useLatencySettingState=h,l.LiveVideoLatencyMenuContextProvider=C}),226);
__d("VideoPlayerCaptionsControl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsControl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerCaptionsMenu.react",["fbt","$InternalEnum","CometKeys","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsMenuCaptionsDisplayPane.react","VideoPlayerCaptionsMenuMainPane.react","VideoPlayerHooks","react","react-compiler-runtime","useLayerKeyCommands"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useMemo,f=d.useRef,g=d.useState,h=n("$InternalEnum")({CAPTIONS_BG_COLOR:"captionsBackgroundColor",CAPTIONS_BG_OPACITY:"captionsBackgroundOpacity",CAPTIONS_DISPLAY_MAIN:"captionsDisplayMain",CAPTIONS_TEXT_COLOR:"captionsTextColor",CAPTIONS_TEXT_SIZE:"captionsTextSize",CAPTIONS_MAIN:"captionsMain"});function y(e){var t=o("react-compiler-runtime").c(36),n=e.availableCaptionsLocales,a=e.captionsListExpanded,i=e.children,l=e.onClose,d=e.onPressLog,m=e.selectedCaptionsLocale,_=e.setCaptionsListExpanded,y=e.setSelectedCaptionsLocale,C=i===void 0?null:i,b=(u||(u=o("VideoPlayerHooks"))).useCaptionDisplayStyle(),v=g(h.CAPTIONS_MAIN),S=v[0],R=v[1],L=f(null),E=f(null),k;t[0]!==l?(k=function(t){L.current&&E.current&&t.target instanceof HTMLElement&&document.contains(t.target)&&!L.current.contains(t.target)&&E.current.contains(t.target)&&l()},t[0]=l,t[1]=k):k=t[1];var I=k,T,D;t[2]!==I?(T=function(){return document.addEventListener("click",I),function(){document.removeEventListener("click",I)}},D=[I],t[2]=I,t[3]=T,t[4]=D):(T=t[3],D=t[4]),p(T,D);var x,$,P;t[5]===Symbol.for("react.memo_cache_sentinel")?($={key:r("CometKeys").ESCAPE},P=s._(/*BTDS*/"Close captions menu"),t[5]=$,t[6]=P):($=t[5],P=t[6]);var N;t[7]!==l?(N=[{command:$,description:P,handler:function(){l()}}],t[7]=l,t[8]=N):N=t[8],x=N;var M=x;r("useLayerKeyCommands")(M);var w;t[9]!==n||t[10]!==a||t[11]!==C||t[12]!==d||t[13]!==m||t[14]!==_||t[15]!==y?(w=c.jsx(o("VideoPlayerCaptionsMenuMainPane.react").VideoPlayerCaptionsMenuMainPane,{availableCaptionsLocales:n,captionsListExpanded:a,onPressLog:d,selectedCaptionsLocale:m,setCaptionsListExpanded:_,setPane:R,setSelectedCaptionsLocale:y,children:C}),t[9]=n,t[10]=a,t[11]=C,t[12]=d,t[13]=m,t[14]=_,t[15]=y,t[16]=w):w=t[16];var A=w;e:switch(S){case h.CAPTIONS_MAIN:break e;case h.CAPTIONS_DISPLAY_MAIN:{var F;t[17]!==b||t[18]!==d?(F=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").VideoPlayerCaptionsMenuCaptionsDisplayMainPane,{currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[17]=b,t[18]=d,t[19]=F):F=t[19],A=F;break e}case h.CAPTIONS_BG_COLOR:{var O;t[20]!==b||t[21]!==d?(O=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundColor",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[20]=b,t[21]=d,t[22]=O):O=t[22],A=O;break e}case h.CAPTIONS_BG_OPACITY:{var B;t[23]!==b||t[24]!==d?(B=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundOpacity",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[23]=b,t[24]=d,t[25]=B):B=t[25],A=B;break e}case h.CAPTIONS_TEXT_SIZE:{var W;t[26]!==b?(W=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextSize",currentCaptionsDisplay:b,setPane:R}),t[26]=b,t[27]=W):W=t[27],A=W;break e}case h.CAPTIONS_TEXT_COLOR:{var q;t[28]!==b||t[29]!==d?(q=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextColor",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[28]=b,t[29]=d,t[30]=q):q=t[30],A=q}}var U;t[31]!==A?(U=c.jsx("div",{ref:L,children:A}),t[31]=A,t[32]=U):U=t[32];var V;t[33]===Symbol.for("react.memo_cache_sentinel")?(V=c.jsx("div",{className:"x5yr21d x1o0tod xixxii4 x13vifvy xh8yej3 x8knxv4","data-testid":void 0,ref:E}),t[33]=V):V=t[33];var H;return t[34]!==U?(H=c.jsxs(c.Fragment,{children:[U,V]}),t[34]=U,t[35]=H):H=t[35],H}l.VideoPlayerCaptionsMenuPaneType=h,l.VideoPlayerCaptionsMenu=y}),226);
__d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useCallback,m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",width:"xafpxmx",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},p={captionsBackgroundColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsBackgroundOpacity:{"0%":"TRANSPARENT","25%":"LIGHT","45%":"DEFAULT","75%":"DARK","100%":"OPAQUE"},captionsTextColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsTextSize:{"(50%)":"SMALLEST","(75%)":"SMALL","(100%)":"DEFAULT","(125%)":"MEDIUM","(150%)":"BIG","(175%)":"BIGGER","(200%)":"BIGGEST"}},_={"Background Color":{ftbLabel:s._(/*BTDS*/"Background Color"),name:"captionsBackgroundColor"},"Background Opacity":{ftbLabel:s._(/*BTDS*/"Background Opacity"),name:"captionsBackgroundOpacity"},"Text Color":{ftbLabel:s._(/*BTDS*/"Text Color"),name:"captionsTextColor"},"Text Size":{ftbLabel:s._(/*BTDS*/"Text Size"),name:"captionsTextSize"}},f={Black:s._(/*BTDS*/"Black"),Blue:s._(/*BTDS*/"Blue"),Cyan:s._(/*BTDS*/"Cyan"),Green:s._(/*BTDS*/"Green"),Magenta:s._(/*BTDS*/"Magenta"),Red:s._(/*BTDS*/"Red"),White:s._(/*BTDS*/"White"),Yellow:s._(/*BTDS*/"Yellow")};function g(e){var t=null,n=null;switch(e){case"(50%)":t=s._(/*BTDS*/"Small"),n="X-";break;case"(75%)":t=s._(/*BTDS*/"Small");break;case"(125%)":t=s._(/*BTDS*/"Large");break;case"(150%)":t=s._(/*BTDS*/"Large"),n="X-";break;case"(175%)":t=s._(/*BTDS*/"Large"),n="XX-";break;case"(200%)":t=s._(/*BTDS*/"Large"),n="XXX-";break;case"(100%)":t=s._(/*BTDS*/"Medium")}return c.jsxs("span",{children:[n!=null&&n,t,e]})}g.displayName=g.name+" [from "+i.id+"]";var h={captionsBackgroundColor:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_COLOR,captionsBackgroundOpacity:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_OPACITY,captionsTextColor:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_COLOR,captionsTextSize:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_SIZE};function y(e){var t=o("react-compiler-runtime").c(24),n=e.onPressLog,a=e.option,i=e.optionVal,l=e.setPane,s=_[a].name,d;t[0]!==s||t[1]!==n||t[2]!==a||t[3]!==l?(d=function(){l(h[s]),n&&n("captions_display_main_menu",a)},t[0]=s,t[1]=n,t[2]=a,t[3]=l,t[4]=d):d=t[4];var p=d,y;e:switch(s){case"captionsTextColor":case"captionsBackgroundColor":{y=f[i];break e}default:y=i}var C=a.replace(" ",""),b="video-player-captions-menu-captions-display-main-"+C,v;t[5]===Symbol.for("react.memo_cache_sentinel")?(v={className:"x1ypdohk x1rg5ohu x1nxh6w3 x1s688f x1uncgzr"},t[5]=v):v=t[5];var S=_[a],R;t[6]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1nxh6w3 xo1l8bm"},t[6]=R):R=t[6];var L;t[7]!==s||t[8]!==i||t[9]!==y?(L=s==="captionsTextSize"?g(i):y,t[7]=s,t[8]=i,t[9]=y,t[10]=L):L=t[10];var E;t[11]!==L||t[12]!==b?(E=c.jsx("div",babelHelpers.extends({},R,{"data-testid":void 0,children:L})),t[11]=L,t[12]=b,t[13]=E):E=t[13];var k;t[14]!==S.ftbLabel||t[15]!==E?(k=c.jsxs("div",babelHelpers.extends({},v,{children:[S.ftbLabel,E]})),t[14]=S.ftbLabel,t[15]=E,t[16]=k):k=t[16];var I,T,D;t[17]===Symbol.for("react.memo_cache_sentinel")?(T={className:"x1rg5ohu"},D={className:"x1lliihq"},I={display:"table-cell"},t[17]=I,t[18]=T,t[19]=D):(I=t[17],T=t[18],D=t[19]);var x;t[20]===Symbol.for("react.memo_cache_sentinel")?(x=c.jsx("div",babelHelpers.extends({},T,{children:c.jsx("div",babelHelpers.extends({},D,{children:c.jsx("div",{style:I,children:c.jsx(r("CometImage.react"),{src:u("480588")})})}))})),t[20]=x):x=t[20];var $;return t[21]!==p||t[22]!==k?($=c.jsxs(r("CometPressable.react"),{onPress:p,xstyle:m.menuOptionRow,children:[k,x]}),t[21]=p,t[22]=k,t[23]=$):$=t[23],$}function C(e){var t=o("react-compiler-runtime").c(17),n=e.currentCaptionsDisplay,a=e.onPressLog,i=e.setPane,l;t[0]!==i?(l=function(){i(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_MAIN)},t[0]=i,t[1]=l):l=t[1];var d=l,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g={className:"x6s0dn4 x3nfvp2"},t[3]=g):g=t[3];var h,C;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx("span",babelHelpers.extends({},g,{children:c.jsx(r("CometImage.react"),{src:u("480580")})})),C=c.jsx("span",{className:"x1nxh6w3 x1s688f x1diwwjn",children:s._(/*BTDS*/"Subtitle Options")}),t[4]=h,t[5]=C):(h=t[4],C=t[5]);var v;t[6]!==d?(v=c.jsx("div",babelHelpers.extends({},f,{children:c.jsxs(r("CometPressable.react"),{onPress:d,xstyle:m.pressableOption,children:[h,C]})})),t[6]=d,t[7]=v):v=t[7];var S;t[8]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x1anpbxc"},t[8]=S):S=t[8];var R;t[9]===Symbol.for("react.memo_cache_sentinel")?(R=Object.keys(_),t[9]=R):R=t[9];var L;t[10]!==n||t[11]!==a||t[12]!==i?(L=c.jsx("div",babelHelpers.extends({},S,{"data-testid":void 0,children:R.map(function(e){var t=_[e].name,r=p[t],o=Object.fromEntries(Object.entries(r).map(b)),l=n!=null?o[n[t]]:"";return c.jsx(y,{onPressLog:a,option:e,optionVal:l,setPane:i},e)})})),t[10]=n,t[11]=a,t[12]=i,t[13]=L):L=t[13];var E;return t[14]!==v||t[15]!==L?(E=c.jsxs(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[v,L]}),t[14]=v,t[15]=L,t[16]=E):E=t[16],E}function b(e){var t=e[0],n=e[1];return[n,t]}l.captionsDisplayOptionsMap=p,l.colorsFBTMap=f,l.getFontSizeDivWithFBTLabel=g,l.VideoPlayerCaptionsMenuCaptionsDisplayMainPane=C}),226);
__d("VideoPlayerCaptionsSettingMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="8917695971664599"}),null);
__d("VideoPlayerCaptionsSettingMutation.graphql",["VideoPlayerCaptionsSettingMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPlayerCaptionsSettingResponsePayload",kind:"LinkedField",name:"video_player_captions_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsSettingMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VideoPlayerCaptionsSettingMutation",selections:t},params:{id:n("VideoPlayerCaptionsSettingMutation_facebookRelayOperation"),metadata:{},name:"VideoPlayerCaptionsSettingMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VideoPlayerCaptionsSettingMutation",["CometRelay","VideoPlayerCaptionsSettingMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("VideoPlayerCaptionsSettingMutation.graphql");function u(e,t,n){return o("CometRelay").commitMutation(e,{mutation:s,onCompleted:n&&n.onCompleted,onError:n&&n.onError,optimisticResponse:{video_captions_setting:{success:!0}},variables:{input:{captions_background_color:t.captions_background_color,captions_background_opacity:t.captions_background_opacity,captions_text_color:t.captions_text_color,captions_text_size:t.captions_text_size,client_mutation_id:"www_captions_settings"}}})}l.commit=u}),98);
__d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react",["fbt","ix","CometImage.react","CometPressable.react","CometRelay","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsSettingMutation","VideoPlayerHooks","fbicon","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e.useCallback,p={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},_={captionsBackgroundColor:s._(/*BTDS*/"Background Color"),captionsBackgroundOpacity:s._(/*BTDS*/"Background Opacity"),captionsTextColor:s._(/*BTDS*/"Text Color"),captionsTextSize:s._(/*BTDS*/"Text Size")},f=function(t){return{captions_background_color:t.captionsBackgroundColor,captions_background_opacity:t.captionsBackgroundOpacity,captions_text_color:t.captionsTextColor,captions_text_size:t.captionsTextSize}};function g(e){var t=e.captionsDisplayOption,n=e.currentCaptionsDisplay,a=e.onPressLog,i=e.option,l=e.selected,s=e.setPane,_=(c||(c=o("VideoPlayerHooks"))).useController(),g=l,h=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[t],y=null;switch(t){case"captionsTextColor":case"captionsBackgroundColor":y=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").colorsFBTMap[i];break;default:y=i}var C="video-player-captions-menu-captions-display-pane-"+t+"-"+i,b=m(function(){if(g=!0,n!=null){n[t]=h[i],_.setCaptionsDisplayStyle(babelHelpers.extends({},n));var e=f(n);o("VideoPlayerCaptionsSettingMutation").commit(v,e)}s(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),a&&a(t)},[n,h,t,_,i]),v=o("CometRelay").useRelayEnvironment();return d.jsxs(r("CometPressable.react"),{"aria-pressed":g,onPress:b,testid:void 0,xstyle:p.menuOptionRow,children:[d.jsx("div",{className:"x1rg5ohu x1849jeq",children:g&&d.jsx("div",{"data-testid":void 0,children:d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})})}),t==="captionsTextSize"?o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").getFontSizeDivWithFBTLabel(i):d.jsx("div",{className:"x1ypdohk x1rg5ohu",children:y})]})}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=o("react-compiler-runtime").c(26),n=e.captionsDisplayOption,a=e.currentCaptionsDisplay,i=e.onPressLog,l=e.setPane,s=_[n],c=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[n],m=a!=null?a[n]:null,f;t[0]!==l?(f=function(){l(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN)},t[0]=l,t[1]=f):f=t[1];var h=f,y="video-player-captions-menu-captions-display-pane-"+n,C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1nxh6w3 x1s688f x1lku1pv"},t[2]=C):C=t[2];var b=y+"-topBar",v;t[3]===Symbol.for("react.memo_cache_sentinel")?(v={className:"x6s0dn4 x3nfvp2 x1849jeq"},t[3]=v):v=t[3];var S;t[4]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsx("span",babelHelpers.extends({},v,{children:d.jsx(r("CometImage.react"),{src:u("480580")})})),t[4]=S):S=t[4];var R;t[5]!==h||t[6]!==s||t[7]!==b?(R=d.jsx("div",babelHelpers.extends({},C,{children:d.jsxs(r("CometPressable.react"),{onPress:h,testid:void 0,xstyle:p.pressableOption,children:[S,s]})})),t[5]=h,t[6]=s,t[7]=b,t[8]=R):R=t[8];var L;t[9]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x1nxh6w3 xo1l8bm x1anpbxc"},t[9]=L):L=t[9];var E;t[10]!==c?(E=Object.keys(c),t[10]=c,t[11]=E):E=t[11];var k;t[12]!==c||t[13]!==m||t[14]!==n||t[15]!==a||t[16]!==i||t[17]!==l||t[18]!==E?(k=E.map(function(e){var t=m===c[e];return d.jsx(g,{captionsDisplayOption:n,currentCaptionsDisplay:a,onPressLog:i,option:e,selected:t,setPane:l},e)}),t[12]=c,t[13]=m,t[14]=n,t[15]=a,t[16]=i,t[17]=l,t[18]=E,t[19]=k):k=t[19];var I;t[20]!==k||t[21]!==y?(I=d.jsx("div",babelHelpers.extends({},L,{"data-testid":void 0,children:k})),t[20]=k,t[21]=y,t[22]=I):I=t[22];var T;return t[23]!==I||t[24]!==R?(T=d.jsxs(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[R,I]}),t[23]=I,t[24]=R,t[25]=T):T=t[25],T}l.VideoPlayerCaptionsMenuCaptionsDisplayPane=h}),226);
__d("VideoPlayerCaptionsMenuMainPane.react",["fbt","ix","CometPressable.react","CometScrollableArea.react","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenuTopBar.react","VideoPlayerHooks","fbicon","focusScopeQueries","isTruthy","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useEffect,_=m.useRef,f={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",fontSize:"x1nxh6w3",fontWeight:"xo1l8bm",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",":hover_backgroundColor":"xx8nu07",$$css:!0}},g=5;function h(e){var t,n=o("react-compiler-runtime").c(27),a=e.captions,i=e.captionsVisible,l=e.controller,m=e.focused,p=e.onPressLog,_=e.setSelectedCaptionsLocale,g=(c||(c=o("VideoPlayerHooks"))).useIsVideoBroadcast(),h=a.localizedCreationMethod!=null||g,y="video-player-captions-menu-language-list-item-"+((t=a.localizedLanguage)!=null?t:""),C;n[0]!==a.captionsUrl||n[1]!==a.locale||n[2]!==a.localizedLanguage||n[3]!==i||n[4]!==l||n[5]!==p||n[6]!==_?(C=function(){var e;a.locale!=null&&_(a.locale),i||l.setCaptionsVisible(!0),a.captionsUrl!=null&&l.setCaptionsUrl(a.captionsUrl),p&&p("captions_language_selector",(e=a.localizedLanguage)!=null?e:"")},n[0]=a.captionsUrl,n[1]=a.locale,n[2]=a.localizedLanguage,n[3]=i,n[4]=l,n[5]=p,n[6]=_,n[7]=C):C=n[7];var b;n[8]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x1rg5ohu xw4jnvo"},n[8]=b):b=n[8];var v;n[9]!==m||n[10]!==y?(v=m&&d.jsx("div",{"data-testid":void 0,children:d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})}),n[9]=m,n[10]=y,n[11]=v):v=n[11];var S;n[12]!==v?(S=d.jsx("div",babelHelpers.extends({},b,{children:v})),n[12]=v,n[13]=S):S=n[13];var R;n[14]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf"},n[14]=R):R=n[14];var L=r("isTruthy")(a.localizedCountry)?" "+a.localizedCountry:null,E;n[15]!==h?(E=!h&&d.jsxs(d.Fragment,{children:[" ",s._(/*BTDS*/"(Provided by Author)")]}),n[15]=h,n[16]=E):E=n[16];var k;n[17]!==a.localizedLanguage||n[18]!==L||n[19]!==E?(k=d.jsxs("div",babelHelpers.extends({},R,{children:[a.localizedLanguage,L,E]})),n[17]=a.localizedLanguage,n[18]=L,n[19]=E,n[20]=k):k=n[20];var I;return n[21]!==m||n[22]!==C||n[23]!==S||n[24]!==k||n[25]!==y?(I=d.jsxs(r("CometPressable.react"),{"aria-pressed":m,onPress:C,testid:void 0,xstyle:f.menuOptionRow,children:[S,k]}),n[21]=m,n[22]=C,n[23]=S,n[24]=k,n[25]=y,n[26]=I):I=n[26],I}var y="Toggle On";function C(e){var t=o("react-compiler-runtime").c(66),n=e.availableCaptionsLocales,a=e.captionsListExpanded,i=e.children,l=e.onPressLog,m=e.selectedCaptionsLocale,C=e.setCaptionsListExpanded,b=e.setPane,v=e.setSelectedCaptionsLocale,S=(c||(c=o("VideoPlayerHooks"))).useController(),R=c.useCaptionsVisible(),L=n!=null?n.length:0,E=_(!1),k,I;if(t[0]!==L||t[1]!==R||t[2]!==v?(k=function(){R||v(""),R&&L===0&&!E.current&&(E.current=!0,v(y))},I=[R,v,L],t[0]=L,t[1]=R,t[2]=v,t[3]=k,t[4]=I):(k=t[3],I=t[4]),p(k,I),n==null)return null;var T;t[5]!==n||t[6]!==l||t[7]!==b?(T=d.jsx(r("VideoPlayerCaptionsMenuTopBar.react"),{availableCaptionsLocales:n,onPressLog:l,setPane:b}),t[5]=n,t[6]=l,t[7]=b,t[8]=T):T=t[8];var D;t[9]===Symbol.for("react.memo_cache_sentinel")?(D={className:"x1anpbxc x15eivr9"},t[9]=D):D=t[9];var x;t[10]!==L||t[11]!==S||t[12]!==m||t[13]!==v?(x=L===0&&d.jsxs(r("CometPressable.react"),{"aria-pressed":m===y,onPress:function(){v(y),S.setCaptionsVisible(!0)},xstyle:f.menuOptionRow,children:[d.jsx("div",{className:"x1rg5ohu xw4jnvo",children:m===y&&d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})}),d.jsx("div",{className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf",children:s._(/*BTDS*/"On")})]}),t[10]=L,t[11]=S,t[12]=m,t[13]=v,t[14]=x):x=t[14];var $=m==="",P;t[15]!==S||t[16]!==v?(P=function(){v(""),S.setCaptionsVisible(!1)},t[15]=S,t[16]=v,t[17]=P):P=t[17];var N;t[18]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x1rg5ohu xw4jnvo"},t[18]=N):N=t[18];var M;t[19]!==m?(M=m===""&&d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)}),t[19]=m,t[20]=M):M=t[20];var w;t[21]!==M?(w=d.jsx("div",babelHelpers.extends({},N,{children:M})),t[21]=M,t[22]=w):w=t[22];var A;t[23]===Symbol.for("react.memo_cache_sentinel")?(A=d.jsx("div",{className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf",children:s._(/*BTDS*/"Off")}),t[23]=A):A=t[23];var F;t[24]!==w||t[25]!==$||t[26]!==P?(F=d.jsxs(r("CometPressable.react"),{"aria-pressed":$,onPress:P,xstyle:f.menuOptionRow,children:[w,A]}),t[24]=w,t[25]=$,t[26]=P,t[27]=F):F=t[27];var O;if(t[28]!==n||t[29]!==R||t[30]!==S||t[31]!==l||t[32]!==m||t[33]!==v){var B;t[35]!==R||t[36]!==S||t[37]!==l||t[38]!==m||t[39]!==v?(B=function(t){var e=t.locale===m;return t.localizedLanguage!=null?d.jsx(h,{captions:t,captionsVisible:R,controller:S,focused:e,onPressLog:l,setSelectedCaptionsLocale:v},t.locale):null},t[35]=R,t[36]=S,t[37]=l,t[38]=m,t[39]=v,t[40]=B):B=t[40],O=n.slice(0,4).map(B),t[28]=n,t[29]=R,t[30]=S,t[31]=l,t[32]=m,t[33]=v,t[34]=O}else O=t[34];var W;t[41]!==L||t[42]!==a||t[43]!==C?(W=L>=g&&!a&&d.jsx(r("CometPressable.react"),{onPress:function(){C(!0)},xstyle:f.menuOptionRow,children:d.jsx("div",{className:"x1ypdohk x1rg5ohu x9pbi5e",children:s._(/*BTDS*/"See more")})}),t[41]=L,t[42]=a,t[43]=C,t[44]=W):W=t[44];var q;t[45]!==n||t[46]!==a||t[47]!==R||t[48]!==S||t[49]!==m||t[50]!==v?(q=a&&n.slice(4).map(function(e){var t=e.locale===m;return e.localizedLanguage!=null?d.jsx(h,{captions:e,captionsVisible:R,controller:S,focused:t,setSelectedCaptionsLocale:v},e.locale):null}),t[45]=n,t[46]=a,t[47]=R,t[48]=S,t[49]=m,t[50]=v,t[51]=q):q=t[51];var U;t[52]!==a||t[53]!==C?(U=a&&d.jsx(r("CometPressable.react"),{onPress:function(){C(!1)},xstyle:f.menuOptionRow,children:d.jsx("div",{className:"x1ypdohk x1rg5ohu x9pbi5e",children:s._(/*BTDS*/"See less")})}),t[52]=a,t[53]=C,t[54]=U):U=t[54];var V;t[55]!==F||t[56]!==O||t[57]!==W||t[58]!==q||t[59]!==U||t[60]!==x?(V=d.jsx(r("CometScrollableArea.react"),{hideScrollbar:!0,children:d.jsxs("div",babelHelpers.extends({},D,{"data-testid":void 0,children:[x,F,O,W,q,U]}))}),t[55]=F,t[56]=O,t[57]=W,t[58]=q,t[59]=U,t[60]=x,t[61]=V):V=t[61];var H;return t[62]!==i||t[63]!==V||t[64]!==T?(H=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[T,i,V]})}),t[62]=i,t[63]=V,t[64]=T,t[65]=H):H=t[65],H}l.VideoPlayerCaptionsMenuMainPane=C}),226);
__d("VideoPlayerCaptionsMenuTopBar.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerCaptionsMenu.react","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e.useCallback,p={pressableOption:{width:"xh8yej3",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(18),n=e.availableCaptionsLocales,a=e.onPressLog,i=e.setPane,l;t[0]!==a||t[1]!==i?(l=function(){i(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),a&&a("captions_main_menu_top_bar")},t[0]=a,t[1]=i,t[2]=l):l=t[2];var m=l,_=(c||(c=o("VideoPlayerHooks"))).useIsLive(),g=c.useIsVideoBroadcast(),h=g&&!_,y;t[3]!==n||t[4]!==h?(y=(n==null?void 0:n.some(f))||h,t[3]=n,t[4]=h,t[5]=y):y=t[5];var C=y,b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x14ctfv x78zum5 x1jzhcrs"},t[6]=b):b=t[6];var v,S,R;t[7]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx("div",{className:"x1nxh6w3 x1s688f",children:s._(/*BTDS*/"Subtitles")}),S={className:"x6s0dn4 x14ctfv x1ypdohk x3nfvp2 x1bhwmg6 x13a6bvl xymharo"},R={className:"x3nfvp2"},t[7]=v,t[8]=S,t[9]=R):(v=t[7],S=t[8],R=t[9]);var L;t[10]===Symbol.for("react.memo_cache_sentinel")?(L=d.jsxs("div",babelHelpers.extends({},S,{children:[d.jsx("span",babelHelpers.extends({},R,{children:d.jsx(r("CometImage.react"),{src:u("492300")})})),d.jsx("div",{className:"x3nfvp2 xo1l8bm xdzw4kq",children:s._(/*BTDS*/"Options")})]})),t[10]=L):L=t[10];var E;t[11]!==m?(E=d.jsx("div",babelHelpers.extends({},b,{children:d.jsxs(r("CometPressable.react"),{onPress:m,testid:void 0,xstyle:p.pressableOption,children:[v,L]})})),t[11]=m,t[12]=E):E=t[12];var k;t[13]!==C?(k=C!=null&&C&&d.jsx("div",{className:"x1nxh6w3 x1k4tb9n",children:s._(/*BTDS*/"Auto-generated")}),t[13]=C,t[14]=k):k=t[14];var I;return t[15]!==E||t[16]!==k?(I=d.jsxs("div",{children:[E,k]}),t[15]=E,t[16]=k,t[17]=I):I=t[17],I}function f(e){return e.localizedCreationMethod!=null}l.default=_}),226);
__d("VideoPlayerCaptionsControl.react",["fbt","ix","CometRelay","IntlCurrentLocale","VideoPlayerCaptionsControl_video.graphql","VideoPlayerCaptionsMenu.react","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerHooks","VideoPlayerLoggingSuboriginContext","VideoPlayerUserInteractionCounter","fbicon","react","requireDeferred","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m=c||(c=o("react")),p=c,_=p.useCallback,f=p.useContext,g=p.useEffect,h=p.useMemo,y=p.useRef,C=p.useState,b=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerCaptionsControl.react"),v="asr",S=function(t){return t.length<2?null:t.substr(0,2)};function R(t){var a=t.alignMenuToIcon,i=a===void 0?!1:a,l=t.availableCaptionsLocales,c=t.captionsVisible,p=t.children,R=p===void 0?null:p,L=t.compactMenu,E=t.icon,k=t.initialCaptionsUrl,I=t.menuOpened,T=t.onMenuOpen,D=t.onUserInteraction,x=t.setMenuOpened,$=t.video,P=s._(/*BTDS*/"Captions");o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_captions_menu",I===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,D);var N=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerCaptionsControl_video.graphql"),$),M=(d||(d=o("VideoPlayerHooks"))).useMuted(),w=d.useController(),A=r("usePlayerOriginRouteTracePolicy")(),F=r("useVideoPlayerAvailableCaptionsLocalesFromRelay")(N),O=h(function(){var e;return((e=l!=null?l:F)!=null?e:[]).slice().sort(function(e,t){var n,r;return((n=e.localizedLanguage)!=null?n:"")>((r=t.localizedLanguage)!=null?r:"")?1:-1})},[l,F]),B=k!=null?k:N==null?void 0:N.captions_url,W=C(""),q=W[0],U=W[1],V=y(null),H=y(null);g(function(){O.forEach(function(e){e.captionsUrl===B&&e.locale!=null&&(V.current==null&&(V.current=e.locale),U(e.locale))})},[O,B]);var G=r("IntlCurrentLocale").code;g(function(){var e,t=S((e=V.current)!=null?e:"");V.current!==v&&t!=null&&t!==S(G)&&H.current===null?(w.setCaptionsVisible(!1),H.current=!1):M&&!c&&q!==""&&H.current===null?(H.current=!0,w.setCaptionsVisible(!0)):!M&&H.current===!0&&(w.setCaptionsVisible(!1),H.current=!1)},[c,w,M,G,q]);var z=I===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,j=C(!1),K=j[0],Q=j[1],X=f(r("VideoPlayerLoggingSuboriginContext")),Y=r("useMinifiedProductAttribution")(),J=_(function(e,t){e===void 0&&(e=null),t===void 0&&(t=null),b.onReady(function(n){n.log({attribution_id_v2:Y,click_point:e,event:"click",event_target_info:A,event_target_sub_type:t,player_suborigin:X})})},[Y,A,X]);return m.jsxs("div",babelHelpers.extends({},{0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[(i===!0)<<0],{"data-testid":void 0,children:[z&&m.jsx("div",babelHelpers.extends({role:"dialog"},{0:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk xk6ci0l x1602a87"},2:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 xwjie4w"},1:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"},3:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"}}[(L===!0)<<1|(i===!0)<<0],{children:m.jsx(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenu,{availableCaptionsLocales:O,captionsListExpanded:K,onClose:function(){x!=null&&x(null)},onPressLog:J,selectedCaptionsLocale:q,setCaptionsListExpanded:Q,setSelectedCaptionsLocale:U,children:R})})),m.jsx(r("VideoPlayerControlIcon.react"),{icon:E==null?c?o("fbicon")._(u("662652"),20):o("fbicon")._(u("662655"),20):E,label:P,onPress:function(){x!=null&&x(z?null:o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU),!z&&T!=null&&T(),J("closed_captions_button")},tooltip:P})]}))}R.displayName=R.name+" [from "+i.id+"]",l.default=R}),226);
__d("VideoPlayerCastControlShimImpl.modern.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerCastControl.react").__setRef("VideoPlayerCastControlShimImpl.modern.react"));l.default=e}),98);
__d("VideoPlayerCastControlShim.react",["CometPlaceholder.react","VideoPlayerCastControlShimImpl.modern.react","VideoPlayerControlsGroups.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["isVisible"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,l;n[0]!==t?(a=t.isVisible,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l):(a=n[1],l=n[2]);var s;n[3]!==l?(s=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(r("VideoPlayerCastControlShimImpl.modern.react"),babelHelpers.extends({},l))}),n[3]=l,n[4]=s):s=n[4];var c;return n[5]!==a||n[6]!==s?(c=u.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:a,noPaddingEnd:!0,noPaddingStart:!0,children:s}),n[5]=a,n[6]=s,n[7]=c):c=n[7],c}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplLive_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControlsImplLive_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerLiveVideoControls_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerExpandSidePanelControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useContext;function m(){var e=o("react-compiler-runtime").c(12),t=d(r("CometTahoeSidePaneContext")),n=t.rightRailExpanded,a=t.setRightRailExpanded,i;e[0]!==n?(i=n?s._(/*BTDS*/"Collapse comments"):s._(/*BTDS*/"Expand comments"),e[0]=n,e[1]=i):i=e[1];var l=i,m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},e[2]=m):m=e[2];var p;e[3]!==n?(p=n?o("fbicon")._(u("557039"),20):o("fbicon")._(u("557052"),20),e[3]=n,e[4]=p):p=e[4];var _;e[5]!==n||e[6]!==a?(_=function(){a(!n)},e[5]=n,e[6]=a,e[7]=_):_=e[7];var f;return e[8]!==l||e[9]!==p||e[10]!==_?(f=c.jsx("div",babelHelpers.extends({},m,{children:c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:l,onPress:_,tooltip:l})})),e[8]=l,e[9]=p,e[10]=_,e[11]=f):f=e[11],f}l.default=m}),226);
__d("VideoPlayerLiveVideoControls_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerLiveVideoControls_video",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"is_clipping_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_rewind_enabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"LiveVideoLatencyMenuContextProvider_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_community_moderation_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video",fragmentName:"VideoPlayerModeratorControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_live_rewind",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_live_rewind",fragmentName:"VideoPlayerLiveRewindControlsGroup_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_see_costreaming_tools",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null}})();a.exports=e}),null);
__d("VideoPlayerQuietModeControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useContext;function m(){var e=o("react-compiler-runtime").c(12),t=d(r("CometTahoeSidePaneContext")),n=t.rightRailHidden,a=t.setRightRailHidden,i;e[0]!==n?(i=n?s._(/*BTDS*/"Show comments and reactions"):s._(/*BTDS*/"Hide comments and reactions"),e[0]=n,e[1]=i):i=e[1];var l=i,m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},e[2]=m):m=e[2];var p;e[3]!==n?(p=n?o("fbicon")._(u("942218"),20):o("fbicon")._(u("942221"),20),e[3]=n,e[4]=p):p=e[4];var _;e[5]!==n||e[6]!==a?(_=function(){a(!n)},e[5]=n,e[6]=a,e[7]=_):_=e[7];var f;return e[8]!==l||e[9]!==p||e[10]!==_?(f=c.jsx("div",babelHelpers.extends({},m,{children:c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:l,onPress:_,tooltip:l})})),e[8]=l,e[9]=p,e[10]=_,e[11]=f):f=e[11],f}l.default=m}),226);
__d("VideoPlayerSettingsMenuQualityPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={pressableOption:{width:"xh8yej3",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(14),n=e.selectedVideoQuality,a=e.setPane,i=e.targetVideoQuality,l;t[0]!==a?(l=function(){a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.QUALITY)},t[0]=a,t[1]=l):l=t[1];var m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",{className:"x1ypdohk x1s688f",children:s._(/*BTDS*/"Quality")}),p={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},t[2]=m,t[3]=p):(m=t[2],p=t[3]);var _;t[4]!==n||t[5]!==i?(_=n==="notselected"?c.jsx("span",{"data-testid":void 0,children:"\xA0"}):n==="auto"?c.jsxs(c.Fragment,{children:[c.jsx("span",{"data-testid":void 0,children:s._(/*BTDS*/"Auto")}),i!=null?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"\xA0"}),c.jsx("span",{"data-testid":void 0,children:i})]}):null]}):c.jsx("span",{"data-testid":void 0,children:n}),t[4]=n,t[5]=i,t[6]=_):_=t[6];var f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x3nfvp2 xmgb6t1 xwklpps"},t[7]=f):f=t[7];var g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",babelHelpers.extends({},f,{children:c.jsx(r("CometImage.react"),{src:u("480587")})})),t[8]=g):g=t[8];var h;t[9]!==_?(h=c.jsxs("div",babelHelpers.extends({},p,{children:[_,g]})),t[9]=_,t[10]=h):h=t[10];var y;return t[11]!==l||t[12]!==h?(y=c.jsxs(r("CometPressable.react"),{onPress:l,testid:void 0,xstyle:d.pressableOption,children:[m,h]}),t[11]=l,t[12]=h,t[13]=y):y=t[13],y}l.default=m}),226);
__d("VideoPlayerSettingsMenu.react",["fbt","$InternalEnum","CometAudioLanguageUtils","CometErrorBoundary.react","CometKeys","CometPlaceholder.react","CometRelay","FBLogger","LiveVideoLatencyMenu.react","PlaybackSpeedExperiments","VideoPlayerHooks","VideoPlayerSettingsMenuAudioTrackPane.react","VideoPlayerSettingsMenuMainPane.react","VideoPlayerSettingsMenuPlaybackSpeedPane.react","VideoPlayerSettingsMenuQualityPane.react","react","react-compiler-runtime","useLayerKeyCommands","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["label"],u,c,d=u||(u=o("react")),m=u,p=m.useCallback,_=m.useContext,f=m.useEffect,g=m.useMemo,h=m.useRef,y=m.useState,C=n("$InternalEnum")({LATENCY:"latency",MAIN:"main",PLAYBACK_SPEED:"playbackSpeed",QUALITY:"quality",AUDIO:"audio"});function b(e){var t=o("react-compiler-runtime").c(60),n=e.children,a=e.disableDubbing,l=e.dubTrackMapping,u=e.forceShowPlaybackRateControl,m=e.onClose,p=e.videoID,g=n===void 0?null:n,b=a===void 0?!1:a,S=(c||(c=o("VideoPlayerHooks"))).useCaptionsLoaded(),R=c.useCaptionsVisible(),L=c.useSelectedVideoQuality(),E=c.useController(),k;t[0]!==E?(k=function(){return E.getCurrentState().availableAudioTracks},t[0]=E,t[1]=k):k=t[1];var I=r("useVideoPlayerControllerSubscription")(k),T;t[2]!==E?(T=function(){return E.getCurrentState().targetAudioTrack},t[2]=E,t[3]=T):T=t[3];var D=r("useVideoPlayerControllerSubscription")(T),x=o("CometAudioLanguageUtils").useGetAllAvailableTracks(I,l),$;t[4]!==x.allAvailableTracks?($=x.allAvailableTracks.map(v),t[4]=x.allAvailableTracks,t[5]=$):$=t[5];var P=$,N=c.useInbandCaptionsAutogenerated(),M=c.useTargetVideoQuality(),w=y(C.MAIN),A=w[0],F=w[1],O=y(R),B=O[0],W=O[1],q=c.usePlaybackRate(),U=c.useIsLive(),V=c.useIsLiveRewindActive(),H=_(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext),G=H.liveVideoLatencyMenuPaneMatchPointer,z=c.useShouldShowPlaybackRateControl(),j;t[6]!==u||t[7]!==z?(j=u===!0||o("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&z,t[6]=u,t[7]=z,t[8]=j):j=t[8];var K=j,Q,X;t[9]!==U||t[10]!==V||t[11]!==A?(Q=function(){U&&!V&&A===C.PLAYBACK_SPEED&&F(C.MAIN)},X=[V,F,U,A],t[9]=U,t[10]=V,t[11]=A,t[12]=Q,t[13]=X):(Q=t[12],X=t[13]),f(Q,X);var Y;t[14]!==P.length||t[15]!==A?(Y=function(){P.length<=1&&A===C.AUDIO&&F(C.MAIN)},t[14]=P.length,t[15]=A,t[16]=Y):Y=t[16];var J;t[17]!==P||t[18]!==A?(J=[P,A],t[17]=P,t[18]=A,t[19]=J):J=t[19],f(Y,J);var Z=h(null),ee=h(null),te;t[20]!==m?(te=function(t){Z.current&&ee.current&&t.target instanceof HTMLElement&&document.contains(t.target)&&!Z.current.contains(t.target)&&ee.current.contains(t.target)&&m()},t[20]=m,t[21]=te):te=t[21];var ne=te,re,oe;t[22]!==ne?(re=function(){return document.addEventListener("click",ne),function(){document.removeEventListener("click",ne)}},oe=[ne],t[22]=ne,t[23]=re,t[24]=oe):(re=t[23],oe=t[24]),f(re,oe);var ae,ie,le;t[25]===Symbol.for("react.memo_cache_sentinel")?(ie={key:r("CometKeys").ESCAPE},le=s._(/*BTDS*/"Close video settings menu"),t[25]=ie,t[26]=le):(ie=t[25],le=t[26]);var se;t[27]!==m?(se=[{command:ie,description:le,handler:function(){m()}}],t[27]=m,t[28]=se):se=t[28],ae=se;var ue=ae;r("useLayerKeyCommands")(ue);var ce=D!=null?D:null,de;t[29]!==P||t[30]!==S||t[31]!==B||t[32]!==g||t[33]!==b||t[34]!==N||t[35]!==U||t[36]!==q||t[37]!==L||t[38]!==K||t[39]!==ce||t[40]!==M?(de=d.jsx(r("VideoPlayerSettingsMenuMainPane.react"),{availableAudioTracks:P,captionsLoaded:S,captionsVisibleOptimistic:B,disableDubbing:b,inbandCaptionsAutogenerated:N,isLive:U,playbackRate:q,selectedVideoQuality:L,setIsCaptionsVisible:W,setPane:F,shouldEnablePlaybackRateSupport:K,targetAudioTrack:ce,targetVideoQuality:M,children:g}),t[29]=P,t[30]=S,t[31]=B,t[32]=g,t[33]=b,t[34]=N,t[35]=U,t[36]=q,t[37]=L,t[38]=K,t[39]=ce,t[40]=M,t[41]=de):de=t[41];var me=de;e:switch(A){case C.LATENCY:{if(G==null){r("FBLogger")("gaming_video").mustfix("Latency components should not be null");break e}var pe;t[42]===Symbol.for("react.memo_cache_sentinel")?(pe={setPane:F},t[42]=pe):pe=t[42];var _e;t[43]!==G?(_e=d.jsx(r("CometErrorBoundary.react"),{children:d.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:d.jsx(o("CometRelay").MatchContainer,{match:G,props:pe})})}),t[43]=G,t[44]=_e):_e=t[44],me=_e;break e}case C.MAIN:break e;case C.PLAYBACK_SPEED:{var fe;t[45]!==q?(fe=d.jsx(r("VideoPlayerSettingsMenuPlaybackSpeedPane.react"),{playbackRate:q,setPane:F}),t[45]=q,t[46]=fe):fe=t[46],me=fe;break e}case C.QUALITY:{var ge;t[47]!==L?(ge=d.jsx(r("VideoPlayerSettingsMenuQualityPane.react"),{selectedVideoQuality:L,setPane:F}),t[47]=L,t[48]=ge):ge=t[48],me=ge;break e}case C.AUDIO:{var he;if(t[49]!==x.originalLanguage||t[50]!==P||t[51]!==U||t[52]!==D||t[53]!==p){var ye;he=!U&&P.length>1?d.jsx(r("VideoPlayerSettingsMenuAudioTrackPane.react"),{availableAudioTracks:P,originalVideoLanguage:(ye=x.originalLanguage)!=null?ye:null,setPane:F,targetAudioTrack:D!=null?D:null,videoID:p!=null?p:null}):null,t[49]=x.originalLanguage,t[50]=P,t[51]=U,t[52]=D,t[53]=p,t[54]=he}else he=t[54];me=he}}var Ce;t[55]!==me?(Ce=d.jsx("div",{ref:Z,children:me}),t[55]=me,t[56]=Ce):Ce=t[56];var be;t[57]===Symbol.for("react.memo_cache_sentinel")?(be=d.jsx("div",{className:"xjbqb8w x5yr21d x1o0tod xg6iff7 x1g81zrj xixxii4 x13vifvy xh8yej3 x8knxv4","data-testid":void 0,ref:ee}),t[57]=be):be=t[57];var ve;return t[58]!==Ce?(ve=d.jsxs(d.Fragment,{children:[Ce,be]}),t[58]=Ce,t[59]=ve):ve=t[59],ve}function v(t){var n=t.label,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}l.VideoPlayerSettingsMenuPaneType=C,l.VideoPlayerSettingsMenu=b}),226);
__d("VideoPlayerSettingsMenuAudioTrackPane.react",["ix","AutoDubbingConsumptionFalcoEvent","CometAudioLanguageMenuItemsMutation","CometFeedStoryMetaSectionMiddot.react","CometImage.react","CometPressable.react","CometRelay","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","FDSTextPairing.react","FocusRegion.react","VideoPlayerAudioTrackUtils","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useEffect,p=d.useRef,_={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(31),n=e.availableAudioTracks,a=e.originalVideoLanguage,i=e.setPane,l=e.targetAudioTrack,d=e.videoID,f=(u||(u=o("VideoPlayerHooks"))).useController(),g=o("CometRelay").useMutation(o("CometAudioLanguageMenuItemsMutation").setUserPreferredAudioLanguageDataMutation),h=g[0],y;t[0]!==h?(y=function(t){t!=null&&h({variables:{input:{language_code:t}}})},t[0]=h,t[1]=y):y=t[1];var C=y,b;t[2]!==d?(b=function(t,n,o,a,i){var e={client_extra_data:{dubbing_type_from:o==null?"original":o,dubbing_type_to:a==null?"original":a,lang_from:t!=null?t:"original",lang_to:n!=null?n:"original"},event:i,video_id:d!=null?d:""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})},t[2]=d,t[3]=b):b=t[3];var v=b,S;t[4]!==a?(S=function(t){var e,n=(e=t==null?void 0:t.lang)!=null?e:null;return(t==null?void 0:t.lang)===null&&t.role==null&&(n=a!=null?a:null),n},t[4]=a,t[5]=S):S=t[5];var R=S,L=p(null),E=function(t){var e=R(t),n=R(l);f.selectVideoVariant({lang:t.lang,role:t.role}),C(e),v(n,e,l==null?void 0:l.role,t.role,"fb_reel_auto_dub_consumption_preferred_language_changed"),L.current!=null&&L.current.remove(),L.current=f.subscribe(function(){var r;if(((r=f.getCurrentState().targetAudioTrack)==null?void 0:r.id)===t.id){var o;v(n,e,l==null?void 0:l.role,t.role,"fb_reel_auto_dub_consumption"),(o=L.current)==null||o.remove()}})},k;t[6]!==f?(k=[f],t[6]=f,t[7]=k):k=t[7],m(function(){return function(){var e;(e=L.current)==null||e.remove()}},k);var I;t[8]!==a?(I=function(t){var e=t==null?void 0:t.lang;e==null&&(t==null?void 0:t.role)==null&&(e=a!=null?a:null);var n=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),e),i=null;return t.role==null?i=n==null?c.jsx("div",{children:o("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL}):c.jsxs("div",{children:[o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(n),c.jsx(r("CometFeedStoryMetaSectionMiddot.react"),{}),o("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL]}):n!=null&&(i=o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(n)),i},t[8]=a,t[9]=I):I=t[9];var T=I,D=o("FocusRegion.react").FocusRegion,x=o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,$=o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,P="VideoPlayerSettingsMenu/changeAudioTrackPane",N;t[10]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[10]=N):N=t[10];var M;t[11]!==i?(M=function(){return i(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[11]=i,t[12]=M):M=t[12];var w;t[13]===Symbol.for("react.memo_cache_sentinel")?(w={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},t[13]=w):w=t[13];var A;t[14]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsx("span",babelHelpers.extends({},w,{children:c.jsx(r("CometImage.react"),{src:s("480579")})})),t[14]=A):A=t[14];var F;t[15]!==M?(F=c.jsx("div",babelHelpers.extends({},N,{children:c.jsxs(r("CometPressable.react"),{onPress:M,testid:void 0,xstyle:_.pressableOption,children:[A,o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_MENU_ITEM]})})),t[15]=M,t[16]=F):F=t[16];var O,B;t[17]===Symbol.for("react.memo_cache_sentinel")?(O=c.jsx("div",{className:"x1j9u4d2 xyamay9",children:c.jsx(r("FDSTextPairing.react"),{body:o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_DESCRIPTION,bodyColor:"white",level:4})}),B={className:"x1hm9lzh x1anpbxc xn80e1m"},t[17]=O,t[18]=B):(O=t[17],B=t[18]);var W="VideoPlayerSettingsMenu/changeAudioTrackPaneList",q=n.map(function(e){var t=(l==null?void 0:l.id)===e.id,n=T(e);if(n!=null)return c.jsx("div",{children:c.jsxs(r("CometPressable.react"),{onPress:function(){return E(e)},testid:void 0,xstyle:_.menuOptionRow,children:[c.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:t&&c.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),c.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!t<<0],{"data-testid":void 0,children:n}))]})},e.id)}),U;t[19]!==B||t[20]!==q?(U=c.jsx("div",babelHelpers.extends({},B,{"data-testid":void 0,children:q})),t[19]=B,t[20]=q,t[21]=U):U=t[21];var V;t[22]!==F||t[23]!==O||t[24]!==U?(V=c.jsxs("div",{"data-testid":void 0,children:[F,O,U]}),t[22]=F,t[23]=O,t[24]=U,t[25]=V):V=t[25];var H;return t[26]!==D||t[27]!==V||t[28]!==x||t[29]!==$?(H=c.jsx(D,{autoFocusQuery:x,recoverFocusQuery:$,children:V}),t[26]=D,t[27]=V,t[28]=x,t[29]=$,t[30]=H):H=t[30],H}l.default=f}),98);
__d("VideoPlayerSettingsMenuMainPane.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","FocusRegion.react","LiveVideoLatencyMenu.react","VideoPlayerSettingsMenuPlaybackPaneToggle.react","VideoPlayerSettingsMenuQualityPaneToggle.react","deferredLoadComponent","focusScopeQueries","gkx","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSettingsMenuAudioTrackPaneToggle.react").__setRef("VideoPlayerSettingsMenuMainPane.react"));function d(e){var t=o("react-compiler-runtime").c(23),n=e.availableAudioTracks,a=e.children,l=e.disableDubbing,d=e.isLive,m=e.playbackRate,p=e.selectedVideoQuality,_=e.setPane,f=e.shouldEnablePlaybackRateSupport,g=e.targetAudioTrack,h=e.targetVideoQuality,y=l===void 0?!1:l,C=u(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext),b=C.liveVideoLatencyMenuPaneToggleMatchPointer,v=!y&&!d&&n.length>1?r("gkx")("24336"):!1,S;t[0]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},t[0]=S):S=t[0];var R;t[1]!==p||t[2]!==_||t[3]!==h?(R=s.jsx("div",babelHelpers.extends({},S,{children:s.jsx(r("VideoPlayerSettingsMenuQualityPaneToggle.react"),{selectedVideoQuality:p,setPane:_,targetVideoQuality:h})})),t[1]=p,t[2]=_,t[3]=h,t[4]=R):R=t[4];var L;t[5]!==_||t[6]!==v||t[7]!==g?(L=v&&s.jsx("div",{className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv",children:s.jsx(c,{setPane:_,targetAudioTrack:g})}),t[5]=_,t[6]=v,t[7]=g,t[8]=L):L=t[8];var E;t[9]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},t[9]=E):E=t[9];var k;t[10]!==m||t[11]!==_||t[12]!==f?(k=s.jsx("div",babelHelpers.extends({},E,{children:s.jsx(r("VideoPlayerSettingsMenuPlaybackPaneToggle.react"),{playbackRate:m,setPane:_,shouldEnablePlaybackRateSupport:f})})),t[10]=m,t[11]=_,t[12]=f,t[13]=k):k=t[13];var I;t[14]!==b||t[15]!==_?(I=b!=null&&s.jsx("div",{className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv",children:s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(o("CometRelay").MatchContainer,{match:b,props:{setPane:_}})})})}),t[14]=b,t[15]=_,t[16]=I):I=t[16];var T;return t[17]!==a||t[18]!==R||t[19]!==L||t[20]!==k||t[21]!==I?(T=s.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:s.jsxs("div",{"data-testid":void 0,children:[R,L,k,I,a]})}),t[17]=a,t[18]=R,t[19]=L,t[20]=k,t[21]=I,t[22]=T):T=t[22],T}l.default=d}),98);
__d("VideoPlayerSettingsMenuPlaybackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={pressableOption:{width:"xh8yej3",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(13),n=e.playbackRate,a=e.setPane,i=e.shouldEnablePlaybackRateSupport;if(!i)return null;var l;t[0]!==a?(l=function(){a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.PLAYBACK_SPEED)},t[0]=a,t[1]=l):l=t[1];var m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",{className:"x1ypdohk x1s688f",children:s._(/*BTDS*/"Playback Speed")}),p={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},t[2]=m,t[3]=p):(m=t[2],p=t[3]);var _;t[4]!==n?(_=c.jsx("span",{"data-testid":void 0,children:n}),t[4]=n,t[5]=_):_=t[5];var f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x3nfvp2 xmgb6t1 xwklpps"},t[6]=f):f=t[6];var g;t[7]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",babelHelpers.extends({},f,{children:c.jsx(r("CometImage.react"),{src:u("480587")})})),t[7]=g):g=t[7];var h;t[8]!==_?(h=c.jsxs("div",babelHelpers.extends({},p,{children:[_,g]})),t[8]=_,t[9]=h):h=t[9];var y;return t[10]!==l||t[11]!==h?(y=c.jsxs(r("CometPressable.react"),{onPress:l,testid:void 0,xstyle:d.pressableOption,children:[m,h]}),t[10]=l,t[11]=h,t[12]=y):y=t[12],y}l.default=m}),226);
__d("VideoPlayerSettingsMenuPlaybackSpeedPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(15),n=e.playbackRate,a=e.setPane,i=(c||(c=o("VideoPlayerHooks"))).useController(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[0]=l):l=t[0];var p;t[1]!==a?(p=function(){return a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[1]=a,t[2]=p):p=t[2];var _;t[3]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x3nfvp2 xmgb6t1 x165d6jo"},t[3]=_):_=t[3];var f,g;t[4]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx("span",babelHelpers.extends({},_,{children:d.jsx(r("CometImage.react"),{src:u("480579")})})),g=s._(/*BTDS*/"Playback Speed"),t[4]=f,t[5]=g):(f=t[4],g=t[5]);var h;t[6]!==p?(h=d.jsx("div",babelHelpers.extends({},l,{children:d.jsxs(r("CometPressable.react"),{onPress:p,testid:void 0,xstyle:m.pressableOption,children:[" ",f,g]})})),t[6]=p,t[7]=h):h=t[7];var y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1hm9lzh x1anpbxc"},t[8]=y):y=t[8];var C;t[9]!==i||t[10]!==n?(C=d.jsx("div",babelHelpers.extends({},y,{"data-testid":void 0,children:[.5,.75,1,1.25,1.5,1.75,2].map(function(e){var t=n===e,o=s._(/*BTDS*/"Set the playback speed to {playback_rate_option}{is_playback_rate_option_selected}",[s._param("playback_rate_option",e),s._param("is_playback_rate_option_selected",t?", selected":"")]);return d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{"aria-checked":t,"aria-label":o,onPress:function(){i.setPlaybackRate(e)},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"x17j41np x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:t&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!t<<0],{"data-testid":void 0,children:e}))]})},e)})})),t[9]=i,t[10]=n,t[11]=C):C=t[11];var b;return t[12]!==h||t[13]!==C?(b=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[h,C]})}),t[12]=h,t[13]=C,t[14]=b):b=t[14],b}l.default=p}),226);
__d("VideoPlayerSettingsMenuQualityPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(26),n=e.selectedVideoQuality,a=e.setPane,i=(c||(c=o("VideoPlayerHooks"))).useAvailableVideoQualities(),l=c.useIsAbrEnabled(),p=c.useController(),_;t[0]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[0]=_):_=t[0];var f;t[1]!==a?(f=function(){return a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[1]=a,t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},t[3]=g):g=t[3];var h,y;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("span",babelHelpers.extends({},g,{children:d.jsx(r("CometImage.react"),{src:u("480579")})})),y=s._(/*BTDS*/"Quality"),t[4]=h,t[5]=y):(h=t[4],y=t[5]);var C;t[6]!==f?(C=d.jsx("div",babelHelpers.extends({},_,{children:d.jsxs(r("CometPressable.react"),{onPress:f,testid:void 0,xstyle:m.pressableOption,children:[h,y]})})),t[6]=f,t[7]=C):C=t[7];var b;t[8]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x1hm9lzh x1anpbxc"},t[8]=b):b=t[8];var v;t[9]!==p||t[10]!==l||t[11]!==n?(v=l?d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{onPress:function(){p.selectVideoQuality("auto")},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:n==="auto"&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[(n==="auto")<<0],{"data-testid":void 0,children:s._(/*BTDS*/"Auto")}))]})},"auto"):null,t[9]=p,t[10]=l,t[11]=n,t[12]=v):v=t[12];var S;if(t[13]!==i||t[14]!==p||t[15]!==n){var R;t[17]!==p||t[18]!==n?(R=function(t){var e=n===t;return d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{onPress:function(){p.selectVideoQuality(t)},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:e&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!e<<0],{"data-testid":void 0,children:t}))]})},t)},t[17]=p,t[18]=n,t[19]=R):R=t[19],S=i.map(R).reverse(),t[13]=i,t[14]=p,t[15]=n,t[16]=S}else S=t[16];var L;t[20]!==v||t[21]!==S?(L=d.jsxs("div",babelHelpers.extends({},b,{"data-testid":void 0,children:[v,S]})),t[20]=v,t[21]=S,t[22]=L):L=t[22];var E;return t[23]!==L||t[24]!==C?(E=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[C,L]})}),t[23]=L,t[24]=C,t[25]=E):E=t[25],E}l.default=p}),226);
__d("VideoPlayerSettingsControl.react",["fbt","ix","VideoPlayerContexts","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerSettingsMenu.react","VideoPlayerUserInteractionCounter","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useContext,_=m.useState;function f(e){var t=o("react-compiler-runtime").c(30),n=e.alignMenuToIcon,a=e.children,i=e.compactMenu,l=e.dubTrackMapping,m=e.forceShowPlaybackRateControl,f=e.icon,g=e.menuOpened,h=e.onMenuOpen,y=e.onUserInteraction,C=e.ref,b=e.setMenuOpened,v=e.videoID,S=n===void 0?!1:n,R=a===void 0?null:a,L=_(!1),E=L[0],k=L[1],I=p((c||(c=o("VideoPlayerContexts"))).DisableDubbingContext),T;t[0]===Symbol.for("react.memo_cache_sentinel")?(T=s._(/*BTDS*/"Settings"),t[0]=T):T=t[0];var D=T,x=b!=null;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_settings_menu",x?g===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:E,y);var $=x?g===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:E,P;t[1]!==S?(P={0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[(S===!0)<<0],t[1]=S,t[2]=P):P=t[2];var N;t[3]!==S||t[4]!==R||t[5]!==i||t[6]!==I||t[7]!==l||t[8]!==m||t[9]!==x||t[10]!==$||t[11]!==b||t[12]!==v?(N=$&&d.jsx("div",babelHelpers.extends({},{0:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x1fwd5yv"},2:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk xwjie4w"},1:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"},3:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"}}[(i===!0)<<1|(S===!0)<<0],{children:d.jsx(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenu,{disableDubbing:I,dubTrackMapping:l,forceShowPlaybackRateControl:m,onClose:function(){x?b!=null&&b(null):k(!1)},videoID:v!=null?v:null,children:R})})),t[3]=S,t[4]=R,t[5]=i,t[6]=I,t[7]=l,t[8]=m,t[9]=x,t[10]=$,t[11]=b,t[12]=v,t[13]=N):N=t[13];var M;t[14]!==f?(M=f==null?o("fbicon")._(u("497567"),20):f,t[14]=f,t[15]=M):M=t[15];var w;t[16]!==x||t[17]!==$||t[18]!==E||t[19]!==h||t[20]!==b?(w=function(){x?b!=null&&b($?null:o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU):k(!E),!$&&h!=null&&h()},t[16]=x,t[17]=$,t[18]=E,t[19]=h,t[20]=b,t[21]=w):w=t[21];var A;t[22]!==M||t[23]!==w?(A=d.jsx(r("VideoPlayerControlIcon.react"),{icon:M,label:D,onPress:w,tooltip:D}),t[22]=M,t[23]=w,t[24]=A):A=t[24];var F;return t[25]!==C||t[26]!==P||t[27]!==N||t[28]!==A?(F=d.jsxs("div",babelHelpers.extends({},P,{ref:C,children:[N,A]})),t[25]=C,t[26]=P,t[27]=N,t[28]=A,t[29]=F):F=t[29],F}f.displayName="VideoPlayerSettingsControl",l.default=f}),226);
__d("VideoPlayerWatchAndScrollControl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWatchAndScrollControl_video",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null}],type:"VideoOwner",abstractKey:"__isVideoOwner"},e],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_huddle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Video",abstractKey:null}})();a.exports=e}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29450006731309811"}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery.graphql",["useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{kind:"Literal",name:"nux_id",value:9347}],t={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[t],storageKey:"nux(nux_id:9347)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:"nux(nux_id:9347)"}]},params:{id:n("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"),metadata:{},name:"useVideoPlayerWatchAndScrollControlNUXQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useVideoPlayerWatchAndScrollControlNUX",["fbt","CometRelay","CometWatchAndScrollTriggerContext","FBLogger","react","react-compiler-runtime","requireDeferred","useFDSCallout","useVideoPlayerWatchAndScrollControlNUXQuery.graphql"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useState,f=r("requireDeferred")("CometDismissFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),g=r("requireDeferred")("CometLogImpressionFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),h={nux:{maxWidth:"xw5ewwj",$$css:!0}},y=9347,C=e!==void 0?e:e=n("useVideoPlayerWatchAndScrollControlNUXQuery.graphql");function b(e){var t=o("react-compiler-runtime").c(19),n=m(r("CometWatchAndScrollTriggerContext")),a=n.setIsTriggerDisabled,i=_(null),l=i[0],u=i[1],c=o("CometRelay").useRelayEnvironment(),d;t[0]!==c||t[1]!==a?(d=function(){a!=null&&a(!0),u(!1),f.onReady(function(e){e.commit(c,y)})},t[0]=c,t[1]=a,t[2]=d):d=t[2];var b=d,R,L;t[3]!==e||t[4]!==c||t[5]!==l?(R=function(){if(e&&l===null){var t=o("CometRelay").fetchQuery(c,C,{fetchPolicy:"store-or-network"}).subscribe({next:function(n){var t,r=(n==null||(t=n.nux)==null?void 0:t.should_show)||!1;u(r),r&&e&&g.onReady(function(e){e.commit(c,y,S,v)})}});return function(){t.unsubscribe()}}},L=[c,e,l],t[3]=e,t[4]=c,t[5]=l,t[6]=R,t[7]=L):(R=t[6],L=t[7]),p(R,L);var E;t[8]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"Watch and scroll feature tooltip"),t[8]=E):E=t[8];var k;t[9]===Symbol.for("react.memo_cache_sentinel")?(k=s._(/*BTDS*/"Continue watching while you browse Facebook."),t[9]=k):k=t[9];var I;t[10]!==b?(I=function(){b()},t[10]=b,t[11]=I):I=t[11];var T;t[12]===Symbol.for("react.memo_cache_sentinel")?(T=function(){u(!1)},t[12]=T):T=t[12];var D;t[13]!==I?(D={align:"end","aria-label":E,arrowStyle:"inset",content:k,disableAutoFlip:!0,hasCloseButton:!0,onClose:I,onHide:T,position:"below",type:"accent",xstyle:h.nux},t[13]=I,t[14]=D):D=t[14];var x=r("useFDSCallout")(D,l===!0&&e||!1),$=x.anchorRef,P;return t[15]!==$||t[16]!==b||t[17]!==l?(P={handleDismissNUX:b,nuxRef:$,shouldShowNUX:l},t[15]=$,t[16]=b,t[17]=l,t[18]=P):P=t[18],P}function v(){r("FBLogger")("watch_www_and_off_platform").mustfix("logimpression fb nux mutation failed for video player watch and scroll control.")}function S(){}l.default=b}),226);
__d("VideoPlayerWatchAndScrollControl.react",["fbt","ix","CastingStateHooks","CometPictureInPictureExpContext","CometRelay","CometRouteRenderType","CometVideoPictureInPictureManager.react","CometVideoPictureInPictureManagerContext","CometWatchAndScrollControlNUXContext","CometWatchAndScrollTriggerContext","JSResourceForInteraction","StoryAttachmentContext","VideoPlayerControlIcon.react","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerWatchAndScrollControl_video.graphql","VideoPlayerWithWatchAndScrollTrigger.react","emptyFunction","fbicon","gkx","react","react-compiler-runtime","requireDeferred","useCometLazyDialog","useCometRouterDispatcher","useCometRouterState","useIsVideoHomePlayerOriginFromTracePolicy","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerWatchAndScrollControlNUX","useWatchAndScrollTrigger"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m=c||(c=o("react")),p=c,_=p.useCallback,f=p.useContext,g=p.useEffect,h=p.useState,y=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerWatchAndScrollControl.react"),C=r("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerWatchAndScrollControl.react"),b=6e4,v=window.document.pictureInPictureEnabled;function S(t){var a,i,l,c,p=o("react-compiler-runtime").c(56),_=t.subOrigin,S=t.video,R=f(r("CometWatchAndScrollTriggerContext")),L=R.isControlShown,E=R.setIsControlShown,k=o("CometRouteRenderType").useIsPushView(),I=(d||(d=o("VideoPlayerHooks"))).useIsFullscreen(),T=r("useCometRouterDispatcher")(),D=r("useCometRouterState")(),x=(a=D==null?void 0:D.main.route.tabKey)!=null?a:"undefined",$=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerWatchAndScrollControl_video.graphql"),S),P=$==null?void 0:$.id,N=(i=$==null?void 0:$.playable_duration_in_ms)!=null?i:0,M=$==null?void 0:$.is_huddle,w=$==null?void 0:$.url,A,F;p[0]!==E?(A=function(){E!=null&&E(!0)},F=[E],p[0]=E,p[1]=A,p[2]=F):(A=p[1],F=p[2]),g(A,F);var O=r("usePlayerOriginRouteTracePolicy")(),B=r("useIsVideoHomePlayerOriginFromTracePolicy")(O),W=($==null||(l=$.owner)==null?void 0:l.has_professional_features_for_watch)===!0&&N>=b&&L&&!B,q=d.usePlaying(),U=d.useController(),V=d.useCurrentTimeThrottled(200),H=V>=10,G=h(!1),z=G[0],j=G[1],K=h(!1),Q=K[0],X=K[1],Y=h(!1),J=Y[0],Z=Y[1],ee=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsStateValue(),te=ee==="STARTING_INDICATOR"||ee==="PLAY_NI_VIDEO"||ee==="START_AD"||ee==="PLAY_LONGER_AD",ne=r("useMinifiedProductAttribution")(),re,oe;p[3]!==H||p[4]!==q?(re=function(){q&&H&&j(!0)},oe=[H,q],p[3]=H,p[4]=q,p[5]=re,p[6]=oe):(re=p[5],oe=p[6]),g(re,oe);var ae=o("CastingStateHooks").useIsCastingAnyVideo(),ie=r("useCometLazyDialog")(C),le=ie[0],se=!te&&z&&W,ue=r("useVideoPlayerWatchAndScrollControlNUX")(se),ce=ue.handleDismissNUX,de=ue.nuxRef,me=ue.shouldShowNUX,pe=me===!0&&se,_e=f(r("CometWatchAndScrollControlNUXContext")),fe=_e.setIsVideoPlayerWatchAndScrollControlNUXVisible,ge=f(r("CometPictureInPictureExpContext")),he,ye;p[7]!==pe||p[8]!==fe?(he=function(){fe&&fe(pe)},ye=[pe,fe],p[7]=pe,p[8]=fe,p[9]=he,p[10]=ye):(he=p[9],ye=p[10]),g(he,ye);var Ce=o("StoryAttachmentContext").useStoryAttachmentContext(),be=Ce.videoPlayerSessionID,ve=o("useWatchAndScrollTrigger").useWatchAndScrollTrigger(_,o("VideoPlayerWithWatchAndScrollTrigger.react").WatchAndScrollTriggerType.WNS_CONTROL,P,w,be),Se=d.useIsPremiumMusicVideo(),Re=$==null||(c=$.owner)==null?void 0:c.id,Le;p[11]!==Se||p[12]!==Re||p[13]!==ge?(Le=function(){var e=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp(),t=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExpControlGroup();ge.setPictureInPictureExpConfig({isInPictureInPictureExp:e,isInPictureInPictureExpControlGroup:t,isSkipAndChainingDisabled:!1}),v&&e&&X(!0);var n=(e||t)&&(Se||o("CometVideoPictureInPictureManager.react").EXCLUDED_PROVIDERS.includes(Re));n&&Z(!0)},p[11]=Se,p[12]=Re,p[13]=ge,p[14]=Le):Le=p[14];var Ee=Le,ke=O==="comet.videos.tahoe",Ie;p[15]!==ae||p[16]!==ve||p[17]!==le||p[18]!==P?(Ie=function(){ae&&P!=null?le({onClose:r("emptyFunction"),onContinue:ve,startingVideoType:"wns"},r("emptyFunction")):ve()},p[15]=ae,p[16]=ve,p[17]=le,p[18]=P,p[19]=Ie):Ie=p[19];var Te=Ie,De;p[20]!==U||p[21]!==T||p[22]!==ce||p[23]!==Q||p[24]!==pe||p[25]!==Te||p[26]!==ne||p[27]!==O||p[28]!==_||p[29]!==x?(De=function(){Te(),Q?(y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_picture_in_picture",event:"click",event_target_info:O,player_suborigin:_})}),U.requestPictureInPicture()):y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_watch_and_scroll",event:"click",event_target_info:x})}),pe===!0&&ce(),T&&T.popPushView()},p[20]=U,p[21]=T,p[22]=ce,p[23]=Q,p[24]=pe,p[25]=Te,p[26]=ne,p[27]=O,p[28]=_,p[29]=x,p[30]=De):De=p[30];var xe=De,$e=_==="live_producer",Pe;p[31]!==U||p[32]!==T||p[33]!==ke||p[34]!==ce||p[35]!==Q||p[36]!==I||p[37]!==pe||p[38]!==Te||p[39]!==ne||p[40]!==$e||p[41]!==O||p[42]!==_||p[43]!==x?(Pe=function(){Te(),Q?(y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_picture_in_picture",event:"click",event_target_info:O,player_suborigin:_})}),U.requestPictureInPicture()):y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_watch_and_scroll",event:"click",event_target_info:x})}),pe===!0&&ce(),I&&U.requestSetIsFullscreen(!1),T!=null&&($e||ke)&&T.go("/",{})},p[31]=U,p[32]=T,p[33]=ke,p[34]=ce,p[35]=Q,p[36]=I,p[37]=pe,p[38]=Te,p[39]=ne,p[40]=$e,p[41]=O,p[42]=_,p[43]=x,p[44]=Pe):Pe=p[44];var Ne=Pe,Me=k?xe:Ne,we;if(r("gkx")("20836")){var Ae;p[45]===Symbol.for("react.memo_cache_sentinel")?(Ae=s._(/*BTDS*/"Continue watching while you use Workplace"),p[45]=Ae):Ae=p[45],we=Ae}else if(M===!0){var Fe;p[46]===Symbol.for("react.memo_cache_sentinel")?(Fe=s._(/*BTDS*/"Continue listening while you browse Facebook."),p[46]=Fe):Fe=p[46],we=Fe}else{var Oe;p[47]===Symbol.for("react.memo_cache_sentinel")?(Oe=s._(/*BTDS*/"Continue watching while you browse Facebook."),p[47]=Oe):Oe=p[47],we=Oe}if(Q){var Be;p[48]===Symbol.for("react.memo_cache_sentinel")?(Be=s._(/*BTDS*/"Enter Picture in Picture Mode"),p[48]=Be):Be=p[48],we=Be}var We;return p[49]!==J||p[50]!==pe||p[51]!==we||p[52]!==de||p[53]!==Ee||p[54]!==Me?(We=J?null:m.jsx("div",{onMouseEnter:Ee,ref:de,children:m.jsx(r("VideoPlayerControlIcon.react"),{color:"white",icon:o("fbicon")._(u("150489"),20),label:we,onPress:Me,tooltip:pe?null:we})}),p[49]=J,p[50]=pe,p[51]=we,p[52]=de,p[53]=Ee,p[54]=Me,p[55]=We):We=p[55],We}l.default=S}),226);
__d("VideoPlayerLiveVideoControls.react",["CometPlaceholder.react","CometRelay","CometTahoeCustomVideoAreaContext","CometTahoeSidePaneContext","CometTrackingNodeProvider.react","LiveCostreamerTagSubscription.react","LiveVideoLatencyMenu.react","VideoPlayerCaptionsControl.react","VideoPlayerCastControlShim.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerLiveVideoControls_video.graphql","VideoPlayerPlaybackControl.react","VideoPlayerQuietModeControl.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","react-compiler-runtime","useVideoPlayerBigPlayButtonOverlay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useContext,p=d.useState,_=e!==void 0?e:e=n("VideoPlayerLiveVideoControls_video.graphql");function f(e){var t,n,a=o("react-compiler-runtime").c(85),l=o("CometRelay").useFragment(_,e.video),s=(u||(u=o("VideoPlayerHooks"))).useEnded(),d=u.useIsFullscreen(),f=m(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),g=m(r("CometTahoeSidePaneContext")),h=g.rightRailHidden,y=r("useVideoPlayerBigPlayButtonOverlay")(),C=y.bigPlayButtonIsVisible,b=u.useCaptionsLoaded(),v=u.useCaptionsVisible(),S=p(null),R=S[0],L=S[1],E=m(o("CometTahoeCustomVideoAreaContext").CometTahoeCustomVideoAreaContext),k=E.customVideoAreaHidden;if(s)return null;var I=e.disablePlaybackControls,T=e.expandControl,D=e.isControlsVisible,x=e.isExpandControlVisible,$=e.isVolumeControlVisible,P=e.isWatchAndScrollControlVisible,N=e.onUserInteraction,M=e.shouldRenderCaptionsControl,w=e.shouldRenderCostreamControl,A=e.shouldRenderModeratorControl,F=e.subOrigin,O=x===void 0?!1:x,B=P===void 0?!1:P,W=M===void 0?!0:M,q=w===void 0?!1:w,U=A===void 0?!1:A,V=l==null?void 0:l.id,H=l==null||(t=l.owner)==null?void 0:t.id,G=l==null?void 0:l.if_viewer_can_see_costreaming_tools,z=G!=null,j=l==null?void 0:l.if_viewer_can_use_clipping,K=(l==null?void 0:l.is_clipping_enabled)===!0,Q=l==null?void 0:l.if_viewer_can_see_community_moderation_tools,X=Q!=null,Y=l==null?void 0:l.if_viewer_can_use_live_rewind,J=((n=l==null?void 0:l.live_rewind_enabled)!=null?n:!1)&&e.shouldHideRewindControls!==!0,Z=O||D||I===!0&&!C,ee=B||D||I===!0&&!C,te;a[0]!==T||a[1]!==Z?(te=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:Z,noPaddingEnd:!0,noPaddingStart:!0,children:T}),a[0]=T,a[1]=Z,a[2]=te):te=a[2];var ne=te,re;a[3]!==e.shouldRenderWatchAndScrollControl||a[4]!==ee||a[5]!==F||a[6]!==l?(re=e.shouldRenderWatchAndScrollControl===!0&&F!=null&&l!=null?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:ee,children:c.jsx(r("VideoPlayerWatchAndScrollControl.react"),{subOrigin:F,video:l})}):null,a[3]=e.shouldRenderWatchAndScrollControl,a[4]=ee,a[5]=F,a[6]=l,a[7]=re):re=a[7];var oe=re,ae=F==="watch_scroll",ie=r("gkx")("24335")?W===!0:!ae,le;a[8]!==Y||a[9]!==I||a[10]!==D||a[11]!==J||a[12]!==N||a[13]!==e.shouldRenderPauseControl?(le=J?c.jsx(o("CometRelay").MatchContainer,{match:Y,props:{isControlsVisible:D&&!I,onUserInteraction:N,video:Y}}):c.jsxs(c.Fragment,{children:[e.shouldRenderPauseControl?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D&&!I,children:c.jsx(r("VideoPlayerPlaybackControl.react"),{})}):null,c.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:c.jsx(c.Fragment,{})})]}),a[8]=Y,a[9]=I,a[10]=D,a[11]=J,a[12]=N,a[13]=e.shouldRenderPauseControl,a[14]=le):le=a[14];var se;a[15]!==H||a[16]!==V?(se=H!=null&&V!=null&&c.jsx(r("LiveCostreamerTagSubscription.react"),{pageID:H,videoID:V}),a[15]=H,a[16]=V,a[17]=se):se=a[17];var ue;a[18]!==z||a[19]!==G||a[20]!==d||a[21]!==q||a[22]!==V?(ue=z&&q&&V!=null&&!d&&c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(o("CometRelay").MatchContainer,{match:G,props:{video:G}})}),a[18]=z,a[19]=G,a[20]=d,a[21]=q,a[22]=V,a[23]=ue):ue=a[23];var ce;a[24]!==d||a[25]!==e.shouldRenderQuietModeControl?(ce=e.shouldRenderQuietModeControl===!0&&!d&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:!0,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerQuietModeControl.react"),{})}),a[24]=d,a[25]=e.shouldRenderQuietModeControl,a[26]=ce):ce=a[26];var de;a[27]!==d||a[28]!==e.shouldRenderExpandSidePanelControl||a[29]!==h?(de=e.shouldRenderExpandSidePanelControl===!0&&!d&&!h&&c.jsx(r("VideoPlayerExpandSidePanelControl.react"),{}),a[27]=d,a[28]=e.shouldRenderExpandSidePanelControl,a[29]=h,a[30]=de):de=a[30];var me;a[31]!==j||a[32]!==K||a[33]!==V?(me=K&&V!=null&&c.jsx(o("CometRelay").MatchContainer,{match:j,props:{video:j,videoID:V}}),a[31]=j,a[32]=K,a[33]=V,a[34]=me):me=a[34];var pe;a[35]!==X||a[36]!==Q||a[37]!==U||a[38]!==V?(pe=X&&U?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(o("CometRelay").MatchContainer,{match:Q,props:{video:Q,videoID:V}})}):null,a[35]=X,a[36]=Q,a[37]=U,a[38]=V,a[39]=pe):pe=a[39];var _e;a[40]!==f||a[41]!==I||a[42]!==R||a[43]!==N||a[44]!==l?(_e=I===!0?null:c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:257,children:c.jsx(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContextProvider,{video:l,children:c.jsx(r("VideoPlayerSettingsControl.react"),{alignMenuToIcon:(f==null?void 0:f.getBottomRowAddOn())!=null,menuOpened:R,onUserInteraction:N,setMenuOpened:L})})}),a[40]=f,a[41]=I,a[42]=R,a[43]=N,a[44]=l,a[45]=_e):_e=a[45];var fe;a[46]!==f||a[47]!==b||a[48]!==v||a[49]!==ie||a[50]!==D||a[51]!==R||a[52]!==N||a[53]!==l?(fe=b&&ie?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D,children:c.jsx(r("VideoPlayerCaptionsControl.react"),{alignMenuToIcon:(f==null?void 0:f.getBottomRowAddOn())!=null,captionsVisible:v,menuOpened:R,onUserInteraction:N,setMenuOpened:L,video:l})}):null,a[46]=f,a[47]=b,a[48]=v,a[49]=ie,a[50]=D,a[51]=R,a[52]=N,a[53]=l,a[54]=fe):fe=a[54];var ge;a[55]!==I||a[56]!==D||a[57]!==e.shouldRenderCastControl||a[58]!==F||a[59]!==l?(ge=e.shouldRenderCastControl===!0&&F!=null&&l!=null?c.jsx(r("VideoPlayerCastControlShim.react"),{isVisible:D&&!I,subOrigin:F}):null,a[55]=I,a[56]=D,a[57]=e.shouldRenderCastControl,a[58]=F,a[59]=l,a[60]=ge):ge=a[60];var he;a[61]!==D||a[62]!==ce||a[63]!==de||a[64]!==me||a[65]!==pe||a[66]!==_e||a[67]!==fe||a[68]!==ge||a[69]!==se||a[70]!==ue?(he=c.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D,children:[se,ue,ce,de,me,pe,_e,fe,ge]}),a[61]=D,a[62]=ce,a[63]=de,a[64]=me,a[65]=pe,a[66]=_e,a[67]=fe,a[68]=ge,a[69]=se,a[70]=ue,a[71]=he):he=a[71];var ye;a[72]!==N?(ye=c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:114,children:c.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:N})}),a[72]=N,a[73]=ye):ye=a[73];var Ce;a[74]!==$||a[75]!==ye?(Ce=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:$,noPaddingStart:!0,children:ye}),a[74]=$,a[75]=ye,a[76]=Ce):Ce=a[76];var be;return a[77]!==k||a[78]!==ne||a[79]!==D||a[80]!==he||a[81]!==Ce||a[82]!==le||a[83]!==oe?(be=c.jsxs(r("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:D,isVisible:k,children:[le,he,ne,oe,Ce]}),a[77]=k,a[78]=ne,a[79]=D,a[80]=he,a[81]=Ce,a[82]=le,a[83]=oe,a[84]=be):be=a[84],be}function g(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(f,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}l.default=g}),98);
__d("VideoPlayerDefaultControlsImplLive.react",["CometRelay","VideoPlayerDefaultControlsImplLive_video.graphql","VideoPlayerLiveVideoControls.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(17),i=t.expandControl,l=t.isControlsVisible,s=t.isVolumeControlVisible,c=t.onUserInteraction,d=t.pictureInPictureControl,m=t.shouldHideRewindControls,p=t.shouldRenderCaptionsControl,_=t.shouldRenderCostreamControl,f=t.shouldRenderExpandSidePanelControl,g=t.shouldRenderModeratorControl,h=t.shouldRenderPauseControl,y=t.shouldRenderQuietModeControl,C=t.shouldRenderWatchAndScrollControl,b=t.subOrigin,v=t.video,S=t.videoTahoeUrl,R=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerDefaultControlsImplLive_video.graphql"),v),L;return a[0]!==i||a[1]!==l||a[2]!==s||a[3]!==c||a[4]!==d||a[5]!==m||a[6]!==p||a[7]!==_||a[8]!==f||a[9]!==g||a[10]!==h||a[11]!==y||a[12]!==C||a[13]!==b||a[14]!==R||a[15]!==S?(L=u.jsx(r("VideoPlayerLiveVideoControls.react"),{expandControl:i,isControlsVisible:l,isVolumeControlVisible:s,onUserInteraction:c,pictureInPictureControl:d,shouldHideRewindControls:m,shouldRenderCaptionsControl:p,shouldRenderCostreamControl:_,shouldRenderExpandSidePanelControl:f,shouldRenderModeratorControl:g,shouldRenderPauseControl:h,shouldRenderQuietModeControl:y,shouldRenderWatchAndScrollControl:C,subOrigin:b,video:R,videoTahoeUrl:S}),a[0]=i,a[1]=l,a[2]=s,a[3]=c,a[4]=d,a[5]=m,a[6]=p,a[7]=_,a[8]=f,a[9]=g,a[10]=h,a[11]=y,a[12]=C,a[13]=b,a[14]=R,a[15]=S,a[16]=L):L=a[16],L}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplNotLive_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControlsImplNotLive_video",selections:[{fragment:{kind:"InlineFragment",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubtrackMapping"}]}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"CometAudioLanguageUtils_dubtrackMapping"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberWithPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerDefaultControlsImplNotLive_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberWithPreview_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberWithPreview_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberRenderer_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberWithPreview.react",["CometRelay","VideoPlayerScrubber.react","VideoPlayerScrubberPreview.react","VideoPlayerScrubberRenderer.react","VideoPlayerScrubberWithPreview_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.onUserInteraction,l=t.timelinePlayedXStyle,s=t.video,c=t.videoChapters,d=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberWithPreview_video.graphql"),s),m;a[0]!==l||a[1]!==d||a[2]!==c?(m=function(t){return u.jsx(r("VideoPlayerScrubberRenderer.react"),{scrubberProps:babelHelpers.extends({},t,{timelinePlayedXStyle:l}),video:d,videoChapters:c})},a[0]=l,a[1]=d,a[2]=c,a[3]=m):m=a[3];var p;a[4]!==d||a[5]!==c?(p=function(t){return u.jsx(r("VideoPlayerScrubberPreview.react"),{timestampSec:t,video:d,videoChapters:c})},a[4]=d,a[5]=c,a[6]=p):p=a[6];var _;return a[7]!==i||a[8]!==m||a[9]!==p?(_=u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:i,renderScrubber:m,renderTooltip:p}),a[7]=i,a[8]=m,a[9]=p,a[10]=_):_=a[10],_}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplNotLive.react",["CometAudioLanguageUtils","CometRelay","CometTahoeSidePaneContext","VideoPlayerCaptionsControl.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerDefaultControlsImplNotLive_video.graphql","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerQuietModeControl.react","VideoPlayerScrubberWithPreview.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","react-compiler-runtime","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useContext,p=d.useState;function _(t){var a,i=o("react-compiler-runtime").c(70),l=t.availableCaptionsLocales,s=t.expandControl,d=t.initialCaptionsUrl,_=t.isControlsVisible,f=t.isVolumeControlVisible,g=t.onUserInteraction,h=t.scrubberTimelinePlayedXStyle,y=t.shouldRenderCaptionsControl,C=t.shouldRenderExpandSidePanelControl,b=t.shouldRenderQuietModeControl,v=t.shouldRenderWatchAndScrollControl,S=t.skipControl,R=t.subOrigin,L=t.video,E=t.videoChapters,k=y===void 0?!0:y,I=C===void 0?!1:C,T=b===void 0?!1:b,D=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerDefaultControlsImplNotLive_video.graphql"),L),x=(u||(u=o("VideoPlayerHooks"))).useIsFullscreen(),$=o("CometAudioLanguageUtils").useGetDubTrackMapping(D==null?void 0:D.CometAudioLanguageUtils_dubtrackMapping),P=D==null?void 0:D.id,N=D==null?void 0:D.if_viewer_can_use_clipping,M=m(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),w=m(r("CometTahoeSidePaneContext")),A=w.rightRailHidden,F;i[0]!==_||i[1]!==x||i[2]!==T?(F=T===!0&&!x?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerQuietModeControl.react"),{})}):null,i[0]=_,i[1]=x,i[2]=T,i[3]=F):F=i[3];var O=F,B;i[4]!==_||i[5]!==x||i[6]!==A||i[7]!==I?(B=I===!0&&!x&&!A&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerExpandSidePanelControl.react"),{})}),i[4]=_,i[5]=x,i[6]=A,i[7]=I,i[8]=B):B=i[8];var W=B,q;i[9]!==N||i[10]!==_||i[11]!==O||i[12]!==P?(q=N!=null&&P!=null&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,noPaddingStart:O!=null,children:c.jsx(o("CometRelay").MatchContainer,{match:N,props:{video:N,videoID:P}})}),i[9]=N,i[10]=_,i[11]=O,i[12]=P,i[13]=q):q=i[13];var U=q,V=p(null),H=V[0],G=V[1],z=O!=null||U!=null,j=(M==null?void 0:M.getBottomRowAddOn())!=null,K;i[14]!==$||i[15]!==H||i[16]!==g||i[17]!==j?(K=c.jsx(r("VideoPlayerSettingsControl.react"),{alignMenuToIcon:j,dubTrackMapping:$,menuOpened:H,onUserInteraction:g,setMenuOpened:G}),i[14]=$,i[15]=H,i[16]=g,i[17]=j,i[18]=K):K=i[18];var Q;i[19]!==_||i[20]!==z||i[21]!==K?(Q=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,noPaddingStart:z,children:K}),i[19]=_,i[20]=z,i[21]=K,i[22]=Q):Q=i[22];var X=Q,Y;i[23]!==_||i[24]!==v||i[25]!==R||i[26]!==D?(Y=v===!0&&R!=null&&D!=null?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:c.jsx(r("VideoPlayerWatchAndScrollControl.react"),{subOrigin:R,video:D})}):null,i[23]=_,i[24]=v,i[25]=R,i[26]=D,i[27]=Y):Y=i[27];var J=Y,Z;i[28]!==s||i[29]!==_?(Z=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:s}),i[28]=s,i[29]=_,i[30]=Z):Z=i[30];var ee=Z,te;i[31]!==g?(te=c.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:g}),i[31]=g,i[32]=te):te=i[32];var ne;i[33]!==f||i[34]!==te?(ne=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:f,noPaddingStart:!0,children:te}),i[33]=f,i[34]=te,i[35]=ne):ne=i[35];var re=ne,oe;i[36]!==g||i[37]!==h||i[38]!==D||i[39]!==E?(oe=c.jsx(r("VideoPlayerScrubberWithPreview.react"),{onUserInteraction:g,timelinePlayedXStyle:h,video:D,videoChapters:E}),i[36]=g,i[37]=h,i[38]=D,i[39]=E,i[40]=oe):oe=i[40];var ae;i[41]!==_||i[42]!==oe?(ae=c.jsx(o("VideoPlayerControlsGroups.react").Expanded,{isVisible:_,children:oe}),i[41]=_,i[42]=oe,i[43]=ae):ae=i[43];var ie=ae,le;i[44]===Symbol.for("react.memo_cache_sentinel")?(le=c.jsx(r("VideoPlayerPlaybackControl.react"),{}),i[44]=le):le=i[44];var se;i[45]===Symbol.for("react.memo_cache_sentinel")?(se=c.jsx(r("VideoPlayerPlaybackTimer.react"),{}),i[45]=se):se=i[45];var ue;i[46]!==_||i[47]!==S?(ue=c.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:[le,S,se]}),i[46]=_,i[47]=S,i[48]=ue):ue=i[48];var ce=ue,de=r("gkx")("21034")?!1:r("gkx")("24335")?k===!0:R!=="watch_scroll",me=u.useCaptionsLoaded(),pe=u.useCaptionsVisible(),_e=r("useVideoPlayerAvailableCaptionsLocalesFromRelay")(D),fe=l!=null?l:_e,ge=me||((a=fe==null?void 0:fe.length)!=null?a:0)>0,he=de&&ge,ye;i[49]!==fe||i[50]!==pe||i[51]!==d||i[52]!==_||i[53]!==H||i[54]!==g||i[55]!==he||i[56]!==D?(ye=he?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:c.jsx(r("VideoPlayerCaptionsControl.react"),{availableCaptionsLocales:fe,captionsVisible:pe,initialCaptionsUrl:d,menuOpened:H,onUserInteraction:g,setMenuOpened:G,video:D})}):null,i[49]=fe,i[50]=pe,i[51]=d,i[52]=_,i[53]=H,i[54]=g,i[55]=he,i[56]=D,i[57]=ye):ye=i[57];var Ce=ye,be;return i[58]!==Ce||i[59]!==U||i[60]!==W||i[61]!==_||i[62]!==ce||i[63]!==O||i[64]!==ee||i[65]!==ie||i[66]!==X||i[67]!==re||i[68]!==J?(be=c.jsxs(r("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:_,children:[ce,ie,O,W,U,X,Ce,J,ee,null,re]}),i[58]=Ce,i[59]=U,i[60]=W,i[61]=_,i[62]=ce,i[63]=O,i[64]=ee,i[65]=ie,i[66]=X,i[67]=re,i[68]=J,i[69]=be):be=i[69],be}l.default=_}),98);
__d("VideoPlayerSettingsMenuAudioTrackPaneToggle.react",["ix","CometImage.react","CometPressable.react","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={pressableOption:{width:"xh8yej3",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(30),n=e.setPane,a=e.targetAudioTrack,i,l,d,m,p,_,f,g;if(t[0]!==n||t[1]!==(a==null?void 0:a.lang)||t[2]!==(a==null?void 0:a.role)){var h=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),a==null?void 0:a.lang);i=r("CometPressable.react"),t[11]!==n?(p=function(){n(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.AUDIO)},t[11]=n,t[12]=p):p=t[12],_="VideoPlayerSettingsMenu/mainPaneAudioTrackItem",f=c.pressableOption,t[13]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx("div",{className:"x1ypdohk x1s688f",children:o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_MENU_ITEM}),m={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j xn80e1m"},t[13]=m,t[14]=g):(m=t[13],g=t[14]),l="VideoPlayerSettingsMenu/mainPaneAudioTrackItemLabelManuallySelected",d=(a==null?void 0:a.role)===null?o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_OFF:(a==null?void 0:a.role)==="dub"&&h!=null?o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(h):null,t[0]=n,t[1]=a==null?void 0:a.lang,t[2]=a==null?void 0:a.role,t[3]=i,t[4]=l,t[5]=d,t[6]=m,t[7]=p,t[8]=_,t[9]=f,t[10]=g}else i=t[3],l=t[4],d=t[5],m=t[6],p=t[7],_=t[8],f=t[9],g=t[10];var y;t[15]!==l||t[16]!==d?(y=u.jsx("span",{"data-testid":void 0,children:d}),t[15]=l,t[16]=d,t[17]=y):y=t[17];var C;t[18]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x3nfvp2 xmgb6t1 xwklpps"},t[18]=C):C=t[18];var b;t[19]===Symbol.for("react.memo_cache_sentinel")?(b=u.jsx("span",babelHelpers.extends({},C,{children:u.jsx(r("CometImage.react"),{src:s("480587")})})),t[19]=b):b=t[19];var v;t[20]!==m||t[21]!==y?(v=u.jsxs("div",babelHelpers.extends({},m,{children:[y,b]})),t[20]=m,t[21]=y,t[22]=v):v=t[22];var S;return t[23]!==i||t[24]!==v||t[25]!==p||t[26]!==_||t[27]!==f||t[28]!==g?(S=u.jsxs(i,{onPress:p,testid:void 0,xstyle:f,children:[g,v]}),t[23]=i,t[24]=v,t[25]=p,t[26]=_,t[27]=f,t[28]=g,t[29]=S):S=t[29],S}l.default=d}),98);/*FB_PKG_DELIM*/
__d("EBLSResignCdnUrlDeferred",["gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function s(t){return e.load().then(function(e){return r("gkx")("12896")?e.resignCdnUrlUsingEbdb(t):e.DEPRECATED_eblsResignCdnUrlWithGraphQL(t)})}l.eblsResignCdnUrlWithGraphQL=s}),98);
__d("EncryptedBackupsDYIFileUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="media",s="messages.zip";function u(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw r("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}async function c(){var t=await u();return t.getDirectoryHandle(e,{create:!0})}async function d(e,t,n){var o=await e.getFileHandle(t,{create:!0});try{var a=await o.createSyncAccessHandle();a.write(n),a.flush(),a.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{var i=await o.createWritable();await i.write(n),await i.close();return}catch(e){throw e instanceof Error?e instanceof TypeError?r("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers."):r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",e.message):e}throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}}async function m(e,t){var n=await e.getFileHandle(t);try{var o=await n.createSyncAccessHandle(),a=new ArrayBuffer(o.getSize());return o.read(a),o.close(),new Blob([a])}catch(e){if(e instanceof Error){if(e instanceof TypeError)return n.getFile();throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",t,e.message)}throw e}}l.DyiMediaFolder=e,l.DyiArchiveFilename=s,l.getRootFolderHandle=u,l.getMediaFolderHandle=c,l.writeFile=d,l.readFile=m}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).to_string(t)}function u(e){return e}function c(e){return r("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc="),e}function d(t){return(e||(e=o("I64"))).of_string(t)}function m(e){return e}l.stringThreadKeyFromThreadKey=s,l.toStringThreadKey=u,l.stringThreadKeyFromString=c,l.stringThreadKeyToI64=d,l.stringThreadKeyToString=m}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){return o("IGDWebUtils").isOnInstagramWeb()?(u||(u=o("I64"))).of_string(r("CurrentUser").getEIMU()):(u||(u=o("I64"))).of_string(r("CurrentUser").getAccountID())}function d(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(o("MAWThreadKeyUtils").stringThreadKeyToI64(t)))}function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t))}function p(e,t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts).filter(function(e){return t.has((u||(u=o("I64"))).to_string(e.id))}))}function _(e,t){var n;return(n=o("ReQL")).toArrayAsync(n.leftJoin(n.fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(t),n.fromTableAscending(e.tables.contacts,["name"])))}function f(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e)||o("LSMessagingThreadTypeUtil").isOpenOneToOne(e)}function g(e,t,n){if(n!=null&&n.trim()!=="")return n+"_"+t;switch(e.length){case 0:return"Thread_"+t;case 1:return e[0]+"_"+t;case 2:return e[0]+"and"+e[1]+"_"+t;case 3:return""+e[0]+e[1]+"and"+e[2]+"_"+t;case 4:return""+e[0]+e[1]+e[2]+"and1other_"+t;default:return""+e[0]+e[1]+e[2]+"and"+(e.length-3)+"others_"+t}}async function h(t,n,r,a,i,l){var s=[],c=[i],p=await d(r,t);if(p!=null)if(f(p.threadType)){var h=n.getThreadIdForThreadKey(t);if(h==null){n.getLogger().WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t);return}var y=await m(r,(u||(u=o("I64"))).of_string(h));(y==null?void 0:y.id)!=null&&(y==null?void 0:y.name)!=null&&n.setContactNameForContactId((u||(u=o("I64"))).to_string(y.id),y.name);var C=(y==null?void 0:y.name)||"Unknown User";s.push(C),c.push(C),n.setThreadMetaDataByThreadKey(t,c,g(s,l,p.threadName))}else{var b=await _(r,p.threadKey);b.forEach(function(e){var t=e[0],r=e[1];if((t==null?void 0:t.contactId)!=null&&(r==null?void 0:r.name)!=null&&n.setContactNameForContactId((u||(u=o("I64"))).to_string(t.contactId),r.name),!(u||(u=o("I64"))).equal(t.contactId,a)){var i=(r==null?void 0:r.name)||"Unknown User";s.push(i),c.push(i)}}),n.setThreadMetaDataByThreadKey(t,c,g(s,l,p.threadName))}else n.setThreadMetaDataByThreadKey(t,c,g(s,l))}async function y(e){var t,n,r=o("EncryptedBackupsDYISingleton").getSingleton(),a=r.getLogger(),i=await r.getDB(),l=await m(i,c()),d=(t=l==null?void 0:l.id)!=null?t:(u||(u=o("I64"))).zero,p=(n=l==null?void 0:l.name)!=null?n:"Me";return r.setContactNameForContactId((u||(u=o("I64"))).to_string(d),p),e.reduce(async function(e,t,n){await e;var o=r.getThreadIdForThreadKey(t);return o==null&&a.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t),h(t,r,i,d,p,n)},Promise.resolve())}l.getAllUnmappedContacts=p,l.EncryptedBackupsDYIGenerateThreadMetadata=y}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m;async function p(t,n,r,a,i,l){var p=await o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),f=await p.getFileHandle("messages.zip",{create:!0});a("stream_file_start");var g=await f.createWritable({keepExisting:!1,mode:"exclusive"}),h=new(o("fflate")).Zip,y=0;h.ondata=function(t,n,o){if(t){r.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"]))),a("stream_file_error"),l(t);return}y++,y%1e3===0&&r.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),y),g.write(n).catch(function(e){r.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),a("stream_file_error"),l(e)}),o&&(r.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),a("stream_file_end"),a("write_file_start"),g.close().then(function(){a("write_file_end"),r.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),i()}).catch(function(e){r.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),a("write_file_error"),l(e)}))};for(var C of t){var b=C.threadName+".json",v=new(o("fflate")).ZipDeflate(b,{level:9}),S=new TextEncoder().encode(JSON.stringify(C,null,2));h.add(v),v.push(S,!0)}for(var R of n)await _(h,R);h.end()}async function _(e,t){var n=t.split("/").pop(),r=await o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),a=await o("EncryptedBackupsDYIFileUtils").readFile(r,n!=null?n:t),i=await a.arrayBuffer(),l=new Uint8Array(i),s=new(o("fflate")).ZipPassThrough(t);e.add(s),s.push(l,!0)}l.generateZipFile=p}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["senderId"],s,u,c,d,m,p,_,f,g,h,y,C,b,v=null;function S(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(e){return!1}}function R(e,t,n){if(v==null)switch(e){case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=o("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(t,n);break;case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=o("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(t,n);break}}function L(){if(v==null)throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}var E=(function(){function t(e,t,n,r){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map,this.$10=new Map,this.$11=new Map,this.$12=new Map,this.$1=e,this.$2=t,this.$3=n,this.$4=r}var n=t.prototype;return n.getDB=function(){return this.$1()},n.getLogger=function(){return this.$4},n.getAllMediaUrls=function(){return Array.from(this.$5.values())},n.$13=function(t){return this.$5.get(t)},n.setMediaUrlByPlainTextHash=function(t,n){this.$5.has(t)||this.$5.set(t,n)},n.addThreadKeyToThreadsRestoreInProgress=function(t){this.$6.add(t)},n.isThreadRestoreInProgressForThreadKey=function(t){return this.$6.has(t)},n.deleteThreadKeyFromThreadsRestoreInProgress=function(t){this.$6.delete(t),this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),t,this.$6.size),this.$14()&&(this.$4.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},n.isThreadsRestoreComplete=function(){return this.$6.size===0},n.addPlaintextHashToAttachmentDownloadsInProgress=function(t){this.$7.add(t),this.$4.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),o("WAHashUtils").sanitisePlaintextHash(t))},n.deletePlaintextHashFromAttachmentDownloadsInProgress=function(t){this.$7.delete(t),this.$4.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),o("WAHashUtils").sanitisePlaintextHash(t),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(o("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},n.isAttachmentDownloadInProgressForPlaintextHash=function(t){return this.$7.has(t)},n.isAttachmentDownloadCompleteForPlaintextHash=function(t){return!!this.$5.get(t)},n.isAttachmentDownloadComplete=function(){return this.$7.size===0},n.setMessagesByThreadKey=function(t,n,r){var e=this.getMessagesByThreadKey(t);e.set(n,r)},n.getMessagesByThreadKey=function(t){return this.$16(t)||this.$8.set(t,new Map),this.$8.get(t)},n.$16=function(t){return this.$8.has(t)},n.hasMessage=function(t,n){var e=this.$8.get(t);return e==null?!1:e.has(n)},n.getThreadIdForThreadKey=function(t){return this.$10.get(t)},n.getThreadKeyForThreadId=function(t){return this.$11.get(t)},n.setThreadMapping=function(t,n){this.$10.set(t,n),this.$11.set(n,t)},n.setThreadMetaDataByThreadKey=function(t,n,r){this.$9.set(t,{participants:n,threadName:r})},n.getThreadMetadataMap=function(){return this.$9},n.setContactNameForContactId=function(t,n){this.$12.set(t,n)},n.getContactNameForContactId=function(t){return this.$12.get(t)},n.getContactNameMap=function(){return this.$12},n.getOutput=function(){var t=this;return Array.from(this.getThreadMetadataMap(),function(n){var r=n[0],o=n[1],a=t.$16(r),i=a?Array.from(t.getMessagesByThreadKey(r),function(e){var n=e[0],r=e[1];return babelHelpers.extends({},r,{media:Array.from(r.media,function(e){var n=t.$13(e);return{uri:n!=null?"./"+n:"Failed to download media"}})})}):[];i=i.map(function(n){var r=n.senderId,o=babelHelpers.objectWithoutPropertiesLoose(n,e);if(r!=null&&o.senderName==="Unknown User"){var a=t.getContactNameForContactId(r);if(a!=null)return babelHelpers.extends({},o,{senderName:a})}return n});var l=i.sort(function(e,t){return typeof e.timestamp=="number"&&typeof t.timestamp=="number"?e.timestamp-t.timestamp:0});return babelHelpers.extends({},o,{messages:l})})},n.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()},n.$17=function(t){switch(t){case 0:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}},n.updateDYIStatus=async function(t){var e,n=await this.getDB();await n.runInTransaction(async function(e){await e.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(C||(C=o("LSIntEnum"))).ofNumber(t),pk:(b||(b=o("I64"))).zero})},"readwrite",void 0,void 0,i.id+":521"),o("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(e=this.$3)!=null?e:void 0,status:this.$17(t)})},n.$18=async function(){var e=this,t=new Set;this.getContactNameMap().forEach(function(e,n){e==="Unknown User"&&t.add(n)});var n=await this.getDB(),r=await o("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(n,t);r.forEach(function(t){var n=(b||(b=o("I64"))).to_string(t.id);e.setContactNameForContactId(n,t.name)}),this.$4.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())},n.$15=async function(){var e=this;this.logDYIQPLPoint("complete_dyi_flow_start"),await this.$18(),this.$4.LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var t=this.getOutput(),n=Array.from(this.$5.values());this.$4.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"]))),await o("EncryptedBackupsDYIZipUtils").generateZipFile(t,n,this.$4,function(t,n){e.logDYIQPLPoint(t,n)},async function(){e.logDYIQPLPoint("complete_dyi_flow_end"),await e.updateDYIStatus(1),e.clear()},async function(t){e.$4.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),t),e.logDYIQPLPoint("complete_dyi_flow_error"),await e.updateDYIStatus(2),e.clear()})},n.exitDYIEarly=async function(t,n){n!=null&&this.$4.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),n),this.logDYIQPLPoint("dyi_exit_early",{int:{dyi_threads:n}}),await this.updateDYIStatus(t?2:1),this.clear()},n.clear=async function(){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map;var e=await o("EncryptedBackupsDYIFileUtils").getRootFolderHandle();await e.removeEntry(o("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})},n.logDYIQPLPoint=function(t,n){this.$3!=null&&o("MAWQplProxy").sendQplPointThroughBridge(this.$2,t,{annotations:n,instanceKey:this.$3})},t})();l.initSingleton=R,l.getSingleton=L,l.EncryptedBackupsDYISingleton=E}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521478596,"1329"),t,o("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",t==null?"":t.toString()]))}function s(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521479842,"2163"),t,o("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",t==null?"":t.toString()]))}l.getMAWEncryptedBackupsDYISingleton=e,l.getIGDEncryptedBackupsDYISingleton=s}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","WAResultOrError","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,a,i){var e=await o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),l=n.split("/")[1],s=r("uuidv4")()+"."+l;await o("EncryptedBackupsDYIFileUtils").writeFile(e,s,a);var u=o("EncryptedBackupsDYISingleton").getSingleton();return u.setMediaUrlByPlainTextHash(t,o("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+s),u.deletePlaintextHashFromAttachmentDownloadsInProgress(t),o("WAResultOrError").makeResult()},s=function(){return r("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI"),Promise.resolve(o("WAResultOrError").makeResult())};l.DYIMediaDownloadHandler=e,l.DYIMediaPreviewHandler=s}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(r),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewBeforeDownload=s}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]),c=async function(t,n,a,i){var e=o("WAHashUtils").toPlaintextHash(await o("WACryptoSha256").sha256(n));o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:t,status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var l=o("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(t);return l!=null&&(l.resolve(new Blob([n],{type:"image/jpeg"})),o("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(t)),d(t,e,n,a,i)},d=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READWRITE,messages:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"handleMediaPreviewDownload",function(t){return(function(n,a,i,l,c){return o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,n),o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,c)]).then(function(c){var d=c[0],m=c[1];if(u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),o("WAHashUtils").sanitisePlaintextHash(n),o("WAHashUtils").sanitisePlaintextHash(a)),d==null)return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:n,status:r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"}),u.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),l),o("WAResultOrError").makeError("missing-media-on-save");var p=function(){switch(l){case"image":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedImageInfo:babelHelpers.extends({},d.validatedImageInfo,{jpegThumbnail:i})}));case"video":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedVideoInfo:babelHelpers.extends({},d.validatedVideoInfo,{jpegThumbnail:i})}));default:return o("MAWDexieTable").dexieResolve()}};return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:n,status:r("MAWMediaDownloadStatus").SUCCESS,type:"preview"}),p().then(function(){return t.messages.where("msgId").anyOf(d.msgIds).toArray().then(function(e){return t.threads.where("jid").anyOf(e.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(e),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n.jid,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(e,n.jid),hasMediaForUI:!0,hdTypes:r,media:d,sortOrderMs:m==null?void 0:m.sortOrderMs});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(t,a,e)})).then(function(){return o("WAResultOrError").makeResult()})})})})})})});l.handleMediaPreviewDownload=c}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(r,a),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewDownloadFailed=s}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t,n){this.mediaDownloadMetadata=e,this.downloadCallbacks=t,this.waApiDownloadCall=n}var n=t.prototype;return n.handle=async function(){var t,n=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(n==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"]))),this.handleError();var a=!o("WATimeUtils").happenedWithin(n,29*o("WATimeUtils").DAY_SECONDS),i=(t=this.mediaDownloadMetadata.isUrlRenewed)!=null?t:!1;if(!i&&(a||r("gkx")("23960")))return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"]))),this.handleUrlExpired();var l=this.mediaDownloadMetadata,u=l.hash,c=l.mediaEntry,d=l.protocolMsgId,m=await this.waApiDownloadCall(u,c,d);return m.success?this.downloadCallbacks.onDownloadSuccess({mimeType:m.value.mimeType,plaintext:m.value.plaintext}):o("WAIsMediaExpiredError").isMediaExpiredError(m.error)?this.handleUrlExpired():this.handleError()},n.handleUrlExpired=async function(){var e;return await this.downloadCallbacks.onUrlExpired(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()},n.handleError=async function(){var e;return await this.downloadCallbacks.onDownloadError(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()},n.getDownloadMetadata=function(){return this.mediaDownloadMetadata},n.setNextHandler=function(t){this.mediaDownloadHandler=t},t})(),c=function(t,n,a){var e=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:a,triggerUIView:null});return r("WAAPI").downloadMedia({downloadMediaMetric:e,handleMediaPreviewBeforeDownload:o("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:o("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:o("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:t,mediaEntry:n,protocolMsgId:a})};l.MebWAMediaDownloader=u,l.MebWADownloadMediaFromWorker=c}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g;function h(e,t){return{isUnsent:!1,media:new Set,reactions:[],senderName:y(e),text:"",timestamp:t!=null?t:0,type:""}}function y(e){var t=o("EncryptedBackupsDYISingleton").getSingleton(),n="Unknown User";if(e!=null){var r=t.getContactNameForContactId(e);r!=null&&(n=r)}return n}async function C(t,n,a,i){var l=o("EncryptedBackupsDYISingleton").getSingleton(),d=l.getLogger(),m=d.TAGS([o("WAHashUtils").sanitisePlaintextHash(t)]);r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",o("WAHashUtils").sanitisePlaintextHash(t));var p=await o("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:i,plaintextHash:t,protocolMsgId:n,sortOrderMs:a});if(r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(t),p.success?"true":"false",p.error),p.success){var _=p.value,f=_.unvalidatedMimeType,g=_.validatedResult,h=g.skipValidation?f:g.mimeType,y=await o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(t,h,g.validatedPlaintext,n);if(!y.success){m.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),l.deletePlaintextHashFromAttachmentDownloadsInProgress(t);return}}else{m.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),p.error,p.payload),d.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),p.error,p.payload),l.deletePlaintextHashFromAttachmentDownloadsInProgress(t);return}}function b(e,t,n,r,a,i,l,s,u,c,h){var y=o("EncryptedBackupsDYISingleton").getSingleton(),C=y.getLogger(),b=C.TAGS([o("WAHashUtils").sanitisePlaintextHash(u)]),v={author:o("WAJids").toMsgrUserJid(l),chat:o("WAJids").toMsgrUserJid(a),externalId:s},S={hash:u,isUrlRenewed:!1,mediaEntry:r,protocolMsgId:v,sortOrderMs:c},R={onDownloadError:function(){return b.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),C.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),y.deletePlaintextHashFromAttachmentDownloadsInProgress(S.hash),Promise.resolve()},onDownloadSuccess:async function(t){b.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var e=t.mimeType,n=t.plaintext;await o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(S.hash,e,n,v)},onUrlExpired:function(){return b.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"]))),Promise.resolve()}},L=new(o("MebWAMediaDownloader")).MebWAMediaDownloader(S,R,e),E=r.serverMediaType,k=r.objectId;if(E!=null&&k!=null&&typeof c=="number"){var I={backupEntFbid:t,deliveryObjectId:k,hash:u,mediaType:E,messageId:s,productType:n,sortOrder:c,threadId:a,threadKey:i},T={onResignCdnUrlFailure:function(t){return b.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),C.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),y.deletePlaintextHashFromAttachmentDownloadsInProgress(S.hash),Promise.resolve()},onResignCdnUrlSuccess:async function(){}},D=h(I,T);L.setNextHandler(D),D.setNextHandler(new(o("MebWAMediaDownloader")).MebWAMediaDownloader(S,R,e))}L.handle()}function v(e,t,n){var r,a,i,l,s,u,c,d,m,p,_,f=(r=e.integral)==null||(r=r.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(f==null)return o("WAResultOrError").makeError("mime-type-missing");var g=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(f,t).serverMediaType;if(g==null)return o("WAResultOrError").makeError("server-media-type-missing");var h=(a=e.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.directPath;if(h==null)return o("WAResultOrError").makeError("direct-path-missing");var y=(i=e.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256;if(y==null)return o("WAResultOrError").makeError("plaintext-hash-missing");var C=o("WALongInt").maybeNumber((l=e.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp);if(C==null)return o("WAResultOrError").makeError("media-key-timestamp-missing");var b;if(((s=e.ancillary)==null?void 0:s.scanLengths)!=null&&((u=e.ancillary)==null?void 0:u.scansSidecar)!=null){var v=e.ancillary,S=v.scanLengths,R=v.scansSidecar;b={scanLengths:S.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:R}}var L;if(((c=e.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.downloadableThumbnail)!=null){var E=e.integral.transport.ancillary.thumbnail.downloadableThumbnail,k=E.directPath,I=E.fileEncSha256,T=E.fileSha256,D=E.mediaKey,x=E.mediaKeyTimestamp,$=E.objectId;L={directPath:k,fileEncSha256:I,fileSha256:T,mediaKey:D,mediaKeyTimestamp:o("WALongInt").maybeNumber(x),objectId:$}}var P={directPath:h,downloadableThumbnail:L,fileEncSha256:(d=e.integral)==null||(d=d.transport)==null||(d=d.integral)==null?void 0:d.fileEncSha256,filename:n,fileSha256:y,mediaKey:(m=e.integral)==null||(m=m.transport)==null||(m=m.integral)==null?void 0:m.mediaKey,mediaKeyTimestamp:o("WATimeUtils").castToUnixTime(C),objectId:(p=e.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null?void 0:p.objectId,progressiveJpegDetails:b,serverMediaType:g,size:o("WALongInt").maybeNumber((_=e.integral)==null||(_=_.transport)==null||(_=_.ancillary)==null?void 0:_.fileLength)};return o("WAResultOrError").makeResult(o("WAMediaUtils").rawDataToMediaEntry(P))}l.buildBaseDyiMessage=h,l.getSenderName=y,l.downloadMediaWithMediaManager=C,l.startMediaDownloadChain=b,l.decodeMediaEntryFromAttachmentPayload=v}),98);
__d("MAWFTSIsMessageValidForSearch",["MAWMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.ephemeralSetting!=null&&e.ephemeralSetting.ephemeralExpirationInSec>0}function s(t){var n=t.msgContent,r=t.sortOrderMs,a=t.type,i=n==null?void 0:n.content;return i==null||r==null||a!==o("MAWMsgType").MSG_TYPE.TEXT&&a!==o("MAWMsgType").MSG_TYPE.XMA||e(t)?null:{content:i,sortOrderMs:r}}l.verifyMessageValidity=s}),98);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMediaUtils","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("EBLogger").EBLogger().tags(["ProtobufRestore"]);function x(t){var n=t.isMediaGalleryRestore,a=t.taskSource,i;return n!=null&&n?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),i=r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):i=a!=null?a:r("LSMEBTaskCreationSource").UNKNOWN,babelHelpers.extends({},t,{isMediaGalleryRestore:void 0,taskSource:i})}function $(e,t,n){var r={author:n,chat:t,externalId:e};return r}function P(e,t,n,r,a,i,l,p,_,f,g,h,y,C,b,v){if(e===o("MAWMsgType").MSG_TYPE.TEXT)if(l==null){D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{var S={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,msgContent:{content:l,mentionedJids:p!=null?p.map(o("WAJids").validateUserJid).filter(Boolean):void 0},ts:t,type:o("MAWMsgType").MSG_TYPE.TEXT};return S}else if(e===o("MAWMsgType").MSG_TYPE.VIDEO){var R={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.VIDEO};return R}else if(e===o("MAWMsgType").MSG_TYPE.GIF){var L={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.GIF};return L}else if(e===o("MAWMsgType").MSG_TYPE.IMAGE){var E={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.IMAGE};return E}else if(e===o("MAWMsgType").MSG_TYPE.STICKER){var k={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.STICKER};return k}else if(e===o("MAWMsgType").MSG_TYPE.PTT){var I={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.PTT};return I}else if(e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){var T={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return T}else if(e===o("MAWMsgType").MSG_TYPE.XMA){var x={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.XMA};return x}else if(e===o("MAWMsgType").MSG_TYPE.REVOKED){if(_==null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}var $={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:r,msgContent:void 0,revokedExternalId:_,ts:t,type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:t};return $}else if(e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){var P={ack:o("WAAckLevel").ACK.SENT,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return P}else if(e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){var N={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return N}else if(e===o("MAWMsgType").MSG_TYPE.RAVEN){if(f==null){D.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(g==null){D.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}var M={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,mediaId:h,ravenEphemeralMediaState:o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:f,ravenMediaType:g,ts:t,type:o("MAWMsgType").MSG_TYPE.RAVEN};return M}else if(e===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(y==null||C==null||b==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}var w={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return w}}function N(e,t,n,r,a){var i,l,s,u,c,d,m,C,b=e.metadata,v=e.msgType;if(b==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(v==null){D.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var S=b.messageId,R=b.senderId,L=(i=e.decodedPayload)==null?void 0:i.text,E=(l=e.decodedPayload)==null?void 0:l.mentionedJid;if(S==null){D.MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(R==null){D.MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var k=o("WATimeUtils").castMilliSecondsToUnixTime(e.sortOrderMs),I=o("MAWJids").toUserJid(R),T=o("WAStanzaUtils").toStanzaId(S),x=I===n?o("WAJids").AUTHOR_ME:I,N=$(T,t,I);if(e.editMsgData.length>0){var M=k;e.editMsgData.forEach(function(e){var t;if(e.ts>M&&((t=e.editMsgContent.message)==null?void 0:t.text)!=null){var n,r;M=e.ts,L=(n=e.editMsgContent.message)==null?void 0:n.text,E=(r=e.editMsgContent.message)==null?void 0:r.mentionedJid}})}var w=P(v,k,x,N,e.isForwarded,e.forwardingScore,L,E,e.revokedMsgExternalId,e.ravenMsgEphemeralType,e.ravenMsgMediaType,(s=e.ravenUnstoredMedia)==null?void 0:s.plaintextHash,(u=e.groupPollInfo)==null?void 0:u.encKey,(c=e.groupPollInfo)==null?void 0:c.name,(d=e.groupPollInfo)==null?void 0:d.options,(m=e.groupPollInfo)==null?void 0:m.selectableOptionsCount);if(w==null){D.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),t,T);return}var A;if(e.xmaData!=null&&((C=e.xmaData)==null?void 0:C.targetType)!=null){var F,O={author:I,externalId:T,targetType:(F=e.xmaData)==null?void 0:F.targetType,threadJid:t};A={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:O}}var B={unstoredGroupPollCreateInfo:e.groupPollInfo,unstoredMedia:void 0,unstoredMsg:w,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:e.receiverFetchInfo,unstoredXMA:A};w.type===o("MAWMsgType").MSG_TYPE.RAVEN&&e.ravenUnstoredMedia!=null&&(B.unstoredMedia=e.ravenUnstoredMedia);var W=o("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(B);if(W.unstoredDbMsg!=null){var q=W.unstoredDbMsg;q.sortOrderMs=e.sortOrderMs,q.serverTs=o("WATimeUtils").castToUnixTime(e.sortOrderMs/1e3),e.noteReply!=null&&(q.quote={content:e.noteReply,remoteJid:void 0});var U=r.get(S);q.author!=null&&n===q.author&&q.author!==o("WAJids").AUTHOR_SYSTEM&&(q.author=o("WAJids").AUTHOR_ME),U!=null&&(q.quoteExternalId=o("WAStanzaUtils").toStanzaId(U)),v===o("MAWMsgType").MSG_TYPE.TEXT&&(q.editCount=e.editMsgData.length);var V={author:q.author,stanzaId:T,unstoredDbContent:W};return W.unstoredDbMedia!=null&&a!=null&&a.set(T,W.unstoredDbMedia),V}D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function M(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function w(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").AttachmentType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").AttachmentType.PTT;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.XMA;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function A(e){var t;switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:t="audio/wav";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:t="video/mp4";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:t="image/gif";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:t="image/webp";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:t="application/octet-stream";break;default:D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return t}function F(e,t,n){var r,a,i,l,s,u,c,d,m,p,_=t,f=e.ancillary,g=e.integral,h=g==null||(r=g.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.fileEncSha256,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.mediaKey,S=(g==null||(l=g.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp)!=null&&typeof(g==null||(s=g.transport)==null?void 0:s.integral.mediaKeyTimestamp)=="number"?g==null||(u=g.transport)==null?void 0:u.integral.mediaKeyTimestamp:void 0;o("MAWMediaUtils").isTransportLegacyGif(e)&&(_=o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);var R=g==null||(c=g.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,L=g==null||(d=g.transport)==null||(d=d.ancillary)==null||(d=d.thumbnail)==null?void 0:d.thumbnailWidth,E=M(_),k=w(_);if(k===null){D.MUSTFIX(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}var I=o("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(e,k===o("EchoMessageMediaFieldUtils").AttachmentType.XMA,n);I.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),I.error);var T={attachmentObjectId:g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:k,directPath:g==null||(p=g.transport)==null||(p=p.integral)==null?void 0:p.directPath,encryptedHash:y!=null?o("WAHashUtils").toPlaintextHash(y):void 0,filename:n,height:f==null?void 0:f.height,mediaEntryData:I.value,mediaKey:C!=null?o("WABase64").encodeB64UrlSafe(C):void 0,mediaKeyTimestamp:S,mediaPlayableDuration:f==null?void 0:f.seconds,plaintextHash:h!=null?o("WAHashUtils").toPlaintextHash(h):void 0,width:f==null?void 0:f.width,xAttachmentType:_,xContentType:"full"},x=A(_);return x!=null&&(T.mediaContentType=x),E!=null&&(T.previewContentType=E,T.previewContentHeight=R,T.previewContentWidth=L),o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(T,"protobuf")}function O(e,t,n){var r,a=F(e,t,n);if(a==null)return{mediaMetadata:void 0,previewMetadata:null};var i=e.integral,l=null,s=i==null||(r=i.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.downloadableThumbnail;if(s!=null){var u=s.fileSha256,c=s.fileEncSha256,d=s.mediaKey,m=typeof s.mediaKeyTimestamp=="number"?s.mediaKeyTimestamp:void 0;return l={attachmentObjectId:s.objectId,attachmentType:o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:s.directPath,encryptedHash:c!=null?o("WAHashUtils").toPlaintextHash(c):void 0,filename:void 0,height:void 0,mediaKey:d!=null?o("WABase64").encodeB64UrlSafe(d):void 0,mediaKeyTimestamp:m,mediaPlayableDuration:void 0,plaintextHash:u!=null?o("WAHashUtils").toPlaintextHash(u):void 0,width:void 0,xAttachmentType:o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"},{mediaMetadata:a,previewMetadata:o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(l,"protobuf")}}return{mediaMetadata:a,previewMetadata:null}}function B(e,t,n,r,a,i){i===void 0&&(i=null),t!=null&&e!=null&&(n.push({mediaMetadata:t,mediaRestoreType:r,previewMetadata:i}),a.set(o("WAStanzaUtils").toStanzaId(e),n))}function W(e){switch(e){case 0:return o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return}}function q(e,t,n,r,a,i,l,s,u,c,d){var m,p,_,f,g,h,y,C,b,v,I=V(e,i,l,s),T=I==null||(m=I.obj.payload)==null?void 0:m.content,x={editMsgData:[],externalId:r,forwardingScore:(p=I==null||(_=I.metadata)==null?void 0:_.forwardingScore)!=null?p:0,isForwarded:(f=I==null||(g=I.metadata)==null?void 0:g.isForwarded)!=null?f:!1,metadata:e.metadata,reactionData:[],sortOrderMs:t,unknownFieldCount:e.$$unknownFieldCount},$,P=[];if(T!=null){if(T.messageText!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=T.messageText,x;if(T.extendedContentMessage!=null){var N,M,w;if(x.msgType=o("MAWMsgType").MSG_TYPE.XMA,x.xmaData=T.extendedContentMessage,((N=T.extendedContentMessage)==null?void 0:N.headerImage)!=null){var A,q=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(A=T.extendedContentMessage)==null?void 0:A.headerImage.payload),H=F(q,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,H,P,"xma_header",u)}if(((M=T.extendedContentMessage)==null?void 0:M.favicon)!=null){var G,z=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(G=T.extendedContentMessage)==null?void 0:G.favicon.payload),j=F(z,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,j,P,"xma_favicon",u)}if(((w=T.extendedContentMessage)==null?void 0:w.previews)!=null){var K;(K=T.extendedContentMessage)==null||K.previews.forEach(function(e){var t=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,e.payload),n=F(t,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);x.mediaMetadata=n,B(r,n,P,"xma_preview",u)})}return x}else if(T.audioMessage!=null){var Q,X=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(Q=T.audioMessage)==null||(Q=Q.audio)==null?void 0:Q.payload);return $=F(X,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO),x.msgType=o("MAWMsgType").MSG_TYPE.PTT,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.videoMessage!=null){var Y,J=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(Y=T.videoMessage)==null||(Y=Y.video)==null?void 0:Y.payload),Z=O(J,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),ee=Z.mediaMetadata,te=Z.previewMetadata;return $=ee,$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u,te),x}else if(T.imageMessage!=null){var ne,re=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(ne=T.imageMessage)==null||(ne=ne.image)==null?void 0:ne.payload),oe=O(re,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE),ae=oe.mediaMetadata,ie=oe.previewMetadata;return $=ae,x.msgType=o("MAWMsgType").MSG_TYPE.IMAGE,x.mediaMetadata=$,B(r,$,P,"attachment",u,ie),x}else if(T.stickerMessage!=null){var le,se,ue=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(le=T.stickerMessage)==null||(le=le.sticker)==null?void 0:le.payload);if(((se=ue.integral)==null?void 0:se.receiverFetchId)!=null){var ce=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(ue);return ce==null?(D.MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"]))),x):(x.msgType=o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH,x.receiverFetchInfo=ce,x)}return $=F(ue,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.documentMessage!=null){var de,me,pe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(de=T.documentMessage)==null||(de=de.document)==null?void 0:de.payload);return $=F(pe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(me=T.documentMessage)==null?void 0:me.fileName),x.msgType=o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}else if((I==null||(h=I.obj.payload)==null||(h=h.applicationData)==null?void 0:h.revoke)!=null){var _e,fe=I==null||(_e=I.obj.payload)==null||(_e=_e.applicationData)==null||(_e=_e.revoke)==null||(_e=_e.key)==null?void 0:_e.id;if(fe==null)D.MUSTFIX(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else return x.revokedMsgExternalId=o("WAStanzaUtils").toStanzaId(fe),x.msgType=o("MAWMsgType").MSG_TYPE.REVOKED,x}if((I==null||(y=I.obj.payload)==null||(y=y.content)==null?void 0:y.bumpExistingMessage)!=null){var ge,he,ye,Ce=I==null||(ge=I.obj.payload)==null||(ge=ge.content)==null?void 0:ge.bumpExistingMessage,be=(he=Ce.key)==null?void 0:he.id;be!=null&&(l.has(be)||i.add(be),s.set(r,be));var ve=(ye=Ce.key)==null?void 0:ye.participant;if(ve==null){var Se;ve=(Se=Ce.key)==null?void 0:Se.remoteJid}if(ve==null)D.MUSTFIX(L||(L=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{var Re=o("WAJids").unsafeCoerceToUserJid(ve),Le=Re===n?o("WAJids").AUTHOR_ME:Re;return c.set(o("WAStanzaUtils").toStanzaId(r),Le),x.msgType=o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,x}}if((I==null||(C=I.obj)==null||(C=C.payload)==null||(C=C.content)==null?void 0:C.noteReplyMessage)!=null){var Ee,ke,Ie=I==null||(Ee=I.obj)==null||(Ee=Ee.payload)==null||(Ee=Ee.content)==null?void 0:Ee.noteReplyMessage,Te=Ie.noteTimestampMs,De=Ie.noteText,xe=(ke=e.metadata)==null?void 0:ke.senderId;if(Te!=null&&typeof Te=="number"&&xe!=null&&a!=null){var $e=o("MAWJids").toUserJid(xe),Pe=o("MAWJids").toUserJid(a),Ne=Pe===$e?n:Pe,Me={author:Ne===n?o("WAJids").AUTHOR_ME:Ne,externalId:o("WAStanzaUtils").toStanzaId(r),ts:o("WATimeUtils").castMilliSecondsToUnixTime(Te),type:o("WAMsgType").NOTE_REPLY};if((De==null?void 0:De.text)!=null){var we={content:De==null?void 0:De.text,mentionedJids:De==null?void 0:De.mentionedJid.map(function(e){return o("MAWJids").toUserJid(e)})};Me.msgContent=we}x.noteReply=Me}if(Ie.textContent!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=Ie.textContent,x;if(Ie.stickerContent!=null){var Ae=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,Ie.stickerContent.payload);return $=F(Ae,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(Ie.videoContent!=null){var Fe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,Ie.videoContent.payload);return $=F(Fe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}if((I==null||(b=I.obj)==null||(b=b.payload)==null||(b=b.content)==null?void 0:b.ravenMessageMsgr)!=null){var Oe,Be,We;if(x.ravenMsgEphemeralType=W(I==null||(Oe=I.obj)==null||(Oe=Oe.payload)==null||(Oe=Oe.content)==null||(Oe=Oe.ravenMessageMsgr)==null?void 0:Oe.ephemeralType),(I==null||(Be=I.obj)==null||(Be=Be.payload)==null||(Be=Be.content)==null||(Be=Be.ravenMessageMsgr)==null?void 0:Be.imageMessage)!=null){if(d==null||!d){var qe;x.ravenUnstoredMedia=o("WAParseMediaTransportProtocol").decodeImageTransport(I==null||(qe=I.obj)==null||(qe=qe.payload)==null||(qe=qe.content)==null||(qe=qe.ravenMessageMsgr)==null||(qe=qe.imageMessage)==null?void 0:qe.payload,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),"image")}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((I==null||(We=I.obj)==null||(We=We.payload)==null||(We=We.content)==null||(We=We.ravenMessageMsgr)==null?void 0:We.videoMessage)!=null){if(d==null||!d){var Ue,Ve=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,I==null||(Ue=I.obj)==null||(Ue=Ue.payload)==null||(Ue=Ue.content)==null||(Ue=Ue.ravenMessageMsgr)==null||(Ue=Ue.videoMessage)==null?void 0:Ue.payload),He=o("WAParseMediaTransportProtocol").parseVideoMsg(Ve,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),!1);He!=null?x.ravenUnstoredMedia=He:D.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.VIDEO}return x.msgType=o("MAWMsgType").MSG_TYPE.RAVEN,x}else if((I==null||(v=I.obj)==null||(v=v.payload)==null||(v=v.content)==null?void 0:v.pollCreationMessage)!=null){x.msgType=o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;var Ge=I.obj.payload.content.pollCreationMessage,ze=Ge.encKey,je=Ge.name,Ke=Ge.options,Qe=Ge.selectableOptionsCount;return ze!=null&&je!=null&&Ke!=null&&(x.groupPollInfo={encKey:ze,name:je,options:Ke.map(function(e){var t=e.optionName;return t}).filter(Boolean),selectableOptionsCount:Qe||0}),x}return I!=null&&U(x,I.obj),D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"]))),x}function U(e,t){var n,r,o,a,i,l,s,u,c,d,m,p,_,f;(t==null||(n=t.payload)==null||(n=n.content)==null?void 0:n.locationMessage)!=null&&(e.futureProofMessageType="locationMessage"),(t==null||(r=t.payload)==null||(r=r.content)==null?void 0:r.liveLocationMessage)!=null&&(e.futureProofMessageType="liveLocationMessage"),(t==null||(o=t.payload)==null||(o=o.content)==null?void 0:o.pollUpdateMessage)!=null&&(e.futureProofMessageType="pollUpdateMessage"),(t==null||(a=t.payload)==null||(a=a.content)==null?void 0:a.viewOnceMessage)!=null&&(e.futureProofMessageType="viewOnceMessage"),(t==null||(i=t.payload)==null||(i=i.content)==null?void 0:i.contactMessage)!=null&&(e.futureProofMessageType="contactMessage"),(t==null||(l=t.payload)==null||(l=l.content)==null?void 0:l.extendedTextMessage)!=null&&(e.futureProofMessageType="extendedTextMessage"),(t==null||(s=t.payload)==null||(s=s.content)==null?void 0:s.groupInviteMessage)!=null&&(e.futureProofMessageType="groupInviteMessage"),(t==null||(u=t.payload)==null||(u=u.content)==null?void 0:u.commonSticker)!=null&&(e.futureProofMessageType="commonSticker"),(t==null||(c=t.payload)==null||(c=c.content)==null?void 0:c.screenshotAction)!=null&&(e.futureProofMessageType="screenshotAction"),(t==null||(d=t.payload)==null||(d=d.content)==null?void 0:d.extendedMessageContentWithSear)!=null&&(e.futureProofMessageType="extendedMessageContentWithSear"),(t==null||(m=t.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(e.futureProofMessageType="imageGalleryMessage"),(t==null||(p=t.payload)==null||(p=p.content)==null?void 0:p.paymentsTransactionMessage)!=null&&(e.futureProofMessageType="paymentsTransactionMessage"),(t==null||(_=t.payload)==null||(_=_.applicationData)==null?void 0:_.metadataSync)!=null&&(e.futureProofMessageType="metadataSync"),(t==null||(f=t.payload)==null||(f=f.applicationData)==null?void 0:f.aiBotResponse)!=null&&(e.futureProofMessageType="aiBotResponse")}function V(e,t,n,r){var a,i=(a=e.metadata)==null?void 0:a.messageId,l=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e.encryptedTransportMessage),s=o("WAParseMessageApplication").parseMessageApplication(l);if(s.type==="error"){D.MUSTFIX(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}var u=l.metadata,c=u==null?void 0:u.quotedMessage,d=c==null?void 0:c.stanzaId;if(i!=null&&d!=null&&(n.has(d)||t.add(d),r.set(i,d)),s.subprotocolType==="armadillo"){var m=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,s.payload);return{metadata:u,obj:m}}else if(s.subprotocolType==="consumerMessage")return{metadata:u,obj:o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAConsumerApplication.pb").ConsumerApplicationSpec,s.payload)}}function H(e,t,n,r,o,a,i,l,s){return e.map(function(e){return G(e,t,n,r,o,a,i,l,s)})}function G(e,t,n,r,a,i,l,s,u){i===void 0&&(i=new Map);var c=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e.toplevelProtobuf.decryptedProtobuf),d=q(c,e.toplevelProtobuf.protobufTimestampMS,t,e.otid,n,r,a,i,l,s,u),m=e.supplementalProtobufs;for(var p of m){var _=p[0],f=p[1],g=o("MessageBackupSupplementalKeyGenerator").parseIdentifierString(_);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:g.type});var h=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,f.decryptedProtobuf);if(h.encryptedTransportMessage!=null)switch(g.type){case"raven_action_message":{var y=V(h,r,a,i),C=g.senderJid,b=C===t?o("WAJids").AUTHOR_ME:C;if(y!=null){var v,S,R,L=y.obj,E=(v=L.payload)==null||(v=v.content)==null||(v=v.ravenActionNotifMessage)==null?void 0:v.actionTimestamp,k=(S=L.payload)==null||(S=S.content)==null||(S=S.ravenActionNotifMessage)==null?void 0:S.actionType;if(E!=null&&k!=null&&typeof E=="number"&&((R=L.payload)==null||(R=R.content)==null||(R=R.ravenActionNotifMessage)==null||(R=R.key)==null?void 0:R.id)!=null){var I,x,$,P,N=o("WAStanzaUtils").toStanzaId((I=L.payload)==null||(I=I.content)==null||(I=I.ravenActionNotifMessage)==null||(I=I.key)==null?void 0:I.id);if(((x=h.metadata)==null?void 0:x.timestampMs)!=null&&typeof(($=h.metadata)==null?void 0:$.timestampMs)=="number"&&((P=h.metadata)==null?void 0:P.messageId)!=null){var M,w,A=(M=h.metadata)==null?void 0:M.messageId,F=o("WATimeUtils").castMilliSecondsToUnixTime((w=h.metadata)==null?void 0:w.timestampMs),O=o("WAStanzaUtils").toStanzaId(A),B=k===0?o("MAWMsg").MAWRavenActionNotifType.PLAYED:k===1?o("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:o("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED,W={ack:o("WAAckLevel").ACK.RECEIVED,actionTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(E),actionType:B,author:b,externalId:O,ravenActionToMsgExternalId:N,ts:F,type:o("MAWMsgType").MSG_TYPE.RAVEN_ACTION};d.ravenActionUnstoredMsg=W}}}break}case"reaction":{var U,H,G=(U=h.metadata)==null?void 0:U.messageId,z=(H=V(h,r,a,i))==null||(H=H.obj.payload)==null||(H=H.content)==null?void 0:H.reactionMessage,j=o("WAJids").extractUserId(g.senderJid);z!=null&&j!=null&&d.reactionData.push({reaction:z,reactionExternalId:G,senderId:j,ts:o("WATimeUtils").castMilliSecondsToUnixTime(f.protobufTimestampMS)});break}case"edit":{var K,Q,X=(K=V(h,r,a,i))==null||(K=K.obj.payload)==null||(K=K.content)==null?void 0:K.editMessage,Y=(Q=h.metadata)==null?void 0:Q.senderId;if(X!=null){var J,Z=(J=X.key)==null?void 0:J.id,ee=X.timestampMs;if(Z!=null&&ee!=null&&Y!=null&&typeof ee=="number"){var te=o("MAWJids").toUserJid(Y),ne=te===t?o("WAJids").AUTHOR_ME:te;d.editMsgData.push({author:ne,editMsgContent:X,externalId:o("WAStanzaUtils").toStanzaId(d.externalId),originalMsgExternalId:o("WAStanzaUtils").toStanzaId(Z),ts:o("WATimeUtils").castMilliSecondsToUnixTime(ee)})}}break}case"poll_update":{var re,oe=V(h,r,a,i);if(oe==null)continue;var ae=(re=oe.obj.payload)==null||(re=re.content)==null?void 0:re.pollUpdateMessage;if(ae!=null){var ie={externalId:o("WAStanzaUtils").toStanzaId(g.rawIdentifierString)};ae.addOption!=null&&(ie.addOption=ae.addOption),ae.vote!=null&&(ie.vote=ae.vote),ae.pollCreationMessageKey!=null&&(ie.pollCreationMessageKey=ae.pollCreationMessageKey),d.groupPollUpdateData!=null?d.groupPollUpdateData.push(ie):d.groupPollUpdateData=[ie]}break}case"unknown":{var le=_.split(":"),se=le[0];D.MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),se||"null",le.length);break}default:g.type}}return a.add(e.otid),d}l.removeDeprecatedProtobufRestoreArgs=x,l.createUnstoredDbContentFromProtobufObject=N,l.decodeProtobufArray=H,l.decodeDecryptedMessageProtobuf=G}),98);
__d("WAAPIMetrics",["WAGlobals","WAJids","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===void 0&&(n={}),function(){for(var r=u(t,n),o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e.apply(void 0,[r].concat(a)).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function s(e,t,n){return n===void 0&&(n={}),function(){var r=u(t,n);return e.apply(void 0,arguments).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function u(e,t){var n,r;t===void 0&&(t={});var a=null;try{a=o("WAGlobals").getDependencies().isEmployee()&&o("WAGlobals").getDependencies().isUseridAnnotationEnabled()?o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()).slice(-5):null}catch(e){}return o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers.extends({},t,{string:babelHelpers.extends({},(n=(r=t)==null?void 0:r.string)!=null?n:{},{name:e,userHash:a})}))}l.withMetrics=e,l.withMetricWrapper=s}),98);
__d("WAAPIDeferred",["WAAPIMetrics","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("requireDeferred"))("WADbPersonalSenderKeyStatusTxns").__setRef("WAAPIDeferred"),u=e("WADbRegistrationApi").__setRef("WAAPIDeferred"),c=e("WADownloadMedia").__setRef("WAAPIDeferred"),d=e("WAGenerateAndUploadPreKeys").__setRef("WAAPIDeferred"),m=e("WAGetCurrentUserDeviceList").__setRef("WAAPIDeferred"),p=e("WAGetDevices").__setRef("WAAPIDeferred"),_=e("WAGetIdentityKeys").__setRef("WAAPIDeferred"),f=e("WANotifyDeviceChange").__setRef("WAAPIDeferred"),g=e("WAPublishAppDataProtocol").__setRef("WAAPIDeferred"),h=e("WAPublishMessage").__setRef("WAAPIDeferred"),y=e("WAQueryGroups").__setRef("WAAPIDeferred"),C=e("WARemoveCurrentDevice").__setRef("WAAPIDeferred"),b=e("WARemoveDevice").__setRef("WAAPIDeferred"),v=e("WASendAppDataFanoutProtocol").__setRef("WAAPIDeferred"),S=e("WASendMsgUtilV2").__setRef("WAAPIDeferred"),R=e("WASendPing").__setRef("WAAPIDeferred"),L=e("WASyncAbProps").__setRef("WAAPIDeferred"),E={getCurrentUserDeviceList:function(){return m.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getCurrentUserDeviceList,"getCurrentUserDeviceList")()})},syncAbProps:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.syncAbProps,"syncAbProps").apply(void 0,t)})},generateAndUploadPreKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.generateAndUploadPreKeys,"generateAndUploadPreKeys",{bool:{deferred_load:!0}}).apply(void 0,t)})},publishAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.publishAppData,"publishAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},getDevicesBeforeSend:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.getDevicesBeforeSend;return o("WAAPIMetrics").withMetrics(n,"getDevicesBeforeSend",{bool:{deferred_load:!0}}).apply(void 0,t)})},getIdentityKeys:function(){return _.load().then(function(e){var t=e.getIdentityKeysInWorker;return o("WAAPIMetrics").withMetrics(t,"getIdentityKeys",{bool:{deferred_load:!0}})()})},publishMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){var n=e.publishMessage;return o("WAAPIMetrics").withMetricWrapper(n,"publishMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},sendChatMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.sendChatMessage;return o("WAAPIMetrics").withMetrics(n,"sendChatMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},updateClockSkew:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.updateClockSkew,"updateClockSkew",{bool:{deferred_load:!0}}).apply(void 0,t)})},queryGroups:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!1]))})},queryGroupsForce:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!0]))})},getDevices:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getDevices,"getDevices",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeDevice,"=>",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeCurrentDevice:function(){return C.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeCurrentDevice,"removeCurrentDevice",{bool:{deferred_load:!0}})()})},notifyDeviceChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.notifyDeviceChange,"notifyDeviceChange",{bool:{deferred_load:!0}}).apply(void 0,t)})},saveLastSessionDeviceWasLinkedTo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.saveLastSessionDeviceWasLinkedTo,"saveLastSessionDeviceWasLinkedTo").apply(void 0,t)})},sendAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.sendAppDataToDevicesProtocol,"sendAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},setRotateSenderKeyToTrue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.load().then(function(e){return o("WAAPIMetrics").withMetrics(function(t,n){return e.bulkSetRotateSenderKeyToTrue(n)},"setRotateSenderKeyToTrue").apply(void 0,t)})},downloadMedia:function(t){return c.load().then(function(e){return e.downloadMedia(t)})},cachedDownloadFullMediaOnly:function(t){return c.load().then(function(e){return e.cachedDownloadFullMediaOnly(t)})}},k=E;l.default=k}),98);/*FB_PKG_DELIM*/
__d("BroadcastChat.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"5 5 25 25",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",d:"M18 28.07c6.393 0 11-4.467 11-10.57v-.002C29 11.396 24.393 7 18 7S7 11.396 7 17.498v.002c0 2.091.414 3.98 1.383 5.562.458.747.564 1.664.29 2.5l-.727 2.411c-.2.614.373 1.188.964.986l3.668-1.126a4.261 4.261 0 0 1 2.39-.09c.952.233 1.966.328 3.032.328zm0-8.27a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.31-5.888a.75.75 0 0 1 1.06.008l.176.179a5.293 5.293 0 0 1 0 7.402l-.175.178a.75.75 0 0 1-1.061.01l-.357-.351a.75.75 0 0 1-.008-1.061l.175-.178a3.293 3.293 0 0 0 0-4.598l-.175-.178a.75.75 0 0 1 .008-1.06l.357-.351zm-8.255 1.411a.75.75 0 0 0-.008-1.06l-.357-.351a.75.75 0 0 0-1.06.008l-.176.179a5.293 5.293 0 0 0 0 7.402l.175.178a.75.75 0 0 0 1.061.01l.357-.351a.75.75 0 0 0 .008-1.061l-.175-.178a3.293 3.293 0 0 1 0-4.598l.175-.178z",clipRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9578991145469240"}),null);
__d("GroupsCometGlobalChatCreationDialogQuery$Parameters",["GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometGlobalChatCreationDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometGlobalChatCreationDialog.entrypoint",["GroupsCometGlobalChatCreationDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("GroupsCometGlobalChatCreationDialogQuery$Parameters"),variables:{scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("GroupsCometGlobalChatCreationDialog.react").__setRef("GroupsCometGlobalChatCreationDialog.entrypoint")};l.default=e}),98);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("limit",e[0]),r[1]=t.createArray(),r[5]=(r[1].push("search_contacts"),r[1]),r[2]=t.i64.of_float(Date.now()),r[5]=(r[1].push(t.i64.to_string(r[2])),r[1]),r[3]=t.toJSON(r[1]),r[4]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),r[3],t.i64.cast([0,452]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertRankingContacts"),a.limit);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2}),l=e;i.default=l}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2}),l=e;i.default=l}),66);
__d("MWChatSearchTypeheadActionButtonViewItem.react",["CometTypeaheadViewItem.react","FDSSkittleIcon.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.entry,a=e.icon,i=e.onHighlightEntry,l=e.onPressEntry,u=e.title,c;t[0]!==a?(c=s.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:a,size:36}),t[0]=a,t[1]=c):c=t[1];var d=c,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x3ct3a4 xexx8yu x1icxu4v x18d9i69 x25sj25"},t[2]=m):m=t[2];var p;t[3]!==u?(p=s.jsx(r("MWXText.react"),{type:"body3",children:u}),t[3]=u,t[4]=p):p=t[4];var _;return t[5]!==n||t[6]!==d||t[7]!==i||t[8]!==l||t[9]!==p?(_=s.jsx("div",babelHelpers.extends({},m,{role:"listbox",children:s.jsx(r("CometTypeaheadViewItem.react"),{entry:n,isActive:!1,itemStartContent:d,onHighlightEntry:i,onPressEntry:l,role:"option",children:p})})),t[5]=n,t[6]=d,t[7]=i,t[8]=l,t[9]=p,t[10]=_):_=t[10],_}l.default=u}),98);
__d("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10056616957724259"}),null);
__d("MWCreateBroadcastChannelDialogQuery$Parameters",["MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCreateBroadcastChannelDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23896442089962141"}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters",["MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionCreateBroadcastChannelNuxQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNux.entrypoint",["JSResourceForInteraction","MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:r("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWQuickPromotionCreateBroadcastChannelNux.react").__setRef("MWQuickPromotionCreateBroadcastChannelNux.entrypoint")},s=e;l.default=s}),98);
__d("MWCreateBroadcastChannelDialog.entrypoint",["JSResourceForInteraction","MWCreateBroadcastChannelDialogQuery$Parameters","MWQuickPromotionCreateBroadcastChannelNux.entrypoint","NestedRelayEntryPointBuilderUtils"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{entryPoints:{nuxEntryPoint:o("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:r("MWQuickPromotionCreateBroadcastChannelNux.entrypoint"),entryPointParams:{}})},queries:{queryReference:{parameters:r("MWCreateBroadcastChannelDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWCreateBroadcastChannelDialog.react").__setRef("MWCreateBroadcastChannelDialog.entrypoint")};l.default=e}),98);
__d("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react",["fbt","BroadcastChannelQPL","BroadcastChat.svg.react","MWChatSearchTypeheadActionButtonViewItem.react","MWCreateBroadcastChannelDialog.entrypoint","MWLogBroadcastChannelFalcoEvent","emptyFunction","react","react-compiler-runtime","useBroadcastChannelImpressionLogger","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(9),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Create channel"),e[0]=t):t=e[0];var n=t,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={},e[1]=a):a=e[1];var i=r("useMWXEntryPointDialog")(r("MWCreateBroadcastChannelDialog.entrypoint"),a),l=i[0],c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c={clientExtras:{entry_point:"public_chats:omnipicker"},event:161,parentSurface:7,source:20,surface:4},e[2]=c):c=e[2];var m=r("useBroadcastChannelImpressionLogger")(c),p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={key:"newBroadcastChannel",label:"New Broadcast Channel",type:"entry"},e[3]=p):p=e[3];var _;e[4]!==l?(_=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:p,icon:r("BroadcastChat.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:function(){o("BroadcastChannelQPL").logCreateBroadcastChannelQPLStart("public_chats:omnipicker"),o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({clientExtras:{entry_point:"public_chats:omnipicker"},event:95,parentSurface:7,source:20,surface:4}),l({},d)},title:n}),e[4]=l,e[5]=_):_=e[5];var f;return e[6]!==m||e[7]!==_?(f=u.jsx("div",{ref:m,children:_}),e[6]=m,e[7]=_,e[8]=f):f=e[8],f}function d(){}l.default=c}),226);
__d("MessengerGroup.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 26 19",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M13 10c-2.13 0-3.96-1.5-3.96-4.75C9.04 2.6 10.71.83 13 .83c2.3 0 3.96 1.77 3.96 4.42C16.96 8.51 15.13 10 13 10zm6.62 8.33c.57 0 .88-.5.88-1.1 0-3.08-3.47-5.56-7.5-5.56-4.03 0-7.5 2.48-7.5 5.55 0 .62.3 1.11.88 1.11h13.24zm2.55-7.5c-1.57 0-2.92-1.08-2.92-3.45 0-1.93 1.23-3.21 2.92-3.21s2.91 1.28 2.91 3.21c0 2.37-1.34 3.45-2.91 3.45zm.81 6.67a.83.83 0 0 1-.83-.72l-.01-.11a6.3 6.3 0 0 0-1.7-3.65c-.2-.22-.14-.57.14-.67a4.95 4.95 0 0 1 1.59-.27c1.66 0 3.33.84 3.33 2.5 0 2.92-2.08 2.92-2.08 2.92h-.44zM.92 7.38c0 2.37 1.34 3.45 2.91 3.45s2.92-1.08 2.92-3.45c0-1.93-1.23-3.21-2.92-3.21S.92 5.45.92 7.38zm2.1 10.12h-.44S.5 17.5.5 14.58c0-1.66 1.67-2.5 3.33-2.5.54 0 1.08.1 1.6.27.27.1.33.45.13.67a6.3 6.3 0 0 0-1.7 3.65l-.01.1a.83.83 0 0 1-.83.73z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useMWLoggerEntrypoint",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("gkx")("23433"),n=null;return e!==void 0&&(e==="Inbox"?n=t?"messengerdotcom":"fb_groups:comet_www_inbox":e==="ChatTab"?n="fb_groups:comet_www_chat":e==="FullscreenChat"&&(n="fb_groups:comet_www_fullscreen_chat")),n}l.default=e}),98);
__d("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react",["fbt","$InternalEnum","GroupsCometChatsEngagementLogger","GroupsCometGlobalChatCreationDialog.entrypoint","LSThreadAttributionStore","MWChatSearchTypeheadActionButtonViewItem.react","MWLSThreadDisplayContext","MessengerGroup.svg.react","emptyFunction","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useMWLoggerEntrypoint","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=n("$InternalEnum")({CHAT_HEAD:"bottom_chat_create",JEWEL:"top_chat_create"});function d(){var e=o("react-compiler-runtime").c(14),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={},e[0]=t):t=e[0];var n=r("useMWXEntryPointDialog")(r("GroupsCometGlobalChatCreationDialog.entrypoint"),t),a=n[0],i=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),l=r("useMWLoggerEntrypoint")(i),d=o("LSThreadAttributionStore").getSourceForNewThread(),p=d==="chatheadsNewMessage"?c.CHAT_HEAD:d==="jewelNewMessage"?c.JEWEL:null,_=l!=null?l:"",f;e[1]!==_?(f={client_extras:{entry_point:_,origin:p!=null?p:""},event:"community_chat_button_impression",surface:"chat_creation_template_list"},e[1]=_,e[2]=f):f=e[2];var g=r("useGroupsCometChatsEngagementImpressionLogger")(f),h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h={key:"newCommunityChat",label:"New Community Chat",type:"entry"},e[3]=h):h=e[3];var y;e[4]!==i||e[5]!==l||e[6]!==a?(y=function(){a({entrypoint:l!=null?l:void 0,shouldCloseComposeTab:i==="ChatTab",shouldGoToMessenger:i==="Inbox"},m),o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:l!=null?l:"",origin:p!=null?p:""},event:"create_cc_button_clicked",source:"create_cc_button",surface:"chat_creation_template_list"})},e[4]=i,e[5]=l,e[6]=a,e[7]=y):y=e[7];var C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"Create community chat"),e[8]=C):C=e[8];var b;e[9]!==y?(b=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:h,icon:r("MessengerGroup.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:y,title:C}),e[9]=y,e[10]=b):b=e[10];var v;return e[11]!==g||e[12]!==b?(v=u.jsx("div",{ref:g,children:b}),e[11]=g,e[12]=b,e[13]=v):v=e[13],v}function m(){}l.default=d}),226);
__d("MWCMLightSpeedChatTabActionViewItems.react",["BaseDivider.react","MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react","MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react","MWPActor.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={divider:{marginTop:"x1xmf6yo",marginInlineEnd:"x1ys307a",marginBottom:"x1e56ztr",marginInlineStart:"xyqm7xq",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(2),t=r("gkx")("4710"),n=r("gkx")("24048"),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("MWPActor.react").isPromode(),e[0]=a):a=e[0];var i=a,l=n||i,c=!t||l,d=i||n,m;return e[1]===Symbol.for("react.memo_cache_sentinel")?(m=c?s.jsxs(s.Fragment,{children:[!t&&s.jsx(r("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react"),{}),d&&s.jsx(r("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react"),{}),s.jsx(r("BaseDivider.react"),{xstyle:u.divider})]}):null,e[1]=m):m=e[1],m}l.default=c}),98);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"],u,c,d=3;async function m(e,t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(15))?[]:_(await p(e,d))}async function p(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.cm_search_nullstate_metadata).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(18))}));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function _(t){return t.map(function(t,n){var a,i,l=t.communityId,d=t.contextLine,m=t.score,p=t.scoreType,_=t.secondaryThreadPictureUrl,f=t.secondaryThreadPictureUrlFallback,g=t.threadKey,h=t.threadName,y=t.threadPictureUrl,C=t.threadPictureUrlFallback,b=t.threadType,v=babelHelpers.objectWithoutPropertiesLoose(t,e),S={contactId:g,contactType:(c||(c=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:m,scoreIndex:(u||(u=o("I64"))).of_int32(n),scoreType:p};return{communityId:l!=null?(u||(u=o("I64"))).to_string(l):"",displayName:h,id:u.to_string(g),imageUrl:(a=y!=null?y:_)!=null?a:"",isAiBot:u.equal(b,c.ofNumber(201)),isContact:o("LSMessagingThreadTypeUtil").isOneToOne(b),isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(b),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:S,resultType:o("MWChatTemporarySearchResult").getResultType(c.ofNumber(13)),searchSource:"server",secondaryImageUrl:(i=_!=null?_:f)!=null?i:"",section:s._(/*BTDS*/"Your channels").toString(),subtext:d!=null?d:"",threadKey:g,threadType:b}})}l.fetchCCs=m,l.mapToSearchResults=_}),226);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=3;async function c(t,n){return(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))?[]:m(await d(t,u))}async function d(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.ai_bot_search_metadata));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function m(t){return t.map(function(t,n){var a=t.botId,i=t.contactViewerRelationship,l=t.contextLine,u=t.displayName,c=t.displayPictureUrl,d=t.score,m={contactId:a,contactType:(s||(s=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").BOT),score:d,scoreIndex:(e||(e=o("I64"))).of_int32(n),scoreType:s.ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:u,id:e.to_string(a),imageUrl:c!=null?c:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:e.equal(i,s.ofNumber(r("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:m,resultType:r("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:l!=null?l:"",threadKey:a,threadType:e.of_int32(201)}})}l.fetchGenAIBots=c,l.mapToSearchResults=m}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}}),s=e;l.default=s}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("MWPOfllineOpenMiniSearchSingleton").getInstance().search(e)}function s(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().add(e)}function u(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(e)}l.search=e,l.add=s,l.remove=u}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(t,n,r,o,a,i){"use strict";var e="Contact",l="ThreadName",s="ThreadParticipant",u={Contact:e,ThreadName:l,ThreadParticipant:s};i.MWPSearchType=u}),66);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:o("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},s=r("qpl")._(25301700,"2966");function u(){e.hasStarted=!1,e.query=null}function c(t){var n,a=t.queryString,i=t.sessionInstanceId,l=t.surface;return e.query!=null&&a===""||(e.hasStarted&&d(),e.instanceKey=o("MAWLoggerUtils").getInstanceKey(),e.hasStarted=!0,e.query=a!=null?a:"",e.sessionInstanceId=i,r("QPLUserFlow").start(s,{instanceKey:e.instanceKey}),p({annotations:{int:{query_length:(n=a==null?void 0:a.length)!=null?n:0},string:{surface:l}}})),e.instanceKey}function d(t){e.hasStarted&&(r("QPLUserFlow").endCancel(s,{annotations:{string:{end_action:t!=null?t:"unknown"}},instanceKey:e.instanceKey}),u())}function m(t){var n=t.annotations,o=t.point;e.hasStarted&&(r("QPLUserFlow").addPoint(s,o,{instanceKey:e.instanceKey}),n!=null&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey}))}function p(t){var n=t.annotations;e.hasStarted&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function _(t){var n=t.queryString,o=t.renderIndex,a=t.sessionInstanceId,i=t.source;e.hasStarted&&a===e.sessionInstanceId&&n===e.query&&r("QPLUserFlow").addPoint(s,"render_search_result_"+o,{data:{int:{render_index:o},string:{source:i!=null?i:"unknown"}},instanceKey:e.instanceKey})}function f(){e.hasStarted&&(r("QPLUserFlow").endSuccess(s,{instanceKey:e.instanceKey}),u())}l.qplStart=c,l.qplCancel=d,l.qplAddPoint=m,l.qplAddAnnotations=p,l.renderSearchResult=_,l.qplSuccess=f}),98);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchQPLLogger","MWSearchThreadUtils","ReQL","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("justknobx")._("5018");function c(t,n){return"p__"+(e||(e=o("I64"))).to_string(t)+"__"+e.to_string(n)}function d(e,t){if(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_start"}),f.contents==null)return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"}),Promise.resolve([]);var n=f.contents,a=o("MWPSearchOfflineOpenConversations").search(e).filter(function(e){return g(e,t)!==!0});return r("gkx")("6792")===!0?m(n,a,e):o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(n,(s||(s=o("LSIntEnum"))).ofNumber(7)).then(function(){return m(n,a,e)})}async function m(t,n,r){var a=_(await Promise.all(n.map(function(n){var a=n.category.type;if(a==null)return Promise.resolve();switch(a){case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:{var i=h(n.id);if(i!=null){var l=i[0];return v(t,(e||(e=o("I64"))).to_string(l),n.terms)}else return Promise.resolve()}case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return v(t,n.id,n.terms);case o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return y(t,n.id,n.terms,r)}}))),i=p(a.filter(Boolean));return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_end"}),i}function p(e){var t=e.filter(function(e){return e.resultType!==r("MWChatSearchResultType").GROUP}).sort(R),n=e.filter(function(e){return e.resultType===r("MWChatSearchResultType").GROUP}).sort(R),o=t.concat(n);return o}function _(e){if(!u)return e;var t=[],n=new Set;for(var r of e)r&&!n.has(r.id)&&(n.add(r.id),t.push(r));return t}var f={contents:void 0};function g(e,t){if(t)return!1;var n=e.category;return(n==null?void 0:n.type)!=="Contact"}function h(t){var n=t.split("__");if(n.length===3)return[(e||(e=o("I64"))).of_string(n[1]),e.of_string(n[2])]}async function y(t,n,a,i,l){l===void 0&&(l="offline");var u=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange((e||(e=o("I64"))).of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ig_contact_info).getKeyRange(e.of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(e.of_string(n),(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH)))]),c=u[0],d=u[1],m=u[2];if(!(c==null||C(c,i,l)))return o("MWChatTemporarySearchResult").fromContact(m!=null?m:void 0,void 0,c,d!=null?d:void 0,l,a,i)}function C(t,n,a){var i=o("LSContactBitOffset").hasWithDefault(66,t,!1);return t.isMemorialized===!0||(e||(e=o("I64"))).equal(t.contactViewerRelationship,(e||(e=o("I64"))).one)&&a!=="null_state_recent"||!(e||(e=o("I64"))).equal(t.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))||i&&b(t.name,n)}function b(e,t,n){n===void 0&&(n=.7);var r=e.trim().toLowerCase(),o=t.trim().toLowerCase(),a=!r.startsWith(o)||o.length/r.length<n;return a}async function v(t,n,r){var a,i=await Promise.all([(a=o("ReQL")).firstExnAsync(a.fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),a.firstAsync(a.leftJoin(a.fromTableAscending(t.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(n)).filter(function(e){return!S(e)}),o("ReQL").fromTableAscending(t.tables.ig_thread_info).getKeyRange(e.of_string(n))))]),l=i[0],s=i[1];if(s==null)return Promise.resolve();var u=s[0],c=s[1],d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(u,l,t),o("MWSearchThreadUtils").getThreadParticipants(u,t)]),m=d[0],p=d[1],_={contactId:e.zero,contactType:e.zero,score:e.to_float(u.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return o("MWChatTemporarySearchResult").fromThread(u,"offline",l,m[0],m[1],p,_,r,c)}function S(t){return t.folderName!=="inbox"||o("LSMessagingThreadTypeUtil").isChannelPreview(t.threadType)||o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType)&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&(e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))}function R(e,t){var n=e.rankingScore,r=n!=null?n.score:0,o=t.rankingScore,a=o!=null?o.score:0;return a>r?1:a<r?-1:0}l.getGroupParticipantKey=c,l.search=d,l.searchHelper=m,l.db=f,l.mapContact=y,l.mapThread=v}),98);
__d("MWChatSearchResultTypeMapping",["MWChatSearchResultType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWChatSearchResultType").GROUP:return 3;case r("MWChatSearchResultType").MESSAGE:return 5;case r("MWChatSearchResultType").PAGE:return 4;case r("MWChatSearchResultType").USER:return 1;case r("MWChatSearchResultType").AI_BOT:return 16}}l.mapMWChatSearchResultTypeToLSSearchType=e}),98);
__d("MWRecentSearchesStorage",["FBLogger","LSIntEnum","MWChatSearchResultTypeMapping","MWSearchStandardResultTypeMappings","WATimeUtils","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="msgr_web_recent_searches";function u(t){var n;if(((n=t.rawData.serverSearchResult)==null?void 0:n.type_)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.type_);var r=t.rawData.searchResultType!=null?o("MWSearchStandardResultTypeMappings").mapSearchStandardResultTypeToLSSearchType(t.rawData.searchResultType):void 0;return r!=null?(e||(e=o("LSIntEnum"))).unwrapIntEnum(r):o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.rawData.resultType)}function c(t,n){var r;if(((r=t.rawData.serverSearchResult)==null?void 0:r.threadType)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.threadType);if(t.rawData.threadType!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.threadType);if(n===3)return t.rawData.isE2EE===!0?16:2}function d(e){var t=u(e);return{key:e.key,lastAccessedTimestamp:o("WATimeUtils").unixTime(),searchResultType:t,threadType:c(e,t)}}async function m(e){var t=await p(),n=t.find(function(t){return t.key===e.key});return n!=null?n.lastAccessedTimestamp=o("WATimeUtils").unixTime():t.push(d(e)),new Promise(function(e){r("WebAsyncStorage").setItem(s,JSON.stringify(t),function(t){t!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",t.toString()),e()})})}function p(){return new Promise(function(e){r("WebAsyncStorage").getItem(s,function(t,n){if(t!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",t.message),e([]);if(n==null)return e([]);try{var o=JSON.parse(n);return e(o.sort(function(e,t){return t.lastAccessedTimestamp-e.lastAccessedTimestamp}))}catch(t){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),e([])}})})}function _(e){return new Promise(function(t){r("WebAsyncStorage").getItem(s,function(n,o){if(n!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",n.message),t();if(o==null)return t();try{var a=JSON.parse(o),i=a.filter(function(t){return t.key!==e});return r("WebAsyncStorage").setItem(s,JSON.stringify(i),function(e){e!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",e.toString()),t()})}catch(e){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),t()}})})}l.upsertRecentSearchEntry=m,l.getAllRecentSearches=p,l.clearRecentSearchItem=_}),98);
__d("MWChatSearchFetchNSRecentSearches",["FBLogger","I64","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSVerifyContactExistsWithID","LSVerifyThreadRowExistsStoredProcedure","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWPSearchOfflineOpenConversationsUtils","MWRecentSearchesStorage","MWSearchStandardResultTypeMappings","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={searchSource:"null_state_recent",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForRecentSearches(),sectionAnalyticsName:"null_state_recent"},c=4,d={isAiBot:!1,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,subtext:""},m=[1,2,4,16],p=[3,13,14];function _(t,n){var a;return babelHelpers.extends({displayName:(n==null?void 0:n.threadName)||"",id:t.key,imageUrl:"",resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapLSSearchTypeToSearchStandardResultType((e||(e=o("LSIntEnum"))).ofNumber(t.searchResultType)),threadType:(a=n==null?void 0:n.threadType)!=null?a:t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0},d,u)}async function f(t,n,a){var i=o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n),l=await o("ReQL").firstAsync(i);l==null&&r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(t,function(t){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(t),{syncGroup:(e||(e=o("LSIntEnum"))).ofNumber(1),threadKey:n,threadType:a})},"readwrite"))}async function g(e){var t=await o("MWRecentSearchesStorage").getAllRecentSearches(),n=await Promise.all(t.map(async function(t){if(m.includes(t.searchResultType)){await o("LSVerifyContactExistsWithID").waitForTaskFinish(e,(s||(s=o("I64"))).of_string(t.key),!1);var n=await o("MWPSearchOfflineOpenConversationsUtils").mapContact(e,t.key,[],"","null_state_recent");return n==null?null:babelHelpers.extends({},n,u)}if(p.includes(t.searchResultType)){if(t.threadType!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecureGroup((s||(s=o("I64"))).of_int32(t.threadType)))return null;r("promiseDone")(f(e,(s||(s=o("I64"))).of_string(t.key),t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0));var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(s.of_string(t.key))),i=_(t,a);return i==null?null:babelHelpers.extends({},i,u)}return r("FBLogger")("messenger_web_search").warn("Unknown result type in recent searches: %s",t.searchResultType),Promise.resolve()}));return n.filter(Boolean).slice(0,c)}l.fetchNullStateRecentSearches=g}),98);
__d("MWChatSearchFetchRecommendations",["I64","LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","cr:8409","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i,l,c){var d=a.includes((u||(u=o("LSIntEnum"))).ofNumber(13)),p=a.includes(u.ofNumber(16));r("promiseDone")((e||(e=n("Promise"))).all([(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(1))&&n("cr:8409")!=null?n("cr:8409").fetchNullStateRecentSearches(t):(e||(e=n("Promise"))).resolve([]),o("MWChatSearchFetchContactRecommendations").fetchContacts(t,i,l),d?o("MWChatSearchFetchCCRecommendations").fetchCCs(t,l):[],p?o("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(t,l):[]]).then(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=m(t,n,r,o);return c(a)}))}function d(e,t,n,a,i,l){return r("promiseDone")(o("MWChatSearchIssueLightspeedQuery").makeSearchQuery(t,a,i)),r("gkx")("15587")?r("promiseDone")(o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,(u||(u=o("LSIntEnum"))).ofNumber(7)),function(){c(e,t,n,a,l)}):c(e,t,n,a,l),r("emptyFunction")}function m(e,t,n,r){return[].concat(e,r,n,t)}l.requestRecommendations=d,l.blendSearchResults=m}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1},c=(e||(e=o("I64"))).of_string("100");function d(t){if(!s.contents&&(e||(e=o("I64"))).gt(c,(e||(e=o("I64"))).zero)){s.contents=!0,r("promiseDone")(t.runInTransaction(function(e){return r("LSInsertRankingContactsStoredProcedure")(r("LSFactory")(e),{limit:c})},"readwrite",void 0,void 0,i.id+":39"),function(){u.contents=!0});return}}function m(){return u.contents}l.insertRankingContacts=d,l.isDone=m}),98);
__d("MWChatSearchIssueMAWFTSQuery",["I64","LSContactBitOffset","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MNetRankType","MWChatSearchResultTypeMapping","MWChatTemporarySearchResult","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchQPLLogger","MWSearchStandardResultTypeMappings","MWSearchThreadUtils","ReQL","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a,i,l){return o("MAWChatJid").toThreadKeyMaybe(t.tables,n).then(function(n){if(r("vulture")("55CqO8SSMoXHNOOlno0v1POeV24="),n!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n)).then(function(t){return{displayName:i!=null?i:"",id:a,imageUrl:"",isAiBot:t!=null&&(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:t!=null&&o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:t!=null&&o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:t!=null&&o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:t!=null&&o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:t!=null&&o("LSThreadBitOffset").has(229,t),isVerified:!1,matchedTerms:l,resultType:o("MWChatTemporarySearchResult").getResultType((s||(s=o("LSIntEnum"))).ofNumber(5)),searchResultType:14,searchSource:"secure",section:"",subtext:"",threadKey:n}})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t)).then(function(t){return t!=null?o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(n){return(e||(e=o("I64"))).equal(n.armadilloThreadId,t.jid)})).then(function(e){return e!=null?e.openThreadId:t.jid}):Promise.resolve()})}function m(e){var t=e.score-1e-6;return{contactId:e.contactId,contactType:e.contactType,score:t,scoreIndex:e.scoreIndex,scoreType:e.scoreType}}function p(e,t){return d(e,t).then(function(n){var a=n!=null?n:e,i=n!=null;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(a,(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH))).then(function(e){if(e!=null)return i?m(e):e})})}function _(t,n,r,a){var i,l=(i=n.threadDescription)!=null?i:"";return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(15))&&(l=o("MWLSThreadTitle").getThreadTitleWithSecondaryNames(n.threadDescription,r,a,n.threadType).toString()),l}async function f(t,n,r,a){var i=await Promise.all([o("MAWChatJid").toThreadKeyMaybe(t.tables,n),o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId}))]),l=i[0],u=i[1];if(l!=null){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(l));if(!(c==null||c.folderName!=="inbox")){var d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(c,u,t),o("MWSearchThreadUtils").getThreadParticipants(c,t),p(c.threadKey,t)]),m=d[0],f=d[1],g=d[2],h=m[0],y=m[1],C=o("LSMessagingThreadTypeUtil").isOneToOne(c.threadType),b=o("LSMessagingThreadTypeUtil").isGroup(c.threadType)?(s||(s=o("LSIntEnum"))).ofNumber(3):(s||(s=o("LSIntEnum"))).ofNumber(1),v=null;return C===!0&&(v=await o("MWGetOtherContactOrSelf").getOtherContactOrSelf(c.threadKey,u,t)),{displayName:o("MWLSThreadTitle").getDefaultThreadTitle(c.threadName,u,f,c.threadType).toString(),id:(e||(e=o("I64"))).to_string(c.threadKey),imageUrl:h,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:C,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:v!=null?o("LSContactBitOffset").has(23,v):!1,matchedTerms:a,otherUserId:v?(e||(e=o("I64"))).to_string(v.id):void 0,rankingScore:g,resultType:o("MWChatTemporarySearchResult").getResultType(b),searchResultType:o("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(c.threadType),searchSource:"secure",secondaryImageUrl:y,section:"",subtext:_(r,c,u,f),threadKey:c.threadKey,threadType:c.threadType}}}}async function g(t,n,r){var a,i,l=await o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),u=await o("MAWChatJid").toThreadKeyMaybe(t.tables,n);if(u==null)return null;var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(u));if(c==null)return null;var d=await o("MWSearchThreadUtils").getThreadPics(c,l,t),m=d[0],p=d[1],_={contactId:(e||(e=o("I64"))).zero,contactType:e.zero,score:e.to_float(c.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return{displayName:(a=c.threadName)!=null?a:"",id:e.to_string(u),imageUrl:m,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:!1,matchedTerms:r,rankingScore:_,resultType:o("MWChatTemporarySearchResult").getResultType(s.ofNumber(3)),searchResultType:3,searchSource:"secure",secondaryImageUrl:p,section:"",subtext:(i=c.threadDescription)!=null?i:"",threadKey:u}}async function h(e,t){var n=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await Promise.all(e.map(function(e){switch(e.recordType){case"msg":{var r=e.msg,o=r==null?void 0:r.msgId;return r==null||o==null?null:c(n,e.chatJid,o,r.content,e.matchedTerms)}case"groupInfo":return g(n,e.groupJid,e.matchedTerms);case"participant":return f(n,e.threadJid,t,e.matchedTerms)}}));return r.filter(Boolean)}function y(t,n,r){return t.filter(function(t){var a=(s||(s=o("LSIntEnum"))).ofNumber(o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.resultType)),i=n.includes(a);if(!i)return!1;var l=(e||(e=o("I64"))).equal(a,s.ofNumber(3));return!l||r})}function C(e,t,n,r){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_start"}),o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:r.query,searchMode:o("MAWBridgeSearchMsg").NON_MESSAGE_CONTENT_SEARCH},{timeoutMs:1e4}).then(function(e){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_end"}),h(e,t)}).then(function(t){return y(t,e,n)})}l.filterSearchResults=y,l.fetchResults=C}),98);
__d("mwGroupEntriesForDisplay",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new Map;for(var n of e){var r,o,a=(r=n.rawData.section)!=null?r:"",i=(o=t.get(a))!=null?o:[];i.push(n),t.set(a,i)}return t}i.mwGroupEntriesForDisplay=e}),66);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["MWCMLightSpeedChatTabActionViewItems.react","MWXText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["showActionItems","ariaProps","children","entries","highlightedEntry"],s,u=s||(s=o("react")),c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(19),n=e.activeEntryKey,a=e.children,i=e.entries,l=e.itemRole,s=e.title,c="chatSearchListHeading-"+s.toString().replace(/\s/g,"-");if(i!=null&&i.length>0){var d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={className:"xexx8yu x1icxu4v x18d9i69 x25sj25"},t[0]=d):d=t[0];var m;t[1]!==s||t[2]!==c?(m=s?u.jsx("div",{className:"x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXText.react"),{id:c,isSemanticHeading:!0,type:"entityHeaderMeta1",children:s})}):null,t[1]=s,t[2]=c,t[3]=m):m=t[3];var p;if(t[4]!==n||t[5]!==a||t[6]!==i||t[7]!==l){var _;t[9]!==n||t[10]!==a||t[11]!==l?(_=function(t,r){var e=n===t.key;return a({entry:t,index:r,isActive:e,itemRole:l})},t[9]=n,t[10]=a,t[11]=l,t[12]=_):_=t[12],p=i.map(_),t[4]=n,t[5]=a,t[6]=i,t[7]=l,t[8]=p}else p=t[8];var f;t[13]!==p||t[14]!==c?(f=u.jsx("ul",{"aria-labelledby":c,children:p}),t[13]=p,t[14]=c,t[15]=f):f=t[15];var g;return t[16]!==m||t[17]!==f?(g=u.jsxs("li",babelHelpers.extends({},d,{children:[m,f]})),t[16]=m,t[17]=f,t[18]=g):g=t[18],g}return null}function m(t){var n=t.showActionItems,a=t.ariaProps,i=t.children,l=t.entries,s=t.highlightedEntry,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p=s!=null?s.key:null,_=c(function(){return o("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(l)},[l]),f=r("getItemRoleFromCompositeRole")(a.role);return u.jsxs("ul",{className:"x1yrsyyn xyri2b x10b6aqq x1c1uobl","data-testid":void 0,role:"listbox",children:[n&&u.jsx(r("MWCMLightSpeedChatTabActionViewItems.react"),{}),Array.from(_.entries()).map(function(e){var t=e[0],n=e[1];return u.jsx(d,{activeEntryKey:p,children:i,entries:n,itemRole:f,title:t},t)})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e||(e=o("LSIntEnum"))).ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(13)].concat(r("gkx")("24112")?[(e||(e=o("LSIntEnum"))).ofNumber(14)]:[]),u=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2)],c=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(5)],d=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],m=[e.ofNumber(1)],p=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)].concat([e.ofNumber(13)]),_=[e.ofNumber(1),e.ofNumber(2)],f=[e.ofNumber(1),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],g=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(2)],h=[e.ofNumber(1),e.ofNumber(2)];l.allSupportedTypes=s,l.supportedTypesForMSplitUser=u,l.allSupportedTypesWithMessageSearch=c,l.armadilloSupportedTypes=d,l.onlyContacts=m,l.broadcastFlowSupportedTypes=p,l.addParticipantBase=_,l.addParticipantXac=f,l.socialChannelsSupportedTypes=g,l.communityDirectInviteSupportedTypes=h}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1};function c(t){if(!s.contents){s.contents=!0,r("promiseDone")(o("MWLSDatabaseLazySync").sync(t,(e||(e=o("LSIntEnum"))).ofNumber(7)),function(){u.contents=!0});return}}function d(){return u.contents}l.sync=c,l.isDone=d}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts))}function c(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.threads).filter(function(t){return(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}))}function d(t,n){return c(n).then(function(r){var a=new Set(r.map(function(t){return(e||(e=o("I64"))).to_string(t.threadKey)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.participants).filter(function(n){return!(e||(e=o("I64"))).equal(n.contactId,t)&&a.has((e||(e=o("I64"))).to_string(n.threadKey))}).map(function(e){var t=[e,o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(e.contactId),i.id+":54")];return t}))})}l.fetchContacts=u,l.fetchGroupThreads=c,l.fetchGroupParticipants=d}),98);
__d("MWPSearchOpenIndexer",["I64","LSIntEnum","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=new Map,d=new Map;function m(t){var n=t.id,r=t.name,a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),u.set(a,i)}function p(e){var t=u.get(e);if(t!=null){u.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function _(t){var n=t.threadKey,r=t.threadName;if(r!=null){var a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),c.set(a,i)}}function f(e){var t=c.get(e);if(t!=null){c.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function g(e,t){if(t!=null){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e.threadKey,e.contactId),r=t.name;e.nickname!=null&&(r+=" "+e.nickname);var a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:r.trim(),id:n};o("MWPSearchOfflineOpenConversations").add(a),d.set(n,a)}}async function h(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t.contactId)),a=await y(e,t.threadKey);if(!(a&&r("gkx")("16989")))return g(t,n)}async function y(t,n){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n));return r==null?!1:!(e||(e=o("I64"))).equal(r.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}function C(e,t){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e,t),r=d.get(n);if(r!=null){d.delete(n),o("MWPSearchOfflineOpenConversations").remove(r);return}}function b(t,n){switch(n.operation){case"add":return m(n.value);case"put":return p((e||(e=o("I64"))).to_string(t)),m(n.value);case"delete":return p((e||(e=o("I64"))).to_string(t))}}function v(t,n){switch(n.operation){case"add":return _(n.value);case"put":return f((e||(e=o("I64"))).to_string(t)),_(n.value);case"delete":return f((e||(e=o("I64"))).to_string(t))}}function S(e,t,n,r){switch(r.operation){case"add":return h(e,r.value);case"put":return C(t,n),h(e,r.value);case"delete":return Promise.resolve(C(t,n))}}function R(e,t,n,r){o("MWPSearchOfflineOpenConversationsUtils").db.contents=e,t.forEach(m),n.forEach(_),r.forEach(function(e){var t=e[0],n=e[1];return g(t,n)})}l.onContactChanged=b,l.onGroupThreadChanged=v,l.onGroupParticipantChanged=S,l.startInitialIndex=R}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d={contents:!1},m={contents:!1},p={contents:!1};function _(t){if(!p.contents){p.contents=!0,(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){o("MWChatSearchInsertRankingContacts").insertRankingContacts(t),o("MWLSSyncRankings").sync(t);var a=(c||(c=o("I64"))).of_string(r("CurrentUser").getID());if(!d.contents){d.contents=!0;var i=r("gkx")("16989");r("promiseDone")((e||(e=n("Promise"))).all([o("MWPSearchIndexingSource").fetchContacts(t),i?o("MWPSearchIndexingSource").fetchGroupThreads(t):(e||(e=n("Promise"))).resolve([]),i?o("MWPSearchIndexingSource").fetchGroupParticipants(a,t):(e||(e=n("Promise"))).resolve([])]).then(function(e){var n=e[0],r=e[1],a=e[2];o("MWPSearchOpenIndexer").startInitialIndex(t,n,r,a)}),function(){m.contents=!0},function(e){r("FBLogger")("messenger_web_search").catching(e).mustfix("Error indexing contacts for search")}),o("ReQL").fromTableAscending(t.tables.contacts).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onContactChanged(n,t)}),i&&(o("ReQL").fromTableAscending(t.tables.threads).filter(function(e){return(c||(c=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))}).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onGroupThreadChanged(n,t)}),o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey","nickname"]).filter(function(e){return!(c||(c=o("I64"))).equal(e.contactId,a)}).subscribe(function(e,n){var a=e[0],i=e[1];r("promiseDone")(o("MWPSearchOpenIndexer").onGroupParticipantChanged(t,a,i,n))}))}});return}}function f(e){return e.runInTransaction(function(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})},"readwrite",void 0,void 0,i.id+":122")}function g(){return o("MWLSSyncRankings").isDone()&&o("MWChatSearchInsertRankingContacts").isDone()?m.contents:!1}l.makeAll=_,l.clearAll=f,l.isDone=g}),98);
__d("SearchTransportType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6}),l=e;i.default=l}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("844"),s=o("FalcoLoggerInternal").create("universal_search_end",e),u=s;l.default=u}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("846"),s=o("FalcoLoggerInternal").create("universal_search_result_selected",e),u=s;l.default=u}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52,NULL_STATE_SUGGESTED_REELS:53,NULL_STATE_NOTIFICATIONS:54}),l=e;i.default=l}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"noncontacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups",MESSAGE_SEARCH:"message_search"}),u=function(t){switch(t){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function c(e){return e===!0?1:3}function d(e){return e===!0?0:2}function m(e,t){var n=t.searchSource,r=t.section,o=t.sectionAnalyticsName;if(e==="")return n==="null_state_recent"?1:3;if(s.cast(o)===s.MESSAGE_SEARCH)return 10;if(n!=="server"||r==="")return 5;var a=s.cast(o);if(a==null)return 11;switch(a){case s.CM_THREADS:return 13;case s.CONTACTS_GROUPS:return 5;case s.NON_CONTACTS:return 6;case s.PAGES:return 9;default:return 11}}function p(e){return(e!=null?e:-1).toString()}function _(t,n,a,i){var l=a.rawData,s=l.id,d=l.isE2EE,_=l.isEPD,f=l.renderIndex,g=l.searchResultType,h=l.searchSource,y=l.serverSearchResult,C=p(f),b=s,v=c(d);if(y!=null){var S;b=(S=y.resultId)!=null?S:b,v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y==null?void 0:y.threadType)?1:3,C=(e||(e=o("I64"))).to_string(y.globalIndex)}if(r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:u(h),is_epd:r("gkx")("23390")||_,search_result:{query_string:n,result_fbid:b,result_index:C,result_type:g!=null?g:7},session_id:t,transport_type:v,ui_section:m(n,l)}}),!i.current){var R=7;a.rawData.resultType===r("MWChatSearchResultType").MESSAGE&&(R=23),r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:R,is_epd:r("gkx")("24110")||_,session_id:t,transport_type:v}}),i.current=!0}}l.SectionAnalyticsNameType=s,l.getLoggingDataSources=u,l.getTransportType=c,l.getLsTransportType=d,l.mapSectionToSearchUISection=m,l.logResultSelected=_}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType","MWSearchLogging"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=s._(/*BTDS*/"Search messages for {param}",[s._param("param",e)]).toString();return{key:e,label:t,rawData:{displayName:t,id:"0",imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:r("MWChatSearchResultType").MESSAGE,searchResultType:14,secondaryImageUrl:"",sectionAnalyticsName:o("MWSearchLogging").SectionAnalyticsNameType.MESSAGE_SEARCH,subtext:""},type:"entry"}}l.createMessageSearchHeaderEntry=e}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;return{key:e.id,label:e.displayName,rawData:{canViewerMessage:e.canViewerMessage,communityId:e.communityId,defaultE2eeThreadOneToOne:e.defaultE2eeThreadOneToOne,defaultE2eeThreads:e.defaultE2eeThreads,displayName:e.displayName,hasCutoverThread:e.hasCutoverThread,id:e.id,igid:e.resultIgid,imageUrl:e.imageUrl,isAiBot:e.isAiBot,isContact:e.isContact,isDisappearingModeSettingOn:e.isDisappearingModeSettingOn,isE2EE:e.isE2EE,isEPD:e.isEPD,isGroupCreationReachable:e.isGroupCreationReachable,isGroupsXacEligible:!!e.isGroupsXacEligible,isInstagramAccount:!!e.isInstagramAccount,isInstamadilloCutover:e.isInstamadilloCutover,isInteropEligible:e.isInteropEligible!==!1,isRestrictedByViewer:e.isRestrictedByViewer,isTTLCClipEnabled:!!e.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:!!e.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:!!e.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:!!e.isTTLCStoryShareEnabled,isViewerUnconnected:e.isViewerUnconnected,isWAEligible:e.isWAEligible,otherUserId:e.otherUserId,rankingScore:e.rankingScore,reachabilityStatus:e.reachabilityStatus,renderIndex:t,resultType:e.resultType,searchResultType:e.searchResultType,searchSource:e.searchSource,secondaryImageUrl:(n=e.secondaryImageUrl)!=null?n:"",section:e.section,sectionAnalyticsName:e.sectionAnalyticsName,serverSearchResult:e.serverSearchResult,subtext:e.subtext,subtextAdditional:e.subtextAdditional,supportsE2eeSpamdStorage:e.supportsE2eeSpamdStorage,threadType:e.threadType,verificationStatus:e.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:e.waAddressable,waEligibility:e.waEligibility},type:"entry"}}i.default=e}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===r("MWChatSearchSurfaces").instagramAll?e:e.filter(function(e){return!e.isInstagramAccount})}l.default=e}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){return function(n){var r=n.entries,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return babelHelpers.extends({entries:r.filter(function(e){return!t.includes(e.key)})},o)}}i.default=l}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){var n,r=t.entries,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=(n=t.params)==null?void 0:n.query,i=r.reduce(function(e,t,n){var r=t.rawData.section;if(r==null)return e;r===""&&e.set(r,0);var o=e.get(r),a=o==null?n:Math.min(o,n);return e.set(r,a),e},new Map),l=r.map(function(e,t){var n=e.key,r=e.label,o=e.rawData,l=o.section;return{key:n,label:r,rawData:babelHelpers.extends({},o,{query:a,renderIndex:t,sectionRenderIndex:l==null?-1:i.get(l)}),type:"entry"}});return babelHelpers.extends({entries:l},o)}i.default=l}),66);
__d("sortMWChatSearchLocalResults",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={group:1,message:2,messages:3,page:4,user:0},s=r("gkx")("23913");function u(t,n){var r={};for(var o of t){var a;r[o.id]=(a=o.rankingScore)==null?void 0:a.score}var i=t.sort(function(t,o){var a,i,l=e[t.resultType],u=e[o.resultType];if(l!==u)return l-u;if(s&&n.length>1){var c,d,m,p,_=(c=(d=t.matchedTerms)==null?void 0:d.length)!=null?c:0,f=(m=(p=o.matchedTerms)==null?void 0:p.length)!=null?m:0;if(f!==_)return f-_}var g=(a=r[t.id])!=null?a:0,h=(i=r[o.id])!=null?i:0;return h-g});return i}l.default=u}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWSearchQPLLogger","MWStaticSearchEntries","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","gkx","isArmadillo","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=10,c=10,d=r("isArmadillo")(),m=(function(){function t(t){var n=t.database,a=t.excludedIDs,i=a===void 0?[]:a,l=t.lightspeedSupportedTypes,s=l===void 0?o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:l,u=t.source,c=u===void 0?r("MWChatSearchSurfaces").universal:u,d=t.includeRecommendations,m=d===void 0?!0:d,p=t.includeGroupSearch,_=p===void 0?!1:p,f=t.includeMessageSearchEntry,g=f===void 0?!0:f,h=t.nullstateRankType,y=h===void 0?r("gkx")("17703")?(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED):(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):h,C=t.includeAiBots,b=C===void 0?!0:C;this.$1=[],this.$5=function(){},this.$1=i,this.$2=c===r("MWChatSearchSurfaces").omnipickerArmadillo?o("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:s,this.$3=c,this.$4=n,this.$6=m,this.$7=_,this.$8=g,this.$9=y,this.$10=b,o("MWPSearchSystem").makeAll(n)}var a=t.prototype;return a.resolveData=async function(t,n){var e=n.map(r("createMWChatSearchTypeaheadDataEntry")),a=[].concat(this.$8&&t.query.length>1?[o("MWStaticSearchEntries").createMessageSearchHeaderEntry(t.query)]:[],e),i=o("MWChatSearchFilteringUtils").dedupeByThreadKey(a),l=await o("MWChatSearchFilteringUtils").filterSearchResults(i,this.$4,!1,d,!this.$10),s=r("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return r("mwChatSearchPayloadEnumerate")(s({entries:l,params:t}))},a.fetchNetwork=function(t){var e=this;return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},int:{source:(s||(s=o("I64"))).to_int32(this.$3)}}}),this.$5(),r("relay-runtime/network/RelayObservable").create(function(n){if(t.query.length===0){e.$5=e.fetchNullstateResults(t,n);return}var a=[],i=[],l=!1;o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{query_length:t.query.length}},point:"local_query_start"});var s=Promise.allSettled(e.issueLocalSearchQuery(t)).then(async function(s){var u=s[0],c=s[1],d=u.status==="fulfilled"?u.value:[],m=c.status==="fulfilled"?c.value:[];o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{offline_search_results_count:m.length,secure_search_results_count:d.length}},point:"local_query_end"}),a=e.transformLocalSearchResults(d,m),a=r("sortMWChatSearchLocalResults")(a,t.query),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var p=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_end"}),l||n.next(p)}).catch(function(e){r("FBLogger")("messenger_search").catching(e).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),u=o("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;r("justknobx")._("2003")&&(u=o("MWChatSearchIssueLightspeedQuery").requestResults),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"server_query_start"});var c=u(e.$4,e.$2,e.$3,e.$7,t,function(l){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{server_search_results_count:l.length}},point:"server_query_end"}),i=l;var u=t.query.length>0&&o("MWPSearchSystem").isDone(),c=u?s:Promise.resolve();o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{wait_for_local_search:u}},point:"wait_for_local_search_start"}),r("promiseDone")(c.finally(async function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"wait_for_local_search_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var r=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{total_results_count:r.entries.length}},point:"resolve_data_end"}),n.next(r),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),n.complete()}))});e.$5=function(){c(),l=!0}})},a.issueLocalSearchQuery=function(t){return[n("cr:3752")!=null?n("cr:3752").fetchResults(this.$2,this.$3,this.$7,t):Promise.resolve([]),this.$3!==r("MWChatSearchSurfaces").broadcast?o("MWPSearchOfflineOpenConversationsUtils").search(t.query,this.$7):Promise.resolve([])]},a.transformLocalSearchResults=function(t,n){var e=u<=0?n:n.slice(0,u),r=c<=0?t:t.slice(0,c);return e.concat(r)},a.fetchNullstateResults=function(n,a){var t=this;return this.$6?(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(16))},int:{null_state_rank_type:(s||(s=o("I64"))).to_int32(this.$9)}},point:"null_state_query_start"}),o("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,n,async function(e){var i=r("filterInstagramContactsMWChatSearchLocalEntries")(e,t.$3);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"null_state_query_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var l=await t.resolveData(n,i);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{null_state_results_count:l.entries.length}},point:"resolve_data_end"}),a.next(l),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),a.complete()})):(a.next({entries:[],params:n}),a.complete(),function(){})},a.setExcludedIds=function(t){this.$1=t},t})();l.default=m}),98);
__d("MWJewelSearchTypeaheadViewItemStartContent.react",["I64","LSMessagingThreadTypeUtil","MWChatFacepile.react","MWChatProfile.react","MWChatSearchResultType","MWFacepile.react","MWLSThread","MWXIconMagnifyingGlass","MWXIconStrict.react","getLSMediaThreadPictureUrl","gkx","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(18),n=e.entry,a=n.rawData,i=a.imageUrl,l=a.resultType,c=a.searchSource,m=a.secondaryImageUrl,p;t[0]!==n.key?(p=(s||(s=o("I64"))).of_string_opt(n.key),t[0]=n.key,t[1]=p):p=t[1];var _=p,f=o("MWLSThread").useThread(_!=null?_:null,d),g;t[2]!==f?(g=f!=null?f:{},t[2]=f,t[3]=g):g=t[3];var h=g,y=h.threadType,C;t[4]!==f?(C=f!=null?r("getLSMediaThreadPictureUrl")(f):null,t[4]=f,t[5]=C):C=t[5];var b=C;if(l===r("MWChatSearchResultType").MESSAGE){var v;return t[6]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx("div",{className:"x1qhmfi1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXIconStrict.react"),{color:"primary",icon:r("MWXIconMagnifyingGlass"),isDecorative:!0,size:20})}),t[6]=v):v=t[6],v}if(c==="null_state_recent"&&r("gkx")("17176")&&y!=null&&o("LSMessagingThreadTypeUtil").isGroup(y)&&_!=null){var S;return t[7]!==_||t[8]!==b||t[9]!==y?(S=b!=null?u.jsx(r("MWChatProfile.react"),{size:36,src:b}):u.jsx(r("MWFacepile.react"),{actualBadge:null,onlyAuthoratitiveContacts:!0,photoSize:36,threadKey:_,threadType:y}),t[7]=_,t[8]=b,t[9]=y,t[10]=S):S=t[10],S}var R=!(y!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(y));if(r("isStringNullOrEmpty")(m)){var L;return t[11]!==i?(L=u.jsx(r("MWChatProfile.react"),{size:36,src:i}),t[11]=i,t[12]=L):L=t[12],L}if(R){var E;return t[13]!==i||t[14]!==m?(E=u.jsx(r("MWChatFacepile.react"),{firstParticipantURI:i,secondParticipantURI:m,size:36}),t[13]=i,t[14]=m,t[15]=E):E=t[15],E}var k;return t[16]!==m?(k=u.jsx(r("MWChatProfile.react"),{size:36,src:m}),t[16]=m,t[17]=k):k=t[17],k}function d(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,o=e.threadType;return{threadPictureUrl:t,threadPictureUrlExpirationTimestampMs:n,threadPictureUrlFallback:r,threadType:o}}l.default=c}),98);
__d("MWJewelSearchTypeaheadViewItemUtils",["fbt","ConstUriUtils","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","MWSearchLogging","QPLUserFlow","UniversalSearchResultSelectedFalcoEvent","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","gkx","isTlcSearchEnabled","justknobx","qpl"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=function(t){if(t==null)return null;var e=t.loggingSessionId;return e};function c(t){var n=t!=null?t:{},a=n.threadType,i=n.type_;return!(a==null||i==null||!o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a)||(e||(e=o("I64"))).to_int32(i)!==14||!r("gkx")("24052"))}function d(e){if(r("CurrentEnvironment").messengerdotcom===!0||r("justknobx")._("1406"))return!1;var t=e===r("MWChatSearchResultType").USER||e===r("MWChatSearchResultType").GROUP;return r("isTlcSearchEnabled")()===!0&&t}function m(e){var t,n=e!=null?e:{},r=n.threadJoinLinkHash,a=n.threadType;if(!(a==null||r==null)){var i=c(e)||o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a),l=i?(t=o("ConstUriUtils").getUri(r))==null?void 0:t.getPath().split("/").reverse()[1]:void 0;return l}}function p(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(e)}function _(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e)}function f(){return s._(/*BTDS*/"Secret conversation")}function g(e,t){r("CurrentEnvironment").facebookdotcom?r("XCometMessengerControllerRouteBuilder").buildURL({link_hash:e,thread_key:t}):r("XMessengerDotComCometMainControllerRouteBuilder").buildURL({link_hash:e,thread_key:t})}function h(e,t,n){if(e!=null){var a=n.rawData,i=a.id,l=a.isE2EE,s=a.isEPD,u=a.renderIndex,c=a.searchResultType,d=a.searchSource;r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:o("MWSearchLogging").getLoggingDataSources(d),is_epd:r("gkx")("23390")||s,search_result:{query_string:t,result_fbid:i,result_index:(u!=null?u:-1).toString(),result_type:c!=null?c:7},session_id:e,transport_type:o("MWSearchLogging").getTransportType(l),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(t,a)}})}}function y(e,t,n,o){e===!0?r("QPLUserFlow").endSuccess(r("qpl")._(25312244,"1683")):r("QPLUserFlow").endCancel(r("qpl")._(25312244,"1683")),h(t,n,o)}l.getSessionId=u,l.isUnjoinedPublicChat=c,l.shouldUpdateThreadKey=d,l.genLinkHash=m,l.isUnjoinedBroadcastChannel=p,l.isBroadcastChannel=_,l.gete2eeAttributionSubtext=f,l.getChatNavigationUrl=g,l.logSearchResultClickHepler=h,l.logSearchResultClick=y}),226);
__d("UniversalSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("845"),s=o("FalcoLoggerInternal").create("universal_search_impression",e),u=s;l.default=u}),98);
__d("useUniversalSearchImpressionFalcoEvent",["MWSearchLogging","MWSearchQPLLogger","UniversalSearchImpressionFalcoEvent","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t,n=o("react-compiler-runtime").c(17),a=e.cmGroupId,i=e.entry,l=e.instanceId,s=e.queryString,u=i.rawData,c=u.id,d=u.isE2EE,m=u.isEPD,p=u.renderIndex,_=u.searchResultType,f=u.searchSource,g=c,h=g,y=p!=null?p:-1,C;n[0]!==y?(C=y.toString(),n[0]=y,n[1]=C):C=n[1];var b=C,v;if(n[2]!==a||n[3]!==((t=i.rawData)==null?void 0:t.query)||n[4]!==l||n[5]!==d||n[6]!==m||n[7]!==s||n[8]!==u||n[9]!==p||n[10]!==h||n[11]!==b||n[12]!==_||n[13]!==f){var S;v=function(){var e;l!=null&&(r("UniversalSearchImpressionFalcoEvent").log(function(){return{cm_group_id:a,data_sources:o("MWSearchLogging").getLoggingDataSources(f),impression_selected:!1,is_epd:m,search_result:{query_string:s,result_fbid:h,result_index:b,result_type:_!=null?_:7},session_id:l,transport_type:o("MWSearchLogging").getTransportType(d),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(s,u)}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").renderSearchResult({queryString:(e=i.rawData)==null?void 0:e.query,renderIndex:p!=null?p:-1,sessionInstanceId:l,source:f}))},n[2]=a,n[3]=(S=i.rawData)==null?void 0:S.query,n[4]=l,n[5]=d,n[6]=m,n[7]=s,n[8]=u,n[9]=p,n[10]=h,n[11]=b,n[12]=_,n[13]=f,n[14]=v}else v=n[14];var R=v,L;return n[15]!==R?(L={onImpressionStart:R},n[15]=R,n[16]=L):L=n[16],r("usePartialViewImpression")(L)}l.default=u}),98);
__d("MWJewelSearchTypeaheadViewItem.react",["BaseMiddot.react","CometTypeaheadViewItem.react","FBLogger","I64","LSIntEnum","LSThreadAttributionStore","MAWThreadCutover","MWJewelSearchTypeaheadViewItemStartContent.react","MWJewelSearchTypeaheadViewItemUtils","MWLSThreadDisplayContext","MWXPageVerificationIcon.react","MWXText.react","MWXTextPairing.react","cr:393","cr:4538","cr:4539","cr:8414","cr:8415","cr:8417","deferredLoadComponent","isStringNullOrEmpty","mwCMIsAnyCMThread","react","requireDeferred","useMWNavigation","useMergeRefs","useUniversalSearchImpressionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry","extraViewItemProps","onPressEntry","queryString"],s,u,c,d=s||(s=o("react")),m=s,p=m.useEffect,_=m.useRef,f=m.useState,g=r("deferredLoadComponent")(r("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),h={contentRoot:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",":hover_backgroundColor":"x8du52y",$$css:!0}};function y(t){var a=t.entry,i=t.extraViewItemProps,l=t.onPressEntry,s=t.queryString,m=babelHelpers.objectWithoutPropertiesLoose(t,e),y=a.rawData,C=y.id,b=y.isE2EE,v=y.isInstagramAccount,S=y.isInteropEligible,R=y.otherUserId,L=y.resultType,E=y.searchSource,k=y.section,I=y.serverSearchResult,T=y.subtext,D=y.subtextAdditional,x=y.threadType,$=y.verificationStatus,P=n("cr:4538")==null?void 0:n("cr:4538")(),N=n("cr:4539")==null?void 0:n("cr:4539")({onSuccess:function(t){return P==null?void 0:P(t)}}),M=o("MAWThreadCutover").useShouldHideE2eeAttribution((u||(u=o("I64"))).of_string_opt(C),x),w=r("useMWNavigation")(),A=x!=null&&r("mwCMIsAnyCMThread")(x),F=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),O=o("MWJewelSearchTypeaheadViewItemUtils").getSessionId(i),B=r("useUniversalSearchImpressionFalcoEvent")({entry:a,instanceId:O,isCommunityChat:A,queryString:s}),W=_(null),q=r("useMergeRefs")(W,B),U=n("cr:8414")(),V=f(),H=V[0],G=V[1],z=R,j=b&&!M?o("MWJewelSearchTypeaheadViewItemUtils").gete2eeAttributionSubtext():T;p(function(){if(m.isActive){var e;(e=W.current)==null||e.scrollIntoView({block:"nearest"})}},[m.isActive]);var K=H!=null?H:C,Q=o("MWJewelSearchTypeaheadViewItemUtils").genLinkHash(I),X=babelHelpers.extends({},a,{key:K,rawData:babelHelpers.extends({},y,{id:K},z==null&&C!==K?{otherUserId:C}:{})}),Y=$==="BLUE_VERIFIED"||$==="GRAY_VERIFIED";return r("isStringNullOrEmpty")(a.label)&&n("cr:8415")!=null&&E!=="null_state_recent"?(r("FBLogger")("search").warn("aibolk Empty search result label for entry: %s",a.rawData.id),null):d.jsx("div",{ref:q,children:d.jsxs(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},m,{entry:X,isDisabled:v===!0&&S===!1,itemEndContent:E==="null_state_recent"&&n("cr:8417")!=null?d.jsx(n("cr:8417"),{entry:a}):null,itemStartContent:d.jsx(r("MWJewelSearchTypeaheadViewItemStartContent.react"),{entry:a}),linkProps:{preventLocalNavigation:!0,url:o("MWJewelSearchTypeaheadViewItemUtils").getChatNavigationUrl(Q,K)},onPressEntry:function(t,n){var e=o("LSThreadAttributionStore").getSourceForNewThread();if(e==="jewel"||e==="unknown"&&F==null?e="jewelSearch":e==="unknown"&&F==="ChatTab"?e="chatheadsNewMessage":e==="unknown"&&F==="Inbox"&&(e="messengerUniversalSearch"),e!=="unknown"&&o("LSThreadAttributionStore").setSource(K,e),o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedPublicChat(I)){var r=I!=null?I:{},i=r.threadJoinLinkHash;i!=null&&(N==null||N(i))}else o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedBroadcastChannel(x)?(U==null||U(a),w.openInbox({threadKey:(u||(u=o("I64"))).of_string(K),threadLinkHash:Q,threadType:(c||(c=o("LSIntEnum"))).ofNumber(153)},"jewelSearch")):(l(t,n),o("MWJewelSearchTypeaheadViewItemUtils").logSearchResultClick(A,O,s,a))},testid:void 0,xstyle:h.contentRoot,children:[o("MWJewelSearchTypeaheadViewItemUtils").shouldUpdateThreadKey(L)?d.jsx(g,{id:C.toString(),updateThreadKey:G}):null,d.jsx(r("MWXTextPairing.react"),{body:d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"body3",children:[E==="null_state_recent"&&n("cr:8415")!=null?d.jsx(n("cr:8415"),{entry:a}):a.label,$!=null&&Y&&!o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)?d.jsx("span",{className:"xmzvs34",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}):null]}),level:3,meta:j&&j!==""?d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"meta4",children:[j,o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)&&!!D&&d.jsxs(d.Fragment,{children:[$!=null&&Y&&d.jsx("span",{className:"x135b78x xxymvpz",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}),d.jsx(r("BaseMiddot.react"),{}),D]}),(k==null||k==="")&&a.rawData.isInstagramAccount?d.jsxs(d.Fragment,{children:[d.jsx(r("BaseMiddot.react"),{}),"Instagram"]}):null]}):null}),n("cr:393")!=null&&d.jsx(n("cr:393"),{rawData:X.rawData})]}))})}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),98);
__d("MWJewelSearchTypeaheadViewItemLabel.react",["Actor","I64","LSAuthorityLevel","LSIntEnum","MWChatSearchResultType","MWLSParticipant","MWLSThreadTitle","ReQL","ReQLSuspense","isStringNullOrEmpty","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(15),a=t.entry,l=(u||(u=r("useReStore")))(),c=o("Actor").useActor(),d=c[0],m=a.rawData,p=m.id,_=m.resultType,f,g;n[0]!==l||n[1]!==p||n[2]!==_?(f=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("ReQL").fromTableAscending(l.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(p))},g=[_,p,l],n[0]=l,n[1]=p,n[2]=_,n[3]=f,n[4]=g):(f=n[3],g=n[4]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":38"),y,C;n[5]!==l||n[6]!==p||n[7]!==_?(y=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("MWLSParticipant").getAllInOpenThread(l,o("ReQL").fromTableAscending(l.tables.contacts),(e||(e=o("I64"))).of_string(p))},C=[p,_,l],n[5]=l,n[6]=p,n[7]=_,n[8]=y,n[9]=C):(y=n[8],C=n[9]);var b=o("ReQLSuspense").useArray(y,C,i.id+":45");if(!r("isStringNullOrEmpty")(a.label))return a.label;if(h!=null&&(e||(e=o("I64"))).ge(h.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").SERVER_PARTIAL))){var v;return n[10]!==d||n[11]!==b||n[12]!==h.threadName||n[13]!==h.threadType?(v=o("MWLSThreadTitle").getDefaultThreadTitle(h.threadName,(e||(e=o("I64"))).of_string(d),b,h.threadType),n[10]=d,n[11]=b,n[12]=h.threadName,n[13]=h.threadType,n[14]=v):v=n[14],v}return a.label}l.default=c}),98);
__d("MWRecentSearchDeleteButton.react",["fbt","CometInternalTypeaheadFetchContext","MWRecentSearchesStorage","MWXCircleButton.react","MWXIconCross","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(6),n=e.entry,a=m(r("CometInternalTypeaheadFetchContext")),i=a.refetch,l;t[0]!==n.key||t[1]!==i?(l=function(){r("promiseDone")(o("MWRecentSearchesStorage").clearRecentSearchItem(n.key),function(){i==null||i()})},t[0]=n.key,t[1]=i,t[2]=l):l=t[2];var c=l,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Clear"),t[3]=d):d=t[3];var p;return t[4]!==c?(p=u.jsx(r("MWXCircleButton.react"),{"aria-label":d,color:"secondary",icon:r("MWXIconCross"),onPress:c,size:24,type:"deemphasized"}),t[4]=c,t[5]=p):p=t[5],p}l.default=p}),226);
__d("MWXSpacing.stylex",[],(function(t,n,r,o,a,i,l){"use strict";var e="@media (max-width: 320px), (max-height: 256px)",s={spacing4:"var(--x1e4hm47)",spacing8:"var(--x15qbgmd)",spacing10:"var(--x19nwfu8)",spacing12:"var(--xxjzes5)",spacing16:"var(--xsyyfky)",spacing20:"var(--x44p0ev)",spacing24:"var(--x1npqni6)",__varGroupHash__:"x1g5acrz"};l.MWXSpacing=s}),98);
__d("useAddSearchResultToRecents",["MWRecentSearchesStorage","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e){r("promiseDone")(o("MWRecentSearchesStorage").upsertRecentSearchEntry(e))}l.default=u}),98);
__d("useMWChatSearchClearSearchResults",["LSClearTablesStoredProcedure","LSFactory","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(){r("promiseDone")(n.runInTransaction(d,"readwrite",void 0,void 0,i.id+":22"))},t[0]=n,t[1]=a):a=t[1],a}function d(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})}l.default=c}),98);/*FB_PKG_DELIM*/
__d("FBGroupChatInviteState",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACCEPTED:1,ACTIVE:2,DECLINED_BY_RECEIVER:3,IGNORED_BY_RECEIVER:4,DELETED_BY_SENDER:5,DISCARDED:6});i.default=e}),66);
__d("GroupFeatureType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ARTICLES","AUTO_INVITES","CHATS","CHILDHOOD_VACCINES","CLIMATE_PLEDGE","COMMUNITY_GIVING","COMMUNITY_MESSAGING","EVENTS","FANTASY_LEAGUE","FILES","FUNDRAISER_CHALLENGE","GAME_LINKS","GIF","GROUP_AFFILIATION","GUIDES","HORIZON_WORLDS","LIVE","LOOKING_FOR_PLAYERS","MARKETPLACE_JOBS","PLAYER_INFO","POLL","PRODUCT_TAGGING","QN_A","RAISE_MONEY","REEL","REPUTATION_SYSTEM","REQUEST_OR_OFFER_HELP","ROOMS","SELLING","SELL_SOMETHING","SETTING","SUPPORTER_STICKERS","TOPIC_CHANNELS","USER_SIGNAL","WELCOME_POST"]),l=e;i.default=l}),66);
__d("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9311215579001270"}),null);
__d("MWCMCasaOffboardingNuxDialogQuery$Parameters",["MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMCasaOffboardingNuxDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("XFBGroupFeatureTypeUtils.facebook",["$InternalEnumUtils","GroupFeatureType"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("GroupFeatureType")),s=o("$InternalEnumUtils").createFromJSEnum(r("GroupFeatureType"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("GroupsCometCMOffboardingDialog.entrypoint",["JSResourceForInteraction","MWCMCasaOffboardingNuxDialogQuery$Parameters","XFBGroupFeatureTypeUtils.facebook"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,n=t.groupID;return{queries:{queryReference:{parameters:r("MWCMCasaOffboardingNuxDialogQuery$Parameters"),variables:{communityMessagingFeatureType:(e=o("XFBGroupFeatureTypeUtils.facebook").fromJSEnum("COMMUNITY_MESSAGING"))!=null?e:"COMMUNITY_MESSAGING",groupID:n}}}}},root:r("JSResourceForInteraction")("MWCMCasaOffboardingNuxDialog.react").__setRef("GroupsCometCMOffboardingDialog.entrypoint")};l.default=e}),98);
__d("JSSet.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Array.from(e.values())}i.values=e}),66);
__d("LSOptimisticUpdateHasPendingJoinRequest",["LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return n.needsAdminApprovalForNewParticipant===!0&&t.i64.eq(n.threadKey,e[0])}),function(o){var a=o.item;return t.sequence([function(o){return e[1]?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3199643703]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1531706844]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}])},function(n){return r[1]=a.lastReadWatermarkTimestampMs,t.forEach(t.db.table(9).fetch([[[a.threadKey]]]),function(t){var n=t.update,o=t.item;return n({hasPendingJoinRequest:e[1],snippet:r[0],lastReadWatermarkTimestampMs:r[1]})})}])})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateHasPendingJoinRequestStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSSetCommunityChannelJoiningErrorCodeForTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxSetCommunityChannelJoiningErrorCodeForTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateCommunityChannelJoiningTaskID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(162).fetch([[[e[0]]],"byFbGroupId"],[[[e[0]]]]),function(n){return t.i64.eq(n.fbGroupId,e[0])||t.i64.eq(n.communityType,t.i64.cast([0,1]))&&t.i64.eq(n.folderId,e[0])}),function(t){var n=t.update,r=t.item;return n({joiningChannelTaskId:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelJoiningTaskIDStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSJoinCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSSetCommunityChannelJoiningErrorCodeForTask","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([-1,4294967295]):(n=a.item,r[0]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([-1,4294967295]):(n=a.item,t.i64.eq(n.communityType,t.i64.cast([0,1]))?r[13]=n.folderId:r[13]=n.fbGroupId,r[2]=r[13])})},function(e){return t.storedProcedure(n("LSSetCommunityChannelJoiningErrorCodeForTask"),r[2],void 0)},function(r){return e[2]?t.storedProcedure(n("LSOptimisticUpdateHasPendingJoinRequest"),e[0],!0):t.resolve()},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=t.i64.cast([0,1]):(n=a.item,r[14]=n.syncGroup,t.i64.neq(r[14],void 0)?r[13]=r[14]:r[13]=t.i64.cast([0,1]),r[4]=r[13])})},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[6]=!1:(t=o.item,r[6]=t.errorShouldBeShown)})},function(e){return r[6]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[13]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[14]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[13],r[14],void 0,void 0)}]):t.resolve()},function(o){return r[8]=new t.Map,r[8].set("thread_key",e[0]),r[8].set("community_id",r[2]),r[8].set("sync_group",r[4]),r[8].set("entry_point",e[1]),r[8].set("is_request_to_join",e[2]),r[8].set("request_source",void 0),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[13]=t.i64.of_float(Date.now()),r[9]=t.i64.add(r[13],t.i64.cast([0,0]))):r[9]=t.i64.cast([0,0]),r[10]=r[8].get("thread_key"),r[11]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),t.i64.to_string(r[10]),t.i64.cast([0,337]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[2],r[12])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxJoinCommunityChannelStoredProcedure",e.__tables__=["threads","community_folders","user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSJoinCommunityChannelStoredProcedure",["LSJoinCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSJoinCommunityChannel"),a.threadKey,a.entryPoint,a.isRequestToJoin);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateCommunityChannelDirectInvite",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.i64.eq(e[1],t.i64.cast([0,1])),t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=!1:(t=o.item,r[0]=t.errorShouldBeShown)})},function(e){return r[0]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[11]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[12]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[11],r[12],void 0,void 0)}]):t.resolve()},function(o){return r[2]=new t.Map,r[2].set("channel_id",e[0]),r[2].set("state",e[1]),r[2].set("is_request_to_join",!1),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[3]=t.i64.add(r[11],t.i64.cast([0,0]))):r[3]=t.i64.cast([0,0]),r[4]=r[2].get("channel_id"),r[5]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["community_channel_invitation","_",t.i64.to_string(r[4])].join(""),t.i64.cast([0,463]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[6]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=t.i64.cast([-1,4294967295]):(n=a.item,r[7]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.fbGroupId)})},function(o){return t.i64.eq(e[1],t.i64.cast([0,1]))?t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[9],r[6]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelDirectInviteStoredProcedure",e.__tables__=["user_visible_network_connectivity_error","threads","community_folders"],a.exports=e}),null);
__d("LSUpdateCommunityChannelDirectInviteStoredProcedure",["LSSynchronousPromise","LSUpdateCommunityChannelDirectInvite","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateCommunityChannelDirectInvite"),a.channelId,a.state);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWGroupInvitesForThread",["LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),n=o("LSMessagingThreadTypeUtil").isGroup(e.threadType),r=o("LSThreadBitOffset").has(105,e);return t&&n?r:!1}l.isGroupInviteThread=e}),98);
__d("MWFDSCheckmark.svg.react",["cr:21598"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21598")}),98);
__d("MWFDSDisappearingMessage.svg.react",["cr:21626"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21626")}),98);
__d("MWFDSPauseChat.svg.react",["cr:21726"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21726")}),98);
__d("MWJewelThreadSnippet.react",["CurrentEnvironment","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.isUnread,a=e.text,i=e.type,l=i==="missedCall";if(n){if(r("CurrentEnvironment").facebookdotcom){var c=l?"negative":"primary",d;return t[2]!==c||t[3]!==a?(d=s.jsx(r("MWXText.react"),{color:c,numberOfLines:1,showTruncationTooltip:!1,type:"bodyLink4",children:a}),t[2]=c,t[3]=a,t[4]=d):d=t[4],d}}else{var u;return t[0]!==a?(u=s.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,showTruncationTooltip:!1,type:"body4",children:a}),t[0]=a,t[1]=u):u=t[1],u}var m=l?"negative":"primary",p;return t[5]!==m||t[6]!==a?(p=s.jsx(r("MWXText.react"),{color:m,numberOfLines:1,type:"entityHeaderMeta3",children:a}),t[5]=m,t[6]=a,t[7]=p):p=t[7],p}l.default=u}),98);
__d("MWXIconCheckmark",["MWXSvgIcon","SVGIcon","cr:22262","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22262")),r("gkx")("23219"));l.default=e}),98);
__d("MWPThreadListItemInviteAddOn.react",["fbt","MWPBumpEntityKey","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXRow.react","MWXRowItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Accept invite"),d=s._(/*BTDS*/"Decline invite");function m(e){var t=o("react-compiler-runtime").c(7),n=e.onAccept,a=e.onDecline,i;t[0]!==n?(i=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":c,icon:r("MWXIconCheckmark"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.accept"),n(t)},size:32})}),t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":d,icon:r("MWXIconCross"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.decline"),a(t)},size:32})}),t[2]=a,t[3]=l):l=t[3];var s;return t[4]!==i||t[5]!==l?(s=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[i,l]}),t[4]=i,t[5]=l,t[6]=s):s=t[6],s}l.default=m}),226);
__d("MWPThreadsForThreadList",["I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){if(r!=null){var i=o("ReQL").fromTableDescending(t.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),a).getKeyRange(n).bounds({gt:o("ReQL").key((e||(e=o("I64"))).zero)}),l=r.minLastActivityTimestampMs,s=r.maxLastActivityTimestampMs,u=!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).one)?l:void 0,c=!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).one)?s:void 0;return u!=null?c!=null?i.bounds({gte:o("ReQL").key(u),lte:o("ReQL").key(c)}):i.bounds({gte:o("ReQL").key(u)}):c!=null?i.bounds({lte:o("ReQL").key(c)}):i}return o("ReQL").empty()}l.createIterable=s}),98);
__d("MWXIconPauseChat",["MWXSvgIcon","SVGIcon","cr:22420","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22420")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadAddOnSecondary.react",["fbt","CometOverlappingFacepile_DEPRECATED.react","CurrentEnvironment","FDSBadge.react","I64","MWPActor.react","MWXIconBellCross","MWXIconPauseChat","MWXIconPushpin","MWXIconStrict.react","MWXPressable.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","isArmadillo","react","react-compiler-runtime","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.memo;function p(t){var n=o("react-compiler-runtime").c(19),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;n[0]!==a.tables.threads||n[1]!==t?(s=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadKey","lastActivityTimestampMs"]).getKeyRange(t)},n[0]=a.tables.threads,n[1]=t,n[2]=s):s=n[2];var c;n[3]!==a||n[4]!==t?(c=[a,t],n[3]=a,n[4]=t,n[5]=c):c=n[5];var d=o("ReQLSuspense").useFirst(s,c,i.id+":54"),m=r("useMWIsReadReceiptsDisabledForThread")(t),p;n[6]!==l||n[7]!==a.tables.contacts||n[8]!==a.tables.participants||n[9]!==m||n[10]!==d?(p=function(){return m||d==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(d.threadKey).bounds({gte:o("ReQL").key(d.lastActivityTimestampMs)}).filter(function(e){var t=e.contactId;return!(u||(u=o("I64"))).equal(t,l)}).take(3).map(function(e){var t=e.contactId,n=o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.contacts,["name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(t),i.id+":82");return n!=null?{alt:n.name,source:{uri:r("getLSMediaContactProfilePictureUrl")(n)}}:null})},n[6]=l,n[7]=a.tables.contacts,n[8]=a.tables.participants,n[9]=m,n[10]=d,n[11]=p):p=n[11];var _;n[12]!==l||n[13]!==a||n[14]!==m||n[15]!==d?(_=[a,l,d,m],n[12]=l,n[13]=a,n[14]=m,n[15]=d,n[16]=_):_=n[16];var f=o("ReQLSuspense").useArray(p,_,i.id+":65"),g;return n[17]!==f?(g=f.filter(Boolean),n[17]=f,n[18]=g):g=n[18],g}function _(e){var t=o("react-compiler-runtime").c(26),n=e.entryPoint,a=e.isMuted,i=e.isPaused,l=e.isPinnedThread,u=e.isUnread,c=e.isViewerSender,m=e.lastMessageDeliveryStatusIcon,_=e.thread,g=r("useMWLSMarkThreadAsRead")(n),h=p(_.threadKey),y;if(t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==u||t[4]!==c||t[5]!==m||t[6]!==g||t[7]!==h){if(y=[],i){var C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconPauseChat"),size:16}),t[9]=C):C=t[9],y.push(C)}if(a){var b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconBellCross"),size:16}),t[10]=b):b=t[10],y.push(b)}if(l){var v;t[11]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("MWXIconStrict.react"),{alt:s._(/*BTDS*/"Pinned thread"),color:"disabled",icon:r("MWXIconPushpin"),size:16}),t[11]=v):v=t[11],y.push(v)}if(u){var S;t[12]!==g?(S=function(t){return g()},t[12]=g,t[13]=S):S=t[13];var R;t[14]===Symbol.for("react.memo_cache_sentinel")?(R=d.jsx(r("FDSBadge.react"),{color:"blue",isProfileBadge:!0,size:r("isArmadillo")()&&r("CurrentEnvironment").messengerdotcom?10:12}),t[14]=R):R=t[14];var L;t[15]!==S?(L=d.jsx(r("MWXPressable.react"),{"aria-hidden":!0,expanding:!0,focusable:!1,onPress:S,testid:void 0,children:R}),t[15]=S,t[16]=L):L=t[16],y.push(L)}else if(c)if(h.length===0)m&&y.push(m);else{var E;t[17]!==h[0]||t[18]!==h.length?(E=h.length===1?s._(/*BTDS*/"Seen by {=personName}",[s._param("=personName",h[0].alt)]):s._(/*BTDS*/"_j{\"*\":\"Seen by {=numPeople} people\"}",[s._param("=numPeople",h.length,[0])]),t[17]=h[0],t[18]=h.length,t[19]=E):E=t[19];var k;t[20]!==h||t[21]!==E?(k=d.jsx(r("CometOverlappingFacepile_DEPRECATED.react"),{count:h.length,isTextInline:!0,items:h,screenReaderLabel:E,size:16}),t[20]=h,t[21]=E,t[22]=k):k=t[22],y.push(k)}t[0]=a,t[1]=i,t[2]=l,t[3]=u,t[4]=c,t[5]=m,t[6]=g,t[7]=h,t[8]=y}else y=t[8];var I;t[23]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x6s0dn4 x78zum5 xozqiw3"},t[23]=I):I=t[23];var T;return t[24]!==y?(T=d.jsx("div",babelHelpers.extends({},I,{children:y.map(f)})),t[24]=y,t[25]=T):T=t[25],T}function f(e,t){return d.jsxs(d.Fragment,{children:[t!==0?d.jsx("div",{className:"x1fsd2vl"}):null,e]},"item_"+t.toString(10))}f.displayName=f.name+" [from "+i.id+"]";var g=m(_);l.default=g}),226);
__d("useMWLogLongSuspense",["MWPBumpEntityKey","clearTimeout","react","react-compiler-runtime","setTimeout","useMergeRefs","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=_(e,5,t),o=_(e,15,t),a=_(e,60,t),i=_(e,300,t);return r("useMergeRefs")(n,o,a,i)}var p=/\W/g;function _(e,t,n){var a=o("react-compiler-runtime").c(11),i;a[0]!==e?(i=e.replace(p,"_"),a[0]=e,a[1]=i):i=a[1];var l=i,s=d(),u;a[2]!==n||a[3]!==l||a[4]!==t?(u=function(){s.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mwp","long_suspension."+l+".suspended_"+t+"_sec"),n==null||n(t)},t*1e3)},a[2]=n,a[3]=l,a[4]=t,a[5]=u):u=a[5];var m=u,_;a[6]===Symbol.for("react.memo_cache_sentinel")?(_=function(){r("clearTimeout")(s.current)},a[6]=_):_=a[6];var f=_,g,h;a[7]===Symbol.for("react.memo_cache_sentinel")?(g=function(){return f},h=[f],a[7]=g,a[8]=h):(g=a[7],h=a[8]),c(g,h);var y;return a[9]!==m?(y={onHidden:f,onVisible:m},a[9]=m,a[10]=y):y=a[10],r("useVisibilityObserver")(y)}l.default=m}),98);
__d("MWThreadListGlimmer.react",["CometVisualCompletionAttributes","MWXGlimmer.react","gkx","react","react-compiler-runtime","react-strict-dom","useMWLogLongSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmerBody:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto:{flexShrink:"x2lah0s",$$css:!0},glimmerPhoto48:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xsdox4t",marginInlineEnd:"x1sa5p1d",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xnnlda6",marginInlineEnd:"x1sa5p1d",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"x1a8lsjc",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}},c=r("gkx")("23219");function d(e){var t=o("react-compiler-runtime").c(8),n=e.ref,a=e.role,i=e.vcIgnore,l;t[0]!==i?(l=i===!0?r("CometVisualCompletionAttributes").IGNORE:{},t[0]=i,t[1]=l):l=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[c?u.glimmerPhoto48:u.glimmerPhoto56,u.glimmerPhoto]}),t[2]=d):d=t[2];var m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs(o("react-strict-dom").html.div,{style:u.glimmerText,children:[s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmerHeadline}),s.jsx(r("MWXGlimmer.react"),{index:2,xstyle:u.glimmerBody})]}),t[3]=m):m=t[3];var p;return t[4]!==n||t[5]!==a||t[6]!==l?(p=s.jsxs(o("react-strict-dom").html.div,babelHelpers.extends({ref:n,role:a,style:u.glimmerRoot},l,{children:[d,m]})),t[4]=n,t[5]=a,t[6]=l,t[7]=p):p=t[7],p}function m(e){var t=o("react-compiler-runtime").c(11),n=e.numberOfItems,a=e.parentComponentForDebug,i=e.role,l=e.vcIgnore,u=n===void 0?1:n,c=r("useMWLogLongSuspense")(a+".MWThreadListGlimmer"),m;if(t[0]!==u||t[1]!==c||t[2]!==i||t[3]!==l){var p;t[5]!==c||t[6]!==i||t[7]!==l?(p=function(t,n){return s.jsx(d,{ref:n===0?c:void 0,role:i,vcIgnore:l},"mw_list_glimmer_"+n)},t[5]=c,t[6]=i,t[7]=l,t[8]=p):p=t[8],m=Array(u).fill(!0).map(p),t[0]=u,t[1]=c,t[2]=i,t[3]=l,t[4]=m}else m=t[4];var _;return t[9]!==m?(_=s.jsx(s.Fragment,{children:m}),t[9]=m,t[10]=_):_=t[10],_}l.default=m}),98);
__d("MWThreadListItemAddOnEnd.react",["fbt","FBGroupChatInviteState","I64","Int64Hooks","LSFactory","LSIntEnum","LSUpdateCommunityChannelDirectInviteStoredProcedure","MWCMGetValidId","MWJewelPopoverDialogContext.react","MWPActor.react","MWPIsThreadUnread","MWPThreadListItemInviteAddOn.react","MWThreadAddOnSecondary.react","ReQL","ReQLSuspense","ThreadStatus","cometPushToast","cr:21160","promiseDone","react","react-compiler-runtime","requireDeferred","useEmptyFunction","useMWChatCalculateIsMutedFromExpireTime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["threadKey","communityId","fbGroupId","renderAddOnEnd"],u,c,d,m,p,_,f=m||(m=o("react")),g=m.useContext,h=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWThreadListItemAddOnEnd.react"),y=(u=(c=n("cr:21160"))==null?void 0:c.useIsPinnedThread)!=null?u:r("useEmptyFunction");function C(e){var t=e.clientExtras,n=e.communityId,r=e.event,a=e.groupId,i=e.parentSurface,l=i===void 0?"channel_list":i,s=e.source,u=e.threadId;h.onReady(function(e){return e.log(function(){return{action:"tap",client_extras:t,community_id:n==null?null:(_||(_=o("I64"))).to_string(n),event:r,group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(a)?(_||(_=o("I64"))).to_string(a):null,parent_surface:l,source:s,surface:"chat_row",thread_id:(_||(_=o("I64"))).to_string(u)}})})}function b(e){var t,n=o("react-compiler-runtime").c(32),a=e.communityId,l=e.fbGroupId,u=e.isMaximized,c=e.messagingEntrypoint,m=e.mutedUntilMs,h=e.parentSurface,b=e.showGroupsJoinChatDialog,v=e.thread,S=(d||(d=r("useReStore")))(),R=o("MWPActor.react").useActor(),L=v.snippetSenderContactId,E;n[0]!==R||n[1]!==L?(E=L!=null?(_||(_=o("I64"))).equal(L,R):!1,n[0]=R,n[1]=L,n[2]=E):E=n[2];var k=E,I=(_||(_=o("I64"))).equal(v.parentThreadKey,(p||(p=o("LSIntEnum"))).ofNumber(0)),T=g(r("MWJewelPopoverDialogContext.react")),D=T.setIsOpenForDialog,x=v.hasPendingInvitation||!1,$=r("useMWChatCalculateIsMutedFromExpireTime")(m),P=(t=y(v.threadTags))!=null?t:!1,N=o("MWPIsThreadUnread").useIsThreadUnread(v.threadKey),M;n[3]!==v.threadStatus?(M=v.threadStatus!=null&&((_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),n[3]=v.threadStatus,n[4]=M):M=n[4];var w=M,A;n[5]!==a||n[6]!==S||n[7]!==l||n[8]!==h||n[9]!==v.needsAdminApprovalForNewParticipant||n[10]!==v.threadKey?(A=function(){var e;r("promiseDone")(S.runInTransaction(function(e){return r("LSUpdateCommunityChannelDirectInviteStoredProcedure")(r("LSFactory")(e),{channelId:v.threadKey,state:(p||(p=o("LSIntEnum"))).ofNumber(r("FBGroupChatInviteState").DECLINED_BY_RECEIVER)})},"readwrite",void 0,void 0,i.id+":158")),C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_declined",groupId:l,parentSurface:h,source:"direct_invite_decline_button",threadId:v.threadKey}),o("cometPushToast").cometPushSimpleToast(s._(/*BTDS*/"You declined the invitation to join").toString())},n[5]=a,n[6]=S,n[7]=l,n[8]=h,n[9]=v.needsAdminApprovalForNewParticipant,n[10]=v.threadKey,n[11]=A):A=n[11];var F=A;if(x){var O;n[12]!==a||n[13]!==l||n[14]!==c||n[15]!==h||n[16]!==D||n[17]!==b||n[18]!==v.needsAdminApprovalForNewParticipant||n[19]!==v.threadKey?(O=function(t){var e;return C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_accepted",groupId:l,parentSurface:h,source:"direct_invite_join_button",threadId:v.threadKey}),D(c==="jewel"),b(t)},n[12]=a,n[13]=l,n[14]=c,n[15]=h,n[16]=D,n[17]=b,n[18]=v.needsAdminApprovalForNewParticipant,n[19]=v.threadKey,n[20]=O):O=n[20];var B;return n[21]!==F||n[22]!==O?(B=f.jsx(r("MWPThreadListItemInviteAddOn.react"),{onAccept:O,onDecline:F}),n[21]=F,n[22]=O,n[23]=B):B=n[23],B}if(u||!I){var W;return n[24]!==$||n[25]!==w||n[26]!==P||n[27]!==N||n[28]!==k||n[29]!==c||n[30]!==v?(W=f.jsx(r("MWThreadAddOnSecondary.react"),{entryPoint:c,isMuted:$,isPaused:w,isPinnedThread:P,isUnread:N,isViewerSender:k,lastMessageDeliveryStatusIcon:null,thread:v}),n[24]=$,n[25]=w,n[26]=P,n[27]=N,n[28]=k,n[29]=c,n[30]=v,n[31]=W):W=n[31],W}return null}var v=f.memo(b);function S(t){var n=o("react-compiler-runtime").c(25),a,l,s,u,c;n[0]!==t?(c=t.threadKey,a=t.communityId,l=t.fbGroupId,s=t.renderAddOnEnd,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l,n[3]=s,n[4]=u,n[5]=c):(a=n[1],l=n[2],s=n[3],u=n[4],c=n[5]);var m,p;n[6]!==l?(m=function(){return l},p=[l],n[6]=l,n[7]=m,n[8]=p):(m=n[7],p=n[8]);var _=o("Int64Hooks").useMemoInt64(m,p),g,h;n[9]!==a?(g=function(){return a},h=[a],n[9]=a,n[10]=g,n[11]=h):(g=n[10],h=n[11]);var y=o("Int64Hooks").useMemoInt64(g,h),C=(d||(d=r("useReStore")))(),b;n[12]!==C.tables.threads||n[13]!==c?(b=function(){return o("ReQL").fromTableAscending(C.tables.threads,["threadType","threadStatus","threadKey","snippetSenderContactId","parentThreadKey","hasPendingInvitation","takedownState","needsAdminApprovalForNewParticipant","threadTags"]).getKeyRange(c)},n[12]=C.tables.threads,n[13]=c,n[14]=b):b=n[14];var S;n[15]!==C||n[16]!==c?(S=[C,c],n[15]=C,n[16]=c,n[17]=S):S=n[17];var R=o("ReQLSuspense").useFirst(b,S,i.id+":248");if(s!=null){var L;return n[18]!==s?(L=s(),n[18]=s,n[19]=L):L=n[19],L}if(R==null)return null;var E;return n[20]!==y||n[21]!==_||n[22]!==u||n[23]!==R?(E=f.jsx(v,babelHelpers.extends({communityId:y,fbGroupId:_,thread:R},u)),n[20]=y,n[21]=_,n[22]=u,n[23]=R,n[24]=E):E=n[24],E}l.default=S}),226);
__d("MWXIconDisappearingMessage",["MWXSvgIcon","SVGIcon","cr:22294","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22294")),r("gkx")("23219"));l.default=e}),98);
__d("useMWThreadListLastMessageGlimmer.react",["Int64Hooks","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReadyWithoutValidator","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useState;function c(e){var t=o("react-compiler-runtime").c(6),n;t[0]!==e?(n=e!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&e.snippet==null,t[0]=e,t[1]=n):n=t[1];var a=n,i=u(a),l=i[0],c=i[1],d=e==null?void 0:e.threadKey,m,p;return t[2]!==a||t[3]!==d?(m=function(){if(d!=null){if(a===!1){c(!1);return}var e=!1;return r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("MAWMiActOnActThreadReadyWithoutValidator").waitForACTThreadReadyWithoutValidator(t.tables,d,"useShouldShowGlimmerForThread").then(function(){e||c(!1)})})),function(){e=!0}}},p=[d,a],t[2]=a,t[3]=d,t[4]=m,t[5]=p):(m=t[4],p=t[5]),o("Int64Hooks").useEffectInt64(m,p),l}l.default=c}),98);
__d("MWThreadListLastMessage.react",["fbt","BaseMiddot.react","CometErrorBoundary.react","CometHeroHoldTrigger.react","CometScreenReaderText.react","FDSRelativeTimestamp.react","I64","MAWCurrentUser","MAWStrings","MWJewelThreadSnippet.react","MWVerticalRhythm","MWXGlimmer.react","MWXIconDisappearingMessage","MWXIconStrict.react","MWXText.react","isArmadilloUI","justknobx","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","useMWIsStaleCall","useMWPThreadHasSpectraUser","useMWThreadListLastMessageGlimmer.react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d={bodyGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1l36t39",$$css:!0},bodyGlimmerSecond:{width:"xktia5q",$$css:!0},disappearingMessageVisualIndicator:{paddingInlineEnd:"x14vy60q",$$css:!0},followUpsCTA:{paddingInlineStart:"xyiysdx",$$css:!0},root:{alignItems:"x6s0dn4",color:"xi81zsa",display:"x78zum5",minHeight:"x1hshjfz",$$css:!0},subtext:{paddingInlineStart:"xyiysdx",whiteSpace:"xuxw1ft",$$css:!0},threadSnippet:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",maxWidth:"x193iq5w",paddingInlineEnd:"x14vy60q",$$css:!0},zeroMinWidth:{minWidth:"xeuugli",$$css:!0}};function m(e){var t,n=o("react-compiler-runtime").c(41),a=e.hasOngoingCall,i=e.isUnread,l=e.lastMessageCtaType,m=e.lastMessageTimestamp,p=e.showDisappearingMessageVisualIndicator,_=e.showFollowUpReminder,f=e.showSnippetText,g=e.showTimestamp,h=e.snippet,y=e.thread,C=_===void 0?!1:_,b=r("useMWThreadListLastMessageGlimmer.react")(y),v=r("useMWIsStaleCall")(y==null?void 0:y.threadType,a,y==null?void 0:y.ongoingCallTimestampMs),S=r("useMWPThreadHasSpectraUser")((t=y==null?void 0:y.threadKey)!=null?t:(u||(u=o("I64"))).zero);if(b===!0){var R;return n[0]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsxs(c.Fragment,{children:[c.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[d.bodyGlimmer,d.bodyGlimmerSecond]}),c.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListLastMessage",hold:!0})]}),n[0]=R):R=n[0],R}var L=l==="xma_rtc_missed_audio"||l==="xma_rtc_missed_group_audio",E=l==="xma_rtc_missed_video"||l==="xma_rtc_missed_group_video",k=L||E,I=f===!0&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&(y==null?void 0:y.snippetText)!=null,T=(y==null?void 0:y.snippetSenderContactId)==null?null:(u||(u=o("I64"))).to_string(y.snippetSenderContactId)===o("MAWCurrentUser").getID(),D=I?null:d.zeroMinWidth,x;n[1]!==D?(x=[d.threadSnippet,D],n[1]=D,n[2]=x):x=n[2];var $;n[3]!==i?($=i&&r("justknobx")._("5026")&&c.jsx(r("CometScreenReaderText.react"),{text:s._(/*BTDS*/"Unread message:")}),n[3]=i,n[4]=$):$=n[4];var P;n[5]!==k||n[6]!==i||n[7]!==h?(P=k&&i?o("MAWStrings").MAW_MISSED_CALL_STRING():h,n[5]=k,n[6]=i,n[7]=h,n[8]=P):P=n[8];var N=k?"missedCall":void 0,M;n[9]!==i||n[10]!==P||n[11]!==N?(M=c.jsx(r("MWJewelThreadSnippet.react"),{isUnread:i,text:P,type:N}),n[9]=i,n[10]=P,n[11]=N,n[12]=M):M=n[12];var w;n[13]!==x||n[14]!==$||n[15]!==M?(w=c.jsxs(o("react-strict-dom").html.span,{style:x,children:[$,M]}),n[13]=x,n[14]=$,n[15]=M,n[16]=w):w=n[16];var A;n[17]!==I||n[18]!==(y==null?void 0:y.snippetText)?(A=I===!0&&c.jsxs(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:[c.jsx(o("react-strict-dom").html.span,{children:"\xB7"}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:y==null?void 0:y.snippetText})]}),n[17]=I,n[18]=y==null?void 0:y.snippetText,n[19]=A):A=n[19];var F;n[20]!==p||n[21]!==g?(F=p===!0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:[d.subtext,g?d.disappearingMessageVisualIndicator:void 0],children:c.jsx(r("MWXIconStrict.react"),{color:"secondary",icon:r("MWXIconDisappearingMessage"),size:12})})]}),n[20]=p,n[21]=g,n[22]=F):F=n[22];var O;n[23]!==T||n[24]!==m||n[25]!==C||n[26]!==g||n[27]!==(y==null?void 0:y.takedownState)?(O=g&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&m!=null&&m>0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:C&&T===!0?c.jsx(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:c.jsxs(o("react-strict-dom").html.span,{children:[s._(/*BTDS*/"Follow up"),"?"]})}):c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("FDSRelativeTimestamp.react"),{date:new Date(m),format:"minimized"})})}),C&&T===!1&&c.jsxs(c.Fragment,{children:[c.jsx(o("react-strict-dom").html.span,{style:d.followUpsCTA,children:c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})})}),c.jsx(o("react-strict-dom").html.span,{style:d.subtext,children:c.jsxs(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:[s._(/*BTDS*/"Reply"),"?"]})})]})]}),n[23]=T,n[24]=m,n[25]=C,n[26]=g,n[27]=y==null?void 0:y.takedownState,n[28]=O):O=n[28];var B;n[29]!==F||n[30]!==O||n[31]!==w||n[32]!==A?(B=c.jsxs(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root,children:[w,A,F,O]}),n[29]=F,n[30]=O,n[31]=w,n[32]=A,n[33]=B):B=n[33];var W;n[34]!==a||n[35]!==v||n[36]!==S?(W=a&&!v&&!S?c.jsxs(c.Fragment,{children:[r("isArmadilloUI")()?c.jsx(r("MWVerticalRhythm"),{height:5}):null,c.jsx(r("MWXText.react"),{align:"start",color:"positive",numberOfLines:1,type:"body4",children:s._(/*BTDS*/"Ongoing call")})]}):null,n[34]=a,n[35]=v,n[36]=S,n[37]=W):W=n[37];var q;return n[38]!==B||n[39]!==W?(q=c.jsxs(c.Fragment,{children:[B,W]}),n[38]=B,n[39]=W,n[40]=q):q=n[40],q}function p(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=c.jsx(r("CometErrorBoundary.react"),{fallback:_,children:c.jsx(m,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function _(){return c.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root})}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),226);
__d("MessageRequestsBulkActionsThreadListItem",["ix","CometPressable.react","I64","JSSet.bs","MWPIsThreadUnread","MWXIcon_DEPRECATED.react","MessageRequestsBulkActionsContext.react","fbicon","react","react-compiler-runtime","useMWAriaLabelForThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useContext,_=d.useEffect,f={pressableContent:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",display:"x1lliihq",width:"xh8yej3",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(33),n=e.thread,a=e.threadListCell,i=p(r("MessageRequestsBulkActionsContext.react")),l=i.setBulkActionsUnreadSelectedThreads,d=i.setBulkActionsSelectedThreads,m=i.bulkActionsSelectedThreads,f;t[0]!==n.threadKey?(f=(u||(u=o("I64"))).to_string(n.threadKey),t[0]=n.threadKey,t[1]=f):f=t[1];var g=f,y;t[2]!==d||t[3]!==g?(y=function(){return d(function(e){var t=new Set(o("JSSet.bs").values(e));return t.delete(g)?t:t.add(g)})},t[2]=d,t[3]=g,t[4]=y):y=t[4];var C=y,b;t[5]!==m||t[6]!==l||t[7]!==n||t[8]!==g?(b=function(){l(function(e){var t=new Set(o("JSSet.bs").values(e));return o("MWPIsThreadUnread").isThreadUnread(n)&&m.has(g)?t.add(g):(o("MWPIsThreadUnread").isThreadUnread(n)&&t.delete(g),t)})},t[5]=m,t[6]=l,t[7]=n,t[8]=g,t[9]=b):b=t[9];var v;t[10]!==m?(v=[m],t[10]=m,t[11]=v):v=t[11],_(b,v);var S;t[12]!==m||t[13]!==g?(S=m.has(g),t[12]=m,t[13]=g,t[14]=S):S=t[14];var R=S,L=r("useMWAriaLabelForThread")(n),E,k;t[15]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x6s0dn4 x78zum5 xexx8yu x2vl965 x18d9i69 xe2zdcy"},k={className:"xf159sx"},t[15]=E,t[16]=k):(E=t[15],k=t[16]);var I=R?"highlight":"disabled",T;t[17]!==R?(T=R?o("fbicon")._(s("484757"),20):o("fbicon")._(s("659288"),20),t[17]=R,t[18]=T):T=t[18];var D;t[19]!==I||t[20]!==T?(D=c.jsx("div",babelHelpers.extends({},k,{children:c.jsx(r("MWXIcon_DEPRECATED.react"),{color:I,hideHoverOverlay:!0,icon:T})})),t[19]=I,t[20]=T,t[21]=D):D=t[21];var x;t[22]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x1iyjqo2 xeuugli x47corl"},t[22]=x):x=t[22];var $;t[23]!==a?($=c.jsx("div",babelHelpers.extends({},x,{children:a})),t[23]=a,t[24]=$):$=t[24];var P;t[25]!==$||t[26]!==D?(P=c.jsxs("div",babelHelpers.extends({"aria-hidden":!0},E,{children:[D,$]})),t[25]=$,t[26]=D,t[27]=P):P=t[27];var N;return t[28]!==L||t[29]!==R||t[30]!==C||t[31]!==P?(N=c.jsx(r("CometPressable.react"),{"aria-checked":R,"aria-label":L,onPress:C,role:"checkbox",xstyle:h,children:P}),t[28]=L,t[29]=R,t[30]=C,t[31]=P,t[32]=N):N=t[32],N}function h(){return[f.pressableContent]}l.default=g}),98);
__d("useGroupsCometJoinChatDialog",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWXCardedDialogLoadingState.react","react","react-compiler-runtime","useMWCMShouldGoToFullScreenChatHook","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(){return u.jsx(r("MWXCardedDialogLoadingState.react"),{})}d.displayName=d.name+" [from "+i.id+"]";function m(e,t,n,a,i,l){var u=o("react-compiler-runtime").c(12),c,m;u[0]!==t||u[1]!==e.threadKey?(c=function(){return{groupID:(s||(s=o("I64"))).to_string(t!=null?t:(s||(s=o("I64"))).zero),threadID:s.to_string(e.threadKey)}},m=[t,e.threadKey],u[0]=t,u[1]=e.threadKey,u[2]=c,u[3]=m):(c=u[2],m=u[3]);var p=o("Int64Hooks").useMemoInt64(c,m),_=r("useMWXEntryPointDialog")(r("GroupsCometJoinChatDialog.entrypoint"),p,void 0,d),f=_[0],g=r("useMWCMShouldGoToFullScreenChatHook")(),h=e.hasPendingInvitation||!1,y;return u[4]!==h||u[5]!==l||u[6]!==i||u[7]!==n||u[8]!==g||u[9]!==f||u[10]!==a?(y=function(){var e={invited:h,isSMC:l,onSuccess:i,parentSurface:n,shouldGoToMessenger:g,surface:a};f(e)},u[4]=h,u[5]=l,u[6]=i,u[7]=n,u[8]=g,u[9]=f,u[10]=a,u[11]=y):y=u[11],y}l.default=m}),98);
__d("getValidMediaURL",["I64","ServerTime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=o("I64"))).of_float(o("ServerTime").getMillis()/1e3)}function u(t){return(e||(e=o("I64"))).gt(t,(e||(e=o("I64"))).zero)?(e||(e=o("I64"))).lt(t,s()):!1}function c(e,t,n){return e!=null?u(e)?n:t:n}l.default=c}),98);
__d("useGroupsCometCMOffboardingEntryPointDialog",["FDSCardedDialogLoadingStateLegacy.react","GroupsCometCMOffboardingDialog.entrypoint","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsx(r("FDSCardedDialogLoadingStateLegacy.react"),{onClose:e,withCloseButton:!0})}u.displayName=u.name+" [from "+i.id+"]";function c(e){var t=o("react-compiler-runtime").c(2),n=e.groupID,a;return t[0]!==n?(a={groupID:n},t[0]=n,t[1]=a):a=t[1],r("useCometEntryPointDialog")(r("GroupsCometCMOffboardingDialog.entrypoint"),a,void 0,u)}l.default=c}),98);
__d("useMWCMJoinCMThread",["C4GFalcoLoggerDeferred","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSCommunityBitOffset","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadViewStoredProcedure","ReQL","ThreadStatus","emptyFunction","mwCMisStandAloneCommunity","promiseDone","react","react-compiler-runtime","useGroupsCometCMOffboardingEntryPointDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("react"))).useState,m=function(t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(18))||(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(21))};function p(t,n){var a=o("react-compiler-runtime").c(32),l=(e||(e=r("useReStore")))(),s;a[0]!==n?(s=n?o("LSCommunityBitOffset").has(1,n):!1,a[0]=n,a[1]=s):s=a[1];var p=s,_;a[2]===Symbol.for("react.memo_cache_sentinel")?(_=r("JSResourceForInteraction")("MWCMPausedChatMemberDialog.react").__setRef("useMWCMJoinCMThread"),a[2]=_):_=a[2];var f=r("useMWXLazyDialog")(_),g=f[0],h=r("useMWNavigation")(),y=d(!1),C=y[0],b=y[1],v;a[3]!==(n==null?void 0:n.fbGroupId)?(v=function(){var e;return{groupID:(u||(u=o("I64"))).to_string((e=n==null?void 0:n.fbGroupId)!=null?e:(u||(u=o("I64"))).zero)}},a[3]=n==null?void 0:n.fbGroupId,a[4]=v):v=a[4];var S=n==null?void 0:n.fbGroupId,R;a[5]!==S?(R=[S],a[5]=S,a[6]=R):R=a[6];var L=r("useGroupsCometCMOffboardingEntryPointDialog")(o("Int64Hooks").useMemoInt64(v,R)),E=L[0],k=t.clientThreadKey,I=t.threadKey,T=t.threadType,D,x;a[7]!==k||a[8]!==h||a[9]!==C||a[10]!==I||a[11]!==T?(D=function(){C&&m(T)&&(h.openTabOrInbox({clientThreadKey:k,threadKey:I,threadType:T},"inboxThreadList"),b(!1))},x=[T,k,I,C,h],a[7]=k,a[8]=h,a[9]=C,a[10]=I,a[11]=T,a[12]=D,a[13]=x):(D=a[12],x=a[13]),o("Int64Hooks").useEffectInt64(D,x);var $;a[14]!==l||a[15]!==(n==null?void 0:n.communityType)||a[16]!==(n==null?void 0:n.enableState)||a[17]!==(n==null?void 0:n.fbGroupId)||a[18]!==p||a[19]!==E||a[20]!==g||a[21]!==I?($=function(t,a,s,d){r("promiseDone")((async function(e){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(I));if(m!=null){var _=function(){r("promiseDone")(l.runInTransaction(function(e){return r("LSVerifyThreadViewStoredProcedure")(r("LSFactory")(e),{contacts:r("LSVec").ofArray([]),mailboxType:(c||(c=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),threadKey:m.threadKey,threadType:m.threadType})},"readwrite",void 0,void 0,i.id+":148"))},f=m.hasPendingInvitation||!1,h=m.threadStatus!=null&&(u||(u=o("I64"))).equal(m.threadStatus,(u||(u=o("I64"))).of_int32(r("ThreadStatus").PAUSED)),y=(u||(u=o("I64"))).equal((e=n==null?void 0:n.enableState)!=null?e:(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),C=!y&&h&&!o("LSThreadBitOffset").has(154,m)&&!f;if(C)return g({thread:m},r("emptyFunction"));if(!y&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)&&s){var v=a?a.metaKey||a.ctrlKey||a.shiftKey:!1;return _(),s(v)}if(r("mwCMisStandAloneCommunity")(n==null?void 0:n.communityType)){o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)?r("promiseDone")(l.runInTransaction(function(e){return b(!0),r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"",isRequestToJoin:!1,threadKey:m.threadKey})},"readwrite","ui",void 0,i.id+":213")):(t(),b(!0));return}if(m.needsAdminApprovalForNewParticipant===!0&&p&&d)return o("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",client_extras:{member_join_request_enabled:"1"},community_id:(u||(u=o("I64"))).to_string(m.parentThreadKey),event:"thread_join",parent_surface:"thread_list",source:m.hasPendingInvitation===!0?"direct_invite_join_button":"join_button",surface:"messenger_inbox",thread_id:u.to_string(m.threadKey)}),d();if(!y)return t();if((n==null?void 0:n.fbGroupId)!=null)return E({},r("emptyFunction"))}})())},a[14]=l,a[15]=n==null?void 0:n.communityType,a[16]=n==null?void 0:n.enableState,a[17]=n==null?void 0:n.fbGroupId,a[18]=p,a[19]=E,a[20]=g,a[21]=I,a[22]=$):$=a[22];var P=n==null?void 0:n.communityType,N=n==null?void 0:n.enableState,M=n==null?void 0:n.fbGroupId,w;return a[23]!==l||a[24]!==p||a[25]!==E||a[26]!==g||a[27]!==M||a[28]!==P||a[29]!==N||a[30]!==I?(w=[l,P,N,M,p,E,g,I],a[23]=l,a[24]=p,a[25]=E,a[26]=g,a[27]=M,a[28]=P,a[29]=N,a[30]=I,a[31]=w):w=a[31],o("Int64Hooks").useCallbackInt64($,w)}l.default=p}),98);
__d("useOnPressMWThreadListItem",["fbt","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MAWGroupInvitesForThread","MWCMThreadTypes.react","MWPIsThreadUnread","MessengerThreadTakedownState","MessengerWebUXLogger","ReQL","ThreadStatus","cr:12043","emptyFunction","getValidMediaURL","promiseDone","react-compiler-runtime","useCommunityFolder","useGroupsCometCMDisabledChatEntryPointDialog","useMWCMJoinCMThread","useMWNavigation","useMWXLazyDialog","useMWXPushErrorToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(e){var t=o("react-compiler-runtime").c(9),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useOnPressMWThreadListItem"),t[0]=n):n=t[0];var a=r("useMWXLazyDialog")(n),i=a[0],l=(c||(c=r("useReStore")))(),s;t[1]!==l.tables.threads||t[2]!==i||t[3]!==e?(s=function(){return function(){r("promiseDone")((async function(t){var n=(t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(e)))!=null?t:{},a=n.threadName,s=n.threadPictureUrl,u=n.threadPictureUrlExpirationTimestampMs,c=n.threadPictureUrlFallback;if(!(u==null||s==null||c==null||a==null)){var d=r("getValidMediaURL")(u,s,c);i({threadImageUrl:d,threadTitle:a},r("emptyFunction"))}})())}},t[1]=l.tables.threads,t[2]=i,t[3]=e,t[4]=s):s=t[4];var u;return t[5]!==l||t[6]!==i||t[7]!==e?(u=[l,i,e],t[5]=l,t[6]=i,t[7]=e,t[8]=u):u=t[8],o("Int64Hooks").useMemoInt64(s,u)}function m(t,a,i,l,m,p){var _=o("react-compiler-runtime").c(45),f=m===void 0?!0:m,g=(c||(c=r("useReStore")))(),h=r("useMWNavigation")(),y;_[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("JSResourceForInteraction")("MAWGroupInviteDialog.react").__setRef("useOnPressMWThreadListItem"),_[0]=y):y=_[0];var C=r("useMWXLazyDialog")(y),b=C[0],v=r("useCommunityFolder")(i),S=r("MessengerWebUXLogger").useInteractionLogger(),R;_[1]!==i.takedownState?(R=i.takedownState!=null&&(e||(e=o("I64"))).equal(i.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").GEO_BLOCKED)),_[1]=i.takedownState,_[2]=R):R=_[2];var L=R,E;_[3]!==i.threadKey?(E=(e||(e=o("I64"))).to_string(i.threadKey),_[3]=i.threadKey,_[4]=E):E=_[4];var k;_[5]!==L||_[6]!==E?(k={isGeoBlocked:L,threadID:E},_[5]=L,_[6]=E,_[7]=k):k=_[7];var I=r("useGroupsCometCMDisabledChatEntryPointDialog")(k),T=I[0],D;_[8]!==i.threadType?(D=o("LSMessagingThreadTypeUtil").isPublicCMThread(i.threadType),_[8]=i.threadType,_[9]=D):D=_[9];var x=D,$=d(i.threadKey),P=$[0],N=r("useMWCMJoinCMThread")(i,v),M=r("useMWXPushErrorToast")(),w;_[10]!==g||_[11]!==t||_[12]!==L||_[13]!==f||_[14]!==x||_[15]!==N||_[16]!==S||_[17]!==a||_[18]!==p||_[19]!==(v==null?void 0:v.takedownState)||_[20]!==h||_[21]!==M||_[22]!==l||_[23]!==T||_[24]!==b||_[25]!==P||_[26]!==i.threadKey?(w=function(d,m,_,y){r("promiseDone")((async function(){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(g.tables.threads).getKeyRange(i.threadKey));if(c!=null){var C=o("MAWGroupInvitesForThread").isGroupInviteThread(c),R=o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(c.threadType),E=o("MWCMThreadTypes.react").isUnjoinedCMThread(c.threadType),k=o("LSMessagingThreadTypeUtil").isCMSubthread(c.threadType),I=c.threadStatus!=null&&((e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),D=(v==null?void 0:v.takedownState)!=null&&(e||(e=o("I64"))).equal(v==null?void 0:v.takedownState,(e||(e=o("I64"))).of_int32(1)),$=c.takedownState!=null&&(e||(e=o("I64"))).equal(c.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").TAKEN_DOWN)),w=c.needsAdminApprovalForNewParticipant===!0,A=(e||(e=o("I64"))).equal(t!=null?t:(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),F=c.folderName==="inbox"?(u||(u=o("LSIntEnum"))).ofNumber(12):c.folderName==="pending"?(u||(u=o("LSIntEnum"))).ofNumber(29):(u||(u=o("LSIntEnum"))).ofNumber(30),O=o("MWPIsThreadUnread").isThreadUnread(c),B=function(t){var e={clientThreadKey:c.clientThreadKey,isUnread:O,threadKey:c.threadKey,threadType:c.threadType};if(n("cr:12043")!=null&&n("cr:12043").isFollowUpTagDisplayed(c)&&n("cr:12043").touchThreadMetadata(c.threadKey),t)return h.openInbox(e,a,F);h.openTabOrInbox(e,a,y,F,{subEntrypoint:p}),_&&_()},W=function(){l==null||l(!0),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(g,function(e){return r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"messengerdotcom",isRequestToJoin:w,threadKey:i.threadKey})},"joinCommunityChannel"),function(){B(!1),l==null||l(!1)},function(){M({title:s._(/*BTDS*/"Couldn't join chat. Please try again later.")})})},q=c.hasPendingInvitation||!1,U=!A&&I&&!o("LSThreadBitOffset").has(154,c)&&!q;if(S==null||S({eventName:"open_thread",threadKey:c.threadKey,threadType:c.threadType}),f||S==null||S({eventName:"open_thread_from_mini_list",threadKey:c.threadKey,threadType:c.threadType}),x&&($||D||L))return T({threadID:(e||(e=o("I64"))).to_string(c.threadKey)});if(E)return N(m,d,B,W);if(R&&U)return P();C?b({thread:c},r("emptyFunction")):k||B(d.metaKey||d.ctrlKey||d.shiftKey)}})())},_[10]=g,_[11]=t,_[12]=L,_[13]=f,_[14]=x,_[15]=N,_[16]=S,_[17]=a,_[18]=p,_[19]=v==null?void 0:v.takedownState,_[20]=h,_[21]=M,_[22]=l,_[23]=T,_[24]=b,_[25]=P,_[26]=i.threadKey,_[27]=w):w=_[27];var A=v==null?void 0:v.takedownState,F;return _[28]!==g||_[29]!==t||_[30]!==L||_[31]!==f||_[32]!==N||_[33]!==S||_[34]!==a||_[35]!==p||_[36]!==h||_[37]!==M||_[38]!==l||_[39]!==T||_[40]!==b||_[41]!==P||_[42]!==A||_[43]!==i.threadKey?(F=[g,i.threadKey,A,t,S,f,L,h,a,p,l,M,T,N,P,b],_[28]=g,_[29]=t,_[30]=L,_[31]=f,_[32]=N,_[33]=S,_[34]=a,_[35]=p,_[36]=h,_[37]=M,_[38]=l,_[39]=T,_[40]=b,_[41]=P,_[42]=A,_[43]=i.threadKey,_[44]=F):F=_[44],o("Int64Hooks").useCallbackInt64(w,F)}l.default=m}),226);
__d("usePreloadRoute",["JSScheduler","react","react-compiler-runtime","useCometRouterDispatcher","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(e,t){var n=o("react-compiler-runtime").c(6),a=r("useMWNavigation")(),i=r("useCometRouterDispatcher")(),l,c;n[0]!==i||n[1]!==a||n[2]!==e||n[3]!==t?(l=function(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){i!=null&&i.prefetchRouteDefinition(a.getUrlFromThreadKey(e,t))})},c=[i,a,e,t],n[0]=i,n[1]=a,n[2]=e,n[3]=t,n[4]=l,n[5]=c):(l=n[4],c=n[5]),u(l,c)}l.default=c}),98);
__d("MWThreadListItem.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometTextWithEntities.react","CurrentEnvironment","HeroInteractionIgnoreWithDiv.react","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSRtcCallState","LSThreadRangeFilter","LSThreadTitle.react","MAWUIMessageComposerDraftsPersistedDataService","MWCMJewelContext","MWCMThreadTypes.react","MWChatTextTransform","MWLogInboxFiltersInteraction","MWLogInteraction","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListLastMessage.react","MWThreadPicture.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXGlimmer.react","MWXListCellPressable.react","MWXSpinner.react","MWXText.react","MessageRequestsBulkActionsContext.react","MessageRequestsBulkActionsThreadListItem","MessagingCommunityChatsPauseStatus","MessengerMuteUtils","MessengerWebEntryPointsUtil","MessengerWebUXLogger","MetaConfig","ReQL","ReQLSuspense","deferredLoadComponent","emptyFunction","gkx","interaction-tracing-metrics","justknobx","mwCMIsAnyCMThread","mwCMIsThreadBumped","mwCMisStandAloneCommunity","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","requireDeferred","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useGroupsCometJoinChatDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWPThreadHasSpectraUser","useMWPreloadThread","useMWThreadSnippetForDisplay","useMenuButtonVisibilityState","useMergeRefs","useOnPressMWThreadListItem","usePreloadRoute","useReStore","useSimpleImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.memo,f=p.useCallback,g=p.useContext,h=p.useMemo,y=p.useState,C=r("deferredLoadComponent")(r("requireDeferred")("MWThreadListItemMoreActions.react").__setRef("MWThreadListItem.react")),b={communityGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x170jfvy",width:"x3hqpx7",$$css:!0},listItemContainer:{overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0},listItemContainerDisabled:{opacity:"xbyyjgo",$$css:!0},listItemContainerForMessengerDotCom:{paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0},threadBodyGlimmer:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},threadSnippetGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},threadTitleGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",marginTop:"x1k70j0n",width:"x3hqpx7",$$css:!0}};function v(t){var n=o("react-compiler-runtime").c(12),a=t.isUnread,l=t.selected,s=t.showFollowUpReminder,u=t.threadKey,c=(e||(e=r("useReStore")))(),d;n[0]!==c.tables.threads||n[1]!==u?(d=function(){return o("ReQL").fromTableAscending(c.tables.threads).getKeyRange(u)},n[0]=c.tables.threads,n[1]=u,n[2]=d):d=n[2];var p;n[3]!==c||n[4]!==u?(p=[c,u],n[3]=c,n[4]=u,n[5]=p):p=n[5];var _=o("ReQLSuspense").useFirst(d,p,i.id+":156");if(_==null)return null;var f;n[6]===Symbol.for("react.memo_cache_sentinel")?(f=m.jsx(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer})}),n[6]=f):f=n[6];var g;return n[7]!==a||n[8]!==l||n[9]!==s||n[10]!==_?(g=m.jsx(r("CometPlaceholder.react"),{fallback:f,name:"MWThreadListItem.DefaultSubtitle",children:m.jsx(S,{isUnread:a,selected:l,showFollowUpReminder:s,thread:_})}),n[7]=a,n[8]=l,n[9]=s,n[10]=_,n[11]=g):g=n[11],g}function S(e){var t=o("react-compiler-runtime").c(22),n=e.isUnread,a=e.selected,i=e.showFollowUpReminder,l=e.thread,s=r("useMWThreadSnippetForDisplay")(l,a),d=s.isDraft,p=s.lastMessageCtaType,_=s.shouldHideTimestamp,f=s.snippet,g;t[0]!==l.threadType?(g=o("MWCMThreadTypes.react").isUnjoinedCMThread(l.threadType),t[0]=l.threadType,t[1]=g):g=t[1];var h=g,y;t[2]!==l.disappearingSettingTtl?(y=r("MetaConfig")._("112")&&l.disappearingSettingTtl!=null&&(u||(u=o("I64"))).gt(l.disappearingSettingTtl,(u||(u=o("I64"))).zero),t[2]=l.disappearingSettingTtl,t[3]=y):y=t[3];var C=y,v=o("MAWUIMessageComposerDraftsPersistedDataService").getMAWUIMessageComposerDraftsPersistedDataService().isThreadLoading(l.threadKey,l.threadType);if(l.threadName==null&&r("mwCMIsAnyCMThread")(l.threadType)||v){var S;return t[4]===Symbol.for("react.memo_cache_sentinel")?(S=m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultSubtitleWithThread",hold:!0})]}),t[4]=S):S=t[4],S}if(o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l.threadType)&&f==null)return null;var R=!(u||(u=o("I64"))).equal(l.ongoingCallState,(c||(c=o("LSIntEnum"))).ofNumber(r("LSRtcCallState").NO_ONGOING_CALL)),L;t[5]!==l.lastActivityTimestampMs?(L=(u||(u=o("I64"))).to_float(l.lastActivityTimestampMs),t[5]=l.lastActivityTimestampMs,t[6]=L):L=t[6];var E=h&&(l==null?void 0:l.hasPendingInvitation)!==!0,k=!h&&!_,I;t[7]!==d||t[8]!==f||t[9]!==l?(I=m.jsx(r("MWThreadSnippetForDisplay.react"),{isDraftMessage:d,snippetRaw:f,thread:l}),t[7]=d,t[8]=f,t[9]=l,t[10]=I):I=t[10];var T;return t[11]!==C||t[12]!==n||t[13]!==p||t[14]!==i||t[15]!==R||t[16]!==L||t[17]!==E||t[18]!==k||t[19]!==I||t[20]!==l?(T=m.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:R,isUnread:n,lastMessageCtaType:p,lastMessageTimestamp:L,showDisappearingMessageVisualIndicator:C,showFollowUpReminder:i,showSnippetText:E,showTimestamp:k,snippet:I,thread:l}),t[11]=C,t[12]=n,t[13]=p,t[14]=i,t[15]=R,t[16]=L,t[17]=E,t[18]=k,t[19]=I,t[20]=l,t[21]=T):T=t[21],T}function R(t){var n=o("react-compiler-runtime").c(8),a=t.threadKey,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.threads||n[1]!==a?(s=function(){return o("ReQL").fromTableAscending(l.tables.threads,["threadName","threadType","threadKey"]).getKeyRange(a)},n[0]=l.tables.threads,n[1]=a,n[2]=s):s=n[2];var u;n[3]!==l||n[4]!==a?(u=[l,a],n[3]=l,n[4]=a,n[5]=u):u=n[5];var c=o("ReQLSuspense").useFirst(s,u,i.id+":261");if(c==null)return null;var d;return n[6]!==c?(d=c.threadName==null&&r("mwCMIsAnyCMThread")(c.threadType)?m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.threadTitleGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultThreadTitle",hold:!0})]}):m.jsx(r("LSThreadTitle.react"),{thread:c}),n[6]=c,n[7]=d):d=n[7],d}function L(e){var t=o("react-compiler-runtime").c(170),n=e.hideMoreActions,a=e.lsEntryPoint,i=e.lsSubEntryPoint,l=e.messagingEntrypoint,d=e.onClose,p=e.onPress,_=e.onPressOverride,f=e.onThreadJoined,h=e.onThreadSelected,S=e.parentSurface,L=e.renderAddOnEnd,E=e.renderThreadPhoto,k=e.renderThreadSubtitle,I=e.renderThreadTitle,T=e.selected,D=e.showFollowUpReminder,x=e.thread,$=n===void 0?!1:n,P=d===void 0?r("emptyFunction"):d,N=f===void 0?r("emptyFunction"):f,M=h===void 0?r("emptyFunction"):h,w=S===void 0?"channel_list":S,A=D===void 0?!1:D,F=g(r("MWCMJewelContext")),O=F.selectedFilterTab,B;t[0]!==x.threadType?(B={eventName:"threadlist_item_impression",threadType:x.threadType},t[0]=x.threadType,t[1]=B):B=t[1];var W=r("MessengerWebUXLogger").useImpressionLoggerRef(B),q;e:{if(!r("mwCMIsThreadBumped")(x)){q=!1;break e}if(r("CurrentEnvironment").messengerdotcom){q=w==="channel_list";break e}if(a==="jewel"){var U;t[2]!==O?(U=(u||(u=o("I64"))).equal(O,u.of_int32(r("LSThreadRangeFilter").NONE)),t[2]=O,t[3]=U):U=t[3],q=U;break e}q=a!=="inboxThreadList"}var V=q,H,G;t[4]!==V||t[5]!==E||t[6]!==x.threadKey?(G=function(){return E!=null?E:function(){return m.jsx(r("MWThreadPicture.react"),{badgeSize:r("gkx")("23219")?10:14,photoSize:r("gkx")("23219")?48:56,threadKey:x.threadKey,withAltText:!1,withCommunityPicture:V})}},H=[V,E,x.threadKey],t[4]=V,t[5]=E,t[6]=x.threadKey,t[7]=H,t[8]=G):(H=t[7],G=t[8]);var z=o("Int64Hooks").useMemoInt64(G,H),j,K;t[9]!==I||t[10]!==x.threadKey?(j=function(){return I!=null?I:function(){return m.jsx(R,{threadKey:x.threadKey})}},K=[I,x.threadKey],t[9]=I,t[10]=x.threadKey,t[11]=j,t[12]=K):(j=t[11],K=t[12]);var Q=o("Int64Hooks").useMemoInt64(j,K),X=r("useCommunityFolder")(x),Y=X==null?void 0:X.takedownState,J;t[13]!==Y||t[14]!==x.takedownState?(J=r("mwIsThreadDisabled")(x.takedownState,Y),t[13]=Y,t[14]=x.takedownState,t[15]=J):J=t[15];var Z=J,ee=o("MWPIsThreadUnread").useIsThreadUnread(x.threadKey)&&!Z,te,ne;t[16]!==ee||t[17]!==k||t[18]!==T||t[19]!==A||t[20]!==x.threadKey?(te=function(){return k!=null?k:function(){return m.jsx(v,{isUnread:ee,selected:T,showFollowUpReminder:A,threadKey:x.threadKey})}},ne=[ee,k,x.threadKey,T,A],t[16]=ee,t[17]=k,t[18]=T,t[19]=A,t[20]=x.threadKey,t[21]=te,t[22]=ne):(te=t[21],ne=t[22]);var re=o("Int64Hooks").useMemoInt64(te,ne),oe;t[23]!==(X==null?void 0:X.name)||t[24]!==x.threadType?(oe=function(){return!r("mwCMIsAnyCMThread")(x.threadType)||r("CurrentEnvironment").messengerdotcom?null:(X==null?void 0:X.name)==null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.communityGlimmer}),m.jsx(r("MWVerticalRhythm"),{height:8}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.Folder",hold:!0})]}):m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta3",children:X==null?void 0:X.name}),m.jsx(r("MWVerticalRhythm"),{height:8})]})},t[23]=X==null?void 0:X.name,t[24]=x.threadType,t[25]=oe):oe=t[25];var ae=X==null?void 0:X.name,ie;t[26]!==ae||t[27]!==x.threadType?(ie=[ae,x.threadType],t[26]=ae,t[27]=x.threadType,t[28]=ie):ie=t[28];var le=o("Int64Hooks").useCallbackInt64(oe,ie),se;t[29]!==x.threadType?(se=function(){var e=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t=o("interaction-tracing-metrics").InteractionTracingMetricsCore.currentInteractionLogger(),n=Number(e);return t.forEach(function(e){var t;n=((t=e.annotations.int)==null?void 0:t.hasSecureThread)||0||n}),t.addMetadata("hasSecureThread",n?1:0)},t[29]=x.threadType,t[30]=se):se=t[30],r("useSimpleImpression")(se);var ue;t[31]!==x.parentThreadKey?(ue=(u||(u=o("I64"))).to_string(x.parentThreadKey),t[31]=x.parentThreadKey,t[32]=ue):ue=t[32];var ce;t[33]!==X?(ce=X?(u||(u=o("I64"))).to_string(X.fbGroupId):void 0,t[33]=X,t[34]=ce):ce=t[34];var de=a==="jewel"?"jewel_inbox":"chats_inbox",me;t[35]!==x.threadKey?(me=(u||(u=o("I64"))).to_string(x.threadKey),t[35]=x.threadKey,t[36]=me):me=t[36];var pe;t[37]!==ue||t[38]!==ce||t[39]!==de||t[40]!==me?(pe={community_id:ue,event:"bumped_chat_rendered",group_id:ce,parent_surface:de,source:"unknown",surface:"messenger_inbox",thread_id:me},t[37]=ue,t[38]=ce,t[39]=de,t[40]=me,t[41]=pe):pe=t[41];var _e=r("useGroupsCometChatsEngagementImpressionLogger")(pe),fe;t[42]!==x.threadType?(fe=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t[42]=x.threadType,t[43]=fe):fe=t[43];var ge=fe,he=r("useMWNavigation")(),ye=o("MWCMThreadTypes.react").isUnjoinedCMThread(x.threadType),Ce;t[44]!==(X==null?void 0:X.communityType)||t[45]!==x?(Ce=x.hasPendingInvitation===!0&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(x,X==null?void 0:X.communityType),t[44]=X==null?void 0:X.communityType,t[45]=x,t[46]=Ce):Ce=t[46];var be=Ce,ve,Se;t[47]!==x?(Se=o("MessengerMuteUtils").calcMuteUntilMs(x),t[47]=x,t[48]=Se):Se=t[48],ve=Se;var Re=ve,Le=r("useMenuButtonVisibilityState")(!0),Ee=Le[1],ke=Ee.setListItemFocused,Ie=Ee.setListItemHovered,Te=r("mwCMIsAnyCMThread")(x.threadType),De;t[49]!==x.parentThreadKey?(De=(u||(u=o("I64"))).equal(x.parentThreadKey,(c||(c=o("LSIntEnum"))).ofNumber(0)),t[49]=x.parentThreadKey,t[50]=De):De=t[50];var xe=De,$e=r("useMWPThreadHasSpectraUser")(x.threadKey),Pe=Z||$e?!1:xe?!0:!(ye||$),Ne;t[51]!==Ie?(Ne=function(){return Ie(!1)},t[51]=Ie,t[52]=Ne):Ne=t[52];var Me=Ne,we;t[53]!==Ie?(we=function(){return Ie(!0)},t[53]=Ie,t[54]=we):we=t[54];var Ae=we,Fe=r("useMWPreloadThread")(x,ge),Oe=Fe.onHoverInPreloader,Be=Fe.onHoverOutPreloader,We=Fe.onPressInPreloader,qe;if(X!=null&&Te){var Ue;t[55]!==X.enableState||t[56]!==X.fbGroupId||t[57]!==X.folderId?(Ue=[X.fbGroupId,X.folderId,X.enableState],t[55]=X.enableState,t[56]=X.fbGroupId,t[57]=X.folderId,t[58]=Ue):Ue=t[58],qe=Ue}else{var Ve;t[59]===Symbol.for("react.memo_cache_sentinel")?(Ve=[void 0,void 0,void 0],t[59]=Ve):Ve=t[59],qe=Ve}var He=qe,Ge=He[0],ze=He[1],je=He[2],Ke=g(r("MessageRequestsBulkActionsContext.react")),Qe=Ke.isBulkActionsEditMode;r("usePreloadRoute")(x.threadKey,x.threadType);var Xe;t[60]!==X?(Xe=(X==null?void 0:X.pauseStatus)!=null&&(u||(u=o("I64"))).equal(X.pauseStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION)),t[60]=X,t[61]=Xe):Xe=t[61];var Ye=Xe,Je;t[62]!==V||t[63]!==Ye||t[64]!==Z||t[65]!==a||t[66]!==x.threadType?(Je=function(){return o("MessengerWebEntryPointsUtil").getEntryPointShouldOverrideThreadSnippetRemoval(a)?!1:Ye||!Z&&!V&&o("MWCMThreadTypes.react").isJoinedCMThread(x.threadType)},t[62]=V,t[63]=Ye,t[64]=Z,t[65]=a,t[66]=x.threadType,t[67]=Je):Je=t[67];var Ze=Je,et=y(!1),tt=et[0],nt=et[1],rt=r("useOnPressMWThreadListItem")(je,a,x,nt,!0,i),ot=X==null?void 0:X.communityType,at;t[68]!==ot?(at=r("mwCMisStandAloneCommunity")(ot),t[68]=ot,t[69]=at):at=t[69];var it=at,lt=r("useGroupsCometJoinChatDialog")(x,Ge,w,"messenger_inbox",N,it),st,ut;t[70]!==ze||t[71]!==be||t[72]!==Ge||t[73]!==Z||t[74]!==l||t[75]!==Re||t[76]!==P||t[77]!==rt||t[78]!==w||t[79]!==L||t[80]!==lt||t[81]!==x.threadKey?(st=function(){return Z||be?void 0:m.jsx(r("MWThreadListItemAddOnEnd.react"),{communityId:ze,fbGroupId:Ge,isMaximized:!0,messagingEntrypoint:l,mutedUntilMs:Re,parentSurface:w,renderAddOnEnd:L,showGroupsJoinChatDialog:function(t){return rt(t,lt,P)},threadKey:x.threadKey})},ut=[ze,be,Ge,!0,Z,l,Re,P,rt,w,L,lt,x.threadKey],t[70]=ze,t[71]=be,t[72]=Ge,t[73]=Z,t[74]=l,t[75]=Re,t[76]=P,t[77]=rt,t[78]=w,t[79]=L,t[80]=lt,t[81]=x.threadKey,t[82]=st,t[83]=ut):(st=t[82],ut=t[83]);var ct=o("Int64Hooks").useMemoInt64(st,ut),dt;t[84]!==ct||t[85]!==tt||t[86]!==Z||t[87]!==Ze||t[88]!==ee||t[89]!==he||t[90]!==P||t[91]!==Oe||t[92]!==Be||t[93]!==p||t[94]!==We||t[95]!==rt||t[96]!==_||t[97]!==M||t[98]!==le||t[99]!==z||t[100]!==re||t[101]!==Q||t[102]!==T||t[103]!==ke||t[104]!==lt||t[105]!==x?(dt=function(){var e=x.additionalThreadContext!=null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta4",children:m.jsx(r("CometTextWithEntities.react"),{text:x.additionalThreadContext,transforms:o("MWChatTextTransform").textTransforms})}),m.jsx(r("MWVerticalRhythm"),{height:8})]}):null,t=s._(/*BTDS*/"Joining chat..."),n=m.jsxs(m.Fragment,{children:[m.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.AddOnEndLoadingSpinner",hold:!0})]});return m.jsx(r("MWXListCellPressable.react"),{addOnEnd:tt?n:ct,addOnStart:z(),"aria-current":T?"page":!1,content:m.jsxs(o("react-strict-dom").html.div,{children:[e,le(),m.jsx(r("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:ee?"headlineEmphasized4":"headline4",children:Q()}),Ze()?null:m.jsxs(m.Fragment,{children:[m.jsx(r("MWVerticalRhythm"),{height:8}),tt?m.jsx(r("MWXText.react"),{type:"entityHeaderMeta3",children:t}):re()]})]}),disabled:tt,linkProps:Z?void 0:{preventLocalNavigation:!0,url:he.getUrlFromThreadKey(x.threadKey,x.threadType)},onFocusChange:ke,onHoverIn:Oe,onHoverOut:Be,onPress:function(t){r("justknobx")._("4052")?(o("MWLogInteraction").logPopoverOpenComplete("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationComplete()):(o("MWLogInteraction").logPopoverOpenCancel("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("thread_click")),_!=null?_==null||_(t):(p==null||p(t,x),rt(t,lt,P)),M()},onPressIn:We,selected:T,size:"large"})},t[84]=ct,t[85]=tt,t[86]=Z,t[87]=Ze,t[88]=ee,t[89]=he,t[90]=P,t[91]=Oe,t[92]=Be,t[93]=p,t[94]=We,t[95]=rt,t[96]=_,t[97]=M,t[98]=le,t[99]=z,t[100]=re,t[101]=Q,t[102]=T,t[103]=ke,t[104]=lt,t[105]=x,t[106]=dt):dt=t[106];var mt;t[107]!==ct||t[108]!==xe||t[109]!==tt||t[110]!==Z||t[111]!==Ze||t[112]!==ee||t[113]!==he||t[114]!==P||t[115]!==Oe||t[116]!==Be||t[117]!==p||t[118]!==We||t[119]!==rt||t[120]!==_||t[121]!==M||t[122]!==le||t[123]!==z||t[124]!==re||t[125]!==Q||t[126]!==T||t[127]!==ke||t[128]!==lt||t[129]!==x?(mt=[x,tt,ct,z,T,!0,xe,le,ee,Q,Ze,re,Z,he,ke,Oe,Be,We,_,M,p,rt,lt,P],t[107]=ct,t[108]=xe,t[109]=tt,t[110]=Z,t[111]=Ze,t[112]=ee,t[113]=he,t[114]=P,t[115]=Oe,t[116]=Be,t[117]=p,t[118]=We,t[119]=rt,t[120]=_,t[121]=M,t[122]=le,t[123]=z,t[124]=re,t[125]=Q,t[126]=T,t[127]=ke,t[128]=lt,t[129]=x,t[130]=mt):mt=t[130];var pt=o("Int64Hooks").useMemoInt64(dt,mt),_t;t[131]!==Le||t[132]!==l||t[133]!==P||t[134]!==T||t[135]!==Pe||t[136]!==x.threadKey||t[137]!==x.threadName||t[138]!==x.threadType?(_t=function(){return Pe?m.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWThreadListItem.MoreActions",children:m.jsx(C,{menuButtonVisibilityState:Le,messagingEntrypoint:l,onClose:P,selected:T,thread:{threadKey:x.threadKey,threadName:x.threadName,threadType:x.threadType}})})}):null},t[131]=Le,t[132]=l,t[133]=P,t[134]=T,t[135]=Pe,t[136]=x.threadKey,t[137]=x.threadName,t[138]=x.threadType,t[139]=_t):_t=t[139];var ft;t[140]!==Ge||t[141]!==Le||t[142]!==l||t[143]!==P||t[144]!==T||t[145]!==Pe||t[146]!==x.threadKey||t[147]!==x.threadName||t[148]!==x.threadType?(ft=[Ge,Le,l,P,T,Pe,x.threadName,x.threadKey,x.threadType],t[140]=Ge,t[141]=Le,t[142]=l,t[143]=P,t[144]=T,t[145]=Pe,t[146]=x.threadKey,t[147]=x.threadName,t[148]=x.threadType,t[149]=ft):ft=t[149];var gt=o("Int64Hooks").useMemoInt64(_t,ft),ht=r("useMergeRefs")(W,V?_e:null),yt=ge?"mwthreadlist-item-secure":"mwthreadlist-item-open",Ct=Z?b.listItemContainerDisabled:!1,bt;t[150]!==Ct?(bt=[b.listItemContainer,Ct,r("gkx")("23219")?b.listItemContainerForMessengerDotCom:!1],t[150]=Ct,t[151]=bt):bt=t[151];var vt;t[152]!==Qe||t[153]!==x||t[154]!==pt?(vt=Qe?m.jsx(r("MessageRequestsBulkActionsThreadListItem"),{thread:x,threadListCell:pt}):pt,t[152]=Qe,t[153]=x,t[154]=pt,t[155]=vt):vt=t[155];var St;t[156]!==vt?(St=m.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:m.jsx(o("react-strict-dom").html.div,{role:"gridcell",children:vt})}),t[156]=vt,t[157]=St):St=t[157];var Rt;t[158]!==gt||t[159]!==St?(Rt=m.jsxs(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[St,gt]}),t[158]=gt,t[159]=St,t[160]=Rt):Rt=t[160];var Lt;t[161]!==Ae||t[162]!==Me||t[163]!==bt||t[164]!==Rt?(Lt=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,onMouseEnter:Ae,onMouseLeave:Me,role:"row",style:bt,children:Rt}),t[161]=Ae,t[162]=Me,t[163]=bt,t[164]=Rt,t[165]=Lt):Lt=t[165];var Et;return t[166]!==ht||t[167]!==yt||t[168]!==Lt?(Et=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,ref:ht,children:Lt}),t[166]=ht,t[167]=yt,t[168]=Lt,t[169]=Et):Et=t[169],Et}var E=_(L);l.default=E}),226);
__d("useMWPMarkSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWPMarkSeenDeferred").__setRef("useMWPMarkSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return function(e){return n.markSeen(t,e)}}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMWPWatchFolderFocusChanges",["react","react-compiler-runtime","useGlobalEventListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(6),a=c(!1),i;n[0]!==e||n[1]!==t?(i=function(){a.current&&(t.current&&e!=null&&e(),a.current=!1)},n[0]=e,n[1]=t,n[2]=i):i=n[2];var l=i,s;n[3]===Symbol.for("react.memo_cache_sentinel")?(s=function(){a.current||(a.current=!0)},n[3]=s):s=n[3];var u=s,d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d={},n[4]=d):d=n[4],r("useGlobalEventListener")("focus",l,d);var m;n[5]===Symbol.for("react.memo_cache_sentinel")?(m={},n[5]=m):m=n[5],r("useGlobalEventListener")("blur",u,m)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("AudioSettingsVolumeSetting",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:"default",QUIET:"quiet"});i.default=e}),66);
__d("CometVideoPlayerNextgendashAvailability",[],(function(t,n,r,o,a,i){var e=Object.freeze({AVAILABLE:"AVAILABLE",UNAVAILABLE_NEXTGENDASH_GK:"UNAVAILABLE_NEXTGENDASH_GK",UNAVAILABLE_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5",UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",UNAVAILABLE_FROM_JS_NEXTGENDASH_GK:"UNAVAILABLE_FROM_JS_NEXTGENDASH_GK",UNAVAILABLE_FROM_JS_NOT_DESIRED:"UNAVAILABLE_FROM_JS_NOT_DESIRED"});i.default=e}),66);
__d("CometVideoPlayerVideoDeliveryResponse",["emptyFunction","fb-error"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={quality:"SD"};return{ok:!0,value:{dash_manifest_urls:[],dash_manifests:[],hls_playlist_urls:[],progressive_urls:[{failure_reason:e!=null&&e!==""?null:{message_format:"makeVideoDeliveryResponseResultFromSingleProgressiveUrl received empty value",message_params:[],type:"from_js_progressive_url_is_empty"},metadata:t,progressive_url:e!=null&&e!==""?e:null}]}}}function s(e,t){t===void 0&&(t=!1);var n=null,o=null,a=null,i=null,l=[],s=[],c=[],d=[],m=[];if(e.ok!==!0){var p=r("fb-error").err("VideoDeliveryResponse API failed: %s",JSON.stringify(e.errors.map(function(e){try{return JSON.stringify(e),e}catch(t){return String(e)}})));p.name="VideoDeliveryResponseAPIFailed",l.push(p)}else{var _,f,g,h,y=e.value,C=u(s,"dash_manifests","DashManifest",y.dash_manifests,r("emptyFunction").thatReturnsTrue,function(e){return e.manifest_xml!=null&&e.manifest_xml!==""?e:null})[0],b=u(c,"dash_manifest_urls","DashManifestURL",y.dash_manifest_urls,r("emptyFunction").thatReturnsTrue,function(e){return e.manifest_url!=null&&e.manifest_url!==""?e:null})[0],v=u(d,"progressive_urls","ProgressiveURLHD",y.progressive_urls,function(e){var t;return((t=e.metadata)==null?void 0:t.quality)==="HD"},function(e){return e.progressive_url!=null?e:null})[0],S=u(d,"progressive_urls","ProgressiveURLSD",y.progressive_urls,function(e){var t;return((t=e.metadata)==null?void 0:t.quality)==="SD"},function(e){return e.progressive_url!=null?e:null})[0];if(n=(_=C==null?void 0:C.manifest_xml)!=null?_:null,o=(f=b==null?void 0:b.manifest_url)!=null?f:null,a=(g=v==null?void 0:v.progressive_url)!=null?g:null,i=(h=S==null?void 0:S.progressive_url)!=null?h:null,a==null&&i==null&&t){var R,L=u(m,"hls_playlist_urls","HLSPlaylistURL",y.hls_playlist_urls,r("emptyFunction").thatReturnsTrue,function(e){return e.hls_playlist_url!=null?e:null})[0];a=null,i=(R=L==null?void 0:L.hls_playlist_url)!=null?R:null}}return{browserNativeHdUrl:a,browserNativeSdUrl:i,dashManifestDeliveryFailures:s,dashManifestUrl:o,dashManifestUrlDeliveryFailures:c,dashManifestXmlString:n,hlsDeliveryFailures:m,progressiveDeliveryFailures:d,videoDeliveryResponseAPIFailures:l}}function u(e,t,n,r,o,a){var i=r.filter(o),l=i.map(function(e){return e.failure_reason==null?a(e):null}).filter(Boolean);if(i.length===0)e.push(d(t,n,r));else if(l.length===0){var s=i.filter(function(e){return e.failure_reason!=null});s.length===0?e.push(m(t,n,r)):e.push.apply(e,s.map(function(e){return e.failure_reason!=null?c(t,n,e.failure_reason,e.metadata):null}).filter(Boolean))}return l}function c(e,t,n,o){var a;try{var i;a=(i=JSON.stringify(o))!=null?i:String(o)}catch(e){a=String(o)}var l=r("fb-error").err.apply(r("fb-error"),["VideoDeliveryResponse "+e+" failure for "+t+": "+n.type+"; metadata=%s"+(n.message_format!=null&&n.message_format!==""?"; "+n.message_format:""),a].concat(n.message_params));return l.name="VideoDeliveryResponseFailureReason/"+e+"("+t+")/"+n.type,l}function d(e,t,n){var o;try{var a;o=(a=JSON.stringify(n))!=null?a:"N/A"}catch(e){o="N/A"}var i=r("fb-error").err("VideoDeliveryResponse "+e+" failure for "+t+": no matching items; all items: %s",o);return i.name="VideoDeliveryResponseContractViolation/"+e+"("+t+")/no_matching",i}function m(e,t,n){var o;try{var a;o=(a=JSON.stringify(n))!=null?a:"N/A"}catch(e){o="N/A"}var i=r("fb-error").err("VideoDeliveryResponse "+e+" failure for "+t+": no succeeded or failed items; all items: %s",o);return i.name="VideoDeliveryResponseContractViolation/"+e+"("+t+")/no_success_and_failure",i}l.makeVideoDeliveryResponseResultFromSingleProgressiveUrl=e,l.processVideoDeliveryResponseResult=s,l.extractVideoDeliveryResponseSuccessAndFailures=u}),98);
__d("CometVideoPlayerVideoDeliveryResponseRelayFragment_video_delivery_response.graphql",["cr:9059"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:9059")}),34);
__d("CometVideoPlayerVideoDeliveryResponseRelayFragment",["CometRelay","CometVideoPlayerVideoDeliveryResponseRelayFragment_video_delivery_response.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo,c=e!==void 0?e:e=n("CometVideoPlayerVideoDeliveryResponseRelayFragment_video_delivery_response.graphql");function d(e){var t=o("react-compiler-runtime").c(4),n=e!=null&&e.ok&&e.value!=null?e.value:null,r=o("CometRelay").useFragment(c,n),a,i;return t[0]!==n||t[1]!==r||t[2]!==e?(i=e==null||n==null||r==null?null:e.ok?{ok:!0,value:r}:{errors:e.errors,ok:!1},t[0]=n,t[1]=r,t[2]=e,t[3]=i):i=t[3],a=i,a}l.CometVideoPlayerVideoDeliveryResponseRelayFragment=c,l.useCometVideoPlayerVideoDeliveryResponseResultFromRelay=d}),98);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.fairplay_cert,n=e.graph_api_video_license_uri,o=e.video_license_uri_map,a=e.widevine_cert,i={fairplayCert:t,graphApiVideoLicenseUri:n!=null?n:null,videoLicenseUriMap:o,widevineCert:a};return i.graphApiVideoLicenseUri===null&&r("isEmptyObject")(i.videoLicenseUriMap)?null:i}l.makeGraphQLVideoDRMInfo=e}),98);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);function l(t){var n;return(n=e.cast(t))!=null?n:null}i.HiveTechOrder=e,i.hiveTechOrderOrNull=l}),66);
__d("InstreamVideoAdBreaksPlayer_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"InstreamExtraConfig",kind:"LinkedField",name:"instream_extra_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"instream_halo_delay_time_seconds",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{args:null,documentName:"InstreamVideoAdBreaksPlayer_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayerImpl_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("InstreamVideoAdBreaksPlayer.react",["CometPlaceholder.react","CometRelay","InstreamVideoAdBreaksPlayer_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),l=t.playerFormat,s=t.subOrigin,c=t.video,d=o("CometRelay").useFragment(e!==void 0?e:e=n("InstreamVideoAdBreaksPlayer_video.graphql"),c),m=d.id,p=d.instream_extra_config,_=d.instream_video_ad_breaks_comet,f=p==null?void 0:p.instream_halo_delay_time_seconds,g;a[0]!==f?(g={instreamHaloDelayTimeSeconds:f},a[0]=f,a[1]=g):g=a[1];var h;a[2]!==_||a[3]!==l||a[4]!==s||a[5]!==g||a[6]!==m?(h={instreamExtraConfig:g,instreamVideoAdBreaksComet:_,playerFormat:l,subOrigin:s,videoFBID:m},a[2]=_,a[3]=l,a[4]=s,a[5]=g,a[6]=m,a[7]=h):h=a[7];var y;return a[8]!==_||a[9]!==h?(y=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(o("CometRelay").MatchContainer,{match:_,props:h})}),a[8]=_,a[9]=h,a[10]=y):y=a[10],y}l.default=c}),98);
__d("LatencySensitiveType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2}),l=e;i.default=l}),66);
__d("getAvailableMimeCodecsFromDashManifest",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=/^(audio|video)\/.*$/;return t.test(e)}function l(t,n){var r=[],o=n?window.ManagedMediaSource:window.MediaSource;if(t!=null){for(var a=/mimeType=\"([^\"]*)\"[^\>]*codecs=\"([^\"]*)\"/g,i=/codecs=\"([^\"]*)\"[^\>]*mimeType=\"([^\"]*)\"/g,l,s=[];l=a.exec(t);)s.push([l[1],l[2]]);for(;l=i.exec(t);)s.push([l[2],l[1]]);for(var u of s){var c=u[0],d=u[1],m=c+'; codecs="'+d+'"',p=c.startsWith("audio")?"audio":c.startsWith("video")?"video":"other",_=!0,f=!1;e(m)&&(f=!0,_=o?o.isTypeSupported(m):!1),r.push({codecs:d,isRequiredForPlayback:f,isTypeSupported:_,mimeCodec:m,mimeType:c,representationType:p})}}return r}i.default=l}),66);
__d("VideoPlayerOzImplementationData",["err","getAvailableMimeCodecsFromDashManifest"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.canUseOz,n=e.dashManifestUrl,o=e.dashManifestUrlOverride_DO_NOT_USE,a=e.dashManifestXmlString,i=e.experimentationConfig,l=e.initialAudioUserPreferredLanguage,s=e.initiateLivePlaybackFromStart,u=e.minQualityPreference;if(t!==!0){var c=r("err")("canUseOz="+String(t));return c.name="GotCanUseOz/"+String(t),c}var d=o!=null||a==null||a===""?null:a,m=o!=null?o:n==null||n===""?null:n;if(d==null&&m==null){var p=r("err")("Got no manifest XML and no URL to it");return p.name="GotNoManifestOrURL",p}var _=i.getBool("enable_managed_media_source",!1);if(_){if(!window.ManagedMediaSource){var f=r("err")("window.ManagedMediaSource is missing");return f.name="GotMissingManagedMediaSourceAPI",f}}else if(!window.MediaSource){var g=r("err")("window.MediaSource is missing");return g.name="GotMissingMediaSourceAPI",g}if(d!=null){var h=r("getAvailableMimeCodecsFromDashManifest")(d,_).filter(function(e){return e.isRequiredForPlayback}),y=h.filter(function(e){return!e.isTypeSupported});if(y.length>0){var C=r("err")("%s out of %s codecs in DASH manifest required for playback are unsupported: %s",String(y.length),String(h.length),h.map(function(e){return e.mimeType+"/"+e.codecs+"="+(e.isTypeSupported?"yes":"no")}).join(", "));return C.name="GotManifestWithUnsupportedCodecs",C}}return{experimentationConfig:i,initialAudioUserPreferredLanguage:l!=null?l:null,initialVideoVariant:{lang:l!=null?l:null,role:null},initiateLivePlaybackFromStart:s!=null?s:!1,manifest:d,manifestUrl:m,minQualityPreference:u!=null?u:null}}l.makeOzImplementationData=e}),98);
__d("VideoPlayerOzWWWConfig",[],(function(t,n,r,o,a,i){"use strict";var e="oz_www_",l=(function(){function t(e){this.$1=e}var n=t.prototype;return n.getBool=function(n,r){return this.$1.getBool(e+n,r)},n.getNumber=function(n,r){return this.$1.getNumber(e+n,r)},n.getString=function(n,r){return this.$1.getString(e+n,r)},n.setContext=function(t,n){this.$1.setContext(t,n)},n.getAllContexts=function(){return this.$1.getAllContexts()},t})();i.default=l}),66);
__d("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24695150046757633"}),null);
__d("VideoPlayerRelayFragmentRefetchQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},t={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},r={defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},o=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,r,e],kind:"Operation",name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:[{kind:"Variable",name:"VideoPlayerRelay_video$playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"VideoPlayerRelay_video$playerSuborigin",variableName:"playerSuborigin"}],fragment:n("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"),metadata:{},name:"VideoPlayerRelayFragmentRefetchQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("VideoPlayerRelay_video.graphql",["VideoPlayerRelayFragmentRefetchQuery.graphql"],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:n("VideoPlayerRelayFragmentRefetchQuery.graphql"),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_podcast_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LatencySensitiveConfig",kind:"LinkedField",name:"latency_sensitive_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_latency_sensitivity",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LivePlaybackInstrumentationConfigParams",kind:"LinkedField",name:"live_playback_instrumentation_configs",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_client_triggered_trace_enabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seo_web_crawler_lookaside_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementationsParamsRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerBuilder_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{args:null,documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"InstreamVideoAdBreaksPlayer_video"}]},{args:null,kind:"FragmentSpread",name:"VideoPlayerVideoIsCastingCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerIMFFromVideoMetadataRelay_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerUnsupportedBrowserMessageFallback.react",["ErrorMetadata","FBLogger","VideoPlayerFallbackCover.react","err","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo,m=u.useRef;function p(e,t){var n=o("react-compiler-runtime").c(11),a;e:{if(e!=null){var i;if(n[0]!==e||n[1]!==t){var l;i=r("err")("Cannot play video: Unsupported browser message from server: %s",e),i.name="VideoPlayerUnsupportedBrowserMessageFromServer";var u=(l=i.metadata)!=null?l:new(r("ErrorMetadata"));i.metadata=u,u.addEntry("COMET_VIDEO","VIDEO_ID",t),n[0]=e,n[1]=t,n[2]=i}else i=n[2];a=i;break e}a=null}var d=a,p=m(!1),_;n[3]!==d?(_=function(){if(d!=null&&!p.current){var e,t,n;p.current=!0,(e=r("FBLogger")("comet_video_player").catching(d)).warn.apply(e,[(t=d.messageFormat)!=null?t:""].concat((n=d.messageParams)!=null?n:[]))}},n[3]=d,n[4]=_):_=n[4];var f;if(n[5]!==d||n[6]!==t?(f=[d,t],n[5]=d,n[6]=t,n[7]=f):f=n[7],c(_,f),e!=null){var g;return n[8]!==e||n[9]!==d?(g=s.jsx(r("VideoPlayerFallbackCover.react"),{debugError:d,message:e}),n[8]=e,n[9]=d,n[10]=g):g=n[10],g}return null}l.useVideoPlayerUnsupportedBrowserMessageFallback=p}),98);
__d("VideoPlayerXImplRelayWrapper.react",["VideoPlayerXImpl.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoPlayerXImpl.react")}),98);
__d("XFBLatencySensitiveTypeUtils.facebook",["$InternalEnumUtils","LatencySensitiveType"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("LatencySensitiveType")),s=o("$InternalEnumUtils").createFromJSEnum(r("LatencySensitiveType"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","react-compiler-runtime","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=o("react-compiler-runtime").c(4),a=o("CometRelay").useFragment(e!==void 0?e:e=n("useGraphQLVideoAutoplayGatingResult_video.graphql"),t),i;return r[0]!==a.autoplay_gating_result||r[1]!==a.can_autoplay||r[2]!==a.viewer_autoplay_setting?(i=o("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay),r[0]=a.autoplay_gating_result,r[1]=a.can_autoplay,r[2]=a.viewer_autoplay_setting,r[3]=i):i=r[3],i}l.default=s}),98);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","react","useGraphQLVideoDRMInfo_video.graphql","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useRef;function d(e){if(e!=null){var t=m(e);return o("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(t)}return null}function m(e){var t=JSON.parse(e)||{},n=t.fairplay_cert,r=t.graph_api_video_license_uri,o=t.video_license_uri_map,a=t.widevine_cert;return{fairplay_cert:n,graph_api_video_license_uri:r,video_license_uri_map:o,widevine_cert:a}}function p(t){var a=o("CometRelay").useFragment(e!==void 0?e:e=n("useGraphQLVideoDRMInfo_video.graphql"),t),i=c(null),l=d(a.drm_info),u=(s||(s=r("useUnsafeRef_DEPRECATED")))(null);return i.current!==a.drm_info&&(i.current=a.drm_info,u.current=l),u.current}l.default=p}),98);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveCommunityInfo",kind:"LinkedField",name:"community_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"community_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useGraphQLVideoP2PSettings",["CometRelay","FBLogger","GraphQLVideoP2PSettings","useGraphQLVideoP2PSettings_video.graphql","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){var t=null;if(e){var n,a,i,l,s,u,c,d,m,p,_,f={delay_p2p_until_play:(n=(a=e.config)==null?void 0:a.delay_p2p_until_play)!=null?n:!1,disable_hivejava_for_livevc:(i=(l=e.config)==null?void 0:l.disable_hivejava_for_livevc)!=null?i:!1},g=e.ticket,h=e.community_info,y=(s=e.hive_initialization_options)==null?void 0:s.debug_level,C=(u=(c=e.hive_initialization_options)==null?void 0:c.hive_tech_order.map(function(e){var t=o("GraphQLVideoP2PSettings").hiveTechOrderOrNull(e);return t==null&&e!=null&&r("FBLogger")("comet_video_player").mustfix("Invalid hive tech order: '%s'",e),t}).filter(Boolean))!=null?u:[],b=(d=e.hive_initialization_options)==null||(d=d.hive_java)==null?void 0:d.min_version,v=(m=e.hive_initialization_options)!=null&&m.hive_java?{minVersion:b}:null,S=e.hive_initialization_options?{HiveJava:v,debugLevel:y,hiveTechOrder:C}:null,R={communityId:(p=h==null?void 0:h.community_id)!=null?p:"unknowncustomer",communityName:(_=h==null?void 0:h.community_name)!=null?_:"Unknown Customer"};t={community_info:R,config:f,hive_initialization_options:S,ticket:g}}return t}function c(t){var a,i=o("CometRelay").useFragment(e!==void 0?e:e=n("useGraphQLVideoP2PSettings_video.graphql"),t),l=(s||(s=r("useUnsafeRef_DEPRECATED")))(null),c=s(null),d=u((a=i.p2p_settings)!=null?a:null),m=JSON.stringify(d);return l.current!==m&&(l.current=m!=null?m:null,c.current=d!=null?d:null),c.current}l.default=c}),98);
__d("useVideoImplementationsParamsRelayImpl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],t=[{}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementationsParamsRelayImpl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubbingInfo"}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"dubbingInfo"},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_nextgendash_availability",storageKey:null},{alias:"videoDeliveryLegacyFields",args:[{kind:"Literal",name:"negate",value:!0}],concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{alias:"dash_manifest_xml_string",args:e,kind:"ScalarField",name:"playlist",storageKey:'playlist(scrubbing_preference:"MPEG_DASH")'},{alias:"dash_manifest_url",args:e,kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:"browser_native_sd_url",args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"browser_native_hd_url",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'}],storageKey:"if_viewer_should_use_video_delivery_response(negate:true)"},{alias:"videoDeliveryResponseFragment",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{kind:"CatchField",field:{alias:"videoDeliveryResponseResult",args:[{kind:"Literal",name:"video_delivery_request",value:{dash_manifest_requests:t,dash_manifest_url_requests:t,hls_playlist_url_requests:t,progressive_url_requests:[{quality:"SD"},{quality:"HD"}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoPlayerVideoDeliveryResponseRelayFragment_video_delivery_response"}],storageKey:'video_delivery_response(video_delivery_request:{"dash_manifest_requests":[{}],"dash_manifest_url_requests":[{}],"hls_playlist_url_requests":[{}],"progressive_url_requests":[{"quality":"SD"},{"quality":"HD"}]})'},to:"RESULT"}],storageKey:null}],type:"Video",abstractKey:null}})();a.exports=e}),null);
__d("useVideoImplementationsParamsRelayImpl",["CometAudioLanguageUtils","CometRelay","CometVideoPlayerNextgendashAvailability","CometVideoPlayerVideoDeliveryResponseRelayFragment","getJSEnumSafe","react","useVideoImplementationsParamsRelayImpl_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useMemo;function m(t,a){var i,l,s,u,m,p,_,f,g=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoImplementationsParamsRelayImpl_video.graphql"),t),h=(i=a.disableDubbing)!=null?i:!1,y=o("CometAudioLanguageUtils").useUserPreferredLanguage(g==null?void 0:g.dubbingInfo,h);c(function(){var e;!h&&y!=null&&a.wasInitialDubbingConsumptionLoggedRef&&!((e=a.wasInitialDubbingConsumptionLoggedRef)!=null&&e.current)&&(a.wasInitialDubbingConsumptionLoggedRef.current=!0,y.event!=null&&o("CometAudioLanguageUtils").logInitialDubbingConsumption(y.loggingLang,g.id,y.event))},[y,g.id,a.wasInitialDubbingConsumptionLoggedRef,h]);var C=o("CometVideoPlayerVideoDeliveryResponseRelayFragment").useCometVideoPlayerVideoDeliveryResponseResultFromRelay((l=g.videoDeliveryResponseFragment)==null?void 0:l.videoDeliveryResponseResult);return d(function(){var e,t,n,o,i,l,s;return{browserNativeHdUrl:(e=g.videoDeliveryLegacyFields)==null?void 0:e.browser_native_hd_url,browserNativeSdUrl:(t=g.videoDeliveryLegacyFields)==null?void 0:t.browser_native_sd_url,canUseOz:g.can_use_oz,dashManifestUrl:(n=g.videoDeliveryLegacyFields)==null?void 0:n.dash_manifest_url,dashManifestUrlOverride_DO_NOT_USE:a.dashManifestUrlOverride_DO_NOT_USE,dashManifestXmlString:(o=g.videoDeliveryLegacyFields)==null?void 0:o.dash_manifest_xml_string,initialAudioUserPreferredLanguage:y==null?void 0:y.lang,isSpherical:g.is_spherical,minQualityPreference:g.min_quality_preference,minQualityPreferenceOverrideFromProductSurface:a.minQualityPreferenceOverrideFromProductSurface,nextgendashAvailability:(i=r("getJSEnumSafe")(r("CometVideoPlayerNextgendashAvailability"),g.comet_video_player_nextgendash_availability))!=null?i:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",preferBrowserNativeImplementation:a.preferBrowserNativeImplementation,sphericalVideoFallbackHdUrl:(l=g.spherical_video_fallback_urls)==null?void 0:l.hd,sphericalVideoFallbackSdUrl:(s=g.spherical_video_fallback_urls)==null?void 0:s.sd,videoDeliveryResponseResult:C,videoFBID:g.id,videoPlayerShakaConfig:a.videoPlayerShakaConfig}},[y,g.can_use_oz,g.is_spherical,g.min_quality_preference,g.comet_video_player_nextgendash_availability,(s=g.spherical_video_fallback_urls)==null?void 0:s.hd,(u=g.spherical_video_fallback_urls)==null?void 0:u.sd,g.id,(m=g.videoDeliveryLegacyFields)==null?void 0:m.dash_manifest_xml_string,(p=g.videoDeliveryLegacyFields)==null?void 0:p.dash_manifest_url,(_=g.videoDeliveryLegacyFields)==null?void 0:_.browser_native_hd_url,(f=g.videoDeliveryLegacyFields)==null?void 0:f.browser_native_sd_url,C,a.dashManifestUrlOverride_DO_NOT_USE,a.minQualityPreferenceOverrideFromProductSurface,a.preferBrowserNativeImplementation,a.videoPlayerShakaConfig])}l.default=m}),98);
__d("VideoPlayerShakaConfigContextProvider",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.setContext=function(t,n){if(this.$1[t]!==n){var e;this.$1=babelHelpers.extends({},this.$1,(e={},e[t]=n,e))}},t.setAllContexts=function(t){this.$1=t},t.getAllContexts=function(){return this.$1},e})();i.default=e}),66);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(t,n,r,o,a,i,l){var e={},s=(function(){function t(e,t,n){this.$1=new(r("VideoPlayerShakaConfigContextProvider")),this.$2=t||null,this.$3=new(r("VideoPlayerContextSensitiveConfigResolver"))(n),this.$3.setContexts(e||{}),e&&this.$1.setAllContexts(e)}t.setGlobalOverrideConfig=function(n){e=n};var n=t.prototype;return n.setContext=function(t,n){var e=this.$1.getAllContexts();this.$1.setContext(t,n);var r=this.$1.getAllContexts();e!==r&&this.$3.setContexts(r)},n.setOverrideConfig=function(t){this.$2=t},n.getBool=function(t,n){var e=this.$4(t,n);return typeof e=="boolean"?e:n},n.getNumber=function(t,n){var e=this.$4(t,n);return typeof e=="number"?e:n},n.getString=function(t,n){var e=this.$4(t,n);return typeof e=="string"?e:n},n.getAllContexts=function(){return this.$1.getAllContexts()},n.$4=function(n,r){return e&&typeof e[n]==typeof r?e[n]:typeof this.$3.getValue(n)==typeof r?this.$3.getValue(n):this.$2&&typeof this.$2[n]==typeof r?this.$2[n]:null},t})();l.default=s}),98);
__d("prepareVideoPlayerImplementations",["CometVideoPlayerVideoDeliveryResponse","ErrorMetadata","VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerShakaConfig","cr:9524","cr:9734","cr:9735","err","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:9735"))==null?void 0:e.makeNextgendashEngineData;function u(e){var t=e.browserNativeHdUrl,a=e.browserNativeSdUrl,i=e.canUseOz,l=e.dashManifestUrl,u=e.dashManifestUrlOverride_DO_NOT_USE,c=e.dashManifestXmlString,d=e.initialAudioUserPreferredLanguage,m=e.initiateLivePlaybackFromStart,p=e.isBroadcast,_=e.isLiveStreaming,f=e.isSpherical,g=e.minQualityPreference,h=e.minQualityPreferenceOverrideFromProductSurface,y=e.nextgendashAvailability,C=e.preferBrowserNativeImplementation,b=e.sphericalVideoFallbackHdUrl,v=e.sphericalVideoFallbackSdUrl,S=e.videoDeliveryResponseResult,R=e.videoFBID,L=e.videoPlayerShakaConfig,E=[],k=[],I=r("gkx")("8034"),T=null,D=null,x=null,$=null,P=[],N=[],M=[],w=[],A=[];if(S!=null){var F=o("CometVideoPlayerVideoDeliveryResponse").processVideoDeliveryResponseResult(S,I);x=F.browserNativeHdUrl,$=F.browserNativeSdUrl,N=F.dashManifestDeliveryFailures,D=F.dashManifestUrl,M=F.dashManifestUrlDeliveryFailures,T=F.dashManifestXmlString,A=F.hlsDeliveryFailures,w=F.progressiveDeliveryFailures,P=F.videoDeliveryResponseAPIFailures}else T=c!=null?c:null,D=l!=null?l:null,x=t!=null?t:null,$=a!=null?a:null;if(f===!0&&(x=b!=null?b:x,$=v!=null?v:$),C!==!0){if(s&&n("cr:9734")&&P.length===0&&(N.length===0||M.length===0||D!=null||T!=null)){var O=s({canUseOz:i,dashManifestUrl:D,dashManifestUrlOverride_DO_NOT_USE:u,dashManifestXmlString:T,experimentationConfig:new(r("VideoPlayerShakaConfig")),initialAudioUserPreferredLanguage:d,minQualityPreference:g,nextgendashAvailability:y});O instanceof Error?k.push(["VideoPlayerNextgendashImplementation",O]):E.push({Component:n("cr:9734"),data:O,typename:"VideoPlayerNextgendashImplementation"})}if(P.length===0&&(N.length===0||M.length===0||D!=null||T!=null)){var B=o("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:i,dashManifestUrl:D,dashManifestUrlOverride_DO_NOT_USE:u,dashManifestXmlString:T,experimentationConfig:new(r("VideoPlayerOzWWWConfig"))(L!=null?L:new(r("VideoPlayerShakaConfig"))),initialAudioUserPreferredLanguage:d,initiateLivePlaybackFromStart:m,minQualityPreference:g});B instanceof Error?k.push(["VideoPlayerOzImplementation",B]):E.push({Component:n("cr:9524"),data:B,typename:"VideoPlayerOzImplementation"})}}else{var W=r("err")("preferBrowserNativeImplementation="+String(C));W.name="VideoImplementationsPreferBrowserNative",s&&n("cr:9734")&&k.push(["VideoPlayerNextgendashImplementation",W]),k.push(["VideoPlayerOzImplementation",W])}if(P.length===0&&(w.length===0||x!=null||$!=null)){var q=h!=null?h:g,U=o("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:x,hdSrcPreferred:r("gkx")("24369")||q==="HD"||q==="UHD",sdSrc:$});U instanceof Error?k.push(["VideoPlayerProgressiveImplementation",U]):E.push({Component:r("VideoPlayerProgressiveImplementationV2.react"),data:U,typename:"VideoPlayerProgressiveImplementation"})}var V=E.length===0,H=[];H.push.apply(H,P),H.push.apply(H,N),H.push.apply(H,M),H.push.apply(H,w),H.push.apply(H,A),H.push.apply(H,k.map(function(e){var t,n,o=e[0],a=e[1],i=r("getErrorSafe")(a),l=o.replace(/^VideoPlayer/,"").replace(/(Implementation)|(Engine)$/,"")+"Engine",s=r("err").apply(void 0,["Cannot use "+l+" / "+((t=i.messageFormat)!=null?t:i.message)].concat(i.messageFormat!=null?(n=i.messageParams)!=null?n:[]:[]));return s.name="VideoPlayerCannotUse"+l+"/"+i.name,s}));var G=null;if(V||r("gkx")("24370")&&H.length>0){for(var z,j=new Map,K=0;K<H.length;++K){var Q,X=H[K],Y=X.name+": "+((Q=X.messageFormat)!=null?Q:X.message);j.has(Y)||j.set(Y,X)}for(var J=Array.from(j.values()),Z=[],ee=[],te=[],ne=0;ne<J.length;++ne){var re,oe=J[ne];Z.push(oe.name),ee.push((re=oe.messageFormat)!=null?re:oe.message),oe.messageFormat!=null&&oe.messageParams!=null&&te.push.apply(te,oe.messageParams)}G=r("err").apply(void 0,[(V?f===!0?"Cannot play 360 video: ":"Cannot play video: ":f===!0?"Warning for 360 video: ":"Warning: ")+ee.join(" ++ ")].concat(te)),G.name=Z.join("++"),G.type=V?"fatal":"warn",G.project="comet_video_player";var ae=(z=G.metadata)!=null?z:new(r("ErrorMetadata"));if(G.metadata=ae,R!=null&&ae.addEntry("COMET_VIDEO","VIDEO_ID",String(R)),ae.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({isBroadcast:p,isLiveStreaming:_,isSpherical:f})),V)throw G}return{implementations:E,warning:G}}l.default=u}),98);
__d("useVideoPlayerImplementations",["FBLogger","gkx","prepareVideoPlayerImplementations","react","react-compiler-runtime","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){if(e){var t,n,o,a=(t=e.messageFormat)!=null?t:e.message,i=e.messageFormat!=null?(n=e.messageParams)!=null?n:[]:[];(o=r("FBLogger")("comet_video_player").catching(e)).warn.apply(o,[a].concat(i))}},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),u(n,a)}var m=r("gkx")("24370")?d:r("useEmptyFunction");function p(e){var t=o("react-compiler-runtime").c(2),n,a;t[0]!==e?(a=r("prepareVideoPlayerImplementations")(e),t[0]=e,t[1]=a):a=t[1],n=a;var i=n;return m(i.warning),i}l.default=p}),98);
__d("useVideoImplementationsRelayImpl",["react","react-compiler-runtime","useVideoImplementationsParamsRelayImpl","useVideoPlayerImplementations"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useDebugValue;function u(e,t){var n=o("react-compiler-runtime").c(4),a=r("useVideoImplementationsParamsRelayImpl")(e,t),i=r("useVideoPlayerImplementations")(a),l=i.implementations,u=i.warning,c;return n[0]!==l||n[1]!==a||n[2]!==u?(c={implementations:l,params:a,warning:u},n[0]=l,n[1]=a,n[2]=u,n[3]=c):c=n[3],s(c),l}l.default=u}),98);
__d("useVideoImplementationsRelay",["useVideoImplementationsRelayImpl"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("useVideoImplementationsRelayImpl")}),98);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","react","react-compiler-runtime","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var r=o("react-compiler-runtime").c(3),a=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),t),i,l;return r[0]!==a.audio_availability||r[1]!==a.muted_segments?(l=o("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:a.audio_availability,mutedSegmentsUnsanitized:a.muted_segments==null?[]:a.muted_segments.map(d)}),r[0]=a.audio_availability,r[1]=a.muted_segments,r[2]=l):l=r[2],i=l,i}function d(e){return{muteEndTimeInSec:e.mute_end_time_in_sec,muteStartTimeInSec:e.mute_start_time_in_sec}}l.default=c}),98);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubbingInfo"}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"dubbingInfo"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometAudioLanguageUtils","CometRelay","react","useVideoPlayerAudioSettings_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useMemo,m=1,p=.5,_=new Map([["default",m],["quiet",p]]);function f(t,a,i){var l,s,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerAudioSettings_video.graphql"),t),p=(l=u.audio_settings)==null?void 0:l.video_volume_setting,f="DEFAULT";switch(p){case"DEFAULT":case"QUIET":f=p;break;default:break}var g=r("AudioSettingsVolumeSetting")[f],h=(s=_.get(g))!=null?s:m,y=o("CometAudioLanguageUtils").useUserPreferredLanguage(u==null?void 0:u.dubbingInfo,i);return c(function(){!i&&y!=null&&a&&!(a!=null&&a.current)&&(a.current=!0,y.event!=null&&o("CometAudioLanguageUtils").logInitialDubbingConsumption(y.loggingLang,u.id,y.event))},[i,y,u.id,a]),d(function(){return{audioUserPreferredLanguage:y.lang,preferredVolumeSetting:h}},[h,y])}l.default=f}),98);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_opacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_size",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerCaptionsSettings",["CometRelay","react-compiler-runtime","useVideoPlayerCaptionsSettings_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s="DEFAULT",u="BLACK",c="WHITE",d="DEFAULT";function m(t){var r,a,i,l,m,p,_,f,g,h,y=o("react-compiler-runtime").c(8),C=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerCaptionsSettings_video.graphql"),t),b=(r=(a=C.captions_settings)==null?void 0:a.always_show_captions)!=null?r:!1,v=(i=(l=C.captions_settings)==null?void 0:l.captions_background_color)!=null?i:u,S=(m=(p=C.captions_settings)==null?void 0:p.captions_background_opacity)!=null?m:s,R=(_=(f=C.captions_settings)==null?void 0:f.captions_text_color)!=null?_:c,L=(g=(h=C.captions_settings)==null?void 0:h.captions_text_size)!=null?g:d,E;y[0]!==v||y[1]!==S||y[2]!==R||y[3]!==L?(E={captionsBackgroundColor:v,captionsBackgroundOpacity:S,captionsTextColor:R,captionsTextSize:L},y[0]=v,y[1]=S,y[2]=R,y[3]=L,y[4]=E):E=y[4];var k;return y[5]!==b||y[6]!==E?(k={alwaysShowCaptions:b,captionDisplayStyle:E},y[5]=b,y[6]=E,y[7]=k):k=y[7],k}l.default=m}),98);
__d("useVideoPlayerIMFFromVideoMetadata",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useDebugValue,c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(5),n=e.isVideoBroadcast,r=e.specInlineJson,a=n===!0,i,l;t[0]!==a||t[1]!==r?(l={imfExpectedFromEmsg:a,specInlineJson:r},t[0]=a,t[1]=r,t[2]=l):l=t[2],i=l;var s=i,c;return t[3]!==s?(c={useVideoPlayerIMFFromVideoMetadata:s},t[3]=s,t[4]=c):c=t[4],u(c),s}l.default=d}),98);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,concreteType:"VideoIMFData",kind:"LinkedField",name:"video_imf_data",plural:!1,selections:[{args:null,documentName:"useVideoPlayerIMFFromVideoMetadataRelay_video",fragmentName:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",fragmentPropName:"video_imf_data",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"spec_inline_json",storageKey:null}],type:"VideoIMFData",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay",["CometRelay","react-compiler-runtime","useVideoPlayerIMFFromVideoMetadata","useVideoPlayerIMFFromVideoMetadataRelay_video.graphql","useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=o("react-compiler-runtime").c(4),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql"),t),l=o("CometRelay").useFragment(s!==void 0?s:s=n("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"),i.video_imf_data),u=l==null?void 0:l.spec_inline_json,c;return a[0]!==u||a[1]!==i.id||a[2]!==i.is_video_broadcast?(c={isVideoBroadcast:i.is_video_broadcast,specInlineJson:u,videoID:i.id},a[0]=u,a[1]=i.id,a[2]=i.is_video_broadcast,a[3]=c):c=a[3],r("useVideoPlayerIMFFromVideoMetadata")(c)}l.default=u}),98);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","react-compiler-runtime","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r,a,i,l,s=o("react-compiler-runtime").c(3),u=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),t),c=(r=(a=u.broadcast_low_latency_config)==null?void 0:a.ll_desired_latency_ms)!=null?r:0,d=(i=(l=u.broadcast_low_latency_config)==null?void 0:l.ll_latency_tolerance_ms)!=null?i:0,m;return s[0]!==c||s[1]!==d?(m={desiredLatencyMs:c,latencyToleranceMs:d},s[0]=c,s[1]=d,s[2]=m):m=s[2],m}l.default=s}),98);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerShakaConfig",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useState;function m(t,a){var i,l=o("react-compiler-runtime").c(17),s=a.adClientToken,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerShakaConfig_video.graphql"),t),m=s!=null,_=u.is_spherical===!0,f=u.is_gaming_video===!0,g=r("useSelectedLatencySetting")((i=u.id)!=null?i:"null",u.selected_latency_setting),h=g[0],y;l[0]!==m||l[1]!==f||l[2]!==_||l[3]!==h||l[4]!==u.fbls_tier||l[5]!==u.is_latency_menu_enabled||l[6]!==u.is_latency_sensitive_broadcast||l[7]!==u.is_live_streaming?(y=function(){var e;return new(r("VideoPlayerShakaConfig"))({connection_quality:o("VideoPlayerConnectionQuality").evaluate(p),content_category:f?"gaming":"general",fbls_tier:(e=u.fbls_tier)!=null&&e.startsWith("user")?"user":"general",is_ad:m,is_latency_sensitive_broadcast:u.is_latency_sensitive_broadcast===!0,is_live:u.is_live_streaming===!0,is_spherical:_,latency_level:u.is_latency_menu_enabled===!0?h:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})},l[0]=m,l[1]=f,l[2]=_,l[3]=h,l[4]=u.fbls_tier,l[5]=u.is_latency_menu_enabled,l[6]=u.is_latency_sensitive_broadcast,l[7]=u.is_live_streaming,l[8]=y):y=l[8];var C=d(y),b=C[0],v,S;l[9]!==m||l[10]!==b?(v=function(){b.setContext("is_ad",m)},S=[b,m],l[9]=m,l[10]=b,l[11]=v,l[12]=S):(v=l[11],S=l[12]),c(v,S);var R,L;return l[13]!==_||l[14]!==b?(R=function(){b.setContext("is_spherical",_)},L=[b,_],l[13]=_,l[14]=b,l[15]=R,l[16]=L):(R=l[15],L=l[16]),c(R,L),b}function p(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))}l.default=m}),98);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_video",selections:[{alias:"video_player_shaka_performance_logger_init2",args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerBuilder_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerBuilder_init",fragmentPropName:"init",kind:"ModuleImport"},{alias:null,args:null,kind:"ScalarField",name:"per_session_sampling_rate",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql","useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s;e!==void 0||(e=n("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql"));function u(e){var t=o("react-compiler-runtime").c(2),r=o("CometRelay").useFragment(s!==void 0?s:s=n("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"),e),a;if(t[0]!==r.video_player_shaka_performance_logger_init2){a=Symbol.for("react.early_return_sentinel");e:{var i,l=r.video_player_shaka_performance_logger_init2?o("CometRelay").ModuleResource.read(r.video_player_shaka_performance_logger_init2):null,u=(i=r.video_player_shaka_performance_logger_init2)==null?void 0:i.per_session_sampling_rate;if(l!=null&&u!=null){a=new l({perSessionSampleRate:u});break e}}t[0]=r.video_player_shaka_performance_logger_init2,t[1]=a}else a=t[1];return a!==Symbol.for("react.early_return_sentinel")?a:null}l.default=u}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql","useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s;e!==void 0||(e=n("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql"));function u(e){var t=o("react-compiler-runtime").c(3),r=o("CometRelay").useFragment(s!==void 0?s:s=n("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"),e),a;return t[0]!==r.video_player_shaka_performance_logger_init||t[1]!==r.video_player_shaka_performance_logger_should_sample?(a=r.video_player_shaka_performance_logger_init?o("CometRelay").ModuleResource.read(r.video_player_shaka_performance_logger_init):null,a!=null&&r.video_player_shaka_performance_logger_should_sample===!0&&a.forceShouldSample(),t[0]=r.video_player_shaka_performance_logger_init,t[1]=r.video_player_shaka_performance_logger_should_sample,t[2]=a):a=t[2],a}l.default=u}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["useVideoPlayerShakaPerformanceLoggerRelayImpl"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("useVideoPlayerShakaPerformanceLoggerRelayImpl")}),98);
__d("VideoStatusType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ENCODING:1,DELETED:2,ENCODED:3,UPLOADING:5,OK:6,TOO_LONG:7,ENCODE_FAILED:8,UNPUBLISHED:9,SOFT_DELETED:10,UNDISCOVERABLE:11,UPLOAD_FAILED:13,UPLOADED:14,ORIGINAL_VIDEO_DELETED:15});i.default=e}),66);
__d("evaluateVideoPlayerVideoStatusFallbackCover",["fbt","ErrorMetadata","VideoPlayerFallbackCover.react","VideoStatusType","err","getGraphQLEnumSafe","gkx","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=e.disableVideoStatusFallbackIf,n=e.overrideGkForVideoStatusFallback_EXPERIMENTAL,o=e.videoFBID,a=e.videoStatusTypeFromGraphQL,i=d({videoFBID:o,videoStatusTypeFromGraphQL:a}),l=null,c=null;if(n==null&&!r("gkx")("24384"))l=null,c="disabled_by_gk";else if(n===!1)l=null,c="disabled_by_gk_override";else if((t==null?void 0:t(i))===!0){var m;l=null,c="disable_if:"+i.videoAvailabilityStatus+":"+((m=i.videoStatusTypeFromGraphQL)!=null?m:"null")}else{switch(i.videoAvailabilityStatus){case"unknown":l=null;break;case"ok":l=null;break;case"undiscoverable":l=null;break;case"unpublished":l=null;break;case"processing":{var p=r("gkx")("24385");l=u.jsx(r("VideoPlayerFallbackCover.react"),{debugError:p?i.debugError:null,message:s._(/*BTDS*/"This video is being processed..."),showDebugWithoutError:p,showLearnMoreLink:!1});break}case"processing_failed":l=u.jsx(r("VideoPlayerFallbackCover.react"),{debugError:i.debugError,message:s._(/*BTDS*/"Processing of this video failed.")});break;case"deleted":l=u.jsx(r("VideoPlayerFallbackCover.react"),{debugError:i.debugError,message:s._(/*BTDS*/"This video isn't available right now.")});break;default:i.videoAvailabilityStatus}c=(l==null?"not_needed_for_status:":"fallback_for_status:")+i.videoAvailabilityStatus+":"+String(i.videoStatusTypeFromGraphQL)}return{fallback:l,fallbackDebug:c,videoStatus:i}}function d(e){var t=e.videoFBID,n=e.videoStatusTypeFromGraphQL,o=[r("getGraphQLEnumSafe")(r("VideoStatusType"),6)].includes(n)?"ok":[r("getGraphQLEnumSafe")(r("VideoStatusType"),9)].includes(n)?"unpublished":[r("getGraphQLEnumSafe")(r("VideoStatusType"),11)].includes(n)?"undiscoverable":[r("getGraphQLEnumSafe")(r("VideoStatusType"),5),r("getGraphQLEnumSafe")(r("VideoStatusType"),14),r("getGraphQLEnumSafe")(r("VideoStatusType"),1),r("getGraphQLEnumSafe")(r("VideoStatusType"),3)].includes(n)?"processing":[r("getGraphQLEnumSafe")(r("VideoStatusType"),13),r("getGraphQLEnumSafe")(r("VideoStatusType"),8),r("getGraphQLEnumSafe")(r("VideoStatusType"),7)].includes(n)?"processing_failed":[r("getGraphQLEnumSafe")(r("VideoStatusType"),10),r("getGraphQLEnumSafe")(r("VideoStatusType"),2)].includes(n)?"deleted":"unknown",a=o==="ok"||o==="unpublished"||o==="undiscoverable"||o==="processing_failed"||o==="deleted"||o==="unknown",i=null;if(o!=="ok"){var l;i=r("err")("Video is now %s due to video_status_type=%s",o,n);var s=(l=i.metadata)!=null?l:new(r("ErrorMetadata"));s.addEntry("COMET_VIDEO","VIDEO_ID",t!=null?t:""),i.metadata=s,i.name="VideoPlayerVideoStatusInfo"}var u={debugError:i,isTerminalStatus:a,videoAvailabilityStatus:o,videoStatusTypeFromGraphQL:n};return u}l.default=c}),226);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover",["CometRelay","evaluateVideoPlayerVideoStatusFallbackCover","react","react-compiler-runtime","useInterval","useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useDebugValue;function c(t,a,i,l){var s=o("react-compiler-runtime").c(5),c=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"),t),d;s[0]!==i||s[1]!==l||s[2]!==c.id||s[3]!==c.video_status_type?(d=r("evaluateVideoPlayerVideoStatusFallbackCover")({disableVideoStatusFallbackIf:i,overrideGkForVideoStatusFallback_EXPERIMENTAL:l,videoFBID:c.id,videoStatusTypeFromGraphQL:c.video_status_type}),s[0]=i,s[1]=l,s[2]=c.id,s[3]=c.video_status_type,s[4]=d):d=s[4];var m=d;return r("useInterval")(a,m.videoStatus.isTerminalStatus||m.fallback==null?0:1e4),u(m),m}l.default=c}),98);
__d("VideoPlayerRelay.react",["CastingStateHooks","CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","ErrorMetadata","FBLogger","FBUnifiedVideoGating","InstreamVideoAdBreaksPlayer.react","JSResourceForInteraction","VideoPlayerErrorBoundary.react","VideoPlayerRelay_video.graphql","VideoPlayerUnsupportedBrowserMessageFallback.react","VideoPlayerXImplRelayWrapper.react","XFBLatencySensitiveTypeUtils.facebook","computeAspectRatio","cr:759","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","hero-tracing-placeholder","isStringNullOrEmpty","lazyLoadComponent","normalizeVideoPlayerLoopCount","react","react-compiler-runtime","requireDeferredForDisplay","useEmptyFunction","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useVideoImplementationsRelay","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerAvailableCaptionsLocalesFromRelay","useVideoPlayerCaptionsSettings","useVideoPlayerIMFFromVideoMetadataRelay","useVideoPlayerLiveLatencyKnobSettings","useVideoPlayerShakaConfig","useVideoPlayerShakaPerformanceLoggerBuilder","useVideoPlayerShakaPerformanceLoggerRelay","useVideoPlayerVideoStatusRelayWithFallbackCover"],(function(t,n,r,o,a,i,l){"use strict";var e=["video"],s=["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"],u,c,d,m=d||(d=o("react")),p=d,_=p.useCallback,f=p.useEffect,g=p.useRef,h=p.useTransition,y=(c=n("cr:759"))!=null?c:r("useEmptyFunction"),C=r("gkx")("24325"),b=r("gkx")("24326"),v=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react").__setRef("VideoPlayerRelay.react")),S=r("lazyLoadComponent")(r("JSResourceForInteraction")("VideoPlayerVideoIsCastingCover.react").__setRef("VideoPlayerRelay.react"));function R(t){var a=o("react-compiler-runtime").c(13),i,l;a[0]!==t?(l=t.video,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=o("CometRelay").useRefetchableFragment(u!==void 0?u:u=n("VideoPlayerRelay_video.graphql"),l),c=s[0],d=s[1],p=h(),_=p[1],y;a[3]!==d?(y=function(){_(function(){d({},{fetchPolicy:"network-only"})})},a[3]=d,a[4]=y):y=a[4];var C=y,b=r("useVideoPlayerVideoStatusRelayWithFallbackCover")(c,C,i.disableVideoStatusFallbackIf,i.overrideGkForVideoStatusFallback_EXPERIMENTAL),v=b.fallback,S=b.fallbackDebug,R=b.videoStatus,E=g(null),k;if(a[5]!==S||a[6]!==c||a[7]!==R||a[8]!==v?(k=function(){var e=R,t=E.current;if(v!=null&&(e.videoAvailabilityStatus!==(t==null?void 0:t.videoAvailabilityStatus)||e.videoStatusTypeFromGraphQL!==(t==null?void 0:t.videoStatusTypeFromGraphQL))){var n;E.current=R,r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",(n=c.id)!=null?n:"").warn("VideoPlayerRelay rendered the video status fallback: %s",S)}},a[5]=S,a[6]=c,a[7]=R,a[8]=v,a[9]=k):k=a[9],f(k,void 0),v!=null)return v;var I;return a[10]!==i||a[11]!==c?(I=m.jsx(L,babelHelpers.extends({},i,{video:c})),a[10]=i,a[11]=c,a[12]=I):I=a[12],I}function L(e){var t,n,a,l,s=o("react-compiler-runtime").c(108),u=e.accessToken,c=e.adClientToken,d=e.apiRef,p=e.audioOnly,_=e.autoplayGatingResult,f=e.bufferEndLimit,h=e.bypassUseCometSizeError,R=e.canAutoplay,L=e.children,k=e.disableDubbing,I=e.disableLoadingIndicator,T=e.externalLogID,D=e.externalLogType,x=e.forceProgressive_EXPERIMENTAL,$=e.graphQLVideoDRMInfo,P=e.initialForceHD,N=e.initialTracePolicy,M=e.isVOD,w=e.loadSequence,A=e.loggingConfig,F=e.loggingToSNAPLAdditionalData,O=e.loggingToVPLAdditionalData,B=e.loopCount,W=e.manifestURL_DO_NOT_USE,q=e.playerFormat,U=e.playerOriginOverride,V=e.portalingEnabled,H=e.portalingFromVideoID,G=e.portalingPlaceMetaData,z=e.portalingRenderPlaceholder,j=e.poster,K=e.productAttribution,Q=e.renderVideoPixelsFit,X=e.seoWebCrawlerLookasideUrl,Y=e.seoWebCrawlerVideoTracks,J=e.source_VPL_LOGGING_HACK,Z=e.startTimestamp,ee=e.subOrigin,te=e.video,ne=e.volumeSetting,re=e.wrapVideoPixels_EXPERIMENTAL,oe=k===void 0?!1:k,ae=I===void 0?!1:I,ie=x===void 0?!1:x,le=P===void 0?!1:P,se=M===void 0?!1:M,ue=q===void 0?"inline":q,ce=te.id;if(ce==null||ce===""){var de=r("err")("Cannot play video: Invalid video ID: %s",ce===""?"an empty string":String(ce));throw de.name="VideoPlayerInvalidVideoID",de.project="comet_video_player",de}var me=te.dash_prefetch_experimental,pe=r("useVideoPlayerAvailableCaptionsLocalesFromRelay")(te),_e=(pe==null?void 0:pe.find(E))!=null,fe;if(s[0]!==((t=te.latency_sensitive_config)==null?void 0:t.broadcast_latency_sensitivity)){var ge,he;fe=o("XFBLatencySensitiveTypeUtils.facebook").toJSEnum((ge=te.latency_sensitive_config)==null?void 0:ge.broadcast_latency_sensitivity),s[0]=(he=te.latency_sensitive_config)==null?void 0:he.broadcast_latency_sensitivity,s[1]=fe}else fe=s[1];var ye=fe,Ce;s[2]!==c?(Ce={adClientToken:c},s[2]=c,s[3]=Ce):Ce=s[3];var be=r("useVideoPlayerShakaConfig")(te,Ce),ve=y(ce),Se=r("useGraphQLVideoP2PSettings")(te),Re=r("useGraphQLVideoDRMInfo")(te);Re=$!=null?$:Re;var Le=!!(Re&&Re.fairplayCert!==null),Ee=ie===!0||Le||C&&!!te.is_live_streaming||b&&typeof MediaSource=="undefined",ke=g(!1),Ie=oe!=null?oe:!1,Te=le?"HD":null,De;s[4]!==W||s[5]!==Ee||s[6]!==Te||s[7]!==Ie||s[8]!==be?(De={dashManifestUrlOverride_DO_NOT_USE:W,disableDubbing:Ie,minQualityPreferenceOverrideFromProductSurface:Te,preferBrowserNativeImplementation:Ee,videoPlayerShakaConfig:be,wasInitialDubbingConsumptionLoggedRef:ke},s[4]=W,s[5]=Ee,s[6]=Te,s[7]=Ie,s[8]=be,s[9]=De):De=s[9];var xe=r("useVideoImplementationsRelay")(te,De),$e=r("useVideoPlayerCaptionsSettings")(te),Pe=r("useVideoPlayerAudioSettings")(te,ke,oe!=null?oe:!1),Ne=r("useVideoPlayerLiveLatencyKnobSettings")(te),Me=Ne.desiredLatencyMs,we=Ne.latencyToleranceMs,Ae=r("useVideoPlayerAudioAvailabilityInfoRelay")(te),Fe=r("useGraphQLVideoAutoplayGatingResult")(te),Oe;s[10]!==_||s[11]!==R||s[12]!==Fe?(Oe=r("getVideoPlayerAutoplayProps")(Fe,R,_),s[10]=_,s[11]=R,s[12]=Fe,s[13]=Oe):Oe=s[13];var Be=Oe,We=r("useVideoPlayerShakaPerformanceLoggerRelay")(te),qe=r("useVideoPlayerShakaPerformanceLoggerBuilder")(te),Ue=r("useVideoPlayerIMFFromVideoMetadataRelay")(te),Ve=r("gkx")("5522"),He;s[14]!==ue||s[15]!==ee||s[16]!==te?(He=m.jsx(o("hero-tracing-placeholder").HeroInteractionContextPassthrough,{clear:Ve,children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:m.jsx(r("InstreamVideoAdBreaksPlayer.react"),{playerFormat:ue,subOrigin:ee,video:te})})}),s[14]=ue,s[15]=ee,s[16]=te,s[17]=He):He=s[17];var Ge=He,ze=o("CastingStateHooks").useCastingVideoID(),je=o("VideoPlayerUnsupportedBrowserMessageFallback.react").useVideoPlayerUnsupportedBrowserMessageFallback(te.unsupported_browser_message,ce);if(je!=null)return je;var Ke=te.permalink_url,Qe=te.spherical_video_renderer,Xe;s[18]!==ue||s[19]!==Qe||s[20]!==ee||s[21]!==Ke?(Xe=Qe?m.jsx(o("CometRelay").MatchContainer,{match:Qe,props:{playerFormat:ue,sphericalVideoRenderer:Qe,subOrigin:ee,videoTahoeUrl:Ke}}):null,s[18]=ue,s[19]=Qe,s[20]=ee,s[21]=Ke,s[22]=Xe):Xe=s[22];var Ye=Xe,Je=te.is_spherical,Ze=te.is_spherical_enabled,et=te.permalink_url;if(Je===!0&&Ze!==!0){if(et==null||et===""){var tt,nt=r("err")("Cannot play video: Empty permalink URL for a spherical video");nt.name="VideoPlayerSphericalEmptyPermalinkURL",nt.project="comet_video_player";var rt=(tt=nt.metadata)!=null?tt:new(r("ErrorMetadata"));throw rt.addEntry("COMET_VIDEO","VIDEO_ID",ce),nt.metadata=rt,nt}var ot;return s[23]!==et?(ot=m.jsx(v,{videoTahoeUrl:et}),s[23]=et,s[24]=ot):ot=s[24],ot}if(ze!=null&&ze===ce){var at;return s[25]!==te?(at=m.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:m.jsx(S,{video:te})}),s[25]=te,s[26]=at):at=s[26],at}var it=(n=(a=te.live_playback_instrumentation_configs)==null?void 0:a.is_client_triggered_trace_enabled)!=null?n:!1,lt=!r("isStringNullOrEmpty")(c),st;s[27]!==B||s[28]!==te.is_looping||s[29]!==te.loop_count?(st=r("normalizeVideoPlayerLoopCount")(B,te.is_looping,te.loop_count),s[27]=B,s[28]=te.is_looping,s[29]=te.loop_count,s[30]=st):st=s[30];var ut=st,ct;s[31]!==lt||s[32]!==se||s[33]!==ut?(ct=!lt&&se&&ut===0&&o("FBUnifiedVideoGating").shouldDisableChainingForVOD()?-1:ut,s[31]=lt,s[32]=se,s[33]=ut,s[34]=ct):ct=s[34];var dt=ct,mt;s[35]!==te.height||s[36]!==te.width?(mt=r("computeAspectRatio")(te.width,te.height),s[35]=te.height,s[36]=te.width,s[37]=mt):mt=s[37];var pt=mt,_t=r("gkx")("23009")?te.animated_image_caption:void 0,ft=te.is_podcast_video===!0||p,gt=te.pmv_metadata!=null,ht=Je===!0,yt=X!=null?X:te.seo_web_crawler_lookaside_url,Ct=((l=pe==null?void 0:pe.length)!=null?l:0)>0,bt=ne!==void 0?ne:Pe.preferredVolumeSetting,vt;return s[38]!==We||s[39]!==u||s[40]!==c||s[41]!==d||s[42]!==_e||s[43]!==Ae||s[44]!==Pe.audioUserPreferredLanguage||s[45]!==ye||s[46]!==f||s[47]!==h||s[48]!==$e.alwaysShowCaptions||s[49]!==$e.captionDisplayStyle||s[50]!==L||s[51]!==Me||s[52]!==oe||s[53]!==ae||s[54]!==ve||s[55]!==T||s[56]!==D||s[57]!==Re||s[58]!==Se||s[59]!==xe||s[60]!==me||s[61]!==N||s[62]!==Ge||s[63]!==it||s[64]!==we||s[65]!==w||s[66]!==A||s[67]!==F||s[68]!==O||s[69]!==dt||s[70]!==ue||s[71]!==U||s[72]!==V||s[73]!==H||s[74]!==G||s[75]!==z||s[76]!==j||s[77]!==K||s[78]!==Q||s[79]!==Y||s[80]!==J||s[81]!==Z||s[82]!==ee||s[83]!==_t||s[84]!==ft||s[85]!==gt||s[86]!==ht||s[87]!==yt||s[88]!==Ct||s[89]!==bt||s[90]!==te.broadcast_id||s[91]!==te.broadcast_status||s[92]!==te.broadcaster_origin||s[93]!==te.captions_url||s[94]!==te.is_live_streaming||s[95]!==te.is_live_trace_enabled||s[96]!==te.is_ncsr||s[97]!==te.is_video_broadcast||s[98]!==ce||s[99]!==pt||s[100]!==Be.autoplayGatingResult||s[101]!==Be.autoplaySetting||s[102]!==Be.canAutoplay||s[103]!==Ue||s[104]!==qe||s[105]!==Ye||s[106]!==re?(vt=m.jsx(r("VideoPlayerXImplRelayWrapper.react"),{VideoPlayerShakaPerformanceLoggerClass:We,accessToken:u,adClientToken:c,alt:_t,alwaysShowCaptions:$e.alwaysShowCaptions,apiRef:d,areCaptionsAutogenerated:_e,audioAvailabilityInfo:Ae,audioOnly:ft,autoplayGatingResult:Be.autoplayGatingResult,autoplaySetting:Be.autoplaySetting,broadcastId:te.broadcast_id,broadcastLatencySensitivity:ye,broadcastStatus:te.broadcast_status,broadcasterOrigin:te.broadcaster_origin,bufferEndLimit:f,bypassUseCometSizeError:h,canAutoplay:Be.canAutoplay,captionDisplayStyle:$e.captionDisplayStyle,children:L,desiredLatencyMs:Me,disableDubbing:oe,disableLoadingIndicator:ae,expiredVideoUrlRefreshHandler:ve,externalLogID:T,externalLogType:D,graphQLVideoDRMInfo:Re,graphQLVideoP2PSettings:Se,implementations:xe,initialRepresentationIds:me,initialTracePolicy:N,instreamVideoAdBreaksPlayer:Ge,isClientTriggeredTraceEnabled:it,isLiveStreaming:te.is_live_streaming,isLiveTraceEnabled:te.is_live_trace_enabled,isNCSR:te.is_ncsr,isPremiumMusicVideo:gt,isSpherical:ht,isVideoBroadcast:te.is_video_broadcast,latencyToleranceMs:we,loadSequence:w,loggingConfig:A,loggingToSNAPLAdditionalData:F,loggingToVPLAdditionalData:O,loopCount:dt,playerFormat:ue,playerOriginOverride:U,portalingEnabled:V,portalingFromVideoID:H,portalingPlaceMetaData:G,portalingRenderPlaceholder:z,poster:j,productAttribution:K,renderVideoPixelsFit:Q,seoWebCrawlerLookasideUrl:yt,seoWebCrawlerVideoTracks:Y,sideLoadCaptionsExpected:Ct,sideLoadCaptionsUrl:te.captions_url,source_VPL_LOGGING_HACK:J,startTimestamp:Z,subOrigin:ee,userPreferenceLang:Pe.audioUserPreferredLanguage,videoFBID:ce,videoPixelsAspectRatio:pt,videoPlayerIMFFromVideoMetadata:Ue,videoPlayerShakaPerformanceLoggerBuilder:qe,videoPlayerSpherical:Ye,volumeSetting:bt,wrapVideoPixels_EXPERIMENTAL:re},ce),s[38]=We,s[39]=u,s[40]=c,s[41]=d,s[42]=_e,s[43]=Ae,s[44]=Pe.audioUserPreferredLanguage,s[45]=ye,s[46]=f,s[47]=h,s[48]=$e.alwaysShowCaptions,s[49]=$e.captionDisplayStyle,s[50]=L,s[51]=Me,s[52]=oe,s[53]=ae,s[54]=ve,s[55]=T,s[56]=D,s[57]=Re,s[58]=Se,s[59]=xe,s[60]=me,s[61]=N,s[62]=Ge,s[63]=it,s[64]=we,s[65]=w,s[66]=A,s[67]=F,s[68]=O,s[69]=dt,s[70]=ue,s[71]=U,s[72]=V,s[73]=H,s[74]=G,s[75]=z,s[76]=j,s[77]=K,s[78]=Q,s[79]=Y,s[80]=J,s[81]=Z,s[82]=ee,s[83]=_t,s[84]=ft,s[85]=gt,s[86]=ht,s[87]=yt,s[88]=Ct,s[89]=bt,s[90]=te.broadcast_id,s[91]=te.broadcast_status,s[92]=te.broadcaster_origin,s[93]=te.captions_url,s[94]=te.is_live_streaming,s[95]=te.is_live_trace_enabled,s[96]=te.is_ncsr,s[97]=te.is_video_broadcast,s[98]=ce,s[99]=pt,s[100]=Be.autoplayGatingResult,s[101]=Be.autoplaySetting,s[102]=Be.canAutoplay,s[103]=Ue,s[104]=qe,s[105]=Ye,s[106]=re,s[107]=vt):vt=s[107],vt}function E(e){return e.localizedCreationMethod!=null}function k(e){var t=o("react-compiler-runtime").c(9),n,a,i;t[0]!==e?(i=e.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn,n=e.errorBoundaryFallback,a=babelHelpers.objectWithoutPropertiesLoose(e,s),t[0]=e,t[1]=n,t[2]=a,t[3]=i):(n=t[1],a=t[2],i=t[3]);var l=i===void 0?!1:i,u;t[4]!==a?(u=m.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:13,children:m.jsx(R,babelHelpers.extends({},a))}),t[4]=a,t[5]=u):u=t[5];var c=u;if(l)return c;var d=n!=null?n:r("defaultErrorBoundaryFallback"),p;return t[6]!==c||t[7]!==d?(p=m.jsx(r("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:d,children:c}),t[6]=c,t[7]=d,t[8]=p):p=t[8],p}l.default=k}),98);/*FB_PKG_DELIM*/
/**
 *
 * This file is generated from fbsource. Please do not modify it directly.
 *
 *
 * @nolint
 * @generated
 * @nopackage
 * @fullSyntaxTransform
 * @preserve-whitespace
 */__d("ls_voprf_utils_v2",["Promise"],(function $module_ls_voprf_utils_v2(global,require,requireDynamic,requireLazy,module,exports){var _require_closure_Promise;


var Module=function(){
var _scriptDir=typeof document!=='undefined'&&document.currentScript?document.currentScript.src:undefined;

return(
function(moduleArg){if(moduleArg===void 0){moduleArg={};}

var Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module["ready"]=new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject;});["_main","getExceptionMessage","___get_exception_message","_free","_memory","_curve_create","_curve_free","_curve_init_ristretto","_get_curve_element_bytes","_get_curve_scalar_bytes","_kdf_create","_kdf_free","_kdf_init_naor_reingold","_sodiumInit","_voprf_create","_voprf_free","_voprf_init_exp_twohashdh","_blind","_verifiable_unblind","_voprf_client_finalize","_voprf_setup","_voprf_evaluate","_voprf_server_finalize","_get_voprf_final_evaluation_bytes","___indirect_function_table","__embind_initialize_bindings","_fflush","___start_em_asm","___stop_em_asm","onRuntimeInitialized"].forEach(function(prop){if(!Object.getOwnPropertyDescriptor(Module["ready"],prop)){Object.defineProperty(Module["ready"],prop,{get:function get(){return abort("You are getting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");},set:function set(){return abort("You are setting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");}});}});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram="./this.program";var quit_=function quit_(status,toThrow){throw toThrow;};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;if(Module["ENVIRONMENT"]){throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");}var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory);}return scriptDirectory+path;}var read_,readAsync,readBinary,setWindowTitle;if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src;}if(_scriptDir){scriptDirectory=_scriptDir;}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);}else{scriptDirectory="";}if(!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{read_=function read_(url){var xhr=new XMLHttpRequest();xhr.open("GET",url,false);xhr.send(null);return xhr.responseText;};readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return;}onerror();};xhr.onerror=onerror;xhr.send(null);};}setWindowTitle=function setWindowTitle(title){return document.title=title;};var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;checkIncomingModuleAPI();if(Module["arguments"])arguments_=Module["arguments"];legacyModuleProp("arguments","arguments_");if(Module["thisProgram"])thisProgram=Module["thisProgram"];legacyModuleProp("thisProgram","thisProgram");if(Module["quit"])quit_=Module["quit"];legacyModuleProp("quit","quit_");assert(typeof Module["memoryInitializerPrefixURL"]=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["pthreadMainPrefixURL"]=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["cdInitializerPrefixURL"]=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["filePackagePrefixURL"]=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["read"]=="undefined","Module.read option was removed (modify read_ in JS)");assert(typeof Module["readAsync"]=="undefined","Module.readAsync option was removed (modify readAsync in JS)");assert(typeof Module["readBinary"]=="undefined","Module.readBinary option was removed (modify readBinary in JS)");assert(typeof Module["setWindowTitle"]=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)");assert(typeof Module["TOTAL_MEMORY"]=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY");legacyModuleProp("asm","wasmExports");legacyModuleProp("read","read_");legacyModuleProp("readAsync","readAsync");legacyModuleProp("readBinary","readBinary");legacyModuleProp("setWindowTitle","setWindowTitle");assert(!ENVIRONMENT_IS_WORKER,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_NODE,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_SHELL,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];legacyModuleProp("wasmBinary","wasmBinary");var noExitRuntime=Module["noExitRuntime"]||true;legacyModuleProp("noExitRuntime","noExitRuntime");if(typeof WebAssembly!="object"){abort("no native wasm support detected");}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort("Assertion failed"+(text?": "+text:""));}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);Module["HEAP16"]=HEAP16=new Int16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);}assert(!Module["STACK_SIZE"],"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time");assert(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=undefined&&Int32Array.prototype.set!=undefined,"JS engine does not provide full typed array support");assert(!Module["wasmMemory"],"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally");assert(!Module["INITIAL_MEMORY"],"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var wasmTable;function writeStackCookie(){var max=_emscripten_stack_get_end2();assert((max&3)==0);if(max==0){max+=4;}HEAPU32[max>>2]=34821223;HEAPU32[max+4>>2]=2310721022;HEAPU32[0>>2]=1668509029;}function checkStackCookie(){if(ABORT)return;var max=_emscripten_stack_get_end2();if(max==0){max+=4;}var cookie1=HEAPU32[max>>2];var cookie2=HEAPU32[max+4>>2];if(cookie1!=34821223||cookie2!=2310721022){abort("Stack overflow! Stack cookie has been overwritten at "+ptrToString(max)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+ptrToString(cookie2)+" "+ptrToString(cookie1));}if(HEAPU32[0>>2]!=1668509029){abort("Runtime error: The application has corrupted its heap memory area (address zero)!");}}(function(){var h16=new Int16Array(1);var h8=new Int8Array(h16.buffer);h16[0]=25459;if(h8[0]!==115||h8[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";})();var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeKeepaliveCounter=0;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift());}}callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){assert(!runtimeInitialized);runtimeInitialized=true;checkStackCookie();callRuntimeCallbacks(__ATINIT__);}function postRun(){checkStackCookie();if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift());}}callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(cb){__ATPRERUN__.unshift(cb);}function addOnInit(cb){__ATINIT__.unshift(cb);}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb);}assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;var runDependencyTracking={};function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(!runDependencyTracking[id]);runDependencyTracking[id]=1;if(runDependencyWatcher===null&&typeof setInterval!="undefined"){runDependencyWatcher=setInterval(function(){if(ABORT){clearInterval(runDependencyWatcher);runDependencyWatcher=null;return;}var shown=false;for(var dep in runDependencyTracking){if(!shown){shown=true;err("still waiting on run dependencies:");}err("dependency: "+dep);}if(shown){err("(end of list)");}},1e4);}}else{err("warning: run dependency added without ID");}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(runDependencyTracking[id]);delete runDependencyTracking[id];}else{err("warning: run dependency removed without ID");}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null;}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback();}}}function abort(what){if(Module["onAbort"]){Module["onAbort"](what);}what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e;}var FS={error:function error(){abort("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM");},init:function init(){FS.error();},createDataFile:function createDataFile(){FS.error();},createPreloadedFile:function createPreloadedFile(){FS.error();},createLazyFile:function createLazyFile(){FS.error();},open:function open(){FS.error();},mkdev:function mkdev(){FS.error();},registerDevice:function registerDevice(){FS.error();},analyzePath:function analyzePath(){FS.error();},ErrnoError:function ErrnoError(){FS.error();}};Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix);}function isFileURI(filename){return filename.startsWith("file://");}function createExportWrapper(name){return function(){assert(runtimeInitialized,"native function `"+name+"` called before runtime initialization");var f=wasmExports[name];assert(f,"exported native function `"+name+"` not found");return f.apply(null,arguments);};}var _EmscriptenEH3=function(_Error){"use strict";function EmscriptenEH(){return _Error.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenEH,_Error);return EmscriptenEH;}(babelHelpers.wrapNativeSuper(Error));var _EmscriptenSjLj=function(_EmscriptenEH){"use strict";function EmscriptenSjLj(){return _EmscriptenEH.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenSjLj,_EmscriptenEH);return EmscriptenSjLj;}(_EmscriptenEH3);var _CppException=function(_EmscriptenEH2){"use strict";function CppException(excPtr){var _this;_this=_EmscriptenEH2.call(this,excPtr)||this;_this.excPtr=excPtr;var excInfo=getExceptionMessage(excPtr);_this.name=excInfo[0];_this.message=excInfo[1];return _this;}babelHelpers.inheritsLoose(CppException,_EmscriptenEH2);return CppException;}(_EmscriptenEH3);var wasmBinaryFile;wasmBinaryFile="crypto_utils_v2.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile);}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary);}if(readBinary){return readBinary(file);}throw"both async and sync fetching of the wasm failed";}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+binaryFile+"'";}return response["arrayBuffer"]();})["catch"](function(){return getBinarySync(binaryFile);});}}return(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(function(){return getBinarySync(binaryFile);});}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(function(binary){return WebAssembly.instantiate(binary,imports);}).then(function(instance){return instance;}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);if(isFileURI(wasmBinaryFile)){err("warning: Loading from a file URI ("+wasmBinaryFile+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing");}abort(reason);});}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(binaryFile,imports,callback);});});}return instantiateArrayBuffer(binaryFile,imports,callback);}function createWasm(){var info={"env":wasmImports,"wasi_snapshot_preview1":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports["memory"];Module["wasmMemory"]=wasmMemory;assert(wasmMemory,"memory not found in wasm exports");updateMemoryViews();wasmTable=wasmExports["__indirect_function_table"];assert(wasmTable,"table not found in wasm exports");addOnInit(wasmExports["__wasm_call_ctors"]);removeRunDependency("wasm-instantiate");return exports;}addRunDependency("wasm-instantiate");var trueModule=Module;function receiveInstantiationResult(result){assert(Module===trueModule,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?");trueModule=null;receiveInstance(result["instance"]);}if(Module["instantiateWasm"]){try{return Module["instantiateWasm"](info,receiveInstance);}catch(e){err("Module.instantiateWasm callback failed with error: "+e);readyPromiseReject(e);}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult)["catch"](readyPromiseReject);return{};}function legacyModuleProp(prop,newName,incomming){if(incomming===void 0){incomming=true;}if(!Object.getOwnPropertyDescriptor(Module,prop)){Object.defineProperty(Module,prop,{configurable:true,get:function get(){var extra=incomming?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";abort("`Module."+prop+"` has been replaced by `"+newName+"`"+extra);}});}}function ignoredModuleProp(prop){if(Object.getOwnPropertyDescriptor(Module,prop)){abort("`Module."+prop+"` was supplied but `"+prop+"` not included in INCOMING_MODULE_JS_API");}}function isExportedByForceFilesystem(name){return name==="FS_createPath"||name==="FS_createDataFile"||name==="FS_createPreloadedFile"||name==="FS_unlink"||name==="addRunDependency"||name==="FS_createLazyFile"||name==="FS_createDevice"||name==="removeRunDependency";}function missingGlobal(sym,msg){if(typeof globalThis!=="undefined"){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){_warnOnce("`"+sym+"` is not longer defined by emscripten. "+msg);return undefined;}});}}missingGlobal("buffer","Please use HEAP8.buffer or wasmMemory.buffer");function missingLibrarySymbol(sym){if(typeof globalThis!=="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,sym)){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){var msg="`"+sym+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";var librarySymbol=sym;if(!librarySymbol.startsWith("_")){librarySymbol="$"+sym;}msg+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='"+librarySymbol+"')";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}_warnOnce(msg);return undefined;}});}unexportedRuntimeSymbol(sym);}function unexportedRuntimeSymbol(sym){if(!Object.getOwnPropertyDescriptor(Module,sym)){Object.defineProperty(Module,sym,{configurable:true,get:function get(){var msg="'"+sym+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}abort(msg);}});}}var ASM_CONSTS={50356:function _(){return Module.getRandomValue();},50392:function _(){if(Module.getRandomValue===undefined){try{var window_="object"===typeof window?window:self;var crypto_=typeof window_.crypto!=="undefined"?window_.crypto:window_.msCrypto;var randomValuesStandard=function randomValuesStandard(){var buf=new Uint32Array(1);crypto_.getRandomValues(buf);return buf[0]>>>0;};randomValuesStandard();Module.getRandomValue=randomValuesStandard;}catch(e){{throw"No secure random number generator found";}}}}};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status;}var callRuntimeCallbacks=function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module);}};var withStackSave=function withStackSave(f){var stack=stackSave();var ret=f();stackRestore(stack);return ret;};var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined;var UTF8ArrayToString=function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));}var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue;}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue;}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2;}else{if((u0&248)!=240)_warnOnce("Invalid UTF-8 leading byte "+ptrToString(u0)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63;}if(u0<65536){str+=String.fromCharCode(u0);}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}}return str;};var UTF8ToString=function UTF8ToString(ptr,maxBytesToRead){assert(typeof ptr=="number");return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):"";};var getExceptionMessageCommon=function getExceptionMessageCommon(ptr){return withStackSave(function(){var type_addr_addr=stackAlloc(4);var message_addr_addr=stackAlloc(4);___get_exception_message(ptr,type_addr_addr,message_addr_addr);var type_addr=HEAPU32[type_addr_addr>>2];var message_addr=HEAPU32[message_addr_addr>>2];var type=UTF8ToString(type_addr);_free(type_addr);var message;if(message_addr){message=UTF8ToString(message_addr);_free(message_addr);}return[type,message];});};function getExceptionMessage(ptr){return getExceptionMessageCommon(ptr);}Module["getExceptionMessage"]=getExceptionMessage;function getValue(ptr,type){if(type===void 0){type="i8";}if(type.endsWith("*"))type="*";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort("invalid type for getValue: "+type);}}var ptrToString=function ptrToString(ptr){assert(typeof ptr==="number");ptr>>>=0;return"0x"+ptr.toString(16).padStart(8,"0");};var _warnOnce=function warnOnce(text){if(!_warnOnce.shown)_warnOnce.shown={};if(!_warnOnce.shown[text]){_warnOnce.shown[text]=1;err(text);}};var ___assert_fail=function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"]);};var exceptionCaught=[];var uncaughtExceptionCount=0;function ___cxa_begin_catch(ptr){var info=new ExceptionInfo(ptr);if(!info.get_caught()){info.set_caught(true);uncaughtExceptionCount--;}info.set_rethrown(false);exceptionCaught.push(info);___cxa_increment_exception_refcount(info.excPtr);return info.get_exception_ptr();}var exceptionLast=0;function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type;};this.get_type=function(){return HEAPU32[this.ptr+4>>2];};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor;};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2];};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught;};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0;};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown;};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0;};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor);};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr;};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2];};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2];}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr;};}function ___resumeException(ptr){if(!exceptionLast){exceptionLast=new _CppException(ptr);}throw exceptionLast;}var findMatchingCatch=function findMatchingCatch(args){var thrown=exceptionLast&&exceptionLast.excPtr;if(!thrown){setTempRet0(0);return 0;}var info=new ExceptionInfo(thrown);info.set_adjusted_ptr(thrown);var thrownType=info.get_type();if(!thrownType){setTempRet0(0);return thrown;}for(var arg in args){var caughtType=args[arg];if(caughtType===0||caughtType===thrownType){break;}var adjusted_ptr_addr=info.ptr+16;if(___cxa_can_catch(caughtType,thrownType,adjusted_ptr_addr)){setTempRet0(caughtType);return thrown;}}setTempRet0(thrownType);return thrown;};var ___cxa_find_matching_catch_2=function ___cxa_find_matching_catch_2(){return findMatchingCatch([]);};var ___cxa_find_matching_catch_3=function ___cxa_find_matching_catch_3(arg0){return findMatchingCatch([arg0]);};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size);}}function embind_init_charCodes(){var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i);}embind_charCodes=codes;}var embind_charCodes=undefined;function readLatin1String(ptr){var ret="";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]];}return ret;}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var BindingError=undefined;function throwBindingError(message){throw new BindingError(message);}var InternalError=undefined;function throwInternalError(message){throw new InternalError(message);}function sharedRegisterType(rawType,registeredInstance,options){if(options===void 0){options={};}var name=registeredInstance.name;if(!rawType){throwBindingError("type \""+name+"\" must have a positive integer typeid pointer");}if(Object.prototype.hasOwnProperty.call(registeredTypes,rawType)){if(options.ignoreDuplicateRegistrations){return;}else{throwBindingError("Cannot register type '"+name+"' twice");}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(Object.prototype.hasOwnProperty.call(awaitingDependencies,rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(function(cb){return cb();});}}function registerType(rawType,registeredInstance,options){if(options===void 0){options={};}if(!("argPackAdvance"in registeredInstance)){throw new TypeError("registerType registeredInstance requires argPackAdvance");}return sharedRegisterType(rawType,registeredInstance,options);}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(wt){return!!wt;},"toWireType":function toWireType(destructors,o){return o?trueValue:falseValue;},"argPackAdvance":8,"readValueFromPointer":function readValueFromPointer(pointer){var heap;if(size===1){heap=HEAP8;}else if(size===2){heap=HEAP16;}else if(size===4){heap=HEAP32;}else{throw new TypeError("Unknown boolean type size: "+name);}return this["fromWireType"](heap[pointer>>shift]);},destructorFunction:null});}function handleAllocatorInit(){Object.assign(HandleAllocator.prototype,{get:function get(id){assert(this.allocated[id]!==undefined,"invalid handle: "+id);return this.allocated[id];},has:function has(id){return this.allocated[id]!==undefined;},allocate:function allocate(handle){var id=this.freelist.pop()||this.allocated.length;this.allocated[id]=handle;return id;},free:function free(id){assert(this.allocated[id]!==undefined);this.allocated[id]=undefined;this.freelist.push(id);}});}function HandleAllocator(){this.allocated=[undefined];this.freelist=[];}var emval_handles=new HandleAllocator();function __emval_decref(handle){if(handle>=emval_handles.reserved&&0===--emval_handles.get(handle).refcount){emval_handles.free(handle);}}function count_emval_handles(){var count=0;for(var i=emval_handles.reserved;i<emval_handles.allocated.length;++i){if(emval_handles.allocated[i]!==undefined){++count;}}return count;}function init_emval(){emval_handles.allocated.push({value:undefined},{value:null},{value:true},{value:false});emval_handles.reserved=emval_handles.allocated.length;Module["count_emval_handles"]=count_emval_handles;}var Emval={toValue:function toValue(handle){if(!handle){throwBindingError("Cannot use deleted val. handle = "+handle);}return emval_handles.get(handle).value;},toHandle:function toHandle(value){switch(value){case undefined:return 1;case null:return 2;case true:return 3;case false:return 4;default:{return emval_handles.allocate({refcount:1,value:value});}}}};function simpleReadValueFromPointer(pointer){return this["fromWireType"](HEAP32[pointer>>2]);}function __embind_register_emval(rawType,name){name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(handle){var rv=Emval.toValue(handle);__emval_decref(handle);return rv;},"toWireType":function toWireType(destructors,value){return Emval.toHandle(value);},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:null});}function embindRepr(v){if(v===null){return"null";}var t=typeof v;if(t==="object"||t==="array"||t==="function"){return v.toString();}else{return""+v;}}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this["fromWireType"](HEAPF32[pointer>>2]);};case 3:return function(pointer){return this["fromWireType"](HEAPF64[pointer>>3]);};default:throw new TypeError("Unknown float type: "+name);}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(value){return value;},"toWireType":function toWireType(destructors,value){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert "+embindRepr(value)+" to "+this.name);}return value;},"argPackAdvance":8,"readValueFromPointer":floatReadValueFromPointer(name,shift),destructorFunction:null});}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function readS8FromPointer(pointer){return HEAP8[pointer];}:function readU8FromPointer(pointer){return HEAPU8[pointer];};case 1:return signed?function readS16FromPointer(pointer){return HEAP16[pointer>>1];}:function readU16FromPointer(pointer){return HEAPU16[pointer>>1];};case 2:return signed?function readS32FromPointer(pointer){return HEAP32[pointer>>2];}:function readU32FromPointer(pointer){return HEAPU32[pointer>>2];};default:throw new TypeError("Unknown integer type: "+name);}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295;}var shift=getShiftFromSize(size);var fromWireType=function fromWireType(value){return value;};if(minRange===0){var bitshift=32-8*size;fromWireType=function fromWireType(value){return value<<bitshift>>>bitshift;};}var isUnsignedType=name.includes("unsigned");var checkAssertions=function checkAssertions(value,toTypeName){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert \""+embindRepr(value)+"\" to "+toTypeName);}if(value<minRange||value>maxRange){throw new TypeError("Passing a number \""+embindRepr(value)+"\" from JS side to C/C++ side to an argument of type \""+name+"\", which is outside the valid range ["+minRange+", "+maxRange+"]!");}};var toWireType;if(isUnsignedType){toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value>>>0;};}else{toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value;};}registerType(primitiveType,{name:name,"fromWireType":fromWireType,"toWireType":toWireType,"argPackAdvance":8,"readValueFromPointer":integerReadValueFromPointer(name,shift,minRange!==0),destructorFunction:null});}function __embind_register_memory_view(rawType,dataTypeIndex,name){var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){handle=handle>>2;var heap=HEAPU32;var size=heap[handle];var data=heap[handle+1];return new TA(heap.buffer,data,size);}name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":decodeMemoryView,"argPackAdvance":8,"readValueFromPointer":decodeMemoryView},{ignoreDuplicateRegistrations:true});}var stringToUTF8Array=function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){assert(typeof str==="string");if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023;}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u;}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63;}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}else{if(outIdx+3>=endIdx)break;if(u>1114111)_warnOnce("Invalid Unicode code point "+ptrToString(u)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).");heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}}heap[outIdx]=0;return outIdx-startIdx;};var stringToUTF8=function stringToUTF8(str,outPtr,maxBytesToWrite){assert(typeof maxBytesToWrite=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);};var lengthBytesUTF8=function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++;}else if(c<=2047){len+=2;}else if(c>=55296&&c<=57343){len+=4;++i;}else{len+=3;}}return len;};function __embind_register_std_string(rawType,name){name=readLatin1String(name);var stdStringIsUTF8=name==="std::string";registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+1;}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i]);}str=a.join("");}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value);}var length;var valueIsOfTypeString=typeof value=="string";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError("Cannot pass non-string to std::string");}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value);}else{length=value.length;}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1);}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError("String has UTF-16 code units that do not fit in 8 bits");}HEAPU8[ptr+i]=charCode;}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i]=value[i];}}}if(destructors!==null){destructors.push(_free,base);}return base;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});}var UTF16Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):undefined;var UTF16ToString=function UTF16ToString(ptr,maxBytesToRead){assert(ptr%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));var str="";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit);}return str;};var stringToUTF16=function stringToUTF16(str,outPtr,maxBytesToWrite){assert(outPtr%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2;}HEAP16[outPtr>>1]=0;return outPtr-startPtr;};var lengthBytesUTF16=function lengthBytesUTF16(str){return str.length*2;};var UTF32ToString=function UTF32ToString(ptr,maxBytesToRead){assert(ptr%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");var i=0;var str="";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}else{str+=String.fromCharCode(utf32);}}return str;};var stringToUTF32=function stringToUTF32(str,outPtr,maxBytesToWrite){assert(outPtr%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023;}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break;}HEAP32[outPtr>>2]=0;return outPtr-startPtr;};var lengthBytesUTF32=function lengthBytesUTF32(str){var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4;}return len;};var __embind_register_std_wstring=function __embind_register_std_wstring(rawType,charSize,name){name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=function getHeap(){return HEAPU16;};shift=1;}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=function getHeap(){return HEAPU32;};shift=2;}registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var HEAP=getHeap();var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||HEAP[currentBytePtr>>shift]==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+charSize;}}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(!(typeof value=="string")){throwBindingError("Cannot pass non-string to C++ string type "+name);}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr);}return ptr;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});};function __embind_register_void(rawType,name){name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,"argPackAdvance":0,"fromWireType":function fromWireType(){return undefined;},"toWireType":function toWireType(destructors,o){return undefined;}});}var _abort=function _abort(){abort("native code called abort()");};var readEmAsmArgsArray=[];var readEmAsmArgs=function readEmAsmArgs(sigPtr,buf){assert(Array.isArray(readEmAsmArgsArray));assert(buf%16==0);readEmAsmArgsArray.length=0;var ch;buf>>=2;while(ch=HEAPU8[sigPtr++]){var chr=String.fromCharCode(ch);var validChars=["d","f","i"];assert(validChars.includes(chr),"Invalid character "+ch+"(\""+chr+"\") in readEmAsmArgs! Use only ["+validChars+"], and do not specify \"v\" for void return argument.");buf+=ch!=105&buf;readEmAsmArgsArray.push(ch==105?HEAP32[buf]:HEAPF64[buf++>>1]);++buf;}return readEmAsmArgsArray;};var runEmAsmFunction=function runEmAsmFunction(code,sigPtr,argbuf){var args=readEmAsmArgs(sigPtr,argbuf);if(!Object.prototype.hasOwnProperty.call(ASM_CONSTS,code))abort("No EM_ASM constant found at address "+code);return ASM_CONSTS[code].apply(null,args);};var _emscripten_asm_const_int=function _emscripten_asm_const_int(code,sigPtr,argbuf){return runEmAsmFunction(code,sigPtr,argbuf);};var getHeapMax=function getHeapMax(){return 1048576;};var _emscripten_get_heap_max=function _emscripten_get_heap_max(){return getHeapMax();};var growMemory=function growMemory(size){var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1;}catch(e){err("growMemory: Attempted to grow heap from "+b.byteLength+" bytes to "+size+" bytes, but got error: "+e);}};var _emscripten_resize_heap=function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize>>>=0;assert(requestedSize>oldSize);var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){err("Cannot enlarge memory, asked to go up to "+requestedSize+" bytes, but the limit is "+maxHeapSize+" bytes!");return false;}var alignUp=function alignUp(x,multiple){return x+(multiple-x%multiple)%multiple;};for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true;}}err("Failed to grow the heap from "+oldSize+" bytes to "+newSize+" bytes, not enough memory!");return false;};var SYSCALLS={varargs:undefined,get:function get(){assert(SYSCALLS.varargs!=undefined);SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret;},getStr:function getStr(ptr){var ret=UTF8ToString(ptr);return ret;}};var _fd_close=function _fd_close(fd){abort("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM");};function convertI32PairToI53Checked(lo,hi){assert(lo==lo>>>0||lo==(lo|0));assert(hi===(hi|0));return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN;}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70;}var printCharBuffers=[null,[],[]];var printChar=function printChar(stream,curr){var buffer=printCharBuffers[stream];assert(buffer);if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0;}else{buffer.push(curr);}};var flush_NO_FILESYSTEM=function flush_NO_FILESYSTEM(){_fflush(0);if(printCharBuffers[1].length)printChar(1,10);if(printCharBuffers[2].length)printChar(2,10);};var _fd_write=function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j]);}num+=len;}HEAPU32[pnum>>2]=num;return 0;};var getWasmTableEntry=function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr);};var writeArrayToMemory=function writeArrayToMemory(array,buffer){assert(array.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)");HEAP8.set(array,buffer);};embind_init_charCodes();BindingError=Module["BindingError"]=function(_Error2){"use strict";function BindingError(message){var _this2;_this2=_Error2.call(this,message)||this;_this2.name="BindingError";return _this2;}babelHelpers.inheritsLoose(BindingError,_Error2);return BindingError;}(babelHelpers.wrapNativeSuper(Error));InternalError=Module["InternalError"]=function(_Error3){"use strict";function InternalError(message){var _this3;_this3=_Error3.call(this,message)||this;_this3.name="InternalError";return _this3;}babelHelpers.inheritsLoose(InternalError,_Error3);return InternalError;}(babelHelpers.wrapNativeSuper(Error));handleAllocatorInit();init_emval();function checkIncomingModuleAPI(){ignoredModuleProp("fetchSettings");}var wasmImports={__assert_fail:___assert_fail,__cxa_begin_catch:___cxa_begin_catch,__cxa_find_matching_catch_2:___cxa_find_matching_catch_2,__cxa_find_matching_catch_3:___cxa_find_matching_catch_3,__resumeException:___resumeException,_embind_register_bigint:__embind_register_bigint,_embind_register_bool:__embind_register_bool,_embind_register_emval:__embind_register_emval,_embind_register_float:__embind_register_float,_embind_register_integer:__embind_register_integer,_embind_register_memory_view:__embind_register_memory_view,_embind_register_std_string:__embind_register_std_string,_embind_register_std_wstring:__embind_register_std_wstring,_embind_register_void:__embind_register_void,abort:_abort,emscripten_asm_const_int:_emscripten_asm_const_int,emscripten_get_heap_max:_emscripten_get_heap_max,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,invoke_ii:invoke_ii,invoke_iii:invoke_iii,invoke_iiii:invoke_iiii,invoke_v:invoke_v,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viii:invoke_viii,invoke_viiii:invoke_viiii};var asm=createWasm();var ___wasm_call_ctors=createExportWrapper("__wasm_call_ctors");var _curve_create=Module["_curve_create"]=createExportWrapper("curve_create");var _malloc=Module["_malloc"]=createExportWrapper("malloc");var _curve_free=Module["_curve_free"]=createExportWrapper("curve_free");var _free=Module["_free"]=createExportWrapper("free");var _curve_init_ristretto=Module["_curve_init_ristretto"]=createExportWrapper("curve_init_ristretto");var _get_curve_element_bytes=Module["_get_curve_element_bytes"]=createExportWrapper("get_curve_element_bytes");var _get_curve_scalar_bytes=Module["_get_curve_scalar_bytes"]=createExportWrapper("get_curve_scalar_bytes");var _kdf_create=Module["_kdf_create"]=createExportWrapper("kdf_create");var _kdf_free=Module["_kdf_free"]=createExportWrapper("kdf_free");var _kdf_init_naor_reingold=Module["_kdf_init_naor_reingold"]=createExportWrapper("kdf_init_naor_reingold");var _sodiumInit=Module["_sodiumInit"]=createExportWrapper("sodiumInit");var _voprf_create=Module["_voprf_create"]=createExportWrapper("voprf_create");var _voprf_free=Module["_voprf_free"]=createExportWrapper("voprf_free");var _voprf_init_exp_twohashdh=Module["_voprf_init_exp_twohashdh"]=createExportWrapper("voprf_init_exp_twohashdh");var _blind=Module["_blind"]=createExportWrapper("blind");var _verifiable_unblind=Module["_verifiable_unblind"]=createExportWrapper("verifiable_unblind");var _voprf_client_finalize=Module["_voprf_client_finalize"]=createExportWrapper("voprf_client_finalize");var _voprf_setup=Module["_voprf_setup"]=createExportWrapper("voprf_setup");var _voprf_evaluate=Module["_voprf_evaluate"]=createExportWrapper("voprf_evaluate");var _voprf_server_finalize=Module["_voprf_server_finalize"]=createExportWrapper("voprf_server_finalize");var _get_voprf_final_evaluation_bytes=Module["_get_voprf_final_evaluation_bytes"]=createExportWrapper("get_voprf_final_evaluation_bytes");var ___errno_location=createExportWrapper("__errno_location");var ___getTypeName=createExportWrapper("__getTypeName");var __embind_initialize_bindings=Module["__embind_initialize_bindings"]=createExportWrapper("_embind_initialize_bindings");var _fflush=Module["_fflush"]=createExportWrapper("fflush");var _emscripten_builtin_memalign=createExportWrapper("emscripten_builtin_memalign");var _setThrew=createExportWrapper("setThrew");var setTempRet0=createExportWrapper("setTempRet0");var _emscripten_stack_init2=function _emscripten_stack_init(){return(_emscripten_stack_init2=wasmExports["emscripten_stack_init"])();};var _emscripten_stack_get_free2=function _emscripten_stack_get_free(){return(_emscripten_stack_get_free2=wasmExports["emscripten_stack_get_free"])();};var _emscripten_stack_get_base2=function _emscripten_stack_get_base(){return(_emscripten_stack_get_base2=wasmExports["emscripten_stack_get_base"])();};var _emscripten_stack_get_end2=function _emscripten_stack_get_end(){return(_emscripten_stack_get_end2=wasmExports["emscripten_stack_get_end"])();};var stackSave=createExportWrapper("stackSave");var stackRestore=createExportWrapper("stackRestore");var stackAlloc=createExportWrapper("stackAlloc");var _emscripten_stack_get_current2=function _emscripten_stack_get_current(){return(_emscripten_stack_get_current2=wasmExports["emscripten_stack_get_current"])();};var ___cxa_free_exception=createExportWrapper("__cxa_free_exception");var ___cxa_increment_exception_refcount=createExportWrapper("__cxa_increment_exception_refcount");var ___cxa_decrement_exception_refcount=createExportWrapper("__cxa_decrement_exception_refcount");var ___get_exception_message=Module["___get_exception_message"]=createExportWrapper("__get_exception_message");var ___cxa_can_catch=createExportWrapper("__cxa_can_catch");var ___cxa_is_pointer_type=createExportWrapper("__cxa_is_pointer_type");var dynCall_iiiji=Module["dynCall_iiiji"]=createExportWrapper("dynCall_iiiji");var dynCall_iiij=Module["dynCall_iiij"]=createExportWrapper("dynCall_iiij");var dynCall_iijii=Module["dynCall_iijii"]=createExportWrapper("dynCall_iijii");var dynCall_iiijiji=Module["dynCall_iiijiji"]=createExportWrapper("dynCall_iiijiji");var dynCall_iiijiii=Module["dynCall_iiijiii"]=createExportWrapper("dynCall_iiijiii");var dynCall_jiji=Module["dynCall_jiji"]=createExportWrapper("dynCall_jiji");function invoke_v(index){var sp=stackSave();try{getWasmTableEntry(index)();}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}Module["wasmMemory"]=wasmMemory;Module["getValue"]=getValue;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;var missingLibrarySymbols=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","zeroMemory","exitJS","isLeapYear","ydayFromDate","arraySum","addDays","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","initRandomFill","randomFill","getCallstack","emscriptenLog","convertPCtoSourceLocation","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","setWasmTableEntry","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","setMainLoop","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","getTypeName","heap32VectorToArray","requireRegisteredType","init_embind","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","enumReadValueFromPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];missingLibrarySymbols.forEach(missingLibrarySymbol);var unexportedSymbols=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","out","err","callMain","abort","keepRuntimeAlive","wasmTable","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","ptrToString","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","ERRNO_CODES","ERRNO_MESSAGES","DNS","Protocols","Sockets","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","getWasmTableEntry","handleAllocatorInit","HandleAllocator","freeTableIndexes","functionsInTableMap","setValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","ExitStatus","flush_NO_FILESYSTEM","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","wget","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","GLFW","allocateUTF8","allocateUTF8OnStack","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","UnboundTypeError","PureVirtualError","embindRepr","registeredInstances","registeredPointers","registerType","getShiftFromSize","integerReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","finalizationRegistry","detachFinalizer_deps","deletionQueue","delayFunction","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_newers","emval_methodCallers","emval_registeredMethods"];unexportedSymbols.forEach(unexportedRuntimeSymbol);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller;};function stackCheckInit(){_emscripten_stack_init2();writeStackCookie();}function run(){if(runDependencies>0){return;}stackCheckInit();preRun();if(runDependencies>0){return;}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();assert(!Module["_main"],'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]');postRun();}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("");},1);doRun();},1);}else{doRun();}checkStackCookie();}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()();}}run();


return moduleArg.ready;
});


}();
if(typeof exports==='object'&&typeof module==='object')
module.exports=Module;else
if(typeof define==='function'&&define['amd'])
define([],function(){return Module;});}),null);/*FB_PKG_DELIM*/
__d("LSGroupPollEventType",[],(function(t,n,r,o,a,i){var e=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});i.default=e}),66);
__d("LSPollQuestionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHOOSE_MULTIPLE:0,MOST_LIKELY_TO:1,NON_POLL:2});i.default=e}),66);
__d("LsMessageSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4190"),s=o("FalcoLoggerInternal").create("ls_message_search_end",e),u=s;l.default=u}),98);
__d("LsMessageSearchMsgImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4191"),s=o("FalcoLoggerInternal").create("ls_message_search_msg_impression",e),u=s;l.default=u}),98);
__d("LsMessageSearchMsgResultChosenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4231"),s=o("FalcoLoggerInternal").create("ls_message_search_msg_result_chosen",e),u=s;l.default=u}),98);
__d("LsMessageSearchSearchClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4464"),s=o("FalcoLoggerInternal").create("ls_message_search_search_clicked",e),u=s;l.default=u}),98);
__d("LsMessageSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4683"),s=o("FalcoLoggerInternal").create("ls_message_search_start",e),u=s;l.default=u}),98);
__d("LsMessageSearchThreadImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6727"),s=o("FalcoLoggerInternal").create("ls_message_search_thread_impression",e),u=s;l.default=u}),98);
__d("LsMessageSearchThreadListClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6293"),s=o("FalcoLoggerInternal").create("ls_message_search_thread_list_click",e),u=s;l.default=u}),98);
__d("MAWBridgeDeleteMessagesHandler",["EntMessageReplyType","FBLogger","I64","LSIntEnum","MAWCurrentUser","MAWDbMsg","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MAWReplyBuilder","MAWTimeUtils","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeDeleteMessagesHandler",async function(e,n){await Promise.all(t.messages.map(async function(t){if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){var r=await e.messages.index("messageId").get(t.msgId);r!=null&&(await c({callbackTxn:e,messageId:r.messageId,threadKey:r.threadKey,timestampMs:r.timestampMs}),await d(e,r))}else await c({callbackTxn:e,messageId:t.msgId,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(t.ts)})}))})}async function c(e){var t=e.callbackTxn,n=e.messageId,r=e.threadKey,a=e.timestampMs;if(await t.messages.delete(r,a,n),o("MAWMpsGating").isMpsMessageRendering()){var i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(r,n));await Promise.all(i.map(function(e){var n=[e.defaultCtaId,e.attachmentCta1Id,e.attachmentCta2Id,e.attachmentCta3Id].filter(Boolean),r=n.map(function(e){return t.attachment_ctas.delete(e)});return Promise.all(r).then(function(){return t.attachments.delete(e.threadKey,e.messageId,e.attachmentFbid)})}))}}async function d(t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(n.messageId)),i=o("MAWDbMsg").toMsgId(n.messageId);if(i==null){r("FBLogger")("messenger_e2ee_web").mustfix("[MAWBridgeDeleteMessagesHandler] Error extracting message id from message");return}await Promise.all(a.map(function(a){var l={isBumpMsg:a.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSMessage:babelHelpers.extends({},n,{isUnsent:!0}),replyToMsgId:i,replyType:"MESSAGE"},u=babelHelpers.extends({},a,{replyAttachmentId:void 0,replyAttachmentPlaintextHash:void 0,replyAttachmentType:void 0,replyMediaExpirationTimestampMs:void 0,replyMediaPreviewHeight:void 0,replyMediaPreviewWidth:void 0,replySnippet:o("MAWReplyBuilder").getReplyBuilder(l.replyType).buildReplySnippet(l,(s||(s=o("I64"))).to_string(a.senderId),o("MAWCurrentUser").getID()),replyStatus:o("MAWReplyBuilder").getReplyBuilder(l.replyType).buildReplyStatus(l)});return t.messages.put(u)}))}l.call=u}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.chatJid,"MAWBridgeDeleteReactionHandler",function(t,r){return t.reactions.delete(r,n.messageId,(e||(e=o("I64"))).of_string(n.actorId))})}l.call=s}),98);
__d("MAWBridgeEditMsgHistoryAddedHandler",["FBLogger","I64","LSMessageSendStatus","MAWChatJid","ReQL","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t));return n==null?void 0:n.messageId}async function u(t,n,a){var i=await s(t,n.originalMsgExternalId);if(i==null){r("FBLogger")("messenger_web_e2ee").warn("original message for edit msg history is not present in lsdb");return}var l={messageContent:n.msgContent.content,originalMessagePk:i,sendStatus:n.sendStatus!=null?(e||(e=o("I64"))).of_int32(n.sendStatus):(e||(e=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(e||(e=o("I64"))).of_int32(n.editTs),threadKey:a};return t.edit_message_history.put(l)}function c(t,n,a,i,l){var s={messageContent:n.msgContent.content,originalMessagePk:l,pk:i,sendStatus:n.sendStatus!=null?(e||(e=o("I64"))).of_int32(n.sendStatus):(e||(e=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(e||(e=o("I64"))).of_int32(n.editTs),threadKey:a};return t.edit_message_history.put(s)}async function d(e,t,n){var r=await o("MAWChatJid").toThreadKeyMaybe(e.tables,n.threadJid);if(r!=null){var a=n.editMsgHistoryId,i=n.originalMsgId,l=i==null||a==null?u(t,n,r):c(t,n,r,a,i);return l}}function m(e,t,n){return Promise.all(n.map(function(n){return d(e,t,n)})).then(r("emptyFunction"))}l.call=m}),98);
__d("MAWBridgeHandleReceiverFetchXMA",["FBLogger","I64","LSIntEnum","LSXmaContentType","MAWBridgeXMAUtils","MessagingAttachmentType","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n,a){var i,l,u,c=n.contentRef,d=n.defaultPreviewMediaId,m=n.msgId,p=n.subtitleText,_=n.titleText,f=n.xmaId;if(m!=null){var g=(i=n==null||(l=n.defaultCTA)==null?void 0:l.actionUrl)!=null?i:n==null||(u=n.defaultCTA)==null?void 0:u.nativeUrl,h=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(a,m)),y=String(f),C=(e||(e=o("I64"))).zero,b;if(c!=null)try{var v=JSON.parse(c);v!=null&&(b=JSON.stringify(v))}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Failed to parse msg.contentRef as XmsgMsgrXmaContentRefDataclass")}else r("FBLogger")("messenger_web_sharing").mustfix("contentRef is empty for a MSG_RECEIVER_FETCH XMA");var S=await o("MAWBridgeXMAUtils").addAttachmentCtas(t,n,a,m,y,{}),R=S.attachmentCta1Id,L=S.attachmentCta2Id,E=S.attachmentCta3Id,k=S.defaultCtaId,I={actionUrl:g!=null?g:void 0,attachmentCta1Id:R,attachmentCta2Id:L,attachmentCta3Id:E,attachmentFbid:y,attachmentIndex:e.zero,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:e.zero,defaultCtaId:k,hasMedia:!1,hasXma:!0,hasXmaPreview:d!=null,isSharable:!0,messageId:m,receiverFetchId:b,subtitleText:p,threadKey:a,timestampMs:C,titleText:_,transportKey:"WhatsApp",xmaContentType:s.ofNumber(r("LSXmaContentType").MSG_RECEIVER_FETCH)};h!=null?await t.attachments.upsert([h.threadKey,h.messageId,h.attachmentFbid],I):await t.attachments.add(I)}}l.call=u}),98);
__d("MAWMessageExpirationStorage",["LSDatabaseSingleton","MAWBridgeDeleteMessagesHandler","ReQL","clearTimeout","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;async function u(e,t,n){await Promise.all(t.map(function(t){var n=t.ts,r=t.msgId,a={msgId:r,ts:n},i=t.threadJid,l=[a],s={messages:l,threadJid:i};return o("MAWBridgeDeleteMessagesHandler").call(e,s)})),s.delete(n)}async function c(e,t,n){await Promise.all(t.map(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyAttachmentPlaintextHash:void 0});await e.messages.put(r)}})),s.delete(n)}async function d(e,t,n){await Promise.all(t.map(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyMessageText:void 0});await e.messages.put(r)}})),s.delete(n)}function m(t,n,a,l){return r("setTimeout")(async function(){var a=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;r("promiseDone")(a.runInTransaction(async function(e){await l(e,t,n)},"readwrite",void 0,void 0,i.id+":127"))},a)}function p(e){var t=e.bridgeMsgStartCountdown,n=e.expirationEvent,o=t.countdownTs,a=t.millisecondsUntilCountdownTs,i=s.get(o),l;if(i==null)l=[t];else{r("clearTimeout")(i.timeoutId);var u=i.msgs.map(function(e){return e.msgId}).indexOf(t.msgId)===-1;u&&i.msgs.push(t),l=i.msgs}var c=m(l,o,a,n);s.set(o,{expirationTs:o,msgs:l,timeoutId:c})}function _(e){var t=e.msgId,n=s.get(e.countdownTs);if(n!=null){var r=n.msgs.map(function(e){return e.msgId}).indexOf(t);if(r>-1){n.msgs.splice(r,1);return}}}l.expirationDeletionEvent=u,l.expirationStoryReplyEvent=c,l.expirationNoteReplyEvent=d,l.setMessageForExpiration=p,l.clearMessageFromExpiration=_}),98);
__d("MAWBridgeMsgsStartCountdownHandler",["I64","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return n.msgs.reduce(function(n,r){return n.then(function(){return o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:r,expirationEvent:o("MAWMessageExpirationStorage").expirationDeletionEvent}),(e||(e=o("I64"))).of_int32(r.millisecondsUntilCountdownTs),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,r.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.messages).getKeyRange(n,o("MAWTimeUtils").toTimestamp(r.ts),r.msgId)).then(async function(n){if(n==null)return Promise.resolve();var a=babelHelpers.extends({},n,{ephemeralExpirationTs:(e||(e=o("I64"))).of_float(r.countdownTs)});await t.messages.put(a)})})})},Promise.resolve())}l.call=s}),98);
__d("MAWBridgePollUtils",["fbt","FBLogger","I64","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){return t.toSorted(function(t,n){return t.numVotes!==n.numVotes?n.numVotes-t.numVotes:(e||(e=o("I64"))).equal(t.sortKeyVotingTimestamp,n.sortKeyVotingTimestamp)?(e||(e=o("I64"))).compare(t.sortKeyCreationTimestamp,n.sortKeyCreationTimestamp):(e||(e=o("I64"))).compare(n.sortKeyVotingTimestamp,t.sortKeyVotingTimestamp)})}function c(t){if(t===o("WAJids").AUTHOR_SYSTEM)throw r("FBLogger")("messenger_web").mustfixThrow("Not a valid author for poll vote");return t===o("WAJids").AUTHOR_ME?(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(t))}function d(e,t){switch(e.length){case 0:return s._(/*BTDS*/"{option_name}, no votes",[s._param("option_name",t)]);case 1:return s._(/*BTDS*/"{option_name}, Voted for by {voter_name}",[s._param("option_name",t),s._param("voter_name",e[0])]);case 2:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1])]);case 3:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {third_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("third_voter_name",e[2])]);default:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {remaining_count} others",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("remaining_count",e.length-2)])}}l.sortPollXMAOptions=u,l.getContactIdForAuthor=c,l.getListItemAccessibilityText=d}),226);
__d("MNLSXMATemplateType",[],(function(t,n,r,o,a,i){var e=Object.freeze({GENERIC_SHARE:0,DEFAULT:-1});i.default=e}),66);
__d("QuestionPollStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOMINATING:0,VOTING:1,CLOSED:2});i.default=e}),66);
__d("MAWBridgeNewPollHandler",["fbt","FBLogger","I64","LSAuthorityLevel","LSGroupPollEventType","LSIntEnum","LSPollQuestionType","MAWBridgePollUtils","MAWDbPoll","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MNLSXMALayoutType","MNLSXMATemplateType","MessagingAttachmentType","QuestionPollStage","ReQL","WAJids","nullthrows"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=3;async function d(t,n,r){var a=n.contactIdForCurrentUser,i=n.dbPoll,l=n.latestUpdateMsgId,s=n.latestUpdateTimestampMs,u=n.transportKey,c=i.pollStanzaId,d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments.index("idx_attachments_collapsible_id")).getKeyRange(r,(e||(e=o("I64"))).of_string(c)));d!=null&&await t.attachments.delete(d.threadKey,d.messageId,d.attachmentFbid),await p(t,i,r,l,s,a,u)}function m(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.dbPoll.chatJid,"BridgeNewPollHandler",function(e,n){return d(e,t,n)})}async function p(t,n,a,i,l,s,u){var d=n.latestSenderTimestampsMs,m=n.pollParticipantCount,p=n.pollStanzaId,h=(e||(e=o("I64"))).of_string(p),y=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.polls).getKeyRange(h));y==null&&await f(t,h,i,l,a);var C=await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_options_v2).getKeyRange(h)),b=new Map(n.pollOptions.entries().map(function(e){var t=e[0],n=e[1];return[o("MAWDbPoll").generateStableIdFromOptionHash(t,p).toString(),n]})),v=new Map;C.forEach(function(t){var n=(e||(e=o("I64"))).to_string(t.optionId);v.set(n,babelHelpers.extends({},v.get(n),{lsOption:t}))}),b.entries().forEach(function(e){var t=e[0],n=e[1];n.optionText!=null&&v.set(t,babelHelpers.extends({},v.get(t),{mawDbOption:n}))});var S=v.entries().toArray().sort(function(e,t){var n,o,a=e[0],i=e[1],l=i.lsOption,s=i.mawDbOption,u=t[0],c=t[1],d=c.lsOption,m=c.mawDbOption,p=r("nullthrows")((n=l==null?void 0:l.optionText)!=null?n:s==null?void 0:s.optionText),_=r("nullthrows")((o=d==null?void 0:d.optionText)!=null?o:m==null?void 0:m.optionText);return p.localeCompare(_)}),R=await Promise.all(S.map(async function(n,a){var i=n[0],l=n[1],u=l.lsOption,c=l.mawDbOption,p=(e||(e=o("I64"))).of_int32(a);if(u==null&&c==null)return null;var f=e.of_string(i);if(c==null){var g=r("nullthrows")(u),y=g.optionText;await t.poll_options_v2.upsert([h,f],babelHelpers.extends({},r("nullthrows")(u),{sortKeyCreationTimestamp:p}));var C=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(h,f,s));return{contactIds:[s],hasVoteFromCurrentUser:!0,numVotes:1,optionId:f,optionText:y,progressBarFilledPercentage:Math.floor(1/m*100),sortKeyCreationTimestamp:p,sortKeyVotingTimestamp:C!=null?C.timestampMs:(e||(e=o("I64"))).zero}}return _(t,h,f,r("nullthrows")(c.optionText),u,c,p,d,s,m)})).then(function(e){return e.filter(Boolean)}),L=R.some(function(e){return e.hasVoteFromCurrentUser}),E=o("MAWBridgePollUtils").sortPollXMAOptions(R).slice(0,c);await g(t,n,a,i,l,E,L,u)}async function _(t,n,a,i,l,s,u,c,d,m){var p=s.voteAuthors,_=Array.from(p).map(function(e){var t=c.get(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Missing latest sender timestamp for poll voter from dbPoll");return{contactId:o("MAWBridgePollUtils").getContactIdForAuthor(e),latestSenderTimestampMs:t}}),f=l!=null?await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(n,a)):[],g=f.find(function(t){return(e||(e=o("I64"))).equal(t.contactId,d)}),h=c.get(o("WAJids").AUTHOR_ME),y=g!=null&&(h==null||h<(e||(e=o("I64"))).to_float(g.timestampMs));await Promise.all(f.map(async function(r){(e||(e=o("I64"))).equal(r.contactId,d)&&y||await t.poll_votes_v2.delete(n,a,r.contactId)})),await Promise.all(_.map(async function(r){var i=r.contactId,l=r.latestSenderTimestampMs;await t.poll_votes_v2.put({contactId:i,optionId:a,pollId:n,timestampMs:(e||(e=o("I64"))).of_float(l)})}));var C=(e||(e=o("I64"))).of_float(Math.max.apply(Math,_.map(function(e){return e.latestSenderTimestampMs}).concat([0]))),b=y?(e||(e=o("I64"))).max(r("nullthrows")(g==null?void 0:g.timestampMs),C):C,v=_.length+(y?1:0),S={optionId:a,optionText:i,pollId:n,sortKeyCreationTimestamp:u,sortKeyVotingTimestamp:b,voteCount:e.of_int32(v)};l!=null?await t.poll_options_v2.upsert([n,a],S):await t.poll_options_v2.add(S);var R=_.map(function(e){return e.contactId});return y&&R.push(d),{contactIds:R,hasVoteFromCurrentUser:y||_.find(function(t){return(e||(e=o("I64"))).equal(t.contactId,d)})!=null,numVotes:v,optionId:a,optionText:i,progressBarFilledPercentage:Math.floor(v/m*100),sortKeyCreationTimestamp:u,sortKeyVotingTimestamp:b}}async function f(t,n,a,i,l){var s={authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),lastUpdateMessageEventType:u.ofNumber(r("LSGroupPollEventType").QUESTION_CREATION),lastUpdateMessageId:a,lastUpdateMessageTimestampMs:(e||(e=o("I64"))).of_float(i),pollId:n,pollStage:u.ofNumber(r("QuestionPollStage").VOTING),pollType:u.ofNumber(r("LSPollQuestionType").CHOOSE_MULTIPLE),threadKey:l};await t.polls.put(s)}async function g(t,n,a,i,l,d,m,p){var _=n.pollStanzaId,f=n.title;if(d.length===0){r("FBLogger")("messenger_web").mustfix("Items length for poll XMA should be greater than 0");return}var g=await o("ReQL").toArrayAsync(o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants,[]).getKeyRange(a),o("ReQL").fromTableAscending(t.contacts,["name","id","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"])).map(function(e){var t=e[0],n=e[1];return n}).filter(Boolean)),h=new Map(g.map(function(t){return[(e||(e=o("I64"))).to_string(t.id),t]})),y=d.map(function(t){var n=t.contactIds,r=t.optionId,a=t.optionText,i=t.progressBarFilledPercentage,l=n.reduce(function(t,n){var r,a,i=h.get((e||(e=o("I64"))).to_string(n));return t.contactUrlExpirations.push((i==null?void 0:i.profilePictureUrlExpirationTimestampMs)!=null?(e||(e=o("I64"))).to_string(i.profilePictureUrlExpirationTimestampMs):""),t.contactUrlFallbacks.push((r=i==null?void 0:i.profilePictureFallbackUrl)!=null?r:""),t.contactUrls.push((a=i==null?void 0:i.profilePictureUrl)!=null?a:""),(i==null?void 0:i.name)!=null&&t.contactNames.push(i.name),t},{contactNames:[],contactUrlExpirations:[],contactUrlFallbacks:[],contactUrls:[]}),s=l.contactNames,u=l.contactUrlExpirations,c=l.contactUrlFallbacks,d=l.contactUrls;return{listItemAccessibilityText:o("MAWBridgePollUtils").getListItemAccessibilityText(s,a).toString(),listItemContactUrlExpirationTimestampList:u.length>0?u.join(", "):void 0,listItemContactUrlFallbackList:c.length>0?c.join(", "):void 0,listItemContactUrlList:d.length>0?d.join(", "):void 0,listItemId:r,listItemProgressBarFilledPercentage:(e||(e=o("I64"))).of_int32(i),listItemTitleText:a,listItemTotalCount:e.of_int32(n.length)}}),C=(e||(e=o("I64"))).of_string(_),b=m?s._(/*BTDS*/"Change vote").toString():s._(/*BTDS*/"Vote").toString(),v={actionContentBlob:f,attachmentFbid:_,attachmentIndex:e.zero,ctaId:C,messageId:i,targetId:e.of_string(_),threadKey:a,title:b,type_:"xma_poll_details_card"},S={attachmentCta1Id:C,attachmentFbid:_,attachmentIndex:e.zero,cta1Title:b,cta1Type:"xma_poll_details_card",defaultActionEnableExtensions:!1,defaultCtaId:C,defaultCtaTitle:b,defaultCtaType:"xma_poll_details_card",faviconUrlExpirationTimestampMs:e.zero,messageId:i,threadKey:a},R={attachmentCta1Id:C,attachmentFbid:_,attachmentIndex:e.zero,attachmentType:(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:u.ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),collapsibleId:e.of_string(_),cta1Title:b,cta1Type:"xma_poll_details_card",defaultCtaId:C,defaultCtaTitle:b,defaultCtaType:"xma_poll_details_card",hasMedia:!1,hasXma:!0,isSharable:!1,listItemsDescriptionText:f,listItemsId:e.of_string(_),messageId:i,threadKey:a,timestampMs:e.of_float(l),transportKey:p!=null?p:"WhatsApp",xmaLayoutType:u.ofNumber(r("MNLSXMALayoutType").XCENTER),xmasTemplateType:u.ofNumber(r("MNLSXMATemplateType").GENERIC_SHARE)},L=n.pollOptions.values().filter(function(e){return e.optionText!=null}).toArray().length,E=L>c?s._(/*BTDS*/"_j{\"*\":\"{additional_option_count} more options\",\"_1\":\"{additional_option_count} more option\"}",[s._plural(L-c),s._param("additional_option_count",L-c)]).toString():void 0,k=babelHelpers.extends({},R,{listItemAccessibilityText1:y[0].listItemAccessibilityText,listItemAccessibilityText2:y.length>1?y[1].listItemAccessibilityText:void 0,listItemAccessibilityText3:y.length>2?y[2].listItemAccessibilityText:void 0,listItemContactUrlExpirationTimestampList1:y[0].listItemContactUrlExpirationTimestampList,listItemContactUrlExpirationTimestampList2:y.length>1?y[1].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlExpirationTimestampList3:y.length>2?y[2].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlFallbackList1:y[0].listItemContactUrlFallbackList,listItemContactUrlFallbackList2:y.length>1?y[1].listItemContactUrlFallbackList:void 0,listItemContactUrlFallbackList3:y.length>2?y[2].listItemContactUrlFallbackList:void 0,listItemContactUrlList1:y[0].listItemContactUrlList,listItemContactUrlList2:y.length>1?y[1].listItemContactUrlList:void 0,listItemContactUrlList3:y.length>2?y[2].listItemContactUrlList:void 0,listItemId1:y[0].listItemId,listItemId2:y.length>1?y[1].listItemId:void 0,listItemId3:y.length>2?y[2].listItemId:void 0,listItemProgressBarFilledPercentage1:y[0].listItemProgressBarFilledPercentage,listItemProgressBarFilledPercentage2:y.length>1?y[1].listItemProgressBarFilledPercentage:void 0,listItemProgressBarFilledPercentage3:y.length>2?y[2].listItemProgressBarFilledPercentage:void 0,listItemsSecondaryDescriptionText:E,listItemTitleText1:d[0].optionText,listItemTitleText2:d.length>1?d[1].optionText:void 0,listItemTitleText3:d.length>2?d[2].optionText:void 0,listItemTotalCount1:y[0].listItemTotalCount,listItemTotalCount2:y.length>1?y[1].listItemTotalCount:void 0,listItemTotalCount3:y.length>2?y[2].listItemTotalCount:void 0});await Promise.all([t.attachments.upsert([a,i,_],k),t.attachment_ctas.upsert([C],v),t.attachment_items.upsert([_,e.zero],S)])}l.POLL_OPTIONS_THRESHOLD=c,l.call=m}),226);
__d("MAWBridgeNewReceiverFetchInfoHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWBridgeSendAndReceive","MAWImageUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MessagingAttachmentType","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e){if(!o("MAWMpsGating").isMpsMessageRendering())return e;var t=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getReceiverFetchInfo",{receiverFetchId:e.receiverFetchId});return babelHelpers.extends({},e,t)}async function c(e,t,n){var r=await u(t),a=r.msgId,i=r.receiverFetchId,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(n,a)),s=m(r,n,l);await e.attachments.upsert([n,a,i],s)}function d(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"BridgeNewReceiverFetchInfoHandler",function(e,n){return c(e,t,n)})}function m(t,n,a){var i=t.accessibilitySummaryText,l=t.mimetype,u=t.msgId,c=t.previewHeight,d=t.previewUrl,m=t.previewUrlExpirationTimestampMs,_=t.previewWidth,f=t.ravenSettings,g=t.receiverFetchId,h=t.sortOrderMs,y=t.transportKey,C=t.type,b=p(C),v=o("MAWImageUtils").boundHeightWidth(c,_,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),S=v.height,R=v.width,L=d!=null?d:a==null?void 0:a.previewUrl,E=m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,k=o("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(L,E);return{accessibilitySummaryText:i,attachmentFbid:g,attachmentIndex:(e||(e=o("I64"))).zero,attachmentType:b,authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:(f==null?void 0:f.ephemeralMediaState)!=null?(e||(e=o("I64"))).of_int32(f.ephemeralMediaState):void 0,ephemeralMediaViewMode:(f==null?void 0:f.ephemeralMediaViewMode)!=null?(e||(e=o("I64"))).of_int32(f.ephemeralMediaViewMode):void 0,hasMedia:k,hasXma:!1,isSharable:!1,messageId:u,previewHeight:e.of_int32(S),previewUrl:d!=null?d:a==null?void 0:a.previewUrl,previewUrlExpirationTimestampMs:m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,previewUrlMimeType:l,previewWidth:e.of_int32(R),receiverFetchId:g,threadKey:n,timestampMs:e.of_float(h),transportKey:y!=null?y:"WhatsApp"}}function p(e){switch(e){case"sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER);default:throw r("FBLogger")("messenger_web_media").mustfixThrow("Unsupported type for MAWBridgeNewReceiverFetchInfoHandler")}}l.call=d,l.composeAttachment=m}),98);
__d("MAWBridgeNewXMAHandler",["MAWBridgeHandleReceiverFetchXMA","MAWBridgeXMAUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){var r=String(t.xmaId),a=t.msgId;if(a!=null){var i=t.targetType===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;if(i)return o("MAWBridgeHandleReceiverFetchXMA").call(e,t,n);var l=await o("MAWBridgeXMAUtils").getExistingAttachmentAndAttachmentCtas(e,n,a),s=l[0],u=l[1],c=await o("MAWBridgeXMAUtils").addAttachmentCtas(e,t,n,a,r,u),d=c.attachmentCta1Id,m=c.attachmentCta2Id,p=c.attachmentCta3Id,_=c.defaultCtaId,f=o("MAWBridgeXMAUtils").composeAttachmentXMA(t,n,r,a,d,m,p,_,"MAWBridgeNewXMAHandler");s!=null?await e.attachments.upsert([s.threadKey,s.messageId,s.attachmentFbid],f):await e.attachments.add(f)}}function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeNewXMAHandler",function(t,r){return e(t,n,r)})}function u(e,t){return s(e,t)}l.callWithoutWaitingForAnything=e,l.call=u}),98);
__d("MAWBridgeReactionUpsertHandler",["I64","LSAuthorityLevel","LSIntEnum","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l){return{actorId:(e||(e=o("I64"))).of_string(t),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),messageId:a,reaction:l,reactionCreationTimestampMs:o("MAWTimeUtils").toTimestamp(i),threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(i),transportKey:"WhatsApp"}}function c(t,n,r,a,i,l){return t.reactions.upsert([r,a,(e||(e=o("I64"))).of_string(n)],u(n,r,a,i,l))}function d(e,t,n,r,o,a){return c(e,t,n,r,o,a)}function m(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeReactionUpsertHandler",function(e,n){return c(e,t.actorId,n,t.messageId,t.ts,t.reaction)})}l.composeReaction=u,l.attachmentMutationsOptimisticHandler=d,l.call=m}),98);
__d("MAWQPLLogger",["QPLUserFlow","Random","cr:10049"],(function(t,n,r,o,a,i,l){"use strict";n("cr:10049")==null||n("cr:10049").overwriteSamplingRate();function e(e){return{addQPLAnnotations:function(n,o){r("QPLUserFlow").addAnnotations(e,o,{instanceKey:n})},markQPLCancel:function(n){r("QPLUserFlow").endCancel(e,{instanceKey:n})},markQPLFailure:function(n,o){var t;r("QPLUserFlow").endFailure(e,(t=o==null?void 0:o.name)!=null?t:"fail",{error:o,instanceKey:n})},markQPLFailureWithMsg:function(n,o){r("QPLUserFlow").endFailure(e,o,{instanceKey:n})},markQPLPoint:function(n,o,a){r("QPLUserFlow").addPoint(e,o,{debugInfo:a,instanceKey:n})},markQPLStart:function(){var t=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);return r("QPLUserFlow").start(e,{instanceKey:t}),t},markQPLSuccess:function(n){r("QPLUserFlow").endSuccess(e,{instanceKey:n})}}}l.default=e}),98);
__d("MAWDataSourceLogger",["I64","MAWQPLLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return s==null&&(s=r("MAWQPLLogger")(r("qpl")._(25303796,"1974"))),s}function c(t){var n=u().markQPLStart();return u().addQPLAnnotations(n,{string:{threadType:(e||(e=o("I64"))).to_string(t)}}),n}function d(t,n,r){u().markQPLPoint(t,"wait_act_thread_start","before fetching messages range from table"),u().addQPLAnnotations(t,{int:{version:1},string:{direction:n,thread_id:(e||(e=o("I64"))).to_string(r)}})}function m(e,t){u().markQPLFailureWithMsg(e,t)}function p(e){u().markQPLCancel(e)}function _(e){u().markQPLPoint(e,"wait_act_thread_end","before fetching messages range from table"),u().markQPLPoint(e,"load_more_msgs_start","load more messages from MAW DB")}function f(e){u().markQPLPoint(e,"load_messages_from_eb_start","load more messages from EB")}function g(e){u().markQPLPoint(e,"load_messages_from_eb_end","load more messages from EB")}function h(e){u().markQPLPoint(e,"load_messages_from_local_db_start")}function y(e){u().markQPLPoint(e,"load_messages_from_local_db_end")}function C(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_start")}function b(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_end")}function v(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_dispatch_download_state_updates_start")}function S(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_dispatch_download_state_updates_end")}function R(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_call_bridge_handlers_start")}function L(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_call_bridge_handlers_end")}function E(e,t){u().markQPLPoint(e,"load_more_msgs_end","Note: OLD SOLUTION DOES NOT FETCH messages. they are fetched in afterTransaction that we cannot control"),u().addQPLAnnotations(e,{bool:{hasMoreBefore:t}})}function k(e){u().markQPLSuccess(e)}function I(e,t){u().markQPLPoint(e,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t)}function T(e,t){u().markQPLFailure(e,t)}l.logLoadMoreMsgsStart=c,l.logLoadMoreMsgsThreadWaiting=d,l.logLoadMoreMsgsFailure=m,l.logLoadMoreMsgsCancel=p,l.logLoadMoreMsgsThreadReadyFetchMsgs=_,l.logLoadMessagesFromEBStart=f,l.logLoadMessagesFromEBEnd=g,l.logLoadMessagesFromLocalDBStart=h,l.logLoadMessagesFromLocalDBEnd=y,l.logInsertMessageResponseToLSDBStart=C,l.logInsertMessageResponseToLSDBEnd=b,l.logDispatchDownloadStateUpdatesStart=v,l.logDispatchDownloadStateUpdatesEnd=S,l.logCallBridgeHandlersStart=R,l.logCallBridgeHandlersEnd=L,l.logLoadMoreMsgsFetched=E,l.logLoadMoreMsgsSuccess=k,l.logLoadMoreMsgsRangeQuery=I,l.logLoadMoreMsgsRuntimeError=T}),98);
__d("MAWMessageIntegrityTruncateStatus",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadKey"],s,u=0,c=new Map;function d(t,n,r){var a,i=(a=c.get((s||(s=o("I64"))).to_float(t)))!=null?a:{},l=n.threadKey,u=babelHelpers.objectWithoutPropertiesLoose(n,e),d=babelHelpers.extends({},i,{lastUpsertedRange:babelHelpers.extends({},u,r,{maxTimestampMs:(s||(s=o("I64"))).to_float(n.maxTimestampMs),minTimestampMs:s.to_float(n.minTimestampMs)}),updateRangeTimestamp:Date.now()});c.set(s.to_float(t),d)}function m(e){var t,n=(t=c.get((s||(s=o("I64"))).to_float(e)))!=null?t:{},r=babelHelpers.extends({},n,{truncateTimestamp:n.truncateTimestamp==null?u:Date.now()});c.set((s||(s=o("I64"))).to_float(e),r)}function p(e){var t=c.get((s||(s=o("I64"))).to_float(e));return(t==null?void 0:t.truncateTimestamp)==null?null:t}l.setThreadLastUpsertedRange=d,l.setThreadThuncated=m,l.getThreadThuncateState=p}),98);
__d("MAWPutMessagesToDB",["MAWBridgeDeleteReactionHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeReactionUpsertHandler","MAWDataSourceLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,a){var i=n.editMsgHistory,l=n.expiringCountdown,s=n.medias,u=n.msgs,c=n.polls,d=n.quotedMsgs,m=n.reactions,p=n.receiverFetchInfoPayloads,_=n.xmas;a!=null&&o("MAWDataSourceLogger").logDispatchDownloadStateUpdatesStart(a),a!=null&&(o("MAWDataSourceLogger").logDispatchDownloadStateUpdatesEnd(a),o("MAWDataSourceLogger").logCallBridgeHandlersStart(a));var f=r("gkx")("17154");f&&await Promise.all(s.map(function(e){return o("MAWBridgeNewMediaHandler").call(t,e)})),d!=null&&d.length>0&&await o("MAWBridgeNewMsgHandler").bulkCall(t,d),await o("MAWBridgeNewMsgHandler").bulkCall(t,u),f||await Promise.all(s.map(function(e){return o("MAWBridgeNewMediaHandler").call(t,e)})),await Promise.all(_.map(function(e){return o("MAWBridgeNewXMAHandler").call(t,e)})),await Promise.all(p.map(function(e){return o("MAWBridgeNewReceiverFetchInfoHandler").call(t,e)})),await Promise.all(c.map(function(e){return o("MAWBridgeNewPollHandler").call(t,e)})),await o("MAWBridgeMsgsStartCountdownHandler").call(t,{msgs:l}),await Promise.all(m.map(function(e){return e.type==="delete"?o("MAWBridgeDeleteReactionHandler").call(t,e.reaction):o("MAWBridgeReactionUpsertHandler").call(t,e.reaction)})),await o("MAWBridgeEditMsgHistoryAddedHandler").call(e,t,i),a!=null&&o("MAWDataSourceLogger").logCallBridgeHandlersEnd(a)}function s(t,n,r){return t.runInTransaction(function(o){return e(t,o,n,r)},"readwrite","ui",void 0,i.id+":112")}function u(t,n){return t.runInTransaction(function(r){return e(t,r,babelHelpers.extends({},n,{expiringCountdown:[],hasMoreAfter:!1,hasMoreBefore:!1,noteReplyCountdown:[],xmaCountdown:[]}))},"readwrite","ui",void 0,i.id+":130")}l.insertMessageResponseToDBInExistingTransaction=e,l.insertMessageResponseIntoDatabase=s,l.insertMessageResponseIntoDatabaseByExternalId=u}),98);
__d("MAWSecureLocalDBFetch",["CometLruCache","FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","WAResultOrError","deepEquals","getErrorSafe","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=["count"],s,u=o("CometLruCache").create(20,2e3);async function c(t,n){var a=t.chatJid,i=t.config,l=t.count,s=t.direction,c=t.offsetMsg,p=t.timestampMs,_=u.get(a);if(_!=null){var f=_&&_.options,g=f.count,h=babelHelpers.objectWithoutPropertiesLoose(f,e);if(r("deepEquals")(h,{config:i,direction:s,offsetMsg:c,timestampMs:p})&&l<=g)try{return o("WAResultOrError").makeResult(babelHelpers.extends({},await _.result))}catch(e){}}return r("qex")._("18")?m(t,n):d(t,n)}async function d(e,t){var n=e.actionType,a=e.chatJid,i=e.config,l=e.count,c=e.direction,d=e.offsetMsg,m=e.timestampMs;try{var p,_=o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs",{actionType:n,chatJid:a,config:i,direction:c,externalId:d==null?void 0:d.externalId,includeOriginalMsg:(p=d==null?void 0:d.includeOriginalMsg)!=null?p:!1,msgId:(d==null?void 0:d.messageId)==null?null:o("MAWDbMsg").toMsgId(d.messageId),numMsgs:l,sortOrderMs:m!=null?(s||(s=o("I64"))).to_float(m):null},{timeoutMs:t==null?void 0:t.timeoutMs});u.set(a,{options:{config:i,count:l,direction:c,offsetMsg:d,timestampMs:m},result:_});var f=babelHelpers.extends({},await _);return o("WAResultOrError").makeResult(f)}catch(e){var g=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(g).mustfix("[MAWSecureLocalDBFetch] maw_load_msgs bridge call failed"),o("WAResultOrError").DEPRECATED_makeError("bridge_call_failed",g)}}async function m(e,t){var n=e.actionType,a=e.chatJid,i=e.config,l=e.count,c=e.direction,d=e.offsetMsg,m=e.timestampMs;try{var p,_=o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_range",{actionType:n,chatJid:a,config:i,direction:c,range:{includeLowerBoundMsg:(p=d==null?void 0:d.includeOriginalMsg)!=null?p:!1,lowerBoundExternalId:(d==null?void 0:d.externalId)==null?void 0:d.externalId,lowerBoundSortOrderMs:m!=null?(s||(s=o("I64"))).to_float(m):void 0,numMsgs:l}},{timeoutMs:t==null?void 0:t.timeoutMs});u.set(a,{options:{config:i,count:l,direction:c,offsetMsg:d,timestampMs:m},result:_});var f=babelHelpers.extends({},await _);return o("WAResultOrError").makeResult(f)}catch(e){var g=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(g).mustfix("[MAWSecureLocalDBFetch] maw_load_msgs bridge call failed"),o("WAResultOrError").DEPRECATED_makeError("bridge_call_failed",g)}}l.default=c}),98);
__d("MAWWasmFeatureSupport",["Promise","react","react-compiler-runtime","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useState,m=null;function p(){var t=o("react-compiler-runtime").c(2),r=d(m),a=r[0],i=r[1],l,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){(e||(e=n("Promise"))).all([o("wasm-feature-detect").bulkMemory(),o("wasm-feature-detect").bigInt(),o("wasm-feature-detect").referenceTypes()]).then(function(e){var t=e[0],n=e[1],r=e[2];i({bigInt:n,bulkMemory:t,referenceTypes:r}),m={bigInt:n,bulkMemory:t,referenceTypes:r}})},s=[i],t[0]=l,t[1]=s):(l=t[0],s=t[1]),c(l,s),a}l.useWasmFeatureSupport=p}),98);
__d("MDBCClientEvent",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THREAD_OPEN:1,CHAT_JOIN_SHEET_RENDERED:2,THREAD_JOIN:3,BROADCAST_BUTTON_RENDERED:4,RENDER_PUBLIC_BROADCAST_CHAT_NUX_QP:5,RENDER_PUBLIC_BROADCAST_CHAT_CREATION_SHEET:6,PUBLIC_BROADCAST_CHAT_CREATION_SHEET_RENDERED:7,THREAD_CREATE:8,SHARE_SHEET_RENDERED:9,COPY_LINK:10,EDIT_CHAT:11,SHARE_LINK:12,RENDER_THREAD_DETAIL:13,MUTE_CHAT:14,RENDER_CHAT_MEMBERS:15,SEEN_COUNT_RENDERED:16,SHARE_LINK_SENT:17,THREAD_SETTINGS_RENDERED:18,REPORT_MESSAGE_TO_META:19,REMOVE_MESSAGE:20,ADMIN_REMOVE_MESSAGE:21,CHAT_RENDERED_IN_MIB_INBOX:22,BLOCK_FROM_CHAT:23,DEMOTE_ADMIN_BUTTON_TAPPED:24,PROMOTE_ADMIN_FAIL_IMPRESSION:25,REMOVE_FROM_CHAT:26,MESSAGE_USER:27,VIEW_USER_PROFILE:28,ADMIN_LIMIT_REACHED_IMPRESSION:29,PROMOTE_ADMIN_BUTTON_TAPPED:30,USER_PROFILE_BOTTOMSHEET:31,BAN_FROM_CHAT_SUCCESS:32,BAN_FROM_CHAT_FAILURE:33,BAN_FROM_CHAT_INITIATION:34,NOTIFICATION_CONTROL_MUTE_SELECTED:35,NOTIFICATION_CONTROL_UNMUTE_SELECTED:36,JOIN_CHAT_CONFIRM:37,SHOW_ON_PROFILE_TOGGLE:38,SHOW_ON_PROFILE_TAPPED:39,LEAVE_CHAT:40,DELETE_CHAT:41,UNMUTE_CHAT:42,REPORTED_CONTENTS_RENDERED:43,INVITE_BUTTON_TAPPED:44,VIEW_ALL_MEMBERS:45,OPEN_INVITE_LINK_VIEW:46,REPORT_CHAT_TO_FACEBOOK:47,DISMISS_BUTTON_TAPPED:48,JOIN_CHAT_SHEET_RENDERED:49,MESSAGE_SEND:50,PUSH_NOTIFICATION_MESSAGE_RECEIVED_TAPPED:51,CREATE_CHANNEL_SCREEN_RENDERED:52,CHANGE_IMAGE_TAPPED:53,JOIN_APPROVAL_TOGGLE:54,COPY_LINK_TAPPED:55,SEARCH_BAR_INPUT_FOCUS:56,INVITE_SCREEN_RENDERED:57,DONE_BUTTON_TAPPED:58,SEND_BUTTON_TAPPED:59,SHARE_TO_FEED_SKIPPED:60,SHARE_TO_FEED_SCREEN_RENDERED:61,POST_TEXT_INPUT:62,SHARE_TO_FEED_BUTTON_TAPPED:63,NAME_TEXT_INPUT:64,EDIT_CHAT_SUCCESS:65,EDIT_CHAT_FAILURE:66,REQUIRE_APPROVAL_TO_JOIN_DISABLED:67,REQUIRE_APPROVAL_TO_JOIN_ENABLED:68,MEMBER_REQUEST_JOIN_APPROVED:69,MEMBER_REQUEST_JOIN_DENIED:70,VIEW_MEMBER_REQUESTS:71,SHARE_TO_FACEBOOK_BOTTOMSHEET_VIEWED:72,CHAT_SHARED_TO_FACEBOOK:73,EDIT_CHAT_DESCRIPTION:74,CHANGE_THREAD_PHOTO:75,INSTALL_MESSENGER_UPSELL_VIEWED:76,DOWNLOAD_MESSENGER_BUTTON_CLICKED:77,BLOCKED_USER_WARNING_RENDERED:78,BLOCKED_USER_WARNING_CONFIRM:79,NOTIF_IMPRESSION:80,NOTIF_CLICKED:81,FIRST_CREATE_BOTTOMSHEET_RENDERED:82,THREAD_CREATE_ATTEMPT:83,PUBLIC_CHAT_LINK_ATTACHMENT_RENDERED:84,PUBLIC_CHAT_LINK_ATTACHMENT_TAPPED:85,NOTIFICATION_CONTROL_ALL_SELECTED:86,NOTIFICATION_CONTROL_MENTIONS_AND_REPLIES_SELECTED:87,NOTIFICATION_CONTROL_NONE_SELECTED:88,NOTIFICATION_CONTROL_RENDERED:89,UNDO_BUTTON_TAPPED:90,INVITE_SENT_SUCCESS:91,INVITE_SENT_FAILED:92,PRIMARY_PROFILE_QP_RENDERED:93,NOT_NOW_TAPPED:94,CREATE_CHANNEL_TAPPED:95,VIEW_PINNED_CHANNELS:96,PROFILE_ABOUT_CHANNEL_SECTION_RENDERED:97,DIRECT_INVITE_SENT_SUCCESS:98,DIRECT_INVITE_SENT_FAIL:99,DIRECT_INVITE_BULK_SENT_SUCCESS:100,DIRECT_INVITE_BULK_SENT_FAIL:101,DIRECT_INVITE_NOTIFICATION_RENDERED:102,DIRECT_INVITE_SHEET_RENDERED:103,INVITE_ACCEPT:104,INVITE_DECLINE:105,CHAT_INVITE_SHEET_RENDERED:106,PAUSE_CHANNEL:107,RESUME_CHANNEL:108,THREAD_CREATE_SUCCESS:109,THREAD_CREATE_ERROR:110,NOTIFICATION_RENDERING_REQUEST_SUCCESS:111,NOTIFICATION_RECALLED:112,NOTIFICATION_DISMISS:113,NOTIFICATION_CLICK:114,FEATURED_UNIT_PROFILE_QP_RENDERED:115,PIN_CARD_TAPPED:116,PIN_FEATURED_CARD_SUCCESS:117,PIN_FEATURED_CARD_FAILURE:118,CHANNELS_FEATURED_UNIT_RENDERED:119,CHANNELS_FEATURED_UNIT_SEE_ALL_TAPPED:120,RENDER_CHAT_INVITE_SHEET:121,RENDER_INVITE_PRESET_LIST:122,INVITE_PRESET_LIST_RENDERED:123,CREATE_POST_BUTTON_TAPPED:124,RENDER_CHANNEL_PAUSE_CONFIRMATION_DIALOG:125,RENDER_CHANNEL_RESUME_CONFIRMATION_DIALOG:126,DISMISS_PAUSE_CHANNEL_DIALOG:127,DISMISS_RESUME_CHANNEL_DIALOG:128,CANCEL_RESUME_CHANNEL:129,CANCEL_PAUSE_CHANNEL:130,DEEPLINK_LANDING_PAGE_RENDERED:131,DIRECT_INVITE_SHEET_SKIPPED:132,CREATE_POST_BUTTON:133,CYSC_QP_CARD_IMPRESSION:134,SHOW_ON_PROFILE_RENDERED:135,THREAD_PREVIEW_OPEN:136,NON_MEMBER_COMPOSER_SHOWN:137,REACTIONS_UNEXPECTED_DROP:138,REACTIONS_MUTATION_SUCCESS:139,REACTIONS_MUTATION_FAILURE:140,REACTIONS_TRAY_EMPTY_ERROR:141,SET_CHAT_CREATION_PHOTO:142,SHARE_LINK_TO_FB_CONFIRM:143,BIIM_INBOX_BROADCAST_CREATE_BUTTON_RENDERED:144,BIIM_INBOX_BROADCAST_CREATE_BUTTON_TAPPED:145,PUBLIC_BROADCAST_CHAT_NUX_QP_RENDERED:146,PUBLIC_BROADCAST_CHAT_NUX_QP_TAPPED:147,PIN_FEATURED_CARD_TOGGLE:148,PIN_TO_INBOX_SUCCESS:149,PIN_TO_INBOX_FAILURE:150,UNPIN_FROM_INBOX_SUCCESS:151,UNPIN_FROM_INBOX_FAILURE:152,PINNED_THREAD_RENDERED:153,CHANNELS_TAB_ITEM_RENDERED:154,CHANNELS_TAB_ITEM_TAPPED:155,PROFILE_CHANNELS_TAB_RENDERED:156,PROMPT_ACCOUNT_SWITCH_QP_RENDERED:157,PROMPT_ACCOUNT_SWITCH_QP_CREATE_CHANNEL_TAPPED:158,PROMPT_ACCOUNT_SWITCH_QP_DISMISSED:159,CYSC_NEWSFEED_QP_RENDERED:160,CREATE_CHANNEL_OPTION_RENDERED:161,CHANNELS_LIST_RENDERED:162,CHANNELS_LIST_NULL_STATE_RENDERED:163,PUBLIC_BROADCAST_CHANNEL_APPLUS_QP:164,BROADCAST_CHANNEL_TAPPED:165,MESSENGER_SEARCH_PUBLIC_CHANNEL_RENDERED:166,PROFILE_INTRO_CARD_CHANNEL_RENDERED:167,DIRECT_INVITE_JEWEL_NOTIFICATION_CHANNEL_RENDERED:168,PERSISTENT_INVITE_CHANNEL_RENDERED:169,KEEP_EDITING_BUTTON_TAPPED:170,THREAD_TOMBSTONE_IMPRESSION:171,VIEW_PAGE_STATUS_PRESSED:172,FIRST_CREATE_FULLSCREEN_NUX_RENDERED:173,FIRST_CREATE_FULLSCREEN_NUX_TAPPED:174,DIRECTORY_SEARCH_NULLSTATE_IMPRESSION:175,DIRECTORY_PEOPLE_TAB_IMPRESSION:176,DIRECTORY_OPEN:177,DIRECTORY_FEED_QP_IMPRESSION:178,DIRECTORY_RECOMMENDATION_LIST_IMPRESSION:179,SHARE_BUTTON_ON_THREAD_HEADER:180,DIRECTORY_FEED_SEE_ALL_TAPPED:181,CHANNELS_WAITLIST_RENDERED:182,REQUEST_ACCESS_ATTEMPT:183,LEARN_MORE_TAPPED:184,REQUEST_ACCESS_SUCCESS:185,CHANNELS_SURVERY_RENDERED:186,SUBMIT_SURVEY_ATTEMPT:187,SUBMIT_SURVEY_SUCCESS:188,ALREADY_REGISTERED_VIEW_RENDERED:189,NOT_ELIGIBLE_VIEW_RENDERED:190,LOGGED_OUT_VIEW_RENDERED:191,DISCOVER_CHANNELS_TAPPED:192,CHANNELS_WAITLIST_ACCOUNT_SWITCH_RENDERED:193,WAITLIST_ACCOUNT_SWITCH_ATTEMPT:194,ALREADY_HAS_ACCESS_VIEW_RENDERED:195,MBS_CHANNELS_TAB_IMPRESSION:196,MBS_CHANNELS_TAB_TAPPED:197,MBS_CHANNELS_ENTRYPOINT_BUTTON_IMPRESSION:198,MBS_CHANNELS_ENTRYPOINT_BUTTON_TAPPED:199,WEB_SUBSCRIBE_TO_THREAD_CREATION_STATUS_TABLE:200,WEB_THREAD_CREATION_STATUS_PENDING:201,WEB_SUBSCRIBE_TO_THREADS_TABLE_DURING_CREATE:202,WEB_THREAD_CREATED_WAITING_FOR_THREAD_LINK:203,JOIN_CHAT_NUX_CONFIRM:204,JOIN_CHAT_NUX_CANCEL:205,JOIN_CHAT_NUX_RENDERED:206,MUTE_ON_LEAVE_DIALOG_RENDERED:207,DIRECTORY_FEED_QP_PREVIEW_TAPPED:208,INVITED_AND_DIRECTORY_SCREEN_IMPRESSION:209,INVITED_CHANNELS_SCREEN_IMPRESSION:210,INVITED_AND_DIRECTORY_SCREEN_TAP_SEE_ALL:211,PROMPT_ACCOUNT_SWITCH_QP_ACCOUNT_SWITCH_STARTED:212,PROMPT_ACCOUNT_SWITCH_QP_ACCOUNT_SWITCH_COMPLETED:213,PROMPT_ACCOUNT_SWITCH_QP_CREATION_FLOW_STARTED:214,SHARE_TO_STORY_TAPPED:215,CHANNEL_STICKER_RENDERED:216,BUMP_THREAD_TO_INBOX_TAPPED:217,UNBUMP_THREAD_FROM_INBOX_TAPPED:218,DIRECTORY_FEED_QP_DISMISS_BUTTON_TAPPED:219,MBS_CHANNELS_TAB_WITH_BADGE_IMPRESSION:220,MBS_CHANNELS_TAB_WITH_BADGE_TAPPED:221,EARLY_ACCESS_AWARENESS_SCREEN_IMPRESSION:222,EARLY_ACCESS_AWARENESS_BUTTON_CLICK:223,SHARE_MESSAGE_TO_STORY_TAPPED:224,CHANNEL_MESSAGE_STICKER_RENDERED:225,SHARE_CHANNEL_TO_STORY_BOTTOMSHEET_RENDERED:226,EARLY_ACCESS_BROADCAST_CHANNEL_TOGGLE_RENDERED:227,EARLY_ACCESS_BROADCAST_CHANNEL_TOGGLE_CLICKED:228,EARLY_ACCESS_BROADCAST_CHANNEL_TIME_SETTING_CLICKED:229,EARLY_ACCESS_BROADCAST_CHANNEL_MESSAGE_EDITED:230,EARLY_ACCESS_BROADCAST_CHANNEL_LEARN_MORE_CLICKED:231,FORWARDED_MESSAGE_CHANNEL_CLICK:232,MESSAGE_FORWARD_CLICK:233,VIEW_PINNED_MESSAGES:234,PIN_MESSAGE:235,UNPIN_MESSAGE:236,HIGHLIGHTS_TAB_REACTION_CONTAINER:237,HIGHLIGHTS_TAB_REACTION_PILL:238,SHARE_TO_CHANNELS_ENTRY_POINT_RENDERED:239,SHARE_TO_CHANNELS_ENTRY_POINT_TAPPED:240,SHARE_TO_CHANNELS_PAGE_IMPRESSION:241,SHARE_TO_CHANNELS_CHANNEL_TAPPTED:242,SHARE_TO_CHANNELS_DEFAULT_TOGGLE_CLICKED:243,SHARE_TO_CHANNELS_SHARING_UNAVAILABLE:244,JOIN_TOAST_UNDO_TAPPED:245,MEMBERSHIP_MILESTONE_SCREEN_IMPRESSION:246,MEMBERSHIP_MILESTONE_IMAGE_CARD_TAPPED:247,MEMBERSHIP_MILESTONE_SEND_BUTTON_TAPPED:248,DM_VIEW_CHANNEL_BUTTON:249,MBS_CONTENT_CHANNELS_NULL_STATE_BUTTON_TAPPED:250,MBS_CONTENT_CHANNELS_NULL_STATE_BUTTON_IMPRESSION:251,MBS_CONTENT_CHANNELS_LIST_CHANNEL_TAPPED:252,CHANNELS_GUTTER_UNIT_RENDERED:253,SHARE_POST_TO_BC_EDUCATION_BOTTOMSHEET_IMPRESSION:254,TURN_ON_TAPPED:255,SHARE_POST_TO_BC_SCREEN_IMPRESSION:256,MBS_CONTENT_CHANNELS_NULL_STATE_COMPONENT_IMPRESSION:257,ENGAGEMENT_REMINDER_SCREEN_IMPRESSION:258,ENGAGEMENT_REMINDER_ADD_ATTACHMENT_TAPPED:259,ENGAGEMENT_REMINDER_SEND_BUTTON_TAPPED:260,PUBLIC_BROADCAST_CHANNEL_NUX_CAROUSEL_SLIDE_RENDERED:261,ABOUT_CHANNEL_TAP:262,ABOUT_CHANNEL_VIEW_PAGE_TAP:263,ABOUT_CHANNEL_CLOSE:264,TOP_FAN_PERKS_SETTINGS_BROADCAST_CHANNEL_VIEW_IMPRESSION:265,TOP_FAN_PERKS_SETTINGS_BROADCAST_CHANNEL_VIEW_BUTTON_CLICK:266,BROADCAST_CHANNELS_LEARN_MORE_IMPRESSION:267,BROADCAST_CHANNELS_LEARN_MORE_CONFIRM_BUTTON_CLICK:268,SHARE_TO_STORY_MSGR_TO_FB_DEEPLINK_HANDLED:269,UNJOINED_THREAD_ITEM_TAPPED:270,CONTENT_CHAINING_BUTTON_IMPRESSION:271,CONTENT_CHAINING_BUTTON_CLICKED:272,PIN_POST_TOGGLED_ON:273,PIN_POST_TOGGLED_OFF:274,CREATE_OR_MESSAGE_BOTTOMSHEET_IMPRESSION:275,BIIM_PERSONAL_INBOX_TOGGLE:276,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_DIALOG_IMPRESSION:277,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_DECLINED:278,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_APPROVED_ALWAYS:279,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_APPROVED_ONCE:280,UNJOINED_THREAD_HEADER_TAP:281,CONTENT_CHAINING_SCREEN_IMPRESSION:282,CONTENT_CHAINING_POST_CELL_IMPRESSION:283,CONTENT_CHAINING_POST_CELL_CLICKED:284,CONTENT_CHAINING_BUTTON_CELL_IMPRESSION:285,CONTENT_CHAINING_BUTTON_CELL_CLICKED:286,SHARE_TO_CHANNELS_SHARESHEET_ENTRY_POINT_IMPRESSION:287,SHARE_TO_CHANNELS_SHARESHEET_ENTRY_POINT_TAPPED:288,SHARE_TO_CHANNELS_SHARESHEET_CHANNEL_TAPPED:289,SHARE_TO_CHANNELS_SHARESHEET_SEND_BUTTON_TAPPED:290,CREATE_OR_MESSAGE_BOTTOMSHEET_LOADING_SCREEN_IMPRESSION:291,PIN_CHANNEL_TO_MESSENGER_TOGGLE_TAPPED:292,SHARE_TO_CHANNELS_SHARESHEET_SEND_SUCCESS:293,SHARE_TO_CHANNELS_SHARESHEET_SEND_FAILURE:294,SHARE_TO_CHANNELS_SHARESHEET_CONFIRMATION_TOAST_IMPRESSION:295,CONTENT_CHAINING_LAUNCH_FAILURE:296,RENDER_PROMPT_CREATION_PILL:297,RENDER_DAILY_PROMPT_CREATOR_NUX_SHEET:298,DAILY_PROMPT_CREATOR_NUX_SHEET_RENDERED:299,DISMISS_DAILY_PROMPT_CREATOR_NUX_SHEET:300,DAILY_PROMPT_CREATION_SHEET_RENDERED:301,RENDER_DAILY_PROMPT_CREATION_SHEET:302,CANCEL_DAILY_PROMPT_CREATION_SHEET:303,START_DAILY_PROMPT:304,RENDER_DAILY_PROMPT_RESPONSES_SHEET:305,DAILY_PROMPT_RESPONSES_SHEET_RENDERED:306,RENDER_DAILY_PROMPT_RESPONSE_REPLY_SHEET:307,REPLY_DAILY_PROMPT_RESPONSE:308,RENDER_DELETE_DAILY_PROMPT_RESPONSE_DIALOG:309,DELETE_DAILY_PROMPT_RESPONSE:310,DISMISS_DELETE_DAILY_PROMPT_RESPONSE:311,REPORT_DAILY_PROMPT_RESPONSE:312,DAILY_PROMPT_RESPONSE_REACT:313,DAILY_PROMPT_RESPONSE_CREATION_SHEET_RENDERED:314,CREATE_DAILY_PROMPT_RESPONSE:315,DELETE_DAILY_PROMPT_DIALOG_RENDERED:316,DELETE_DAILY_PROMPT:317,CANCEL_DELETE_DAILY_PROMPT:318,DAILY_PROMPT_SHARE_SHEET_RENDERED:319,COLLECT_FEEDBACK_SCREEN_IMPRESSION:320,COLLECT_FEEDBACK_POST_CARD_TAPPED:321,COLLECT_FEEDBACK_NEW_QUESTION_BUTTON_TAPPED:322,COLLECT_FEEDBACK_SEND_BUTTON_TAPPED:323,REPORT_DAILY_PROMPT_DIALOG_RENDERED:324,SHARE_TO_CHANNELS_PAGE_SAVE_TAPPED:325,COLLECT_FEEDBACK_SECTION_TOGGLED:326,SEND_A_MESSAGE_SECTION_TOGGLED:327,PERSONAL_INBOX_OPT_IN_ENTRY_POINT_RENDERED:328,PERSONAL_INBOX_OPT_IN:329,PERSONAL_INBOX_OPT_IN_ENTRY_POINT_DISMISSED:330,PERSONAL_INBOX_OPT_OUT_AND_VIEW_AS_MEMBER:331,CHANNEL_INSIGHTS:332,FIRST_MESSAGE_SCREEN_IMPRESSION:333,FIRST_MESSAGE_SCREEN_SKIP_BUTTON_TAPPED:334,FIRST_MESSAGE_SCREEN_SEND_BUTTON_TAPPED:335,FIRST_MESSAGE_SCREEN_SUGGESTION_HSCROLL:336,FIRST_MESSAGE_SCREEN_SUGGESTION_TAPPED:337,FIRST_MESSAGE_SCREEN_MESSAGE_EDITED:338,CHANNEL_INSIGHTS_HOME_IMPRESSION:339,CHANNEL_INSIGHTS_INTERACTION_HEADER:340,CHANNEL_INSIGHTS_INTERACTION_BREAKDOWN:341,PROMPT_CREATION_COMPOSER_TOOLTIP_IMPRESSION:342,MILESTONE_NOTIFICATION_BOTTOMSHEET_RENDERED:343,MILESTONE_NOTIFICATION_BOTTOMSHEET_BUTTON_TAPPED:344,INBOX_SNIPPET_RENDERED:345,INBOX_SNIPPET_ROW_TAPPED:346,NOTIFICATION_SETTING_BOTTOM_SHEET_SHOWN:347,NOTIFICATION_SETTING_BOTTOM_SHEET_NOTIFICATION_SETTING_TAPPED:348,NOTIFICATION_SETTING_BOTTOM_SHEET_DISMISSED:349,NOTIFICATION_SETTING_BOTTOM_SHEET_NOTIFICATION_TOGGLE_CHANGED:350,BEST_PRACTICES_PAGE_ACTION_TAPPED:351,BEST_PRACTICES_PAGE_RENDERED:352,PAID_PARTNERHIP_DRAWER_OPTION_TAPPED:353,PAID_PARTNERHIP_TOGGLE_UPDATED:354,FANDOM_CHANNEL_ENTRYPOINT_CLICKED:355,PRODASH_NEXT_STEP_TIP_TAPPED:356,FANDOM_INTEGRATION_PILLS_RENDERED:357,FANDOM_INTEGRATION_PILLS_CLICKED:358,CONVERSATION_STARTER_PILLS_CLICKED:359,CONVERSATION_STARTER_PILLS_RENDERED:362,CHANNEL_POLLS_RENDERED:363,CHANNEL_POLLS_OPTION_SELECTED:365,DAILY_PROMPT_CREATION_SUGGESTION_TAPPED:366,FANDOM_CHANNEL_ENTRYPOINT_IMPRESSION:367,ATS_SHORTCUT_ICON_RENDERED:368}),l=e;i.default=l}),66);
__d("MWBroadcastChannelLoggingShapes",[],(function(t,n,r,o,a,i){"use strict";var e={action:2,event:191,parentSurface:11,source:105,surface:73},l={action:1,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:95,parentSurface:7,source:8,surface:4},s={action:2,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:161,parentSurface:7,source:8,surface:4},u={action:1,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:95,parentSurface:11,source:8,surface:58},c=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),d=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:profile_from_mbs"}}),m=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:fandom_create_channel_email"}}),p={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:162,parentSurface:21,source:90,surface:59},_={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"},event:163,parentSurface:21,source:90,surface:59},f={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:161,parentSurface:21,source:90,surface:59},g=babelHelpers.extends({},f,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),h={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:164,parentSurface:11,source:92,surface:65},y={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:164,parentSurface:21,source:92,surface:66},C={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:161,parentSurface:11,source:92,surface:65},b={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:161,parentSurface:21,source:92,surface:66},v={action:1,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:95,parentSurface:11,source:8,surface:65},S={action:1,clientExtras:{entry_point:"public_chats:profile_qp"},event:95,parentSurface:21,source:8,surface:66},R={action:1,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:95,parentSurface:11,source:88,surface:64},L={action:1,clientExtras:{entry_point:"public_chats:channel_creation_qp"},event:95,parentSurface:11,source:67,surface:27},E={action:1,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:95,parentSurface:11,source:88,surface:69},k={action:1,clientExtras:{entry_point:"public_chats:channels_gutter"},event:95,parentSurface:11,source:8,surface:91},I={action:2,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:161,parentSurface:11,source:88,surface:64},T={action:2,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:161,parentSurface:11,source:88,surface:69},D={action:1,event:147,parentSurface:4,source:81,surface:51},x={action:1,event:165,parentSurface:21,source:93,surface:58},$={action:1,event:148,parentSurface:11,source:89,surface:21},P={action:2,event:7,parentSurface:17,source:82,surface:41},N={action:2,event:146,parentSurface:4,source:81,surface:51},M={action:2,event:261,parentSurface:4,source:81,surface:51},w={action:1,event:53,parentSurface:4,source:81,surface:51},A={action:1,event:8,parentSurface:17,source:8,surface:41},F={action:1,event:234,parentSurface:8,source:27,surface:16},O={action:1,event:234,parentSurface:7,source:62,surface:7},B={action:1,event:235,parentSurface:7,source:62,surface:7},W={action:1,event:236,parentSurface:7,source:62,surface:7},q={action:2,event:239,parentSurface:11,source:147,surface:87},U={action:1,event:240,parentSurface:11,source:147,surface:87},V={action:2,event:241,parentSurface:11,source:147,surface:87},H={action:1,event:242,parentSurface:11,source:147,surface:87},G={action:1,event:243,parentSurface:11,source:147,surface:87};i.CREATOR_WAITLIST_LOGGED_OUT_VIEW_RENDERED=e,i.CREATE_CHANNEL_TAPPED_FULL_PAGE_SHAPE=l,i.CREATE_CHANNEL_OPTION_RENDERED_FULL_PAGE_SHAPE=s,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_SHAPE=u,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_NULL_STATE_SHAPE=c,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_MBS_SHAPE=d,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_FCC_EMAIL_SHAPE=m,i.CHANNELS_LIST_RENDERED_SHAPE=p,i.CHANNELS_LIST_NULL_STATE_RENDERED_SHAPE=_,i.CREATE_CHANNEL_OPTION_CHANNELS_TAB_RENDERED_SHAPE=f,i.CREATE_CHANNEL_OPTION_CHANNELS_TAB_NULL_STATE_RENDERED_SHAPE=g,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_RENDERED_SHAPE=h,i.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_RENDERED_SHAPE=y,i.CREATE_CHANNEL_OPTION_NEWSFEED_QP_RENDERED_SHAPE=C,i.CREATE_CHANNEL_OPTION_PROFILE_PAGE_QP_RENDERED_SHAPE=b,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_TAP_SHAPE=v,i.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_TAP_SHAPE=S,i.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_TAP_SHAPE=R,i.CREATE_BROADCAST_CHANNEL_JEWEL_QP_TAP_SHAPE=L,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_TAP_SHAPE=E,i.CREATE_BROADCAST_CHANNEL_FROM_GUTTER_TAP_SHAPE=k,i.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_RENDERED_SHAPE=I,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_RENDERED_SHAPE=T,i.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_BUTTON_TAP_SHAPE=D,i.APPLUS_TAP_BROADCAST_CHANNEL_IN_CHANNELS_TAB_SHAPE=x,i.APPLUS_TAP_PIN_TO_FEATURE_IN_CREATION_FORM=$,i.PUBLIC_BROADCAST_CHAT_CREATION_SHEET_RENDERED_SHAPE=P,i.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_RENDERED_SHAPE=N,i.PUBLIC_BROADCAST_CHANNEL_NUX_CAROUSEL_SLIDE_RENDERED=M,i.BROADCAST_CHANNEL_CHANGE_IMAGE_TAP_SHAPE=w,i.THREAD_CREATE_TAP_SHAPE=A,i.VIEW_PINNED_MESSAGES_FROM_THREAD_DETAIL=F,i.VIEW_PINNED_MESSAGES_FROM_THREAD_VIEW_BANNER=O,i.PIN_MESSAGE=B,i.UNPIN_MESSAGE=W,i.SHARE_TO_CHANNELS_ENTRY_POINT_RENDERED=q,i.SHARE_TO_CHANNELS_ENTRY_POINT_TAPPED=U,i.SHARE_TO_CHANNELS_PAGE_IMPRESSION=V,i.SHARE_TO_CHANNELS_CHANNEL_TAPPED=H,i.SHARE_TO_CHANNELS_DEFAULT_TOGGLE_CLICKED=G}),66);
__d("MWLogBroadcastChannelFalcoEvent",["I64","emptyFunction","requireDeferred","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").__setRef("MWLogBroadcastChannelFalcoEvent"),u=new Set([161,119]),c=300*1e3,d=null,m=null;function p(e){return e.current?r("emptyFunction"):(e.current=!0,function(e){return _(e)})}function _(t){var n=t.action,a=n===void 0?1:n,i=t.clientExtras,l=t.event,p=t.parentSurface,_=p===void 0?3:p,f=t.source,g=t.surface,h=t.threadFbid,y=t.recipientId;s.onReady(function(t){var n=Date.now();(d==null||m!=null&&n-m>c||u.has(l))&&(d=r("uuidv4")()),m=n,t.log(function(){return{action:a,action_name:a,event:l,event_name:l,extra:i,parent_surface:_,parent_surface_name:_,recipient_id:y,session_id:d,source:f,source_name:f,surface:g,surface_name:g,thread_id:h!=null?(e||(e=o("I64"))).to_string(h):void 0}})})}l.useLogBroadcastChannelFalcoEventWithRef=p,l.logBroadcastChannelFalcoEvent=_}),98);
__d("MWPConversationSearchLogger",["I64","LSMessagingThreadTypeUtil","LsMessageSearchEndFalcoEvent","LsMessageSearchMsgImpressionFalcoEvent","LsMessageSearchMsgResultChosenFalcoEvent","LsMessageSearchSearchClickedFalcoEvent","LsMessageSearchStartFalcoEvent","LsMessageSearchThreadImpressionFalcoEvent","LsMessageSearchThreadListClickFalcoEvent","coerceMessagingThreadTypeToLSThreadType","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=void 0;function c(e,t,n){var o=e?u!=null?u:d():r("uuidv4")(),a={instanceId:o,threadKey:t,threadType:n,universalSearchInstanceId:e?o:void 0};return s=a,a}function d(){var e=r("uuidv4")();return u=e,e}function m(){var e=d();r("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:2,message_search:{instance_id:e,surface_name:0,universal_search_instance_id:e}}})}function p(t,n){var a=u;if(a!=null){var i=t.threadKey,l=t.threadType;c(!0,i,l),r("LsMessageSearchThreadListClickFalcoEvent").log(function(){var i;return{message_search:{instance_id:a,msg_match_cnt:(e||(e=o("I64"))).to_string((i=t.matchCount)!=null?i:(e||(e=o("I64"))).zero),secure_msg_match_cnt:n!=null?n.toString():null,universal_search_instance_id:a},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(l)}}})}}function _(t,n){var a=u;if(a!=null){var i=t.threadType;r("LsMessageSearchThreadImpressionFalcoEvent").log(function(){var l;return{message_search:{instance_id:a,msg_match_cnt:(e||(e=o("I64"))).to_string((l=t.matchCount)!=null?l:(e||(e=o("I64"))).zero),secure_msg_match_cnt:n!=null?n.toString():null,surface_name:0,universal_search_instance_id:a},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(i)}}})}}function f(){var e=s;e!=null&&(r("LsMessageSearchEndFalcoEvent").log(function(){return{end_action:0,message_search:{instance_id:e.instanceId,universal_search_instance_id:e.universalSearchInstanceId}}}),s=void 0)}function g(e,t){f();var n=c(!1,e,t),a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);r("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:0,is_fts:a,message_search:{instance_id:n.instanceId,surface_name:1},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(t)}}})}function h(){var e=s;e!=null&&r("LsMessageSearchSearchClickedFalcoEvent").log(function(){return{message_search:{instance_id:e.instanceId,universal_search_instance_id:e.universalSearchInstanceId},thread:{type:e.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(e.threadType):void 0}}})}function y(e){if((e==null?void 0:e.threadType)!=null)return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)?1:0}function C(t,n,a){var i=s;i!=null&&r("LsMessageSearchMsgResultChosenFalcoEvent").log(function(){return{click_surface_name:1,message:{message_type:y(a),sent_time:(a==null?void 0:a.messageTimestampMs)!=null?(e||(e=o("I64"))).to_float(a.messageTimestampMs):void 0},message_search:{instance_id:i.instanceId,universal_search_instance_id:i.universalSearchInstanceId},position:n.toString(),prev_or_next:t,thread:{type:i.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(i.threadType):void 0}}})}function b(t){var n=s;n!=null&&r("LsMessageSearchMsgImpressionFalcoEvent").log(function(){return{message:{message_type:y(t),sent_time:(t==null?void 0:t.messageTimestampMs)!=null?(e||(e=o("I64"))).to_float(t.messageTimestampMs):void 0},message_search:{instance_id:n.instanceId,surface_name:5,universal_search_instance_id:n.universalSearchInstanceId},thread:{type:n.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(n.threadType):void 0}}})}var v={logMessageSearchEnd:f,logMessageSearchMsgImpression:b,logMessageSearchMsgResultChosen:C,logMessageSearchSearchClicked:h,logMessageSearchStart:g,logUniversalMessageSearch:m,logUniversalMessageSearchThreadClicked:p,logUniversalMessageSearchThreadImpression:_};l.default=v}),98);
__d("MpsMessageToLoadResponse",["FBLogger","MpsMessageToBridge","MpsMessageToBridgeWrapper","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=[],i=[],l=[],u=[],c=[],d=[],m=[],p=[],_=[],f=0,g=new Set,h=function(){var t,n=(t=o("MpsMessageToBridge").mpsFullMessagetoBridge(y))!=null?t:{},h=n.supplementals,C=n.topLevel;h==null||h.forEach(function(e){e.kind==="bridgeEditHistoryMsg"?a.push(e.value):e.kind==="bridgeReactionAction"?i.push(e.value):e.kind==="bridgeMsgsStartCountdown"?c.push.apply(c,e.value.msgs):e.kind==="bridgeXMAStartCountdown"?d.push.apply(d,e.value.msgs):e.kind==="bridgeNoteReplyStartCountdown"?m.push.apply(m,e.value.msgs):e.kind==="bridgeMedia"?_.push(e.value):e.kind==="bridgeReceiverFetchInfo"?p.push(e.value):e.kind==="bridgeXMA"&&u.push(e.value)}),(C==null?void 0:C.kind)==="bridgeMsg"&&l.push(C.value);var b=C!=null&&C.kind==="bridgeMsg"&&C.value.type_===o("WAMsgType").MSG_TYPE.FUTUREPROOF;if(C==null||b){f++,r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Could not convert MPS msg to Bridge msg, id: ",", isFutureProof: ",""])),y.toplevelProtobuf.messageId,b);var v=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(y.toplevelProtobuf),S=v.deserialize(),R=S.encryptedTransportMessage(),L="unknownFieldCount",E=R==null?void 0:R.subProtocol(),k=S.adminMessage();if(E!=null)e:{if((typeof E=="object"&&E!==null||typeof E=="function")&&E.kind==="consumerApplication"){var I,T;Object.keys((I=R==null||(T=R.consumerMessage())==null||(T=T.payload)==null?void 0:T.content)!=null?I:{}).forEach(function(e){e!==L&&g.add("consumer:"+e)});break e}if((typeof E=="object"&&E!==null||typeof E=="function")&&E.kind==="armadillo"){var D,x;Object.keys((D=R==null||(x=R.armadillo())==null||(x=x.payload)==null?void 0:x.content)!=null?D:{}).forEach(function(e){e!==L&&g.add("armadillo:"+e)});break e}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+E)}else if(k!=null){var $;Object.keys(($=k.proto)!=null?$:{}).forEach(function(e){e!==L&&g.add("admin:"+e)})}else S.encryptedTransportEvent()!=null?g.add("transportEvent"):S.locallyTransformedMessage()!=null?g.add("locallyTransformed"):(g.add("unknown"),r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).mustfix("Unrecognised message"));r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).INFO(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unrendered msg type, id: ",", type: ",""])),y.toplevelProtobuf.messageId,Array.from(g).join(","))}};for(var y of t)h();var C={editMsgHistory:a,expiringCountdown:c,medias:_,msgs:l,noteReplyCountdown:m,polls:[],reactions:i,receiverFetchInfoPayloads:p,xmaCountdown:d,xmas:u};return f>0&&(n==null||n.addQPLAnnotations({int:{mpsUnrenderedCount:f},string_array:{mpsUnkownMsgTypes:Array.from(g)}})),C}l.messageToLoadMsgsResponse=u}),98);
__d("useMAWHasUserVisibleErrors",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.user_visible_errors?(a=function(){return o("ReQL").fromTableDescending(n.tables.user_visible_errors).filter(u)},t[0]=n.tables.user_visible_errors,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useFirst(a,l,i.id+":24");return s!=null}function u(e){var t=e.presentationStyle;return t==="banner"}l.default=s}),98);
__d("useMAWUnsupportedBrowserNUX",["MAWIsIDBOperational","MAWWasmFeatureSupport","WebStorage","gkx","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(3),n=o("MAWIsIDBOperational").useIsIDBOperational(),a=o("MAWWasmFeatureSupport").useWasmFeatureSupport(),i=a==null||a.bigInt&&a.bulkMemory&&a.referenceTypes,l=!n||!i||(e||(e=r("WebStorage"))).getLocalStorage()==null,s=r("gkx")("1778")||l,u;return t[0]!==l||t[1]!==s?(u={shouldHideEBFlow:l,shouldShowQP:s},t[0]=l,t[1]=s,t[2]=u):u=t[2],u}l.useMAWUnsupportedBrowserNUX=s}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("63"),u=e.of_string("65"),c=e.of_string("98"),d=e.of_string("504"),m=e.of_string("1000"),p=e.of_string("1001"),_=e.of_string("1204"),f=e.of_string("1210"),g=e.of_string("1224"),h=e.of_string("1234"),y=e.of_string("1225"),C=e.of_string("2220");l.traceGroupMessage=s,l.armadilloActMessageSend=u,l.traceCreated=c,l.richMediaMediaSendAttachmentType=d,l.traceTextMessage=m,l.traceMediaMessage=p,l.advancedCryptoMEMSendTaskComplete=_,l.deliveryReceiptReceived=f,l.advancedCryptoMEMEncryptionDeviceCount=g,l.advancedCryptoGroupDualSend=h,l.advancedCryptoDualSend=y,l.armadilloTlcControlOpenThread=C}),98);
__d("LSMessageRenderingType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});i.default=e}),66);
__d("LSMessageSearchType",[],(function(t,n,r,o,a,i){var e=Object.freeze({THREAD:1,MESSAGE:2});i.default=e}),66);
__d("LSMessageUnsendabilityStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});i.default=e}),66);
__d("LSQuickReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});i.default=e}),66);
__d("LSReplyMessageStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});i.default=e}),66);
__d("LSTransportKey",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});i.default=e}),66);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}l.isEphemeralSettingSetAdminMsg=e}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWAdminMsgTypesGrouped","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=new Set([(u=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),d=new Set([u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),m=s._(/*BTDS*/"Change").toString(),p=s._(/*BTDS*/"See All").toString(),_=s._(/*BTDS*/"Learn more").toString(),f=s._(/*BTDS*/"Learn more").toString(),g=s._(/*BTDS*/"actions you can take.").toString(),h=s._(/*BTDS*/"Go to other chat").toString(),y=s._(/*BTDS*/"View archived chat").toString(),C=s._(/*BTDS*/"View poll").toString(),b=s._(/*BTDS*/"Change").toString();async function v(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.admin_message_ctas.index("ctaId")));return n!=null?(e||(e=o("I64"))).add(n.ctaId,(e||(e=o("I64"))).one):(e||(e=o("I64"))).zero}function S(e,t,n){var r=[t,n];return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.admin_message_ctas).bounds({gte:r,lte:r}))}function R(e,t,n){if(e==null)return{showAdChoiceIcon:!1};if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};if(c.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:t,targetTitle:n,title:C};if(d.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:b};switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:_};case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:h};case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:y};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:g};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:f};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function L(e){if(e!=null){if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return"admin_msg_armadillo_ephemeral_change_duration";if(c.has(e))return"admin_msg_poll_details";if(d.has(e))return"admin_msg_change_theme";switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return"admin_msg_dual_thread_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case o("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}}async function E(e,t,n,r,a){await e.admin_message_ctas.add({actionContentBlob:a.actionContentBlob,actionUrl:a.actionUrl,adClientToken:a.adClientToken,adHelpUrl:a.adHelpUrl,adminMessageNicknameParticipantId:a.adminMessageNicknameParticipantId,adPreferenceUrl:a.adPreferenceUrl,ctaId:t,messageId:r.msgId,showAdChoiceIcon:a.showAdChoiceIcon,targetId:a.targetId,targetTitle:a.targetTitle,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(r.ts),title:a.title})}async function k(e,t,n){var r=await Promise.all([S(e,t,n.msgId),v(e)]),o=r[0],a=r[1];if(o!=null)return{ctaId:o.ctaId,ctaType:L(n.adminType),title:o.title};var i=T(n.adminType,n),l=D(n.adminType,n),s=R(n.adminType,i,l);return await E(e,a,t,n,s),{ctaId:a,ctaType:L(n.adminType),title:s.title}}function I(e,t,n){var r=n.adminType;return r!=null&&(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(r)||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||r!=null&&c.has(r)||r!=null&&d.has(r)||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(r))?k(e,t,n):Promise.resolve()}function T(t,n){if(t!=null){if(n.type_===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(e||(e=o("I64"))).of_string(n.externalId);if(c.has(t)&&n.pollStanzaId!=null)return(e||(e=o("I64"))).of_string(n.pollStanzaId)}}function D(e,t){if(e!=null&&c.has(e))return t.adminContent==null||t.adminContent.length===0?void 0:t.adminContent[t.adminContent.length-1]}l.getAdminMsgCTAContentByAdminType=R,l.getCtaTypeByAdminType=L,l.getAdminMsgCtaStep=I}),226);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWSubscribeToContactNames","MAWThreadCustomizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?void 0:e.replace(/\$/g,"$$$$")}function s(t,n,r){r===void 0&&(r=0);var a=o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(n,t),i=a.contactIds,l=a.contents,s=o("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(n),u=o("MAWThreadCustomizationUtils").skipNicknameCheck(n);if(r===1){var c=o("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(n);return o("MAWAdminMsg").buildLocalizedString(l.map(e),i.map(function(e,t){return s&&t>0||u?c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+e+")":"$CONTACT_FULL_NAME("+e+")":c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+e+")":"$PARTICIPANT_FULL_NAME("+e+")"}),n)}return o("MAWAdminMsg").buildLocalizedString(l,i,n)}l.buildAdminMsgText=s}),98);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.keys(r("LSTransportKey")).find(function(t){return r("LSTransportKey")[t]===e});return t?r("LSTransportKey")[t]:"WhatsApp"}l.convertStringToLSTransportKeyType=e}),98);
__d("MAWReplyBuilder_Forward",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){},buildReplyUserId:function(t){}};l.MAWReplyBuilder_Forward=s}),98);
__d("MAWReplyBuilder_HighlightsTabPostReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.replyToUserId!=null?(u||(u=o("I64"))).of_string(t.replyToUserId):void 0}};l.MAWReplyBuilder_HighlightsTabPostReply=c}),226);
__d("MAWReplyBuilder_LightweightStatus",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(n){return n.replyMediaExpirationTimestampMs!=null?(e||(e=o("I64"))).of_float(n.replyMediaExpirationTimestampMs):void 0},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return t.noteContent},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return n.replyToUserId!=null?(e||(e=o("I64"))).of_string(n.replyToUserId):void 0}};l.MAWReplyBuilder_LightweightStatus=c}),226);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.isAuthorMe,n=e.recipientName,o=e.replySenderIsMe,a=e.replySenderIsRecipient,i=e.senderName,l="participantBumpedParticipantMessage";return t&&o?l="currentUserBumpedOwnMessage":t?l="currentUserBumpedMessage":o?l="participantBumpedCurrentUserMessage":a&&(l="participantBumpedOwnMessage"),r("getMAWLocalizedBumpMsgReplySnippet")(l,i,n)}l.buildBumpMessageReplySnippet=e}),98);
__d("MAWReplyBuilder_Message",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWImageUtils","MAWMpsGating","MessagingAttachmentType","getErrorSafe"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){return d(t)},buildReplyAttachmentPlaintextHash:function(t){return p(t)},buildReplyAttachmentType:function(t){return y(t)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){return _(t)},buildReplyMediaPreviewWidth:function(t){return f(t)},buildReplyMessageText:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.text},buildReplySnippet:function(t,n,r){return C(t,n,r)},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplyStatus:function(t){return b(t)},buildReplyTimestampMs:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.timestampMs},buildReplyType:function(n){return n.isBumpMsg?(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.senderId}};function d(t){var n=t.replyToLSAttachment;if(n!=null&&(n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)||n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)&&n.receiverFetchId!=null)){var a=n.attachmentFbid;try{return(u||(u=o("I64"))).of_string(a)}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] getReplyAttachmentIdFromReplyContent: Error converting attachmentFbid, %s, to a big int for msg, %s. Attachment of type, %s, is likely using plaintexthash as id, please review types requiring attachment id: %s",a,n.messageId,(u||(u=o("I64"))).to_string(n.attachmentType),i.message)}}}var m=new Set([(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER),e.ofNumber(r("MessagingAttachmentType").IMAGE),e.ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE),e.ofNumber(r("MessagingAttachmentType").VIDEO),e.ofNumber(r("MessagingAttachmentType").AUDIO),e.ofNumber(r("MessagingAttachmentType").FILE)]);function p(e){var t=e.replyToLSAttachment;if(t!=null&&m.has(t.attachmentType))return t.attachmentFbid}function _(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyHeight:n.previewHeight}function f(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyWidth:n.previewWidth}function g(e){var t,n=(t=e.replyToLSAttachment)!=null?t:{},r=n.previewHeight,a=n.previewWidth;if(r==null||a==null)return{replyHeight:void 0,replyWidth:void 0};var i=o("MAWImageUtils").boundHeightWidth((u||(u=o("I64"))).to_int32(r),u.to_int32(a),96*.8),l=i.height,s=i.width;return{replyHeight:u.of_int32(l),replyWidth:u.of_int32(s)}}function h(e){var t,n=(t=e.replyToLSMessage)==null?void 0:t.text;return n!=null&&n!==""}function y(t){var n=t.replyToLSAttachment;if(n!=null)switch(n.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):return h(t)?void 0:(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function C(e,t,n){var r=e.replyToLSMessage;if(!(r==null&&!o("MAWMpsGating").isMpsMessageRendering())){var a=t===n,i="$PARTICIPANT_FIRST_NAME("+t+")";if(r==null||r.isUnsent===!0)return a?s._(/*BTDS*/"You replied to a removed message").toString():s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",i)]).toString();var l=r.senderId,c=(u||(u=o("I64"))).to_string(l)===n,d=t===u.to_string(l),m="$PARTICIPANT_FIRST_NAME("+u.to_string(l)+")";if(e.isBumpMsg){var p=o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:a,recipientName:m,replySenderIsMe:c,replySenderIsRecipient:d,senderName:i});return p==null?void 0:p.toString()}return a&&c?s._(/*BTDS*/"You replied to yourself").toString():d?s._(/*BTDS*/"{other} replied to themself",[s._param("other",i)]).toString():a?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",m)]).toString():c?s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",i)]).toString():s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",i),s._param("other_name",m)]).toString()}}function b(t){var n=t.replyToLSMessage;if(n==null)return o("MAWMpsGating").isMpsMessageRendering()?(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED):void 0;var a=t.replyToLSAttachment;if(n.isUnsent===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);if(n.isExpired===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").EXPIRED);if(n.isAdminMessage===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);switch(n.displayedContentTypes){case(e||(e=o("LSIntEnum"))).ofNumber(256):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);case(e||(e=o("LSIntEnum"))).ofNumber(1):case(e||(e=o("LSIntEnum"))).ofNumber(4):case(e||(e=o("LSIntEnum"))).ofNumber(32):case(e||(e=o("LSIntEnum"))).ofNumber(64):case(e||(e=o("LSIntEnum"))).ofNumber(1024):case(e||(e=o("LSIntEnum"))).ofNumber(536870912):case(e||(e=o("LSIntEnum"))).ofNumber(4096):case(e||(e=o("LSIntEnum"))).ofNumber(16384):case(e||(e=o("LSIntEnum"))).ofNumber(134217728):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);case(e||(e=o("LSIntEnum"))).ofNumber(2):{if(a!=null)switch(a.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID)}return}case(e||(e=o("LSIntEnum"))).ofNumber(65536):case(e||(e=o("LSIntEnum"))).ofNumber(131072):case(e||(e=o("LSIntEnum"))).ofNumber(262144):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE);case(e||(e=o("LSIntEnum"))).ofNumber(32768):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").UNKNOWN);default:return}}l.MAWReplyBuilder_Message=c}),226);
__d("MAWReplyBuilder_PostMention",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWPostMentionXMASnippetFbt"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,a){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var i="$PARTICIPANT_FIRST_NAME("+e+")",l=n===a,s=l?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(i):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return s.toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(s||(s=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(s||(s=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_PostMention=u}),98);
__d("MAWReplyBuilder_ProducerStoryReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWMsgType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(n){return n.storyMediaId!=null?(e||(e=o("I64"))).of_float(n.storyMediaId):void 0},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to their story",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY)},buildReplyStatus:function(t){return t.storyMsgType===o("MAWMsgType").MSG_TYPE.IMAGE?(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID):void 0},buildReplyTimestampMs:function(n){return n.timestampMs!=null?(e||(e=o("I64"))).of_float(n.timestampMs):void 0},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return(e||(e=o("I64"))).of_string(n.storyOwnerId)}};l.MAWReplyBuilder_ProducerStoryReply=c}),226);
__d("MAWReplyBuilder_Story",["fbt","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=t.storyOwnerId===r,o=n===r,a="$PARTICIPANT_FIRST_NAME("+n+")",i="$PARTICIPANT_FIRST_NAME("+t.storyOwnerId+")";return e?o?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",a)]).toString():o?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",i)]).toString():void 0},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(t){},buildReplyUserId:function(t){return(u||(u=o("I64"))).of_string(t.storyOwnerId)}};l.MAWReplyBuilder_StoryReply=c}),226);
__d("MAWReplyBuilder_StoryMention",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,o){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var a="$PARTICIPANT_FIRST_NAME("+e+")",i=n===o;return i?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",a)]).toString():s._(/*BTDS*/"Mentioned you in their story").toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(u||(u=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_StoryMention=c}),226);
__d("MAWReplyBuilder",["MAWReplyBuilder_Forward","MAWReplyBuilder_HighlightsTabPostReply","MAWReplyBuilder_LightweightStatus","MAWReplyBuilder_Message","MAWReplyBuilder_PostMention","MAWReplyBuilder_ProducerStoryReply","MAWReplyBuilder_Story","MAWReplyBuilder_StoryMention"],(function(t,n,r,o,a,i,l){"use strict";var e={FB_POST_MENTION:o("MAWReplyBuilder_PostMention").MAWReplyBuilder_PostMention,FB_PRODUCER_STORY_REPLY:o("MAWReplyBuilder_ProducerStoryReply").MAWReplyBuilder_ProducerStoryReply,FB_STORY_MENTION:o("MAWReplyBuilder_StoryMention").MAWReplyBuilder_StoryMention,FORWARD:o("MAWReplyBuilder_Forward").MAWReplyBuilder_Forward,HIGHLIGHTS_TAB_POST_REPLY:o("MAWReplyBuilder_HighlightsTabPostReply").MAWReplyBuilder_HighlightsTabPostReply,LIGHTWEIGHT_STATUS:o("MAWReplyBuilder_LightweightStatus").MAWReplyBuilder_LightweightStatus,MESSAGE:o("MAWReplyBuilder_Message").MAWReplyBuilder_Message,STORY:o("MAWReplyBuilder_Story").MAWReplyBuilder_StoryReply};function s(t){return e[t]}function u(e){var t=s(e.replyType);return t.buildReplyUserId(e)}l.getReplyBuilder=s,l.getReplyUserIdNew=u}),98);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","MAWReplyBuilder","MsgrWebGating","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.replySourceId!=null}function c(e,t,n,a,i){o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&n!=null&&n!==(t!=null?t:"")&&r("FBLogger")("messenger_e2ee_web").warn("[MAWMsgReply][%s][%s] LS derived reply field generated does not match the legacy derived version for msg, %s. Expected: %s, Actual: %s",i,e,a,t,n)}function d(t){var n=m(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyUserId(r);return c("getReplyUserId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function m(t){var n=t.replyToUserId;return n==null?void 0:(e||(e=o("I64"))).of_string(n)}function p(t){var n=_(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceTypeV2();return c("getReplySourceTypeV2",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function _(e){var t=e.isFBPostMention,n=e.isFBStoryMention,a=e.isForwarded,i=e.isMsgHighlightsTabFriendUpdatesReply,l=e.isNoteReply,c=e.isStoryProducerReply,d=e.isStoryReply,m=e.isStoryShare,p=e.replyMediaExpirationTimestampMs,_=u(e);if(t===!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(a)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(i!=null&&i)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(p!=null&&p<o("WATimeUtils").unixTime()&&l!==!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(_)return d!=null&&d?c!=null&&c?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):l===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function f(t){var n=g(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceType();return c("getReplySourceType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function g(e){var t=u(e),n=e.isMsgHighlightsTabFriendUpdatesReply,a=e.isNoteReply,i=e.isStoryReply,l=e.isStoryShare;if(l!=null&&l)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(t)return i!=null&&i?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):a===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function h(e){var t=y(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySourceId(n);return n.replyType!=="FB_STORY_MENTION"&&n.replyType!=="FB_POST_MENTION"&&c("getReplySourceId",t,r,e.msgId,e.type_),r}}function y(e){if(e.replySourceId!=null)return e.replySourceId}function C(t){var n=b(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyTimestampMs(r);return c("getReplyTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function b(t){if(t.replySourceTimestampMs!=null)return(e||(e=o("I64"))).of_float(t.replySourceTimestampMs)}function v(e){var t=S(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyMessageText(n);return c("getReplyMessageText",t,r,e.msgId,e.type_),r}}function S(e){if(e.replySourceId!=null)return e.replyMessageText}function R(e){if(e.replySourceId!=null)return e.replyMentionedJids}function L(t){var n=E(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyType(r);return c("getReplyType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function E(e){return e.type_===o("MAWMsg").bumpExistingMessage?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):u(e)?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR):void 0}function k(e){return e.replySourceId==null?!1:I(e.replyStatusType)}function I(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function T(e){return e.replyStatusType==="XMA"&&e.replyMessageText!=null}function D(t){var n=x(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewHeight(r);return c("getReplyMediaPreviewHeight",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function x(t){if(k(t))return t.replyMediaPreviewHeight!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewHeight):void 0}function $(t){var n=P(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewWidth(r);return c("getReplyMediaPreviewWidth",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function P(t){if(k(t))return t.replyMediaPreviewWidth!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewWidth):void 0}function N(t){var n=M(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentType(r);return c("getReplyAttachmentType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function M(e){var t=e.replyStatusType;if(t!=null){var n=t==="Raven",a=k(e)||n;if(a)switch(t){case"Gif":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case"Ptt":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Video":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case"Image":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case"XMA":return e.isIGXMAPostShare===!0||e.isIGXMAStoryShare===!0||e.isStoryHighlightShare===!0||e.isPostPrivateReply===!0||e.isMsgHighlightsTabFriendUpdatesReply===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST):T(e)?void 0:(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case"DocumentFile":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Raven":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}}function w(t){var n=A(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentId(r);return c("getReplyAttachmentId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function A(t){var n=t.replyMediaId,r=t.replyXMAId;if(k(t)&&n!=null)return r!=null?void 0:(e||(e=o("I64"))).of_float(n);if(!(n!=null||r==null)&&!(r!=null&&T(t)))return(e||(e=o("I64"))).of_int32(r)}function F(e){var t=O(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyAttachmentPlaintextHash(n);return c("getReplyAttachmentPlaintextHash",t,r,e.msgId,e.type_),r}}function O(e){var t=e.replyPlaintextHash;if(k(e)&&t!=null)return""+t}function B(t){var n=W(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaExpirationTimestampMs(r);return c("getReplyMediaExpirationTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function W(t){var n=t.isNoteReply,r=t.isStoryReply,a=t.replyMediaExpirationTimestampMs,i=t.replyMessageText,l=t.replyStatusType;if(n===!0)return a!=null?(e||(e=o("I64"))).of_float(a):void 0;var s=N(t),u=w(t);if(l!=null&&l==="XMA"&&s==null){if(u!=null)return;if(i==null)return(e||(e=o("I64"))).zero}if(!(u!=null||!(r!=null&&r)))return(e||(e=o("I64"))).zero}l.assertIfQuotedV2=c,l.getReplyUserId=d,l.getReplySourceTypeV2=p,l.getReplySourceType=f,l.getReplySourceId=h,l.getReplyTimestampMs=C,l.getReplyMessageText=v,l.getReplyMentionedJids=R,l.getReplyType=L,l.getReplyMediaPreviewHeight=D,l.getReplyMediaPreviewWidth=$,l.getReplyAttachmentType=N,l.getReplyAttachmentTypeLegacy=M,l.getReplyAttachmentId=w,l.getReplyAttachmentPlaintextHash=F,l.getReplyMediaExpirationTimestampMs=B}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","MAWReplyBuilder","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e){case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.REVOKED:return r("LSReplyMessageStatus").DELETED;case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("LSReplyMessageStatus").VALID;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:return r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return r("LSReplyMessageStatus").UNKNOWN;case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return r("LSReplyMessageStatus").EXPIRED;default:return}}function c(t){var n=d(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyStatus(r);return o("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function d(e){var t=u(e.replyStatusType);if(t!=null)return(s||(s=o("LSIntEnum"))).ofNumber(t)}l.getReplyMessageStatus=u,l.getLSReplyMessageStatus=c}),98);
__d("MAWMsgReplySnippet",["fbt","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMpsGating","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","MAWReplyBuilder","MsgrWebGating","ODS"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=t.isAuthorMe,a=t.isBumpMsg,i=a===void 0?!1:a,l=t.isDeletedMsg,c=t.isFBPostMention,d=c===void 0?!1:c,m=t.isFBStoryMention,p=m===void 0?!1:m,_=t.isIGStoryMention,f=_===void 0?!1:_,g=t.isIGXMAStoryShare,h=g===void 0?!1:g,y=t.isMsgHighlightsTabFriendUpdatesReply,C=y===void 0?!1:y,b=t.isNoteReply,v=b===void 0?!1:b,S=t.isPostPrivateReply,R=S===void 0?!1:S,L=t.isStoryHighlightShare,E=L===void 0?!1:L,k=t.isStoryProducerReply,I=t.isStoryReaction,T=I===void 0?!1:I,D=t.isStoryReply,x=D===void 0?!1:D,$=t.isStoryShare,P=$===void 0?!1:$,N=t.recipientName,M=t.replyAttachmentType,w=t.replySenderIsMe,A=w===void 0?!1:w,F=t.replySenderIsRecipient,O=F===void 0?!1:F,B=t.senderName;switch(!0){case d:return n?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(N):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(B);case i:return o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:n,recipientName:N,replySenderIsMe:A,replySenderIsRecipient:O,senderName:B});case E:return s._(/*BTDS*/"Sent a story highlight");case(h&&M!=null&&(e||(e=o("I64"))).equal(M,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST))):return s._(/*BTDS*/"Sent a story");case(n&&l):return s._(/*BTDS*/"You replied to a removed message");case(n&&P):return s._(/*BTDS*/"You shared a story");case(n&&T):return s._(/*BTDS*/"You reacted to their story");case(n&&f):return N!=null?s._(/*BTDS*/"You mentioned \u0040{name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case(n&&p):return N!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case f:case p:return s._(/*BTDS*/"Mentioned you in their story");case(!n&&C):return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(n&&C):return s._(/*BTDS*/"You replied to their post");case(n&&R):return N!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's post");case R:return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(!n&&v):return s._(/*BTDS*/"{name} replied to your note",[s._param("name",B)]);case(n&&v):return s._(/*BTDS*/"You replied to their note");case(n&&A):return s._(/*BTDS*/"You replied to yourself");case(n&&x):return k===!0?s._(/*BTDS*/"You replied to your story"):N!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's story");case n:return N!=null?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",N)]):s._(/*BTDS*/"You replied to a participant");case l:return s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",B)]);case P:return s._(/*BTDS*/"{user} shared a story",[s._param("user",B)]);case T:return s._(/*BTDS*/"Reacted to your story");case O:return s._(/*BTDS*/"{other} replied to themself",[s._param("other",B)]);case(A&&x):return k===!0?s._(/*BTDS*/"{name} replied to their story",[s._param("name",B)]):s._(/*BTDS*/"{name} replied to your story",[s._param("name",B)]);case A:return s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",B)]);default:return N!=null?s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",B),s._param("other_name",N)]):s._(/*BTDS*/"{other} replied to participant",[s._param("other",B)])}}function m(t,n,r,a,i){if(a===void 0&&(a=!1),(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(25))){var l=t?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(r):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return l==null?void 0:l.toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(22)))return t?r!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",r)]).toString():s._(/*BTDS*/"You mentioned a participant in your story").toString():s._(/*BTDS*/"Mentioned you in their story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(14)))return t?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(13)))return t?r!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18)))return t?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24))){var c=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24));if(t)return c?s._(/*BTDS*/"You replied to your story").toString():r!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's story").toString();if(a)return c?s._(/*BTDS*/"{name} replied to their story",[s._param("name",i)]).toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",i)]).toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(12)))return t?s._(/*BTDS*/"You reacted to their story").toString():s._(/*BTDS*/"Reacted to your story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(4)))return t?s._(/*BTDS*/"You shared a story").toString():s._(/*BTDS*/"{user} shared a story",[s._param("user",i)]).toString()}function p(t,n,a,i){var l=t.senderId,s=(e||(e=o("I64"))).to_string(t.senderId)===a,u=n===a;if(l==null||n==null)throw r("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");var c="$PARTICIPANT_FIRST_NAME("+e.to_string(l)+")",d="$PARTICIPANT_FIRST_NAME("+n+")",p=m(u,i,c,s,d);return p==null?void 0:p.toString()}function _(e){var t=f(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent,r=e.sender;if(n!=null){var a=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySnippet(n,r,o("MAWCurrentUser").getID());return o("MAWMsgReply").assertIfQuotedV2("getReplySnippet",t,a,e.msgId,e.type_),a}}function f(e){var t;if(!o("MAWMpsGating").isMpsMessageRendering()){var n=e.isAuthorMe,a=e.isFBPostMention,i=a===void 0?!1:a,l=e.isFBStoryMention,s=l===void 0?!1:l,u=e.isIGStoryMention,m=u===void 0?!1:u,p=e.isIGXMAStoryShare,_=e.isMsgHighlightsTabFriendUpdatesReply,f=_===void 0?!1:_,g=e.isNoteReply,h=g===void 0?!1:g,y=e.isPostPrivateReply,C=y===void 0?!1:y,b=e.isStoryHighlightShare,v=b===void 0?!1:b,S=e.isStoryProducerReply,R=e.isStoryReaction,L=e.isStoryReply,E=e.isStoryShare,k=E===void 0?!1:E,I=e.replySenderIsMe,T=e.replySourceId,D=e.replyStatusType,x=e.replyToUserId,$=e.sender,P=e.type_,N=P===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(!(T==null&&!L&&!k&&!m&&!s&&!v&&!h&&!i)){if(x==null||$==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");return(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet"),(t=d({isAuthorMe:n,isBumpMsg:N,isDeletedMsg:o("MAWMsgReplyStatus").getReplyMessageStatus(D)===r("LSReplyMessageStatus").DELETED,isFBPostMention:i,isFBStoryMention:s,isIGStoryMention:m,isIGXMAStoryShare:p,isMsgHighlightsTabFriendUpdatesReply:f,isNoteReply:h,isPostPrivateReply:C,isStoryHighlightShare:v,isStoryProducerReply:S,isStoryReaction:R,isStoryReply:L,isStoryShare:k,recipientName:"$PARTICIPANT_FIRST_NAME("+x+")",replySenderIsMe:I,replySenderIsRecipient:$===x,senderName:"$PARTICIPANT_FIRST_NAME("+$+")"}))==null?void 0:t.toString()}}}l.buildLocalizedReplySnippetLegacy=d,l.getReplySnippetFromLSMessage=p,l.getReplySnippet=_}),226);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","isMWBumpMessage"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).reduce(function(e,t){return[].concat(e,t)},[])}function d(e){return e!=null?o("MAWVault").unvault(e):void 0}function m(e){return e!=null?o("MAWVault").vault(e):void 0}function p(e){return babelHelpers.extends({},e,{replyMessageText:m(e.replyMessageText),text:m(e.text)})}function _(e){var t=o("MAWMsgReply").getReplyMessageText(e),n=e.adminContent,r=e.adminType,a=e.adminVersion,i=e.content,l=e.isAdminMessage,u=i;l&&n!=null&&r!=null&&(u=o("MAWBridgeBuildAdminMsg").buildAdminMsgText(n,r,a));var _=o("MAWMsgReplySnippet").getReplySnippet(e);e.type_===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(u=m(e.replySourceId==null?"":_!=null?_:s._(/*BTDS*/"Bumped a message").toString()));var f=c(e.mentionedJids,o("MAWMsgReply").getReplyMentionedJids(e)),g=e.commands?e.commands:[];return f.length>0||g.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(u),f,d(t),g.length>0?g:void 0)):{replyMessageText:t,text:u}}function f(t){var n=t.ephemeralDurationInSec;return n!=null?(e||(e=o("I64"))).of_int32(n):void 0}function g(e,t,n,a){var i,l=r("isMWBumpMessage")(t==null?void 0:t.replyType)?t==null?void 0:t.replyMessageText:t==null?void 0:t.text,s=c(n,t==null||(i=t.mentionIds)==null?void 0:i.split(",").map(o("MAWJids").toUserJid)),u=a!=null?a:[];return s.length>0||u.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(e),s,d(l),u)):{replyMessageText:l,text:e}}function h(t,n){var a,i,l,s,c=_(t),d=t.type_===o("MAWMsg").unsent,m=o("MAWTimeUtils").toTimestamp(d&&(a=t.originalTs)!=null?a:t.ts);if(o("MAWMsgReply").getReplyAttachmentId(t)!=null&&o("MAWMsgReply").getReplyAttachmentPlaintextHash(t)==null){var p;o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(e||(e=o("I64"))).to_float((p=o("MAWMsgReply").getReplyAttachmentType(t))!=null?p:(e||(e=o("I64"))).zero))}var g=o("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(t.transportKey);return babelHelpers.extends({},c,{adminMsgCtaId:n==null?void 0:n.ctaId,adminMsgCtaTitle:n==null?void 0:n.title,adminMsgCtaType:n==null?void 0:n.ctaType,authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:d||!t.isAuthorMe?(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,collapsibleId:t.collapsibleId!=null?(e||(e=o("I64"))).of_float(t.collapsibleId):void 0,displayedContentTypes:o("MAWMsg").getDisplayedContentTypes(t.type_,t.isForwarded,t.isExpiredXmaMsg,t.replySourceId!=null,t.unsupportedType,t.xmaMessageType),editCount:(e||(e=o("I64"))).of_int32((i=t.editCount)!=null?i:0),ephemeralDurationInSec:f(t),groupId:(l=t.groupId)!=null?l:void 0,groupIndex:t.groupIndex!=null?(e||(e=o("I64"))).of_float(t.groupIndex):void 0,groupSize:t.groupSize!=null?(e||(e=o("I64"))).of_float(t.groupSize):void 0,hotEmojiSize:o("MAWBridgeMsg").getSpecialTextSize(t),isCollapsed:(s=t.isCollapsed)!=null?s:!1,isUnsent:d,messageId:t.msgId,primarySortKey:e.of_float(t.sortOrderMs),replyAttachmentId:o("MAWMsgReply").getReplyAttachmentId(t),replyAttachmentPlaintextHash:o("MAWMsgReply").getReplyAttachmentPlaintextHash(t),replyAttachmentType:o("MAWMsgReply").getReplyAttachmentType(t),replyMediaExpirationTimestampMs:o("MAWMsgReply").getReplyMediaExpirationTimestampMs(t),replyMediaPreviewHeight:o("MAWMsgReply").getReplyMediaPreviewHeight(t),replyMediaPreviewWidth:o("MAWMsgReply").getReplyMediaPreviewWidth(t),replySnippet:o("MAWMsgReplySnippet").getReplySnippet(t),replySourceId:o("MAWMsgReply").getReplySourceId(t),replySourceTimestampMs:o("MAWMsgReply").getReplyTimestampMs(t),replySourceType:o("MAWMsgReply").getReplySourceType(t),replySourceTypeV2:o("MAWMsgReply").getReplySourceTypeV2(t),replyStatus:o("MAWMsgReplyStatus").getLSReplyMessageStatus(t),replyToUserId:o("MAWMsgReply").getReplyUserId(t),replyType:o("MAWMsgReply").getReplyType(t),sendStatus:o("MAWAckLevel").levelToMessagingSendStatus(t.ack),sendStatusV2:o("MAWAckLevel").levelToMessagingSendStatusV2(t.ack),timestampMs:m,transportKey:g,unsentTimestampMs:d?o("MAWTimeUtils").toTimestamp(t.ts):void 0})}l.getEphemeralDurationInSec=f,l.buildOptimisticMessage=g,l.buildNewAndUpdatedMessageSharedParams=h}),226);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return t===o("MAWDbMedia").MEDIA_TYPE.IMAGE?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.VIDEO?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):t===o("MAWDbMedia").MEDIA_TYPE.PTT?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):t===o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.STICKER?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):t===o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").NONE)}l.mediaTypeToMessageAttachmentType=s}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","WAMediaHdType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l,u){var c,d,m,p,_,f,g,h=n.messagesSortOrderMs?(e||(e=o("I64"))).of_float(n.messagesSortOrderMs[a]):n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):(e||(e=o("I64"))).of_float(n.ts*1e3);return{accessibilitySummaryText:n.accessibilitySummaryText,attachmentFbid:i,attachmentIndex:(c=t==null?void 0:t.attachmentIndex)!=null?c:(e||(e=o("I64"))).zero,attachmentType:(d=t==null?void 0:t.attachmentType)!=null?d:o("MAWMedia").mediaTypeToMessageAttachmentType(n.mediaType,n.ephemeralMediaViewMode),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:n.ephemeralMediaState!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaState):t==null?void 0:t.ephemeralMediaState,ephemeralMediaViewMode:n.ephemeralMediaViewMode!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaViewMode):t==null?void 0:t.ephemeralMediaViewMode,filename:(m=(p=n.filenames!=null?n.filenames[a]:null)!=null?p:n.defaultFilename)!=null?m:t==null?void 0:t.filename,filesize:n.filesize==null?t==null?void 0:t.filesize:(e||(e=o("I64"))).of_int32(n.filesize),gifPlayback:n.gifPlayback,hasMedia:n.hasMedia,hasXma:!1,isHd:((_=n.hdTypes)==null?void 0:_[a])===o("WAMediaHdType").HD_TYPE_HQ_4K,isSharable:!1,messageId:a,offlineAttachmentId:l,playableDurationMs:n.duration==null?t==null?void 0:t.playableDurationMs:(e||(e=o("I64"))).of_int32(n.duration),previewHeight:n.previewHeight==null?t==null?void 0:t.previewHeight:(e||(e=o("I64"))).of_int32(n.previewHeight),previewHeightLarge:n.previewHeightLarge==null?t==null?void 0:t.previewHeightLarge:(e||(e=o("I64"))).of_int32(n.previewHeightLarge),previewWidth:n.previewWidth==null?t==null?void 0:t.previewWidth:(e||(e=o("I64"))).of_int32(n.previewWidth),previewWidthLarge:n.previewWidthLarge==null?t==null?void 0:t.previewWidthLarge:(e||(e=o("I64"))).of_int32(n.previewWidthLarge),threadKey:u,timestampMs:h,titleText:n.accessibilitySummaryText,transportKey:(f=n.transportKey)!=null?f:"WhatsApp",waveformData:(g=n.waveformData)!=null?g:t==null?void 0:t.waveformData}}function c(e,t){var n=t.hasPreviewMedia!=null;return{id:e,mainMediaStatus:t.hasMedia?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:n?t.hasPreviewMedia===!0?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:n?"initial_media_download":void 0}}async function d(t,n,r){var a=n.mediaId,i=n.msgIds,l=n.offlineAttachmentId,s=n.plaintextHash;await m(t,n);var c=p(a,s),d=l!=null?l:c,f=!1,g=_(n),h=null;if(h=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments_ranges_v2__generated).getKeyRange(r).filter(function(t){return(e||(e=o("I64"))).equal(t.mediaGroup,g)})),await Promise.all(i.map(async function(a){var i=t.attachments,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(i).getKeyRange(r,a)),s=u(l,n,a,c,d,r);if(n.skipShouldUpdateHasMore!==!0&&h!=null&&(e||(e=o("I64"))).le(s.timestampMs,h.minTimestampMs)&&(f=!0),l!=null){var m;return i.upsert([l.threadKey,l.messageId,l.attachmentFbid],babelHelpers.extends({},s,{transportKey:(m=l.transportKey)!=null?m:s.transportKey}))}else return i.add(s)})),h!=null&&h.hasMoreBefore!==!0&&f){var y=babelHelpers.extends({},h,{hasMoreBefore:!0});await t.attachments_ranges_v2__generated.upsert([h.threadKey,h.mediaGroup,h.minTimestampMs],y)}}async function m(t,n){var a=n.mediaId,i=n.plaintextHash;if(i==null){r("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",a);return}var l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.client_media_status).getKeyRange(i)),u=l!=null&&!(e||(e=o("I64"))).equal(l.mainMediaStatus,(s||(s=o("LSIntEnum"))).ofNumber(4));u||await t.client_media_status.add(c(i,n))}function p(e,t){return""+(t!=null?t:e.toString())}function _(e){switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function f(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeNewMediaHandler",function(e,n){return d(e,t,n)})}l.getAttachmentFromBridgeMedia=u,l.callWithoutWaitingForAnything=d,l.getAttachmentID=p,l.call=f}),98);
__d("MAWMsgFetchLSReplyMsgAndAttachment",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWCurrentUser","MAWDbMsg","MAWMpsGating","MAWReplyBuilder","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE"||n.replyToMsgId==null)return null;var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(n.replyToMsgId));a==null&&t._META_loaded_as_quoted_msg!==!0&&r("FBLogger")("messenger_e2ee_web").mustfix("[fetchReplyLocalViaLS] Reply snippet cannot be generated as original message is not in LSDB");var i;return a!=null&&(i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(a.threadKey,a.messageId))),babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:i,replyToLSMessage:a})})}async function c(t,n){var a=o("MAWMpsGating").isMpsMessageRendering()?void 0:await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(n.threadKey,n.messageId)),i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(n.messageId));await Promise.all(i.map(function(i){var l=i.replySourceTypeV2,u=i.replyType;if(l==null||u==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error getting reply snippet without replySourceTypeV2 and/or replyType");return}var c=o("MAWDbMsg").toMsgId(n.messageId);if(c==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error extracting message id from replyToLSMessage");return}if(i.messageId===n.messageId){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Message replying to itself should not be updated");return}if(l===(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)){var d={isBumpMsg:i.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSAttachment:a,replyToLSMessage:n,replyToMsgId:c,replyType:"MESSAGE"},m=o("MAWReplyBuilder").getReplyBuilder(d.replyType),p=a!=null?{replyAttachmentId:m.buildReplyAttachmentId(d),replyAttachmentPlaintextHash:m.buildReplyAttachmentPlaintextHash(d),replyAttachmentType:m.buildReplyAttachmentType(d),replyMediaPreviewHeight:m.buildReplyMediaPreviewHeight(d),replyMediaPreviewWidth:m.buildReplyMediaPreviewWidth(d)}:{},_=babelHelpers.extends({},i,p,{replyMessageText:m.buildReplyMessageText(d),replySnippet:m.buildReplySnippet(d,(s||(s=o("I64"))).to_string(i.senderId),o("MAWCurrentUser").getID()),replySourceTimestampMs:m.buildReplyTimestampMs(d),replyStatus:m.buildReplyStatus(d),replyToUserId:m.buildReplyUserId(d)});return t.messages.put(_)}}))}l.fetchReplyLocalViaLS=u,l.updateMessagesReplyingToMsg=c}),98);
__d("MAWUpdateMsg",["MAWBridgeBuildMsg","MAWMsgFetchLSReplyMsgAndAttachment","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(t,r),i=babelHelpers.extends({},n,a);await e.messages.upsert([n.threadKey,n.timestampMs,n.messageId],i),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,i)}l.call=e}),98);
__d("MAWBridgeNewMsgHandler",["FBLogger","I64","LSIntEnum","LSMessageRenderingType","LSQuickReplyType","MAWAdminMsgCTA","MAWBridgeBuildMsg","MAWBridgeNewMediaHandler","MAWBridgeXMAUtils","MAWMpsGating","MAWMsgFetchLSReplyMsgAndAttachment","MAWThreadLoadingState","MAWUpdateMsg","MAWXMAUtils","MWPBumpEntityKey","MpsMessageToBridge","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){return babelHelpers.extends({},o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(n,a),{forwardScore:(e||(e=o("I64"))).of_float(n.forwardingScore),isAdminMessage:n.isAdminMessage,isForwarded:n.isForwarded,messageRenderingType:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageRenderingType").DEFAULT),offlineThreadingId:n.externalId,quickReplyType:s.ofNumber(r("LSQuickReplyType").NONE),senderId:e.of_string(n.sender),threadKey:t,viewFlags:s.ofNumber(0)})}function c(e,t,n){var r=t.mediaId,a=t.offlineAttachmentId,i=t.plaintextHash,l=o("MAWBridgeNewMediaHandler").getAttachmentID(r,i),s=a!=null?a:l;return o("MAWBridgeNewMediaHandler").getAttachmentFromBridgeMedia(null,t,n,l,s,e)}async function d(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=a.messageId,l=a.timestampMs;await e.messages.upsert([t,l,i],a),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,l,i)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function m(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=await e.messages.add(a),l=i[0],s=i[1],c=i[2];o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,s,c)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function p(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE")return t;var r=await o("MpsOverBridge").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-first"},debug:{purpose:"reply-fetch-local"},messageId:o("MpsToBridgeMessageId").bridgeMsgIdToMps(n.replyToMsgId).messageId,threadId:o("MpsTypes").toThreadId(t.chatJid)}),a=r.value;if(a==null)return t;var i=o("MpsMessageToBridge").mpsFullMessagetoBridge(a),l=i==null?void 0:i.topLevel,s=i==null?void 0:i.supplementals;if(l!=null&&l.kind==="bridgeMsg"){var d=s==null?void 0:s.find(function(e){return e.kind==="bridgeMedia"||e.kind==="bridgeXMA"}),m=l.value.msgId,p=(function(t){if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeMedia"&&"value"in t){var r=t.value;return c(e,r,n.replyToMsgId)}if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeXMA"&&"value"in t){var a=t.value;return o("MAWBridgeXMAUtils").composeAttachmentXMA(a,e,String(a.xmaId),m,void 0,void 0,void 0,void 0,"MAWBridgeNewMsgHandler")}if(t!==void 0)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})(d);return babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:p,replyToLSMessage:u(e,l.value,void 0)})})}return t}async function _(e,t,n){var r,a;if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var i=await o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(e,n);return i==null?n:o("MAWMpsGating").isMpsMessageRendering()&&((r=i.replyContent)==null?void 0:r.replyToLSAttachment)==null&&((a=i.replyContent)==null?void 0:a.replyToLSMessage)==null?p(t,n):i}async function f(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t.externalId));return n!=null?Promise.resolve(n):o("MsgrWebGating").isQuotedMessagesInLsEnabled()?o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId)):Promise.resolve(null)}async function g(t,n,a){var i=await _(t,a,n);if(!o("MAWXMAUtils").isXMAStoryReply(i.xmaMessageType)){if(i.isExpiredMsg===!0){r("FBLogger")("messenger_web").mustfix("Attempted to insert an expired message");return}var l=await o("MAWAdminMsgCTA").getAdminMsgCtaStep(t,a,i);if(o("MAWMpsGating").isMpsMessageRendering())await d(t,a,i,l);else{var s,u=await f(t,i);u==null?await m(t,a,i,l):await o("MAWUpdateMsg").call(t,i,u,l),o("MAWMpsGating").isMpsMessageRendering()&&((s=i.editCount)!=null?s:0)>0&&await h(t,i)}if(i.collapsibleId!=null){var c=(e||(e=o("I64"))).of_float(i.collapsibleId),p=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("collapsibleId")).getKeyRange(c));if(p.length>1){var g=p[0],y=p[1];(e||(e=o("I64"))).gt(g.timestampMs,y.timestampMs)?await t.messages.put(babelHelpers.extends({},y,{isCollapsed:!0})):await t.messages.put(babelHelpers.extends({},g,{isCollapsed:!0}))}}}}async function h(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.messages.index("replySourceIdMessageID")).getKeyRange(t.msgId));await Promise.all(n.map(function(n){var r=babelHelpers.extends({},n,{replyMessageText:t.content});return e.messages.put(r)}))}async function y(e,t){var n=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t.chatJid);n!=null&&await g(e,t,n)}async function C(e,t){await Promise.all(t.map(function(t){return y(e,t)}))}l.callWithoutWaitingForAnything=g,l.call=y,l.bulkCall=C}),98);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_USER))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_BUSINESS_USER))?!0:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_CREATOR_USER))}l.isIgContact=u}),98);
__d("getLSMediaContactProfilePictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.profilePictureUrlExpirationTimestampMs;if(t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)||e.profilePictureUrl===""){var n;return(n=e.profilePictureFallbackUrl)!=null?n:e.profilePictureUrl}else return e.profilePictureUrl}l.default=e}),98);
__d("getLSMediaThreadPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,a=n;return a!=null&&o("LSMediaUrlUtils").isTimestampExpired(a)?r:t}l.default=e}),98);/*FB_PKG_DELIM*/
__d("MDSTextConfig",["UserAgent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={blueLink:{color:"x1fey0fg",$$css:!0},disabled:{color:"x1dntmbh",$$css:!0},highlight:{color:"x1qq9wsj",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primary:{color:"xzsf02u",$$css:!0},secondary:{color:"xi81zsa",$$css:!0},secondaryOnMedia:{color:"xkxfvhb",$$css:!0},tertiary:{color:"x12scifz",$$css:!0},white:{color:"x14ctfv",$$css:!0}},s={disabledButton:{color:"x1x80s81",$$css:!0},primaryButton:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButton:{color:"x1mvi0mv",$$css:!0},secondaryButton:{color:"x1dem4cn",$$css:!0}},u={blueLink:{color:"x15k1xyk",$$css:!0},disabled:{color:"xc7hbz8",$$css:!0},highlight:{color:"x16uf79r",$$css:!0},negative:{color:"x1unwjcu",$$css:!0},positive:{color:"xxmynsg",$$css:!0},primary:{color:"xw2npq5",$$css:!0},primaryOnMedia:{color:"x8w7gz1",$$css:!0},secondary:{color:"xhgddhk",$$css:!0},secondaryOnMedia:{color:"xzutexd",$$css:!0},tertiary:{color:"xerl464",$$css:!0},white:{color:"xnba3h0",$$css:!0}},c={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x1n0sxbx",$$css:!0},default:{fontFamily:"x10flsy6",$$css:!0},segoe:{fontFamily:"x1xmvt09",$$css:!0}},d={default:function(t){switch(t){case"body1":return[4,5];case"body2":return[3,5];case"body3":return[4,5];case"body4":return[3,4];case"bodyLink1":return[4,5];case"bodyLink2":return[3,5];case"bodyLink3":return[4,5];case"bodyLink4":return[3,4];case"button1":return[3,5];case"button2":return[4,5];case"entityHeaderHeadline1":return[7,8];case"entityHeaderHeadline2":return[5,7];case"entityHeaderMeta1":return[4,5];case"entityHeaderMeta2":return[4,5];case"entityHeaderMeta3":return[4,3];case"headline3":return[3,5];case"headline4":return[4,5];case"headlineDeemphasized3":return[3,5];case"headlineDeemphasized4":return[4,5];case"headlineEmphasized1":return[5,6];case"headlineEmphasized2":return[4,5];case"headlineEmphasized3":return[3,4];case"headlineEmphasized4":return[4,5];case"headlineEmphasized5":return[3,4];case"meta1":return[3,4];case"meta2":return[3,4];case"meta3":return[3,4];case"meta4":return[3,4]}},segoe:function(t){switch(t){case"body1":return[6,4,1];case"body2":return[5,3,1];case"body3":return[5,4];case"body4":return[4,3,1];case"bodyLink1":return[6,4,1];case"bodyLink2":return[5,3,1];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3,1];case"button1":return[5,3,1];case"button2":return[5,4];case"entityHeaderHeadline1":return[10,6,2];case"entityHeaderHeadline2":return[8,5,3];case"entityHeaderMeta1":return[5,4,1];case"entityHeaderMeta2":return[5,4,1];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3,1];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3,1];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[7,4,2];case"headlineEmphasized2":return[6,4,2];case"headlineEmphasized3":return[5,3,1];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[5,3,1];case"meta1":return[4,3,1];case"meta2":return[4,3,1];case"meta3":return[4,3,1];case"meta4":return[4,3]}},sfGecko:function(t){switch(t){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[5,4];case"body4":return[4,3];case"bodyLink1":return[6,4];case"bodyLink2":return[4,3];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3];case"button1":return[4,3];case"button2":return[5,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[7,5];case"entityHeaderMeta1":return[5,4];case"entityHeaderMeta2":return[5,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[6,4];case"headlineEmphasized3":return[4,3];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[4,3]}},sfWebkit:function(t){switch(t){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[4,4];case"body4":return[4,3];case"bodyLink1":return[5,5];case"bodyLink2":return[4,4];case"bodyLink3":return[4,4];case"bodyLink4":return[4,3];case"button1":return[4,4];case"button2":return[4,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[6,6];case"entityHeaderMeta1":return[4,4];case"entityHeaderMeta2":return[4,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[4,4];case"headline4":return[4,4];case"headlineDeemphasized3":return[4,4];case"headlineDeemphasized4":return[4,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[5,5];case"headlineEmphasized3":return[4,4];case"headlineEmphasized4":return[4,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[3,3]}}},m=(function(){return r("UserAgent").isPlatform("Windows >= 6")?[c.segoe,d.segoe]:r("UserAgent").isPlatform("Mac OS X >= 10.11")&&!r("UserAgent").isBrowser("Firefox < 55")||r("UserAgent").isPlatform("iOS >= 9")?[c.apple,r("UserAgent").isEngine("Gecko")?d.sfGecko:d.sfWebkit]:[c.default,d.default]})(),p=m[0],_=m[1],f={body1:{fontSize:"x1603h9y",fontWeight:"x1fcty0u",$$css:!0},body2:{fontSize:"x1lkfr7t",fontWeight:"x1fcty0u",$$css:!0},body2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1fcty0u",$$css:!0},body3:{fontSize:"x6prxxf",fontWeight:"x1fcty0u",$$css:!0},body3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1fcty0u",$$css:!0},body4:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},body4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},bodyLink1:{fontSize:"x1603h9y",fontWeight:"x1s688f",$$css:!0},bodyLink2:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},bodyLink2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},bodyLink3:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},bodyLink3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},bodyLink4:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},bodyLink4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},button1:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},button1ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},button2:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},button2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},entityHeaderHeadline1:{fontSize:"x579bpy",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderHeadline2:{fontSize:"x1q74xe4",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta3:{fontSize:"x1nxh6w3",fontWeight:"x1xlr1w8",$$css:!0},headline3:{fontSize:"x1lkfr7t",fontWeight:"xk50ysn",$$css:!0},headline3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"xk50ysn",$$css:!0},headline4:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},headline4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"xk50ysn",$$css:!0},headlineEmphasized1:{fontSize:"xngnso2",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized2:{fontSize:"x1603h9y",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized3:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},headlineEmphasized3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},headlineEmphasized5:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},meta1:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta1ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta2:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta2ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta3:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},meta3ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0}},g=r("gkx")("5751"),h={colors:{blueLink:g?u.blueLink:e.blueLink,disabled:g?u.disabled:e.disabled,disabledButton:s.disabledButton,highlight:g?u.highlight:e.highlight,negative:g?u.negative:e.negative,positive:g?u.positive:e.positive,primary:g?u.primary:e.primary,primaryButton:s.primaryButton,primaryDeemphasizedButton:s.primaryDeemphasizedButton,primaryOnMedia:g?u.primaryOnMedia:void 0,secondary:g?u.secondary:e.secondary,secondaryButton:s.secondaryButton,secondaryOnMedia:g?u.secondaryOnMedia:e.secondaryOnMedia,tertiary:g?u.tertiary:e.tertiary,white:g?u.white:e.white},defaultFontFamily:p,offsets:_,styles:{body1:{lineHeight:24,style:f.body1},body2:{lineHeight:20,style:f.body2},body3:{lineHeight:19.9995,style:f.body3},body4:{lineHeight:16,style:f.body4},bodyLink1:{lineHeight:24,style:f.bodyLink1},bodyLink2:{lineHeight:20,style:f.bodyLink2},bodyLink3:{lineHeight:19.9995,style:f.bodyLink3},bodyLink4:{lineHeight:16,style:f.bodyLink4},button1:{lineHeight:20,style:f.button1},button2:{lineHeight:19.9995,style:f.button2},entityHeaderHeadline1:{lineHeight:38,style:f.entityHeaderHeadline1},entityHeaderHeadline2:{lineHeight:32,style:f.entityHeaderHeadline2},entityHeaderMeta1:{lineHeight:19,style:f.entityHeaderMeta1},entityHeaderMeta2:{lineHeight:19,style:f.entityHeaderMeta2},entityHeaderMeta3:{lineHeight:17,style:f.entityHeaderMeta3},headline3:{lineHeight:20,style:f.headline3},headline4:{lineHeight:19.9995,style:f.headline4},headlineEmphasized1:{lineHeight:28,style:f.headlineEmphasized1},headlineEmphasized2:{lineHeight:24,style:f.headlineEmphasized2},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3},headlineEmphasized4:{lineHeight:19.9995,style:f.headlineEmphasized4},headlineEmphasized5:{lineHeight:20,style:f.headlineEmphasized5},meta1:{lineHeight:16,style:f.meta1},meta2:{lineHeight:16,style:f.meta2},meta3:{lineHeight:16,style:f.meta3},meta4:{lineHeight:15,style:f.meta4}},stylesForDenseMode:{body2:{lineHeight:20,style:f.body2ForDenseMode},body3:{lineHeight:20,style:f.body3ForDenseMode},body4:{lineHeight:16,style:f.body4ForDenseMode},bodyLink2:{lineHeight:20,style:f.bodyLink2ForDenseMode},bodyLink3:{lineHeight:20,style:f.bodyLink3ForDenseMode},bodyLink4:{lineHeight:16,style:f.bodyLink4ForDenseMode},button1:{lineHeight:18,style:f.button1ForDenseMode},button2:{lineHeight:18,style:f.button2ForDenseMode},entityHeaderMeta1:{lineHeight:18,style:f.entityHeaderMeta1ForDenseMode},entityHeaderMeta2:{lineHeight:18,style:f.entityHeaderMeta2ForDenseMode},headline3:{lineHeight:20,style:f.headline3ForDenseMode},headline4:{lineHeight:20,style:f.headline4ForDenseMode},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3ForDenseMode},headlineEmphasized4:{lineHeight:20,style:f.headlineEmphasized4ForDenseMode},meta1:{lineHeight:14,style:f.meta1ForDenseMode},meta2:{lineHeight:14,style:f.meta2ForDenseMode},meta3:{lineHeight:14,style:f.meta3ForDenseMode},meta4:{lineHeight:15,style:f.meta4ForDenseMode}}},y=h;l.default=y}),98);
__d("useXPlatReactTranslationKeyForTextParent",["cr:2099"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){}var u=(e=n("cr:2099"))!=null?e:{useTranslationKeyForTextParent:s},c=u.useTranslationKeyForTextParent;function d(){return c()}l.default=d}),98);
__d("MDSTextImpl.react",["BaseHeading.react","BaseText.react","BaseTextContext","CometDensityModeContext","JSResourceForInteraction","MDSTextConfig","react","useXPlatReactTranslationKeyForTextParent","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=r("JSResourceForInteraction")("MDSTooltipImpl.react").__setRef("MDSTextImpl.react"),p=o("BaseText.react").createBaseTextComponent(r("MDSTextConfig"),m),_={heading:{maxWidth:"x193iq5w",minWidth:"xeuugli",$$css:!0},text:{whiteSpace:"xq9mrsl",$$css:!0}},f={disabled:"disabledButton",highlight:"primaryDeemphasizedButton",secondary:"secondaryButton",white:"primaryButton"};function g(e,t){var n;return t&&(n=f[e])!=null?n:e}var h=["entityHeaderMeta1","entityHeaderMeta2","meta1","meta2","meta3","meta4"];function y(e){var t=e.ref,n=e.align,a=n===void 0?"auto":n,i=e.children,l=e.color,u=e.dir,m=u===void 0?"auto":u,f=e.id,y=e.isPrimaryHeading,C=y===void 0?!1:y,b=e.isSemanticHeading,v=b===void 0?!1:b,S=e.numberOfLines,R=e.showTruncationTooltip,L=R===void 0?!0:R,E=e.testid,k=e.truncationTooltip,I=e.type,T=d(function(){return h.includes(I)?"secondary":"primary"},[I]),D=g(l!=null?l:T,I==="button1"||I==="button2"),x=r("useXPlatReactTranslationKeyForTextParent")(),$=o("BaseTextContext").useBaseTextContext(),P=c(r("CometDensityModeContext")),N=P[0],M=($==null?void 0:$.nested)===!0,w=s.jsx(p,{alignment:a!=null?a:void 0,colorName:D,dir:M?void 0:m,id:f,isDenseModeEnabled:N,lines:S||0,ref:o("xplatToDOMRef").xplatToDOMRef(t),styleName:I,testid:void 0,truncationTooltip:L?{tooltip:k!=null?k:i}:void 0,xstyle:_.text,children:i},x);return v||C?s.jsx(r("BaseHeading.react"),{isPrimaryHeading:C,xstyle:_.heading,children:w}):w}y.displayName=y.name+" [from "+i.id+"]",y.displayName="MDSText",l.default=y}),98);
__d("MDSText.react",["MDSTextImpl.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("MDSTextImpl.react"),babelHelpers.extends({ref:i},a)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("MDSButtonImpl.react",["BaseStyledButton.react","BaseTheme.react","CometContainerPressableContext","FDSIcon.react","MDSText.react","emptyFunction","gkx","mergeRefs","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["addOnStart","disabled","icon","isContainerTarget","label","labelIsHidden","linkProps","onFocusIn","onFocusOut","onHoverIn","onHoverOut","onPress","onPressIn","onPressOut","padding","reduceEmphasis","size","suppressHydrationWarning","testid","type"],u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useEffect,_=d.useRef,f={destructive:{backgroundColor:"xb4tp27",$$css:!0},disabled:{backgroundColor:"xwcfey6",$$css:!0},primary:{backgroundColor:"xtvsq51",$$css:!0},primaryDeemphasized:{backgroundColor:"x1hr4nm9",$$css:!0},secondary:{backgroundColor:"x1qhmfi1",$$css:!0},secondaryDeemphasized:{backgroundColor:"x1f3278h",$$css:!0},secondaryDeemphasized_DEPRECATED:{backgroundColor:"xjbqb8w",$$css:!0},sizeLarge:{height:"xc9qbxq",$$css:!0},sizeMedium:{height:"x10w6t97",$$css:!0},sizeSmall:{borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",height:"x1fgtraw",$$css:!0}},g={dark:{"destructive-button-background":"rgba(235, 52, 52, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(155, 160, 168, 0.5)","primary-button-background":"#429AFF","secondary-button-background":"rgba(255, 255, 255, 0.19)"},light:{"destructive-button-background":"rgba(255, 41, 41, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(134, 142, 153, 0.5)","primary-button-background":"#0A7CFF","secondary-button-background":"rgba(0, 0, 0, 0.04)"},type:"VARIABLES"},h={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"white",textColor:"white"},y={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"primary",textColor:"secondary"};function C(e){switch(e){case"secondary":return y;case"destructive":case"primary":default:return h}}function b(e,t){var n=t.disabled,r=t.reduceEmphasis,o=C(e);return(n?o[":disabled"]:null)||(r?o[":deemphasized"]:null)||o}function v(t){var n,o=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.addOnStart,l=a.disabled,u=l===void 0?!1:l,d=a.icon,h=a.isContainerTarget,y=h===void 0?!1:h,C=a.label,v=a.labelIsHidden,S=v===void 0?!1:v,R=a.linkProps,L=a.onFocusIn,E=a.onFocusOut,k=a.onHoverIn,I=a.onHoverOut,T=a.onPress,D=a.onPressIn,x=a.onPressOut,$=a.padding,P=$===void 0?"normal":$,N=a.reduceEmphasis,M=N===void 0?!1:N,w=a.size,A=w===void 0?32:w,F=a.suppressHydrationWarning,O=F===void 0?!1:F,B=a.testid,W=a.type,q=W===void 0?"primary":W,U=babelHelpers.objectWithoutPropertiesLoose(a,s),V=b(q,{disabled:u,reduceEmphasis:M}),H=V.iconColor,G=V.textColor,z=_(null),j=_(null),K=m(r("CometContainerPressableContext"));return p(function(){y&&K&&K.onMount({onContextMenu:r("emptyFunction"),onPress:function(t){var e=z.current;e&&e.click()},target:R==null?void 0:R.target,url:R==null?void 0:R.url},j)},[K,y,R==null?void 0:R.url,R==null?void 0:R.target]),c.jsx(r("BaseTheme.react"),{config:r("gkx")("5751")?void 0:g,style:{width:"100%"},children:c.jsx(r("BaseStyledButton.react"),babelHelpers.extends({},U,{addOnStart:i,"aria-label":(n=U["aria-label"])!=null?n:C,content:S?null:c.jsx(r("MDSText.react"),{color:G,numberOfLines:1,type:"button2",children:C}),contentXstyle:[A===28&&f.sizeSmall,A===32&&f.sizeMedium,A===36&&f.sizeLarge],disabled:u,icon:d==null?null:c.jsx(r("FDSIcon.react"),{color:H,icon:d,size:24}),linkProps:R,onFocusIn:L,onFocusOut:E,onHoverIn:k,onHoverOut:I,onPress:T,onPressIn:D,onPressOut:x,padding:P,ref:r("mergeRefs")(z,o),suppressHydrationWarning:O,testid:void 0,xstyle:[q==="primary"&&f.primary,q==="secondary"&&f.secondary,q==="destructive"&&f.destructive,q==="secondary"&&M?r("gkx")("5751")?f.secondaryDeemphasized:f.secondaryDeemphasized_DEPRECATED:null,q==="primary"&&M&&f.primaryDeemphasized,u&&f.disabled]}))})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),98);
__d("MDSButton.react",["MDSButtonImpl.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("MDSButtonImpl.react"),babelHelpers.extends({ref:a},i)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("MDSColumn.react",["BaseView.react","MDSColumnContext","MDSColumnItem.react","MDSColumnItemContext","isIE11OrGreater","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","align","children","expanding","hasDividers","paddingHorizontal","paddingTop","paddingVertical","spacing","verticalAlign","xstyle"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useMemo,p={expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},inner:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0},root:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},_={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}},f={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0}},g={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}};function h(t){var n=o("react-compiler-runtime").c(43),a,i,l,s,c,m,h,y,C,b,v,S;n[0]!==t?(s=t.ref,c=t.align,a=t.children,m=t.expanding,h=t.hasDividers,y=t.paddingHorizontal,i=t.paddingTop,C=t.paddingVertical,b=t.spacing,v=t.verticalAlign,S=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=m,n[7]=h,n[8]=y,n[9]=C,n[10]=b,n[11]=v,n[12]=S):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],m=n[6],h=n[7],y=n[8],C=n[9],b=n[10],v=n[11],S=n[12]);var L=c===void 0?null:c,E=m===void 0?!1:m,k=h===void 0?!1:h,I=y===void 0?null:y,T=C===void 0?0:C,D=b===void 0?null:b,x=v===void 0?"top":v,$=d(r("MDSColumnContext")),P,N;n[13]!==L||n[14]!==k||n[15]!==I||n[16]!==D?(N={align:L,hasDividers:k,paddingHorizontal:I,spacing:D},n[13]=L,n[14]=k,n[15]=I,n[16]=D,n[17]=N):N=n[17],P=N;var M=P,w;n[18]!==E?(w=E===!0&&[p.expanding,r("isIE11OrGreater")&&p.expandingIE11],n[18]=E,n[19]=w):w=n[19];var A=f[T],F=i!=null&&_[i],O;n[20]!==w||n[21]!==A||n[22]!==F||n[23]!==S?(O=[p.root,w,A,F,S],n[20]=w,n[21]=A,n[22]=F,n[23]=S,n[24]=O):O=n[24];var B=x!=="top"&&g[x],W;n[25]!==B?(W=[p.inner,B],n[25]=B,n[26]=W):W=n[26];var q;n[27]!==a?(q=R(a),n[27]=a,n[28]=q):q=n[28];var U;n[29]!==M||n[30]!==q?(U=u.jsx(r("MDSColumnContext").Provider,{value:M,children:q}),n[29]=M,n[30]=q,n[31]=U):U=n[31];var V;n[32]!==W||n[33]!==U?(V=u.jsx(r("BaseView.react"),{xstyle:W,children:U}),n[32]=W,n[33]=U,n[34]=V):V=n[34];var H;n[35]!==l||n[36]!==s||n[37]!==O||n[38]!==V?(H=u.jsx(r("BaseView.react"),babelHelpers.extends({},l,{ref:s,xstyle:O,children:V})),n[35]=l,n[36]=s,n[37]=O,n[38]=V,n[39]=H):H=n[39];var G=H;if($!=null){var z=E!=null?E:void 0,j;return n[40]!==G||n[41]!==z?(j=u.jsx(r("MDSColumnItem.react"),{expanding:z,children:G}),n[40]=G,n[41]=z,n[42]=j):j=n[42],j}return G}var y=h,C={isFirst:!0,isLast:!1},b={isFirst:!1,isLast:!0},v={isFirst:!0,isLast:!0},S={isFirst:!1,isLast:!1};function R(e){return u.Children.toArray(e).map(function(e,t,n){var o=t===0,a=t===n.length-1,i=o&&a?v:o?C:a?b:S;return u.jsx(r("MDSColumnItemContext").Provider,{value:i,children:e},t)})}l.default=y}),98);
__d("MDSPressable.react",["CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["overlayRadius","ref"],s,u=s||(s=o("react")),c={hover:{backgroundColor:"x1yjz2vk",$$css:!0}};function d(e){switch(e){case"normal":return 6;case"50%":return"50%";case"compact":return 4;case"inherit":default:return}}function m(t){var n=o("react-compiler-runtime").c(10),a,i,l;n[0]!==t?(i=t.overlayRadius,l=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s;n[4]!==i?(s=d(i),n[4]=i,n[5]=s):s=n[5];var m;return n[6]!==a||n[7]!==l||n[8]!==s?(m=u.jsx(r("CometPressable.react"),babelHelpers.extends({overlayFocusVisibleStyle:c.hover,overlayHoveredStyle:c.hover,overlayRadius:s,ref:l},a)),n[6]=a,n[7]=l,n[8]=s,n[9]=m):m=n[9],m}l.default=m}),98);
__d("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9685249484907022"}),null);
__d("MessengerCreateVideoMeetupLinkMutation.graphql",["MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateVideoMeetupLinkResponsePayload",kind:"LinkedField",name:"create_video_meetup_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"meetup_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_audio_only",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MessengerCreateVideoMeetupLinkMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MessengerCreateVideoMeetupLinkMutation",selections:t},params:{id:n("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"),metadata:{},name:"MessengerCreateVideoMeetupLinkMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("MessengerCreateVideoMeetupLinkMutation",["MessengerCreateVideoMeetupLinkMutation.graphql","Promise","cr:1012418","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,o,a){return new(s||(s=n("Promise")))(function(i,l){var s,u,c,d,m,p,_,f,g,h,y;n("cr:1012418").commitMutation(t,{mutation:e!==void 0?e:e=n("MessengerCreateVideoMeetupLinkMutation.graphql"),onCompleted:function(t){var e,n,r,o,a=t==null||(e=t.create_video_meetup_link)==null||(e=e.meetup_link)==null?void 0:e.is_audio_only,s=t==null||(n=t.create_video_meetup_link)==null||(n=n.meetup_link)==null?void 0:n.link_url,u=t==null||(r=t.create_video_meetup_link)==null||(r=r.meetup_link)==null?void 0:r.link_hash,c=t==null||(o=t.create_video_meetup_link)==null||(o=o.meetup_link)==null?void 0:o.id;return s!=null&&u!=null&&a!=null?i({isAudioOnly:a,linkHash:u,linkId:c,linkUrl:s}):l({error:"Failed to create linkurl."})},onError:function(t){l(t)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",funnel_session_id:a,link_options:{availability_settings_options:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?{join_permission:o==null?void 0:o.joinPermission,visibility_mode:(s=o==null?void 0:o.visibilityMode)!=null?s:"NONE"}:void 0,chat_mode:(u=o==null?void 0:o.chatMode)!=null?u:null,is_audio_only:(c=o==null?void 0:o.isAudioOnly)!=null?c:null,is_live_enabled:(d=o==null?void 0:o.isLiveEnabled)!=null?d:null,is_room_join_requestable:(m=o==null?void 0:o.joinRequestable)!=null?m:null,link_surface:(p=o==null?void 0:o.linkSurface)!=null?p:r("gkx")("20836")?"WORKPLACE":void 0,revocation_behavior:(_=o==null?void 0:o.revocationBehavior)!=null?_:null,should_allow_anonymous_guests:(f=o==null?void 0:o.allowAnonymousGuests)!=null?f:!0,supports_pages:(g=o==null?void 0:o.supportsPages)!=null?g:!1,supports_profile_plus:(h=o==null?void 0:o.supportsProfilePlus)!=null?h:!1,visibility_mode:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?void 0:(y=o==null?void 0:o.visibilityMode)!=null?y:"NONE"}}}})})}l.default=u}),98);
__d("RoomsLinkUtils",["ConstUriUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("ConstUriUtils").getUri(e),r=n==null?void 0:n.getDomain(),a=n==null||(t=n.stripTrailingSlash())==null?void 0:t.getPath();if(a==null)return null;if(r==="msngr.com")return a.substring(1);var i=/^\/v(id)?\//;if(r==="m.me"&&i.test(a))return a.replace(i,"");var l=/^\/groupcall\/LINK:/;return l.test(a)?a.replace(l,""):null}l.getRoomsLinkHash=e}),98);
__d("VideoChatLinksUserActionsMultiplexLogger",["cr:1443591"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1443591")}),98);
__d("XGroupCallControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groupcall/{?call_context}/",Object.freeze({users_to_ring:[],has_video:!0,initialize_video:!0,auto_join:!1,use_joining_context:!1,has_seen_interstitial:!1,use_dapp:!1,is_e2ee_mandated:!1,use_www:!1}),void 0),s=e;l.default=s}),98);
__d("ZenonCallIdentifiersUtil",["Random"],(function(t,n,r,o,a,i,l){"use strict";function e(){return String(o("Random").uint32()+1)}l.generateZenonClientSessionID=e}),98);
__d("ZenonCallWindowErrors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonOpeningAnotherCallError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),l=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonConferenceNameMutationFailedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),s=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonIncompleteControllerParamsError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUnsupportedThreadTypeError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonCannotAcceptInviteError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonInviteNotFoundError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUninitializedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.OpeningAnotherCallError=e,i.ConferenceNameMutationFailedError=l,i.IncompleteControllerParamsError=s,i.UnsupportedThreadTypeError=u,i.CannotAcceptInviteError=c,i.InviteNotFoundError=d,i.UninitializedError=m}),66);
__d("ZenonPeerID",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e="MW_PEER_ID";function u(t){return t.length>0||s(0,33504),t==="MW_PEER_ID"?e:(isNaN(t)===!1||s(0,33551,t),t)}function c(t){return isNaN(t)||t===e?null:t}l.ZenonMWPeerID=e,l.convertStringToPeerID=u,l.convertPeerIDForLogging=c}),98);
__d("randomZenonNonce",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=2,s=6,u=36,c=2176782336;function d(){for(var t="",n=0;n<e;n++){for(var r=Math.floor(o("Random").random()*c).toString(u);r.length<s;)r="0"+r;t+=r}return t}l.default=d}),98);
__d("ZenonPreCallHookBuilderHelper",["ConstUriUtils","FBLogger","MessengerCreateVideoMeetupLinkMutation","RoomsLinkUtils","VideoChatLinksUserActionsMultiplexLogger","XGroupCallControllerRouteBuilder","ZenonActorHooks","ZenonCallIdentifiersUtil","ZenonCallWindowErrors","ZenonPeerID","ZenonSignalingProtocol","getErrorSafe","gkx","nullthrows","randomZenonNonce"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var n=e.callInviteModel,a=e.callWindowController,i=n.getCurrentInvite();if(i===null)throw new(o("ZenonCallWindowErrors")).InviteNotFoundError;if(i.type!=="ringing"||i.context.type!=="thread")throw new(o("ZenonCallWindowErrors")).CannotAcceptInviteError;var l=r("randomZenonNonce")(),s=i.context.thread,u=a.initCall({context:{controllerParams:i.controllerParams,intent:"accept invite"},hideE2eeAttributions:t,isE2eeMandated:i.isE2eeMandated,joinContext:{thread:s!=null?s:{id:"0",type:2},type:"thread"},mediaType:i.requestingVideo?"video":"audio",nonce:l,representedID:i.receiverUserId}),c=u[0],d=u[1];n.accept(l,{isPopupBlocked:c===null}),await d}async function s(e,t,n,a,i,l){if(l===void 0&&(l={allowAnonymousGuests:!r("gkx")("20836")}),e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;p(i,n,a).setEvent("meetup_attempt_create_meetup").log();try{var s=await r("MessengerCreateVideoMeetupLinkMutation")(t,l,i),u=s.linkUrl;return u!=null?(p(i,n,a).setEvent("meetup_create_success").setVideoCallLinkURLRaw(u).log(),u):(p(i,n,a).setEvent("meetup_create_failed").log(),u)}catch(e){var c=r("getErrorSafe")(e);throw p(i,n,a).setEvent("meetup_create_failed").log(),p(i,n,a).setEvent("error").setErrorType("LinkCreationError "+c.name).setErrorDetails(c.message).log(),c}}async function u(e){var t=e.actorID,n=e.callback_users,a=e.context,i=e.forceSkipChildLobby,l=i===void 0?!1:i,s=e.funnelSessionID,u=s===void 0?null:s,c=e.hasVideo,p=c===void 0?!0:c,_=e.linkUrl,f=e.referrerContext,g=f===void 0?null:f,h=e.skipLinkUrlRewrite,y=h===void 0?!1:h,C=e.startCallImmediately,b=C===void 0?!1:C,v=e.trigger;if(a===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var S=a.callWindowController,R=a.incomingRingSDK,L=r("randomZenonNonce")(),E=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),k=_;if(!y){var I,T=(I=o("ConstUriUtils").getUri(_))==null?void 0:I.getQueryParam("funnel_session_id"),D=d(_);k=m(D,b?L:null,n,T!=null?String(T):u,l,g,t,v,p)}if(k==null)return Promise.reject("An invalid URI was provided");var x=S.initCall({context:{existingCall:null,intent:"start or join",invitees:[],signalingID:E},joinContext:{linkUrl:k,type:"link"},mediaType:"video",nonce:L,representedID:o("ZenonActorHooks").ZenonActor.getID()}),$=x[0],P=x[1];R.startCallIntent(L,{callTrigger:v!=null?v:"meetup_join",isE2eeMandated:!1,isPopupBlocked:$===null,isVideo:p,peerID:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:E}),await P}async function c(e,t){var n=t.existingCall,a=t.extra,i=t.hideE2eeAttributions,l=t.invitees,s=t.isE2eeMandated,u=t.mediaType,c=t.representedID,d=t.thread,m=t.trigger;if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var p=e.callWindowController,_=e.incomingRingSDK,f=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),g=r("randomZenonNonce")(),h=p.initCall({context:{existingCall:n,intent:"start or join",invitees:l,signalingID:f},extra:a,hideE2eeAttributions:i,isE2eeMandated:s,joinContext:{thread:d,type:"thread"},mediaType:u,nonce:g,representedID:c!=null?c:o("ZenonActorHooks").ZenonActor.getID()}),y=h[0],C=h[1];_.startCallIntent(g,{callTrigger:m,isE2eeMandated:s!=null?s:!1,isPopupBlocked:y===null,isVideo:u==="video",peerID:d.type===1?d.id:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:f}),await C}function d(e){var t=o("RoomsLinkUtils").getRoomsLinkHash(e);return t==null&&r("FBLogger")("rtc_www").mustfix('Could not extract LinkHash from Video Chat Link. Link = "%s"',e),t}function m(e,t,n,o,a,i,l,s,u){if(e==null)return"";var c={call_context:"LINK:"+e,call_trigger:s!=null?s:"",has_video:u,users_to_ring:n!=null?n:[]};return t!=null&&(c.nonce=t),o!=null&&(c.funnel_session_id=o),a===!0&&(c.auto_join=!0),i!=null&&(c.referrer_context=i),l!=null&&(c.av=l),r("nullthrows")(r("XGroupCallControllerRouteBuilder").buildUri(c).getQualifiedUri()).toString()}function p(e,t,n){return new(r("VideoChatLinksUserActionsMultiplexLogger"))().setFunnelSessionIDRaw(e).setSurface(t).setComponent(n)}l.acceptCall=e,l.createMeetup=s,l.joinMeetup=u,l.startCall=c}),98);
__d("useZenonCallInvite",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return e?e.getCurrentInvite():null},t[0]=e,t[1]=n):n=t[1];var r=c(n),a=r[0],i=r[1],l,s;return t[2]!==e?(l=function(){if(e){var t=e.addListener("callInvite",i);return function(){t.remove()}}else i(null)},s=[e],t[2]=e,t[3]=l,t[4]=s):(l=t[3],s=t[4]),u(l,s),a}l.default=d}),98);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","Promise","ZenonPreCallHookBuilderHelper","err","gkx","promiseDone","react","react-compiler-runtime","useZenonCallInvite"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useDebugValue,p=u.useEffect,_=6e4;function f(e){function t(t){var n=o("react-compiler-runtime").c(3),r=d(e),a;return n[0]!==r||n[1]!==t?(a=function(){return o("ZenonPreCallHookBuilderHelper").acceptCall(r,t)},n[0]=r,n[1]=t,n[2]=a):a=n[2],a}return t}function g(e){function t(){var t=d(e),n=r("useZenonCallInvite")(t?t.callInviteModel:null);return m(n),n}return t}function h(e,t){return function(n,a,i){function l(){var l=o("react-compiler-runtime").c(6),s=d(e),u=n(),c=a(),m=i(),p=t(),_;return l[0]!==s||l[1]!==u||l[2]!==c||l[3]!==m||l[4]!==p?(_=function(t){if(r("gkx")("24231")){var e=t.existingCall,n=t.thread;if(!s||!s.incomingRingSDK.isCallSupported({threadType:n.type,type:"thread"}))m(t);else e:switch(n.type){case 1:{r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[n.id]})));break e}case 15:{if(n.secureOneToOneThreadPeerId==null)throw r("err")("secureOneToOneThreadPeerId should be defined when starting a call from a secure 1:1 thread");r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[n.secureOneToOneThreadPeerId]})));break e}case 2:case 16:{e===null||e.call_state==="NO_ONGOING_CALL"?u(t,function(e){r("promiseDone")(p(babelHelpers.extends({},t,{invitees:e})))}):c(t,function(){r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[]})))});break e}default:r("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",n.type)}}},l[0]=s,l[1]=u,l[2]=c,l[3]=m,l[4]=p,l[5]=_):_=l[5],_}return l}}function y(e,t){function n(){var n=o("react-compiler-runtime").c(4),r=d(e),a=t(),i,l;n[0]!==r||n[1]!==a?(i=function(){if(r&&a&&a.type==="ringing"){var e=window.setTimeout(function(){r.callInviteModel.decline("NoAnswerTimeout")},_);return function(){window.clearTimeout(e)}}},l=[r,a],n[0]=r,n[1]=a,n[2]=i,n[3]=l):(i=n[2],l=n[3]),p(i,l)}return n}function C(t){function a(){var a=o("react-compiler-runtime").c(2),i=d(t),l;return a[0]!==i?(l=function(a){var t=a.existingCall,l=a.extra,s=a.hideE2eeAttributions,u=a.invitees,c=a.isE2eeMandated,d=a.mediaType,m=a.representedID,p=a.thread,_=a.trigger;return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").startCall(i,{existingCall:t,extra:l,hideE2eeAttributions:s,invitees:u,isE2eeMandated:c,mediaType:d,representedID:m,thread:p,trigger:_}):(e||(e=n("Promise"))).resolve()},a[0]=i,a[1]=l):l=a[1],l}return a}function b(t){function a(){var a=o("react-compiler-runtime").c(3),i=d(t),l=o("CometRelay").useRelayEnvironment(),s;return a[0]!==i||a[1]!==l?(s=function(a,s,u,c){return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").createMeetup(i,l,a,s,u,c):(e||(e=n("Promise"))).resolve(null)},a[0]=i,a[1]=l,a[2]=s):s=a[2],s}return a}function v(t){function a(){var a=o("react-compiler-runtime").c(2),i=d(t),l;return a[0]!==i?(l=function(a,l){var t=l===void 0?{}:l;if(!r("gkx")("24231"))return(e||(e=n("Promise"))).resolve();var s=t!=null?t:{},u=s.actorID,c=s.callbackUsers,d=s.mediaType,m=s.referrerContext,p=s.startCallImmediately,_=s.trigger;return o("ZenonPreCallHookBuilderHelper").joinMeetup({actorID:u,callback_users:c,context:i,forceSkipChildLobby:!1,hasVideo:d!=null?d==="video":!0,linkUrl:a,referrerContext:m,startCallImmediately:p,trigger:_})},a[0]=i,a[1]=l):l=a[1],l}return a}l.createAcceptCallCallbackHook=f,l.createCallInviteHook=g,l.createInviteAndStartCallCallbackHookFactory=h,l.createNoAnswerTimeoutHook=y,l.createStartCallCallbackHook=C,l.createCreateMeetupCallbackHook=b,l.createJoinMeetupCallbackHook=v}),98);
__d("RTWebPreCallHooks",["RTWebPreCallContext","ZenonPreCallHookBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s=o("ZenonPreCallHookBuilder")).createAcceptCallCallbackHook(e=r("RTWebPreCallContext")),c=s.createCallInviteHook(e),d=s.createNoAnswerTimeoutHook(e,c),m=s.createStartCallCallbackHook(e),p=s.createCreateMeetupCallbackHook(e),_=s.createJoinMeetupCallbackHook(e),f=s.createInviteAndStartCallCallbackHookFactory(e,m);l.useAcceptCallCallback=u,l.useCallInvite=c,l.useNoAnswerTimeout=d,l.useStartCallCallback=m,l.useCreateMeetupCallback=p,l.useJoinMeetupCallback=_,l.createInviteAndStartCallCallbackHook=f}),98);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setCallEndReason=function(t){return this.$1.call_end_reason=t,this},t.setCallID=function(t){return this.$1.call_id=t,this},t.setCameraEnabled=function(t){return this.$1.camera_enabled=t,this},t.setClientAppVersion=function(t){return this.$1.client_app_version=t,this},t.setClientLockStatus=function(t){return this.$1.client_lock_status=t,this},t.setClientMonoTimeMs=function(t){return this.$1.client_mono_time_ms=t,this},t.setClienttime=function(t){return this.$1.clienttime=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setConferenceNameRaw=function(t){return this.$1.conference_name_raw=t,this},t.setCreationAction=function(t){return this.$1.creation_action=t,this},t.setErrorDetails=function(t){return this.$1.error_details=t,this},t.setErrorType=function(t){return this.$1.error_type=t,this},t.setEvent=function(t){return this.$1.event=t,this},t.setEventDetails=function(t){return this.$1.event_details=n("GeneratedLoggerUtils").serializeMap(t),this},t.setEventFireTimestamp=function(t){return this.$1.event_fire_timestamp=t,this},t.setEventFireTimestampOnClient=function(t){return this.$1.event_fire_timestamp_on_client=t,this},t.setExceptionObject=function(t){return this.$1.exception_object=t,this},t.setExperimentsEnabled=function(t){return this.$1.experiments_enabled=n("GeneratedLoggerUtils").serializeMap(t),this},t.setFalcoBatchSequence=function(t){return this.$1.falco_batch_sequence=t,this},t.setFunnelSessionIDRaw=function(t){return this.$1.funnel_session_id_raw=t,this},t.setGroupID=function(t){return this.$1.group_id=t,this},t.setGroupSize=function(t){return this.$1.group_size=t,this},t.setGuestUserID=function(t){return this.$1.guest_user_id=t,this},t.setKickedUserID=function(t){return this.$1.kicked_user_id=t,this},t.setLinkShareTo=function(t){return this.$1.link_share_to=t,this},t.setLocalCallID=function(t){return this.$1.local_call_id=t,this},t.setMediaDevices=function(t){return this.$1.media_devices=t,this},t.setMicrophoneEnabled=function(t){return this.$1.microphone_enabled=t,this},t.setOpenLinkFrom=function(t){return this.$1.open_link_from=t,this},t.setOpenLinkFromAppVersion=function(t){return this.$1.open_link_from_app_version=t,this},t.setReason=function(t){return this.$1.reason=t,this},t.setReferralSurface=function(t){return this.$1.referral_surface=t,this},t.setRoomIDRaw=function(t){return this.$1.room_id_raw=t,this},t.setServerInfoData=function(t){return this.$1.server_info_data=t,this},t.setSource=function(t){return this.$1.source=t,this},t.setStatus=function(t){return this.$1.status=t,this},t.setSurface=function(t){return this.$1.surface=t,this},t.setTargetedUserIds=function(t){return this.$1.targeted_user_ids=n("GeneratedLoggerUtils").serializeVector(t),this},t.setThreadSyncRoomData=function(t){return this.$1.thread_sync_room_data=n("GeneratedLoggerUtils").serializeMap(t),this},t.setThreadType=function(t){return this.$1.thread_type=t,this},t.setUserIdsToBeRemoved=function(t){return this.$1.user_ids_to_be_removed=n("GeneratedLoggerUtils").serializeVector(t),this},t.setVideoCallLinkHashRaw=function(t){return this.$1.video_call_link_hash_raw=t,this},t.setVideoCallLinkIDRaw=function(t){return this.$1.video_call_link_id_raw=t,this},t.setVideoCallLinkIdentifierRaw=function(t){return this.$1.video_call_link_identifier_raw=t,this},t.setVideoCallLinkURLRaw=function(t){return this.$1.video_call_link_url_raw=t,this},t.updateExtraData=function(t){var e=n("nullthrows")(n("GeneratedLoggerUtils").serializeMap(t));return n("GeneratedLoggerUtils").checkExtraDataFieldNames(e,l),this.$1=babelHelpers.extends({},this.$1,e),this},t.addToExtraData=function(t,n){var e={};return e[t]=n,this.updateExtraData(e)},e})(),l={call_end_reason:!0,call_id:!0,camera_enabled:!0,client_app_version:!0,client_lock_status:!0,client_mono_time_ms:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,error_details:!0,error_type:!0,event:!0,event_details:!0,event_fire_timestamp:!0,event_fire_timestamp_on_client:!0,exception_object:!0,experiments_enabled:!0,falco_batch_sequence:!0,funnel_session_id_raw:!0,group_id:!0,group_size:!0,guest_user_id:!0,kicked_user_id:!0,link_share_to:!0,local_call_id:!0,media_devices:!0,microphone_enabled:!0,open_link_from:!0,open_link_from_app_version:!0,reason:!0,referral_surface:!0,room_id_raw:!0,server_info_data:!0,source:!0,status:!0,surface:!0,targeted_user_ids:!0,thread_sync_room_data:!0,thread_type:!0,user_ids_to_be_removed:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_identifier_raw:!0,video_call_link_url_raw:!0};i.default=e}),66);
__d("ZenonProductConnectFunnel",["FBLogger","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return Math.trunc((e||(e=r("performanceNow")))())},u=(function(){function e(){this.$6=null,this.$7=null,this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$8=new Map,this.$9=new Map}var t=e.prototype;return t.$10=function(t){var e=this.$8.get(t);if(e!=null)return e;e={acceptedTs:this.$3,connectedTs:null,connectingTs:null,contactingTs:null,endCallTs:null,permissionsReceivedTs:this.$5,permissionsRequestTs:this.$4,ringingTs:this.$2,triggeredTs:this.$1};var n={cameraPermission:this.$6,microphonePermission:this.$7};return this.clearPreJoinTimings(),this.$8.set(t,e),this.$9.set(t,n),e},t.$11=function(t,n){var e,o=t==null||(e=t.getLogIdentifiers())==null?void 0:e.clientSessionID;if(o==null){r("FBLogger")("rtc_www").warn("ProductConnectFunnel: could not record UI event due to missing signaling ID");return}var a=this.$10(o);a[n]==null&&(a[n]=s())},t.getTimings=function(t){return this.$8.get(t)},t.getPreJoinTimings=function(){return{acceptedTs:this.$3,ringingTs:this.$2,triggeredTs:this.$1}},t.clearPreJoinTimings=function(){this.$3=null,this.$2=null,this.$1=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null},t.setPreJoinTimings=function(t){this.$3=t.acceptedTs,this.$2=t.ringingTs,this.$1=t.triggeredTs},t.getAnnotations=function(t){return this.$9.get(t)},t.remove=function(t){this.clearPreJoinTimings(),this.$8.delete(t),this.$9.delete(t)},t.setUITriggered=function(){var e;(e=this.$1)!=null||(this.$1=s())},t.setUIPermissionsRequest=function(){var e=this;if(!(this.$4!=null||!navigator.permissions)){this.$4=s();var t=navigator.permissions;r("promiseDone")(t.query({name:"microphone"}).then(function(t){e.$7=t.state})),r("promiseDone")(t.query({name:"camera"}).then(function(t){e.$6=t.state}))}},t.setUIPermissionsReceived=function(){var e;this.$4!=null&&((e=this.$5)!=null||(this.$5=s()))},t.setUIAccepted=function(){var e;(e=this.$3)!=null||(this.$3=s())},t.setUIConnected=function(t){this.$11(t,"connectedTs")},t.setUIConnecting=function(t){this.$11(t,"connectingTs")},t.setUIRinging=function(){var e;(e=this.$2)!=null||(this.$2=s())},t.setUIContacting=function(t){this.$11(t,"contactingTs")},t.setUIEnded=function(t){this.$11(t,"endCallTs")},e})(),c=new u;l.default=c}),98);
__d("bs_curry",["bs_caml_array"],(function(t,n,r,o,a,i){"use strict";function e(t,r){for(;;){var o=r,a=t,i=a.length,l=i===0?1:i,s=o.length,u=l-s|0;if(u===0)return a.apply(null,o);if(u>=0)return(function(t,n){return function(r){return e(t,n.concat([r]))}})(a,o);r=n("bs_caml_array").sub(o,l,-u|0),t=a.apply(null,n("bs_caml_array").sub(o,0,l))}}function l(t,n){var r=t.length;if(r===1)return t(n);switch(r){case 1:return t(n);case 2:return function(e){return t(n,e)};case 3:return function(e,r){return t(n,e,r)};case 4:return function(e,r,o){return t(n,e,r,o)};case 5:return function(e,r,o,a){return t(n,e,r,o,a)};case 6:return function(e,r,o,a,i){return t(n,e,r,o,a,i)};case 7:return function(e,r,o,a,i,l){return t(n,e,r,o,a,i,l)};default:return e(t,[n])}}function s(e){var t=e.length;return t===1?e:function(t){return l(e,t)}}function u(t,n,r){var o=t.length;if(o===2)return t(n,r);switch(o){case 1:return e(t(n),[r]);case 2:return t(n,r);case 3:return function(e){return t(n,r,e)};case 4:return function(e,o){return t(n,r,e,o)};case 5:return function(e,o,a){return t(n,r,e,o,a)};case 6:return function(e,o,a,i){return t(n,r,e,o,a,i)};case 7:return function(e,o,a,i,l){return t(n,r,e,o,a,i,l)};default:return e(t,[n,r])}}function c(e){var t=e.length;return t===2?e:function(t,n){return u(e,t,n)}}function d(t,n,r,o){var a=t.length;if(a===3)return t(n,r,o);switch(a){case 1:return e(t(n),[r,o]);case 2:return e(t(n,r),[o]);case 3:return t(n,r,o);case 4:return function(e){return t(n,r,o,e)};case 5:return function(e,a){return t(n,r,o,e,a)};case 6:return function(e,a,i){return t(n,r,o,e,a,i)};case 7:return function(e,a,i,l){return t(n,r,o,e,a,i,l)};default:return e(t,[n,r,o])}}function m(e){var t=e.length;return t===3?e:function(t,n,r){return d(e,t,n,r)}}function p(t,n,r,o,a){var i=t.length;if(i===4)return t(n,r,o,a);switch(i){case 1:return e(t(n),[r,o,a]);case 2:return e(t(n,r),[o,a]);case 3:return e(t(n,r,o),[a]);case 4:return t(n,r,o,a);case 5:return function(e){return t(n,r,o,a,e)};case 6:return function(e,i){return t(n,r,o,a,e,i)};case 7:return function(e,i,l){return t(n,r,o,a,e,i,l)};default:return e(t,[n,r,o,a])}}function _(e){var t=e.length;return t===4?e:function(t,n,r,o){return p(e,t,n,r,o)}}function f(t,n,r,o,a,i){var l=t.length;if(l===5)return t(n,r,o,a,i);switch(l){case 1:return e(t(n),[r,o,a,i]);case 2:return e(t(n,r),[o,a,i]);case 3:return e(t(n,r,o),[a,i]);case 4:return e(t(n,r,o,a),[i]);case 5:return t(n,r,o,a,i);case 6:return function(e){return t(n,r,o,a,i,e)};case 7:return function(e,l){return t(n,r,o,a,i,e,l)};default:return e(t,[n,r,o,a,i])}}function g(e){var t=e.length;return t===5?e:function(t,n,r,o,a){return f(e,t,n,r,o,a)}}function h(t,n,r,o,a,i,l){var s=t.length;if(s===6)return t(n,r,o,a,i,l);switch(s){case 1:return e(t(n),[r,o,a,i,l]);case 2:return e(t(n,r),[o,a,i,l]);case 3:return e(t(n,r,o),[a,i,l]);case 4:return e(t(n,r,o,a),[i,l]);case 5:return e(t(n,r,o,a,i),[l]);case 6:return t(n,r,o,a,i,l);case 7:return function(e){return t(n,r,o,a,i,l,e)};default:return e(t,[n,r,o,a,i,l])}}function y(e){var t=e.length;return t===6?e:function(t,n,r,o,a,i){return h(e,t,n,r,o,a,i)}}function C(t,n,r,o,a,i,l,s){var u=t.length;if(u===7)return t(n,r,o,a,i,l,s);switch(u){case 1:return e(t(n),[r,o,a,i,l,s]);case 2:return e(t(n,r),[o,a,i,l,s]);case 3:return e(t(n,r,o),[a,i,l,s]);case 4:return e(t(n,r,o,a),[i,l,s]);case 5:return e(t(n,r,o,a,i),[l,s]);case 6:return e(t(n,r,o,a,i,l),[s]);case 7:return t(n,r,o,a,i,l,s);default:return e(t,[n,r,o,a,i,l,s])}}function b(e){var t=e.length;return t===7?e:function(t,n,r,o,a,i,l){return C(e,t,n,r,o,a,i,l)}}function v(t,n,r,o,a,i,l,s,u){var c=t.length;if(c===8)return t(n,r,o,a,i,l,s,u);switch(c){case 1:return e(t(n),[r,o,a,i,l,s,u]);case 2:return e(t(n,r),[o,a,i,l,s,u]);case 3:return e(t(n,r,o),[a,i,l,s,u]);case 4:return e(t(n,r,o,a),[i,l,s,u]);case 5:return e(t(n,r,o,a,i),[l,s,u]);case 6:return e(t(n,r,o,a,i,l),[s,u]);case 7:return e(t(n,r,o,a,i,l,s),[u]);default:return e(t,[n,r,o,a,i,l,s,u])}}function S(e){var t=e.length;return t===8?e:function(t,n,r,o,a,i,l,s){return v(e,t,n,r,o,a,i,l,s)}}i.app=e,i._1=l,i.__1=s,i._2=u,i.__2=c,i._3=d,i.__3=m,i._4=p,i.__4=_,i._5=f,i.__5=g,i._6=h,i.__6=y,i._7=C,i.__7=b,i._8=v,i.__8=S}),null);
__d("bs_belt_Option",["bs_caml_option","bs_curry"],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e!==void 0&&t(n("bs_caml_option").valFromOption(e)))return e}function l(t,r){return e(t,n("bs_curry").__1(r))}function s(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function u(e,t){return s(e,n("bs_curry").__1(t))}function c(e){if(e!==void 0)return n("bs_caml_option").valFromOption(e);throw{RE_EXN_ID:"Not_found",Error:new Error}}function d(e,t,r){return e!==void 0?r(n("bs_caml_option").valFromOption(e)):t}function m(e,t,r){return d(e,t,n("bs_curry").__1(r))}function p(e,t){if(e!==void 0)return n("bs_caml_option").some(t(n("bs_caml_option").valFromOption(e)))}function _(e,t){return p(e,n("bs_curry").__1(t))}function f(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function g(e,t){return f(e,n("bs_curry").__1(t))}function h(e,t){return e!==void 0?n("bs_caml_option").valFromOption(e):t}function y(e){return e!==void 0}function C(e){return e===void 0}function b(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):!1:t===void 0}function v(e,t,r){return b(e,t,n("bs_curry").__2(r))}function S(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):1:t!==void 0?-1:0}function R(e,t,r){return S(e,t,n("bs_curry").__2(r))}i.keepU=e,i.keep=l,i.forEachU=s,i.forEach=u,i.getExn=c,i.mapWithDefaultU=d,i.mapWithDefault=m,i.mapU=p,i.map=_,i.flatMapU=f,i.flatMap=g,i.getWithDefault=h,i.isSome=y,i.isNone=C,i.eqU=b,i.eq=v,i.cmpU=S,i.cmp=R}),null);
__d("useGroupCallBlockedUserWarningInterstitial",["I64","JSResourceForInteraction","MAWMiActMappingTableAPI","Promise","ReQL","WAJids","nullthrows","react","react-compiler-runtime","useBlockedUserInterstitial","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=function(t,r,a){return r===!0?t.runInTransaction(function(e){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,o("WAJids").unsafeCoerceToChatJid(a+"@g.us"))},"readonly",void 0,void 0,i.id+":41"):(s||(s=n("Promise"))).resolve((u||(u=o("I64"))).of_string(a))};function p(e,t,n){return o("useBlockedUserInterstitial").getBlockedUserQuery(e,t,r("nullthrows")(n)).then(function(e){return e==null?[]:o("ReQL").toArrayAsync(e).then(function(e){return e})})}function _(){var t=o("react-compiler-runtime").c(6),n=(e||(e=r("useReStore")))(),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("JSResourceForInteraction")("MWReceivedGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),t[0]=a):a=t[0];var i=r("useMWXLazyDialog")(a),l=i[0],s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=r("JSResourceForInteraction")("MWGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),t[1]=s):s=t[1];var u=r("useMWXLazyDialog")(s),c=u[0],d;return t[2]!==n||t[3]!==c||t[4]!==l?(d=function(t){var e=t.callType,o=t.isE2eeMandated,a=t.onContinue,i=t.threadID,s=t.threadType;m(n,o,i).then(function(t){return t==null?a():p(n,t,r("nullthrows")(s)).then(function(n){if(n.length===0)return a();e==="start"?c({blockedUsers:n,onContinue:a,threadKey:t}):l({blockedUsers:n,onContinue:a,threadKey:t})})})},t[2]=n,t[3]=c,t[4]=l,t[5]=d):d=t[5],d}l.fetchThreadKeyFromID=m,l.getBlockedUsers=p,l.useGroupCallBlockedUserWarningInterstitial=_}),98);/*FB_PKG_DELIM*/
__d("C4GFalcoLoggerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("C4GFalcoLoggerDeferred");function s(t){var n=t.action,r=t.category_id,o=t.client_extras,a=t.community_id,i=t.entry_point,l=t.event,s=t.field_value,u=t.group_id,c=t.parent_surface,d=t.source,m=t.surface,p=t.thread_id;e.onReady(function(e){return e.log(function(){return{action:n,category_id:r,client_extras:o,community_id:a,entry_point:i,event:l,field_value:s,group_id:u,parent_surface:c,source:d,surface:m,thread_id:p}})})}l.logC4GEngagementFalcoEvent=s}),98);
__d("ChatMuteStore",[],(function(t,n,r,o,a,i){"use strict";var e={EightHours:288e5,FifteenMinutes:9e5,Indefinitely:-1,OneDay:864e5,OneHour:36e5},l={Both:"bothMuteScope",Call:"callMuteScope",Message:"messageMuteScope"},s={Duration:"setMuteDuration",Scope:"setMuteScope"},u={type:l.Message},c={type:l.Call},d={type:l.Both},m={duration:e.FifteenMinutes,scope:u};function p(e,t){return t.type===s.Scope?{duration:e.duration,scope:t.scope}:{duration:t.duration,scope:e.scope}}i.ChatMuteOptions=e,i.ChatMuteScopeTypes=l,i.SetMuteActionTypes=s,i.message=u,i.call=c,i.both=d,i.initialState=m,i.reducer=p}),66);
__d("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9637409876354840"}),null);
__d("GroupsCometCMDisabledChatDialogQuery$Parameters",["GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometCMDisabledChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometCMDisabledChatDialog.entrypoint",["GroupsCometCMDisabledChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("GroupsCometCMDisabledChatDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("GroupsCometCMDisabledChatDialog.react").__setRef("GroupsCometCMDisabledChatDialog.entrypoint")};l.default=e}),98);
__d("GroupsCometJoinChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9560132654105701"}),null);
__d("GroupsCometJoinChatDialogQuery$Parameters",["GroupsCometJoinChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometJoinChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometJoinChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometJoinChatDialog.entrypoint",["GroupsCometJoinChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.groupID,n=t.threadID;return{queries:{myQueryReference:{parameters:r("GroupsCometJoinChatDialogQuery$Parameters"),variables:{groupID:e,threadID:n}}}}},root:r("JSResourceForInteraction")("GroupsCometJoinChatDialog.react").__setRef("GroupsCometJoinChatDialog.entrypoint")};l.default=e}),98);
__d("LSClearTables",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(e){return t.forEach(t.db.table(67).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(66).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(65).fetch(),function(e){return e.delete()})},function(n){return e[0]===void 0||e[0]===!0?t.forEach(t.db.table(69).fetch(),function(e){return e.delete()}):t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSSearchClearTablesStoredProcedure",e.__tables__=["search_queries","server_search_sections","server_search_results","message_search_results"],a.exports=e}),null);
__d("LSClearTablesStoredProcedure",["LSClearTables","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSClearTables"),a.clearMessageResults);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceImmediateSync",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({minTimeToSyncTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceImmediateSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSForceImmediateSyncStoredProcedure",["LSForceImmediateSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSForceImmediateSync"),a.dbType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticFetchPendingGroupInvite",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("link_hash",e[0]),r[0].set("image_width",e[1]),r[0].set("image_height",e[2]),r[0].set("has_vanity_name",!1),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"fetch_pending_group_invite",t.i64.cast([0,434]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(235).put({linkHash:e[0],threadTitle:"",lastThreadActivityMs:t.i64.cast([0,0]),groupImageUrl:"",groupImageUrlFallback:"",groupImageUrlExpirationTimestampMs:t.i64.cast([0,0]),joinExplainerText:"",numberOfMembers:t.i64.cast([0,0]),isInApprovalQueue:!1,isSubscribed:!1,canJoin:!1,fbGroupDescription:"",communityImageUrl:"",communityImageUrlFallback:"",communityImageUrlExpirationTimestampMs:t.i64.cast([0,0]),linkJoinType:t.i64.cast([0,1]),fbGroupVisibility:t.i64.cast([0,1]),communityId:t.i64.cast([0,0])})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticFetchPendingGroupInviteStoredProcedure",e.__tables__=["group_invitations_pending"],a.exports=e}),null);
__d("LSOptimisticFetchPendingGroupInviteStoredProcedure",["LSOptimisticFetchPendingGroupInvite","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticFetchPendingGroupInvite"),a.linkHash,a.imageWidth,a.imageHeight);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticMarkThreadReadV2StoredProcedure",["LSOptimisticMarkThreadReadV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticMarkThreadReadV2"),a.threadKey,a.readWatermarkTimestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSReadReceiptSettingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,DISABLED:1,ENABLED:2});i.default=e}),66);
__d("useMAWUnrecoverableDbError",["MAWUnrecoverableDbErrors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("MAWUnrecoverableDbErrors").getError(),e[0]=t):t=e[0];var n=c(t),r=n[0],a=n[1],i,l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("MAWUnrecoverableDbErrors").subscribe(e);return function(){t()}},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l),r}l.default=d}),98);
__d("useWAExceededStorageQuota",["MAWUnrecoverableDbErrors","WAExceededStorageQuota","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("WAExceededStorageQuota").getExceededStorageQuota(),e[0]=t):t=e[0];var n=d(t),r=n[0],a=n[1],i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("WAExceededStorageQuota").subscribe(e);return function(){t()}},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l);var s,c;return e[3]!==r?(c=r?new(o("MAWUnrecoverableDbErrors")).WAExceededStorageQuotaError:null,e[3]=r,e[4]=c):c=e[4],s=c,s}l.default=m}),98);
__d("MAWUnrecoverableErrorBoundary.react",["react","react-compiler-runtime","useMAWUnrecoverableDbError","useWAExceededStorageQuota"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.fallback,i=r("useMAWUnrecoverableDbError")(),l=r("useWAExceededStorageQuota")(),s=i!=null?i:l;if(s!=null&&a!=null){var u;return t[0]!==s||t[1]!==a?(u=a(s),t[0]=s,t[1]=a,t[2]=u):u=t[2],u}else return n}l.default=u}),98);
__d("MWAddOnCircleContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},disabled:{backgroundColor:"x1281ex9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(9),n=e.ariaHidden,r=e.children,a=e.disabled,i=e.size,l=n===void 0?!1:n,c=a===void 0?!1:a,d=c&&u.disabled,m;t[0]!==i?(m=[{height:i,width:i}],t[0]=i,t[1]=m):m=t[1];var p;t[2]!==d||t[3]!==m?(p=[u.container,d,m],t[2]=d,t[3]=m,t[4]=p):p=t[4];var _;return t[5]!==l||t[6]!==r||t[7]!==p?(_=s.jsx(o("react-strict-dom").html.div,{"aria-hidden":l,style:p,children:r}),t[5]=l,t[6]=r,t[7]=p,t[8]=_):_=t[8],_}l.default=c}),98);
__d("MWCMGetValidId",["FBLogger","I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t===void 0&&(t=!1),u(e,t)!=null}function u(t,n){if(n===void 0&&(n=!1),t==null){n&&r("FBLogger")("cc_web").warn("FB Group ID is not defined");return}if((e||(e=o("I64"))).le(t,(e||(e=o("I64"))).zero)){n&&r("FBLogger")("cc_web").warn("FB Group ID is invalid: %s",(e||(e=o("I64"))).to_string(t));return}return t}l.MWCMHasValidFbGroupId=s,l.MWCMGetValidFbGroupIdOrUndefined=u}),98);
__d("getLSMediaCommunityFolderPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=e.pictureUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.pictureUrlFallback:e.pictureUrl}}l.default=e}),98);
__d("MWCMThreadPictureCustomThreadCommunity.react",["BaseView.react","CometHeroHoldTrigger.react","FDSProfilePhoto_EXPERIMENTAL.react","MWXGlimmer.react","getLSMediaCommunityFolderPictureUrl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={base:{height:"x1auzw0x",position:"x10l6tqk",width:"xqu606t",$$css:!0},circle:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},community:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x13vifvy",$$css:!0},glimmer:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",height:"x5yr21d",width:"xh8yej3",$$css:!0},rounded:{borderStartStartRadius:"x1fuqvrd",borderStartEndRadius:"xmvrd30",borderEndEndRadius:"xt2fmn5",borderEndStartRadius:"xkn4fgx",$$css:!0},thread:{backgroundColor:"x1jx94hy",borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",bottom:"x1ey2m1c",boxSizing:"x1afcbsf",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"x1kgmq87",marginInlineEnd:"x11lt19s",marginBottom:"xmgb6t1",marginInlineStart:"xe9ewy2",zIndex:"x1vjfegm",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(14),n=e.community,a=e.photoSize,i=e.threadPictureUrl,l;t[0]!==n?(l=r("getLSMediaCommunityFolderPictureUrl")(n),t[0]=n,t[1]=l):l=t[1];var c=l,d;t[2]!==a?(d={height:a,width:a},t[2]=a,t[3]=d):d=t[3];var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=[u.base,u.community],t[4]=m):m=t[4];var p;t[5]!==c?(p=s.jsx(r("BaseView.react"),{xstyle:m,children:c==null?s.jsxs(s.Fragment,{children:[s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[u.glimmer,u.rounded]}),s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWCMThreadPictureCustomThreadCommunity",hold:!0})]}):s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"rounded",size:"fill",source:c})}),t[5]=c,t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=[u.base,u.thread,u.circle],t[7]=_):_=t[7];var f;t[8]!==i?(f=s.jsx(r("BaseView.react"),{xstyle:_,children:s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"circle",size:"fill",source:i})}),t[8]=i,t[9]=f):f=t[9];var g;return t[10]!==d||t[11]!==p||t[12]!==f?(g=s.jsxs(r("BaseView.react"),{role:"img",style:d,children:[p,f]}),t[10]=d,t[11]=p,t[12]=f,t[13]=g):g=t[13],g}l.default=c}),98);
__d("MWCreatorMessagingUtils",["I64","LSIntEnum","LSThreadBitOffset","MWLSThread","MessagingFolderTag","MessagingThreadSubtype"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){if(t.metadata==null||t.threadSubtype==null)return!1;var n=JSON.parse(t.metadata),a=n.thread_initiator_id;return a!=null&&t.threadSubtype!=null&&(e||(e=o("I64"))).equal(t.threadSubtype,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingThreadSubtype").PAGE_TO_USER))&&(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_string(a),t.threadKey)}function c(t){return t.threadSubtype!=null&&(e||(e=o("I64"))).equal(t.threadSubtype,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingThreadSubtype").PAGE_TO_USER))&&o("LSThreadBitOffset").has(21,t)}function d(e){return e.folderName===r("MessagingFolderTag").INBOX?"inbox":e.folderName===r("MessagingFolderTag").PENDING?"message_requests_ymk":e.folderName===r("MessagingFolderTag").SPAM?"message_requests_spam":"unknown"}function m(e){var t=o("MWLSThread").useThread(e,p);return t!=null?t:!1}function p(e){return c(e)}var _=function(t){return(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_PAGE)||(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_USER)};l.isAPPlusInitiatedThread=u,l.isAPPlusMessageRequest=c,l.fetchQPLEntrypoint=d,l.useIsAPPlusMessageRequestFromThreadKey=m,l.isPageToAnyThread=_}),98);
__d("MWEBMobileOnboardingEligibility",["CometErrorBoundary.react","CometPlaceholder.react","gkx","lazyLoadComponent","react","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=e.children,n=e.fallback,o=r("useWAInfraDeviceList")(),a;a=o.some(d)&&r("gkx")("5255");var i=a;return i?t:n}function d(e){return e.isCurrentDevice&&e.creationTime!=null&&e.creationTime.getTime()>Date.now()-6048e5}function m(e){var t=r("lazyLoadComponent")(e);return function(e){var n=e.fallback,o=e.props;return s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return n},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{fallback:n,children:s.jsx(t,babelHelpers.extends({},o))})})})}}l.requireMobileOnboardingIfEligible=m}),98);
__d("MWEBWebOnboardingPostDecisionDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBWebOnboardingPostDecisionDialog.react").__setRef("MWEBWebOnboardingPostDecisionDialog.entrypoint")};l.default=e}),98);
__d("MWEBWebOnboardingUpsellUtils",["$InternalEnum","WebDriverConfig","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({QP:"qp",PERSISTENT_BANNER:"persistent_banner",DISMISSED:"dismissed"}),s=r("WebDriverConfig").isJestE2ETestRun&&!r("gkx")("24058");l.UpsellState=e,l.IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS=s}),98);
__d("MWEncryptedBackupsDetermineInitialEBState",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23914");function s(t){var n=t.clientStateData,r=t.hasArmadilloError,o=t.xfb_backup;return!e||r?0:o==null?2:n.length>0?3:4}l.determineInitialEBState=s}),98);
__d("MWFDSArrowRight.svg.react",["cr:21541"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21541")}),98);
__d("MWFDSBellCross.svg.react",["cr:21563"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21563")}),98);
__d("MWFDSCautionTriangle.svg.react",["cr:21594"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21594")}),98);
__d("MWFDSGroup.svg.react",["cr:21677"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21677")}),98);
__d("MWFDSPushpin.svg.react",["cr:21750"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21750")}),98);
__d("MWFacepile.react",["CometHeroHoldTrigger.react","FDSFacepilePhoto.react","MWXGlimmer.react","UNTRANSLATED_STRING_FIXME","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","translatedServerString","useMWFacepileGetContactsToShow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(21),n=e.actualBadge,a=e.ariaHidden,i=e.label,l=e.onlyAuthoratitiveContacts,c=e.photoSize,d=e.threadKey,m=e.threadType,p=e.withAltText,_=c===void 0?32:c,f=p===void 0?!0:p,g=r("useMWFacepileGetContactsToShow")(d,m,l);if(g.length!==0){var h;t[0]!==i||t[1]!==f?(h=f===!0&&i!=null?r("UNTRANSLATED_STRING_FIXME")(i):void 0,t[0]=i,t[1]=f,t[2]=h):h=t[2];var y;if(t[3]!==g||t[4]!==f){var C;t[6]!==f?(C=function(t){return{alt:f?r("translatedServerString")(t.name):void 0,disabled:!1,source:r("getLSMediaContactProfilePictureUrl")(t)}},t[6]=f,t[7]=C):C=t[7],y=g.map(C),t[3]=g,t[4]=f,t[5]=y}else y=t[5];var b;return t[8]!==n||t[9]!==a||t[10]!==g.length||t[11]!==_||t[12]!==h||t[13]!==y?(b=s.jsx(r("FDSFacepilePhoto.react"),{ariaHidden:a,badge:n,label:h,size:_,sources:y,totalItems:g.length}),t[8]=n,t[9]=a,t[10]=g.length,t[11]=_,t[12]=h,t[13]=y,t[14]=b):b=t[14],b}var v;t[15]!==_?(v={height:_,width:_},t[15]=_,t[16]=v):v=t[16];var S,R;t[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmer}),R=s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWFacepile photo",hold:!0}),t[17]=S,t[18]=R):(S=t[17],R=t[18]);var L;return t[19]!==v?(L=s.jsxs("div",{style:v,children:[S,R]}),t[19]=v,t[20]=L):L=t[20],L}l.default=c}),98);
__d("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9985766314800064"}),null);
__d("MWGAMEThreadTakedownDialogQuery$Parameters",["MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"),metadata:{},name:"MWGAMEThreadTakedownDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWGAMEThreadTakedownDialog.entrypoint",["JSResourceForInteraction","MWGAMEThreadTakedownDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("MWGAMEThreadTakedownDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("MWGAMEThreadTakedownDialog.react").__setRef("MWGAMEThreadTakedownDialog.entrypoint")};l.default=e}),98);
__d("MWInboxFocusTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THREAD_VIEW_AND_OR_COMPOSER:0,THREAD_LIST:1,YOU_MAY_KNOW:2}),l=e;i.default=l}),66);
__d("MWLSDatabaseLazySync",["I64","Int64Hooks","LSFactory","LSForceImmediateSyncStoredProcedure","LSSyncGroupsUtils","Promise","ReQL","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.runInTransaction(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.sync_groups).getKeyRange(t)).then(function(a){return a!=null&&(u||(u=o("I64"))).equal(a.minTimeToSyncTimestampMs,o("LSSyncGroupsUtils").neverSyncTimestamp)?r("LSForceImmediateSyncStoredProcedure")(r("LSFactory")(e),{dbType:t}):(s||(s=n("Promise"))).resolve()})},"readwrite",void 0,void 0,i.id+":28")}function d(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){return c(a,t)},l=[t,a],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),o("Int64Hooks").useCallbackInt64(i,l)}l.sync=c,l.useSync=d}),98);
__d("MWReQLCMThreadPictureCustomThreadCommunity.react",["MWCMThreadPictureCustomThreadCommunity.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(14),a=t.photoSize,l=t.thread,s=t.threadPictureUrl,c=(e||(e=r("useReStore")))(),d;n[0]!==c.tables.community_folders||n[1]!==l.parentThreadKey?(d=function(){return o("ReQL").fromTableAscending(c.tables.community_folders).getKeyRange(l.parentThreadKey)},n[0]=c.tables.community_folders,n[1]=l.parentThreadKey,n[2]=d):d=n[2];var m;n[3]!==c||n[4]!==l.parentThreadKey?(m=[c,l.parentThreadKey],n[3]=c,n[4]=l.parentThreadKey,n[5]=m):m=n[5];var p=o("ReQLSuspense").useFirst(d,m,i.id+":25"),_=p==null?void 0:p.pictureUrl,f=p==null?void 0:p.pictureUrlExpirationTimestampMs,g=p==null?void 0:p.pictureUrlFallback,h;n[6]!==_||n[7]!==f||n[8]!==g?(h={pictureUrl:_,pictureUrlExpirationTimestampMs:f,pictureUrlFallback:g},n[6]=_,n[7]=f,n[8]=g,n[9]=h):h=n[9];var y;return n[10]!==a||n[11]!==h||n[12]!==s?(y=u.jsx(r("MWCMThreadPictureCustomThreadCommunity.react"),{community:h,photoSize:a,threadPictureUrl:s}),n[10]=a,n[11]=h,n[12]=s,n[13]=y):y=n[13],y}l.default=c}),98);
__d("MWReQLFacepile.react",["MWFacepile.react","MWFacepileBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(15),n=e.ariaHidden,a=e.badge,i=e.badgeSize,l=e.borderThemeColor,u=e.label,c=e.onlyAuthoratitiveContacts,d=e.photoSize,m=e.showBadge,p=e.thread,_=e.withAltText,f=c===void 0?!1:c,g=d===void 0?32:d,h=m===void 0?!0:m,y=_===void 0?!0:_,C;t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==h||t[4]!==p.threadKey?(C=h?a!=null?a:s.jsx(r("MWFacepileBadge.react"),{borderThemeColor:l,size:i,threadKey:p.threadKey}):null,t[0]=a,t[1]=i,t[2]=l,t[3]=h,t[4]=p.threadKey,t[5]=C):C=t[5];var b=C,v;return t[6]!==b||t[7]!==n||t[8]!==u||t[9]!==f||t[10]!==g||t[11]!==p.threadKey||t[12]!==p.threadType||t[13]!==y?(v=s.jsx(r("MWFacepile.react"),{actualBadge:b,ariaHidden:n,label:u,onlyAuthoratitiveContacts:f,photoSize:g,threadKey:p.threadKey,threadType:p.threadType,withAltText:y}),t[6]=b,t[7]=n,t[8]=u,t[9]=f,t[10]=g,t[11]=p.threadKey,t[12]=p.threadType,t[13]=y,t[14]=v):v=t[14],v}l.default=u}),98);
__d("MWThreadIsMuted_DEPRECATED",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e<=-1?!0:e>Date.now()}i.getThreadIsMuted=e}),66);
__d("MWThreadPictureCustomThread.react",["FDSFacepilePhoto.react","MWFacepileBadge.react","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react","react-compiler-runtime","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(40),a=t.badge,l=t.badgeSize,s=t.borderThemeColor,c=t.photoSize,d=t.shape,m=t.showBadge,p=t.thread,_=t.threadPictureUrl,f=t.withAltText,g=(e||(e=r("useReStore")))(),h=o("MWPActor.react").useActor(),y;n[0]!==g.tables.contacts||n[1]!==g.tables.participants||n[2]!==p.threadKey?(y=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(g.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(p.threadKey),o("ReQL").fromTableAscending(g.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(o("MWPGetThreadTitle").amountToFetchForTitle)},n[0]=g.tables.contacts,n[1]=g.tables.participants,n[2]=p.threadKey,n[3]=y):y=n[3];var C;n[4]!==g||n[5]!==p.threadKey?(C=[g,p.threadKey],n[4]=g,n[5]=p.threadKey,n[6]=C):C=n[6];var b=o("ReQLSuspense").useArray(y,C,i.id+":39"),v,S,R,L,E,k;if(n[7]!==h||n[8]!==a||n[9]!==l||n[10]!==s||n[11]!==b||n[12]!==c||n[13]!==d||n[14]!==m||n[15]!==p.threadKey||n[16]!==p.threadType||n[17]!==f){var I=o("MWPGetThreadTitle").computeThreadTitle(void 0,p.threadType,b.slice(0,o("MWPGetThreadTitle").amountToFetchForTitle),h),T;n[24]!==a||n[25]!==l||n[26]!==s||n[27]!==m||n[28]!==p.threadKey?(T=m===!0?a!=null?a:u.jsx(r("MWFacepileBadge.react"),{borderThemeColor:s,size:l,threadKey:p.threadKey}):null,n[24]=a,n[25]=l,n[26]=s,n[27]=m,n[28]=p.threadKey,n[29]=T):T=n[29];var D=T;v=r("FDSFacepilePhoto.react"),R=D,L=f===!0&&I!=null?r("translatedServerString")(I):void 0,E=d,k=c,S=f===!0&&I!=null?r("translatedServerString")(I):void 0,n[7]=h,n[8]=a,n[9]=l,n[10]=s,n[11]=b,n[12]=c,n[13]=d,n[14]=m,n[15]=p.threadKey,n[16]=p.threadType,n[17]=f,n[18]=v,n[19]=S,n[20]=R,n[21]=L,n[22]=E,n[23]=k}else v=n[18],S=n[19],R=n[20],L=n[21],E=n[22],k=n[23];var x;n[30]!==S||n[31]!==_?(x=[{alt:S,disabled:!1,source:_}],n[30]=S,n[31]=_,n[32]=x):x=n[32];var $;return n[33]!==v||n[34]!==R||n[35]!==L||n[36]!==E||n[37]!==k||n[38]!==x?($=u.jsx(v,{badge:R,label:L,shape:E,size:k,sources:x,totalItems:1}),n[33]=v,n[34]=R,n[35]=L,n[36]=E,n[37]=k,n[38]=x,n[39]=$):$=n[39],$}l.default=c}),98);
__d("MWThreadPicture.react",["MWReQLCMThreadPictureCustomThreadCommunity.react","MWReQLFacepile.react","MWThreadPictureCustomThread.react","ReQL","ReQLSuspense","getLSMediaThreadPictureUrl","mwCMIsAnyCMThread","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={borderThemeColor:{borderTopColor:"xwi95zy",borderInlineEndColor:"x1mlikqm",borderBottomColor:"xt1txi7",borderInlineStartColor:"x1uir17b",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(4),n=e.withCommunityPicture;if(n===!0){var a;return t[0]!==e?(a=u.jsx(r("MWReQLCMThreadPictureCustomThreadCommunity.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=a):a=t[1],a}var i;return t[2]!==e?(i=u.jsx(r("MWThreadPictureCustomThread.react"),babelHelpers.extends({},e)),t[2]=e,t[3]=i):i=t[3],i}function m(t){var n=o("react-compiler-runtime").c(27),a=t.ariaHidden,l=t.badge,s=t.badgeSize,m=t.onlyAuthoratitiveContacts,p=t.photoSize,_=t.showBadge,f=t.showFacepiles,g=t.threadKey,h=t.threadTitle,y=t.withAltText,C=t.withCommunityPicture,b=m===void 0?!1:m,v=_===void 0?!0:_,S=f===void 0?!1:f,R=y===void 0?!0:y,L=C===void 0?!1:C,E=(e||(e=r("useReStore")))(),k;n[0]!==E.tables.threads||n[1]!==g?(k=function(){return o("ReQL").fromTableAscending(E.tables.threads,["parentThreadKey","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadKey","threadName","threadType"]).getKeyRange(g)},n[0]=E.tables.threads,n[1]=g,n[2]=k):k=n[2];var I;n[3]!==E||n[4]!==g?(I=[E,g],n[3]=E,n[4]=g,n[5]=I):I=n[5];var T=o("ReQLSuspense").useFirst(k,I,i.id+":62");if(T==null)return null;var D=r("mwCMIsAnyCMThread")(T.threadType),x=v&&!D,$;n[6]!==T?($=r("getLSMediaThreadPictureUrl")(T),n[6]=T,n[7]=$):$=n[7];var P=$;if(P!=null&&S!==!0){var N;return n[8]!==l||n[9]!==s||n[10]!==p||n[11]!==x||n[12]!==T||n[13]!==P||n[14]!==R||n[15]!==L?(N=u.jsx(d,{badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,photoSize:p,showBadge:x,thread:T,threadPictureUrl:P,withAltText:R,withCommunityPicture:L}),n[8]=l,n[9]=s,n[10]=p,n[11]=x,n[12]=T,n[13]=P,n[14]=R,n[15]=L,n[16]=N):N=n[16],N}var M=h!=null?h:T.threadName,w;return n[17]!==a||n[18]!==l||n[19]!==s||n[20]!==b||n[21]!==p||n[22]!==x||n[23]!==M||n[24]!==T||n[25]!==R?(w=u.jsx(r("MWReQLFacepile.react"),{ariaHidden:a,badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,label:M,onlyAuthoratitiveContacts:b,photoSize:p,showBadge:x,thread:T,withAltText:R}),n[17]=a,n[18]=l,n[19]=s,n[20]=b,n[21]=p,n[22]=x,n[23]=M,n[24]=T,n[25]=R,n[26]=w):w=n[26],w}l.default=m}),98);
__d("MWVerticalRhythm",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.height,r=n,a=String(r)+"px",i;return t[0]!==a?(i=s.jsx("div",{style:{height:a}}),t[0]=a,t[1]=i):i=t[1],i}l.default=u}),98);
__d("MWXCardedDialogLoadingState.react",["cr:9908","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));l.default=n("cr:9908")}),98);
__d("MWXIconArrowRight",["MWXSvgIcon","SVGIcon","cr:22197","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22197")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconBellCross",["MWXSvgIcon","SVGIcon","cr:22224","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22224")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconGroup",["MWXSvgIcon","SVGIcon","cr:22360","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22360")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPushpin",["MWXSvgIcon","SVGIcon","cr:22450","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22450")),r("gkx")("23219"));l.default=e}),98);
__d("MWXScrollableAreaStyles",["MDSScrollableAreaStyles"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MDSScrollableAreaStyles")}),98);
__d("MWXTextPairing.react",["FDSTextWebUtils","cr:4853","cr:6725","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["bodyColor","bodyRef","headlineColor","headlineRef","metaColor","metaRef"],s,u=s||(s=o("react")),c={tetraTextWrapper:{boxSizing:"x9f619",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function d(e){return function(t){e!=null&&(typeof e=="function"?e(t):e.current=t)}}function m(t){var r=o("react-compiler-runtime").c(31);if(n("cr:6725")!=null){var a,i,l,s,m,p,_;r[0]!==t?(i=t.bodyColor,l=t.bodyRef,s=t.headlineColor,m=t.headlineRef,p=t.metaColor,_=t.metaRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=m,r[6]=p,r[7]=_):(a=r[1],i=r[2],l=r[3],s=r[4],m=r[5],p=r[6],_=r[7]);var f;r[8]===Symbol.for("react.memo_cache_sentinel")?(f=[c.tetraTextWrapper],r[8]=f):f=r[8];var g;r[9]!==i?(g=o("FDSTextWebUtils").getFDSBodyColor(i),r[9]=i,r[10]=g):g=r[10];var h;r[11]!==l?(h=d(l),r[11]=l,r[12]=h):h=r[12];var y;r[13]!==s?(y=o("FDSTextWebUtils").getFDSHeadlineColor(s),r[13]=s,r[14]=y):y=r[14];var C;r[15]!==m?(C=d(m),r[15]=m,r[16]=C):C=r[16];var b;r[17]!==p?(b=o("FDSTextWebUtils").getFDSMetaColor(p),r[17]=p,r[18]=b):b=r[18];var v;r[19]!==_?(v=d(_),r[19]=_,r[20]=v):v=r[20];var S;return r[21]!==a||r[22]!==g||r[23]!==h||r[24]!==y||r[25]!==C||r[26]!==b||r[27]!==v?(S=u.jsx(o("react-strict-dom").html.div,{style:f,children:u.jsx(n("cr:6725"),babelHelpers.extends({bodyColor:g,bodyRef:h,headlineColor:y,headlineRef:C,metaColor:b,metaRef:v},a))}),r[21]=a,r[22]=g,r[23]=h,r[24]=y,r[25]=C,r[26]=b,r[27]=v,r[28]=S):S=r[28],S}if(n("cr:4853")!=null){var R;return r[29]!==t?(R=u.jsx(n("cr:4853"),babelHelpers.extends({},t)),r[29]=t,r[30]=R):R=r[30],R}return null}l.default=m}),98);
__d("MessagingCommunityChatsPauseStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,PAUSED_BY_SOFT_ACTION:2,PAUSED_BY_ADMINLESS_STANDALONE_COMMUNITY:3,DEPRECATED:4});i.default=e}),66);
__d("MessengerMuteUtils",["fbt","ChatMuteStore","DateStrings","I64","formatDate"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){if(e<=0)return e===o("ChatMuteStore").ChatMuteOptions.Indefinitely?s._(/*BTDS*/"Off indefinitely"):void 0;if(!(e<86401)){var t=new Date(e*1e3).getDay(),n=t===new Date().getDay(),a=t===new Date().getDay()+1;return a?s._(/*BTDS*/"Off until {time} tomorrow",[s._param("time",r("formatDate")(e,"g:ia"))]):n?s._(/*BTDS*/"Off until {time}",[s._param("time",r("formatDate")(e,"g:ia"))]):s._(/*BTDS*/"Off until {time} {weekday name}",[s._param("time",r("formatDate")(e,"g:ia")),s._param("weekday name",o("DateStrings").getWeekdayName(t))])}}var c=s._(/*BTDS*/"Chat notifications");function d(e,t){if(e==null)return t===!0?s._(/*BTDS*/"Mute this sidechat?"):s._(/*BTDS*/"Mute conversation");switch(e.type){case"messageMuteScope":return s._(/*BTDS*/"Mute message notifications");case"callMuteScope":return s._(/*BTDS*/"Mute call notifications");case"bothMuteScope":return s._(/*BTDS*/"Mute message and call notifications")}}function m(t){var n=t.muteCallsExpireTimeMs,r=t.muteExpireTimeMs,a=Math.min((e||(e=o("I64"))).to_float(r),e.to_float(n)),i=Math.max(e.to_float(r),e.to_float(n));return a===-1?-1:i}l.mutedUntilLabel=u,l.chatNotificationActionLabel=c,l.muteDialogTitle=d,l.calcMuteUntilMs=m}),226);
__d("isFacebookMessengerInboxURI",["isFacebookURI"],(function(t,n,r,o,a,i,l){function e(e){return r("isFacebookURI")(e)&&e.getPath().startsWith("/messages")}l.default=e}),98);
__d("useEncryptedBackupsProcessStatePreLoaded_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useEncryptedBackupsProcessStatePreLoaded_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useEncryptedBackupsProcessStatePreLoaded",["CometRelay","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDetermineInitialEBState","ReQL","ReQLSuspense","isMWEBEntrypointEnabled","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded_query.graphql","useMAWHasUserVisibleErrors","useMAWUnsupportedBrowserNUX","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t){var a=o("react-compiler-runtime").c(10),l=t.entrypoint,s=t.query,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useEncryptedBackupsProcessStatePreLoaded_query.graphql"),s),d=(c||(c=r("useReStore")))(),p;a[0]!==d||a[1]!==(u==null?void 0:u.viewer.backup_state)?(p=function(){return(u==null?void 0:u.viewer.backup_state)==null?o("ReQL").fromTableAscending(d.tables.secure_encrypted_backups_client_state).filter(m):o("ReQL").empty()},a[0]=d,a[1]=u==null?void 0:u.viewer.backup_state,a[2]=p):p=a[2];var _=u==null?void 0:u.viewer.backup_state,f;a[3]!==d||a[4]!==_?(f=[d,_],a[3]=d,a[4]=_,a[5]=f):f=a[5];var g=o("ReQLSuspense").useArray(p,f,i.id+":57"),h=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),y=h.shouldHideEBFlow,C=r("useMAWHasUserVisibleErrors")(),b=y||C;if(!r("isMWEBEntrypointEnabled")(l))return 0;var v;return a[6]!==g||a[7]!==b||a[8]!==u?(v=(u==null?void 0:u.viewer.backup_state)!=null?u.viewer.backup_state:o("MWEncryptedBackupsDetermineInitialEBState").determineInitialEBState({clientStateData:g,hasArmadilloError:b,xfb_backup:u==null?void 0:u.xfb_backup}),a[6]=g,a[7]=b,a[8]=u,a[9]=v):v=a[9],v}function m(e){var t=e.authorityLevel;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.default=d}),98);
__d("useGroupsCometCMDisabledChatEntryPointDialog",["GroupsCometCMDisabledChatDialog.entrypoint","MWGAMEThreadTakedownDialog.entrypoint","MetaConfig","gkx","logVultureJSDeadEntrypoint","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(4),n=e.isGeoBlocked,a=e.threadID,i;t[0]!==a?(i={threadID:a},t[0]=a,t[1]=i):i=t[1];var l=r("useMWXEntryPointDialog")(r("GroupsCometCMDisabledChatDialog.entrypoint"),i),s;t[2]!==a?(s={threadID:a},t[2]=a,t[3]=s):s=t[3];var u=r("useMWXEntryPointDialog")(r("MWGAMEThreadTakedownDialog.entrypoint"),s);return n&&r("gkx")("5194")?(r("logVultureJSDeadEntrypoint")("MWGeoblockThreadDialog.entrypoint"),l):n&&r("MetaConfig")._("25")?(r("logVultureJSDeadEntrypoint")("GroupsCometCMGeoBlockedChatDialog.entrypoint"),l):r("gkx")("23433")?u:l}l.default=e}),98);
__d("useGroupsCometChatsEngagementImpressionLogger",["GroupsCometChatsEngagementLogger","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(12),n=e.category_id,a=e.client_extras,i=e.community_id,l=e.event,s=e.group_id,u=e.parent_surface,c=e.source,d=e.surface,m=e.thread_id,p;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==m?(p=function(){o("GroupsCometChatsEngagementLogger").log({action:"impression",category_id:n,client_extras:a,community_id:i,event:l,group_id:s,parent_surface:u,source:c,surface:d,thread_id:m})},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=m,t[9]=p):p=t[9];var _=p,f;return t[10]!==_?(f={onImpressionStart:_},t[10]=_,t[11]=f):f=t[11],r("usePartialViewImpression")(f)}l.default=u}),98);
__d("useMWAriaLabelForThread",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){var n=o("react-compiler-runtime").c(13),a=t.threadKey,l=t.threadName,u=t.threadType,c=o("MWPActor.react").useActor(),d=(e||(e=r("useReStore")))(),m;n[0]!==d.tables.contacts||n[1]!==d.tables.participants||n[2]!==a?(m=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(d.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(a),o("ReQL").fromTableAscending(d.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},n[0]=d.tables.contacts,n[1]=d.tables.participants,n[2]=a,n[3]=m):m=n[3];var p;n[4]!==d||n[5]!==a?(p=[d,a],n[4]=d,n[5]=a,n[6]=p):p=n[6];var _=o("ReQLSuspense").useArray(m,p,i.id+":37"),f,g;return n[7]!==c||n[8]!==_||n[9]!==l||n[10]!==u?(f=function(){var e,t=l;if(t!=null)return s._(/*BTDS*/"Conversation titled {name of conversation}",[s._param("name of conversation",t)]);var n=(e=o("MWPGetThreadTitle").computeThreadTitle(void 0,u,_,c))!=null?e:"";return s._(/*BTDS*/"Conversation with {participant list}",[s._param("participant list",n)])},g=[l,u,_,c],n[7]=c,n[8]=_,n[9]=l,n[10]=u,n[11]=f,n[12]=g):(f=n[11],g=n[12]),o("Int64Hooks").useMemoInt64(f,g)}l.default=u}),226);
__d("useMWCMShouldGoToFullScreenChatHook",["getRequestConstUri","isFacebookMessengerInboxURI","isMessengerDotComURI","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(1),t;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var n=r("getRequestConstUri")();t=r("isMessengerDotComURI")(n)||r("isFacebookMessengerInboxURI")(n),e[0]=t}else t=e[0];return t}l.default=e}),98);
__d("useMWChatCalculateIsMutedFromExpireTime",["MWThreadIsMuted_DEPRECATED","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e)},t[0]=e,t[1]=n):n=t[1];var a=c(n),i=a[0],l=a[1],s,d;return t[2]!==e?(s=function(){var t=o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e);if(l(t),!!(t&&e>-1)){var n=r("setTimeout")(function(){return l(!1)},e-Date.now());return function(){r("clearTimeout")(n)}}},d=[e,l],t[2]=e,t[3]=s,t[4]=d):(s=t[3],d=t[4]),u(s,d),i}l.default=d}),98);
__d("useMWEBGetUpsellStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBGetUpsellStateQuery",selections:[{kind:"RequiredField",field:e,action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBGetUpsellStateQuery",selections:[e]},params:{cacheID:"3d6b0766f42bc6a61e179528381b00b4",id:null,metadata:{},name:"useMWEBGetUpsellStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBGetUpsellState",["CometRelay","MWEBUpsellDismissedEnum.facebook","react-compiler-runtime","useMWEBGetUpsellStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(5),r,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBGetUpsellStateQuery.graphql"),a={},t[0]=r,t[1]=a):(r=t[0],a=t[1]);var i=o("CometRelay").useClientQuery(r,a),l=i.viewer,s=l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED,u=s||l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED,c;return t[2]!==s||t[3]!==u?(c={isAllRestoreUpsellsDismissed:s,isRestoreUpsellsDismissed:u},t[2]=s,t[3]=u,t[4]=c):c=t[4],c}l.default=s}),98);
__d("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2",["Base64Utils","I64","LSIntEnum","cr:343","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=e===void 0?{}:e,r=t.hsmCreationTimeInitialValue,a=t.offlineDevicesCountInitialValue,i=t.vestaClientIDInitialValue,l=n("cr:343")(),c=l.virtualDevices,_=m(function(){return c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))})[0]},[c]),f=c.length===0?r:(_==null?void 0:_.creationTime)!=null?(s||(s=o("I64"))).to_float(_.creationTime):null,g=i!=null?i:_!=null?o("Base64Utils").fromArrayBuffer(_.virtualDeviceId):void 0,h=m(function(){return a!=null?a:c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))}).length},[c,a]),y=p(g),C=y[0],b=y[1],v=p(h),S=v[0],R=v[1];return d(function(){if(c.length!==0){var e=c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))}),t=e[0],n=c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))});b(t!=null?o("Base64Utils").fromArrayBuffer(t.virtualDeviceId):void 0),R(n.length)}},[c]),{hsmCreationTime:f,offlineDevicesCount:S,vestaClientID:C}}l.default=_}),98);
__d("useMWGetInboxFocusTargetFromRoute",["CometRouteParams","MWInboxFocusTarget","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(2),t=o("CometRouteParams").useRouteParams(),n=t.focus_target;if(n!=null){var a=Number(n),i;if(e[0]!==a){var l;i=(l=r("MWInboxFocusTarget").cast(a))!=null?l:0,e[0]=a,e[1]=i}else i=e[1];return i}return 0}l.default=e}),98);
__d("useMWIsReadReceiptsDisabledForUser",["LSIntEnum","LSReadReceiptSettingState","MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(6),n=(s||(s=r("useReStore")))(),a=o("MWPActor.react").useActor(),l;t[0]!==a||t[1]!==n.tables.messaging_privacy_settings?(l=function(){return o("ReQL").fromTableAscending(n.tables.messaging_privacy_settings).getKeyRange(a)},t[0]=a,t[1]=n.tables.messaging_privacy_settings,t[2]=l):l=t[2];var u;t[3]!==a||t[4]!==n?(u=[n,a],t[3]=a,t[4]=n,t[5]=u):u=t[5];var c=o("ReQLSuspense").useFirst(l,u,i.id+":23");if(c==null)return r("MessengerWebPrivacySettings").read_receipts_disabled===r("LSReadReceiptSettingState").DISABLED;var d=c.readReceiptsDisabled!=null?(e||(e=o("LSIntEnum"))).toNumber(c.readReceiptsDisabled):r("LSReadReceiptSettingState").DEFAULT;return d===r("LSReadReceiptSettingState").DISABLED}l.default=u}),98);
__d("useMWIsReadReceiptsDisabledForThread",["LSIntEnum","LSReadReceiptSettingState","MWLSThread","useMWIsReadReceiptsDisabledForUser"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=o("MWLSThread").useThread(e,u),n=r("useMWIsReadReceiptsDisabledForUser")();return t!=null&&t!==r("LSReadReceiptSettingState").DEFAULT?t===r("LSReadReceiptSettingState").DISABLED:n}function u(t){return(e||(e=o("LSIntEnum"))).toNumber(t.readReceiptsDisabledV2)}l.default=s}),98);
__d("useZenonHasActiveCall",["CacheStorage","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e="RTC_LS_CALL_SUMMARY_",s="ls_summary";function u(){var t=r("justknobx")._("4056"),n=new(r("CacheStorage"))("localstorage",e),o=n.get(s);if(!o||Object.keys(o).length===0)return!1;var a=Object.values(o)[0];if(!a||Object.keys(a).length===0)return!1;var i=Object.values(a)[0].__t;return!(i<Date.now()-t)}l.default=u}),98);
__d("useMWIsStaleCall",["DateConsts","FBLogger","I64","LSMessagingThreadTypeUtil","justknobx","useZenonHasActiveCall"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=r("useZenonHasActiveCall")();if(!n||i)return!1;if(a==null&&n)return r("FBLogger")("messenger_web_calling").info("ongoingCallTimestampMs is null but isOngoingCall is true"),!1;var l=a!=null?(e||(e=o("I64"))).to_float(a)/1e3:0;if(l!==0){var s=t!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(t)?r("justknobx")._("4057"):t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t)?r("justknobx")._("4058"):0,u=o("DateConsts").getCurrentTimeInSeconds(),c=u-l,d=c>s;return d}return!1}l.default=s}),98);
__d("useMWLSMarkThreadAsRead",["FBLogger","I64","LSFactory","LSOptimisticMarkThreadReadV2StoredProcedure","MWThreadKey.react","MessengerWebUXLogger","ReQL","cr:2580","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,a){var l,u=o("react-compiler-runtime").c(5),c=(e||(e=r("useReStore")))(),d=(l=o("MWThreadKey.react").useMWThreadKeyMemoized())!=null?l:a;if(d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Tried to get a thread key when there was none");var m=r("MessengerWebUXLogger").useInteractionLogger(),p;return u[0]!==c||u[1]!==t||u[2]!==m||u[3]!==d?(p=function(){m==null||m({eventName:"mark_thread_as_read"}),r("promiseDone")(c.runInTransaction(async function(e){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(d));if(a!=null){var i=a.lastActivityTimestampMs,l=a.lastReadWatermarkTimestampMs,u=a.threadType;if((s||(s=o("I64"))).gt(i,l)){n("cr:2580")&&t!=null&&n("cr:2580")({threadKey:d,threadType:u},"seen_receipt",t);var c=i;return r("LSOptimisticMarkThreadReadV2StoredProcedure")(r("LSFactory")(e),{readWatermarkTimestampMs:c,threadKey:d})}}},"readwrite",void 0,void 0,i.id+":54"))},u[0]=c,u[1]=t,u[2]=m,u[3]=d,u[4]=p):p=u[4],p}l.default=d}),98);
__d("useOpenThreadAfterJoin",["I64","MWLSThreadDisplayContext","ReQL","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWChatOpenTabForGroup","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){var e=o("react-compiler-runtime").c(5),t=r("useMWChatOpenTabForGroup")("jewel"),n=t[0],a=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),i=r("useAsyncReStore")(),l=r("useMWNavigation")(),u;return e[0]!==i||e[1]!==a||e[2]!==l||e[3]!==n?(u=function(t){if(a==="ChatTab"){n(t);return}r("promiseDone")(i,function(e){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(t))),function(e){e!=null&&l.openInbox({clientThreadKey:void 0,threadKey:(s||(s=o("I64"))).of_string(t),threadType:e.threadType},"deepLink")})})},e[0]=i,e[1]=a,e[2]=l,e[3]=n,e[4]=u):u=e[4],u}l.default=c}),98);
__d("usePublicChatShortlinkCallback",["ConstUriUtils","I64","JSResourceForInteraction","LSFactory","LSIntEnum","LSOptimisticFetchPendingGroupInviteStoredProcedure","ReQL","promiseDone","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useEffect,_=d.useRef,f=r("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("usePublicChatShortlinkCallback");function g(e){var t=o("ConstUriUtils").getUri(e);if(t!=null&&t.isSubdomainOfDomain("m.me")){var n,r=t==null||(n=t.getPath())==null?void 0:n.split("/").filter(function(e){return e!==""});return(r==null?void 0:r.length)===2&&r[0]==="j"?r[1]:null}return null}function h(t){var n=o("react-compiler-runtime").c(6),a=t.onSuccess,l=_(!1),c=_(),d=_(),m=(e||(e=r("useReStore")))(),h=r("useMWXLazyDialog")(f),y=h[0],C,b;n[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return function(){c.current==null||c.current(),d.current==null||d.current()}},b=[],n[0]=C,n[1]=b):(C=n[0],b=n[1]),p(C,b);var v;return n[2]!==m||n[3]!==a||n[4]!==y?(v=function(t){var e=g(t);e!=null&&(r("promiseDone")(m.runInTransaction(function(t){return r("LSOptimisticFetchPendingGroupInviteStoredProcedure")(r("LSFactory")(t),{linkHash:e})},"readwrite",void 0,void 0,i.id+":85")),c.current=o("ReQL").fromTableAscending(m.tables.group_invitations_pending).getKeyRange(e).subscribe(function(t,n){if(n.operation!=="delete"){var r=n.value;if(r!=null&&r.isSubscribed&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r.threadId));return}else if((r==null?void 0:r.linkJoinType)!=null&&(s||(s=o("I64"))).equal(r==null?void 0:r.linkJoinType,(u||(u=o("LSIntEnum"))).ofNumber(6))&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r==null?void 0:r.threadId));return}(r==null?void 0:r.threadTitle.length)>0&&!l.current&&(l.current=!0,y({linkHash:e,onClick:function(){r.needsAdminApprovalForNewParticipant||(d.current=o("ReQL").fromTableAscending(m.tables.threads).subscribe(function(t,n){n.operation!=="delete"&&n.value.threadInviteLink!=null&&g(n.value.threadInviteLink)===e&&(a==null||a((s||(s=o("I64"))).to_string(n.value.threadKey)),d.current==null||d.current())}))}},function(){l.current=!1}),c.current==null||c.current())}}))},n[2]=m,n[3]=a,n[4]=y,n[5]=v):v=n[5],v}l.default=h}),98);/*FB_PKG_DELIM*/
__d("FBIconDots3HorizontalOutline20.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:s.jsx(o("XPlatReactSVG").Path,{d:"M458 408a2 2 0 1 1-4 0 2 2 0 0 1 4 0m6 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m-12 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("LSCancelTaskByQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.forEach(t.filter(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(n){return n.queueName===e[0]&&n.context===t.i64.to_string(e[1])}),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSComputeOptimisticThreadCapabilities",["LSArrayGetObjectAt","LSComputeParticipantCapabilities","LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.createArray(),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return t.forEach(t.db.table(14).fetch([[[e[0],{lt:r[1]}],[e[0],{gt:r[1]}]]]),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),a.contactId,e[0]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[32]=(r[0].push(r[31]),r[0])}])})},function(e){return r[2]=t.i64.cast([0,1073741823]),r[3]=t.i64.of_int32(r[0].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[0],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[2]=t.i64.and_(r[2],r[32])}])}):t.resolve()},function(n){return r[4]=t.i64.of_int32(r[0].length),t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?t.sequence([function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[31]=!1:(n=a.item,r[31]=!!t.i64.eq(n.contactTypeExact,t.i64.cast([0,16])))})},function(e){return r[5]=r[31]}]):(o=i.item,r[5]=!!t.i64.eq(o.threadType,t.i64.cast([0,201])))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=!1:(n=a.item,r[7]=t.i64.eq(n.threadType,t.i64.cast([0,206])))})},function(n){var o,a,i,l;return r[9]=t.i64.cast([0,1083495711]),r[10]=t.i64.cast([0,1024]),r[11]=t.i64.cast([0,0]),r[12]=t.i64.cast([0,0]),r[13]=t.i64.cast([0,134217728]),r[14]=t.i64.cast([0,1083495711]),r[15]=t.i64.cast([0,1024]),r[16]=t.i64.cast([0,0]),r[17]=t.i64.cast([0,134217728]),r[18]=t.i64.cast([0,0]),r[5]?(r[31]=t.i64.cast([0,8650752]),r[32]=t.i64.cast([0,1024]),r[33]=t.i64.cast([0,0]),r[34]=t.i64.cast([0,0]),r[35]=t.i64.cast([0,0]),o=[r[31],r[32],r[33],r[34],r[35]],r[19]=o[0],r[20]=o[1],r[21]=o[2],r[22]=o[3],r[23]=o[4]):(r[7]?(r[36]=t.i64.cast([0,8700166]),r[37]=t.i64.cast([0,1024]),r[38]=t.i64.cast([0,0]),r[39]=t.i64.cast([0,0]),r[40]=t.i64.cast([0,0]),a=[r[36],r[37],r[38],r[39],r[40]],r[31]=a[0],r[32]=a[1],r[33]=a[2],r[34]=a[3],r[35]=a[4]):(i=[r[14],r[15],r[16],r[17],r[18]],r[31]=i[0],r[32]=i[1],r[33]=i[2],r[34]=i[3],r[35]=i[4]),l=[r[31],r[32],r[33],r[34],r[35]],r[19]=l[0],r[20]=l[1],r[21]=l[2],r[22]=l[3],r[23]=l[4]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[r[19],t.i64.cast([0,1])],r[24]=o[0],r[25]=o[1],o):(n=l.item,a=[r[19],n.threadType],r[24]=a[0],r[25]=a[1])})},function(e){return r[27]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[28]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))),r[30]=t.i64.and_(t.i64.and_(!t.i64.eq(r[25],t.i64.cast([0,1]))||t.i64.eq(r[4],t.i64.cast([0,0]))?t.i64.eq(t.i64.and_(r[24],r[27]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[27]):r[24],t.i64.eq(r[25],t.i64.cast([0,2]))?t.i64.eq(t.i64.and_(r[24],r[28]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[28]):r[24]),t.i64.eq(r[25],t.i64.cast([0,1]))&&t.i64.neq(r[4],t.i64.cast([0,0]))?r[24]:t.i64.xor(r[24],t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))))),t.i64.eq(r[25],t.i64.cast([0,206]))?t.resolve(r[29]=r[30]):t.sequence([function(e){return r[31]=t.createArray(),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,6]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,6]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,0]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,7]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,1]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,72]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,72]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,8]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,2]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,9]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,9]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,10]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,4]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,5]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,5]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,11]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,11]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,12]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,13]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,13]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,18]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,14]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,20]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,15]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,3]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(void 0,void 0)||t.i64.neq(t.i64.and_(t.i64.cast([0,0]),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,30]))):t.i64.cast([0,0])),r[31]),r[32]=t.i64.cast([0,0]),r[33]=t.i64.of_int32(r[31].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[31],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[32]=t.i64.add(r[32],r[35])}])}):t.resolve()},function(e){return r[29]=t.i64.and_(r[32],r[30])}])},function(e){return o[0]=r[29]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxComputeOptimisticThreadCapabilitiesStoredProcedure",e.__tables__=["participants","threads","contacts"],a.exports=e}),null);
__d("LSGetFirstAvailableQuickReplyCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(20).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableQuickReplyCTAIDStoredProcedure",e.__tables__=["quick_reply_ctas"],a.exports=e}),null);
__d("LSInsertQuickReplyCTA",["LSArrayGetObjectAt","LSGetFirstAvailableQuickReplyCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=t.i64.of_int32(e[3].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.sequence([function(n){return t.forEach(t.db.table(20).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(e){return t.storedProcedure(n("LSGetFirstAvailableQuickReplyCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=r[1],r[3]=t.i64.of_int32(e[3].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[7]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(n){return r[10]=r[8].get("title"),r[11]=r[8].get("type"),r[12]=r[8].get("image_url"),r[13]=r[8].get("platform_token"),t.db.table(20).add({threadKey:e[0],messageId:e[1],ctaId:r[2],messageTimestampMs:e[2],title:r[10],type_:r[11],imageUrl:r[12],platformToken:r[13]})},function(e){return r[2]=t.i64.add(r[2],t.i64.cast([0,1]))}])}):t.resolve()},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("quick_reply_type"),t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(e){var t=e.update,n=e.item;return t({hasQuickReplies:!0,quickReplyType:r[6]})})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertQuickReplyCTAStoredProcedure",e.__tables__=["quick_reply_ctas","messages"],a.exports=e}),null);
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.eq(e[3],t.i64.cast([0,1]))?t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2421884758]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2676961947]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3298086032]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3873263038]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2616853333]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}]):t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,4002265907]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2663996736]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2868699317]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2688620547]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3544071775]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}])},function(e){return o[0]=r[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxGetLocalizedReplySnippetStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSetMessageViewFlags",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,r.primarySortKey,r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey],n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetch([[[e[0],{gt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.gt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.ge(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=o[0],n[11]=o[1],n[12]=o[2],n[13]=o[3],n[14]=o[4],n[15]=o[5],n[16]=o[6],n[17]=o[7],n[18]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=a[0],n[11]=a[1],n[12]=a[2],n[13]=a[3],n[14]=a[4],n[15]=a[5],n[16]=a[6],n[17]=a[7],n[18]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetchDesc([[[e[0],{lt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.lt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.le(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=o[0],n[21]=o[1],n[22]=o[2],n[23]=o[3],n[24]=o[4],n[25]=o[5],n[26]=o[6],n[27]=o[7],n[28]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=a[0],n[21]=a[1],n[22]=a[2],n[23]=a[3],n[24]=a[4],n[25]=a[5],n[26]=a[6],n[27]=a[7],n[28]=a[8])})},function(r){return n[32]=t.i64.or_(t.i64.cast([0,2]),t.i64.or_(!n[3]&&!e[3]?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.or_(n[3]?t.i64.cast([0,0]):t.i64.cast([0,1]),t.i64.or_(t.i64.eq(n[5],t.i64.cast([0,60]))||t.i64.eq(n[5],t.i64.cast([0,80]))?t.i64.cast([0,1048576]):t.i64.cast([0,0]),t.i64.neq(n[6],t.i64.cast([85970,924785702]))&&t.i64.neq(n[6],t.i64.cast([85970,1004785694]))&&t.i64.neq(n[6],t.i64.cast([85970,1044785690]))?t.i64.cast([0,0]):t.i64.cast([0,2097152]))))),n[14]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[12],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[13]&&!(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[12],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[32],t.i64.cast([0,16])):n[32],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[10],n[14]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[10])&&r.messageId===n[14]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[35]})})},function(e){return n[30]=n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]}]):t.resolve(n[30]=n[32])},function(r){return n[24]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[30],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[3]&&!(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[30],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[22],t.i64.cast([0,16])):n[22],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[20],n[24]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[20])&&r.messageId===n[24]}),function(e){var r=e.update,o=e.item;return r({viewFlags:n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]})})},function(e){return n[31]=n[35]}]):t.resolve(n[31]=n[30])},function(r){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[0],n[4]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[0])&&r.messageId===n[4]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[31]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetMessageViewFlagsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSLocalize","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.sequence([function(e){return t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[1]=t.i64.to_string(r[9])}])},function(o){return r[8]=e[4]==null?e[3]:e[4],t.sequence([function(e){return t.islc(t.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.lastActivityTimestampMs)})},function(o){return r[11]=t.i64.add(r[9],t.i64.cast([0,1])),r[13]=t.i64.gt(r[0],r[11])?r[0]:r[11],t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return(function(e){t.logger(e).info(e)})("localApplyOptimisticMessage insert optimistic thread"),t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,40]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:e[2],clientThreadKey:e[1],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,40])})},function(n){return t.i64.eq(e[2],t.i64.cast([0,13]))||t.i64.eq(e[2],t.i64.cast([0,7]))||t.i64.eq(e[2],t.i64.cast([0,1]))?t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[1],contactId:e[1],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}]):t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=!1:(t=o.item,r[14]=t.errorShouldBeShown)})},function(e){return r[14]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[16]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[17]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[16],r[17],void 0,void 0)}]):t.resolve()}]):(a=l.item,t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(n.threadType,e[2])}),function(t){var n=t.update,o=t.item;return n({lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(o){return t.sequence([function(n){return t.islc(t.db.table(12).fetchDesc([[[e[1],t.i64.cast([0,80])],[e[1],t.i64.cast([0,60])],[e[1],t.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?(r[33]=t.i64.of_float(Date.now()),r[9]=r[33]):(n=a.item,r[9]=n.primarySortKey)})},function(o){var a,i,l;return e[8]!==void 0&&(t.i64.eq(e[9],t.i64.cast([0,1]))||t.i64.eq(e[10],t.i64.cast([0,1])))?t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[8]==null?"":e[8]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===(e[8]==null?"":e[8])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(i=[e[8],void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15],i):(a=s.item,t.sequence([function(o){var i,l,s;return r[54]=a.senderId,r[53]=a.stickerId,t.i64.neq(r[53],void 0)?(i=[r[53],t.i64.cast([0,4])],r[56]=i[0],r[57]=i[1]):(l=[void 0,void 0],r[56]=l[0],r[57]=l[1]),s=[r[56],r[57]],r[50]=s[0],r[51]=s[1],r[55]=a.replyType==null?t.i64.cast([0,0]):a.replyType,t.sequence([function(o){return t.storedProcedure(n("LSGetLocalizedReplySnippet"),e[1],e[0],r[54],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(n){return r[52]=t.i64.eq(e[10],t.i64.cast([0,1]))?r[56]:""}])},function(n){var o;return o=[e[8],e[9],e[10],t.i64.cast([0,1]),r[52],r[54],a.text,r[50],r[51],void 0,void 0,void 0,void 0,void 0,void 0,r[55]],r[33]=o[0],r[34]=o[1],r[35]=o[2],r[36]=o[3],r[37]=o[4],r[38]=o[5],r[39]=o[6],r[40]=o[7],r[41]=o[8],r[42]=o[9],r[43]=o[10],r[44]=o[11],r[45]=o[12],r[46]=o[13],r[47]=o[14],r[48]=o[15],o}]))})},function(e){var t;return t=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=t[0],r[12]=t[1],r[13]=t[2],r[14]=t[3],r[15]=t[4],r[16]=t[5],r[17]=t[6],r[18]=t[7],r[19]=t[8],r[20]=t[9],r[21]=t[10],r[22]=t[11],r[23]=t[12],r[24]=t[13],r[25]=t[14],r[26]=t[15],t}]):t.resolve((e[8]===void 0||t.i64.eq(e[9],t.i64.cast([0,0]))||t.i64.eq(e[10],t.i64.cast([0,0]))?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=a[0],r[34]=a[1],r[35]=a[2],r[36]=a[3],r[37]=a[4],r[38]=a[5],r[39]=a[6],r[40]=a[7],r[41]=a[8],r[42]=a[9],r[43]=a[10],r[44]=a[11],r[45]=a[12],r[46]=a[13],r[47]=a[14],r[48]=a[15]):(i=[e[8],e[9],e[10],t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15]),l=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4],r[16]=l[5],r[17]=l[6],r[18]=l[7],r[19]=l[8],r[20]=l[9],r[21]=l[10],r[22]=l[11],r[23]=l[12],r[24]=l[13],r[25]=l[14],r[26]=l[15]))},function(n){var o,a;return e[13]?r[27]=!1:r[27]=!0,r[27]?(a=[void 0,void 0,void 0,void 0],r[28]=a[0],r[29]=a[1],r[30]=a[2],r[31]=a[3]):(r[33]=e[13].get("mention_offsets"),r[34]=e[13].get("mention_lengths"),r[35]=e[13].get("mention_ids"),r[36]=e[13].get("mention_types"),o=[r[33],r[34],r[35],r[36]],r[28]=o[0],r[29]=o[1],r[30]=o[2],r[31]=o[3]),e[11]?r[32]=t.i64.cast([0,3]):r[32]=r[13],t.i64.eq(t.i64.cast([0,20]),t.i64.cast([0,20]))?t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[9],secondarySortKey:r[0],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]}):t.sequence([function(e){return t.db.table(12).fetch([[[r[1]]],"optimistic"]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[r[9],r[0],void 0],r[33]=n[0],r[34]=n[1],r[35]=n[2],n):(t=i.item,o=[t.primarySortKey,t.secondarySortKey,t.localDataId],r[33]=o[0],r[34]=o[1],r[35]=o[2])})},function(e){return t.forEach(t.filter(t.db.table(12).fetch([[[r[1]]],"optimistic"]),function(e){return e.offlineThreadingId===r[1]&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[33],secondarySortKey:r[34],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),localDataId:r[35],replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]})}])}])},function(o){return r[2]=t.createArray(),r[3]=(r[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),r[2]),r[4]=(r[2].push("localApplyOptimisticMessage"),r[2]),r[5]=(r[2].push(e[1]),r[2]),r[6]=(r[2].push(r[1]),r[2]),r[7]=t.toJSON(r[2]),(function(e){t.logger(e).info(e)})(r[7]),e[14]?t.sequence([function(o){return t.storedProcedure(n("LSSetMessageViewFlags"),e[1],r[1],r[0],t.i64.eq(e[2],t.i64.cast([0,1])))},function(o){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[1],r[0],e[3],!1,t.i64.neq(e[6],void 0))}]):t.resolve()},function(e){var t;return t=[r[1],r[0]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageStoredProcedure",e.__tables__=["threads","participants","user_visible_network_connectivity_error","messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetViewerFBID","LSInsertQuickReplyCTA","LSIssueNewTask","LSLocalApplyOptimisticMessage"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("page_id"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[2]=r[26]}]):t.resolve(r[2]=void 0)},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("product_type"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[3]=r[26]}]):t.resolve(r[3]=void 0)},function(e){var o,a;return r[3]==="CTM"?(r[2]!==void 0?r[19]=t.i64.from_string(r[2]):r[19]=r[1],r[4]=r[19]):r[4]=r[1],r[5]=t.i64.cast([0,1083495711]),r[6]=t.i64.cast([0,1024]),r[7]=t.i64.cast([0,0]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,134217728]),r[10]=!0,r[10]?(t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,205]))?r[19]=void 0:r[19]="",a=[r[19],void 0,void 0,void 0,void 0],r[11]=a[0],r[12]=a[1],r[13]=a[2],r[14]=a[3],r[15]=a[4]):(r[19]=(void 0).get("nullstate_description_text1"),r[19]!==void 0?r[20]=r[19]:r[20]="",r[21]=(void 0).get("nullstate_description_text2"),r[22]=(void 0).get("nullstate_description_text3"),r[23]=(void 0).get("nullstate_description_text4"),r[24]=(void 0).get("nullstate_description_text5"),o=[r[20],r[21],r[22],r[23],r[24]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.forEach(t.filter(t.db.table(9).fetch([[[r[4]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[4],mailboxType:t.i64.cast([0,0]),threadType:t.i64.cast([0,2]),clientThreadKey:r[4],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:t.i64.cast([0,0]),lastReadWatermarkTimestampMs:t.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:r[16],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),capabilities:r[5],capabilities2:r[6],capabilities3:r[7],capabilities4:r[8],capabilities5:r[9],nullstateDescriptionText1:r[11],nullstateDescriptionText2:r[12],nullstateDescriptionText3:r[13],threadName:e[2]})},function(e){return r[17]=t.createArray(),t.resolve()},function(n){return e[3]!==void 0?t.db.table(312).add({threadKey:r[4],metadata:e[3]}):t.resolve()},function(o){return r[18]=t.i64.of_int32(e[0].length),t.i64.gt(r[18],t.i64.cast([0,0]))?t.loopAsync(r[18],function(o){return r[19]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return t.forEach(t.filter(t.db.table(14).fetch([[[r[4],r[20]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.contactId,r[20])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(14).add({threadKey:r[4],contactId:r[20],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}])}):t.resolve()},function(e){return o[0]=r[4]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticGroupThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_metadata","participants"],a.exports=e}),null);
__d("LSCreateGroupThreadWithAdminText",["LSCreateOfflineThreadingID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],e[1],e[2],void 0).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return e[2],t.sequence([function(e){return r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[1]).then(function(e){var t;return t=e,r[2]=t[0],t})},function(e){return t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(e){var n=e.update,o=e.item;return n({otidOfFirstMessage:t.i64.to_string(r[2])})})},function(o){return r[3]=new t.Map,r[3].set("thread_id",r[0]),r[3].set("otid",t.i64.to_string(r[2])),r[3].set("source",t.i64.cast([0,0])),r[3].set("send_type",t.i64.cast([0,8])),e[3]!==void 0&&r[3].set("text",e[3]),r[4]=new t.Map,r[4].set("participants",e[0]),r[4].set("send_payload",r[3]),e[2]!==void 0&&r[4].set("thread_name",e[2]),r[5]=r[4].get("send_payload"),r[6]=r[5].get("thread_id"),r[7]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[6]),t.i64.cast([0,130]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxCreateGroupThreadWithAdminTextStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSLocalCreateOptimisticGroupThread",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){var a,i;return r[0]=!0,r[0]?(i=["",void 0,void 0,void 0,void 0],r[1]=i[0],r[2]=i[1],r[3]=i[2],r[4]=i[3],r[5]=i[4]):(r[8]=(void 0).get("nullstate_description_text1"),r[8]!==void 0?r[9]=r[8]:r[9]="",r[10]=(void 0).get("nullstate_description_text2"),r[11]=(void 0).get("nullstate_description_text3"),r[12]=(void 0).get("nullstate_description_text4"),r[13]=(void 0).get("nullstate_description_text5"),a=[r[9],r[10],r[11],r[12],r[13]],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4]),r[6]=new t.Map,r[6].set("nullstate_description_text1",r[1]),r[6].set("nullstate_description_text2",r[2]),r[6].set("nullstate_description_text3",r[3]),r[6].set("nullstate_description_text4",r[4]),r[6].set("nullstate_description_text5",r[5]),t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],void 0,e[2],e[4]).then(function(e){var t;return t=e,r[7]=t[0],t})},function(o){return e[3]===!0&&t.i64.neq(t.i64.cast([0,2]),t.i64.cast([0,206]))?t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,5]))?e[4]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[8]=t[0],t})},function(o){return r[9]=t.i64.cast([0,0]),r[10]=t.i64.of_int32(e[0].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[11]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[11]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){return t.i64.neq(r[12],r[8])?r[14]=r[12]:r[14]=r[9],r[9]=r[14]}])}):t.resolve()},function(o){return e[4]!==void 0?(r[11]=new t.Map,r[11].set("seller_id",r[9]),r[11].set("thread_metadata",e[4]),r[11].set("client_thread_key",r[7]),r[12]=r[11].get("client_thread_key"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,646]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve((function(e){t.logger(e).mustfix(e)})("Marketplace thread metadata cannot be null")):(r[8]=new t.Map,r[8].set("participants",e[0]),r[8].set("client_thread_key",r[7]),r[8].set("sync_group",t.i64.cast([0,1])),r[9]=r[8].get("client_thread_key"),r[10]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[9]),t.i64.cast([0,153]),r[10],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(e){return o[0]=r[7]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrl}function u(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrlLarge}function c(e){var t=e.playableUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.playableUrlFallback:e.playableUrl}function d(e){var t=e.imageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.imageUrlFallback:e.imageUrl}function m(e){var t=e.faviconUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.faviconUrlFallback:e.faviconUrl}function p(t){try{var n=t.listItemContactUrlExpirationTimestampList1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList1:t.listItemContactUrlList1}catch(e){return t.listItemContactUrlList1}}function _(t){try{var n=t.listItemContactUrlExpirationTimestampList2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList2:t.listItemContactUrlList2}catch(e){return t.listItemContactUrlList2}}function f(t){try{var n=t.listItemContactUrlExpirationTimestampList3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList3:t.listItemContactUrlList3}catch(e){return t.listItemContactUrlList3}}function g(e){var t=e.headerImageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.headerImageUrlFallback:e.headerImageUrl}function h(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback1:t.listItemProfilePictureUrl1}catch(e){return t.listItemProfilePictureUrl1}}function y(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback2:t.listItemProfilePictureUrl2}catch(e){return t.listItemProfilePictureUrl2}}function C(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback3:t.listItemProfilePictureUrl3}catch(e){return t.listItemProfilePictureUrl3}}l.previewUrl=s,l.previewUrlLarge=u,l.playableUrl=c,l.imageUrl=d,l.faviconUrl=m,l.listItemContactUrlList1=p,l.listItemContactUrlList2=_,l.listItemContactUrlList3=f,l.headerImageUrl=g,l.listItemProfilePictureUrl1=h,l.listItemProfilePictureUrl2=y,l.listItemProfilePictureUrl3=C}),98);
__d("LSMessagePointQuery",["LSIssueNewTask","LSVerifyThreadRowExists"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[1]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(r){return t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[2],t.i64.cast([0,1]))},function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[1]=r[6])})},function(o){return r[3]=new t.Map,r[3].set("thread_key",e[0]),r[3].set("message_id",e[1]),r[3].set("sync_group",r[1]),r[3].set("num_context_messages",e[3]),r[4]=r[3].get("thread_key"),r[5]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[4]),t.i64.cast([0,19]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,r[1]=a.timestampMs,t.filter(t.db.table(13).fetch([[[e[0],{lte:r[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,r[1])&&t.i64.ge(n.maxTimestampMs,r[1])}).next().then(function(o){var a=o.done,i=o.value;return a?t.sequence([function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[2]=r[7])})},function(o){return r[4]=new t.Map,r[4].set("thread_key",e[0]),r[4].set("message_id",e[1]),r[4].set("sync_group",r[2]),r[4].set("num_context_messages",e[3]),r[5]=r[4].get("thread_key"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,19]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):0}))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMessagePointQueryStoredProcedure",e.__tables__=["messages","messages_ranges_v2__generated","threads"],a.exports=e}),null);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.eq(e[1],t.i64.cast([0,5]))?r[0]=t.i64.cast([-1,4294967284]):r[0]=t.i64.cast([0,0]),t.storedProcedure(n("LSVerifyThreadExistsV2"),e[0],e[1],"inbox",r[0],e[3],!1,e[2],!1,!1)},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadRowExistsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadView",["LSArrayGetObjectAt","LSComputeOptimisticThreadCapabilities","LSCreateGroupThreadWithAdminText","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSInsertNewMessageRange","LSIssueNewTask","LSLocalCreateOptimisticGroupThread","LSMessagePointQuery","LSVerifyContactRowExists","LSVerifyThreadRowExists","LSVerifyThreadRowExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return r[4]=new t.Map,r[5]=r[3].keys(),r[6]=t.i64.of_int32(r[5].length),t.i64.gt(r[6],t.i64.cast([0,0]))?t.loopAsync(r[6],function(e){return r[8]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[8]).then(function(e){var t;return t=e,r[9]=t[0],r[10]=t[1],t})},function(e){return r[11]=r[3].get(r[9]),r[4].set(r[9],r[11])}])}):t.resolve()},function(e){return r[7]=r[4].get("product_type"),r[0]=r[7]}]):t.resolve(r[0]=void 0)},function(o){var a;return t.i64.eq(e[1],t.i64.cast([0,7]))?t.resolve((a=[e[0],t.i64.cast([0,1024])],r[1]=a[0],r[2]=a[1],a)):t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(t.i64.eq(e[0],t.i64.cast([0,0]))?r[12]=e[0]:r[12]=void 0,a=[r[12],void 0,t.i64.cast([0,20])],r[3]=a[0],r[4]=a[1],r[5]=a[2]):(o=s.item,i=[o.threadKey,o.clientThreadKey,o.authorityLevel],r[3]=i[0],r[4]=i[1],r[5]=i[2])})},function(o){return r[12]=t.i64.of_int32(e[6].length),t.i64.eq(e[1],t.i64.cast([0,1]))&&t.i64.gt(r[12],t.i64.cast([0,0]))?(r[13]=t.i64.of_int32(e[6].length),t.i64.gt(r[13],t.i64.cast([0,0]))?t.loopAsync(r[13],function(o){return r[14]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[14]).then(function(e){var t;return t=e,r[15]=t[0],r[16]=t[1],t})},function(e){return r[17]=r[15].get("contact_id"),r[18]=r[15].get("contact_type"),r[19]=r[15].get("contact_name"),r[20]=r[15].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[17],t.i64.cast([0,0]),r[20],r[19],r[18],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()):t.resolve()},function(o){return e[5]!==void 0?t.sequence([function(r){return t.storedProcedure(n("LSMessagePointQuery"),e[0],e[5],e[1],void 0)},function(t){var n;return n=[e[0],void 0],r[7]=n[0],r[8]=n[1],n}]):t.sequence([function(o){return([t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})||r[0]==="CTM")&&t.i64.eq(e[0],t.i64.cast([0,0]))?t.sequence([function(o){return r[14]=t.createArray(),r[15]=t.i64.of_int32(e[6].length),t.i64.gt(r[15],t.i64.cast([0,0]))?t.loopAsync(r[15],function(o){return r[28]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return r[31]=r[29].get("contact_id"),r[32]=r[29].get("contact_type"),r[33]=r[29].get("contact_name"),r[34]=r[29].get("contact_profile_photo"),r[35]=(r[14].push(r[31]),r[14])}])}):t.resolve()},function(e){return r[16]=t.i64.of_int32(r[14].length),r[17]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[14].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[18]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[14].some(function(n){return t.i64.eq(e.contactId,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[17].push(e.threadKey),r[17]):0})},function(e){return r[19]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[17].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[17],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[20]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[17].some(function(n){return t.i64.eq(e.threadKey,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[19].push(e.threadKey),r[19]):0})},function(e){return t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[19].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[21]=r[30]}])},function(n){return t.islc(t.filter(t.db.table(9).fetchDesc([[[t.merge({lt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},e[1])],[t.merge(t.i64.cast([0,5]),{lt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),{gt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),e[1])]],"threadTypeLastActivityTimestampMs"]),function(n){return r[19].some(function(e){return t.i64.eq(n.threadKey,e)})&&(t.i64.neq(n.threadType,t.i64.cast([0,5]))&&n.threadName===void 0||t.i64.eq(n.threadType,t.i64.cast([0,5]))&&n.threadName===e[2])&&(t.i64.neq(n.threadType,t.i64.cast([0,206]))||t.i64.le(n.authorityLevel,t.i64.cast([0,20])))&&t.i64.eq(n.threadType,e[1])}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[void 0,void 0,t.i64.cast([0,20])],r[22]=o[0],r[23]=o[1],r[24]=o[2],o):(n=l.item,a=[n.threadKey,n.clientThreadKey,n.authorityLevel],r[22]=a[0],r[23]=a[1],r[24]=a[2])})},function(o){return t.i64.neq(r[22],void 0)?t.sequence([function(o){return r[0]==="CTM"?t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=r[38].get(r[47]),r[39].set(r[47],r[49])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[46]=new t.Map,r[47]=r[42].keys(),r[48]=t.i64.of_int32(r[47].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[49]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[47],r[49]).then(function(e){var t;return t=e,r[50]=t[0],r[51]=t[1],t})},function(e){return r[52]=r[42].get(r[50]),r[46].set(r[50],r[52])}])}):t.resolve()},function(e){return r[44]=r[46]}])},function(e){return r[44]!==void 0?(r[46]=r[44].get("__typename"),r[46]==="XMSGClickToMessengerAdExtras"?r[47]=r[44]:r[47]=void 0,r[47]!==void 0?(r[49]=r[47].get("page_id"),r[48]=r[49]):r[48]=void 0,r[45]=r[48]):r[45]=void 0,r[30]=r[45]}]):t.resolve(r[30]=void 0)},function(e){return r[31]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[33]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(o){return r[30]!==void 0?r[37]=t.i64.from_string(r[30]):r[37]=r[32],e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[45]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[45]).then(function(e){var t;return t=e,r[46]=t[0],r[47]=t[1],t})},function(e){return r[48]=r[38].get(r[46]),r[39].set(r[46],r[48])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[45]=new t.Map,r[46]=r[42].keys(),r[47]=t.i64.of_int32(r[46].length),t.i64.gt(r[47],t.i64.cast([0,0]))?t.loopAsync(r[47],function(e){return r[48]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],r[48]).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[51]=r[42].get(r[49]),r[45].set(r[49],r[51])}])}):t.resolve()},function(e){return r[44]=r[45]}])},function(e){return r[44]!==void 0?(r[45]=r[44].get("__typename"),r[45]==="XMSGClickToMessengerAdExtras"?r[46]=r[44]:r[46]=void 0,r[46]!==void 0?(r[47]=new t.Map,r[47].set("product_extras",r[46]),r[47].set("client_thread_key",r[37]),r[47].set("offline_threading_id",t.i64.to_string(r[34])),r[47].set("admin_text_otid",t.i64.to_string(r[36])),r[48]=r[47].get("client_thread_key"),r[49]=t.toJSON(r[47]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[48]),t.i64.cast([0,1020]),r[49],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()):t.resolve()}]):t.resolve()}]):t.resolve()},function(o){return t.i64.eq(r[24],t.i64.cast([0,20])),t.sequence([function(o){return[t.i64.cast([0,5]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return t.storedProcedure(n("LSVerifyThreadRowExistsV2"),r[22],e[1],t.i64.cast([0,1]),t.i64.cast([0,20]))},function(e){return r[30]=t.i64.cast([0,20])}]):t.sequence([function(o){return t.i64.eq(r[24],t.i64.cast([0,80])),r[31]=t.i64.cast([0,40]),t.storedProcedure(n("LSVerifyThreadRowExists"),r[22],e[1],t.i64.cast([0,1]))},function(e){return r[30]=r[31]}])},function(e){var t;return t=[r[22],r[30]],r[28]=t[0],r[29]=t[1],t}])},function(e){var t;return t=[r[28],r[29]],r[26]=t[0],r[27]=t[1],t}]):t.sequence([function(o){return r[36]=t.i64.of_int32(e[6].length),t.i64.gt(r[36],t.i64.cast([0,0]))?t.loopAsync(r[36],function(o){return r[37]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=r[38].get("contact_id"),r[41]=r[38].get("contact_type"),r[42]=r[38].get("contact_name"),r[43]=r[38].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[40],t.i64.cast([0,0]),r[43],r[42],r[41],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()},function(o){var a,i;return r[28]=!0,r[28]?(i=["",void 0,void 0,void 0,void 0],r[29]=i[0],r[30]=i[1],r[31]=i[2],r[32]=i[3],r[33]=i[4]):(r[36]=(void 0).get("nullstate_description_text1"),r[36]!==void 0?r[37]=r[36]:r[37]="",r[38]=(void 0).get("nullstate_description_text2"),r[39]=(void 0).get("nullstate_description_text3"),r[40]=(void 0).get("nullstate_description_text4"),r[41]=(void 0).get("nullstate_description_text5"),a=[r[37],r[38],r[39],r[40],r[41]],r[29]=a[0],r[30]=a[1],r[31]=a[2],r[32]=a[3],r[33]=a[4]),t.sequence([function(o){return r[36]=new t.Map,r[36].set("nullstate_description_text1",r[29]),r[36].set("nullstate_description_text2",r[30]),r[36].set("nullstate_description_text3",r[31]),r[36].set("nullstate_description_text4",r[32]),r[36].set("nullstate_description_text5",r[33]),t.storedProcedure(n("LSLocalCreateOptimisticGroupThread"),r[14],"",e[2],!0,e[8]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.storedProcedure(n("LSInsertNewMessageRange"),r[37],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0)},function(e){var t;return t=[r[37],void 0],r[34]=t[0],r[35]=t[1],t}])},function(e){var t;return t=[r[34],r[35]],r[26]=t[0],r[27]=t[1],t}])},function(e){var t;return t=[r[26],r[27]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(o){return[t.i64.cast([0,19]),t.i64.cast([0,28])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return r[16]=new t.Map,r[16].set("thread_fbid",e[0]),r[16].set("force_upsert",!1),r[16].set("use_open_messenger_transport",!1),r[16].set("sync_group",t.i64.cast([0,104])),r[16].set("metadata_only",!1),r[16].set("preview_only",!0),r[17]=r[16].get("thread_fbid"),r[18]=t.toJSON(r[16]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[17]),t.i64.cast([0,209]),r[18],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}]):t.sequence([function(r){return t.i64.eq(e[1],t.i64.cast([0,5]))?t.storedProcedure(n("LSVerifyThreadRowExistsV2"),e[0],e[1],t.i64.cast([0,1]),t.i64.cast([0,20])):t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[1],t.i64.cast([0,1]))},function(o){return t.i64.lt(r[5],t.i64.cast([0,60]))?t.storedProcedure(n("LSInsertNewMessageRange"),e[0],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0):t.resolve()},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}])},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[7]=t[0],r[8]=t[1],t}])},function(o){return t.i64.eq(r[8]==null?r[5]:r[8],t.i64.cast([0,20]))?t.sequence([function(o){return t.i64.neq(e[4],void 0)?t.resolve(r[12]=e[4]):t.sequence([function(e){return t.storedProcedure(n("LSComputeOptimisticThreadCapabilities"),r[7]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[12]=r[13]}])},function(e){return t.forEach(t.db.table(9).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({capabilities:r[12]})})}]):t.resolve()},function(e){return t.db.table(9).fetch([[[r[7]]]]).next().then(function(e,n){var o,a,i,l,s=e.done,u=e.value;return s?(o=[r[7],t.i64.cast([0,0])],r[9]=o[0],r[10]=o[1],o):(n=u.item,n.isDisappearingMode?(a=[n.disappearingThreadKey,t.i64.cast([0,1024])],r[12]=a[0],r[13]=a[1]):(i=[r[7],n.mailboxType],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[9]=l[0],r[10]=l[1])})},function(e){var t;return t=[r[9],r[10]],r[1]=t[0],r[2]=t[1],t}])},function(e){var t;return t=[r[1],r[2]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadViewStoredProcedure",e.__tables__=["threads","participants"],a.exports=e}),null);
__d("LSVerifyThreadViewStoredProcedure",["LSSynchronousPromise","LSVerifyThreadView","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadView"),a.threadKey,a.threadType,a.threadName,a.threadPictureUrl,a.threadCapabilities,a.messageId,a.contacts,a.mailboxType,a.threadMetadata,a.enableCcThreadMetadataFix);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","cr:10030"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){n("cr:10030")&&await n("cr:10030").deleteIndexedDB(e),await o("MAWIndexedDBDeletion").deleteMAWPersistence(),(t==null?void 0:t.deleteEncryptionDB)===!0&&await o("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs")}l.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=e}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e="MAWEARKeychainDecryptionError",t="error";try{return await o("MAWSetupWorker").terminateWorker(e),o("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(t,{deleteEncryptionDB:!0})}catch(o){var n=r("getErrorSafe")(o);r("FBLogger")("messenger_web").catching(n).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",t,e)}}l.handleEARKeychainError=e}),98);
__d("MWEBEntrypointsKillswitch.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({JEWEL_THREADLIST:"jewel_threadlist",IN_THREAD_GAP_UI:"in_thread_gap_ui",IN_THREAD_SCROLL_BANNER:"in_thread_scroll_banner",IN_THREAD_SEARCH:"in_thread_search",INBOX_INTERSTITIAL:"inbox_interstitial",INBOX_THREADLIST:"inbox_threadlist",INBOX_THREADLIST_UNIVERSAL_SEARCH:"inbox_threadlist_universal_search",MEDIA_GALLERY_RESTORE:"media_gallery_restore",EB_SETTINGS:"eb_settings",AUTO_RESTORE:"auto_restore",DYI:"dyi",IGD_NO_KILLSWITCH_APPLICABLE:"igd_no_killswitch_applicable",NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:"not_an_entrypoint_no_killswitch_applicable",IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:"in_development_add_a_todo_comment_with_a_task_above_this_to_add_a_killswitch",PINNED_MESSAGES:"pinned_messages",BUMP_MESSAGES:"bump_messages",SIDEBAR_SETTINGS_PRIVACY_MENU:"sidebar_settings_privacy_menu",JEWEL_EVERGREEN_PIN_UPSELL:"jewel_evergreen_pin_upsell"}),l=e;i.default=l}),66);
__d("MWFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(t,n,r,o,a,i,l){"use strict";l.createFocusTable=o("FocusTable.react").createFocusTable,l.tabbableScopeQuery=o("focusScopeQueries").tabbableScopeQuery}),98);
__d("MWThreadListFocusableTable.react",["MWFocusTable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("MWFocusTable.react").createFocusTable(o("MWFocusTable.react").tabbableScopeQuery),c=u[0],d=u[1],m=u[2],p=d,_=m;function f(e){var t=o("react-compiler-runtime").c(2),n=e.children,r;return t[0]!==n?(r=s.jsx(c,{allowModifiers:!0,tabScopeQuery:o("MWFocusTable.react").tabbableScopeQuery,wrapX:!0,children:n}),t[0]=n,t[1]=r):r=t[1],r}l.MWThreadListFocusableTableRow=p,l.MWThreadListFocusableTableCell=_,l.MWThreadListFocusableTableScopeQuery=o("MWFocusTable.react").tabbableScopeQuery,l.MWThreadListFocusableTable=f}),98);
__d("MWXMenu.react",["cr:6941"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6941")}),98);
__d("MWXMenuItem.react",["BaseTheme.react","FDSTextWebUtils","MWXSvgIcon","MWXThreadThemeColor","MessengerWebUXLogger","cr:2466","cr:4318","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["icon","iconColor","loggingEvent","onClick","primaryColor","secondaryColor"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useMemo;function _(t){var a=o("react-compiler-runtime").c(39),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u,d,m,p,_,g,h;if(a[3]!==i){var y=i;u=y.icon,d=y.iconColor,m=y.loggingEvent,p=y.onClick,g=y.primaryColor,h=y.secondaryColor,_=babelHelpers.objectWithoutPropertiesLoose(y,s),a[3]=i,a[4]=u,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=g,a[10]=h}else u=a[4],d=a[5],m=a[6],p=a[7],_=a[8],g=a[9],h=a[10];var C=d instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?"primary":d,b=r("MessengerWebUXLogger").useInteractionLogger(),v;a[11]!==b||a[12]!==m||a[13]!==p?(v=function(t){p==null||p(t),m&&(b==null||b(m))},a[11]=b,a[12]=m,a[13]=p,a[14]=v):v=a[14];var S=v;if(n("cr:4318")!=null){var R;a[15]!==S||a[16]!==u||a[17]!==C||a[18]!==_||a[19]!==l?(R=c.jsx(n("cr:4318"),babelHelpers.extends({icon:u,iconColor:C,onClick:S},_,{ref:l})),a[15]=S,a[16]=u,a[17]=C,a[18]=_,a[19]=l,a[20]=R):R=a[20];var L;return a[21]!==d||a[22]!==R?(L=c.jsx(f,{iconColor:d,children:R}),a[21]=d,a[22]=R,a[23]=L):L=a[23],L}if(n("cr:2466")!=null){var E=u instanceof o("MWXSvgIcon").MWXSvgMenuItemIcon?u.component:u,k;a[24]!==g?(k=o("FDSTextWebUtils").getFDSHeadlineColor(g),a[24]=g,a[25]=k):k=a[25];var I;a[26]!==h?(I=o("FDSTextWebUtils").getFDSMetaColor(h),a[26]=h,a[27]=I):I=a[27];var T;a[28]!==S||a[29]!==C||a[30]!==_||a[31]!==l||a[32]!==E||a[33]!==k||a[34]!==I?(T=c.jsx(n("cr:2466"),babelHelpers.extends({icon:E,iconColor:C,isIconDecorative:!0,onClick:S,primaryColor_DEPRECATED:k,secondaryColor:I},_,{ref:l})),a[28]=S,a[29]=C,a[30]=_,a[31]=l,a[32]=E,a[33]=k,a[34]=I,a[35]=T):T=a[35];var D;return a[36]!==d||a[37]!==T?(D=c.jsx(f,{iconColor:d,children:T}),a[36]=d,a[37]=T,a[38]=D):D=a[38],D}return null}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.iconColor,i,l;t[0]!==a?(l=a instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":a.color},light:{"primary-icon":a.color},type:"VARIABLES"}:void 0,t[0]=a,t[1]=l):l=t[1],i=l;var s=i;if(s==null)return n;var u;return t[2]!==n||t[3]!==s?(u=c.jsx(r("BaseTheme.react"),{config:s,children:n}),t[2]=n,t[3]=s,t[4]=u):u=t[4],u}l.default=_}),98);
__d("MWXPopoverLoadingState.react",["cr:8235"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8235")}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4148"),s=o("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",e),u=s;l.default=u}),98);
__d("isMWEBEntrypointEnabled",["MWEBEntrypointsKillswitch.enum","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL:return r("justknobx")._("2598");case r("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST:return r("justknobx")._("2599");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST:return r("justknobx")._("2600");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI:return r("justknobx")._("2601");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SCROLL_BANNER:return r("justknobx")._("2602");case r("MWEBEntrypointsKillswitch.enum").AUTO_RESTORE:return r("justknobx")._("2603");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SEARCH:return r("justknobx")._("2604");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST_UNIVERSAL_SEARCH:return r("justknobx")._("2768");case r("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE:return r("justknobx")._("2841");case r("MWEBEntrypointsKillswitch.enum").PINNED_MESSAGES:return r("justknobx")._("2937");case r("MWEBEntrypointsKillswitch.enum").BUMP_MESSAGES:return r("justknobx")._("3682");case r("MWEBEntrypointsKillswitch.enum").SIDEBAR_SETTINGS_PRIVACY_MENU:return r("justknobx")._("4788");case r("MWEBEntrypointsKillswitch.enum").JEWEL_EVERGREEN_PIN_UPSELL:return r("justknobx")._("1878");case r("MWEBEntrypointsKillswitch.enum").DYI:case r("MWEBEntrypointsKillswitch.enum").EB_SETTINGS:case r("MWEBEntrypointsKillswitch.enum").IGD_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:return!0}}l.default=e}),98);
__d("mwEBCheckIfEBKeysExistInDisk",["EBDB","FBLogger","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("415");async function u(t){if(!s||t==="true")return Promise.resolve();try{var n=await o("EBDB").getEBDB(),a=await n.store("secure_encrypted_backups_client_state").count();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:(a>0).toString()}})}catch(t){var i=r("getErrorSafe")(t);throw r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:"failed_to_open_db"}}),r("FBLogger")("wmi_eb").catching(i).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to check if EB keys exists"]))),i}}l.default=u}),98);
__d("useMWEBBackupStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBBackupStateQuery",selections:[{kind:"RequiredField",field:e,action:"LOG",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBBackupStateQuery",selections:[e]},params:{cacheID:"780695c71d771c39c4d001bd676844c7",id:null,metadata:{},name:"useMWEBBackupStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBBackupStateUtil",["isMWEBEntrypointEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return!r("isMWEBEntrypointEnabled")(e)||t?0:n!=null?n:1}l.default=e}),98);
__d("useMWEBBackupState",["CometRelay","react-compiler-runtime","useMWEBBackupStateQuery.graphql","useMWEBBackupStateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a,i=o("react-compiler-runtime").c(2),l=t.entrypoint,s,u;i[0]===Symbol.for("react.memo_cache_sentinel")?(s=e!==void 0?e:e=n("useMWEBBackupStateQuery.graphql"),u={},i[0]=s,i[1]=u):(s=i[0],u=i[1]);var c=o("CometRelay").useClientQuery(s,u);return r("useMWEBBackupStateUtil")(l,(c==null?void 0:c.viewer)==null,c==null||(a=c.viewer)==null?void 0:a.backup_state)}l.default=s}),98);/*FB_PKG_DELIM*/
__d("E2EEMessagingLinkContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c({inThread:!1,isSecure:!1});function _(e){var t=o("react-compiler-runtime").c(6),n=e.children,r=e.inThread,a=e.isSecure,i,l;t[0]!==r||t[1]!==a?(l={inThread:r,isSecure:a},t[0]=r,t[1]=a,t[2]=l):l=t[2],i=l;var u=i,c;return t[3]!==n||t[4]!==u?(c=s.jsx(p.Provider,{value:u,children:n}),t[3]=n,t[4]=u,t[5]=c):c=t[5],c}function f(){return d(p)}l.E2EEMessagingLinkContext=p,l.E2EEMessagingLinkProvider=_,l.useE2EEMessagingLink=f}),98);
__d("useGroupThreadViewParams",["getGroupThreadViewParams","react-compiler-runtime","useCometRouterState","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(3),t=r("useTopMostRouteCometEntityKey")(),n=r("useCometRouterState")(),a;return e[0]!==t||e[1]!==n?(a=r("getGroupThreadViewParams")(t,n),e[0]=t,e[1]=n,e[2]=a):a=e[2],a}l.default=e}),98);
__d("useMWInboxURIState",["CometRouteParams","CometRouteURL","ConstUriUtils","CurrentEnvironment","FBLogger","I64","LSMessagingThreadTypeUtil","MessengerURIConstants","ReQL","ReQLSuspense","gkx","isArmadillo","mwCMIsAnyCMThread","react-compiler-runtime","useCurrentRoute","useGroupThreadViewParams","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="Compose",c="PayFriendPicker",d="PayThread",m="SecureThread",p="Thread",_={Compose:u},f={PayFriendPicker:c,PayThread:d},g={SecureThread:m,Thread:p},h=babelHelpers.extends({},_,f,g),y="Null",C="Payment",b="People",v="Search",S="SearchMessages",R="SeeAllGroups",L="SeeAllPages",E="SeeAllPeople",k="SeeAllUnread",I="TeamworkSeeAllAnnouncementGroups",T="Recent",D="UnsupportedThread",x={Null:y,Payment:C,People:b,Search:v,SearchMessages:S,SeeAllGroups:R,SeeAllPages:L,SeeAllPeople:E,SeeAllUnread:k,TeamworkSeeAllAnnouncementGroups:I},$={Recent:T},P={UnsupportedThread:D},N=babelHelpers.extends({},x,$,P),M={type:N.Null},w="/?$";function A(e){var t=e.match(new RegExp(r("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"));if(t!=null)return decodeURIComponent(t[1])}var F=r("CurrentEnvironment").instagramdotcom?r("MessengerURIConstants").INSTAGRAM_DIRECT_PATH:r("CurrentEnvironment").facebookdotcom?r("MessengerURIConstants").FACEBOOK_PREFIX:"";function O(e){var t=new URL(e.url,window.location.origin),n=t.pathname,a=t.searchParams,i=new RegExp("^"+(F+"(/|$)"));if(r("CurrentEnvironment").facebookdotcom&&!i.test(n))throw r("FBLogger")("messenger_web").mustfixThrow("MWInboxURIState.NonMessengerState wrong CurrentEnvironment pattern for %s",F);var l=n.replace(i,"/"),u=a==null?void 0:a.get("fbid"),c=a==null?void 0:a.get("id");if(l.match(new RegExp("^"+r("MessengerURIConstants").PEOPLE_PATH))!=null)return{type:N.People};if(l.match(new RegExp("^"+r("MessengerURIConstants").PAYMENT_PATH))!=null)return{type:N.Payment};if(l.match(new RegExp("^"+r("MessengerURIConstants").SEARCH_PATH))!=null)return{type:N.Search};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_GROUP_VIEW))!=null)return{type:N.SeeAllGroups};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_CHAT_VIEW))!=null)return{type:N.SeeAllPeople};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_UNREAD_VIEW))!=null)return{type:N.SeeAllUnread};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_ANNOUNCEMENT_GROUP_VIEW))!=null)return{type:N.TeamworkSeeAllAnnouncementGroups};if(l==="/read/"&&u!=null)return{type:N.Recent,uriStateDetails:{fbid:(s||(s=o("I64"))).of_string(u),type:h.Thread}};if(l.match(new RegExp("^"+(r("MessengerURIConstants").COMPOSE_SUBPATH+w)))!=null)return{type:N.Recent,uriStateDetails:{initialTogglePosition:"E2EEToggleOff",type:h.Compose}};if(l.match(new RegExp("^"+(r("MessengerURIConstants").PAYMENT_PATH+r("MessengerURIConstants").PAYMENT_PAY_PATH)))!=null)return{type:N.Recent,uriStateDetails:{fbid:void 0,type:c!=null?h.PayThread:h.PayFriendPicker}};var d=q(A(l));return d!=null?{type:N.Recent,uriStateDetails:{fbid:d,type:h.Thread}}:M}var B=r("gkx")("23433")||r("gkx")("22839");function W(e){return new URL(e,window.location.origin).pathname.split("/")}function q(e){try{return e!=null?(s||(s=o("I64"))).of_string_opt(e):void 0}catch(e){return}}function U(t){var n,a=o("react-compiler-runtime").c(40),l=(e||(e=r("useReStore")))(),u=r("useCurrentRoute")(),c=o("CometRouteURL").useRouteURLPath(),d=r("useGroupThreadViewParams")(),m;a[0]!==t?(m=q(t),a[0]=t,a[1]=m):m=a[1];var p=m,_=o("CometRouteParams").useRouteParams(),f=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(p!=null?p:(s||(s=o("I64"))).min_int)},[l,p],i.id+":317"))==null?void 0:n.threadType,g;a[2]!==f?(g=f!=null?r("mwCMIsAnyCMThread")(f):!1,a[2]=f,a[3]=g):g=a[3];var y=g,C;a[4]!==f?(C=f!=null?o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannelWithNoAccessibility(f):!1,a[4]=f,a[5]=C):C=a[5];var b=C;if(d!=null){var v;a[6]!==d.threadKey?(v=(s||(s=o("I64"))).of_string(d.threadKey),a[6]=d.threadKey,a[7]=v):v=a[7];var S;return a[8]!==v?(S={type:N.Recent,uriStateDetails:{fbid:v,type:h.Thread}},a[8]=v,a[9]=S):S=a[9],S}if(u==null)return M;if(!c.startsWith(F)&&!c.startsWith(r("MessengerURIConstants").GROUPS_PATH))throw r("FBLogger")("messenger_web").mustfixThrow("MWInboxURIState.NonMessengerState wrong groups path %s",c);var R=_.initial_e2ee_toggle_position==="1"||_.initial_e2ee_toggle_position===1||_.initial_e2ee_toggle_position===!0?"E2EEToggleOn":"E2EEToggleOff",L=u.url,E;if(a[10]!==l.tables.threads||a[11]!==R||a[12]!==b||a[13]!==y||a[14]!==u||a[15]!==p||a[16]!==f){E=Symbol.for("react.early_return_sentinel");e:{var k,I=L.substring(F.length),T=(k=o("ConstUriUtils").getUriOrThrow(I))==null?void 0:k.getPath().split("/");if(p!=null){if(T.length===4&&T[0]===""&&T[1]==="e2ee"&&T[2]==="t"&&r("isArmadillo")()){var D;a[18]!==p?(D={type:N.Recent,uriStateDetails:{fbid:p,type:h.SecureThread}},a[18]=p,a[19]=D):D=a[19],E=D;break e}if(f!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(f)){var x;a[20]!==u?(x=O(u),a[20]=u,a[21]=x):x=a[21],E=x;break e}if(y&&!B){E=M;break e}if(b){var $;a[22]!==p?($={fbid:p,type:N.UnsupportedThread},a[22]=p,a[23]=$):$=a[23],E=$;break e}var P;a[24]!==p?(P={type:N.Recent,uriStateDetails:{fbid:p,type:h.Thread}},a[24]=p,a[25]=P):P=a[25],E=P;break e}if(T==null){var w;a[26]!==u?(w=O(u),a[26]=u,a[27]=w):w=a[27],E=w;break e}switch(T.length){case 2:{if(T[1]==="new"){var A;a[28]!==R?(A={type:N.Recent,uriStateDetails:{initialTogglePosition:R,type:h.Compose}},a[28]=R,a[29]=A):A=a[29],E=A;break e}var W;a[30]!==u?(W=O(u),a[30]=u,a[31]=W):W=a[31],E=W;break e}case 3:{if(T[1]!=="t"){var U;a[32]!==u?(U=O(u),a[32]=u,a[33]=U):U=a[33],E=U;break e}if(T[2]===""){var V;a[34]!==u?(V=O(u),a[34]=u,a[35]=V):V=a[35],E=V;break e}var H=q(T[2]),G=H!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(H),i.id+":432"):null;if(H!=null&&G!=null&&!o("LSMessagingThreadTypeUtil").isArmadilloSecure(G==null?void 0:G.threadType)){var z;a[36]!==H?(z={type:N.Recent,uriStateDetails:{fbid:H,type:h.Thread}},a[36]=H,a[37]=z):z=a[37],E=z;break e}E=M;break e}case 0:case 1:default:{var j;a[38]!==u?(j=O(u),a[38]=u,a[39]=j):j=a[39],E=j;break e}}}a[10]=l.tables.threads,a[11]=R,a[12]=b,a[13]=y,a[14]=u,a[15]=p,a[16]=f,a[17]=E}else E=a[17];if(E!==Symbol.for("react.early_return_sentinel"))return E}l.MWInboxURIStateDetailsType=h,l.MWInboxURIStateTag=N,l.getRouteTokens=W,l.useMWInboxURIState=U}),98);
__d("MWInboxProvider.react",["react","react-compiler-runtime","useMWInboxURIState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.createContext,c=u();function d(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.threadKey,a=o("useMWInboxURIState").useMWInboxURIState(r),i;return t[0]!==n||t[1]!==a?(i=s.jsx(c.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.MWInboxProviderContext=c,l.MWInboxProvider=d}),98);
__d("EncryptedBackupsSupportedPlatformUtils",["$InternalEnum","FBLogger","MWInboxProvider.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext,u=n("$InternalEnum").Mirrored(["MESSENGER_DOT_COM","FACEBOOK_DOT_COM","FACEBOOK_INBOX","INSTAGRAM_DIRECT_INBOX"]),c=r("gkx")("23433"),d=r("gkx")("23434"),m=r("gkx")("24057"),p=r("gkx")("5575");function _(){var e=s(o("MWInboxProvider.react").MWInboxProviderContext);return m?u.INSTAGRAM_DIRECT_INBOX:c||p?u.MESSENGER_DOT_COM:(d||r("FBLogger")("wmi_eb").info("Unknown supported platform type. Falling back to facebook.com as Supported Platform type."),e!=null?u.FACEBOOK_INBOX:u.FACEBOOK_DOT_COM)}l.EncryptedBackupsSupportedPlatform=u,l.useMWEncryptedBackupsGetCurrentSupportedPlatform=_}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"add_messenger_contact",t.i64.cast([0,308]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactAddMessengerContactStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAddMessengerContact"),a.contactId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(n){return r[1]=a.threadSubtype,t.i64.eq(r[1],t.i64.cast([0,75]))?r[0]="interop":r[0]="inbox",t.i64.eq(r[1],t.i64.cast([0,75]))?r[2]=t.i64.cast([-1,4294967277]):r[2]=t.i64.cast([0,0]),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(n){var o=n.update,i=n.item;return o({folderName:r[0],parentThreadKey:r[2],igFolder:e[1],capabilities:t.i64.and_(a.capabilities,t.i64.cast([-1,4292870143]))})})},function(n){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,r[7]=n.clientThreadPk,t.db.table(276).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,t.i64.eq(r[2],t.i64.cast([-1,4294967277]))?r[8]=t.i64.cast([0,19]):r[8]=t.i64.cast([0,0]),t.forEach(t.db.table(276).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({folderType:r[8]})}))}))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[3]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[3]=r[7])})},function(o){return r[5]=new t.Map,r[5].set("thread_key",e[0]),r[5].set("sync_group",r[3]),r[5].set("ig_folder",e[1]),r[6]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"message_request",t.i64.cast([0,66]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure",e.__tables__=["threads","mi_act_mapping_table","client_threads"],a.exports=e}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticAcceptMessageRequest"),a.threadKey,a.igFolder);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWAttachmentBlob.react",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","WAMediaQplHelper","cr:332","interaction-tracing","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:1,value:t})}function f(e){var t=m.get(e);return t!=null&&t.TAG===1}function g(t,a,i,l){var s=l!=null?l:t,u=m.get(s);if(u!=null){if(u.TAG===0)throw u.value;return u.value}i==null||i.addPoint("fetch_data_blob_from_backend_start",{string:{fetch_by:isFinite(t)?"mediaId":"hashedPlaintextHash"}});var p=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),_=(d||(d=r("performanceNow")))(),f=isFinite(t)?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"mediaId"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"mediaId"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobUrlByMediaId"),(c||(c=n("Promise"))).resolve()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"hashedPlaintextHash"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:t,idbBlob:e}),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"hashedPlaintextHash"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobDataUrlByHashedPlaintextHash"),(c||(c=n("Promise"))).resolve()});throw(e||(e=o("PromiseAnnotate"))).setDisplayName(f,"MAWAttachmentBlob.getBlobDataUrl"),m.set(s,{TAG:0,value:f}),f}function h(e,t,n){if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var a,i=(a=C(e))!=null?a:"";return i==null||i.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),i)}return g(e.attachmentFbid,t,n)}function y(e,t,n,a,i){var l="fetch_"+t+"_xma_blob",c={string:{description:n}};if(e==null)return a==null||a.endFail(l+"_attachment_is_null",c),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))&&t==="preview"){var d=C(e);return d==null||d.length===0?(r("FBLogger")("messenger_web_media").mustfix("Unable to getInfoUrlXMA because optimistic attachment url is null or empty, from %s",n),a==null||a.endFail(l+"_no_optimistic_attachment_url",c),""):(a==null||a.addPoint(l+"_return_optimistic",c),d)}var m=i!=null?i:e.attachmentFbid+t,_=p.get(m);if(_!=null){if(_.TAG===0)throw _.value;return _.value}var f;switch(t){case"preview":f=e.xmaPreviewFbid;break;case"header":f=e.xmaHeaderImageFbid;break;case"favicon":f=e.xmaFaviconFbid;break}if(f==null)throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed to getInfoUrlXMA because xma does not have required data. xmaId is %s, info type is %s, from %s",e.attachmentFbid,t,n);return g(f,n,a)}function C(e){return e==null?void 0:e.previewUrl}function b(e,t,n){var o=(d||(d=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerAttachmentUrl=_,l.isEagerAttachmentUrlDone=f,l.getAttachmentBlobNonOptional_CausesSuspense=g,l.getAttachmentBlob_CausesSuspense=h,l.getInfoUrlXMA_CausesSuspense=y}),98);
__d("MWEBRestoreDialogWrapperQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24825865927022420"}),null);
__d("MWEBRestoreDialogWrapperQuery$Parameters",["MWEBRestoreDialogWrapperQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWEBRestoreDialogWrapperQuery_facebookRelayOperation"),metadata:{},name:"MWEBRestoreDialogWrapperQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MAWEncryptedBackupsRestoreDialog.entrypoint",["JSResourceForInteraction","MWEBRestoreDialogWrapperQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("MWEBRestoreDialogWrapperQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWEBRestoreDialogWrapper.react").__setRef("MAWEncryptedBackupsRestoreDialog.entrypoint")};l.default=e}),98);
__d("MAWGetAttachmentThumbnailBlob",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","interaction-tracing","isStringNullOrEmpty","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:"done",url:t})}function f(e,t,n,a){var i;if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((u||(u=o("I64"))).equal(e.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var l,s=h(e);return s==null||s.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),p.set((l=e.offlineAttachmentId)!=null?l:e.attachmentFbid,s),s)}var _=a!=null?a:e.attachmentFbid,f=m.get(_),g=p.get((i=e.offlineAttachmentId)!=null?i:e.attachmentFbid);if(f!=null){if(f.TAG==="loading"){if(g!=null)return g;throw f.urlPromise}var b=r("isStringNullOrEmpty")(f.url);return b&&(n==null||n.addPoint("attachment_state_preview_url_is_null_or_empty",{string:{description:t}})),f.url}var v=isFinite(e.attachmentFbid)?C(e.attachmentFbid,t,n,_):y(e.attachmentFbid,t,n,_);if(m.set(_,{TAG:"loading",urlPromise:v}),g!=null)return g;throw(d||(d=o("PromiseAnnotate"))).setDisplayName(v,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobDataUrl"),v}function g(e,t,n,r){var a=r!=null?r:e,i=m.get(a);if(i!=null){if(i.TAG==="loading")throw i.urlPromise;return i.url}var l=isFinite(e)?C(e,t,n,a):y(e,t,n,a);throw m.set(a,{TAG:"loading",urlPromise:l}),(d||(d=o("PromiseAnnotate"))).setDisplayName(l,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobByAttachmentId"),l}function h(e){return e==null?void 0:e.previewUrl}function y(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByHashedPlaintextHash, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function C(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByMediaId, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function b(e,t,n){var o=(s||(s=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentThumbnailBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerThumbnailUrl=_,l.getThumbnailBlob_CausesSuspense=f,l.getThumbnailBlobByAttachmentId_CausesSuspense=g}),98);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function s(t,n,r,o){return e.load().then(function(e){var a=e.onActThreadReady;return a(t.tables,n,r,o)})}l.default=s}),98);
__d("MWChatEncryptedBackupsQPLSource.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({JEWEL_RESTORE_SOFTBLOCK:"jewel_restore_softblock",JEWEL_THREADLIST_QP:"jewel_threadlist_qp",JEWEL_THREADLIST_ONBOARDING_QP:"jewel_threadlist_onboarding_qp",JEWEL_THREADLIST_QP_WITH_PIN:"jewel_threadlist_qp_with_pin",JEWEL_THREADLIST_PERSISTENT_BANNER:"jewel_threadlist_persistent_banner",JEWEL_ONBOARDING_SOFTBLOCK:"jewel_onboarding_softblock",JEWEL_ONBOARDING_HARDBLOCK:"jewel_onboarding_hardblock",JEWEL_EVERGREEN_PIN_UPSELL:"jewel_evergreen_pin_upsell",CHAT_TAB_SOFTBLOCK:"chat_tab_softblock",CHAT_TAB_HARDBLOCK:"chat_tab_hardblock",CHAT_TAB_ONBOARDING_QP:"chat_tab_onboarding_qp",CHAT_TAB_QP:"chat_tab_qp",INBOX_INTERSTITIAL_SOFTBLOCK:"inbox_interstitial_softblock",INBOX_INTERSTITIAL_HARDBLOCK:"inbox_interstitial_hardblock",INBOX_INTERSTITIAL_EVERGREEN_PIN_UPSELL:"inbox_interstitial_evergreen_pin_upsell",INBOX_THREADLIST_QP:"inbox_threadlist_qp",INBOX_THREADLIST_ONBOARDING_QP:"inbox_threadlist_onboarding_qp",INBOX_THREADLIST_PERSISTENT_BANNER:"inbox_threadlist_persistent_banner",INBOX_THREADLIST_QP_WITH_PIN:"inbox_threadlist_qp_with_pin",IN_THREAD_SCROLL_PERSISTENT_BANNER:"in_thread_scroll_persistent_banner",IN_THREAD_GAP_UI:"in_thread_gap_ui",IN_THREAD_QP:"in_thread_qp",EB_SETTINGS:"eb_settings",AUTO_RESTORE:"auto_restore",DYI:"dyi",UNKNOWN:"unknown",INBOX_MESSAGE_SEARCH:"inbox_message_search",SETTINGS_RESTORE_HOLDOUT_MENU_ITEM:"settings_restore_holdout_menu_item",UNIVERSAL_MESSAGE_SEARCH:"universal_message_search",MEDIA_GALLERY_RESTORE:"media_gallery_restore",EB_WEB_ONBOARDING_DIALOG:"eb_web_onboarding_dialog",IG_SETTINGS:"ig_settings",IG_INBOX_AUTO_RESTORE:"ig_inbox_auto_restore",CHAT_SETTINGS:"chat_settings"}),l=e;i.default=l}),66);
__d("MWEBFlowSourceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({source:null});l.default=u}),98);
__d("MWEBQPAlphaIconSmall.react",["ix","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=r("gkx")("23433");function u(){var t=s(e?"230229":"398256");return t}l.getMWEBQPAlphaIconSmallProperties=u}),98);
__d("MWEBUpsellDismissedEnum.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({NOT_DISMISSED:0,UPSELLS_DISMISSED:1,ALL_DISMISSED:2});i.MWEBUpsellDismissedStateEnum=e}),66);
__d("MWEncryptedBackupsDeferLocalStorageUpsell",["$InternalEnum","FBLogger","MWEncryptedBackupsSharedState","ReQL","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["SOFTBLOCK_JEWEL_AND_CHAT_TAB","QP_JEWEL","QP_WITH_PIN_JEWEL","PERSISTENT_BANNER_JEWEL"]),u=-1,c=720*60*1e3,d=1440*60*1e3,m=4320*60*1e3;function p(e){switch(e){case s.SOFTBLOCK_JEWEL_AND_CHAT_TAB:return{countdownInMS:d,impressionsCountKey:"mw_encrypted_backups_soft_block_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_soft_block_last_impression_time_key",maxImpressionLimit:5};case s.QP_JEWEL:return{countdownInMS:c,impressionsCountKey:"mw_encrypted_backups_qp_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_jewel_last_impression_time_key",maxImpressionLimit:1};case s.QP_WITH_PIN_JEWEL:return{countdownInMS:c,impressionsCountKey:"mw_encrypted_backups_qp_with_pin_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_with_pin_jewel_last_impression_time_key",maxImpressionLimit:1};case s.PERSISTENT_BANNER_JEWEL:return{countdownInMS:m,impressionsCountKey:"mw_encrypted_backups_banner_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_banner_jewel_last_impression_time_key",maxImpressionLimit:1}}}function _(e){var t=e.db,n=e.upsellType,a=p(n),i=a.impressionsCountKey,l=a.lastImpressionTimeKey;r("promiseDone")(o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:t,stateKey:l,stateValue:Date.now().toString()}).then(async function(){var e,n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.experiences_shared_state)),r=(e=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:t,sharedStateTable:n,stateKey:i}))!=null?e:"0";await o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:t,stateKey:i,stateValue:(+r+1).toString()})}),function(){},function(){var e="[Encrypted Backups] Failed to defer EB upsell "+n;r("FBLogger")("wmi_eb").mustfix(e)})}function f(t){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n,a=p(t),i=a.lastImpressionTimeKey;(n=(e||(e=r("WebStorage"))).getLocalStorage())==null||n.removeItem(i)}}function g(e){var t,n=e.db,r=e.sharedStateTable,a=e.upsellType,i=p(a),l=i.impressionsCountKey;return(t=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:n,sharedStateTable:r,stateKey:l}))!=null?t:"0"}l.MWEncryptedBackupsDeferableUpsellType=s,l.INFINITE_IMPRESSIONS_LIMIT=u,l.getLocalStorageKeys=p,l.updateUpsellEntry=_,l.deleteEntry=f,l.getUpsellImpressions=g}),98);
__d("MWEncryptedBackupsOnboardingType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["WEB_ONLY_ONBOARDING","NEW_USER_ONBOARDING","AUTO_EB","PIN_UPSELL"]),l=e;i.default=l}),66);
__d("MWEncryptedBackupsRetrieveQplLoggingAnnotations",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","Promise","ReQL","gkx","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("requireDeferred")("MWEBUseLocalStorage").__setRef("MWEncryptedBackupsRetrieveQplLoggingAnnotations"),d=r("gkx")("609");function m(t){var a=t.db,i=t.onFetch,l=t.upsellType;r("promiseDone")((u||(u=n("Promise"))).all([o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.experiences_shared_state)),o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state))]),function(t){var n=t[0],u=t[1],m=u[0],p=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),_=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:a,sharedStateTable:n,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY}),f=o("MWEncryptedBackupsSharedState").getIsEntryPresentInSharedState({db:a,sharedStateTable:n,stateKey:"auto_restored"});c.onReady(function(t){var u=t.mwEBGetIsLocalStorageEntryValuePresent,c=t.mwEBGetLocalStorageEntryValue,g=c(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE),h=u(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),y=u(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),C=_!=null,b=l&&o("MWEncryptedBackupsDeferLocalStorageUpsell").getUpsellImpressions({db:a,sharedStateTable:n,upsellType:l}),v=m!=null&&(e||(e=o("I64"))).equal(m.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE));i({ebsmWiped:g!=null?g:"false",firstUpsellTime:p,hasEbKeysLocally:f?"false":v.toString(),hasEBSM:d.toString(),hasPDB:"false",hasUserOnboardedBefore:C.toString(),hasUserRestoredBefore:h.toString(),hasUserRestoredBeforeTemp:y.toString(),impressionsCount:b!=null?b:"0"})})},function(){r("FBLogger")("wmi_eb").mustfix("[Encrypted Backups] Failed to fetch QPL annotations from Shared State")})}l.encryptedBackupsRetrieveQplLoggingAnnotations=m}),98);
__d("MWEncryptedBackupsThreadListQPWrapper.react",["$InternalEnum","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum").Mirrored(["JEWEL","THREAD_LIST","CHAT_TAB"]);function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,r=e.testid,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x1n2onr6 x1vjfegm"},t[0]=a):a=t[0];var i;return t[1]!==n||t[2]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{"data-testid":void 0,children:n})),t[1]=n,t[2]=r,t[3]=i):i=t[3],i}l.MWEncryptedBackupsQPTrigger=u,l.MWEncryptedBackupsThreadListQPWrapper=c}),98);
__d("MWFDSArrowLeft.svg.react",["cr:21539"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21539")}),98);
__d("MWLogInboxFiltersInteraction",["ExecutionEnvironment","ifRequireable","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(30610001,"3003");function u(t){if((e||(e=r("ExecutionEnvironment"))).isInBrowser){var n=d();n==null||n.cancelTrace(t,!0)}}function c(){if((e||(e=r("ExecutionEnvironment"))).isInBrowser){var t=d();t==null||t.forceCompleteTrace()}}function d(){if((e||(e=r("ExecutionEnvironment"))).isInBrowser)return r("ifRequireable")("InteractionTracing",function(e){return Array.from(e.getPendingInteractions()).find(function(e){var t,n=e.getTrace()||{},r=n.tracePolicy,o=r===void 0?"":r;if(((t=e.getTrace())==null?void 0:t.qplEvent)===s&&(o.includes("comet.jewel.messenger.")||o.includes("comet.messenger.inbox.")))return!0})})}l.logInboxFiltersNavigationCancel=u,l.logInboxFiltersNavigationComplete=c,l.getInboxFiltersNavigationTrace=d}),98);
__d("MWXTheme.react",["cr:7379","cr:7380","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["displayMode"],s,u=s||(s=o("react"));function c(t){var r=t.displayMode,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return n("cr:7380")!=null?u.jsx(n("cr:7380"),babelHelpers.extends({displayMode:r},o)):n("cr:7379")!=null?u.jsx(n("cr:7379"),babelHelpers.extends({theme:r},o)):null}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("useMWXButtonSpinner",["fbt","FDSProgressRing.react","MWXSpinner.react","MWXTheme.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=r("react"));function c(e){var t=o("react-compiler-runtime").c(2),n=e.children,a;return t[0]!==n?(a=r("MWXTheme.react")!=null?u.jsx(r("MWXTheme.react"),{displayMode:"dark",children:n}):null,t[0]=n,t[1]=a):a=t[1],a}function d(e,t,n){var a=o("react-compiler-runtime").c(8),i=n===36,l=r("FDSProgressRing.react")!=null&&i?20:16;if(t===!0){var d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Loading..."),a[0]=d):d=a[0];var m;return a[1]!==l?(m=u.jsx(r("FDSProgressRing.react"),{"aria-label":d,color:"disabled",duration:2,size:l,type:"estimated"}),a[1]=l,a[2]=m):m=a[2],m}var p=e!=="secondary"?c:u.Fragment,_;a[3]!==l?(_=u.jsx(r("MWXSpinner.react"),{color:"dark",size:l}),a[3]=l,a[4]=_):_=a[4];var f;return a[5]!==p||a[6]!==_?(f=u.jsx(p,{children:_}),a[5]=p,a[6]=_,a[7]=f):f=a[7],f}l.default=d}),226);
__d("MWXButtonGroup.react",["cr:227","cr:6106","react","react-compiler-runtime","useMWXButtonSpinner"],(function(t,n,r,o,a,i,l){"use strict";var e=["icon","loading","type"],s=["icon","loading"],u,c=u||(u=o("react"));function d(t){var a=o("react-compiler-runtime").c(36),i=t.align,l=t.direction,u=t.expanding,d=t.paddingHorizontal,m=t.primary,p=t.secondary,_=t.secondaryReduceEmphasis,f=l===void 0?"backward":l,g=u===void 0?!1:u,h=d===void 0?0:d,y=_===void 0?!0:_,C=r("useMWXButtonSpinner")("primary",t.primary.disabled);if(n("cr:6106")!=null){var b,v,S,R,L;a[0]!==m?(R=m.icon,v=m.loading,L=m.type,S=babelHelpers.objectWithoutPropertiesLoose(m,e),a[0]=m,a[1]=v,a[2]=S,a[3]=R,a[4]=L):(v=a[1],S=a[2],R=a[3],L=a[4]);var E=L==="destructive"?"fdsOverride_negative":L,k=h===10?8:h,I=i!=null?i:"end",T=v===!0?C:void 0,D=(b=R)==null?void 0:b.component,x;a[5]!==S||a[6]!==T||a[7]!==D||a[8]!==E?(x=babelHelpers.extends({},S,{addOnPrimary:T,icon:D,type:E}),a[5]=S,a[6]=T,a[7]=D,a[8]=E,a[9]=x):x=a[9];var $;if(a[10]!==p||a[11]!==y){var P;$=p!=null?babelHelpers.extends({},p,{icon:(P=p.icon)==null?void 0:P.component,reduceEmphasis:y,type:"secondary"}):null,a[10]=p,a[11]=y,a[12]=$}else $=a[12];var N;return a[13]!==f||a[14]!==g||a[15]!==k||a[16]!==I||a[17]!==x||a[18]!==$?(N=c.jsx(n("cr:6106"),{align:I,direction:f,expanding:g,paddingHorizontal:k,primary:x,secondary:$}),a[13]=f,a[14]=g,a[15]=k,a[16]=I,a[17]=x,a[18]=$,a[19]=N):N=a[19],N}if(n("cr:227")!=null){var M,w,A,F;a[20]!==m?(F=m.icon,w=m.loading,A=babelHelpers.objectWithoutPropertiesLoose(m,s),a[20]=m,a[21]=w,a[22]=A,a[23]=F):(w=a[21],A=a[22],F=a[23]);var O=w===!0?C:void 0,B=(M=F)==null?void 0:M.originalComponent,W;a[24]!==A||a[25]!==O||a[26]!==B?(W=babelHelpers.extends({},A,{addOnStart:O,icon:B}),a[24]=A,a[25]=O,a[26]=B,a[27]=W):W=a[27];var q;if(a[28]!==p){var U;q=p!=null?babelHelpers.extends({},p,{icon:(U=p.icon)==null?void 0:U.originalComponent}):null,a[28]=p,a[29]=q}else q=a[29];var V;return a[30]!==i||a[31]!==f||a[32]!==h||a[33]!==W||a[34]!==q?(V=c.jsx(n("cr:227"),{align:i,direction:f,paddingHorizontal:h,primary:W,secondary:q}),a[30]=i,a[31]=f,a[32]=h,a[33]=W,a[34]=q,a[35]=V):V=a[35],V}return null}l.default=d}),98);
__d("MWXIconArrowLeft",["MWXSvgIcon","SVGIcon","cr:22195","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22195")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconChevronRight",["MWXSvgIcon","SVGIcon","cr:22268","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22268")),r("gkx")("23219"));l.default=e}),98);
__d("MWXImage.react",["cr:1261","cr:2838","cr:6682","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["objectFit","src"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(15),a,i,l;if(r[0]!==t?(a=t.objectFit,l=t.src,i=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]),n("cr:6682")!=null){var s;return r[4]!==a||r[5]!==i||r[6]!==l?(s=u.jsx(n("cr:6682"),babelHelpers.extends({objectFit:a,src:l},i)),r[4]=a,r[5]=i,r[6]=l,r[7]=s):s=r[7],s}if(typeof l=="string"){var c;return r[8]!==a||r[9]!==i||r[10]!==l?(c=n("cr:2838")!=null?u.jsx(n("cr:2838"),babelHelpers.extends({objectFit:a,src:l},i)):null,r[8]=a,r[9]=i,r[10]=l,r[11]=c):c=r[11],c}else{var d;return r[12]!==i||r[13]!==l?(d=n("cr:1261")!=null?u.jsx(n("cr:1261"),babelHelpers.extends({src:l},i)):null,r[12]=i,r[13]=l,r[14]=d):d=r[14],d}}l.default=c}),98);
__d("MWXLink.react",["E2EEMessagingLinkContext.react","cr:6023","cr:820","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","encryptedLink"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(15),a,i,l;r[0]!==t?(i=t.ref,a=t.encryptedLink,l=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]);var s=o("E2EEMessagingLinkContext.react").useE2EEMessagingLink(),c=s.isSecure,d;r[4]!==a||r[5]!==c?(d=c||a===!0?{disableLinkShimAndTracking_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:!0,disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:!0,rel:["noreferrer","noopener","nofollow"]}:{},r[4]=a,r[5]=c,r[6]=d):d=r[6];var m=d;if(n("cr:6023")){var p;return r[7]!==m||r[8]!==i||r[9]!==l?(p=u.jsx(n("cr:6023"),babelHelpers.extends({},l,m,{ref:i})),r[7]=m,r[8]=i,r[9]=l,r[10]=p):p=r[10],p}if(n("cr:820")){var _;return r[11]!==m||r[12]!==i||r[13]!==l?(_=u.jsx(n("cr:820"),babelHelpers.extends({},l,m,{ref:i})),r[11]=m,r[12]=i,r[13]=l,r[14]=_):_=r[14],_}return null}l.default=c}),98);
__d("MWXQPCard.react",["MWXIconStrict.react","MWXImage.react","cr:10403","cr:2832","cr:6676","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["addOnPrimary","addOnSecondary","icon","ref","secondaryReduceEmphasis","xstyle"],s,u,c=u||(u=o("react")),d={fdsRoot:{boxShadow:"xnw9j1v",$$css:!0},fdsRootMargin:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginTop:"x14vqqas",marginInlineEnd:"xbmvrgn",marginBottom:"xod5an3",marginInlineStart:"x1diwwjn",$$css:!0},mdsRootMargin:{marginTop:"xw7yly9",marginInlineEnd:"x1ys307a",marginBottom:"x1yztbdb",marginInlineStart:"xyqm7xq",$$css:!0}};function m(t){var a=o("react-compiler-runtime").c(41),i,l,u,m,p,_,f;a[0]!==t?(i=t.addOnPrimary,l=t.addOnSecondary,u=t.icon,p=t.ref,_=t.secondaryReduceEmphasis,f=t.xstyle,m=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l,a[3]=u,a[4]=m,a[5]=p,a[6]=_,a[7]=f):(i=a[1],l=a[2],u=a[3],m=a[4],p=a[5],_=a[6],f=a[7]);var g;if(u!=null)e:switch(u.type){case"image":{var h;a[8]!==u.props?(h=c.jsx(r("MWXImage.react"),babelHelpers.extends({},u.props)),a[8]=u.props,a[9]=h):h=a[9],g=h;break e}case"icon":{var y;a[10]!==u.props?(y=c.jsx(r("MWXIconStrict.react"),babelHelpers.extends({},u.props)),a[10]=u.props,a[11]=y):y=a[11],g=y;break e}default:}if(n("cr:2832")!=null){var C;a[12]!==f?(C=(s||(s=r("stylex"))).props(d.mdsRootMargin,f),a[12]=f,a[13]=C):C=a[13];var b;if(a[14]!==i){var v;b=i&&{disabled:i.disabled,icon:(v=i.icon)==null?void 0:v.originalComponent,label:i.label,linkProps:i.linkProps,onPress:i.onPress,reduceEmphasis:i.reduceEmphasis,type:i.type},a[14]=i,a[15]=b}else b=a[15];var S;a[16]!==l?(S=l&&{disabled:l.disabled,label:l.label,linkProps:l.linkProps,onPress:l.onPress,reduceEmphasis:l.reduceEmphasis},a[16]=l,a[17]=S):S=a[17];var R;a[18]!==g||a[19]!==m||a[20]!==b||a[21]!==S?(R=c.jsx(n("cr:2832"),babelHelpers.extends({},m,{headlineNumberOfLines:2,icon:g,primaryCallToAction:b,secondaryCallToAction:S})),a[18]=g,a[19]=m,a[20]=b,a[21]=S,a[22]=R):R=a[22];var L;return a[23]!==p||a[24]!==C||a[25]!==R?(L=c.jsx("div",babelHelpers.extends({},C,{ref:p,children:R})),a[23]=p,a[24]=C,a[25]=R,a[26]=L):L=a[26],L}else if(n("cr:10403")!=null&&n("cr:6676")!=null){var E;a[27]!==f?(E=(s||(s=r("stylex"))).props(d.fdsRoot,d.fdsRootMargin,f),a[27]=f,a[28]=E):E=a[28];var k;a[29]!==i||a[30]!==l||a[31]!==_?(k=i&&c.jsx(n("cr:6676"),{align:"justify",expanding:!0,paddingHorizontal:12,primary:i,secondary:l,secondaryReduceEmphasis:_}),a[29]=i,a[30]=l,a[31]=_,a[32]=k):k=a[32];var I;a[33]!==g||a[34]!==m||a[35]!==k?(I=c.jsx(n("cr:10403"),babelHelpers.extends({},m,{addOnPrimary:k,icon:g,level:4,type:"primary"})),a[33]=g,a[34]=m,a[35]=k,a[36]=I):I=a[36];var T;return a[37]!==p||a[38]!==E||a[39]!==I?(T=c.jsx("div",babelHelpers.extends({},E,{ref:p,children:I})),a[37]=p,a[38]=E,a[39]=I,a[40]=T):T=a[40],T}return null}l.default=m}),98);
__d("MWXRow.react",["cr:2667","cr:2922","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["paddingHorizontal","paddingTop","paddingVertical","spacing","spacingHorizontal","spacingVertical"],u,c=u||(u=o("react"));function d(e){return e===10?12:e}function m(e){switch(e){case 10:return 12;case 20:return 16;default:return e}}function p(e){return e===10?12:e}function _(t){var r=o("react-compiler-runtime").c(35),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:2667")!=null){var l,u,_,f,g,h,y;if(r[3]!==a){var C=a;u=C.paddingHorizontal,_=C.paddingTop,f=C.paddingVertical,g=C.spacing,h=C.spacingHorizontal,y=C.spacingVertical,l=babelHelpers.objectWithoutPropertiesLoose(C,s),r[3]=a,r[4]=l,r[5]=u,r[6]=_,r[7]=f,r[8]=g,r[9]=h,r[10]=y}else l=r[4],u=r[5],_=r[6],f=r[7],g=r[8],h=r[9],y=r[10];var b;r[11]!==u?(b=d(u),r[11]=u,r[12]=b):b=r[12];var v;r[13]!==_?(v=m(_),r[13]=_,r[14]=v):v=r[14];var S;r[15]!==f?(S=m(f),r[15]=f,r[16]=S):S=r[16];var R;r[17]!==g?(R=p(g),r[17]=g,r[18]=R):R=r[18];var L;r[19]!==h?(L=p(h),r[19]=h,r[20]=L):L=r[20];var E;r[21]!==y?(E=p(y),r[21]=y,r[22]=E):E=r[22];var k;return r[23]!==l||r[24]!==i||r[25]!==b||r[26]!==v||r[27]!==S||r[28]!==R||r[29]!==L||r[30]!==E?(k=c.jsx(n("cr:2667"),babelHelpers.extends({paddingHorizontal:b,paddingTop:v,paddingVertical:S,ref:i,spacing:R,spacingHorizontal:L,spacingVertical:E},l)),r[23]=l,r[24]=i,r[25]=b,r[26]=v,r[27]=S,r[28]=R,r[29]=L,r[30]=E,r[31]=k):k=r[31],k}if(n("cr:2922")!=null){var I;return r[32]!==a||r[33]!==i?(I=c.jsx(n("cr:2922"),babelHelpers.extends({},a,{ref:i})),r[32]=a,r[33]=i,r[34]=I):I=r[34],I}return null}l.default=_}),98);
__d("MWXRowItem.react",["cr:3083","cr:3084","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(9),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:3083")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:3083"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:3084")!=null){var s;return r[6]!==a||r[7]!==i?(s=u.jsx(n("cr:3084"),babelHelpers.extends({},a,{ref:i})),r[6]=a,r[7]=i,r[8]=s):s=r[8],s}return null}l.default=c}),98);
__d("getMWPAttachmentMessageAnnouncement",["fbt","I64","LSIntEnum","MessagingAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={ANIMATED_IMAGE:function(t){return t==null?s._(/*BTDS*/"One image attached"):s._(/*BTDS*/"One image attached, titled {title of image}",[s._param("title of image",t)])},AUDIO:s._(/*BTDS*/"One audio file attached"),FILE:function(t){return t==null?s._(/*BTDS*/"One file attached"):s._(/*BTDS*/"One file attached, named {name of file}",[s._param("name of file",t)])},IMAGE:function(t,n){return n==null?s._(/*BTDS*/"_j{\"*\":\"{number} images attached\",\"_1\":\"One image attached\"}",[s._plural(t,"number")]):s._(/*BTDS*/"One image attached, titled {title of image}",[s._param("title of image",n)])},STICKER:function(t){return t==null||t===""?s._(/*BTDS*/"One sticker attached"):s._(/*BTDS*/"One sticker attached, titled {title of sticker}",[s._param("title of sticker",t)])},UNKNOWN:s._(/*BTDS*/"One unsupported attachment attached"),VIDEO:s._(/*BTDS*/"One video attached"),XMA:s._(/*BTDS*/"One rich content attachment attached")},d={ANIMATED_IMAGE:function(t){return s._(/*BTDS*/"Sent a GIF.")},AUDIO:s._(/*BTDS*/"Sent a voice message."),FILE:function(t){return s._(/*BTDS*/"Sent a file.")},IMAGE:function(t,n){return s._(/*BTDS*/"_j{\"*\":\"Sent {number} photos.\",\"_1\":\"Sent a photo.\"}",[s._plural(t,"number")])},STICKER:function(t){return s._(/*BTDS*/"Sent a sticker.")},UNKNOWN:s._(/*BTDS*/"Sent an attachment."),VIDEO:s._(/*BTDS*/"Sent a video."),XMA:s._(/*BTDS*/"Sent an attachment.")};function m(t,n){if(n===void 0&&(n=!0),t.length!==0){var a=n?c:d;if(t.length>1)return t.every(p)?a.IMAGE(t.length):void 0;var i=t[0],l=i.accessibilitySummaryText,s=i.attachmentType,u=i.filename,m=i.titleText,_=(e||(e=o("LSIntEnum"))).unwrapIntEnum(s);switch(_){case r("MessagingAttachmentType").STICKER:case 1:case r("MessagingAttachmentType").SELFIE_STICKER:case 10:case r("MessagingAttachmentType").THIRD_PARTY_STICKER:case 15:return a.STICKER(l);case r("MessagingAttachmentType").IMAGE:case 2:case r("MessagingAttachmentType").EPHEMERAL_IMAGE:case 8:return a.IMAGE(1,m);case r("MessagingAttachmentType").ANIMATED_IMAGE:case 3:return a.ANIMATED_IMAGE(m);case r("MessagingAttachmentType").VIDEO:case 4:case r("MessagingAttachmentType").EPHEMERAL_VIDEO:case 9:return a.VIDEO;case r("MessagingAttachmentType").AUDIO:case 5:return a.AUDIO;case r("MessagingAttachmentType").FILE:case 6:return a.FILE(u);case r("MessagingAttachmentType").XMA:case 7:return a.XMA;case r("MessagingAttachmentType").NONE:case 0:case r("MessagingAttachmentType").SOUND_BITE:case 12:case r("MessagingAttachmentType").CATALOG_ITEM:case 13:case r("MessagingAttachmentType").POWER_UP:case 14:return a.UNKNOWN;default:return a.UNKNOWN}}}function p(t){return(u||(u=o("I64"))).equal(t.attachmentType,(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))}l.default=m}),226);
__d("useLabyrinthLogging",["EncryptedBackupsSupportedPlatformUtils","MWEBODSCategory","MWEBODSEntityKey.enum","MWEncryptedBackupsDeviceRegistrationId","ODS","QPLEvent","QPLUserFlow","QuickPerformanceLogger","WebSession","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(){var t=o("react-compiler-runtime").c(7),n=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),a;t[0]!==n?(a=function(a){var t=a.additionalAnnotations,i=a.event,l=a.instanceKey,u=a.odsEntityName,c=a.source,d=l===void 0?0:l;if(!(e||(e=r("QuickPerformanceLogger"))).isMarkerOn(i,d)){u&&(s||(s=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),u,r("MWEBODSEntityKey.enum").START);var m=o("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),p={deviceRegistrationId:m,platform:n,sessionTabId:o("WebSession").getId(),source:c!=null?c:void 0};r("QPLUserFlow").start(i,{annotations:{string:babelHelpers.extends({},t,p)},instanceKey:d})}},t[0]=n,t[1]=a):a=t[1];var i=a,l;t[2]!==n?(l=function(t){var e=t.additionalAnnotations,a=t.event,i=t.marker,l=t.odsEntityName;if(!r("QPLUserFlow").getActiveFlowIDs().includes((u||(u=o("QPLEvent"))).getMarkerId(a))){l&&(s||(s=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),l,r("MWEBODSEntityKey.enum").START);var c={platform:n,sessionTabId:o("WebSession").getId()};r("QPLUserFlow").start(a,{annotations:{string:babelHelpers.extends({},e,c)}})}r("QPLUserFlow").addPoint(a,i)},t[2]=n,t[3]=l):l=t[3];var c=l,d;return t[4]!==c||t[5]!==i?(d={addMarkerAndStartFlowIfNotActive:c,startFlow:i},t[4]=c,t[5]=i,t[6]=d):d=t[6],d}l.useLabyrinthLoggingFlow=m}),98);
__d("useWAInfraDeviceList",["WMIWABridgeApi","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).use,u=null;function c(){return u==null&&(u=r("WMIWABridgeApi").getCurrentUserDeviceList()),u}function d(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c(),e[0]=t):t=e[0],s(t)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("VideoControlsContainerFocusedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("VideoPlayerControlsContainerOverlay.react",["CometErrorBoundary.react","FocusWithinHandler.react","VideoControlsContainerFocusedContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsHiddenContext","VideoPlayerHooks","react","react-compiler-runtime","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useEffect,p=d.useState,_=44,f={backgroundGradient:{backgroundImage:"x11v4dcs",bottom:"x1ey2m1c",position:"x10l6tqk",transitionDuration:"x1d8287x",transitionProperty:"x6o7n8i",transitionTimingFunction:"xl405pv",width:"xh8yej3",zIndex:"x8knxv4",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(18),a=t.children,i=t.height,l=t.initialBottomRowAddOn,s=t.isBackgroundVisible,d=t.isVisible,g=t.xstyle,h=l===void 0?null:l,y=p(0),C=y[0],b=y[1],v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=function(t){b(t.height)},n[0]=v):v=n[0];var S=r("useResizeObserver")(v),R=o("VideoPlayerControlsBottomRowAddOnContext").useVideoPlayerControlsBottomRowAddOn(h),L=(u||(u=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservationActions(),E=L.release,k=L.reserve,I=i!=null?i:_,T,D;n[1]!==I||n[2]!==s||n[3]!==d||n[4]!==E||n[5]!==k?(T=function(){if(d||s){var e=k({location:"bottom",size:I});return function(){E(e)}}},D=[d,s,k,E,I],n[1]=I,n[2]=s,n[3]=d,n[4]=E,n[5]=k,n[6]=T,n[7]=D):(T=n[6],D=n[7]),m(T,D);var x=s===!1||d===!1,$=s===!0||d===!0,P;return n[8]!==R||n[9]!==C||n[10]!==S||n[11]!==a||n[12]!==I||n[13]!==x||n[14]!==$||n[15]!==d||n[16]!==g?(P=c.jsx(r("FocusWithinHandler.react"),{children:function(n,o){return c.jsx(r("VideoControlsContainerFocusedContext").Provider,{value:o,children:c.jsxs("div",babelHelpers.extends({},{0:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h"},4:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np"},2:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h xg01cxk x47corl xlshs6z"},6:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np xg01cxk x47corl xlshs6z"},1:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x1hc1fzr"},5:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x1hc1fzr"},3:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x47corl xlshs6z x1hc1fzr"},7:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x47corl xlshs6z x1hc1fzr"}}[(R==null)<<2|(d===!1)<<1|(d===!0)<<0],{"data-testid":void 0,children:[c.jsx("div",{className:(e||(e=r("stylex")))(f.backgroundGradient,x&&f.hidden,$&&f.visible,g),style:{height:I+C}}),c.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:x,children:R==null?a:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"x6s0dn4 xzt5al7 x78zum5 x1q0g3np",children:a}),c.jsx(r("CometErrorBoundary.react"),{children:c.jsx("div",{ref:S,children:R})})]})})]}))})}}),n[8]=R,n[9]=C,n[10]=S,n[11]=a,n[12]=I,n[13]=x,n[14]=$,n[15]=d,n[16]=g,n[17]=P):P=n[17],P}l.default=g}),98);
__d("VideoPlayerControlsGroups.react",["VideoControlsContainerFocusedContext","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.isVisible,i=e.noPaddingEnd,l=e.noPaddingStart,c=a===void 0?!0:a,d=i===void 0?!1:i,m=l===void 0?!1:l,p=u(r("VideoControlsContainerFocusedContext")),_=c||p,f=u(r("VideoPlayerControlsHiddenContext")),g;t[0]!==_||t[1]!==d||t[2]!==m?(g={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1fmh03i x47corl"},4:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1fmh03i x47corl"},2:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1fmh03i x47corl"},6:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1hc1fzr"},5:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1hc1fzr"},3:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1hc1fzr"},7:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1hc1fzr"}}[!!d<<2|!!m<<1|!!_<<0],t[0]=_,t[1]=d,t[2]=m,t[3]=g):g=t[3];var h=f||!_,y;t[4]!==n||t[5]!==h?(y=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:h,children:n}),t[4]=n,t[5]=h,t[6]=y):y=t[6];var C;return t[7]!==g||t[8]!==y?(C=s.jsx("div",babelHelpers.extends({},g,{children:y})),t[7]=g,t[8]=y,t[9]=C):C=t[9],C}function d(e){var t=o("react-compiler-runtime").c(8),n=e.children,a=e.isVisible,i=a===void 0?!0:a,l=u(r("VideoControlsContainerFocusedContext")),c=i||l,d=u(r("VideoPlayerControlsHiddenContext")),m;t[0]!==c?(m={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1hc1fzr"}}[!!c<<0],t[0]=c,t[1]=m):m=t[1];var p=d||!c,_;t[2]!==n||t[3]!==p?(_=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:p,children:n}),t[2]=n,t[3]=p,t[4]=_):_=t[4];var f;return t[5]!==m||t[6]!==_?(f=s.jsx("div",babelHelpers.extends({},m,{children:_})),t[5]=m,t[6]=_,t[7]=f):f=t[7],f}l.Contracted=c,l.Expanded=d}),98);
__d("VideoPlayerLiveRewindControlContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({cachedLiveRewindTimestamp:null,onLiveRewindControlEvent:function(){}});l.default=u}),98);
__d("VideoPlayerPlaybackControlBase.react",["fbt","ix","FBLogger","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(14),n=e.onPress,a=e.playbackIcon,i=e.showTooltip,l=e.useOutlineIcons,d=i===void 0?!0:i,m,p;e:switch(a){case"pause":{var _;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Pause"),t[0]=_):_=t[0],m=_;var f;t[1]!==l?(f=l===!0?o("fbicon")._(u("497677"),20):o("fbicon")._(u("497675"),20),t[1]=l,t[2]=f):f=t[2],p=f;break e}case"replay":{var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Replay"),t[3]=g):g=t[3],m=g;var h;t[4]!==l?(h=l===!0?o("fbicon")._(u("534222"),20):o("fbicon")._(u("534219"),20),t[4]=l,t[5]=h):h=t[5],p=h;break e}case"play":{var y;t[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Play"),t[6]=y):y=t[6],m=y;var C;t[7]!==l?(C=l===!0?o("fbicon")._(u("484866"),20):o("fbicon")._(u("484863"),20),t[7]=l,t[8]=C):C=t[8],p=C;break e}default:throw r("FBLogger")("comet_video_player").mustfixThrow("The playback icon is unsupported %s",a)}var b=d?m:null,v;return t[9]!==p||t[10]!==m||t[11]!==n||t[12]!==b?(v=c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:m,onPress:n,tooltip:b}),t[9]=p,t[10]=m,t[11]=n,t[12]=b,t[13]=v):v=t[13],v}l.default=d}),226);
__d("VideoPlayerPlaybackControl.react",["CometTrackingNodeProvider.react","VideoHomeTypedLiteLogger","VideoPlayerHooks","VideoPlayerPlaybackControlBase.react","react","react-compiler-runtime","useFeedClickEventHandler","useMinifiedProductAttribution","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(14),n=e.isNPC,a=e.showTooltip,i=e.unmuteOnPlay,l=e.useOutlineIcons,d=n===void 0?!1:n,p=a===void 0?!0:a,_=i===void 0?!1:i,f,g;t[0]!==d?(f=function(){d&&r("VideoHomeTypedLiteLogger").log({event:"npc_control_playback_button_impression"})},g=[d],t[0]=d,t[1]=f,t[2]=g):(f=t[1],g=t[2]),c(f,g);var h=r("useVideoPlayerControllerSubscription")(m),y=h.showPauseButton,C=h.showReplayButton,b=(s||(s=o("VideoPlayerHooks"))).useController(),v=r("useMinifiedProductAttribution")(),S;t[3]!==b||t[4]!==d||t[5]!==v||t[6]!==y||t[7]!==_?(S=function(){d&&r("VideoHomeTypedLiteLogger").log({attribution_id_v2:v,click_point:"npc_control_playback_button",event:"click",event_target:"video"}),y?b.pause("user_initiated"):(_&&b.setMuted(!1,"user_initiated"),b.play("user_initiated"))},t[3]=b,t[4]=d,t[5]=v,t[6]=y,t[7]=_,t[8]=S):S=t[8];var R=r("useFeedClickEventHandler")(S),L=y?"pause":C?"replay":"play",E;return t[9]!==R||t[10]!==L||t[11]!==p||t[12]!==l?(E=u.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:592,children:u.jsx(r("VideoPlayerPlaybackControlBase.react"),{onPress:R,playbackIcon:L,showTooltip:p,useOutlineIcons:l})}),t[9]=R,t[10]=L,t[11]=p,t[12]=l,t[13]=E):E=t[13],E}function m(e,t){var n=e.getCurrentState(),r=n.ended,o=n.paused,a=n.playing,i=n.stalling,l=e.getPlayheadPosition(),s=n.duration,u=!o&&(a||i),c=!a&&r&&l>=s;return t!=null&&t.showPauseButton===u&&t.showReplayButton===c?t:{showPauseButton:u,showReplayButton:c}}l.default=d}),98);
__d("getFormattedTimestamp",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t="",n=e;isNaN(n)?n=0:n<0&&(n*=-1,t="-");var r=Math.floor(n/o("DateConsts").SEC_PER_HOUR),a=Math.floor((n-r*o("DateConsts").SEC_PER_HOUR)/o("DateConsts").SEC_PER_MIN),i=Math.round(n-r*o("DateConsts").SEC_PER_HOUR-a*o("DateConsts").SEC_PER_MIN);i===o("DateConsts").SEC_PER_MIN&&(i=0,a++),a===o("DateConsts").MIN_PER_HOUR&&(a=0,r++);var l=("0"+i).slice(-2);if(r===0)return""+t+a+":"+l;var s=("0"+a).slice(-2);return""+t+r+":"+s+":"+l}l.default=e}),98);
__d("VideoPlayerPlaybackTimerBase.react",["getFormattedTimestamp","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.currentTime,a=e.duration,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x14ctfv x1rg5ohu x1pg5gke xss6m8b x7h9g57 xf6vk7d xpcyujq x9hgts1 x2b8uid x27saw0 x3ajldb"},l={className:"x1s688f x15hfatp"},t[0]=i,t[1]=l):(i=t[0],l=t[1]);var u;t[2]!==n?(u=r("getFormattedTimestamp")(n),t[2]=n,t[3]=u):u=t[3];var c;t[4]!==u?(c=s.jsx("span",babelHelpers.extends({},l,{children:u})),t[4]=u,t[5]=c):c=t[5];var d;t[6]!==a?(d=a!=null&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:" / "}),s.jsx("span",{children:r("getFormattedTimestamp")(a)})]}),t[6]=a,t[7]=d):d=t[7];var m;return t[8]!==c||t[9]!==d?(m=s.jsxs("div",babelHelpers.extends({},i,{children:[c,d]})),t[8]=c,t[9]=d,t[10]=m):m=t[10],m}l.default=u}),98);
__d("useLiveRewindUtils",["VideoPlayerHooks","VideoPlayerLiveRewindControlContext","react","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=10,p=10;function _(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0,a=Math.min(t.getPlayheadPosition()+m,o);a===o?(t.setIsLiveRewindActive(!1),t.seek(o)):t.seek(a),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function f(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0,a=Math.max(t.getPlayheadPosition()-p,o);t.seek(a),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function g(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0;t.seek(o),t.play("user_initiated"),t.setIsLiveRewindActive(!1),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function h(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function y(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function C(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.pause("user_initiated"),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function b(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function v(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(r){var e,o,a=t.getCurrentState().seekableRanges,i=(e=a==null?void 0:a.start(0))!=null?e:0,l=a!=null&&(o=a.end(a.length()-1))!=null?o:0,s=Math.min(i+r,l);t.scrubEnd(s),s===l?t.setIsLiveRewindActive(!1):t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function S(){return r("useVideoPlayerControllerSubscription")(R)}function R(e){var t,n;return(t=(n=e.getCurrentState().seekableRanges)==null?void 0:n.start(0))!=null?t:0}l.useLiveRewindForward=_,l.useLiveRewindBack=f,l.useLiveRewindLive=g,l.useLiveRewindStart=h,l.useLiveRewindPlay=y,l.useLiveRewindPause=C,l.useLiveRewindReplay=b,l.useLiveRewindScrub=v,l.useLiveRewindSeekableStartTime=S}),98);
__d("VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","VideoPlayerPlaybackTimerBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=_,d=function(t,n){return t-n.duration};function m(){var e=o("react-compiler-runtime").c(2),t=o("useLiveRewindUtils").useLiveRewindSeekableStartTime(),n=(s||(s=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200),a=s.useCurrentTimeThrottled(1e3,d),i=s.useIsLiveRewindActive(),l=i?a:n-t,c;return e[0]!==l?(c=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:l,duration:null}),e[0]=l,e[1]=c):c=e[1],c}function p(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useDuration(),n=s.useCurrentTimeThrottled(200),a;return e[0]!==n||e[1]!==t?(a=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:n,duration:t}),e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function _(){var e=o("react-compiler-runtime").c(2),t=(s||(s=o("VideoPlayerHooks"))).useIsLive();if(t){var n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(m,{}),e[0]=n):n=e[0],n}else{var r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=u.jsx(p,{}),e[1]=r):r=e[1],r}}var f=c;l.default=f}),98);
__d("VideoPlayerPointerDrag",["react","react-compiler-runtime","useResizeObserver","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t=c(null),n=c(null),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(r,o){t.current=o.getBoundingClientRect(),n.current=o},e[0]=a):a=e[0];var i=r("useResizeObserver")(a),l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(){return function(){var e=n.current;e?t.current=e.getBoundingClientRect():t.current=null}},e[1]=l):l=e[1];var s=r("useStable")(l),u;return e[2]!==s||e[3]!==i?(u={invalidateRootRect:s,rootRectRef:t,rootSizeRefCallback:i},e[2]=s,e[3]=i,e[4]=u):u=e[4],u}function p(e,t){if(t==null)return null;var n=Math.max(0,Math.min(t.width,e.clientX-t.left)),r=Math.max(0,Math.min(t.height,e.clientY-t.top));return{ratioX:t.width>0?n/t.width:0,ratioY:t.height>0?r/t.height:0}}function _(e,t){var n=e.changedTouches;if(t==null||!n)return null;for(var r=0;r<n.length;++r){var o=n[r];if(o.identifier===t)return{clientX:o.clientX,clientY:o.clientY}}return null}function f(e,t){var n=e;switch(t.type){case"start":n=babelHelpers.extends({},e,{clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":e.lastEffect});break;case"move":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":"move"};break;case"end":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"end"};break;case"cancel":if(e.dragState!=="dragging")break;n={clientX:e.clientX,clientY:e.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"cancel"};break;default:break}return n.dragState!==e.dragState||n.lastEffect!==e.lastEffect||n.clientX!==e.clientX||n.clientY!==e.clientY?n:e}var g={clientX:0,clientY:0,dragState:"idle",lastEffect:null},h=function(){return window.navigator.userAgent.indexOf("MSIE")>=0};function y(e,t,n){var r=g,o=null,a=null,i=function(n){r=f(r,n),e(r)},l=function(n){i({clientX:n.clientX,clientY:n.clientY,type:"move"});var e=t.current.onDragMoveSync;e==null||e(r)},s=function(n){o&&o(),i({clientX:n.clientX,clientY:n.clientY,type:"end"});var e=t.current.onDragEndSync;e==null||e(r)},u=function(){o&&o(),i({type:"cancel"});var e=t.current.onDragCancelSync;e==null||e(r)},c=function(o){var e=_(o,n.current);if(e!=null){i({clientX:e.clientX,clientY:e.clientY,type:"move"});var a=t.current.onDragMoveSync;a==null||a(r)}},d=function(o){var e=_(o,n.current);if(e!=null){a&&a(),i({clientX:e.clientX,clientY:e.clientY,type:"end"});var l=t.current.onDragEndSync;l==null||l(r)}},m=d;return{destroy:function(){o&&o(),a&&a()},onMouseDown:function(n){h()||n.preventDefault(),i({clientX:n.clientX,clientY:n.clientY,type:"start"});var e=t.current.onDragStartSync;e==null||e(r),o||(window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),window.addEventListener("blur",u),window.addEventListener("mouseleave",u),o=function(){o=null,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s),window.removeEventListener("blur",u),window.removeEventListener("mouseleave",u)})},onTouchStart:function(o){o.preventDefault();var e=o.changedTouches[0];e!=null&&(n.current=e.identifier);var l=_(o,n.current);if(l!=null){i({clientX:l.clientX,clientY:l.clientY,type:"start"});var s=t.current.onDragStartSync;s==null||s(r),a||(window.addEventListener("touchmove",c),window.addEventListener("touchend",d),window.addEventListener("touchcancel",m),window.addEventListener("blur",u),a=function(){a=null,window.removeEventListener("touchmove",c),window.removeEventListener("touchend",d),window.removeEventListener("touchcancel",m),window.removeEventListener("blur",u)})}}}}function C(e,t){var n=o("react-compiler-runtime").c(6),r;n[0]!==t.current||n[1]!==e?(r=function(){var n=t.current,r=n.onDragCancel,o=n.onDragEnd,a=n.onDragMove,i=n.onDragStart;switch(e.lastEffect){case"start":{i(e);return}case"move":{a(e);return}case"end":{o(e);return}case"cancel":{r(e);return}}},n[0]=t.current,n[1]=e,n[2]=r):r=n[2];var a;n[3]!==t||n[4]!==e?(a=[e,t],n[3]=t,n[4]=e,n[5]=a):a=n[5],u(r,a)}function b(e,t,n){var a=o("react-compiler-runtime").c(13),i=d(g),l=i[0],s=i[1],c;a[0]!==e||a[1]!==t?(c=function(){return y(s,e,t)},a[0]=e,a[1]=t,a[2]=c):c=a[2];var m=r("useStable")(c),p=m.destroy,_=m.onMouseDown,f=m.onTouchStart,h,C;a[3]!==p?(h=function(){return p},C=[p],a[3]=p,a[4]=h,a[5]=C):(h=a[4],C=a[5]),u(h,C);var b;a[6]!==_||a[7]!==f||a[8]!==(n==null?void 0:n.hasTouchEvents)?(b={onClick:function(t){t.stopPropagation(),t.preventDefault()},onMouseDown:_,onTouchStart:(n==null?void 0:n.hasTouchEvents)===!0?f:void 0},a[6]=_,a[7]=f,a[8]=n==null?void 0:n.hasTouchEvents,a[9]=b):b=a[9];var v;return a[10]!==l||a[11]!==b?(v={dragState:l,rootProps:b},a[10]=l,a[11]=b,a[12]=v):v=a[12],v}function v(e,t){var n=o("react-compiler-runtime").c(7),r=c(e),a=c(null),i,l;n[0]!==e?(i=function(){r.current=e},l=[e],n[0]=e,n[1]=i,n[2]=l):(i=n[1],l=n[2]),u(i,l);var s=b(r,a,t),d=s.dragState,m=s.rootProps;C(d,r);var p=d.dragState==="dragging",_;return n[3]!==d||n[4]!==m||n[5]!==p?(_={dragState:d,isDragging:p,rootProps:m},n[3]=d,n[4]=m,n[5]=p,n[6]=_):_=n[6],_}l.usePointerDragResizeObserver=m,l.computePointerOffsetRatio=p,l.usePointerDrag=v}),98);
__d("VideoPlayerSliderNub.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.isVisible,r;t[0]!==n?(r={0:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya x1s85apg xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm"},1:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm x1lliihq"}}[!!n<<0],t[0]=n,t[1]=r):r=t[1];var a;return t[2]!==r?(a=s.jsx("div",babelHelpers.extends({},r,{"data-testid":void 0})),t[2]=r,t[3]=a):a=t[3],a}l.default=u}),98);
__d("VideoPlayerScrubberBaseContentDefault.react",["CometVisualCompletionAttributes","VideoPlayerSliderNub.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={liveRewindTimePlayed:{backgroundColor:"xh1tjdi",$$css:!0},liveTimePlayed:{backgroundColor:"x1ciooss",$$css:!0},timelineBackground:{backgroundColor:"x1rwy58d",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",boxShadow:"xpdb0fs",height:"xuoj239",textShadow:"xd9u3wd",userSelect:"x87ps6o",$$css:!0},timelineBuffered:{height:"xuoj239",position:"x10l6tqk",$$css:!0},timelineBufferedBackground:{backgroundColor:"x17j41np",$$css:!0},timelinePlayed:{backgroundColor:"x1evw4sf",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"xuoj239",position:"x10l6tqk",userSelect:"x87ps6o",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(26),a=t.bufferedRatio,i=t.isLive,l=t.isLiveRewindActive,s=t.isNubVisible,d=t.playedRatio,m=t.timelineBackgroundXStyle,p=t.timelineBufferedXStyle,_=t.timelinePlayedXStyle,f;n[0]!==m?(f=(e||(e=r("stylex"))).props(c.timelineBackground,m),n[0]=m,n[1]=f):f=n[1];var g=!i&&c.timelineBufferedBackground,h;n[2]!==g||n[3]!==p?(h=(e||(e=r("stylex")))(c.timelineBuffered,g,p),n[2]=g,n[3]=p,n[4]=h):h=n[4];var y=(100*a).toFixed(5)+"%",C;n[5]!==y?(C={width:y},n[5]=y,n[6]=C):C=n[6];var b;n[7]!==h||n[8]!==C?(b=u.jsx("div",babelHelpers.extends({className:h},r("CometVisualCompletionAttributes").IGNORE,{style:C})),n[7]=h,n[8]=C,n[9]=b):b=n[9];var v=i&&!l&&c.liveTimePlayed,S=i&&l&&c.liveRewindTimePlayed,R;n[10]!==v||n[11]!==S||n[12]!==_?(R=(e||(e=r("stylex")))(c.timelinePlayed,v,S,_),n[10]=v,n[11]=S,n[12]=_,n[13]=R):R=n[13];var L=(100*d).toFixed(5)+"%",E;n[14]!==L?(E={width:L},n[14]=L,n[15]=E):E=n[15];var k;n[16]!==s?(k=u.jsx(r("VideoPlayerSliderNub.react"),{isVisible:s}),n[16]=s,n[17]=k):k=n[17];var I;n[18]!==E||n[19]!==k||n[20]!==R?(I=u.jsx("div",babelHelpers.extends({className:R},r("CometVisualCompletionAttributes").IGNORE,{style:E,children:k})),n[18]=E,n[19]=k,n[20]=R,n[21]=I):I=n[21];var T;return n[22]!==f||n[23]!==I||n[24]!==b?(T=u.jsxs("div",babelHelpers.extends({},f,{children:[b,I]})),n[22]=f,n[23]=I,n[24]=b,n[25]=T):T=n[25],T}l.default=d}),98);
__d("useVideoPlayerScrubberState",["VideoPlayerPointerDrag","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){return Math.min(e>0?t/e:0,1)}function m(e){var t=o("react-compiler-runtime").c(41),n=e.bufferEnd,a=e.currentTime,i=e.duration,l=e.onScrubCancel,s=e.onScrubEnd,m=e.onScrubStart,p=e.supportsTouch,_=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),f=_.invalidateRootRect,g=_.rootRectRef,h=_.rootSizeRefCallback,y=c(0),C=y[0],b=y[1],v=c(!1),S=v[0],R=v[1],L=r("usePrevious")(a),E,k;t[0]!==a||t[1]!==L?(E=function(){a!==L&&R(!1)},k=[a,L],t[0]=a,t[1]=L,t[2]=E,t[3]=k):(E=t[2],k=t[3]),u(E,k);var I;t[4]!==l?(I=function(t){l()},t[4]=l,t[5]=I):I=t[5];var T;t[6]!==i||t[7]!==l||t[8]!==s||t[9]!==g?(T=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);if(!e){l();return}b(e.ratioX);var n=e.ratioX*i;s(n)},t[6]=i,t[7]=l,t[8]=s,t[9]=g,t[10]=T):T=t[10];var D;t[11]===Symbol.for("react.memo_cache_sentinel")?(D=function(){R(!0)},t[11]=D):D=t[11];var x;t[12]!==g?(x=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&b(e.ratioX)},t[12]=g,t[13]=x):x=t[13];var $;t[14]!==f||t[15]!==m||t[16]!==g?($=function(t){f();var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&(b(e.ratioX),m())},t[14]=f,t[15]=m,t[16]=g,t[17]=$):$=t[17];var P;t[18]!==I||t[19]!==T||t[20]!==x||t[21]!==$?(P={onDragCancel:I,onDragEnd:T,onDragEndSync:D,onDragMove:x,onDragStart:$},t[18]=I,t[19]=T,t[20]=x,t[21]=$,t[22]=P):P=t[22];var N=p===!0,M;t[23]!==N?(M={hasTouchEvents:N},t[23]=N,t[24]=M):M=t[24];var w=o("VideoPlayerPointerDrag").usePointerDrag(P,M),A=w.isDragging,F=w.rootProps,O;t[25]!==n||t[26]!==i?(O=d(i,n),t[25]=n,t[26]=i,t[27]=O):O=t[27];var B=O,W;t[28]!==a||t[29]!==i?(W=d(i,a),t[28]=a,t[29]=i,t[30]=W):W=t[30];var q=W,U;return t[31]!==B||t[32]!==q||t[33]!==f||t[34]!==A||t[35]!==S||t[36]!==C||t[37]!==F||t[38]!==g||t[39]!==h?(U={bufferedRatio:B,currentPlayedRatio:q,invalidateRootRect:f,isDragging:A,isWaitingForSeek:S,pointerOffsetRatio:C,rootProps:F,rootRectRef:g,rootSizeRefCallback:h},t[31]=B,t[32]=q,t[33]=f,t[34]=A,t[35]=S,t[36]=C,t[37]=F,t[38]=g,t[39]=h,t[40]=U):U=t[40],U}l.default=m}),98);
__d("VideoPlayerScrubberBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerUserInteractionCounter","react","useVideoPlayerScrubberState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p=c.useState;function _(e){var t=e.bufferEnd,n=e.currentTime,a=e.disableKeyCommands,i=e.duration,l=e.hideNub,c=l===void 0?!1:l,_=e.isLive,f=e.isLiveRewindActive,g=e.keyLeftDescription,h=e.keyRightDescription,y=e.onScrubCancel,C=e.onScrubEnd,b=e.onScrubStart,v=e.onUserInteraction,S=e.playFromBeginningImpl,R=e.renderScrubber,L=e.renderTooltip,E=e.skipBackwardImpl,k=e.skipForwardImpl,I=e.skipToEndImpl,T=e.supportsTouch,D=e.timelineBackgroundXStyle,x=e.timelineBufferedXStyle,$=e.timelinePlayedXStyle,P=e.withoutVerticalPadding,N=P===void 0?!1:P,M=p(!1),w=M[0],A=M[1],F=p(0),O=F[0],B=F[1],W=p(null),q=W[0],U=W[1],V=r("useVideoPlayerScrubberState")({bufferEnd:t,currentTime:n,duration:i,onScrubCancel:y,onScrubEnd:C,onScrubStart:b,supportsTouch:T}),H=V.bufferedRatio,G=V.currentPlayedRatio,z=V.invalidateRootRect,j=V.isDragging,K=V.isWaitingForSeek,Q=V.pointerOffsetRatio,X=V.rootProps,Y=V.rootRectRef,J=V.rootSizeRefCallback,Z=d(function(){A(!0)},[]),ee=d(function(){A(!1)},[]),te=d(function(e){if(z(),Y.current!=null){var t=Y.current.left,n=Y.current.width,r=Math.max(0,Math.min(n,e.clientX-t)),o=n>0?r/n:0,a=Number.isFinite(i)&&i>0?i*o:null;B(e.clientX-t),U(a)}},[i,z,Y]),ne=w||j;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_scrubber",ne,v);var re=w||j||K,oe=j||K?Q:_&&!f?1:G,ae=m(function(){return a===!0?[]:[{command:{key:r("CometKeys").RIGHT},description:h,handler:k},{command:{key:r("CometKeys").LEFT},description:g,handler:E},{command:{key:r("CometKeys").HOME},description:s._(/*BTDS*/"Play from beginning"),handler:S},{command:{key:r("CometKeys").END},description:s._(/*BTDS*/"Skip to end"),handler:I}]},[a,h,k,g,E,S,I]),ie={bufferedRatio:H,duration:i,hoveringPositionSec:q,isHovering:w,isLive:_,isLiveRewindActive:f,isNubVisible:!c&&re,playedRatio:oe,timelineBackgroundXStyle:D,timelineBufferedXStyle:x,timelinePlayedXStyle:$};return u.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:ae,children:u.jsxs("div",babelHelpers.extends({},X,{"aria-label":s._(/*BTDS*/"Change Position"),"aria-orientation":"horizontal","aria-valuemax":i,"aria-valuemin":"0","aria-valuenow":n,className:{0:"x1ypdohk x1y1aw1k xyri2b xwib8y2 x1c1uobl x1n2onr6 x87ps6o xh8yej3",1:"x1ypdohk xyri2b x1c1uobl x1n2onr6 x87ps6o xh8yej3 x18d9i69 xexx8yu"}[!!N<<0],"data-testid":void 0,onMouseEnter:Z,onMouseLeave:ee,onMouseMove:te,ref:J,role:"slider",tabIndex:0,children:[R!=null?R(ie):u.jsx(r("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers.extends({},ie)),L!=null&&q!=null&&w&&u.jsx("div",{className:"xfqi8uc x10l6tqk",style:{left:O},children:L(q)})]}))})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),226);
__d("VideoPlayerScrubber.react",["fbt","VideoPlayerHooks","VideoPlayerScrubberBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e.useCallback;function m(){return(u||(u=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200)}function p(e){var t=o("react-compiler-runtime").c(48),n=e.onUserInteraction,a=e.renderScrubber,i=e.renderTooltip,l=m(),d=(u||(u=o("VideoPlayerHooks"))).useDuration(),p=u.useController(),_=u.useBufferEnd(),f=u.useIsLive(),g=u.useIsLiveRewindActive(),h=o("useLiveRewindUtils").useLiveRewindScrub(),y=o("useLiveRewindUtils").useLiveRewindForward(),C=o("useLiveRewindUtils").useLiveRewindBack(),b=o("useLiveRewindUtils").useLiveRewindStart(),v=o("useLiveRewindUtils").useLiveRewindLive(),S=o("useLiveRewindUtils").useLiveRewindSeekableStartTime();f&&(d=d-S,l=l-S);var R;t[0]!==p||t[1]!==d||t[2]!==f||t[3]!==y?(R=function(){if(f)y();else{var e=p.getPlayheadPosition()+5;e>=d?p.seek(d-.01):p.seek(e)}},t[0]=p,t[1]=d,t[2]=f,t[3]=y,t[4]=R):R=t[4];var L=R,E;t[5]!==f?(E=f?s._(/*BTDS*/"Fast forward 10 seconds"):s._(/*BTDS*/"Fast forward 5 seconds"),t[5]=f,t[6]=E):E=t[6];var k=E,I;t[7]!==p||t[8]!==f||t[9]!==C?(I=function(){if(f)C();else{var e=p.getPlayheadPosition()-5;e<0?p.seek(0):p.seek(e)}},t[7]=p,t[8]=f,t[9]=C,t[10]=I):I=t[10];var T=I,D;t[11]!==f?(D=f?s._(/*BTDS*/"Rewind 10 seconds"):s._(/*BTDS*/"Rewind 5 seconds"),t[11]=f,t[12]=D):D=t[12];var x=D,$;t[13]!==p||t[14]!==f||t[15]!==b?($=function(){f?b():p.seek(0)},t[13]=p,t[14]=f,t[15]=b,t[16]=$):$=t[16];var P=$,N;t[17]!==p||t[18]!==d||t[19]!==f||t[20]!==v?(N=function(){f?v():p.seek(d-.01)},t[17]=p,t[18]=d,t[19]=f,t[20]=v,t[21]=N):N=t[21];var M=N,w;t[22]!==p?(w=function(){p.scrubEnd(null)},t[22]=p,t[23]=w):w=t[23];var A=w,F;t[24]!==p?(F=function(){p.scrubBegin()},t[24]=p,t[25]=F):F=t[25];var O=F,B;t[26]!==p||t[27]!==f||t[28]!==h?(B=function(t){f?h(t):p.scrubEnd(t)},t[26]=p,t[27]=f,t[28]=h,t[29]=B):B=t[29];var W=B,q;return t[30]!==_||t[31]!==l||t[32]!==d||t[33]!==f||t[34]!==g||t[35]!==M||t[36]!==x||t[37]!==k||t[38]!==n||t[39]!==P||t[40]!==a||t[41]!==i||t[42]!==A||t[43]!==W||t[44]!==O||t[45]!==T||t[46]!==L?(q=c.jsx(r("VideoPlayerScrubberBase.react"),{bufferEnd:_,currentTime:l,duration:d,isLive:f,isLiveRewindActive:g,keyLeftDescription:x,keyRightDescription:k,onScrubCancel:A,onScrubEnd:W,onScrubStart:O,onUserInteraction:n,playFromBeginningImpl:P,renderScrubber:a,renderTooltip:i,skipBackwardImpl:T,skipForwardImpl:L,skipToEndImpl:M}),t[30]=_,t[31]=l,t[32]=d,t[33]=f,t[34]=g,t[35]=M,t[36]=x,t[37]=k,t[38]=n,t[39]=P,t[40]=a,t[41]=i,t[42]=A,t[43]=W,t[44]=O,t[45]=T,t[46]=L,t[47]=q):q=t[47],q}l.default=p}),226);
__d("VideoPlayerScrubberPreview_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberPreview_video",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_player_scrubber_preview_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberPreview_video",fragmentName:"VideoPlayerScrubberChapterPreview_video",fragmentPropName:"video",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberChapterPreviewRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberPreview_video",fragmentName:"VideoPlayerScrubberDefaultPreview_video",fragmentPropName:"video",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberDefaultPreviewRenderer",abstractKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberPreview.react",["CometRelay","VideoPlayerScrubberChapterPreview.react","VideoPlayerScrubberPreview_video.graphql","VideoPlayerTimeIndicator.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.timestampSec,l=t.video,s=t.videoChapters,c=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberPreview_video.graphql"),l);if(c==null){if(s!=null){var d;return a[0]!==i||a[1]!==s?(d=u.jsx(r("VideoPlayerScrubberChapterPreview.react"),{timestampSec:i,video:null,videoChapters:s}),a[0]=i,a[1]=s,a[2]=d):d=a[2],d}var m;return a[3]!==i?(m=u.jsx(r("VideoPlayerTimeIndicator.react"),{shouldCenterSelf:!0,timestampSec:i}),a[3]=i,a[4]=m):m=a[4],m}var p=c==null?void 0:c.video_player_scrubber_preview_renderer,_;a[5]!==i||a[6]!==c?(_={timestampSec:i,video:c},a[5]=i,a[6]=c,a[7]=_):_=a[7];var f;return a[8]!==p||a[9]!==_?(f=u.jsx(o("CometRelay").MatchContainer,{match:p,props:_}),a[8]=p,a[9]=_,a[10]=f):f=a[10],f}l.default=c}),98);
__d("VideoPlayerScrubberRenderer_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberRenderer_video",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_player_scrubber_base_content_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberRenderer_video",fragmentName:"VideoPlayerScrubberBaseContentSegmented_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberBaseContentSegmentedRenderer",abstractKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberRenderer.react",["CometRelay","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerScrubberBaseContentSegmented.react","VideoPlayerScrubberRenderer_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.scrubberProps,l=t.video,s=t.videoChapters,c=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberRenderer_video.graphql"),l);if((c==null?void 0:c.video_player_scrubber_base_content_renderer)==null){if(s!=null){var d;return a[0]!==i||a[1]!==s?(d=u.jsx(r("VideoPlayerScrubberBaseContentSegmented.react"),babelHelpers.extends({},i,{videoChapters:s})),a[0]=i,a[1]=s,a[2]=d):d=a[2],d}var m;return a[3]!==i?(m=u.jsx(r("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers.extends({},i)),a[3]=i,a[4]=m):m=a[4],m}var p=c==null?void 0:c.video_player_scrubber_base_content_renderer,_;a[5]!==i||a[6]!==s?(_=babelHelpers.extends({},i,{videoChapters:s}),a[5]=i,a[6]=s,a[7]=_):_=a[7];var f;return a[8]!==p||a[9]!==_?(f=u.jsx(o("CometRelay").MatchContainer,{match:p,props:_}),a[8]=p,a[9]=_,a[10]=f):f=a[10],f}l.default=c}),98);
__d("VideoPlayerVolumeControlBase.react",["fbt","ix","FocusWithinHandler.react","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useState,m=.33,p=.66;function _(e){var t=o("react-compiler-runtime").c(18),n=e.audioAvailabilityUI,a=e.isMuted,i=e.onMouseEnter,l=e.onMouseLeave,_=e.onSetMuted,f=e.onUserInteraction,g=e.renderVolumeSlider,h=e.useOutlineIcons,y=e.volume,C=h===void 0?!1:h,b=!a&&y>0,v;t[0]!==n||t[1]!==b||t[2]!==C||t[3]!==y?(n!=null&&n.shouldShowNullIcon?v=C?o("fbicon")._(u("944795"),20):o("fbicon")._(u("944792"),20):b?y<=m?v=C?o("fbicon")._(u("1146252"),20):o("fbicon")._(u("1104387"),20):y<=p?v=C?o("fbicon")._(u("1104392"),20):o("fbicon")._(u("1104390"),20):v=C?o("fbicon")._(u("564393"),20):o("fbicon")._(u("564390"),20):v=C?o("fbicon")._(u("564399"),20):o("fbicon")._(u("564396"),20),t[0]=n,t[1]=b,t[2]=C,t[3]=y,t[4]=v):v=t[4];var S=d(!1),R=S[0],L=S[1],E;t[5]!==a?(E=a?s._(/*BTDS*/"Unmute"):s._(/*BTDS*/"Mute"),t[5]=a,t[6]=E):E=t[6];var k=E,I;return t[7]!==n||t[8]!==v||t[9]!==a||t[10]!==R||t[11]!==k||t[12]!==i||t[13]!==l||t[14]!==_||t[15]!==f||t[16]!==g?(I=c.jsx(r("FocusWithinHandler.react"),{children:function(t,o){return c.jsxs("div",{className:"x1ypdohk x1rg5ohu xhsvlbd xyamay9 x1icxu4v x10b6aqq x25sj25 x1n2onr6",onMouseEnter:i,onMouseLeave:l,children:[n!=null&&n.shouldDisableVolumeControl?null:c.jsx("div",{className:"xk7dvq3 x9f619 x1o0tod x1yrsyyn x1icxu4v x10b6aqq x25sj25 x10l6tqk xh8yej3",children:g({focusVisible:o,onVisibilityChange:L})}),c.jsx(r("VideoPlayerControlIcon.react"),{icon:v,label:k,onPress:function(){n&&n.onVolumeControlPress(),n!=null&&n.shouldDisableVolumeControl||_(!a,"user_initiated"),f&&f({name:"video_mute_button",type:"happened"})},tooltip:n!=null?n.tooltipContent:null,tooltipAlign:"end",tooltipImpl:n!=null?n.tooltipImpl:null,tooltipOffsetY:R?-80:0})]})}}),t[7]=n,t[8]=v,t[9]=a,t[10]=R,t[11]=k,t[12]=i,t[13]=l,t[14]=_,t[15]=f,t[16]=g,t[17]=I):I=t[17],I}l.default=_}),226);
__d("VideoPlayerVolumeSliderBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerPointerDrag","VideoPlayerSliderNub.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useMemo,_=d.useRef,f=d.useState,g={root:{cursor:"x1ypdohk",height:"xng8ra",opacity:"xg01cxk",pointerEvents:"x47corl",position:"x1n2onr6",transitionDuration:"x1d8287x",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x1td3qas",zIndex:"x1ja2u2z",$$css:!0},rootVisible:{opacity:"x1hc1fzr",pointerEvents:"x67bb7w",$$css:!0},sliderForeground:{borderStartStartRadius:"xjwep3j",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"x1pczhz8",bottom:"x1ey2m1c",position:"x10l6tqk",width:"xh8yej3",$$css:!0},sliderForegroundOverlayColorBlue:{backgroundColor:"x1spa7qu",$$css:!0},sliderForegroundOverlayColorWhite:{backgroundColor:"x14hiurz",$$css:!0}};function h(t){var n=o("react-compiler-runtime").c(65),a=t.isHovering,i=t.isMuted,l=t.onChangeVolumeDown,u=t.onChangeVolumeUp,d=t.onSetMuted,p=t.onSetVolume,h=t.onUserInteraction,y=t.onVisibilityChange,C=t.showBackgroundOverlay,b=t.volume,v=C===void 0?!1:C,S=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),R=S.invalidateRootRect,L=S.rootRectRef,E=S.rootSizeRefCallback,k=_(b),I=_(i),T=i?0:b,D=f(T),x=D[0],$=D[1],P;n[0]!==i||n[1]!==d||n[2]!==p||n[3]!==L?(P=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,L.current);if(e){var n=Math.max(0,Math.min(1,1-e.ratioY));$(n),p(n),i&&d(!1,"user_initiated")}},n[0]=i,n[1]=d,n[2]=p,n[3]=L,n[4]=P):P=n[4];var N=P,M;n[5]!==d||n[6]!==p?(M=function(t){$(k.current),p(k.current),d(I.current,"user_initiated")},n[5]=d,n[6]=p,n[7]=M):M=n[7];var w,A;n[8]!==N?(w=function(t){N(t)},A=function(t){N(t)},n[8]=N,n[9]=w,n[10]=A):(w=n[9],A=n[10]);var F;n[11]!==R||n[12]!==i||n[13]!==N||n[14]!==b||n[15]!==T?(F=function(t){R(),k.current=b,I.current=i,$(T),N(t)},n[11]=R,n[12]=i,n[13]=N,n[14]=b,n[15]=T,n[16]=F):F=n[16];var O;n[17]!==M||n[18]!==w||n[19]!==A||n[20]!==F?(O={onDragCancel:M,onDragEnd:w,onDragMove:A,onDragStart:F},n[17]=M,n[18]=w,n[19]=A,n[20]=F,n[21]=O):O=n[21];var B=o("VideoPlayerPointerDrag").usePointerDrag(O),W=B.isDragging,q=B.rootProps,U=W?x:T,V=a||W,H=_(V),G,z;n[22]!==V||n[23]!==y?(G=function(){H.current!==V&&y&&y(V),H.current=V},z=[y,V],n[22]=V,n[23]=y,n[24]=G,n[25]=z):(G=n[24],z=n[25]),m(G,z);var j=V;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_volume_slider",j,h);var K,Q,X;n[26]===Symbol.for("react.memo_cache_sentinel")?(Q={key:r("CometKeys").UP},X=s._(/*BTDS*/"Increase volume"),n[26]=Q,n[27]=X):(Q=n[26],X=n[27]);var Y;n[28]!==u?(Y={command:Q,description:X,handler:function(){u()}},n[28]=u,n[29]=Y):Y=n[29];var J,Z;n[30]===Symbol.for("react.memo_cache_sentinel")?(J={key:r("CometKeys").DOWN},Z=s._(/*BTDS*/"Decrease volume"),n[30]=J,n[31]=Z):(J=n[30],Z=n[31]);var ee;n[32]!==l?(ee={command:J,description:Z,handler:function(){l()}},n[32]=l,n[33]=ee):ee=n[33];var te;n[34]!==Y||n[35]!==ee?(te=[Y,ee],n[34]=Y,n[35]=ee,n[36]=te):te=n[36],K=te;var ne=K,re;n[37]===Symbol.for("react.memo_cache_sentinel")?(re=s._(/*BTDS*/"Change volume"),n[37]=re):re=n[37];var oe=V&&g.rootVisible,ae;n[38]!==oe?(ae=(e||(e=r("stylex")))(g.root,oe),n[38]=oe,n[39]=ae):ae=n[39];var ie;n[40]!==V||n[41]!==v?(ie=V&&v&&c.jsx("div",{className:"x1f4ngb1 x1obq294 x5a5i1n xde0f50 x15x8krk xi2lk0m x1f889gz xaoy8p5 x1iorvi4 xjkvuk6 x135b78x x11lfxj5 x10l6tqk x1v4kod4"}),n[40]=V,n[41]=v,n[42]=ie):ie=n[42];var le;n[43]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x18fn2jl xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c xng8ra xi5uv41 x10l6tqk x1xc55vz"},n[43]=le):le=n[43];var se=v?g.sliderForegroundOverlayColorWhite:g.sliderForegroundOverlayColorBlue,ue;n[44]!==se?(ue=(e||(e=r("stylex")))(g.sliderForeground,se),n[44]=se,n[45]=ue):ue=n[45];var ce=U*100+"%",de;n[46]!==ce?(de={height:ce},n[46]=ce,n[47]=de):de=n[47];var me;n[48]===Symbol.for("react.memo_cache_sentinel")?(me={className:"x1c7jfne x1f4buv5 x1n2onr6"},n[48]=me):me=n[48];var pe;n[49]!==V?(pe=c.jsx("div",babelHelpers.extends({},me,{children:c.jsx(r("VideoPlayerSliderNub.react"),{isVisible:V})})),n[49]=V,n[50]=pe):pe=n[50];var _e;n[51]!==ue||n[52]!==de||n[53]!==pe?(_e=c.jsx("div",babelHelpers.extends({},le,{children:c.jsx("div",{className:ue,style:de,children:pe})})),n[51]=ue,n[52]=de,n[53]=pe,n[54]=_e):_e=n[54];var fe;n[55]!==q||n[56]!==E||n[57]!==ae||n[58]!==ie||n[59]!==_e||n[60]!==b?(fe=c.jsxs("div",babelHelpers.extends({},q,{"aria-label":re,"aria-orientation":"vertical","aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":b,className:ae,ref:E,role:"slider",tabIndex:0,children:[ie,_e]})),n[55]=q,n[56]=E,n[57]=ae,n[58]=ie,n[59]=_e,n[60]=b,n[61]=fe):fe=n[61];var ge;return n[62]!==ne||n[63]!==fe?(ge=c.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:ne,children:fe}),n[62]=ne,n[63]=fe,n[64]=ge):ge=n[64],ge}l.default=h}),226);
__d("VideoPlayerVolumeSlider.react",["VideoPlayerHooks","VideoPlayerVolumeSliderBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(21),n=e.isHovering,a=e.onUserInteraction,i=e.onVisibilityChange,l=e.showBackgroundOverlay,c=l===void 0?!1:l,d=(s||(s=o("VideoPlayerHooks"))).useController(),m=s.useMuted(),p=s.useVolume(),_;t[0]!==d?(_=function(t){d.setVolume(t)},t[0]=d,t[1]=_):_=t[1];var f=_,g;t[2]!==d?(g=function(t,n){d.setMuted(t,n)},t[2]=d,t[3]=g):g=t[3];var h=g,y;t[4]!==d?(y=function(t){var e=d.getCurrentState(),n=Math.max(0,Math.min(1,e.volume+t));d.setVolume(n),n===0?d.setMuted(!0,"user_initiated"):e.muted&&d.setMuted(!1,"user_initiated")},t[4]=d,t[5]=y):y=t[5];var C=y,b;t[6]!==C?(b=function(){C(.05)},t[6]=C,t[7]=b):b=t[7];var v=b,S;t[8]!==C?(S=function(){C(-.05)},t[8]=C,t[9]=S):S=t[9];var R=S,L;return t[10]!==R||t[11]!==v||t[12]!==n||t[13]!==m||t[14]!==a||t[15]!==i||t[16]!==h||t[17]!==f||t[18]!==c||t[19]!==p?(L=u.jsx(r("VideoPlayerVolumeSliderBase.react"),{isHovering:n,isMuted:m,onChangeVolumeDown:R,onChangeVolumeUp:v,onSetMuted:h,onSetVolume:f,onUserInteraction:a,onVisibilityChange:i,showBackgroundOverlay:c,volume:p}),t[10]=R,t[11]=v,t[12]=n,t[13]=m,t[14]=a,t[15]=i,t[16]=h,t[17]=f,t[18]=c,t[19]=p,t[20]=L):L=t[20],L}l.default=d}),98);
__d("VideoPlayerVolumeControl.react",["VideoPlayerHooks","VideoPlayerVolumeControlBase.react","VideoPlayerVolumeSlider.react","cr:1826284","react","react-compiler-runtime","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useState,_=(e=n("cr:1826284"))!=null?e:r("useEmptyFunction");function f(e){var t=o("react-compiler-runtime").c(16),n=e.onUserInteraction,a=e.showBackgroundOverlay,i=e.useOutlineIcons,l=a===void 0?!1:a,s=i===void 0?!1:i,d=p(!1),m=d[0],f=d[1],g=(u||(u=o("VideoPlayerHooks"))).useController(),h=u.useMuted(),y=u.useVolume(),C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){f(!0)},t[0]=C):C=t[0];var b=C,v;t[1]===Symbol.for("react.memo_cache_sentinel")?(v=function(){f(!1)},t[1]=v):v=t[1];var S=v,R;t[2]!==g?(R=function(t,n){g.setMuted(t,n)},t[2]=g,t[3]=R):R=t[3];var L=R,E=!h&&y>0,k=_({canPlayerProduceSound:E,isHovering:m})||null,I;t[4]!==m||t[5]!==n||t[6]!==l?(I=function(t){var e=t.focusVisible,o=t.onVisibilityChange;return c.jsx(r("VideoPlayerVolumeSlider.react"),{isHovering:m||e,onUserInteraction:n,onVisibilityChange:o,showBackgroundOverlay:l})},t[4]=m,t[5]=n,t[6]=l,t[7]=I):I=t[7];var T;return t[8]!==k||t[9]!==h||t[10]!==n||t[11]!==L||t[12]!==I||t[13]!==s||t[14]!==y?(T=c.jsx(r("VideoPlayerVolumeControlBase.react"),{audioAvailabilityUI:k,isMuted:h,onMouseEnter:b,onMouseLeave:S,onSetMuted:L,onUserInteraction:n,renderVolumeSlider:I,useOutlineIcons:s,volume:y}),t[8]=k,t[9]=h,t[10]=n,t[11]=L,t[12]=I,t[13]=s,t[14]=y,t[15]=T):T=t[15],T}l.default=f}),98);
__d("useVideoPlayerVolumeControlAudioAvailabilityUI",["fbt","CometTooltipImpl.react","VideoPlayerControlsHiddenContext","clearTimeout","emptyFunction","react","setTimeout","useAudioAvailabilityAtPlayhead","usePrevious","useStable"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect,p=c.useRef,_=c.useState,f=3e3;function g(e){var t=e.canPlayerProduceSound,n=e.isHovering,o=r("useAudioAvailabilityAtPlayhead")(),a=o.isSilentAtPlayhead,l=o.volumeControlState,c=null;switch(l){case"VOLUME_SILENT":c=s._(/*BTDS*/"Video has no sound");break;case"VOLUME_COPYRIGHT_FULL":c=s._(/*BTDS*/"Muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_SILENCED":c=s._(/*BTDS*/"Partially muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED":break;case"VOLUME_DEFAULT":break;default:}var g=r("usePrevious")(a),h=_(!1),y=h[0],C=h[1],b=p(r("emptyFunction")),v=p(!1),S=_(!1),R=S[0],L=S[1],E=r("useStable")(function(){return function(e){v.current=e,L(e),b.current(e),e||C(!1)}}),k=d(r("VideoPlayerControlsHiddenContext"));m(function(){k||c==null?E(!1):(n||y||a!==g&&a&&t)&&E(!0)},[c,t,k,n,y,a,g,E]),m(function(){if(R){var e=r("setTimeout")(function(){E(!1)},f);return function(){r("clearTimeout")(e)}}},[R,E]);var I=r("useStable")(function(){return function(){C(function(e){return!e})}}),T=r("useStable")(function(){function e(e){var t=_(!1),n=t[0],o=t[1];return m(function(){return b.current=o,function(){b.current=r("emptyFunction")}},[o]),m(function(){e.isVisible||E(!1)},[e.isVisible]),u.jsx(r("CometTooltipImpl.react"),babelHelpers.extends({},e,{isVisible:n}))}return e.displayName=e.name+" [from "+i.id+"]",e}),D=l==="VOLUME_COPYRIGHT_FULL"||l==="VOLUME_SILENT",x=t?a:D;return c==null?null:{onVolumeControlPress:I,shouldDisableVolumeControl:D,shouldShowNullIcon:x,tooltipContent:c,tooltipImpl:T,volumeControlState:l}}l.default=g}),226);/*FB_PKG_DELIM*/
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var o;return o=e.call(this)||this,o.$CrossWindowEventEmitter$p_2=t,o.$CrossWindowEventEmitter$p_1=new(r("CacheStorage"))("localstorage",t+":"),o.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(t,r,a){var i=t.split(":")[1],l;try{l=n("cr:8958").parse(a)}catch(e){l=void 0}if(l&&l.__v){var s;(s=e.prototype.emit).call.apply(s,[o,i].concat(l.__v))}}),o}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.emit=function(n){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.emitRemote.apply(this,[n].concat(o)),(t=e.prototype.emit).call.apply(t,[this,n].concat(o))},o.emitRemote=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.$CrossWindowEventEmitter$p_1.set(t,n)},t})(r("EventEmitter"));l.default=e}),98);
__d("IrisSubscribeCheckerUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){if(typeof window!="undefined"){var e,t=(e=window.location)==null?void 0:e.hostname;if(t==="m.facebook.com"||t==="mobile.facebook.com"||t==="mtouch.facebook.com")return!1}return!0}i.getIrisSubscribeCheckerInitialRunningState=e}),66);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=o("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=e}var t=e.prototype;return t.start=function(){this.$6=!0},t.stop=function(){this.$6=!1,this.$9()},t.onConnectAttempt=function(){},t.onConnectFailure=function(){this.$9()},t.onConnected=function(){var e=this;this.$7++,this.$9(),this.$3=!1,this.$4=!1,this.$5=!1,this.$6&&(this.$2=o("MqttEnv").Env.setTimeout(function(){e.$10()},8e3))},t.onConnectSuccess=function(){},t.onConnectionLost=function(){this.$9()},t.onConnectionDisconnect=function(){},t.onSubscribe=function(t){t==="/t_ms"&&(this.$3=!0)},t.onUnsubscribe=function(t){},t.onPublish=function(t){(t==="/messenger_sync_get_diffs"||t==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))},t.onMessage=function(t){},t.onWSFatal=function(){},t.$9=function(){this.$2&&(o("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)},t.$10=function(){if(this.$4===!1){var e=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(e),this.$8()?this.$1.bumpCounter(e+".withProvider"):this.$1.bumpCounter(e+".withoutProvider"),this.$3===!0?this.$1.bumpCounter(e+".withTopicSubscribe"):this.$1.bumpCounter(e+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe"),this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")},e})();l.default=e}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={totalConnectionStreams:0},this.broadcastChannel=new(r("CrossWindowEventEmitter"))("MqttGlobalStreamCounter"),this.broadcastChannel.addListener("count-updated",function(t){var n=JSON.parse(String(t)),r=!1;e.otherTabs.has(n.key)||(r=!0),n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$1())}),this.tabID=r("uuidv4")()}var t=e.prototype;return t.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()},t.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))}},t.getGlobalState=function(){var e={totalConnectionStreams:this.thisTab.totalConnectionStreams};return this.otherTabs.forEach(function(t){e.totalConnectionStreams+=t.totalConnectionStreams}),e},t.$1=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))},t.isEnabled=function(){return!0},e})(),s=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}},u=function(){return s};l.getInstance=u}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=o("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),o("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var t=e.prototype;return t.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()},t.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")},t.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")},t.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")},t.onConnectionDisconnect=function(){this.$2.streamClosed()},t.onSubscribe=function(t){},t.onUnsubscribe=function(t){},t.onPublish=function(t){this.$1.bumpCounter("ws_publish."+t)},t.onMessage=function(t){this.$1.bumpCounter("message_arrived."+t)},t.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")},t.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()},t.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++},t.onPollResponse=function(t){this.$1.bumpCounter("lp.message_arrived."+t)},t.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()},t.onPollRequestFailed=function(t){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+t),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onPollShutdownAbort=function(){this.$2.streamClosed()},t.onTabClose=function(){this.$2.tabClosed()},e})();l.default=e}),98);
__d("MqttConnectionHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onConnectAttempt=function(){this.$1.forEach(function(e){e.onConnectAttempt==null||e.onConnectAttempt()})},t.onConnectFailure=function(){this.$1.forEach(function(e){e.onConnectFailure==null||e.onConnectFailure()})},t.onConnected=function(){this.$1.forEach(function(e){e.onConnected==null||e.onConnected()})},t.onConnectSuccess=function(){this.$1.forEach(function(e){e.onConnectSuccess==null||e.onConnectSuccess()})},t.onConnectionLost=function(){this.$1.forEach(function(e){e.onConnectionLost==null||e.onConnectionLost()})},t.onConnectionDisconnect=function(){this.$1.forEach(function(e){e.onConnectionDisconnect==null||e.onConnectionDisconnect()})},t.onSubscribe=function(t){this.$1.forEach(function(e){e.onSubscribe==null||e.onSubscribe(t)})},t.onUnsubscribe=function(t){this.$1.forEach(function(e){e.onUnsubscribe==null||e.onUnsubscribe(t)})},t.onPublish=function(t){this.$1.forEach(function(e){e.onPublish==null||e.onPublish(t)})},t.onMessage=function(t){this.$1.forEach(function(e){e.onMessage==null||e.onMessage(t)})},t.onWSFatal=function(){this.$1.forEach(function(e){e.onWSFatal==null||e.onWSFatal()})},e})();i.default=e}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=6e4,u=(function(){function t(e){var t=this;this.$12=function(e,n,r){n===void 0&&(n=null),t.$9.bumpCounter("protocol.debug.disconnect.internal."+e.errorName),t.$9.bumpCounter("protocol.debug.disconnect.internal");var a=t.$5,i=t.$2,l=i.onConnectFailure,s=i.onConnectionLost;t.setConnected(!1),t.$14(),a?o("MqttEnv").Env.scheduleCallback(function(){s(e,n)}):o("MqttEnv").Env.scheduleCallback(function(){l(t.$11,new(o("MqttTypes")).ConnectFailure(e,r!=null?r:-1),n)})},this.$13=function(e){var n=t.$6;if(n==null)return t.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>"),0;if(n.readyState!==n.OPEN)return t.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>"),0;var r=e.encode(),o=r.byteLength;return n.send(r),o},this.$3=e,this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(t,n,r){},onConnection:function(){},onConnectionLost:function(t,n){},onConnectSuccess:function(t){},onMessageArrived:function(t,n,r){},onMessageDelivered:function(t){},userName:""},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=o("MqttEnv").Env.getLoggerInstance(),this.$11=0}var n=t.prototype;return n.connect=function(n){var t=this;if(this.$5)throw r("err")("Invalid state: connect - already connected");this.$2=n,this.setConnected(!1),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$7=o("MqttEnv").Env.setTimeout(function(){t.$9.bumpCounter("protocol.error.connect.timeout"),t.$12(o("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},e*1e3),this.$6=o("MqttEnv").Env.createSocket(this.$3),this.$6.binaryType="arraybuffer",this.$6.onopen=function(){t.setConnected(!0),t.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),t.$11=t.$13(new(o("MqttProtocolCodec")).WireMessage.Connect(t.$1,n)),n.onConnection()},this.$6.onmessage=function(e){var n=e.data;if(!(n instanceof ArrayBuffer)){t.$9.bumpCounter("protocol.error.onmessage.type"),t.$12(o("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{var a=new Uint8Array(n);t.$10!=null&&(a=o("MqttProtocolUtils").concatBuffers(t.$10,a),t.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete t.$10,t.$10=null);var i=o("MqttProtocolCodec").decodeByteMessages(a),l=i.messages;t.$10=i.remaining;for(var s=0;s<l.length;s++)t.handleMessage(l[s])}catch(e){var u=r("getErrorSafe")(e);t.$10=null,t.$9.logError(u,o("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),t.$9.bumpCounter("protocol.error.onmessage.parse"),t.$12(o("MqttTypes").MqttErrors.SOCKET_MESSAGE,u.message)}},this.$6.onerror=function(e){t.$9.bumpCounter("protocol.error.socket"),t.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");var n=typeof e=="object"&&e!=null&&"error"in e&&!("message"in e)?e.error:e;t.$12(o("MqttTypes").MqttErrors.SOCKET_ERROR,r("ErrorSerializer").toReadableMessage(r("getErrorSafe")(n)))},this.$6.onclose=function(e){t.$9.bumpCounter("protocol.socket.close"),e.wasClean||t.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+e.code+" reason: "+e.reason),t.$12(o("MqttTypes").MqttErrors.SOCKET_CLOSE,e.code+" : "+e.reason)},this.$8!=null&&this.$8.cancel(),this.$8=new(o("MqttProtocolUtils")).Pinger(n.getKeepAliveIntervalSeconds,n.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(o("MqttProtocolCodec")).WireMessage.Ping("PINGREQ")),function(e,n){return t.$12(o("MqttTypes").MqttErrors.PING_TIMEOUT,e,n)})},n.$14=function(){var e=this;this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(t){e.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(e){},this.$6.onerror=function(e){},this.$6.onclose=function(t){e.$9.debugTrace("Socket Close After Teardown","code: "+t.code+", reason: "+t.reason)},this.$6.close(),this.$6=null),this.$2.onConnectSuccess=function(e){},this.$2.onConnectFailure=function(e,t){},this.$2.onConnection=function(){},this.$2.onConnectionLost=function(e){},this.$2.onMessageArrived=function(e,t,n){},this.$2.onMessageDelivered=function(e){}},n.disconnect=function(t){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(o("MqttProtocolCodec")).WireMessage.Disconnect),this.$9.bumpCounter("protocol.debug.disconnect"),this.$12(t)},n.isConnected=function(){return this.$5},n.setConnected=function(t){this.$5=t},n.subscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.subscribe.notconnected"),r("err")("Invalid state: subscribe - not connected");this.$9.bumpCounter("protocol.subscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("SUBSCRIBE",t,0,this.$15());this.$13(e)},n.unsubscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.unsubscribe.notconnected"),r("err")("Invalid state: unsubscribe - not connected");this.$9.bumpCounter("protocol.unsubscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("UNSUBSCRIBE",t,0,this.$15());this.$13(e)},n.publish=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithString(n),r)},n.publishBinary=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithBytes(n),r)},n.$16=function(t,n,r){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected"),this.$9.bumpCounter("protocol.publish."+t);var e=this.$15(),a=new(o("MqttProtocolCodec")).WireMessage.Publish(t,n,r,e);return this.$13(a),e},n.$15=function(){return++this.$4===s&&(this.$4=1),this.$4},n.handleMessage=function(t){var e=this;switch(t.messageType){case o("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:if(this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),t instanceof o("MqttProtocolCodec").WireMessage.ConnAck){var n=t;if(n.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode"),this.setConnected(!1),this.$12(o("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+n.returnCode,n.returnCode);return}o("MqttEnv").Env.scheduleCallback(function(){e.$2.onConnectSuccess(e.$11)}),this.$8!=null&&this.$8.reset()}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(t instanceof o("MqttProtocolCodec").WireMessage.Publish){var a=t;o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageArrived(a.topic,a.payloadMessage,a.qos)});var i=a.messageIdentifier;if(this.$9.bumpCounter("protocol.publish.received"),a.qos===1&&i!=null){var l=new(o("MqttProtocolCodec")).WireMessage.PubAckUnsubAck("PUBACK",i);this.$13(l)}}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(t instanceof o("MqttProtocolCodec").WireMessage.PubAckUnsubAck){var s=t,u=s.messageIdentifier;this.$9.bumpCounter("protocol.puback.received"),o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageDelivered(u)})}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case o("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(o("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case o("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case o("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(r("err")("MqttProtocolClient: Received unhandled message type: "+t.messageType),"Received unhandled message type"),this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}},t})();l.default=u}),98);
__d("MqttPublishListener",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});i.MqttPublishEvent=e}),66);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=15,c=1,d=1,m=64,p="publish",_="subscribe",f="unsubscribe",g=function(t){},h=18e4,y=5*1e3,C=15,b=21,v=(function(){function t(){var e=this;this.$38=function(){return e.$20},this.$39=function(){return e.$21},this.$8=!1,this.$10=o("MqttEnv").Env.getLoggerInstance(),this.$11="Disconnected",this.$17=new Set,this.$24=new Map,this.$12=0,this.$13=0,this.$14=0,this.$15=0,this.$16=0,this.$8=!1,this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$9=0,this.$18=0,this.$19=!1,this.$7=null;var t=function(){};this.$1=t,this.$2=t,this.$3=t,this.$25=!1,this.$26=!1,this.$27=new(r("MqttConnectionHookCollection")),this.$4=function(){return[]},this.$20=s,this.$21=u,this.$22=null,this.$23=0}var a=t.prototype;return a.run=function(t){var e=this,n=t.endpoint,r=t.extraConnectMessageProvider,o=t.mqttUserName,a=t.onJSError,i=t.onMessageReceived,l=t.onStateChange,c=t.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=l,this.$3=i,this.$5=n,this.$6=o,this.$8=!0,this.$18=Date.now(),this.$12=0,this.$13=0,this.$2=a||g,c&&c.forEach(function(t){return e.$17.add(t)}),this.$4=r,this.$20=s,this.$21=u,this.$28()},a.shutdown=function(t){this.$29(t),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")},a.subscribe=function(t){return this.$17.add(t),this.ensureConnected(_)&&this.$31(t),!0},a.publish=function(t,n,r,o){return this.$32(t,n,r,o)},a.publishBinary=function(t,n,r,o){return this.$32(t,n,r,o)},a.$32=function(a,i,l,s){var t={reject:function(t){},resolve:function(){}};s!=null&&(t.listener=s);var u=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),c=this.ensureConnected(p);return c?this.$33(a,i,l,t):(s==null||s.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),t.reject(r("err")("Client disconnected"))),u},a.unsubscribe=function(t){return this.$17.delete(t),this.ensureConnected(f)&&this.$34(t),!0},a.addHook=function(t){this.$27.addHook(t)},a.removeHook=function(t){this.$27.removeHook(t)},a.isRunning=function(){return this.$8},a.getSessionId=function(){return this.$9},a.hasFatal=function(){return this.$25},a.hasConnectSuccess=function(){return this.$26},a.canPublish=function(){return this.ensureConnected("canPublish")},a.ensureConnected=function(t){return!(!this.$8||this.$7==null||!this.$7.isConnected())},a.connectionState=function(){return this.$11},a.mqttStateFromConnectionState=function(t){switch(t){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw r("err")("Unknown state "+t)},a.testOnlyGetSubscribedTopics=function(){return this.$17},a.getDisconnectCount=function(){return this.$23},a.$29=function(t){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(t),this.$27.onConnectionDisconnect()),this.$7=null)},a.$36=function(t){if(this.$11==="Connected"&&t==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(t==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted"),this.$19=!0;return}if(t==="Connected"&&this.$18!==0){var e=Date.now()-this.$18;switch(Math.floor(e/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0,this.$19=!1;return}},a.$35=function(t){t!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+t),this.$36(t),this.$11=t,this.$1(t))},a.$28=function(){var e=this;if(this.$8){this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11),this.$35("Connecting");var t=Date.now(),n=this.$10.getBrowserConnectivity();this.$9=o("MqttUtils").generateSessionId();var a=Array.from(this.$17),i=o("MqttUtils").endpointWithSessionId(this.$5,this.$9),l=o("MqttUtils").endpointWithExtraParameter(i,"cid",this.$6.getDeviceId());try{this.$7=new(r("MqttProtocolClient"))(l);var s=this.$37(),u=s.map(function(e){return e.topic}),c=this.$6.gen(this.$9,a,s);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(o,i,l){return e.$40(i,t,e.$18,a,u,n,o,l)},onConnection:function(){return e.$41(s,a)},onConnectionLost:function(n,r){return e.$42(n,r)},onConnectSuccess:function(o){return e.$43(t,e.$18,a,u,n,o)},onMessageArrived:function(n,r,o){return e.$44(n,r,o)},onMessageDelivered:function(n){return e.$45(n)},userName:c}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(e){var d=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,t,this.$18,a,[],n,null,14,"init error - "+d.message),e!=null&&this.$10.logErrorWarn(d,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(o("MqttTypes")).MqttChannelError(!1,"ws_js_error",d),"client_init")}}},a.$37=function(){var e=this.$4(),t=65536;return e.map(function(e){return e.messageId=t--,e})},a.$31=function(t){try{if(this.$7!=null)return this.$7.subscribe(t),this.$10.debugTrace("#doSubscribe","Subscribing to "+t),this.$27.onSubscribe(t),this.$10.bumpCounter("protocol.subscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+t),this.$10.bumpCounter("protocol.subscribe.error")}return!1},a.$34=function(t){try{if(this.$7!=null)return this.$7.unsubscribe(t),this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+t),this.$27.onUnsubscribe(t),this.$10.bumpCounter("protocol.unsubscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+t),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1},a.$33=function(t,n,a,i){if(this.$7!=null)try{var e,l;typeof n=="string"?l=this.$7.publish(t,n,a):l=this.$7.publishBinary(t,n,a),this.$10.bumpCounter("protocol.publish");var s=l!=null?l:"null";return this.$10.debugTrace("#doPublish","publish "+t+" with messageId:"+s+" qos:"+a),this.$27.onPublish(t),(e=i.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT),l!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(l,i)):i.resolve(),!0}catch(e){var u=r("getErrorSafe")(e);return this.$10.logError(u,"Exception publishing"),this.$10.bumpCounter("publish_exception."+t),i.reject(u),this.$10.bumpCounter("protocol.publish.error"),!1}else return!1},a.$48=function(t){var e=this;if(t===void 0&&(t=null),!!this.$8){this.$29(o("MqttTypes").MqttErrors.RECONNECT),this.$30("reconnect"),this.$49(),this.$9=-1,this.$16=0;var n=t;n==null&&(n=c*Math.pow(2,this.$12)),n=Math.max(n,d),n=Math.min(n,m);var r=n*(1e3+o("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+r+" ms"),this.$22=o("MqttEnv").Env.setTimeout(function(){e.$28()},r),this.$12+=1}},a.$49=function(){var e=Date.now()-this.$16,t=this.$16!==0&&e>y,n=this.$12>C;(t||n)&&(this.$12=0),this.$16!==0&&e<=y&&this.$10.bumpCounter("short_lived_session"),n&&this.$10.bumpCounter("connection_attempt_limit")},a.$46=function(t,n,r,o,a,i,l,s,u,c){t?this.$14++:this.$15++;var e=Date.now();this.$10.eventLogConnect({ackReceived:n,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:t,disconnectCount:this.$23,duration:e-r,errorCode:u,errorMessage:c,failTotal:this.$15,hostname:this.$5,messageSizeBytes:s,osConnectivity:l,publishes:i,sessionID:this.$9,subscribedTopics:a,successTotal:this.$14,total_duration:e-o}),t&&(this.$13=0)},a.$40=function(t,n,r,o,a,i,l,s){var e=t.mqttError,u=s!=null?e.errorMessage+" - "+s:e.errorMessage;if(this.$10.debugTrace("connect","Connect failed "+u),this.$10.bumpCounter("protocol.onconnectfailure"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure"),this.$27.onConnectFailure(),this.$46(!1,t.connAck!==-1,n,r,o,a,i,l,e.errorCode,u),t.connAck!=null&&(this.$10.bumpCounter("protocol.connect_failure."+t.connAck),t.connAck===b)){this.$48(h);return}this.$48()},a.$41=function(t,n){var e=this;this.$10.bumpCounter("protocol.onconnection"),this.$10.debugTrace("Connect","Socket established"),this.$27.onConnected(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection"),n.forEach(function(t){e.$27.onSubscribe(t)}),t.forEach(function(t){e.$27.onPublish(t.topic)}),this.$35("TransportConnected")},a.$43=function(t,n,r,o,a,i){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,t,n,r,o,a,i),this.$50(r),this.$16=Date.now()},a.$42=function(t,n){if(this.$10.bumpCounter("protocol.onconnectionlost"),this.$23++,t.errorCode){var e=n!=null?t.errorMessage+" - "+n:t.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:t.errorCode,errorMessage:e,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost"),this.$27.onConnectionLost(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost"),this.$48()},a.$44=function(t,n,o){this.$10.bumpCounter("protocol.onmessagearrived"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived"),this.$10.debugTrace("onMessageArrived","Message received on "+t),this.$27.onMessage(t);try{this.$3(t,n,o)}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Listener threw error"),this.$10.bumpCounter("listener_error."+t)}},a.$45=function(t){var e;this.$10.bumpCounter("protocol.onmessagedelivered");var n=t!=null?t:"null";if(this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+n+"}"),t!=null){var r=this.$24.get(t);if(r==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24.delete(t),(e=r.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.ACKED),r.resolve(),this.$10.bumpCounter("publish.ack_received")}},a.$30=function(t){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+t),this.$24.forEach(function(e,n,a){var i;(i=e.listener)==null||i.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_ACKED),e.reject(r("err")(t))}),this.$24.clear()},a.$50=function(t){var e=this,n=new Set(t);n.forEach(function(t){e.$17.has(t)||e.unsubscribe(t)});var r=new Set(this.$17);r.forEach(function(t){n.has(t)||e.subscribe(t)})},a.$47=function(t,n){try{this.$10.bumpCounter("js_error_in_init"),this.$10.bumpCounter(n+".error"),this.$25=!0;var e=t?t.message:"error";this.$10.debugTrace("onError",n+": "+e),this.$2(t)}catch(e){var o=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(o,"JS error while trying to log previous error")}},a.setRunning_OnlyForTests=function(t){this.$8=t},t})();l.default=v}),98);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","getErrorSafe","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=29125,u=(function(){function t(e){var t=this,n=e.endpoint,a=e.pollingEndpoint,i=e.userFbid,l=e.appId,s=e.initialSubscribedTopics,u=e.capabilities,c=e.clientCapabilities,d=e.chatVisibility,m=d===void 0?!0:d,p=e.guestAuthString,_=p===void 0?null:p,f=e.phpOverride,g=f===void 0?"":f,h=e.clientType,y=h===void 0?"websocket":h,C=e.deviceId,b=C===void 0?r("ChannelClientID").getID():C,v=e.pageId,S=v===void 0?null:v,R=e.assetIds,L=R===void 0?null:R,E=e.appSpecificInfo,k=E===void 0?null:E;if(this.$11=o("MqttEnv").Env.getLoggerInstance(),this.$11.setAppId(l),this.$12=new(r("MqttUserName"))(i,u,c,b,l,m,_,g,y,S,L,k),this.$1=n,this.$2=a,this.$5="Disconnected",this.$7="LPInactive",this.$6="Disconnected",this.$3=[],this.$4=new Set,this.$8=new Map,this.$9=new Map,this.$10=new(r("MqttConnection")),this.$13=null,this.$16=new(r("MqttAnalyticsHook")),this.$15=new Map,this.$14=[],!o("MqttEnv").Env.isUserLoggedInNow()&&!r("isFastRefreshEnabledForCurrentDomain")()&&(_==null||_=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16),this.$10.addHook(new(r("IrisSubscribeChecker"))(function(){return t.$4.size>0})),this.$17(s),this.$18()}var a=t.prototype;return a.$17=function(t){var e=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){if(r("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!o("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only"),this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return e.$20()},mqttUserName:this.$12,onJSError:function(n){e.$21(n)},onMessageReceived:function(n,r,o){e.$22(n,r,o)},onStateChange:function(n){e.$23(n)},subscribedTopics:t}),this.$24()},a.$24=function(){var e=this,t=o("Run").onUnload(function(){e.$25(o("MqttTypes").MqttErrors.BROWSER_CLOSE)})},a.shutdown=function(){this.$25(o("MqttTypes").MqttErrors.APP_DISCONNECT)},a.$25=function(t){this.$10&&this.$10.shutdown(t),this.$13&&this.$13.shutdown(),this.$16.onTabClose()},a.publish=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.publishBinary=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.$26=function(t,n,r){r===void 0&&(r={qos:1,skipBuffer:!1});var e;return r.qos===0?e=this.$27(t,n,r.listener):e=this.$28(t,n,r),o("MqttUtils").promiseDone(e,function(){},function(e){var t;(t=r.listener)==null||t.onEvent(o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)}),e},a.$27=function(t,n,r){return this.$29(t,n,0,r,1,null)},a.$28=function(r,a,i){var t={reject:function(t){},resolve:function(){}},l=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),s=o("MqttEnv").Env.random(),u={ack:t,attempt:0,options:i,payload:a,publishToken:s,startTime:Date.now(),timeoutId:null,topic:r};if(i.skipBuffer)if(this.$10.connectionState()==="Connecting"){var c;this.$14.push(u),(c=i.listener)==null||c.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(u);else{var d;u.timeoutId=this.$31(s),this.$15.set(s,u),(d=i.listener)==null||d.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED),this.$32(u)}return l},a.$30=function(t){t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){t.ack.resolve()},function(e){t.ack.reject(e)})},a.$32=function(t){var e=this;t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){return e.$33(t)},function(e){})},a.$29=function(t,n,a,i,l,s){var e=this,u,c,d=this.getConnectionState(),m=Date.now();return!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof n=="string"?u=this.$13.publish(t,n,a):u=this.$13.publishBinary(t,n,a),c="lp",i!=null&&(u=u.then(function(){return i.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof n=="string"?u=this.$10.publish(t,n,a,i):u=this.$10.publishBinary(t,n,a,i),c="ws",this.$11.bumpCounter("try_publish_ws")),r("promiseDone")(u,function(){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:t})},function(r){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:r!=null?r.toString():null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:t})}),u},a.subscribe=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$8.get(t);return r?r.push(n):(r=[n],this.$8.set(t,r)),function(){var r=e.$8.get(t)||[],o=r.filter(function(e){return e!==n});e.$8.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeBinary=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$9.get(t);return r?r.push(n):(r=[n],this.$9.set(t,r)),function(){var r=e.$9.get(t)||[],o=r.filter(function(e){return e!==n});e.$9.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeChannelEvents=function(t){var e=this;return this.$3.push(t),function(){e.unsubscribeChannelEvents(t)}},a.unsubscribeChannelEvents=function(t){var e=this.$3.indexOf(t);e>-1&&this.$3.splice(e,1)},a.registerExtraConnectPayloadProvider=function(t){var e=this;if(this.$19("MqttChannel","registerExtraConnectPayloadProvider called"),this.$4.add(t),this.$10.isRunning()){var n=t.getPublishMessages();n.forEach(function(t){typeof t.payload=="string"?e.publish(t.topic,t.payload,{qos:t.qos,skipBuffer:!0}):e.publishBinary(t.topic,t.payload,{qos:t.qos,skipBuffer:!0})})}},a.unregisterExtraConnectPayloadProvider=function(t){this.$4.delete(t)},a.unsubscribeAll=function(t){this.$10.unsubscribe(t),this.$8.delete(t),this.$9.delete(t)},a.getConnectionState=function(){return this.$5},a.getLongPollingStatus=function(){return this.$7},a.getEndpoint=function(){return this.$1},a.addHook=function(t){this.$10.addHook(t)},a.removeHook=function(t){this.$10.removeHook(t)},a.testOnlyMessageReceived=function(t,n){this.$22(t,n,-1)},a.$34=function(t){var e=this.$15.get(t);e!=null&&e.timeoutId!=null&&o("MqttEnv").Env.clearTimeout(e.timeoutId),this.$15.delete(t)},a.$31=function(t){var e=this;return o("MqttEnv").Env.setTimeout(function(t){var n=e.$15.get(t);if(n){var o=n.topic;e.$11.bumpCounter("publish_timeout."+o),e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+o+" publishToken: "+t),e.$34(t),n.ack.reject(r("err")("Publish Timed Out"))}},s,t)},a.$33=function(t){var e=t.publishToken,n=this.$15.get(e);n&&(this.$34(e),t.ack.resolve(),this.$11.debugTrace("publish_success","Topic: "+t.topic+" publishToken: "+t.publishToken),this.$11.bumpCounter("publish_success."+t.topic))},a.$22=function(t,n,o){var e=this.$8.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadString.length*2,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!e)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no listeners");else for(var a of e)try{a(n.payloadString)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Listener exception"),this.$11.bumpCounter("listener_error")}var i=this.$9.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadBytes.length,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!i)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no binary listeners");else for(var l of i)try{l(n.payloadBytes)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Binary Listener exception"),this.$11.bumpCounter("listener_error")}},a.$21=function(t){if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){t.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}t.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped"),this.$35(t)},a.$36=function(t){this.$35(t)},a.$35=function(t){for(var e of this.$3)e.onJSError&&e.onJSError(t)},a.$37=function(){var e=this;this.$14.forEach(function(t){e.$30(t),e.$11.bumpCounter("publish_from_temp_buffer."+t.topic)}),this.$14=[],this.$15.forEach(function(t,n,r){e.$32(t),e.$11.bumpCounter("publish_from_buffer."+t.topic)})},a.$23=function(t){t==="Connecting"?(this.$14.forEach(function(e){e.ack.reject(r("err")("Client Reconnecting - "+e.topic))}),this.$14=[]):t==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+t),this.$38(t,this.$7)},a.$39=function(t,n){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+t+", LP Request status = "+n),this.$38(this.$6,t)},a.$38=function(t,n){var e=this.$10.mqttStateFromConnectionState(t);this.$13&&this.$13.canPublish()&&(e="Connected"),this.$6=t,(e!==this.$5||n!=this.$7)&&(this.$5=e,this.$7=n,this.$40(e))},a.$40=function(t){for(var e of this.$3)e.onMQTTStateChanged(t)},a.$20=function(){var e=this,t=[];return this.$4.forEach(function(n){try{var o=n.getPublishMessages();Array.prototype.push.apply(t,o)}catch(t){e.$11.logError(r("getErrorSafe")(t),"ConnectPayload provider exception"),e.$11.bumpCounter("connectPayloadProvider_error")}}),t},a.$18=function(){var e=this;o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&!r("MetaConfig")._("262")&&this.$2&&this.$2!=""&&r("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(t){var n=new t(e.$2,e.$12,e.$10.hasFatal(),e.$10.hasConnectSuccess(),function(t,n,r){return e.$22(t,n,r)},function(){var t=Array.from(e.$8.keys()),n=Array.from(e.$9.keys());return Array.from(new Set(t.concat(n)))},function(){return e.$20()},function(t){e.$36(t)},function(t,n){e.$39(t,n)});n.start(),e.$10.addHook(n),n.addHook(e.$16),e.$13=n,e.$11.debugTrace("MqttChannel","longPollingRunner loaded")})},a.$19=function(t,n){this.$11.debugTrace(t,"Mqtt channel: "+n)},a.setForegroundState=function(t){this.$12&&this.$12.setForegroundState(t)},a.setChatVisibility=function(t){this.$12&&this.$12.setChatVisibility(t)},a.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()},a.setEndpointCapabilities=function(t){this.$12.setEndpointCapabilities(t)},a.getConnection_OnlyForTests=function(){return this.$10},t})();l.default=u}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(t,n,r,o,a,i,l){var e,s="mqtt:";function u(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o){var a=o.getItem(s+t);if(a!=null)return a}return n}function c(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o)if(n==null)o.removeItem(s+t);else var a=(e||(e=r("WebStorage"))).setItemGuarded(o,s+t,n)}l.configRead=u,l.configWrite=c}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744057"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_connect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744058"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744059"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744060"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",e),u=s;l.default=u}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("MetaConfig")._("99"),u="mqtt_client",c=100,d="WEBSOCKET",m=typeof window!="undefined"?window:self,p=null,_={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},f={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"},g=(function(){function t(e){this.$1=o("LogHistory").getInstance(u),this.$2=0,this.$3=Date.now(),this.$4=r("ChannelClientID").getID(),this.$7(),this.$5=o("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=e}t.getInstance=function(n){return p||(p=new t(n)),p};var n=t.prototype;return n.setAppId=function(t){this.$2===0&&(this.$2=t)},n.eventLogConnect=function(t){var e,n,o=t.ackReceived,a=t.attemptNumber,i=t.connectionState,l=t.connectionStatus,s=t.disconnectCount,u=t.duration,c=t.errorMessage,m=t.failTotal,p=t.hostname,g=t.messageSizeBytes,h=t.osConnectivity,y=t.sessionID,C=t.successTotal,b=t.total_duration,v=l?"success":"failed";this.bumpCounter(_.CONNECT+"."+v);var S=C/(C+m),R=h&&this.getBrowserConnectivity(),L={acked:o,attempt_number:a.toString(),client_type:d,connection_state:i,disconnect_count:s.toString(),duration:u.toString(),error:c,event_type:f.CONNECT,extra_data:{connect_success_rate:S.toString(),device_id:this.$4,hostname:p,connectionStatus:l.toString(),exposure:(e=this.$6)!=null?e:""},os_connectivity:R,payload_size:g==null?void 0:g.toString(),session_id:y.toString(),total_duration:b.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientConnectFalcoEvent").log(function(){return L})})},n.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,r=t.hostname,a=t.pullEventName,i=t.sessionID,l=t.status,s={connection_status:l,device_id:this.$4,duration:e,error_message:n,hostname:r,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),session_id:i};this.$9(a,s)},n.eventLogPullFinish=function(t){var e=t.duration,n=t.errorMessage,r=t.publishReceived,a=t.publishSent,i=t.pullEventName,l=t.sessionID,s={device_id:this.$4,duration:e,error_message:n,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),publish_received:r,publish_sent:a,session_id:l};this.$9(i,s)},n.eventLogDisconnect=function(t){var e,n,o=t.disconnectCount,a=t.duration,i=t.errorMessage,l=t.sessionID;this.bumpCounter(_.DISCONNECT);var s={client_type:d,connection_state:"Disconnected",disconnect_count:o.toString(),duration:a.toString(),error:i,event_type:f.DISCONNECT,extra_data:{device_id:this.$4,exposure:(e=this.$6)!=null?e:""},os_connectivity:this.getBrowserConnectivity(),session_id:l.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return s})})},n.eventLogOutgoingPublish=function(t){var e=t.attempt,n=t.connectionState,o=t.disconnectCount,a=t.errorMessage,i=t.firstAttemptStartTime,l=t.payloadSizeBytes,s=t.protocol,u=t.qos,c=t.sessionID,m=t.success,p=t.thisAttemptStartTime,g=t.topic;this.bumpCounter(_.PUBLISH+"."+g);var h=Date.now(),y={acked:u===1?m:null,attempt_number:e.toString(),client_type:d,connection_state:n,disconnect_count:o.toString(),duration:(h-p).toString(),error:a,event_type:f.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:s},os_connectivity:this.getBrowserConnectivity(),payload_size:l.toString(),qos:u.toString(),session_id:c.toString(),topic:g,total_duration:i!=null?(h-i).toString():null};this.$8(function(){r("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return y})})},n.eventLogIncomingPublish=function(t){var e=t.connectionState,n=t.disconnectCount,o=t.payloadSizeBytes,a=t.qos,i=t.sessionID,l=t.topic,s={client_type:d,connection_state:e,disconnect_count:n.toString(),event_type:f.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:o.toString(),qos:a.toString(),session_id:i.toString(),topic:l},u=l=="/webrtc"||l=="/rtc_multi";this.$10(function(){r("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return s})},50,u)},n.logError=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).mustfix(n)}catch(e){}})},n.logErrorWarn=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).warn(n)}catch(e){}})},n.logWarn=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.warn(t,n)}catch(e){}})},n.debugTrace=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.debug(t,n)}catch(e){}})},n.bumpCounter=function(n){var t=this;o("Random").coinflip(c)&&o("MqttEnv").Env.scheduleLoggingCallback(function(){t.$2!==0&&(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",t.$2+"."+n,c),(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",n,c)})},n.$9=function(t,n,a){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){n.event_type=t,n.app_id=e.$2,n.online=e.$11();var o=JSON.stringify(n);e.$1.log(t,o,{weight:a}),t!==_.DISCONNECT&&r("MqttWsClientTypedLoggerLite").log(n)})},n.$10=function(t,n,r){var e;s&&n!==0?e=r||o("Random").coinflip(n):e=!0,e&&o("MqttEnv").Env.scheduleCallback(t)},n.$8=function(t){this.$10(t,0,!1)},n.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1},n.getBrowserConnectivity=function(){return r("NetworkStatus").isOnline()},n.$7=function(){var e=this;if(m.navigator&&m.navigator.onLine!==void 0){var t=function(n){var t=n.online;t||e.bumpCounter("browser_disconnect")};r("NetworkStatus").onChange(t)}},t})();l.default=g}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return r("gkx")("21119");case o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return r("gkx")("21120");case o("MqttEnv").MqttGkNames.mqtt_fast_lp:return!1;case o("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return r("gkx")("21122");case o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return r("gkx")("21123");case o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return r("gkx")("21124");default:return r("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+e),!1}}l.default=e}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("MqttEnv").Env.initialize(r("Random").random,o("CurrentMessengerUser").isLoggedInNow,r("clearTimeout"),r("setTimeoutAcrossTransitions"),function(){return r("MqttLogger").getInstance()},r("MqttEnvGk"),e!=null?e:null,null,null,o("MqttEnvConfigStorage").configRead,o("MqttEnvConfigStorage").configWrite)}var s={genGk:r("MqttEnvGk"),initialize:e};l.default=s}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(t,n,r,o,a,i,l){"use strict";var e;r("MqttEnvInitializer").initialize();var s=new(r("MqttChannel"))({appId:(e=r("MqttConfig")).appID,capabilities:e.capabilities,chatVisibility:!1,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid});l.default=s}),98);
__d("TWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(t){t===void 0&&(t=e.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(t)),this.$2=0}var t=e.prototype;return t.write=function(t){this.$2+t.length>this.$1.byteLength&&this.$3(this.$2+t.length);for(var e=0;e<t.length;e++)this.$1.setUint8(this.$2+e,t[e]);return this.$2+=t.length,t.length},t.writeByte=function(t){return this.$2+1>this.$1.byteLength&&this.$3(this.$2+1),this.$1.setUint8(this.$2,t),this.$2++,1},t.writeFloatBE=function(t){return this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT),this.$1.setFloat32(this.$2,t),this.$2+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT),this.$1.setFloat64(this.$2,t),this.$2+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){var e=new Uint8Array(this.$1.buffer,0,this.$2);return e},t.currentSize=function(){return this.$2},t.getUnderlyingDataView=function(){return this.$1},t.$3=function(t){var e=t*2;if(!Number.isSafeInteger(e))throw new Error("unable to resize");for(var n=new DataView(new ArrayBuffer(e)),r=0;r<this.$2;r++)n.setUint8(r,this.$1.getUint8(r));this.$1=n},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();e.DEFAULT_BYTE_BUFFER_SIZE=16,i.default=e}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(t,n,r,o,a,i,l){var e=function(t){for(var e=new(r("TWriteBuffer"))(t.length),n,o=0;o<t.length;o++)if(n=t.charCodeAt(o),n<128)e.writeByte(n);else if(n<2048)e.writeByte(n>>6|192),e.writeByte(n&63|128);else if((n&64512)==55296){if(o+1>=t.length)throw new Error("UTF-16 string is truncated: ["+n.toString(16)+"]");if((t.charCodeAt(o+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+n.toString(16)+", "+t.charCodeAt(o+1).toString(16)+"]");n=65536+((n&1023)<<10)+(t.charCodeAt(++o)&1023),e.writeByte(n>>18|240),e.writeByte(n>>12&63|128),e.writeByte(n>>6&63|128),e.writeByte(n&63|128)}else e.writeByte(n>>12|224),e.writeByte(n>>6&63|128),e.writeByte(n&63|128);return e.toByteArray()};l.StringToUtf8=e}),98);
__d("TNoOpWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.$1=0}var t=e.prototype;return t.write=function(t){return this.$1+=t.length,t.length},t.writeByte=function(t){return this.$1++,1},t.writeFloatBE=function(t){return this.$1+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$1+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){throw new Error("operation not supported")},t.currentSize=function(){return this.$1},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("TReadBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e,this.$2=0}var t=e.prototype;return t.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")},t.readBytes=function(t){if(t<0)throw new Error("cannot readBytes of negative length: "+t);if(t+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new Uint8Array(this.$1.buffer,this.$3(),t);return this.$2+=t,e},t.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat32(this.$3());return this.$2+=Float32Array.BYTES_PER_ELEMENT,e},t.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat64(this.$3());return this.$2+=Float64Array.BYTES_PER_ELEMENT,e},t.$3=function(){return this.$2+this.$1.byteOffset},t.getCurrentCursor=function(){return this.$2},t.writeByte=function(t){throw new Error("operation not supported")},t.write=function(t){throw new Error("operation not supported")},t.toByteArray=function(){throw new Error("operation not supported")},t.writeFloatBE=function(t){throw new Error("operation not supported")},t.writeDoubleBE=function(t){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("ThriftTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19}),l=e;i.default=l}),66);
__d("Utf8ToString",[],(function(t,n,r,o,a,i){var e=function(t,n){throw new Error(t+": ["+n.map(function(e){return e.toString(16)}).toString()+"]")},l=function(n){e("Invalid UTF-8 sequence",n)},s=function(n,r){e("Not enough bytes for "+n+"-byte sequence",r)},u=function(t){for(var e=0,n=[];e<t.length;){var r=t[e++];if(r<128)n.push(String.fromCharCode(r));else if(r>=128&&r<194)l([r]);else if(r>=194&&r<224){e>=t.length&&s(2,[r]);var o=t[e++];(o&192)!==128&&l([r,o]),n.push(String.fromCharCode((r&31)<<6|o&63))}else if(r>=240&&r<245){e+2>=t.length&&s(4,[r]);var a=t[e++],i=t[e++],u=t[e++];(r==240&&(!(a>=144&&a<192)||(i&192)!==128||(u&192)!==128)||r>=241&&r<244&&((a&192)!==128||(i&192)!==128||(u&192)!==128)||r==244&&(!(a>=128&&a<144)||(i&192)!==128||(u&192)!==128))&&l([r,a,i,u]);var c=((r&7)<<18|(a&63)<<12|(i&63)<<6|u&63)-65536;n.push(String.fromCharCode(55296+(c>>10))),n.push(String.fromCharCode(56320+(c&1023)))}else if(r>=245)l([r]);else{e+1>=t.length&&s(3,[r]);var d=t[e++],m=t[e++];r==224?d>=160&&d<192||l([r,d,m]):r>=225&&r<237?d>=128&&d<192||l([r,d,m]):r==237?d>=128&&d<160||l([r,d,m]):r>=238&&r<240&&(d>=128&&d<192||l([r,d,m])),m>=128&&m<192||l([r,d,m]),n.push(String.fromCharCode((r&15)<<12|(d&63)<<6|m&63))}}return n.join("")};i.Utf8ToString=u}),66);/*FB_PKG_DELIM*/
__d("getPeopleTypeaheadNullStateText",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";function e(){return s._(/*BTDS*/"No people found")}l.default=e}),226);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["FDSText.react","getPeopleTypeaheadNullStateText","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k"},e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("div",babelHelpers.extends({},t,{children:s.jsx(r("FDSText.react"),{align:"center",color:"secondary",type:"body2",children:r("getPeopleTypeaheadNullStateText")()})})),e[1]=n):n=e[1],n}l.default=u}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","useBaseTypeaheadDataSourceFetch"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","context","dataSource","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=c.useState;function g(t){var n=t.ref,a=t.context,i=t.dataSource,l=t.inputElement,s=t.layoutStrategyRenderer,c=t.loggingProvider,g=t.onAriaChange,y=t.onEntriesUpdated,C=t.onHighlightEntry,b=t.onSelectedEntry,v=t.onVisibilityChange,S=t.position,R=S===void 0?"above":S,L=t.queryString,E=t.viewStrategyRenderer,k=babelHelpers.objectWithoutPropertiesLoose(t,e),I=_(null),T=f(null),D=T[0],x=T[1],$=_([]),P=f($.current),N=P[0],M=P[1],w=f(!0),A=w[0],F=w[1],O=_(null),B=_(L);m(function(){B.current=L},[L]);var W=d(function(e){C&&C(e),x(e),I.current=e},[C]),q=r("useBaseTypeaheadDataSourceFetch")({dataSource:i,onResolvePayload:d(function(e){var t,n=e.entries;$.current=n,M(n);var o=r("baseTypeaheadFlattenEntries")(n),a=o[0],i=I==null||(t=I.current)==null?void 0:t.key;a!=null&&!o.map(function(e){return e.key}).includes(i)&&W(a),y&&y(n.length>0)},[W,y])}),U=q[0].isLoading,V=q[1],H=A&&(N.length>0||U);m(function(){return H?c.startSession(B.current):c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current)),v(H),function(){c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current))}},[v,c,H]),m(function(){F(!0),V({query:L})},[V,L,i]),p(n,function(){return{getViewRef:function(){return O},hasSelection:function(){return h(r("baseTypeaheadFlattenEntries")($.current),D)},moveDown:function(){o("cometTypeaheadKeyboardNavigationUtils").moveDown(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},moveUp:function(){o("cometTypeaheadKeyboardNavigationUtils").moveUp(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},select:function(){var e=r("baseTypeaheadFlattenEntries")($.current);b&&D!=null&&h(e,D)&&(c.isSessionActive()&&c.maybeEndSession(L,e,D),b(D))}}},[D,W,b,c,L]);var G=d(function(e){var t=r("baseTypeaheadFlattenEntries")($.current);b&&h(t,e)&&(c.isSessionActive()&&c.maybeEndSession(L,t,e),b(e))},[b,c,L]);return m(function(){if(H===!1)return;function e(e,t){for(var n=e.parentElement;n!=null&&n!==t;)n=n.parentElement;return n===t}var t=function(n){var t=n.target;if(t instanceof HTMLElement){var r=O.current,o=r!==null&&(t===r||e(t,r)),a=l!==null&&(t===l||e(t,l));F(o||a)}};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}},[l,H]),H?u.jsx(s,{ariaProps:{role:"listbox"},context:a,entries:N,highlightedEntry:D,isLoading:U,onAriaChange:g,onBlur:k.onBlur,onHighlightEntry:W,onPressEntry:G,onPressEntryIn:G,position:R,queryString:L,viewRef:O,viewStrategyRenderer:E}):null}g.displayName=g.name+" [from "+i.id+"]";function h(e,t){if(t==null)return!1;var n=t.key;return e.find(function(e){return e.key===n})!=null}l.default=g}),98);
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.anchor;if(n.type!=="text")return null;var r=n.getNode();if(t!=null&&!t()||t==null&&!r.isSimpleText())return null;var o=n.offset;return r.getTextContent().slice(0,o)}function s(t,n){return t.getEditorState().read(function(){var t=o("Lexical").$getSelection();return o("Lexical").$isRangeSelection(t)?e(t,n):null})}l.default=s}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=c(!1);u(function(){if(!n.current){var r=e.getRootElement()===document.activeElement;if(r){t(),n.current=!0;return}var a=e.registerCommand(o("Lexical").FOCUS_COMMAND,function(){return t(),n.current=!0,a(),!1},o("Lexical").COMMAND_PRIORITY_LOW);return a}},[t,e,n])}l.default=d}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("445"),s=o("FalcoLoggerInternal").create("mentions_session_end_without_click",e),u=s;l.default=u}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("446"),s=o("FalcoLoggerInternal").create("mentions_session_start",e),u=s;l.default=u}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("447"),s=o("FalcoLoggerInternal").create("mentions_suggestion_clicked",e),u=s;l.default=u}),98);
__d("WithTagSuggestionContinueClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3701"),s=o("FalcoLoggerInternal").create("with_tag_suggestion_continue_clicked",e),u=s;l.default=u}),98);
__d("CometMentionsLoggingProvider",["FBLogger","MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","WithTagSuggestionContinueClickedFalcoEvent","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=!1,this.$3=null,this.$1=e}var t=e.prototype;return t.getSessionID=function(){return this.$3==null&&r("FBLogger")("search").mustfix("Mentions logging sessionID does not exist."),this.$3},t.isSessionActive=function(){return this.$2},t.startSession=function(t){var e=this;if(t!=null){var n=r("guid")();this.$3=n,this.$2=!0,r("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers.extends({},e.$1,{session_id:n,typed_query:t})})}},t.maybeEndSession=function(t,n,o,a){if(t!=null){var e=n!=null?JSON.stringify(n.map(function(e){return{id:e.key}})):null,i=babelHelpers.extends({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:t});if(o!=null){var l,s=o.key,u=(l=n==null?void 0:n.findIndex(function(e){return e.key===s}))!=null?l:null,c=isNaN(parseInt(o.key,10))?"0":o.key;if(a===!0){r("WithTagSuggestionContinueClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})});return}else r("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})})}else r("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return i});this.$3=null,this.$2=!1}},e})();l.default=e}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function c(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?u:e,a,i;return t[0]!==n?(i=new(r("CometMentionsLoggingProvider"))(n),t[0]=n,t[1]=i):i=t[1],a=i,a}l.default=c}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.startTransition,c=s.useEffect,d=s.useState;function m(e,t){var n=window.getSelection();if(n===null||!n.isCollapsed||e===null)return!1;var r=n.anchorNode,o=e.leadOffset,a=n.anchorOffset;try{t.setStart(r,o),t.setEnd(r,a)}catch(e){return!1}return!0}function p(e,t,n){var o=d(null),a=o[0],i=o[1];return c(function(){var o=document.createRange(),a=null,l=null,s=null,c=function(){var c=o,d=r("getCometComposerMentionsSearchForLexical")(e,n);if(!(d===a||c===null)){a=d;var p=t(d),_=p.dataSource,f=p.searchResult;if(!(_===l&&f===s)){var g=m(f,c);l=_,s=f,u(!g||_===null||f===null?function(){return i(null)}:function(){i({dataSource:_,range:c,searchResult:f})})}}},d=e.registerUpdateListener(c);return c(),function(){o=null,d()}},[n,t,e]),a}l.default=p}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","react","react-compiler-runtime","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_=u.useState;function f(e){var t=e.$isValidSelection,n=e.createNodeStrategy,a=e.dataSourceResolverConfig,i=a.bootstrap,l=a.resolver,u=e.editor,m=e.layoutStrategyRenderer,_=e.mentionsHandlerForSelectedEntry,f=e.mentionsLoggerContext,h=e.onMentionsEntrySelected,b=e.position,v=b===void 0?"below":b,S=e.viewStrategyRenderer,R=r("useCometMentionsResolutionForLexical")(u,l,t),L=p(!1),E=g(u),k=E[0],I=E[1],T=p(null),D=C(u);r("useCometMentionsBootstrapForLexical")(u,i),d(function(){return u.registerCommand(o("Lexical").BLUR_COMMAND,function(){return D(),!1},o("Lexical").COMMAND_PRIORITY_LOW)},[u,D]);var x=c(function(){D()},[D]);d(function(){var e,t=[{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:(e=o("Lexical")).KEY_ENTER_COMMAND},{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:e.KEY_TAB_COMMAND},{handler:function(t){return t.moveUp(),!0},type:e.KEY_ARROW_UP_COMMAND},{handler:function(t){return t.moveDown(),!0},type:e.KEY_ARROW_DOWN_COMMAND},{handler:function(){return D(),I(),!0},type:e.KEY_ESCAPE_COMMAND}];return o("LexicalUtils").mergeRegister.apply(void 0,t.map(function(e){var t=e.handler,n=e.type;return u.registerCommand(n,function(e){var n=T.current,r=L.current;if(n===null||!r||k)return!1;if(t(n)){var o=e;return o.preventDefault(),o.stopPropagation(),!0}return!1},o("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[I,u,D,k]);var $=c(function(e){L.current=e},[]),P=c(function(e){e||D()},[D]),N=c(function(e){var o=r("getCometComposerMentionsSearchForLexical")(u,t);if(o==null){r("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var a=l(o),i=a.searchResult;if(i==null){r("FBLogger")("CometComposer").mustfix("onPressEntry was called and no search result was found for the query %s",o);return}D();var s=_==null?void 0:_(e);s!=null&&!s.shouldMentionSelectedEntry||(y(u,n,e,i,t),h==null||h(e),I())},[u,t,l,D,_,n,h,I]),M=r("useCometMentionsLoggingProvider")(f);return R===null||k?(D(),L.current=!1,null):s.jsx(r("CometMentions.react"),{context:R.range,dataSource:R.dataSource,inputElement:u.getRootElement(),layoutStrategyRenderer:m,loggingProvider:M,onAriaChange:D,onBlur:x,onEntriesUpdated:P,onFocus:r("emptyFunction"),onSelectedEntry:N,onVisibilityChange:$,position:v,queryString:R.searchResult.matchingString,ref:T,viewStrategyRenderer:S})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=o("react-compiler-runtime").c(7),n=_(!1),r=n[0],a=n[1],i,l;t[0]!==e||t[1]!==r?(i=function(){if(r){var t=e.getEditorState().read(o("LexicalText").$rootTextContent);return e.registerTextContentListener(function(e){t!==null&&e!==t&&a(!1),t=e})}},l=[e,r],t[0]=e,t[1]=r,t[2]=i,t[3]=l):(i=t[2],l=t[3]),d(i,l);var s,u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=function(){return a(!0)},t[4]=u):u=t[4];var c;return t[5]!==r?(c=[r,u],t[5]=r,t[6]=c):c=t[6],s=c,s}function h(e,t,n){for(var r=n,o=r;o<=t.length;o++)e.substr(-o)===t.substr(0,o)&&(r=o);return r}function y(e,t,n,r,a){e.update(function(){var e=o("Lexical").$getSelection();if(!(!o("Lexical").$isRangeSelection(e)||!e.isCollapsed())){var i=e.anchor;if(i.type==="text"){var l=i.getNode();if(!(a!=null&&!a()||a==null&&!l.isSimpleText())){var s=i.offset,u=l.getTextContent().slice(0,s),c=n.label,d=r.replaceableString.length,m=h(u,c,d),p=s-m;p<0||t({anchorNode:l,endOffset:s,selectedEntry:n,startOffset:p})}}}})}function C(e){var t=o("react-compiler-runtime").c(2),n=p(void 0),r=p(void 0),a;return t[0]!==e?(a=function(a,i){var t=n.current,l=r.current;(t!==a||l!==i)&&(n.current=a,r.current=i,e.dispatchCommand(o("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:a,controlsID:i}))},t[0]=e,t[1]=a):a=t[1],a}l.default=f}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","react-compiler-runtime","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(9),n=e.entries,a=e.highlightedEntry,i=e.onAriaChange,l;t[0]!==n?(l=r("baseTypeaheadFlattenEntries")(n),t[0]=n,t[1]=l):l=t[1];var u;t[2]!==a||t[3]!==l?(u={activeEntries:l,helperText:"",highlightedEntry:a,inputLabel:"",isOpened:!0,viewRole:"listbox"},t[2]=a,t[3]=l,t[4]=u):u=t[4];var c=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(u),d=c.ariaInputProps,m=c.ariaViewProps,p,_;return t[5]!==d||t[6]!==i?(p=function(){return i(d["aria-activedescendant"],d["aria-controls"])},_=[d,i],t[5]=d,t[6]=i,t[7]=p,t[8]=_):(p=t[7],_=t[8]),s(p,_),m}l.default=u}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","react-compiler-runtime","useBaseMentionsLayoutStrategyARIAProps.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading","isLoadingIndicatorEnabled","onAriaChange","viewStrategyRenderer"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(21),a,i,l,s,c;n[0]!==t?(i=t.isLoading,c=t.isLoadingIndicatorEnabled,l=t.onAriaChange,a=t.viewStrategyRenderer,s=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5]);var d=c===void 0?!1:c,m;n[6]!==l||n[7]!==s.entries||n[8]!==s.highlightedEntry?(m={entries:s.entries,highlightedEntry:s.highlightedEntry,onAriaChange:l},n[6]=l,n[7]=s.entries,n[8]=s.highlightedEntry,n[9]=m):m=n[9];var p=r("useBaseMentionsLayoutStrategyARIAProps.react")(m),_=d?i:!1,f;n[10]!==a||n[11]!==p||n[12]!==s||n[13]!==_?(f=u.jsx(a,babelHelpers.extends({},s,{ariaProps:p,isLoading:_})),n[10]=a,n[11]=p,n[12]=s,n[13]=_,n[14]=f):f=n[14];var g;n[15]!==i||n[16]!==s.entries?(g=!i&&s.entries.length===0?u.jsx(r("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null,n[15]=i,n[16]=s.entries,n[17]=g):g=n[17];var h;return n[18]!==f||n[19]!==g?(h=u.jsxs("div",{children:[f,g]}),n[18]=f,n[19]=g,n[20]=h):h=n[20],h}l.default=c}),98);
__d("CometMentionsLayoutStrategy.react",["fbt","CometContextualLayer.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","FDSPopover.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["ariaProps","context","entries","onBlur","position","viewRef"],u,c=u||(u=o("react"));function d(t){var n=o("react-compiler-runtime").c(21),a,i,l,u,d,m,p;if(n[0]!==t?(a=t.ariaProps,i=t.context,l=t.entries,u=t.onBlur,d=t.position,p=t.viewRef,m=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=m,n[7]=p):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],m=n[6],p=n[7]),l.length===0)return null;var _;n[8]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Mentions suggestions"),n[8]=_):_=n[8];var f;n[9]!==a||n[10]!==l||n[11]!==m?(f=c.jsx(r("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),babelHelpers.extends({ariaProps:a,entries:l,isLoading:!1},m)),n[9]=a,n[10]=l,n[11]=m,n[12]=f):f=n[12];var g;n[13]!==u||n[14]!==f||n[15]!==p?(g=c.jsx(r("FDSPopover.react"),{"aria-label":_,onBlur:u,ref:p,role:"listbox",children:f}),n[13]=u,n[14]=f,n[15]=p,n[16]=g):g=n[16];var h;return n[17]!==i||n[18]!==d||n[19]!==g?(h=c.jsx(r("CometContextualLayer.react"),{align:"start",context_DEPRECATED:i,position:d,children:g}),n[17]=i,n[18]=d,n[19]=g,n[20]=h):h=n[20],h}l.default=d}),226);
__d("CometMentionsViewListStrategy.react",["CometCompositeStructureContext","FDSText.react","getItemRoleFromCompositeRole","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"],s,u=s||(s=o("react")),c=s.useMemo;function d(t){var n,a=o("react-compiler-runtime").c(30),i,l,s,c,d;if(a[0]!==t){var m=t.ariaProps,p=t.entries,_=t.extraViewProps,f=t.highlightedEntry,g=t.isLoading,h=t.onAbandonTypeahead_DO_NOT_USE,y=t.viewItemStrategyRenderer,C=babelHelpers.objectWithoutPropertiesLoose(t,e);l=m,s=p,c=f,i=y,d=C,a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=c,a[5]=d}else i=a[1],l=a[2],s=a[3],c=a[4],d=a[5];var b=l.role,v;if(b!=null){var S;a[6]!==b?(S={role:b},a[6]=b,a[7]=S):S=a[7],v=S}else{var R;a[8]===Symbol.for("react.memo_cache_sentinel")?(R={},a[8]=R):R=a[8],v=R}var L=v,E;a[9]!==b?(E=r("getItemRoleFromCompositeRole")(b),a[9]=b,a[10]=E):E=a[10];var k=E,I;a[11]===Symbol.for("react.memo_cache_sentinel")?(I="x78zum5 xdt5ytf x1iyjqo2",a[11]=I):I=a[11];var T;if(a[12]!==i||a[13]!==s||a[14]!==((n=c)==null?void 0:n.key)||a[15]!==k||a[16]!==d){var D,x,$;if(a[18]!==i||a[19]!==s.length||a[20]!==((D=c)==null?void 0:D.key)||a[21]!==k||a[22]!==d){var P;$=function(t,n){if(t.type==="section"){var e=t.entries,o=t.key,a=t.label;return e.length===0?null:u.jsxs("li",{"aria-selected":"false",role:"option",children:[u.jsx("div",{className:"x889kno x2vl965 x1a8lsjc xe2zdcy",children:u.jsx("label",{htmlFor:o,children:u.jsx(r("FDSText.react"),{color:"primary",type:"entityHeaderMeta2",children:a})})}),u.jsx("ul",{id:o,role:"listbox",children:e.map(function(e){var t;return u.createElement(i,babelHelpers.extends({},d,{entry:e,isActive:e.key===((t=c)==null?void 0:t.key),key:e.key,role:k}))})})]},"section-"+o)}else{var l;return u.createElement(i,babelHelpers.extends({},d,{entry:t,isActive:t.key===((l=c)==null?void 0:l.key),isFirstItem:n===0,isLastItem:n===s.length-1,key:t.key,role:k}))}},a[18]=i,a[19]=s.length,a[20]=(P=c)==null?void 0:P.key,a[21]=k,a[22]=d,a[23]=$}else $=a[23];T=s.map($),a[12]=i,a[13]=s,a[14]=(x=c)==null?void 0:x.key,a[15]=k,a[16]=d,a[17]=T}else T=a[17];var N;a[24]!==L||a[25]!==T?(N=u.jsx(r("CometCompositeStructureContext").Provider,{value:L,children:T}),a[24]=L,a[25]=T,a[26]=N):N=a[26];var M;return a[27]!==l||a[28]!==N?(M=u.jsx("ul",babelHelpers.extends({},l,{className:I,"data-testid":void 0,children:N})),a[27]=l,a[28]=N,a[29]=M):M=a[29],M}l.default=d}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPressEntryIn","queryString"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;if(n[0]!==t){var l=t.onPressEntryIn,s=t.queryString,c=babelHelpers.objectWithoutPropertiesLoose(t,e);a=c,i=function(t,n){n.preventDefault(),l&&l(t,n)},n[0]=t,n[1]=a,n[2]=i}else a=n[1],i=n[2];var d=i,m;return n[3]!==d||n[4]!==a?(m=u.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},a,{onPressEntryIn:d})),n[3]=d,n[4]=a,n[5]=m):m=n[5],m}l.default=c}),98);
__d("DocumentMentionsRegex",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s={PUNCTUATION:e,NAME:l},u=s;i.default=u}),66);
__d("FDSShopsFilled20Icon",["cr:15667"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:15667")}),98);
__d("FDSShopsFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1664042"),20),u=e;l.default=u}),98);
__d("FeedComposerCometMentionsMentionTypeResetViewItem.react",["CometListCellStrict_DEPRECATED.react","CometSearchMentionsBaseViewItem.react","FDSChevronLeftFilled16Icon","FDSText.react","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={addOnIconVertical:{marginBottom:"xat24cr",marginTop:"xdj266r",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(7);r("vulture")("gGHDieg7mm2jsTrKIdPDlmejPMo=");var n=e.entry,a=n.label,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={icon:r("FDSChevronLeftFilled16Icon"),type:"icon"},t[0]=i):i=t[0];var l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x15huedd"},t[1]=l):l=t[1];var c;t[2]!==a?(c=s.jsx(r("CometListCellStrict_DEPRECATED.react"),{addOnStart:i,addOnStartOverrideVerticalStyle:u.addOnIconVertical,addOnStartVerticalAlign:"center",contentHorizontalPadding:0,headline:s.jsx("div",babelHelpers.extends({},l,{children:s.jsx(r("FDSText.react"),{type:"headlineEmphasized4",children:a})})),level:4,paddingHorizontal:0}),t[2]=a,t[3]=c):c=t[3];var d;return t[4]!==e||t[5]!==c?(d=s.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},e,{children:c})),t[4]=e,t[5]=c,t[6]=d):d=t[6],d}l.default=c}),98);
__d("FeedComposerCometMentionsMentionTypeSelectionViewItem.react",["CometListCellStrict_DEPRECATED.react","CometSearchMentionsBaseViewItem.react","FBLogger","FDSChevronRightFilled16Icon","FDSShopsFilled20Icon","FDSText.react","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={addOnIcon:{marginBottom:"xat24cr",marginTop:"xdj266r",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(12);r("vulture")("Q1EDZhyn9frZO2tJJtSWGW-ofiM=");var n=e.entry,a=n.label,i=n.rawData,l=i.type==="MENTION_TYPE_SELECTION"?i.iconName:null;if(l==null)return r("FBLogger")("comet_composer").mustfix("No icon name found for mention type selection entry"),null;var c=null;e:switch(l){case"shops":{c=r("FDSShopsFilled20Icon");break e}default:}var d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={color:"secondary",icon:r("FDSChevronRightFilled16Icon"),type:"icon"},t[0]=d):d=t[0];var m;t[1]!==c?(m=c!=null?{icon:c,size:40,type:"contained-icon"}:null,t[1]=c,t[2]=m):m=t[2];var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p={className:"xcqhk00"},t[3]=p):p=t[3];var _;t[4]!==a?(_=s.jsx("div",babelHelpers.extends({},p,{children:s.jsx(r("FDSText.react"),{type:"headlineEmphasized4",children:a})})),t[4]=a,t[5]=_):_=t[5];var f;t[6]!==m||t[7]!==_?(f=s.jsx(r("CometListCellStrict_DEPRECATED.react"),{addOnEnd:d,addOnEndVerticalAlign:"center",addOnStart:m,addOnStartOverrideVerticalStyle:u.addOnIcon,addOnStartVerticalAlign:"center",contentHorizontalPadding:0,headline:_,level:4,paddingHorizontal:0}),t[6]=m,t[7]=_,t[8]=f):f=t[8];var g;return t[9]!==e||t[10]!==f?(g=s.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},e,{children:f})),t[9]=e,t[10]=f,t[11]=g):g=t[11],g}l.default=c}),98);
__d("FeedComposerCometMentionsViewItem.react",["fbt","ix","CometProfileVerificationBadge.react","CometSearchMentionsBaseViewItem.react","FBLogger","FDSIcon.react","FDSProfilePhoto.react","FDSText.react","fbicon","gkx","react","react-compiler-runtime","requireDeferred","stylex"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["entry"],c,d,m=d||(d=o("react")),p=d.useCallback,_=r("requireDeferred")("cometPushToast").__setRef("FeedComposerCometMentionsViewItem.react"),f={invitedName:{alignItems:"x6s0dn4",maxWidth:"x11t6kkg",$$css:!0},invitedVerifiedName:{alignItems:"x6s0dn4",maxWidth:"xw5ewwj",$$css:!0},name:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(55),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=r("gkx")("608"),d;n[3]!==a.rawData?(d=function(){var e,t,n,r=((e=a)==null||(e=e.rawData)==null?void 0:e.isEligible)==null||((t=a)==null||(t=t.rawData)==null?void 0:t.isEligible)===!0;if(!(!l||r)){var o=((n=a)==null||(n=n.rawData)==null?void 0:n.ineligibleReason)!=null?s._(/*BTDS*/"{ineligible reason}",[s._param("ineligible reason",String(a.rawData.ineligibleReason))]):s._(/*BTDS*/"This person cannot be tagged at this time.");_.onReady(function(e){e.cometPushToast({message:o,testid:"FeedCometMentionHintToast"})})}},n[3]=a.rawData,n[4]=d):d=n[4];var p=d,g=a,y=g.rawData,C=!1,b=!1,v=null,S="circle",R=(y==null?void 0:y.isEligible)===!1&&l,L=R?"disabled":null;if(y.type==="MENTION_SEARCH_RESULT"){var E;C=!!y.isExternal,b=y.isVerified,v=y.subtext,S=(E=y.iconShape)!=null?E:"circle"}var k=a,I=k.label,T=i.addOn,D=f.name;T!=null&&(D=b?f.invitedVerifiedName:f.invitedName);var x=y.type!=="SEE_ALL_ENTRY"&&y.type!=="MENTION_TYPE_RESET"?y.photoURI:null;if(x==null)return r("FBLogger")("comet_composer").mustfix("No profile picture found for mentions entry"),null;var $;n[5]!==x?($={uri:x},n[5]=x,n[6]=$):$=n[6];var P;n[7]!==S||n[8]!==$?(P=m.jsx(r("FDSProfilePhoto.react"),{shape:S,size:40,source:$}),n[7]=S,n[8]=$,n[9]=P):P=n[9];var N=P,M;n[10]!==R||n[11]!==i.onPressEntry?(M=R?h:i.onPressEntry,n[10]=R,n[11]=i.onPressEntry,n[12]=M):M=n[12];var w="CometSearchMentionsBaseViewItem/"+I,A,F;n[13]===Symbol.for("react.memo_cache_sentinel")?(A={className:"x6s0dn4 x78zum5 x1gfrnbc x18ip3f8"},F={className:"x1vqgdyp x100vrsf"},n[13]=A,n[14]=F):(A=n[13],F=n[14]);var O;n[15]!==N?(O=m.jsx("div",babelHelpers.extends({},F,{children:N})),n[15]=N,n[16]=O):O=n[16];var B,W;n[17]===Symbol.for("react.memo_cache_sentinel")?(W={className:"x1iyjqo2 x1diwwjn x6ikm8r x10wlt62 xlyipyv xuxw1ft"},B={className:"x78zum5 x1gslohp x12nagc"},n[17]=B,n[18]=W):(B=n[17],W=n[18]);var q;n[19]!==D?(q=(c||(c=r("stylex"))).props(D),n[19]=D,n[20]=q):q=n[20];var U;n[21]!==I||n[22]!==L?(U=m.jsx(r("FDSText.react"),{color:L,numberOfLines:1,type:"headlineEmphasized4",children:I}),n[21]=I,n[22]=L,n[23]=U):U=n[23];var V;n[24]!==q||n[25]!==U?(V=m.jsx("div",babelHelpers.extends({},q,{children:U})),n[24]=q,n[25]=U,n[26]=V):V=n[26];var H;n[27]!==a.key||n[28]!==b?(H=b&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"x51ohtg"}),m.jsx("div",{className:"x1kpxq89",children:m.jsx(r("CometProfileVerificationBadge.react"),{profileID:a.key,size:"small"})}),m.jsx("div",{className:"x51ohtg"})]}),n[27]=a.key,n[28]=b,n[29]=H):H=n[29];var G;n[30]!==C?(G=C?m.jsx("span",{className:"xaso8d8",children:m.jsx(r("FDSIcon.react"),{alt:s._(/*BTDS*/"Not part of your organization"),color:"primary",icon:o("fbicon")._(u("785426"),12)})}):null,n[30]=C,n[31]=G):G=n[31];var z;n[32]!==V||n[33]!==H||n[34]!==G?(z=m.jsxs("div",babelHelpers.extends({},B,{children:[V,H,G]})),n[32]=V,n[33]=H,n[34]=G,n[35]=z):z=n[35];var j;n[36]!==v||n[37]!==L?(j=v!=null&&m.jsxs("div",{className:"x12nagc",children:[m.jsx("div",{className:"xdk7pt"}),m.jsx(r("FDSText.react"),{color:L,numberOfLines:1,type:"meta3",children:v})]}),n[36]=v,n[37]=L,n[38]=j):j=n[38];var K;n[39]!==z||n[40]!==j?(K=m.jsxs("div",babelHelpers.extends({},W,{children:[z,j]})),n[39]=z,n[40]=j,n[41]=K):K=n[41];var Q;n[42]!==T?(Q=m.jsx("div",{children:T}),n[42]=T,n[43]=Q):Q=n[43];var X;n[44]!==K||n[45]!==Q||n[46]!==O?(X=m.jsxs("div",babelHelpers.extends({},A,{children:[O,K,Q]})),n[44]=K,n[45]=Q,n[46]=O,n[47]=X):X=n[47];var Y;return n[48]!==a||n[49]!==p||n[50]!==i||n[51]!==X||n[52]!==M||n[53]!==w?(Y=m.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},i,{entry:a,onPressEntry:M,onPressEntryIn:p,testid:void 0,children:X})),n[48]=a,n[49]=p,n[50]=i,n[51]=X,n[52]=M,n[53]=w,n[54]=Y):Y=n[54],Y}function h(){}l.default=g}),226);
__d("FeedComposerCometMentionsViewItemResolver.react",["FeedComposerCometMentionsMentionTypeResetViewItem.react","FeedComposerCometMentionsMentionTypeSelectionViewItem.react","FeedComposerCometMentionsViewItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(12),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=a,s=l.rawData;switch(s.type){case"MENTION_TYPE_SELECTION":{var c;return n[3]!==a||n[4]!==i?(c=u.jsx(r("FeedComposerCometMentionsMentionTypeSelectionViewItem.react"),babelHelpers.extends({entry:a},i)),n[3]=a,n[4]=i,n[5]=c):c=n[5],c}case"MENTION_TYPE_RESET":{var d;return n[6]!==a||n[7]!==i?(d=u.jsx(r("FeedComposerCometMentionsMentionTypeResetViewItem.react"),babelHelpers.extends({entry:a},i)),n[6]=a,n[7]=i,n[8]=d):d=n[8],d}default:{var m;return n[9]!==a||n[10]!==i?(m=u.jsx(r("FeedComposerCometMentionsViewItem.react"),babelHelpers.extends({entry:a},i)),n[9]=a,n[10]=i,n[11]=m):m=n[11],m}}}l.default=c}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t){var n=t.anchorNode,o=t.endOffset,a=t.selectedEntry,i=t.startOffset,l;if(i===0){var s=n.splitText(o);l=s[0]}else{var u=n.splitText(i,o);l=u[1]}if(l==null){r("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+i+", "+o+".");return}var c=e(a);c.setStyle(l.getStyle()),l.replace(c),c.selectNext(0,0)}}l.default=e}),98);
__d("cometMentionsDataEntryText",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return(t=e.handle)!=null?t:e.label}i.default=e}),66);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(t,n,r,o,a,i,l){"use strict";var e="(?:\\.[ |$]| |["+r("DocumentMentionsRegex").PUNCTUATION+"]|)",s=75;function u(e,t,n){var r="[^"+e+t+"\\s]",o=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+n+"){0,"+s+"}))$"),a=50,i=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+"){0,"+a+"}))$");return{regex:o,regexAlias:i}}function c(t){var n=t.minMatchLength,o=t.name,a=t.triggers,i=t.disallowedChars,l=i===void 0?r("DocumentMentionsRegex").PUNCTUATION:i,s=t.disallowedTerms,c=t.validJoins,d=c===void 0?e:c,m=u(a,l,d),p=m.regex,_=m.regexAlias;return{findMentionableString:function(t){var e=p.exec(t);if(e===null&&(e=_.exec(t)),e!==null){var r=e[1],o=e[3];if(s!=null&&s.includes(o.toLowerCase()))return null;if(o.length>=n)return{leadOffset:e.index+r.length,matchingString:o,replaceableString:e[2]}}return null},name:o}}l.default=c}),98);
__d("createCometAtSignComposerMentionsMatchStrategy",["createCometMentionMatchStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=["@","\\uff20"].join("");function s(t){var n=t.minMatchLength;return r("createCometMentionMatchStrategy")({minMatchLength:n,name:"AtSignComposerMentionStrategy("+n.toString()+")",triggers:e})}l.default=s}),98);
__d("createCometMentionsNameMatchStrategy",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s="\\b[a-z][^\\s"+e+"]";function u(e){var t=e.commonWordsBlocklist,n=e.minMatchLength,r=e.nameCase,o=r==="capitalized"?l:s,a=new RegExp("(^|[^#])((?:"+o+"{1,})$)");return{findMentionableString:function(r){var e=a.exec(r);if(e===null)return null;var o=e[1],i=e[2];return t.includes(i)?null:i!=null&&i.length>=n?{leadOffset:e.index+o.length,matchingString:i,replaceableString:i}:null},name:"NameMentionStrategy("+n.toString()+", "+r+")"}}i.default=u}),66);
__d("getHashtagRegexStringChars",[],(function(t,n,r,o,a,i){"use strict";function e(){var e="\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253-\u0254\u0256-\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF",t="\u0400-\u04FF\u0500-\u0527\u2DE0-\u2DFF\uA640-\uA69F\u0591-\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\uFB12-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFB4F\u0610-\u061A\u0620-\u065F\u066E-\u06D3\u06D5-\u06DC\u06DE-\u06E8\u06EA-\u06EF\u06FA-\u06FC\u06FF\u0750-\u077F\u08A0\u08A2-\u08AC\u08E4-\u08FE\uFB50-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\u200C-\u200C\u0E01-\u0E3A\u0E40-\u0E4E\u1100-\u11FF\u3130-\u3185\uA960-\uA97F\uAC00-\uD7AF\uD7B0-\uD7FF\uFFA1-\uFFDC",n=String.fromCharCode,r="\u30A1-\u30FA\u30FC-\u30FE\uFF66-\uFF9F\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\u3041-\u3096\u3099-\u309E\u3400-\u4DBF\u4E00-\u9FFF"+n(173824)+"-"+n(177983)+n(177984)+"-"+n(178207)+n(194560)+"-"+n(195103)+"\u3003\u3005\u303B",o=e+t+r,a="A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",i="\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F\uFE20-\uFE23",l="0-9\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\uFF10-\uFF19",s=a+i+o,u=l+"_",c=s+u,d="#\\uFF03";return{alpha:s,alphanumeric:c,hashChars:d}}i.default=e}),66);
__d("getHashtagRegexString",["getHashtagRegexStringChars"],(function(t,n,r,o,a,i){function e(){var e=n("getHashtagRegexStringChars")(),t=e.alpha,r=e.alphanumeric,o=e.hashChars,a="["+t+"]",i="["+r+"]",l="^|$|[^&/"+r+"]",s="["+o+"]",u="("+l+")("+s+")("+i+"*"+a+i+"*)";return u}i.default=e}),66);
__d("getUpgradedCometHashtagComposerHandler",["FBLogger","LexicalHashtag","LexicalText","LexicalUtils","getHashtagRegexString"],(function(t,n,r,o,a,i,l){"use strict";var e=new RegExp(r("getHashtagRegexString")(),"i");function s(t){if(!t.hasNodes([o("LexicalHashtag").HashtagNode]))throw r("FBLogger")("outline_ufi").mustfixThrow("HashtagPlugin: HashtagNode not registered on editor");var n=function(t){return o("LexicalHashtag").$createHashtagNode(t.getTextContent())},a=function(n){var t=e.exec(n);if(t===null)return null;var r=t[3].length+1,o=t.index+t[1].length,a=o+r;return{end:a,start:o}};return o("LexicalUtils").mergeRegister.apply(void 0,o("LexicalText").registerLexicalTextEntity(t,a,o("LexicalHashtag").HashtagNode,n))}l.default=s}),98);
__d("useCometMentionsDataSourceResolverConfig",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useMemo;function m(e,t){var n=o("react-compiler-runtime").c(12),r;n[0]!==e?(r=function(){e.forEach(p)},n[0]=e,n[1]=r):r=n[1];var a=r,i,l;n[2]!==a||n[3]!==t?(i=function(){t&&a()},l=[t,a],n[2]=a,n[3]=t,n[4]=i,n[5]=l):(i=n[4],l=n[5]),c(i,l);var s,u;n[6]===Symbol.for("react.memo_cache_sentinel")?(u=new Map,n[6]=u):u=n[6];var d=u,m;n[7]!==e?(m=function(n){var t={dataSource:null,searchResult:null};if(n==null)return t;var r=d.get(n);if(r!=null)return r;for(var o=0;o<e.length;o++){var a=e[o],i=a.dataSource,l=a.matchStrategy,s=l.findMentionableString(n);if(s!=null){var u={dataSource:i,searchResult:s};return d.set(n,u),u}}return d.set(n,t),t},n[7]=e,n[8]=m):m=n[8];var _;return n[9]!==a||n[10]!==m?(_={bootstrap:a,resolver:m},n[9]=a,n[10]=m,n[11]=_):_=n[11],s=_,s}function p(e){var t=e.dataSource;t.bootstrap()}l.default=m}),98);
__d("useCometMentionsViewListStrategy",["CometMentionsViewListStrategy.react","CometTypeaheadProgressGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(2),a=t.viewItemStrategyRenderer,i;return n[0]!==a?(i=function(n){var t=n.isLoading,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return u.jsxs(u.Fragment,{children:[u.jsx(r("CometMentionsViewListStrategy.react"),babelHelpers.extends({},o,{isLoading:!1,viewItemStrategyRenderer:a})),t&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})},n[0]=a,n[1]=i):i=n[1],i}l.default=d}),98);/*FB_PKG_DELIM*/
__d("Box.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["as","xstyle"],u,c,d=c||(c=o("react")),m={box:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",flexBasis:"xdl72j9",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(14),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l,c,p;if(n[3]!==a){var _=a;c=_.as,p=_.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(_,s),n[3]=a,n[4]=l,n[5]=c,n[6]=p}else l=n[4],c=n[5],p=n[6];var f=c===void 0?"div":c,g;n[7]!==p?(g=(u||(u=r("stylex")))(m.box,p),n[7]=p,n[8]=g):g=n[8];var h;return n[9]!==f||n[10]!==l||n[11]!==i||n[12]!==g?(h=d.jsx(f,babelHelpers.extends({},l,{className:g,ref:i})),n[9]=f,n[10]=l,n[11]=i,n[12]=g,n[13]=h):h=n[13],h}l.default=p}),98);
__d("LSRtcCallState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});i.default=e}),66);
__d("useLSComputedThreadName",["CometTextWithEntities.react","react","react-compiler-runtime","useLSGetThreadTitle.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadTitle"],s,u=s||(s=o("react"));function c(t,n){var a=o("react-compiler-runtime").c(12),i=r("useLSGetThreadTitle.react")(t),l,s;if(a[0]!==i?(s=i.threadTitle,l=babelHelpers.objectWithoutPropertiesLoose(i,e),a[0]=i,a[1]=l,a[2]=s):(l=a[1],s=a[2]),s==null){var c;a[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("CometTextWithEntities.react"),{text:""}),a[3]=c):c=a[3];var d;return a[4]!==l?(d=babelHelpers.extends({threadNameElement:c},l),a[4]=l,a[5]=d):d=a[5],d}var m;a[6]!==s||a[7]!==n?(m=u.jsx(r("CometTextWithEntities.react"),{text:s,transforms:n}),a[6]=s,a[7]=n,a[8]=m):m=a[8];var p;return a[9]!==l||a[10]!==m?(p=babelHelpers.extends({threadNameElement:m},l),a[9]=l,a[10]=m,a[11]=p):p=a[11],p}l.default=c}),98);
__d("LSThreadTitle.react",["CometTextWithEntities.react","FBLogger","MWChatTextTransform","mwCMIsAnyCMThread","react","react-compiler-runtime","useLSComputedThreadName"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.thread,n=e.transforms;return r("useLSComputedThreadName")(t,n).threadNameElement}function c(e){var t=o("react-compiler-runtime").c(7),n=e.thread,a=e.transforms,i=a===void 0?o("MWChatTextTransform").textTransforms:a,l=n.threadName;if(l!=null){var c;return t[0]!==l||t[1]!==i?(c=s.jsx(r("CometTextWithEntities.react"),{text:l,transforms:i}),t[0]=l,t[1]=i,t[2]=c):c=t[2],c}if(r("mwCMIsAnyCMThread")(n.threadType)){r("FBLogger")("messenger_comet").mustfix("community message should not use computed thread title");var d;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("CometTextWithEntities.react"),{text:""}),t[3]=d):d=t[3],d}var m;return t[4]!==n||t[5]!==i?(m=s.jsx(u,{thread:n,transforms:i}),t[4]=n,t[5]=i,t[6]=m):m=t[6],m}l.default=c}),98);
__d("MWInboxMessageSearchJumpToResultQPL",["FBLogger","I64","MAWLoggerUtils","QPLUserFlow","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("3865"),u=r("justknobx")._("3867"),c=null;function d(){c=null}function m(e,t,n){return c={key:o("MAWLoggerUtils").getInstanceKey(),messageId:t,messageOtid:n,threadKey:e},c.key}function p(e,t){if(!(c==null||(t==null?void 0:t.messageId)!==c.messageId&&(t==null?void 0:t.offlineThreadingId)!==c.messageOtid)){var n=c.key;r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),e,{instanceKey:n})}}function _(t,n){if(!(!u||c==null||!(e||(e=o("I64"))).equal(n.threadKey,c.threadKey)))try{var a=c.key,i=t.msgs,l=i.some(function(e){var t,n;return e.msgId===((t=c)==null?void 0:t.messageId)||e.externalId===((n=c)==null?void 0:n.messageOtid)});r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),l?"jumped_message_fetched":"message_fetch_checkpoint",{data:{string:{rangeMaxTimestamp:n.maxTimestampMs!=null?(e||(e=o("I64"))).to_string(n.maxTimestampMs):"null",rangeMinTimestamp:n.minTimestampMs!=null?(e||(e=o("I64"))).to_string(n.minTimestampMs):"null"}},instanceKey:a})}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web_search").mustfix("Failed to check if jumped message are fetched: %s",s.message)}}function f(e){if(!(c==null||(e==null?void 0:e.messageId)!==c.messageId&&(e==null?void 0:e.offlineThreadingId)!==c.messageOtid)){var t=c.key;r("QPLUserFlow").endSuccess(r("qpl")._(25306290,"2811"),{instanceKey:t}),d()}}function g(e){if(c!=null){var t=c.key;r("QPLUserFlow").endCancel(r("qpl")._(25306290,"2811"),{annotations:{string:{cancelReason:e}},instanceKey:t}),d()}}function h(e,t,n){var o=m(e,t.messageId,t.offlineThreadingId);r("QPLUserFlow").start(r("qpl")._(25306290,"2811"),babelHelpers.extends({annotations:{string:{messageId:t==null?void 0:t.messageId,messageOtid:t==null?void 0:t.offlineThreadingId}},instanceKey:o,timeoutInMs:s},n))}l.addPointIfJumpedToMessage=p,l.checkIfJumpedMessageAreFetched=_,l.endSuccessIfJumpedToMessage=f,l.endCancelIfAny=g,l.start=h}),98);
__d("MAWFetchMessagesForMLv2",["DateConsts","MAWMessagesDirection","MAWMessagesPaginationUtils","MAWSecureLocalDBFetch","MWInboxMessageSearchJumpToResultQPL"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_SEC;async function s(t){var n=t.chatJid,a=t.direction,i=t.includeOriginalMsg,l=t.pageSize,s=t.range,u=o("MAWMessagesDirection").getRangeMsgIdForDirection(a,s),c=await o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(a,s),d=await r("MAWSecureLocalDBFetch")({actionType:"user",chatJid:n,config:{admin:!0,editMsgHistory:!0,media:!0,polls:!0,reactions:!0,receiverFetch:!0,xma:!0},count:l,direction:o("MAWMessagesDirection").translateMwpDirectionToMawDirection(a),offsetMsg:{externalId:c,includeOriginalMsg:i,messageId:u},timestampMs:o("MAWMessagesDirection").getI64RangeTimestampForDirection(a,s)},{timeoutMs:e});return d.success===!0&&(o("MAWMessagesPaginationUtils").populateExternalIdCache(d.value.msgs),o("MWInboxMessageSearchJumpToResultQPL").checkIfJumpedMessageAreFetched(d.value,s)),d}l.fetchMessagesFromMAW=s}),98);
__d("MAWFindMsgsWithMinAndMaxTimestamp",["MAWMessagesCompare","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.length===0)return[null,null];if(r("qex")._("18"))return u(e);var t=e.toSorted(function(e,t){var n,r;return((n=e.sortOrderMs)!=null?n:0)-((r=t.sortOrderMs)!=null?r:0)});return[t[0],t[t.length-1]]}function s(e){var t=e.filter(function(e){return e.sortOrderMs!=null});if(t.length===0)return[null,null];if(r("qex")._("18"))return u(t);var n=null,o=null;for(var a of t){var i,l;a.sortOrderMs!=null&&((((i=n)==null?void 0:i.sortOrderMs)==null||n.sortOrderMs<a.sortOrderMs)&&(n=a),(((l=o)==null?void 0:l.sortOrderMs)==null||o.sortOrderMs>a.sortOrderMs)&&(o=a))}return[o,n]}function u(e){if(e.length===0)return[null,null];var t=o("MAWMessagesCompare").getSortComparisonFunctionForDirection("asc"),n=e.filter(function(e){return e.sortOrderMs!=null}).sort(t);return[n[0],n[n.length-1]]}l.findEBMsgsWithMinAndMaxTimestamp=e,l.findMsgsWithMinAndMaxTimestamp=s}),98);
__d("ReplayLastSubjectWithMapper",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({}),s=(function(){function t(t,n){var r=this;t===void 0&&(t=e),this.$1=!1,this.$5=new Set,this.$3=t,this.$6=n,this.$4=o("relay-runtime").Observable.create(function(t){if(r.$1){r.$2!=null?t.error(r.$2):t.complete();return}return r.$5.add(t),r.$3!==e&&t.next(r.$6(r.$3)),function(){r.$5.delete(t)}})}var n=t.prototype;return n.next=function(t){this.$1||this.$3!==t&&(this.$3=t,this.$5.forEach(function(e){return e.next(t)}))},n.error=function(t){this.$1||(this.$1=!0,this.$2=t,this.$5.forEach(function(e){return e.error(t)}))},n.complete=function(){this.$1||(this.$1=!0,this.$5.forEach(function(e){return e.complete()}))},n.subscribe=function(t){return this.$4.subscribe(t)},t})();l.ReplayLastSubjectWithMapper=s}),98);
__d("MAWMessageRangeDataExternalObservables",["ReplayLastSubjectWithMapper","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[]}var t=e.prototype;return t.getOrCreateExternalObservableForRange=function(t,n){var e=this.$1.find(function(e){var n=e[0],r=e[1];return t===n});if(e!=null)return e[1];var r=new(o("ReplayLastSubjectWithMapper")).ReplayLastSubjectWithMapper({range:t.value,rangeExternalIds:n},function(e){var t=e.range,n=e.rangeExternalIds;return{range:t,rangeExternalIds:n}});return this.$1.push([t,r]),r},t.updateExternalObservableWithRange=function(t,n){var e=r("nullthrows")(this.$1.find(function(e){var n=e[0],r=e[1];return r===t}));e[0]!==n&&(e[0]=n)},e})();l.MAWMessageRangeDataExternalObservables=e}),98);
__d("MAWMessagesRangesUtils",["I64","MAWFindMsgsWithMinAndMaxTimestamp","MAWMessagesDirection"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(e||(e=o("I64"))).max_int,minMessageId:"",minTimestampMs:e.min_int,threadKey:t}}function u(){return{maxExternalId:null,minExternalId:null}}function c(t,n,r,a){var i,l,s=o("MAWFindMsgsWithMinAndMaxTimestamp").findMsgsWithMinAndMaxTimestamp(r.msgs),u=s[0],c=s[1],m=babelHelpers.extends({},t,o("MAWMessagesDirection").switchOnMWPMessagesDirection(a,{asc:{hasMoreAfter:r.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(i=c==null?void 0:c.msgId)!=null?i:t.maxMessageId,maxTimestampMs:(e||(e=o("I64"))).max(t.maxTimestampMs,(c==null?void 0:c.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(c==null?void 0:c.sortOrderMs):t.maxTimestampMs)},desc:{hasMoreBefore:r.hasMoreBefore,isLoadingBefore:!1,minMessageId:(l=u==null?void 0:u.msgId)!=null?l:t.minMessageId,minTimestampMs:e.min(t.minTimestampMs,(u==null?void 0:u.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(u==null?void 0:u.sortOrderMs):t.minTimestampMs)}})),p=d(a,u,c,n);return[m,p]}function d(e,t,n,r){var a,i;return babelHelpers.extends({},o("MAWMessagesDirection").switchOnMWPMessagesDirection(e,{asc:{maxExternalId:(a=n==null?void 0:n.externalId)!=null?a:r.maxExternalId,minExternalId:r.minExternalId},desc:{maxExternalId:r.maxExternalId,minExternalId:(i=t==null?void 0:t.externalId)!=null?i:r.minExternalId}}))}l.getRangeForFailure=s,l.getRangeExternalIdsForFailure=u,l.mergeMoreMessagesResponseIntoRange=c,l.getNewMsgsRangesExternalIds=d}),98);
__d("MAWMpsM3RangeExtension",["MAWFetchMessagesForMLv2","MAWTimedBridge","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n){var t=n.chatJid,a=n.count,i=n.direction,l=n.logger,s=n.oldRange,u=await o("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:t,direction:i,includeOriginalMsg:!0,pageSize:a,range:s});if(u.success===!1){var c,d=u.payload,m=d==null?"unknown":"["+d.name+"]: "+d.message;if(o("WATagsLogger").TAGS(["maw_message_core","MAWMessageRangeDataSource"]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsM3RangeExtension: Failed to fetch messages from worker due to ",". Error: ",""])),u.error,m),u.payload instanceof o("MAWTimedBridge").MAWBridgeTimeoutError)return{status:"try_again"};throw(c=u.payload)!=null?c:r("err")("Failed to fetch messages from worker")}return l==null||l.addQPLAnnotations({string:{mps_status:"m3"}}),{extension:u.value,status:"continue"}};l.mpsM3RangeExtension=s}),98);
__d("MAWWaitForACTThreadReadyForMLv2",["MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActOnActThreadReady"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=await o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByThreadKey(e,t,n);r==null||r.addQPLAnnotations({string:{initial_mi_act_thread_state:a.type}});var i=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e,t,n);return i}l.waitForACTThreadReadyForMLv2=e}),98);
__d("MLV2DataSourceLogger",["I64","MAWQPLLogger","MWChatInteraction","mergeDeep","performanceNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){return u==null&&(u=r("MAWQPLLogger")(r("qpl")._(25303796,"1974"))),u}var d=new Map;function m(e,t){return(s||(s=o("I64"))).to_string(e)+t}function p(e){var t=e.getTrace(),n=(t==null?void 0:t.completed)!=null,o=(t==null?void 0:t.qplEvent)===r("qpl")._(30605380,"18")||(t==null?void 0:t.qplEvent)===r("qpl")._(30609204,"1682");return!n&&o}function _(t,n,a,i){var l=m(t,n),u=d.get(l);u!=null&&u.markQPLCancel("restart_logger");var _=c().markQPLStart(),f=o("MWChatInteraction").getInteractionTraceForThreadKey((s||(s=o("I64"))).to_string(t)),g=(e||(e=r("performanceNow")))();f==null||f.addMarkerPoint("MLV2_fetch_start","AppTiming",g);var h=function(n,o){var t=(e||(e=r("performanceNow")))(),a={action:n,full_duration:(t-g)/1e3};if(o!=null&&(a=r("mergeDeep")(a,o)),f!=null){var i=p(f),l=n==="CANCEL"&&t-g<50;!i||l||f.addMarkerPoint("MLV2_fetch_end","AppTiming",t,a)}},y=new Set,C={addQPLAnnotations:function(t){c().addQPLAnnotations(_,t)},annotateMessageRangesDataSource:function(t){y.add(t),c().addQPLAnnotations(_,{string_array:{message_ranges_source:Array.from(y.keys())}})},getInstanceKey:function(){return _},markQPLCancel:function(t){c().addQPLAnnotations(_,{string:{cancel_reason:t}}),c().markQPLCancel(_),h("CANCEL"),d.delete(l)},markQPLFailure:function(t){c().markQPLFailure(_,t),h("FAIL"),d.delete(l)},markQPLFailureWithMsg:function(t){c().markQPLFailureWithMsg(_,t),h("FAIL"),d.delete(l)},markQPLPoint:function(t){c().markQPLPoint(_,t)},markQPLSuccess:function(t){c().markQPLSuccess(_),h("SUCCESS",{num_msgs_fetched:t}),d.delete(l)}},b=!1;return f!=null&&p(f)&&(b=!0),C.addQPLAnnotations({bool:{during_chat_open:b},int:{queried_count:a},string:{direction:n,thread_id:s.to_string(t),thread_type:s.to_string(i)}}),d.set(l,C),C}function f(e,t){var n=m(e,t);return d.get(n)}l.startMLV2LoggerForThread=_,l.getMLV2LoggerForThread=f}),98);
__d("MLV2RangeExtensionLogger",["I64","MAWQPLLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return s==null&&(s=r("MAWQPLLogger")(r("qpl")._(1056843758,"1768"))),s}var c=new Map;function d(t,n){return(e||(e=o("I64"))).to_string(t)+n}function m(t,n,r,a){var i=d(t,n),l=c.get(i);l!=null&&l.markQPLCancel("restart_logger");var s=u().markQPLStart(),m=new Set,p={addQPLAnnotations:function(t){u().addQPLAnnotations(s,t)},annotateMessageRangesDataSource:function(t){m.add(t),u().addQPLAnnotations(s,{string_array:{message_ranges_source:Array.from(m.keys())}})},getInstanceKey:function(){return s},markQPLCancel:function(t){u().addQPLAnnotations(s,{string:{cancel_reason:t}}),u().markQPLCancel(s),c.delete(i)},markQPLFailure:function(t){u().markQPLFailure(s,t),c.delete(i)},markQPLFailureWithMsg:function(t){u().markQPLFailureWithMsg(s,t),c.delete(i)},markQPLPoint:function(t){u().markQPLPoint(s,t)},markQPLSuccess:function(){u().markQPLSuccess(s),c.delete(i)}};return p.addQPLAnnotations({bool:{is_initial_range:(e||(e=o("I64"))).equal(r.minTimestampMs,(e||(e=o("I64"))).max_int)&&(e||(e=o("I64"))).equal(r.maxTimestampMs,(e||(e=o("I64"))).max_int)},int:{page_size:a},string:{direction:n,start_range:JSON.stringify(babelHelpers.extends({},r,{maxTimestampMs:r.maxTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.maxTimestampMs),minTimestampMs:r.minTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.minTimestampMs)})),thread_id:(e||(e=o("I64"))).to_string(t)}}),c.set(i,p),p}function p(e,t){var n=d(e,t);return c.get(n)}l.startRangeExtensionLoggerForThread=m,l.getRangeExtensionLoggerForThread=p}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.value=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.next=function(n){this.value=n,e.prototype.next.call(this,n)},t})(o("ReplayLastSubject").ReplayLastSubject),u=(function(e){function t(t){var n;n=e.call(this,t)||this;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.forEach(function(e){n.subscribe({complete:function(){return e.complete()},error:function(n){return e.error(n)},next:function(n){return e.next(n)}})}),n.next(t),n}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(){function t(){this.$1=new Set}var n=t.prototype;return n.$2=function(n){for(var t of this.$1){var r=t.value;if((e||(e=o("I64"))).le(r.minTimestampMs,n)&&((e||(e=o("I64"))).ge(r.maxTimestampMs,n)||!r.hasMoreAfter))return t}return null},n.getRangeForTimestamp=function(t){return this.$2(t)},n.upsertRange=function(t){var e=Array.from(this.$1.values()).filter(function(e){return m(e.value,t)});if(e.length===0){var n=new s(t);return this.$1.add(n),n}var r=d.apply(void 0,e.map(function(e){return e.value}).concat([t]));if(e.length===1){var o=e[0];return o.next(r),o}for(var a of e)this.$1.delete(a);var i=babelHelpers.construct(u,[r].concat(e));return this.$1.add(i),i},t})();function d(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===0)throw r("err")("Cannot merge 0 ranges");for(var i=n[0].threadKey,l=n[0].minTimestampMs,s=n[0].hasMoreAfter,u=n[0].hasMoreBefore,c=n[0].maxMessageId,d=n[0].minMessageId,m=n[0].maxTimestampMs,p=1;p<n.length;p++){var _=n[p];(e||(e=o("I64"))).le(_.minTimestampMs,l)&&((e||(e=o("I64"))).equal(_.minTimestampMs,l)?u=u&&_.hasMoreBefore:u=_.hasMoreBefore,l=_.minTimestampMs,d=_.minMessageId),(e||(e=o("I64"))).ge(_.maxTimestampMs,m)&&((e||(e=o("I64"))).equal(_.maxTimestampMs,m)?s=s&&_.hasMoreAfter:s=_.hasMoreAfter,m=_.maxTimestampMs,c=_.maxMessageId)}return{hasMoreAfter:s,hasMoreBefore:u,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:c,maxTimestampMs:m,minMessageId:d,minTimestampMs:l,threadKey:i}}function m(t,n){var r=(e||(e=o("I64"))).le(n.minTimestampMs,t.minTimestampMs),a=r?n:t,i=r?t:n;return!!p(a,i.minTimestampMs)}function p(t,n){return(e||(e=o("I64"))).ge(n,t.minTimestampMs)&&(e||(e=o("I64"))).le(n,t.maxTimestampMs)}l.MessageRangeSet=c,l.Subject=s}),98);
__d("MpsLoadMessagesStep",["I64","MAWAckLevel","MAWLocalizationType","MAWMessagesDirection","MpsMessageToLoadResponse","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=e+"CUTOVER",a=o("MpsTypes").toMessageId(r),i=o("MpsTypes").toThreadId(r),l={ack:o("MAWAckLevel").ACK.received,adminContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,adminVersion:1,chatJid:e,externalId:r,forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(i,a),sender:"",sortOrderMs:0,ts:o("WATimeUtils").castToUnixTime(0),type_:"Admin"};t.msgs=[l].concat(t.msgs),n.endCursor=[o("MpsTypes").toTimestamp(0),a]}async function u(t){var n=t.chatJid,a=t.count,i=t.direction,l=t.logger,u=t.oldRange,c=t.oldRangeExternalIds;l==null||l.addQPLAnnotations({bool:{use_mps:!0}});var d=[o("MpsTypes").toTimestamp((e||(e=o("I64"))).to_float(o("MAWMessagesDirection").getI64RangeTimestampForDirection(i,u))),o("MpsTypes").toMessageId(o("MAWMessagesDirection").getRangeMsgIdForDirection(i,u))];l==null||l.markQPLPoint("mps_load_messages_start");var m=await o("MpsOverBridge").mps().loadMessages({debug:{purpose:"load-more"},direction:i,from:d,numMessages:a,threadId:o("MpsTypes").toThreadId(n)});if(m.success===!1)throw l==null||l.markQPLPoint("mps_load_messages_failure"),r("err")("Failed to fetch messages from MPS");var p=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasNext,desc:m.value.cursorInfo.hasPrevious}),_=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasPrevious,desc:m.value.cursorInfo.hasNext}),f=babelHelpers.extends({},o("MpsMessageToLoadResponse").messageToLoadMsgsResponse(m.value.messages,l),{hasMoreAfter:p,hasMoreBefore:_});_===!1&&i==="desc"&&s(n,f,m.value.cursorInfo);var g=u,h=c,y=m.value.cursorInfo.endCursor;return y!=null?(g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1,maxMessageId:y[1],maxTimestampMs:(e||(e=o("I64"))).of_float(y[0])},desc:{hasMoreBefore:_,isLoadingBefore:!1,minMessageId:y[1],minTimestampMs:e.of_float(y[0])}})),h=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{maxExternalId:y[1],minExternalId:c.minExternalId},desc:{maxExternalId:c.maxExternalId,minExternalId:y[1]}})):g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1},desc:{hasMoreBefore:_,isLoadingBefore:!1}})),l==null||l.markQPLPoint("mps_load_messages_end"),{extension:f,status:"complete_with_range_override",updatedRange:g,updatedRangeExternalIds:h}}l.addCutoverAdminMessage=s,l.MpsLoadMessagesStep=u}),98);
__d("switchMap",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("relay-runtime").Observable.create(function(n){var r,o=e.subscribe({complete:n.complete,error:n.error,next:function(o){var e;(e=r)==null||e.unsubscribe(),r=t(o).subscribe(n)}});return function(){var e;(e=r)==null||e.unsubscribe(),o.unsubscribe()}})}l.default=e}),98);
__d("MAWMessageRangeDataSourceV2",["I64","LSDatabaseSingleton","MAWEBCombinedSwitch","MAWMessageIntegrityTruncateStatus","MAWMessageRangeDataExternalObservables","MAWMessagesPaginationUtils","MAWMessagesRangesUtils","MAWMpsGating","MAWMpsM3RangeExtension","MAWPutMessagesToDB","MAWSubscribeToLSTruncateMetadataThreads","MAWWaitForACTThreadReadyForMLv2","MLV2DataSourceLogger","MLV2RangeExtensionLogger","MessageRangeSet","MpsLoadMessagesStep","err","gkx","nullthrows","relay-runtime","switchMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=5,c=(function(){function t(t,n){var a=this;this.$2=new(o("MessageRangeSet")).MessageRangeSet,this.$3=u,this.$4=new(o("MAWMessageRangeDataExternalObservables")).MAWMessageRangeDataExternalObservables,this.getOrCreateMessageRangeCoveringCursor=function(t,n,r){var i,l;n==null||n.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),n==null||n.markQPLPoint("maw_get_or_create_range_start");var s=a.$2.getRangeForTimestamp(t.timestampMs);if(s!=null){n==null||n.markQPLPoint("maw_preexisting_range"),n==null||n.markQPLPoint("maw_get_or_create_range_end");var u={maxExternalId:null,minExternalId:null};return a.$4.getOrCreateExternalObservableForRange(s,u)}var c=(e||(e=o("I64"))).equal(t.timestampMs,e.max_int),d={hasMoreAfter:!c,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(i=t.messageId)!=null?i:"",maxTimestampMs:t.timestampMs,minMessageId:(l=t.messageId)!=null?l:"",minTimestampMs:t.timestampMs,threadKey:a.$1},m=a.$2.upsertRange(d);return o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(a.$1,d,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId}),n==null||n.markQPLPoint("maw_range_created"),n==null||n.markQPLPoint("maw_get_or_create_range_end"),a.$4.getOrCreateExternalObservableForRange(m,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId})},this.$5=function(e){var t=o("MLV2DataSourceLogger").getMLV2LoggerForThread(a.$1,e),n=o("MLV2RangeExtensionLogger").getRangeExtensionLoggerForThread(a.$1,e),r={addQPLAnnotations:function(r){t==null||t.addQPLAnnotations(r),n==null||n.addQPLAnnotations(r)},annotateMessageRangesDataSource:function(r){t==null||t.annotateMessageRangesDataSource(r),n==null||n.annotateMessageRangesDataSource(r)},getInstanceKey:function(){var e;return(e=t==null?void 0:t.getInstanceKey())!=null?e:0},markQPLCancel:function(r){t==null||t.markQPLCancel(r),n==null||n.markQPLCancel(r)},markQPLFailure:function(r){t==null||t.markQPLFailure(r),n==null||n.markQPLFailure(r)},markQPLFailureWithMsg:function(r){t==null||t.markQPLFailureWithMsg(r),n==null||n.markQPLFailureWithMsg(r)},markQPLPoint:function(r,o){t==null||t.markQPLPoint(r,o),n==null||n.markQPLPoint(r,o)},markQPLSuccess:function(r){t==null||t.markQPLSuccess(r),n==null||n.markQPLSuccess()}};return r},this.extendRange=async function(t,n,r,i,l){var s=a.$5(r);s.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),s.markQPLPoint("maw_v2_extend_range_start");var u=a.$2.getRangeForTimestamp(t.minTimestampMs);if(u==null)return s.markQPLPoint("extend_range_invalid"),Promise.resolve();var c=u.value;s.markQPLPoint("get_range_external_ids_start");var d=await o("MAWMessagesPaginationUtils").getMessagesRangesV2ExternalIdsIfChanged(t,c,n);if(s.markQPLPoint("get_range_external_ids_end"),r==="asc"&&(!c.hasMoreAfter||c.isLoadingAfter)||r==="desc"&&(!c.hasMoreBefore||c.isLoadingBefore))return s.markQPLPoint("extend_range_skipped"),Promise.resolve();var m=a.$4.getOrCreateExternalObservableForRange(u,d);m.next({range:babelHelpers.extends({},c,{isLoadingAfter:c.isLoadingAfter||r==="asc",isLoadingBefore:c.isLoadingBefore||r==="desc"}),rangeExternalIds:d});var p={maxMessageId:u.value.maxMessageId,maxTimestampMs:u.value.maxTimestampMs,minMessageId:u.value.minMessageId,minTimestampMs:u.value.minTimestampMs};return s.markQPLPoint("perf_range_extension_start"),a.$6(u.value,d,m,r,i,l).then(function(){var t=(e||(e=o("I64"))).equal(p.maxTimestampMs,u.value.maxTimestampMs)&&(e||(e=o("I64"))).equal(p.minTimestampMs,u.value.minTimestampMs)&&u.value.maxMessageId===p.maxMessageId&&u.value.minMessageId===p.minMessageId;s.markQPLPoint("perf_range_extension_end"),s.addQPLAnnotations({bool:{extended_range_is_identical:t}})}).catch(function(e){throw s.markQPLPoint("extend_range_failed"),s.addQPLAnnotations({string:{range_extension_error:e instanceof Error?e.message:"unknown_error"}}),e})},this.$6=async function(e,t,n,r,i,l){var u=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,c=a.$5(r);c==null||c.markQPLPoint("maw_wait_act_thread_start");var d=await o("MAWWaitForACTThreadReadyForMLv2").waitForACTThreadReadyForMLv2(u.tables,a.$1,"MAWMessageRangeDataSourceV2",c).then(function(e){return e.chatJid});c==null||c.markQPLPoint("maw_wait_act_thread_end");var m=a.$7(),p=null;for(var _ of m){var f=_.name,g=_.step,h=await a.$8(g,f,{chatJid:d,count:i,db:u,direction:r,dispatch:l,logger:c,oldRange:e,oldRangeExternalIds:t,prevResponse:p},n);if(h.shouldTerminate)return;p=h.extension}},this.$8=async function(e,t,n,i){var l=n.db,s=n.direction,u=n.logger,c=n.oldRange,d=n.oldRangeExternalIds;u==null||u.markQPLPoint("maw_range_"+t+"_start");var m=await e(n);if(u==null||u.markQPLPoint("maw_range_"+t+"_end"),m.status==="try_again"){if(u==null||u.markQPLPoint("maw_range_"+t+"_retry"),r("gkx")("7409")&&a.$3>0)return u==null||u.markQPLPoint("maw_range_"+t+"_timed_out"),a.$3-=1,i.next({range:babelHelpers.extends({},c,{isLoadingAfter:!1,isLoadingBefore:!1}),rangeExternalIds:d}),{shouldTerminate:!0};throw r("err")("Timed out for step: "+t)}return m.status==="complete"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$9(c,d,i,s,m.extension),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):m.status==="complete_with_range_override"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$10(i,m.updatedRange,m.updatedRangeExternalIds),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):{extension:m.extension,shouldTerminate:!1}},this.$9=function(e,t,n,r,i){var l=o("MAWMessagesRangesUtils").mergeMoreMessagesResponseIntoRange(e,t,i,r),s=l[0],u=l[1];a.$10(n,s,u)},this.$1=t,this.isEBEnabled=n}var n=t.prototype;return n.$7=function(){var e={name:"fallback",step:function(t){var e=t.prevResponse;return Promise.resolve({extension:r("nullthrows")(e),status:"complete"})}};return o("MAWMpsGating").isMpsMessageRendering()?[{name:"mps_load_messages",step:o("MpsLoadMessagesStep").MpsLoadMessagesStep},e]:[{name:"mps_m3_fetch_data",step:o("MAWMpsM3RangeExtension").mpsM3RangeExtension},e]},n.$10=function(t,n,r){var e=this.$2.upsertRange(n);o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(this.$1,n,r),t.next({range:e.value,rangeExternalIds:r})},t})();function d(){return o("relay-runtime").Observable.create(function(e){var t=o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.onSet(function(t){e.next(t===!0)});return e.next(o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled()),function(){t()}})}var m=(function(){function t(t){var n=this;this.$1=new Map,this.$3=null,this.getOrCreateMessageRangeCoveringCursor=function(e,t,o){var a=e.threadKey;return r("switchMap")(n.$2,function(r){return n.$4(a,r).getOrCreateMessageRangeCoveringCursor(e,t,o)})},this.extendRange=function(t,a,i,l,s){var u=t.threadKey,c=o("MLV2RangeExtensionLogger").startRangeExtensionLoggerForThread(u,i,t,l);return n.$1.has((e||(e=o("I64"))).to_string(u))?r("nullthrows")(n.$1.get((e||(e=o("I64"))).to_string(u))).extendRange(t,a,i,l,s).then(function(){c.markQPLSuccess()}).catch(function(e){throw c.markQPLFailure(e),e}):(c.markQPLFailure(r("err")("thread range not found in cache")),Promise.resolve())},this.$2=d(),this.$3=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(t,function(t,r){var a=(e||(e=o("I64"))).to_string(r);n.$1.delete(a)&&o("MAWMessageIntegrityTruncateStatus").setThreadThuncated(r)})}var n=t.prototype;return n.$4=function(n,a){var t=(e||(e=o("I64"))).to_string(n);if(!this.$1.has(t)){var i=new c(n,a);this.$1.set(t,i)}var l=r("nullthrows")(this.$1.get(t));return l.isEBEnabled!==a&&(l=new c(n,a),this.$1.set(t,l)),l},t})(),p,_;function f(e){return(p==null||_!==e)&&(_=e,p=new m(e)),p}l.default=f}),98);
__d("MAWPreloadSecureMessagesRangeDataSource",["MAWMessageRangeDataSourceV2"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMessageRangeDataSourceV2")}),98);
__d("MAWPreloadSecureMessages",["I64","LSAuthorityLevel","LSIntEnum","LSResult","MAWMessagesDirection","MAWPreloadSecureMessagesRangeDataSource","MWV2OnAuthoritativeThreadInsert","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a,i,l,u){var t;if(!(e||(e=o("I64"))).equal(u,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return Promise.resolve();var c=r("MAWPreloadSecureMessagesRangeDataSource")(n),d,m=await new Promise(function(t,n){d=c.getOrCreateMessageRangeCoveringCursor({externalId:null,messageId:null,threadKey:a,timestampMs:(e||(e=o("I64"))).max_int},void 0,i).subscribe({complete:t,error:n,next:function(n){t(n)}})});if((t=d)==null||t.unsubscribe(),m&&o("MAWMessagesDirection").isFirstPageRange(m.range,"desc"))return c.extendRange(m.range,{maxExternalId:null,minExternalId:null},"desc",l,i)},c=async function(n,a){var t=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(n.tables.threads).getKeyRange(a));if(t==null)return null;if((e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return t;var i=t.clientThreadKey;return i!=null?new Promise(function(e){o("MWV2OnAuthoritativeThreadInsert").onAuthoritativeThreadInsert(r("LSResult")(i),n,function(t){return e(t)})}):null},d=async function(t,n,r,o){var e=await c(t,n);return e==null?Promise.resolve():u(t,e.threadKey,r,o,e.authorityLevel)};l.preloadSecureMessages=u,l.preloadSecureMessagesByThreadKey=d}),98);
__d("MWEnsureCutoverOpenThreadExists",["Int64Hooks","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MAWThreadCutover","MWGetChatTabOpenQPLEventTrace","ReQL","ReQLSuspense","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=await o("ReQL").firstAsync(o("MAWThreadCutover").getMiActMappings(e,t));if(n!=null){var a=await o("ReQL").firstAsync(o("MAWThreadCutover").getCutoverThreadsByJid(e,n.jid));if(a!=null){var l=a.openThreadId,u=await o("ReQL").firstAsync(o("MAWThreadCutover").getThreadByCutoverThread(e,a));if(u==null)return e.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":54")}}}function c(t){var n=o("react-compiler-runtime").c(10),a=(e||(e=r("useReStore")))(),l=o("MAWThreadCutover").useGetCutoverOpenThreadKey(t),u,c;n[0]!==a||n[1]!==l?(u=function(){return l==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(l)},c=[a,l],n[0]=a,n[1]=l,n[2]=u,n[3]=c):(u=n[2],c=n[3]);var m=o("ReQLSuspense").useFirst(u,c,i.id+":68"),p,_;n[4]!==m||n[5]!==a||n[6]!==l||n[7]!==t?(p=function(){m==null&&l!=null&&r("promiseDone")(a.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":78"),function(){r("MWGetChatTabOpenQPLEventTrace")(t,d)})},_=[m,a,l,t],n[4]=m,n[5]=a,n[6]=l,n[7]=t,n[8]=p,n[9]=_):(p=n[8],_=n[9]),o("Int64Hooks").useEffectInt64(p,_)}function d(e){e.addMarkerPoint("requested_cutover_open_thread","AppTiming")}l.ensureCutoverOpenThreadExists=u,l.useMWEnsureCutoverOpenThreadExists=c}),98);
__d("withCometPlaceholder",["CometPlaceholder.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t,n,o){return n===void 0&&(n=null),(function(e){return s.jsx(r("CometPlaceholder.react"),{fallback:n,name:o,children:s.jsx(t,babelHelpers.extends({},e))})})};l.withCometPlaceholder=u}),98);
__d("MWPPresenceBadge.react",["fbt","BaseStyledBadge.react","MessengerMSplitFlag","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=o("withCometPlaceholder").withCometPlaceholder(m,null,"MWPPresenceBadge"),d={border:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.isActiveStatePresence,i=e.size,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=!r("MessengerMSplitFlag").is_msplit_account&&a?u.jsx(r("BaseStyledBadge.react"),{accessibilityText:s._(/*BTDS*/"Active now"),border:!0,colorXStyle:d.green,size:i,xstyle:n!=null?n:d.border}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=c}),226);
__d("MWPReQLPresenceBadge.react",["MWPPresenceBadge.react","cr:7905","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("withCometPlaceholder").withCometPlaceholder(c,null,"MWPReQLPresenceBadge");function c(e){var t=o("react-compiler-runtime").c(4),a=e.borderThemeColor,i=e.size,l=e.threadKey,u=n("cr:7905")(l),c;return t[0]!==a||t[1]!==u||t[2]!==i?(c=s.jsx(r("MWPPresenceBadge.react"),{borderThemeColor:a,isActiveStatePresence:u,size:i}),t[0]=a,t[1]=u,t[2]=i,t[3]=c):c=t[3],c}l.default=u}),98);
__d("MWFacepileBadge.react",["CometPlaceholder.react","MWPReQLPresenceBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.size,i=e.threadKey,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWFacepileBadge",children:s.jsx(r("MWPReQLPresenceBadge.react"),{borderThemeColor:n,size:a,threadKey:i})}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWPContactContext.react",["react","react-compiler-runtime","shallowEqualI64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=u.useRef,p=s.createContext({authorName:void 0,contact:void 0,nickname:void 0}),_=s.createContext({authorName:void 0,contact:void 0,nickname:void 0});function f(){return c(p)}function g(){return c(_)}function h(e){var t=o("react-compiler-runtime").c(14),n=e.children,r=e.contact,a=e.nickname,i,l;if(a!=null)l=a;else if(r!=null){var u=r.firstName;l=u!=null?u:r.name}else l=void 0;i=l;var c=i,d,m;t[0]!==c||t[1]!==r||t[2]!==a?(m={authorName:c,contact:r,nickname:a},t[0]=c,t[1]=r,t[2]=a,t[3]=m):m=t[3],d=m;var f=d,g=y(r),h,C;t[4]!==c||t[5]!==a||t[6]!==g?(C={authorName:c,contact:g,nickname:a},t[4]=c,t[5]=a,t[6]=g,t[7]=C):C=t[7],h=C;var b=h,v;t[8]!==n||t[9]!==b?(v=s.jsx(_.Provider,{value:b,children:n}),t[8]=n,t[9]=b,t[10]=v):v=t[10];var S;return t[11]!==f||t[12]!==v?(S=s.jsx(p.Provider,{value:f,children:v}),t[11]=f,t[12]=v,t[13]=S):S=t[13],S}function y(e){var t=m(),n=e?{blockedByViewerStatus:e.blockedByViewerStatus,capabilities:e.capabilities,capabilities2:e.capabilities2,contactTypeExact:e.contactTypeExact,name:e.name,profilePictureFallbackUrl:e.profilePictureFallbackUrl,profilePictureUrl:e.profilePictureUrl,profilePictureUrlExpirationTimestampMs:e.profilePictureUrlExpirationTimestampMs,secondaryName:e.secondaryName}:void 0;return o("shallowEqualI64").shallowEqualI64(t.current,n)||(t.current=n),t.current}l.useMWPContactFullContext=f,l.useMWPContactStableContext=g,l.MWPContactContextProvider=h}),98);
__d("MWGroupBlockingProtectionUtils",["fbt","FBLogger","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWPContactContext.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=o("react-compiler-runtime").c(8),a=(c||(c=r("useReStore")))(),l;n[0]!==a.tables.threads||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(t).map(m)},n[0]=a.tables.threads,n[1]=t,n[2]=l):l=n[2];var s;n[3]!==a||n[4]!==t?(s=[a,t],n[3]=a,n[4]=t,n[5]=s):s=n[5];var d=o("ReQLSuspense").useFirst(l,s,i.id+":30");if(d==null)return!1;var p;return n[6]!==d?(p=(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(18)),n[6]=d,n[7]=p):p=n[7],p}function m(e){return e.threadType}function p(t){var n=d(t),a=o("MWPContactContext.react").useMWPContactStableContext(),i=a.contact;return n&&i?!(e||(e=o("I64"))).equal(i.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function _(t,n){var a=o("react-compiler-runtime").c(4),l=(c||(c=r("useReStore")))(),s,m;a[0]!==l||a[1]!==t?(s=function(){return t!=null?o("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(t):o("ReQL").empty()},m=[l,t],a[0]=l,a[1]=t,a[2]=s,a[3]=m):(s=a[2],m=a[3]);var p=o("ReQLSuspense").useFirst(s,m,i.id+":69"),_=d(n);return _&&p?!(e||(e=o("I64"))).equal(p.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function f(t,n){var a,l,d=o("react-compiler-runtime").c(8),m=(c||(c=r("useReStore")))(),p=(a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableDescending(m.tables.messages).getKeyRange(t)},[m,t],i.id+":92"))==null?void 0:a.senderId,_;d[0]!==m.tables.contacts||d[1]!==p?(_=function(){return p!=null?o("ReQL").fromTableAscending(m.tables.contacts).getKeyRange(p):o("ReQL").empty()},d[0]=m.tables.contacts,d[1]=p,d[2]=_):_=d[2];var f;d[3]!==m||d[4]!==p?(f=[m,p],d[3]=m,d[4]=p,d[5]=f):f=d[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":96"),h=g==null?!1:!(e||(e=o("I64"))).equal(g.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),y=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18));if(!(y&&h))return null;var C=(l=g==null?void 0:g.firstName)!=null?l:g==null?void 0:g.name;if(C==null)return r("FBLogger")("messenger_web_wellbeing").mustfix("Empty first name for blocked contact"),null;var b;return d[6]!==C?(b=s._(/*BTDS*/"{blocked contact's name} sent a message.",[s._param("blocked contact's name",C)]).toString(),d[6]=C,d[7]=b):b=d[7],b}l.useShouldEnableBlockingProtection=d,l.useMWGetSnippetForBlockingProtection=f,l.useMWIsContactBlocked=p,l.useMWIsMessageSentByBlockedContact=_}),226);
__d("useGetContactsToShow",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","getLSMediaContactProfilePictureUrl","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i,l=o("react-compiler-runtime").c(40),s;l[0]!==a?(s=function(n){return n.filter(function(t){return!(e||(e=o("I64"))).equal(t.id,a)})},l[0]=a,l[1]=s):s=l[1];var d=s,m=n.length,p,_,f,g;if(l[2]!==a||l[3]!==n||l[4]!==d||l[5]!==m||l[6]!==t.threadType){var h=[];if(p=[],m!==0){var y=n[0],C=n[1];p=d(n.filter(Boolean).filter(c));e:switch(m){case 1:{if(y!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""){var b;l[11]!==y?(b=[y],l[11]=y,l[12]=b):b=l[12],h=b}break e}case 2:{if(o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===1&&r("getLSMediaContactProfilePictureUrl")(p[0])!==""){var v=p,S;l[13]!==v[0]?(S=[v[0]],l[13]=v[0],l[14]=S):S=l[14],h=S}else if(o("LSMessagingThreadTypeUtil").isGroup(t.threadType)&&y!=null&&C!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""&&r("getLSMediaContactProfilePictureUrl")(C)!==""){var R;l[15]!==y||l[16]!==C?(R=[y,C],l[15]=y,l[16]=C,l[17]=R):R=l[17],h=R}break e}default:p.length>=2&&(h=p)}}var L;l[18]!==p||l[19]!==t.threadType?(L=o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===0,l[18]=p,l[19]=t.threadType,l[20]=L):L=l[20],_=L;var E;if(l[21]!==a||l[22]!==n){var k;l[24]!==a?(k=function(n){return n!=null&&(e||(e=o("I64"))).equal(n.id,a)},l[24]=a,l[25]=k):k=l[25],E=n.find(k),l[21]=a,l[22]=n,l[23]=E}else E=l[23];f=E,g=h.sort(u).slice(0,2),l[2]=a,l[3]=n,l[4]=d,l[5]=m,l[6]=t.threadType,l[7]=p,l[8]=_,l[9]=f,l[10]=g}else p=l[7],_=l[8],f=l[9],g=l[10];var I=g,T;if(l[26]!==p.length||l[27]!==_||l[28]!==m||l[29]!==I||l[30]!==((i=f)==null?void 0:i.id)||l[31]!==t.threadType){var D;T=function(){var n,a;m===2&&!_&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&I.length===1&&(e||(e=o("I64"))).equal(I[0].id,(n=(a=f)==null?void 0:a.id)!=null?n:(e||(e=o("I64"))).minus_one)&&r("FBLogger")("messenger_web").mustfix("One to one thread with participants is showing self contact. Num contacts without self: %s",p.length)},l[26]=p.length,l[27]=_,l[28]=m,l[29]=I,l[30]=(D=f)==null?void 0:D.id,l[31]=t.threadType,l[32]=T}else T=l[32];var x;return l[33]!==p.length||l[34]!==_||l[35]!==m||l[36]!==I||l[37]!==f||l[38]!==t.threadType?(x=[m,_,t.threadType,I,f,p.length],l[33]=p.length,l[34]=_,l[35]=m,l[36]=I,l[37]=f,l[38]=t.threadType,l[39]=x):x=l[39],o("Int64Hooks").useEffectInt64(T,x),I}function u(e,t){return t.rank-e.rank}function c(e){return r("getLSMediaContactProfilePictureUrl")(e)!==""}l.default=s}),98);
__d("useMWFacepileGetContactsToShow",["I64","LSAuthorityLevel","LSGroupParticipantJoinState","LSIntEnum","MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime","useGetContactsToShow","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a){var l=o("react-compiler-runtime").c(14),c=a===void 0?!1:a,m=o("MWPActor.react").useActor(),p=(u||(u=r("useReStore")))(),_;l[0]!==p.tables.contacts||l[1]!==p.tables.participants||l[2]!==c||l[3]!==t?(_=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(p.tables.participants,["groupParticipantJoinState"]).getKeyRange(t),o("ReQL").fromTableAscending(p.tables.contacts,["rank","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs","id","name","authorityLevel"])).filter(function(t){var n=t[0],a=t[1];return(e||(e=o("LSIntEnum"))).toNumber(n.groupParticipantJoinState)!==r("LSGroupParticipantJoinState").MEMBER?!1:!c||a!=null&&c&&(s||(s=o("I64"))).to_int32(a.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE}).take(3)},l[0]=p.tables.contacts,l[1]=p.tables.participants,l[2]=c,l[3]=t,l[4]=_):_=l[4];var f;l[5]!==p||l[6]!==c||l[7]!==t?(f=[p,t,c],l[5]=p,l[6]=c,l[7]=t,l[8]=f):f=l[8];var g=o("ReQLSuspense").useArray(_,f,i.id+":61"),h;l[9]!==g?(h=g.map(d),l[9]=g,l[10]=h):h=l[10];var y=h,C;return l[11]!==t||l[12]!==n?(C={threadKey:t,threadType:n},l[11]=t,l[12]=n,l[13]=C):C=l[13],r("useGetContactsToShow")(C,y,m)}function d(e){var t=e[1];return t}l.default=c}),98);
__d("usePresenceUnifiedIsThreadActive",["FBLogger","I64","Int64Hooks","MWPActor.react","PresenceCommonPresenceCommonTypes","ReQL","promiseDone","react","useAsyncReStore","usePresenceUnifiedClientContext","usePresenceUnifiedMapContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState;function m(e){var t=r("useAsyncReStore")(),n=o("MWPActor.react").useActor(),a=o("usePresenceUnifiedMapContext").usePresenceUnifiedMapContext(),i=o("usePresenceUnifiedClientContext").usePresenceUnifiedClientContext(),l=d(!1),u=l[0],m=l[1],p=o("Int64Hooks").useCallbackInt64(async function(){var r=await t;return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(r.tables.participants,["contactId"]).getKeyRange(e).filter(function(e){var t=e.contactId;return!(s||(s=o("I64"))).equal(t,n)}).map(function(e){var t=e.contactId;return(s||(s=o("I64"))).to_string(t)}))},[n,t,e]);return c(function(){var e=async function(){var e=await p();i==null||i.addAdditionalContacts(e)};r("promiseDone")(e())},[]),c(function(){var e=async function(){if(i==null){r("FBLogger")("messenger_presence_web").warn("usePresenceUnifiedIsThreadActive must have a backing PresenceUnifiedClient");return}var e=await p(),t=e.some(function(e){var t;return((t=a.get(e))==null?void 0:t.presenceStatus)===o("PresenceCommonPresenceCommonTypes").PresenceStatus.Active});m(t)};r("promiseDone")(e())},[p,i,a]),u}l.default=m}),98);/*FB_PKG_DELIM*/
__d("TrustedTypesChromecastScriptURLPolicy",["TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"];function s(t){var n=e.join("|"),r=new RegExp("^chrome-extension://(?:null|"+n+")/cast_sender\\.js$");return r.test(t)}var u={createScriptURL:function(t){if(s(t))return t;throw r("err")("Violated policy TrustedTypesChromecastScriptURLPolicy: "+t+" is not a Chromecast extension URI.")}},c=r("TrustedTypes").createPolicy("chromecast-extension-uri",u),d=c;l.default=d}),98);
__d("CastingChromecastAPI",["TrustedTypesChromecastScriptURLPolicy"],(function(t,n,r,o,a,i,l){"use strict";var e=18e4,s=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"],u=null,c=function(t){var e=t.appID,n=t.receiverListener,r=t.sessionListener;return f().then(function(t){var o=new t.ApiConfig(new t.SessionRequest(e),r,n,t.AutoJoinPolicy.ORIGIN_SCOPED,t.DefaultActionPolicy.CAST_THIS_TAB);return new Promise(function(e,n){t.initialize(o,e,n)})})},d=function(t){return f().then(function(e){e.addReceiverActionListener(function(n,r){switch(r){case e.ReceiverAction.CAST:t.onCast(n);break;case e.ReceiverAction.STOP:t.onStop();break}})})},m=function(n){return f().then(function(t){var r=new t.SessionRequest(n,[t.Capability.VIDEO_OUT,t.Capability.AUDIO_OUT],e);return new Promise(function(e,n){t.requestSession(e,n,r)})})},p=function(t){return f().then(function(e){return t===e.ReceiverAvailability.AVAILABLE})},_=function(){return f().then(function(e){return e.media.DEFAULT_MEDIA_RECEIVER_APP_ID})},f=function(){return u||(t.chrome?t.chrome.cast&&t.chrome.cast.isAvailable?(u=Promise.resolve(t.chrome.cast),u):(u=Promise.resolve().then(function(){return g()}).then(function(e){return new Promise(function(n,o){t.chrome.cast=t.chrome.cast||{},t.chrome.cast.extensionId=e,t.__onGCastApiAvailable=function(e,r){r?o(r):n(t.chrome.cast)};var a=document.createElement("script");if(a.onerror=o,e==null){o({code:"extension_not_available",description:null,details:null});return}else a.src=r("TrustedTypesChromecastScriptURLPolicy").createScriptURL(y(e));var i=document.head||document.documentElement;if(i==null){o({code:"extension_no_casting_script",description:null,details:null});return}i.appendChild(a)})}),u):(u=Promise.reject({code:"not_supported",description:null,details:null}),u))};async function g(){for(var e=0;e<s.length;e++){var t=s[e],n=await h(t);if(n)return t}return null}function h(e){return new Promise(function(t,n){var r=y(e),o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&t(o.status===200)},o.onerror=function(){t(!1)},o.open("GET",r,!0),o.send()})}function y(e){return"chrome-extension://"+e+"/cast_sender.js"}var C={addReceiverListener:d,getDefaultAppID:_,getIsAvailable:p,getSession:m,initialize:c},b=C;l.default=b}),98);
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1885117")}),98);
__d("CastingChromecastSession",["FBLogger","Promise","err","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n){var o=this;this.$3=null,this.$4=[],this.$5=[],this.$6=[],this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=function(e,t){if(e===o.$2){var n=o.$4.slice();n.forEach(function(e){e(t)})}else o.$6.slice().forEach(function(t){t(r("err")("Namespace does not match. Expected "+o.$2+" but received "+e),"CastingChromecastSession._onMessageReceived")})},this.$1=e,this.$2=t,this.$3=n,n.addMessageListener(this.$2,this.$12)}var o=t.prototype;return o.destroy=function(){var e=this.$3;e!=null&&(e.status!=null&&e.status!=="disconnected"&&r("FBLogger")("comet_cast_sender").mustfix("Destroying receiver session that is not disconnected. Status, %s",e.status),e.removeMessageListener(this.$2,this.$12)),this.$3=null},o.isCasting=function(){return this.$3!=null},o.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"},o.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"},o.disconnect=function(){var t=this;return this.$5.slice().forEach(function(e){e()}),new(e||(e=n("Promise")))(function(e,n){t.$3!=null?t.$3.stop(e,n):e()}).catch(function(e){if(t.$3!=null&&t.$3.status!=="stopped")throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.disconnect")}),e}).finally(function(){var e=t.$3;t.$3=null,e&&e.removeMessageListener(t.$2,t.$12),t.$7.slice().forEach(function(e){e()})})},o.getVolume=function(){var e=this.$13();return e?e.level:null},o.getFriendlyName=function(){return this.$14()},o.setVolume=function(o){var t=this,a=this.$3;return new(e||(e=n("Promise")))(function(e,t){if(a==null){t(r("err")("Cannot set volume without a session"));return}a.setReceiverVolumeLevel(o,e,t)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.setVolume")}),e})},o.isMuted=function(){var e=this.$13();return e?e.muted:null},o.mute=function(){return this.$15(!0)},o.unmute=function(){return this.$15(!1)},o.sendMessage=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The message can not be sent without a session"));return}a.sendMessage(t.$2,o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.sendMessage")}),e})},o.$13=function(){var e,t=(e=this.$3)==null||(e=e.receiver)==null?void 0:e.volume;return t==null?null:t},o.$14=function(){var e;return((e=this.$3)==null?void 0:e.receiver.friendlyName)||null},o.$15=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The muted state can not be set without a session"));return}a.setReceiverMuted(o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession._setIsMuted")}),e})},o.onMessage=function(t){var e=this.$4;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnecting=function(t){var e=this.$5;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onError=function(t){var e=this.$6;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnected=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoading=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoaded=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPlaying=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPaused=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=s}),98);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e!=null&&typeof e=="object"&&typeof e.code=="string"&&e.code===t}function s(e){return e!=null&&typeof e=="object"&&typeof e.code=="string"?r("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:e.code})):r("getErrorSafe")(e)}function u(e,t){e.metadata==null&&(e.metadata=new(r("ErrorMetadata")));var n=e.metadata,o=t==null?void 0:t.videoID;return o!=null&&n.addEntries(["COMET_VIDEO","VIDEO_ID",o]),e}l.isChromecastError=e,l.getCastingErrorSafe=s,l.appendCastingMetadataToExpandedError=u}),98);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1843753"),s=o("FalcoLoggerInternal").create("connected_tv_logging",e),u=s;l.default=u}),98);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=e,this.$2=t,this.$4=!1,this.$3=!1,this.$5=new Set}var a=t.prototype;return a.init=function(){return this.$6!=null?(s||(s=n("Promise"))).reject(r("err")("Scanner can only be initialized once.")):(this.$6=this.$16(),this.$6)},a.ready=function(){return this.$6==null?(s||(s=n("Promise"))).reject(r("err")("Scanner should be initialized.")):this.$6},a.hasSupport=function(){return this.$3},a.hasFoundReceiver=function(){return this.$4},a.getSession=function(){var e=this;return this.$4?(this.$13.slice().forEach(function(e){e()}),this.$17().then(function(t){var n=e.$18(t);return e.$5.add(n),e.$14.slice().forEach(function(e){e(n)}),n}).catch(function(t){throw e.$10.slice().forEach(function(e){e()}),e.$11.slice().forEach(function(e){e()}),t})):(s||(s=n("Promise"))).reject(r("err")("No receivers found"))},a.$16=function(){var e=this;return this.$3=!0,this.$19().then(function(t){return e.$20()}).then(function(t){e.$9.slice().forEach(function(e){e()})}).then(function(t){return e.$21()}).catch(function(t){throw!o("CastingErrorUtils").isChromecastError(t,"not_supported")&&!o("CastingErrorUtils").isChromecastError(t,"extension_not_available")&&!o("CastingErrorUtils").isChromecastError(t,"extension_no_casting_script")&&e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._init")}),t})},a.$21=function(){var e=this,t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=function(n){var t=e.$18(n);e.$14.slice().forEach(function(e){e(t)})},a=function(n){r("promiseDone")(r("CastingChromecastAPIWrapper").getIsAvailable(n).then(function(t){e.$4=t,e.$15.slice().forEach(function(t){t({foundReceiver:e.$4})})}))};return r("CastingChromecastAPIWrapper").initialize({appID:t,receiverListener:a,sessionListener:o}).then(function(){}).catch(function(t){throw e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._initializeApi")}),t})},a.$19=function(){var e=this;return this.$1!=null?(s||(s=n("Promise"))).resolve():r("CastingChromecastAPIWrapper").getDefaultAppID().then(function(t){e.$1=t})},a.$17=function(){var t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=(e||(e=r("performanceAbsoluteNow")))();return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}}),r("CastingChromecastAPIWrapper").getSession(t).then(function(t){return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o)}}),t}).catch(function(t){throw r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o),session_failure_code:typeof t.code=="string"?t.code:null,session_failure_description:t.description}}),t})},a.$18=function(t){var e=this,n=new(r("CastingChromecastSession"))(this.$1||"",this.$2||"",t),o=n.onDisconnecting(function(){e.$12.slice().forEach(function(e){e()})}),a=n.onError(function(t,n){e.$8.slice().forEach(function(e){e(t,n)})}),i=n.onDisconnected(function(){e.$11.slice().forEach(function(e){e()}),e.$5.delete(n),o.remove(),a.remove(),i.remove()});return n},a.$20=function(){var e=this;return r("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(n){e.$7.slice().forEach(function(e){e(n)})},onStop:function(){e.$5.forEach(function(e){return e.disconnect()})}})},a.onCast=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onError=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onInit=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionCancelled=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnecting=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionRequested=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingState",[],(function(t,n,r,o,a,i){"use strict";function e(){return{isCastPending:!1,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}function l(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,type:"video_channel"}}function s(){return{type:"photo"}}function u(){return{currentAssetID:null,currentPlaybackState:null,type:"photo_album"}}i.initialCastingState=e,i.initialVideoChannelExperienceState=l,i.initialPhotoExperienceState=s,i.initialPhotoAlbumExperienceState=u}),66);
__d("TV2PhotoAlbumReportedState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoAlbumReportedState"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoAlbumReportedState")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoAlbumReportedState:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"media_state",js:"media_state",typ:y("MediaState")}],"any"),MediaParameters:g([{json:"album_id",js:"album_id",typ:""}],"any"),MediaState:g([{json:"photo_state",js:"photo_state",typ:f(void 0,y("PhotoMediaState"))},{json:"video_state",js:"video_state",typ:f(void 0,y("VideoMediaState"))}],"any"),PhotoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"photo_id",js:"photo_id",typ:""},{json:"photo_playback_state",js:"photo_playback_state",typ:y("PhotoPlaybackState")},{json:"position_ms",js:"position_ms",typ:3.14}],"any"),VideoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"position_ms",js:"position_ms",typ:3.14},{json:"video_id",js:"video_id",typ:""},{json:"video_playback_state",js:"video_playback_state",typ:y("VideoPlaybackState")}],"any"),PhotoPlaybackState:["paused","play"],VideoPlaybackState:["ended","paused","play","seeking","unknown"]};a.exports={TV2PhotoAlbumReportedStateToJson:l,toTV2PhotoAlbumReportedState:e}}),null);
__d("TV2UniqueIDs",["guid"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){var n,r=(n=e.get(t))!=null?n:0;return e.set(t,r+1),""+t+r.toString(36)}function u(){return s("id_tv2_vcr_")}function c(){return s("id_tv2_veqe_")}function d(){return s("id_tv2_toast_")}function m(){return s("id_tv2_rvr_")}function p(){return r("guid")()}l.makeTV2VideoCastRequestID=u,l.makeTV2VideoExperienceQueueEntryID=c,l.makeTV2ToastID=d,l.makeTV2RelatedVideosRequestID=m,l.makeTV2ChainingSessionID=p}),98);
__d("getTV2QueryStringCheatcodeValue",[],(function(t,n,r,o,a,i){"use strict";function e(e){try{var n=new RegExp("\\b"+e+"=([^&]*)"),r=n.exec(t.location.search);return!r||r[1]==null?null:r[1]}catch(e){return null}}i.default=e}),66);
__d("getTV2QueryStringCheatcode",["getTV2QueryStringCheatcodeValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{return r("getTV2QueryStringCheatcodeValue")(e)==="1"}catch(e){return!1}}l.default=e}),98);
__d("getTV2DebuggingEnabled",["getTV2QueryStringCheatcode"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("getTV2QueryStringCheatcode")("debugging")}l.default=e}),98);
__d("TV2CommsParseUtils",["TV2PhotoAlbumReportedState","TV2UniqueIDs","err","getErrorSafe","getTV2DebuggingEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===null?"null":e===""?"empty string":Array.isArray(e)?"array":typeof e=="object"?"object with keys: "+JSON.stringify(Object.keys(e).sort()):typeof e}function s(t,n,o){if(typeof t!="string"||t===""){var a=r("err")("Message parse error: %s expected JSON string, got %s",o,e(t));throw a}var i;try{return i=JSON.parse(t),n(i,o)}catch(e){if(typeof e=="object"&&e!=null&&"messageFormat"in e&&typeof e.messageFormat=="string"&&"messageParams"in e&&Array.isArray(e.messageParams))throw e;var l=r("getErrorSafe")(e),s=r("err")("Message parse error: %s expected JSON string, got error: %s",o,l.message);throw s}}function u(t,n){if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function c(t,n){if(t==null)return null;if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function d(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t}function m(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.map(function(e){return _(e,n)})}function p(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.filter(Boolean).map(function(e){return _(e,n)})}function _(t,n){if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected non-empty string, got %s",n,e(t));throw o}return t}function f(t,n){if(t==null)return null;if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected optional non-empty string, got %s",n,e(t));throw o}return t}function g(t,n){if(t==null)return null;if(typeof t!="string"){var o=r("err")("Message parse error: %s expected optional string, got %s",n,e(t));throw o}return t}function h(t,n){if(t==null)return null;if(!(typeof t=="number"&&Number.isFinite(t)||typeof t=="string"&&t!=="")){var o=r("err")("Message parse error: %s expected optional non-empty string or number, got %s",n,e(t));throw o}return t}function y(t,n){if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected finite number, got %s",n,e(t));throw o}return t}function C(t,n){if(t==null)return null;if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected optional finite number, got %s",n,e(t));throw o}return t}function b(e,t){return e==="true"||e===!0}function v(e,t,n){return n===void 0&&(n=!1),e==null?n:e===!0}function S(t,n){if(typeof t!="boolean"){var o=r("err")("Parse error: %s expected boolean, got %s",n,e(t));throw o}return t}function R(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=_(n.uri,t+".uri"),o=y(n.width,t+".width"),a=y(n.height,t+".height");return{height:a,uri:r,width:o}}function L(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=u(n.image,t+".image"),o=_(r.uri,t+".image.uri");return{uri:o}}function E(e,t){if(e==null)return null;var n=d(e,t);return n.map(function(e,t){return _(e,"["+t+"]")})}function k(e,t){return s(e,function(e,t){var n=d(e,t);return n.map(function(e,n){var r=t+"."+n;return T(u(e,r),r)})},t)}function I(e,t){return s(e,function(e,t){return T(u(e,t),t)},t)}function T(e,n){var a=_(e.access_token,n+".access_token"),i=String(h(e.app_id,n+".app_id")),l=g(e.app_version,n+".app_version"),s=R(e.background_image,n+".background_image"),u=f(e.channel_token,n+".channel_token"),c=f(e.channel_session_id,n+".channel_session_id"),d=g(e.end_cursor,n+".end_cursor")||null,m=v(e.from_next_video_query,n+".from_next_video_query"),y=v(e.is_ad,n+".is_ad"),C=E(e.dash_prefetched_representation_ids,n+".dash_prefetched_representation_ids"),b=f(e.entry_point,n+".entry_point"),S=f(e.player_origin===""?null:e.player_origin,n+".player_origin"),k=f(e.player_suborigin===""?null:e.player_suborigin,n+".player_suborigin"),I=L(e.preferred_thumbnail,n+".preferred_thumbnail"),T=f(e.video_channel_id,n+".video_channel_id"),D=_(e.root_video_id,n+".root_video_id"),x=r("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(t.location.search):null,$=x&&x[1]?x[1]:_(e.video_id,n+".video_id"),P=e.tracking_codes!=null?p(e.tracking_codes,n+".tracking_codes"):null;return{accessToken:a,appID:i,appVersion:l,backgroundImage:s,chainingEnabled:!1,channelSessionID:c,channelToken:u,dashPrefetchedRepresentationIDs:C,endCursor:d,entryPoint:b,fromNextVideoQuery:m,isAd:y,playerOrigin:S,playerSuborigin:k,preferredThumbnail:I,rootVideoID:D,startTimestamp:0,trackingCodes:P,videoCastRequestID:o("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:T,videoID:$}}function D(t,n){var o=u(t,n),a=_(o.type,n+".type");switch(a){case"version_response":return o;case"version_launch_response":return o;case"experience_state":return o;case"command_result":return o;case"duration_change":return o;case"status_update":return o;case"experience_status_update":return o}var i=r("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",e(o));throw i}function x(e){return s(e,D,".")}function $(t){var n=x(t);switch(n.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return n}var o=r("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",e(n));throw o}function P(e){return o("TV2PhotoAlbumReportedState").toTV2PhotoAlbumReportedState(e)}l.parseJSONString=s,l.parseObject=u,l.parseOptionalObject=c,l.parseArray=d,l.parseStringArray=m,l.parseTrackingCodes=p,l.parseNonEmptyString=_,l.parseOptionalNonEmptyString=f,l.parseOptionalString=g,l.parseNumber=y,l.parseOptionalNumber=C,l.parseOptionalStringishBoolean=b,l.parseOptionalBoolean=v,l.parseBoolean=S,l.parseVideoCastingPayloadBackgroundImage=R,l.parseVideoCastingPayloadPreferredThumbnail=L,l.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=k,l.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=I,l.parseVideoCastingPayloadAsTV2VideoCastRequest=T,l.parseTV2CommsFBAppOutboundMessageFromJSON=x,l.parseCastingReceiverResponseMessageFromJSON=$,l.parseCastingReceiverPhotoAlbumReportedState=P}),98);
__d("fetchCtvCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29808457688745543"}),null);
__d("fetchCtvCastPayloadQuery.graphql",["fetchCtvCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"mediaParameters"},r={defaultValue:null,kind:"LocalArgument",name:"requestID"},o=[{alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Literal",name:"caster_id",value:0},{kind:"Variable",name:"media_parameters_json",variableName:"mediaParameters"},{kind:"Literal",name:"receiver_app_id",value:0x5bc08d3f803b9},{kind:"Variable",name:"request_id",variableName:"requestID"},{kind:"Literal",name:"uses_secure_connection",value:!0}],kind:"ScalarField",name:"ctv_cast_payload",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"fetchCtvCastPayloadQuery",selections:o,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,r,t],kind:"Operation",name:"fetchCtvCastPayloadQuery",selections:o},params:{id:n("fetchCtvCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchCtvCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchCtvCastPayload",["CometRelay","err","fetchCtvCastPayloadQuery.graphql","getErrorSafe","guid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("fetchCtvCastPayloadQuery.graphql");function u(e){var t=e.castSessionID,n=e.environment;return o("CometRelay").fetchQuery(n,s,{castSessionID:t,mediaParameters:"{}",requestID:r("guid")()}).toPromise().then(function(e){return e!=null&&e.ctv_cast_payload!=null&&typeof e.ctv_cast_payload=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}function c(e){var t=e.albumID,n=e.castSessionID,a=e.environment;return o("CometRelay").fetchQuery(a,s,{castSessionID:n,mediaParameters:JSON.stringify({album_id:t}),requestID:r("guid")()}).toPromise().then(function(e){return typeof(e==null?void 0:e.ctv_cast_payload)=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.fetchPhotoCastPayload=u,l.fetchAlbumCastPayload=c}),98);
__d("fetchVideoCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9544699068932467"}),null);
__d("fetchVideoCastPayloadQuery.graphql",["fetchVideoCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},r={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},o={defaultValue:null,kind:"LocalArgument",name:"videoID"},a=[{kind:"Variable",name:"id",variableName:"videoID"}],i={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,t,r,e],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("fetchVideoCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchVideoCastPayload",["CometRelay","Promise","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("fetchVideoCastPayloadQuery.graphql");function c(e){var t=e.castSessionID,a=e.environment,i=e.playerOrigin,l=e.playerSubOrigin,c=e.videoID;return r("gkx")("20113")?(s||(s=n("Promise"))).resolve({type:"video_cannot_be_casted"}):o("CometRelay").fetchQuery(a,u,{castSessionID:t,playerOrigin:i,playerSubOrigin:l,videoID:c}).toPromise().then(function(e){return e==null||e.video==null||e.video.video_cast_payload==null?{type:"video_cannot_be_casted"}:typeof e.video.video_cast_payload=="string"?{payload:e.video.video_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.default=c}),98);
__d("CastingController",["CastingErrorUtils","CastingState","FBLogger","Promise","SubscriptionsHandler","TV2CommsParseUtils","err","fetchCtvCastPayload","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","removeFromArray","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="PhotoAlbum",c="ChannelVideo",d="Photo",m=(function(){function t(e,t){var n=this;this.$5=[],this.$6=[],this.$7=[],this.$9=function(){var e=o("CastingState").initialCastingState();n.$12(e),n.$13(null)},this.$10=function(e){switch(e.type){case"status_update":n.$16(e);break;case"experience_status_update":n.$17(e);break;default:break}},this.$11=function(e,t){var a;if(o("CastingErrorUtils").isChromecastError(e,"cancel"))r("FBLogger")("fbtv").warn("ChromecastError while casting. Received ChromecastError with cancel code.");else if(((a=n.$2)==null?void 0:a.type)==="video_channel"){var i,l=(i=n.$2)==null?void 0:i.currentVideoID,s=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),babelHelpers.extends({},l!=null?{videoID:l}:{}));r("FBLogger")("comet_cast_sender").catching(s).mustfix("Receiver error at %s while playing video channel",t),r("promiseDone")(n.$4.stopCasting())}else{var u,c=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),{}),d=((u=n.$2)==null?void 0:u.type)||"";r("FBLogger")("comet_cast_sender").catching(c).mustfix("Receiver error at %s while playing in experience %s",t,d),r("promiseDone")(n.$4.stopCasting())}},this.$1=o("CastingState").initialCastingState(),this.$2=null,this.$3=t,this.$4=e,this.$8=new(r("SubscriptionsHandler")),this.$8.addSubscriptions(this.$4.onReceiverDisconnected(this.$9),this.$4.onSessionDisconnected(this.$9),this.$4.onSessionMessage(this.$10),this.$4.onError(this.$11))}var a=t.prototype;return a.destroy=function(){this.$8.release()},a.getCastingState=function(){return this.$1},a.getCastingExperienceState=function(){return this.$2},a.setCastingState=function(t){this.$1=t},a.setCastingExperienceState=function(t){this.$2=t},a.subscribeToCastingStateChange=function(t){var e=this;return this.$5.push(t),function(){r("removeFromArray")(e.$5,t)}},a.subscribeToCastingExperienceStateChange=function(t){var e=this;return this.$6.push(t),function(){r("removeFromArray")(e.$6,t)}},a.subscribeToCastingEvent=function(t){var e=this;return this.$7.push(t),function(){r("removeFromArray")(e.$7,t)}},a.startPlayVideoNow=function(a){var t=this,i=a.environment,l=a.origin,u=a.position,d=a.subOrigin,m=a.videoID;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"cast_requested",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([r("fetchVideoCastPayload")({castSessionID:this.$3,environment:i,playerOrigin:l,playerSubOrigin:d,videoID:m}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="video_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("video_cannot_be_casted"),{videoID:m})).mustfix("The video is not eligible to be casted. The cast request is ignored."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{videoID:m})).mustfix("There was a failure retrieving video cast payload. Video failed to play."),(e||(e=n("Promise"))).resolve();var s=t.$4.isCasting(c),d=null;return s?d=t.$4.playVideoNow({position:u},i.payload):d=t.$4.startCasting(c,{position:u},i.payload),d.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialVideoChannelExperienceState();t.$13(n)})}).catch(function(e){t.$14({data:{type:"cast_failed",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{videoID:m})).mustfix("Failed to cast video.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startPhotoCasting=function(a){var t=this,i=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"photo_cast_requested"},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchPhotoCastPayload({castSessionID:this.$3,environment:i}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving photo cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(d,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e),t.$13(o("CastingState").initialPhotoExperienceState())})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to start photo casting session.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startAlbumSlideshow=function(a){var t=this,i=a.albumID,l=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchAlbumCastPayload({albumID:i,castSessionID:this.$3,environment:l}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="album_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("album_cannot_be_casted"),{})).mustfix("The album is not eligible to be casted."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving album cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(u,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialPhotoAlbumExperienceState();t.$13(n)})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to cast album.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.disconnect=function(){r("promiseDone")(this.$4.stopCasting())},a.play=function(){r("promiseDone")(this.$4.playVideo())},a.pause=function(){r("promiseDone")(this.$4.pauseVideo())},a.setVolume=function(t){r("promiseDone")(this.$4.setVolume(t))},a.mute=function(){r("promiseDone")(this.$4.mute())},a.unmute=function(){r("promiseDone")(this.$4.unmute())},a.seek=function(t){r("promiseDone")(this.$4.seekVideo(t))},a.showSingleMedia=function(t){var e=null;switch(t.type){case"photo":e={photo_id:t.photoID};break;case"video":e={video_id:t.videoID};break;default:t.type;return}r("promiseDone")(this.$4.showPhoto({media_parameters:e,request_id:r("uuidv4")()}))},a.playAlbumSlideshow=function(){r("promiseDone")(this.$4.playAlbumSlideshow())},a.pauseAlbumSlideshow=function(){r("promiseDone")(this.$4.pauseAlbumSlideshow())},a.nextPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.nextPhotoAlbumSlideshow())},a.previousPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.previousPhotoAlbumSlideshow())},a.$12=function(t){t!==this.$1&&(this.$1=t,this.$5.slice().forEach(function(e){e(t)}))},a.$13=function(t){t!==this.$2&&(this.$2=t,this.$6.slice().forEach(function(e){e(t)}))},a.$14=function(t){this.$7.slice().forEach(function(e){e(t)})},a.$16=function(t){var e=this.$1,n=this.$2;if(n!=null&&n.type==="video_channel"){var o=t.data.video_id,a=this.$4.getVolume()||0,i=this.$4.isMuted()||!1;o!=null&&this.$14({data:{playbackState:t.data.state,playerInfo:(t==null?void 0:t.player_info)||null,receiverInfo:(t==null?void 0:t.receiver_info)||null,type:"video_status_update",videoID:o},timestamp:(s||(s=r("performanceAbsoluteNow")))()});var l={receiverIsConnected:!0,receiverIsMuted:i,receiverVolume:a};if(o==null)this.$12(babelHelpers.extends({},e,l)),this.$13(babelHelpers.extends({},n,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null}));else{var u=babelHelpers.extends({},e,l);this.$12(u),this.$13(babelHelpers.extends({},n,{currentDuration:t.data.duration!=null?t.data.duration:n.currentDuration,currentPlaybackState:t.data.state,currentPosition:t.data.position,currentVideoID:o}))}}},a.$17=function(t){var e=this.$2;if(e!=null&&e.type==="photo_album"&&t.data.name==="PhotoAlbum"){var n,r,a,i=o("TV2CommsParseUtils").parseCastingReceiverPhotoAlbumReportedState(t.data.payload),l=i.media_state,s=((n=(r=l.photo_state)==null?void 0:r.photo_id)!=null?n:(a=l.video_state)==null?void 0:a.video_id)||null,u=this.$18(l);this.$13(babelHelpers.extends({},e,{currentAssetID:s,currentPlaybackState:u}))}},a.$15=function(){return{receiverFriendlyName:this.$4.getFriendlyName()||null,receiverIsMuted:this.$4.isMuted()||null,receiverVolume:this.$4.getVolume()||0}},a.$18=function(t){return t.photo_state!=null?t.photo_state.photo_playback_state==="play"?"play":"paused":t.video_state!=null?["play","seeking"].includes(t.video_state.video_playback_state)?"play":"paused":null},t})();l.default=m}),98);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$4=function(e){switch(e.data.type){case"cast_requested":t.logWithAvailableContext({event:"cast_requested",video_id_override:e.data.videoID}),t.$5(e);break;case"photo_cast_requested":t.logWithAvailableContext({event:"photo_cast_requested"}),t.$5(e);break;case"cast_failed":t.$5(e);break;case"video_status_update":{t.$6(e.data.receiverInfo,e.data.playerInfo),t.$5(e);break}default:break}},this.$1=null,this.$2=null,this.$3={cast_session_id:e,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var t=e.prototype;return t.destroy=function(){this.$1!=null&&this.$1(),this.$1=null},t.bindToCastingController=function(t){this.$1=t.subscribeToCastingEvent(this.$4)},t.logWithAvailableContext=function(t){var e=this;r("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers.extends({},e.$3,t)})},t.$5=function(t){var e=t.data;switch(e.type){case"cast_requested":this.$2={data:e,timestamp:t.timestamp};break;case"cast_failed":{var n=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(n!=null?t.timestamp-n.timestamp:0),video_id_override:e.videoID}),this.$2=null;break}case"video_status_update":{var r=this.$2;if(r==null)break;var o=r.data.videoID;e.videoID===o&&e.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(t.timestamp-r.timestamp)}),this.$2=null):e.videoID!==o&&(this.$2=null);break}}},t.$6=function(t,n){var e=(t==null?void 0:t.third_party_app_id)||null,r=(t==null?void 0:t.cast_receiver_logger_session_id)||null,o=(t==null?void 0:t.is_google_cast_bg)||null,a=(t==null?void 0:t.os_version)||null,i=(t==null?void 0:t.web_client_revision)||null,l=(n==null?void 0:n.player_instance_key)||null,s=(n==null?void 0:n.player_version)||null;this.$3=babelHelpers.extends({},this.$3,{is_google_cast_bg:o,third_party_app_id:e,tv_os_version:a,tv_player_instance_key:l,tv_player_version:s,tv_session_id:r,tv_web_client_revision:i})},e})();l.default=e}),98);
__d("TV2MessageTypes",[],(function(t,n,r,o,a,i){"use strict";var e="urn:x-cast:com.facebook.fb",l="urn:x-cast:com.google.cast.media";i.FBAPP_CAST_PROTOCOL_NAMESPACE=e,i.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=l}),66);
__d("TV2PhotoShowRequest",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoShowRequest"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoShowRequest")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoShowRequest:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"request_id",js:"request_id",typ:""}],"any"),MediaParameters:g([{json:"photo_id",js:"photo_id",typ:f(void 0,"")},{json:"video_id",js:"video_id",typ:f(void 0,"")}],"any")};a.exports={TV2PhotoShowRequestToJson:l,toTV2PhotoShowRequest:e}}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","FBLogger","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","TV2PhotoShowRequest","getErrorSafe","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s="1.2.0",u=(function(){function t(e){var t=this;this.$5=null,this.$6=null,this.$10=null,this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$16=[],this.$17=[],this.$18=[],this.$19=[],this.$4=new(r("CastingChromecastScanner"))(e,o("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE),this.$2=null,this.$1=!1,this.$3=0,this.$6=null,this.$9=new Map,this.$20=new(r("SubscriptionsHandler")),this.$20.addSubscriptions(this.$4.onStatusChanged(function(e){var n=e.foundReceiver;t.$15.slice().forEach(function(e){e(!!n)})}),this.$4.onSessionDisconnected(function(){t.$21(),t.$14.slice().forEach(function(e){e()})}),this.$4.onSessionStarted(function(e){t.$22(e)}),this.$4.onError(function(e,n){t.$11.slice().forEach(function(t){t(e,n)})})),this.$7=this.$4.init(),r("promiseDone")(this.$7.then(function(){t.$2=!0,t.$1=!0,t.$13.slice().forEach(function(e){e()})},function(e){t.$2=!1,t.$12.slice().forEach(function(t){t(e)})}))}var a=t.prototype;return a.ready=function(){return this.$7},a.hasSupport=function(){return this.$2},a.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()},a.isCasting=function(t){var e=!!this.$5&&this.$5.isCasting();return e&&t!=null&&(e=this.$6!=null&&this.$6.indexOf(t)>=0),e},a.getSession=function(){var e=this;return this.ready().then(function(){var t=e.$5;t!=null&&!t.isConnected()&&e.$21()}).then(function(){return e.$5?e.$5:(e.$8||(e.$8=e.$23()),e.$8)}).catch(function(t){throw e.$11.slice().forEach(function(e){e(t,"CastingReceiverManager.getSession")}),t}).finally(function(){e.$8=null})},a.startCasting=function(t,n,r){var e=this;return this.$24(t,n,r).then(function(t){t.success?e.$6=t.target:e.$6=null})},a.stopCasting=function(){var t=this;return this.isCasting()?this.ready().then(function(){var e=t.$5;return e!=null&&e.isDisconnected()&&t.$21(),t.$5}).then(function(t){return t==null?(e||(e=n("Promise"))).resolve(null):t.disconnect()}).then(function(){t.$21()}):(e||(e=n("Promise"))).resolve()},a.playVideoNow=function(r,o){return this.isCasting()?this.$25("next_video",babelHelpers.extends({},r,{auto_advance:!0}),o).then(function(){}):(e||(e=n("Promise"))).resolve()},a.skipToNextVideo=function(){return this.isCasting()?this.$25("skip_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playVideo=function(r){return this.isCasting()?this.$25("play_video",{position:r||0}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseVideo=function(){return this.isCasting()?this.$25("pause_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.seekVideo=function(r){return this.isCasting()?this.$25("seek_video",{position:r}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.showPhoto=function(r){return this.isCasting()?this.$25("show_photo",void 0,o("TV2PhotoShowRequest").TV2PhotoShowRequestToJson(r),"Photo").then(function(){}):(e||(e=n("Promise"))).resolve()},a.stopVideo=function(){return this.isCasting()?this.$25("stop_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playAlbumSlideshow=function(){return this.isCasting()?this.$25("play_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseAlbumSlideshow=function(){return this.isCasting()?this.$25("pause_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.nextPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("next_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.previousPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("previous_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()},a.getVolume=function(){return this.$5==null?null:this.$5.getVolume()},a.setVolume=function(r){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.setVolume(r)},a.isMuted=function(){return!this.isCasting()||this.$5==null?null:this.$5.isMuted()},a.mute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.mute()},a.unmute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.unmute()},a.$26=function(){var e=this,t=this.$27();return this.$28(function(e){return{data:{client_cast_session:t,version:s},num:e,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version response is missing data");return e.data})},a.$24=function(t,n,o){var e=this,a=this.$27();return this.$28(function(e){return{data:{client_cast_session:a,name:t,params:n,payload:o,version:s},num:e,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_launch_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_launch_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version launch response is missing data");return e.data})},a.$30=function(){var t=this;return this.$6!=null?(e||(e=n("Promise"))).resolve(this.$6):this.getSession().then(function(e){return t.$26()}).then(function(e){var n=null;if(typeof e.currently_running_experience=="object"&&(n=e.currently_running_experience),n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Session has no target");return t.$6=n,t.$6})},a.$27=function(){var e=null;return localStorage&&(e=localStorage.getItem("CastingSessionKey")),e==null&&(e=r("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",e)),e},a.$28=function(t){var e=this.$3+=2;return this.getSession().then(function(n){if(n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message can not be sent without a session");var o=t(e);return n.sendMessage(o)}).then(function(){return{messageNum:e}})},a.$29=function(a){return this.getSession().then(function(t){if(t==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message cannot be received without a session");return new(e||(e=n("Promise")))(function(e,n){var r=t.onMessage(function(t){try{var i=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);if(i.type==="version_response"||i.type==="version_launch_response"||i.type==="experience_state"||i.type==="command_result"){var l=!a||a(i);l&&(r.remove(),e(i))}}catch(e){r.remove(),n(e)}})})})},a.$25=function(t,n,o,a){var e=this;return this.$30().then(function(r){return e.$28(function(e){return{data:{cmd:t,name:a,params:n,payload:o},num:e,target:r,timestamp:Date.now(),type:"experience_command"}})}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="command_result")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "command_result"');return e.data})},a.$23=function(){var e=this;return this.$4.getSession().then(function(t){return e.$5==null&&(e.$5=t),e.$5})},a.$22=function(t){var e=this;this.$5=t;var n="extension";this.$8&&(n="site"),r("promiseDone")(this.$26().then(function(a){var i=a.success;if(i){var l=null;typeof a.currently_running_experience=="object"&&(l=a.currently_running_experience),l!=null&&(e.$6=l),e.$18.slice().forEach(function(r){r(t,{session:t,source:n,success:i,target:e.$6})}),e.$10=t.onMessage(function(t){try{var n=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);e.$17.slice().forEach(function(e){e(n)})}catch(t){var a=r("getErrorSafe")(t);e.$11.slice().forEach(function(e){e(a,"CastingReceiverManager._onSessionStartedHandler")})}})}}))},a.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var e=this.$5;e!=null&&e.destroy(),this.$5=null,this.$6=null},a.onError=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceNotSupported=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceReady=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverDisconnected=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$16;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionMessage=function(t){var e=this.$17;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$18;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStopView=function(t){var e=this.$19;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","CurrentUser","ExecutionEnvironment","FBLogger","Promise","guid","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useContext,m=c.useEffect,p=c.useState,_=null;function f(){if(_!=null)return _;var e=new(r("CastingReceiverManager"))("AAF8F49E"),t=r("guid")(),n=new(r("CastingController"))(e,t),o=new(r("CastingEventReporter"))(t);return o.bindToCastingController(n),_={castingController:n,castingEventReporter:o,castingReceiverManager:e},_}function g(){var e=h(),t=e.castingReceiverManager;return t}function h(){var t=o("react-compiler-runtime").c(1);if((s||(s=r("ExecutionEnvironment"))).canUseDOM&&r("CurrentUser").isLoggedIn()){var a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=f(),t[0]=a):a=t[0],a}throw new(e||(e=n("Promise")))(y)}function y(){}function C(){var e=h(),t=e.castingController;return t}function b(){var e=o("react-compiler-runtime").c(6),t=g(),n=d(o("CastingContext").SetCastingControllerContext),r=p(!1),a=r[0],i=r[1],l=p(!1),s=l[0],u=l[1],c,_;e[0]!==t?(c=function(){var e=t.onExperienceReady(function(){i(t.hasSupport()||!1)});return i(t.hasSupport()||!1),function(){return e.remove()}},_=[t],e[0]=t,e[1]=c,e[2]=_):(c=e[1],_=e[2]),m(c,_);var f,h;return e[3]!==t?(f=function(){var e=t.onReceiverStatusChanged(function(){u(t.hasFoundReceiver()||!1)});return u(t.hasFoundReceiver()||!1),function(){return e.remove()}},h=[t],e[3]=t,e[4]=f,e[5]=h):(f=e[4],h=e[5]),m(f,h),!(n==null||!a||!s)}function v(){var e=o("react-compiler-runtime").c(4),t=C(),n=d(o("CastingContext").SetCastingControllerContext);if(n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Casting has to be initialized inside CastingProvider.");var a,i;e[0]!==t||e[1]!==n?(a=function(){n(t)},i=[n,t],e[0]=t,e[1]=n,e[2]=a,e[3]=i):(a=e[2],i=e[3]),m(a,i)}l.useCastingController=C,l.useIsCastAvailable=b,l.useCastingInitializeIfNecessary=v}),98);
__d("VideoPlayerCastControlIcon.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","FBLogger","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","react-compiler-runtime","useCometLazyDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useContext,f=r("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControlIcon.react");function g(e){var t,n=o("react-compiler-runtime").c(14),a=e.subOrigin;o("CastingControllerHooks").useCastingInitializeIfNecessary();var i=(t=(c||(c=o("VideoPlayerHooks"))).useVideoFbid())!=null?t:"",l=(c||(c=o("VideoPlayerHooks"))).useController(),m=o("CometRelay").useRelayEnvironment(),p=o("CastingControllerHooks").useCastingController(),g=_(r("CometWatchAndScrollVideoContext")),h=r("useCometLazyDialog")(f),y=h[0],C=g==null?void 0:g.videoID,b;n[0]!==p||n[1]!==m||n[2]!==a||n[3]!==l||n[4]!==i?(b=function(){if(i!=null){var e=l.getPlayheadPosition();p.startPlayVideoNow({environment:m,origin:"video_home",position:e,subOrigin:a,videoID:i})}else r("FBLogger")("comet_video_player").mustfix("Could not transition to Cast player because videoID was null")},n[0]=p,n[1]=m,n[2]=a,n[3]=l,n[4]=i,n[5]=b):b=n[5];var v=b,S;n[6]!==v||n[7]!==y||n[8]!==C?(S=function(){C!=null?y({onClose:r("emptyFunction"),onContinue:v,startingVideoType:"cast"},r("emptyFunction")):v()},n[6]=v,n[7]=y,n[8]=C,n[9]=S):S=n[9];var R=S,L;n[10]===Symbol.for("react.memo_cache_sentinel")?(L=s._(/*BTDS*/"Cast video to your TV"),n[10]=L):L=n[10];var E=L,k;n[11]===Symbol.for("react.memo_cache_sentinel")?(k=o("fbicon")._(u("788899"),20),n[11]=k):k=n[11];var I;return n[12]!==R?(I=d.jsx(r("VideoPlayerControlIcon.react"),{color:"white",icon:k,label:E,onPress:R,tooltip:E}),n[12]=R,n[13]=I):I=n[13],I}l.default=g}),226);
__d("VideoPlayerCastControl.react",["CastingControllerHooks","VideoPlayerCastControlIcon.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.subOrigin,a=o("CastingControllerHooks").useIsCastAvailable()&&!r("gkx")("20113");if(!a)return null;var i;return t[0]!==n?(i=s.jsx(r("VideoPlayerCastControlIcon.react"),{subOrigin:n}),t[0]=n,t[1]=i):i=t[1],i}l.default=u}),98);/*FB_PKG_DELIM*/
__d("BaseBlurryImagePreview.react",["CometVisualCompletionAttributes","getComputedStyle","gkx","react","react-compiler-runtime","useSetAttributeRef"],(function(t,n,r,o,a,i,l){"use strict";var e=["blur","previewData","alt","height","style","width"],s,u,c=u||(u=o("react")),d=u,m=d.useId,p=d.useLayoutEffect,_=d.useRef,f=d.useState;function g(t){var n=o("react-compiler-runtime").c(44),a,i,l,u,d,g,h;n[0]!==t?(i=t.blur,d=t.previewData,a=t.alt,l=t.height,g=t.style,h=t.width,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=g,n[7]=h):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],g=n[6],h=n[7]);var y;n[8]!==g?(y=g!=null?g:{},n[8]=g,n[9]=y):y=n[9];var C=y,b=C.height,v=C.width,S=i!=null?i:1.2,R=m(),L=r("useSetAttributeRef")("id",R),E="url(#"+R+")",k=r("useSetAttributeRef")("filter",E),I=m(),T=_(null),D=f(l!==void 0||b!==void 0||h!==void 0||v!==void 0),x=D[0],$=D[1],P=r("gkx")("6648"),N=P?r("CometVisualCompletionAttributes").IGNORE_LATE_MUTATION["data-visualcompletion"]:void 0,M,w;n[10]!==l||n[11]!==d.height||n[12]!==d.width||n[13]!==b||n[14]!==v||n[15]!==h?(M=function(){var e=T.current;if(e instanceof SVGSVGElement){if(l!==void 0||b!==void 0||h!==void 0||v!==void 0){$(!0);return}var t=e.style.display,n=(s||(s=r("getComputedStyle")))(e);e.style.display="none",$(n!=null&&(n.height!==d.height+"px"||n.width!==d.width+"px")),e.style.display=t}},w=[l,d.height,d.width,b,v,h],n[10]=l,n[11]=d.height,n[12]=d.width,n[13]=b,n[14]=v,n[15]=h,n[16]=M,n[17]=w):(M=n[16],w=n[17]),p(M,w);var A=a!=null?I:null,F=l!=null?l:x?void 0:d.height,O="0 0 "+d.width+" "+d.height,B=h!=null?h:x?void 0:d.width,W;n[18]!==a||n[19]!==I?(W=a!=null&&c.jsx("title",{id:I,children:a}),n[18]=a,n[19]=I,n[20]=W):W=n[20];var q;n[21]!==S?(q=c.jsx("feGaussianBlur",{edgeMode:"duplicate",stdDeviation:S}),n[21]=S,n[22]=q):q=n[22];var U;n[23]===Symbol.for("react.memo_cache_sentinel")?(U=c.jsx("feComponentTransfer",{children:c.jsx("feFuncA",{tableValues:"1 1",type:"discrete"})}),n[23]=U):U=n[23];var V;n[24]!==R||n[25]!==L||n[26]!==q?(V=c.jsxs("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",id:R,ref:L,suppressHydrationWarning:!0,children:[q,U]}),n[24]=R,n[25]=L,n[26]=q,n[27]=V):V=n[27];var H;n[28]!==E||n[29]!==k||n[30]!==d.dataURI||n[31]!==d.height||n[32]!==d.width?(H=c.jsx("image",{filter:E,height:d.height,ref:k,suppressHydrationWarning:!0,width:d.width,x:"0",xlinkHref:d.dataURI,y:"0"}),n[28]=E,n[29]=k,n[30]=d.dataURI,n[31]=d.height,n[32]=d.width,n[33]=H):H=n[33];var G;return n[34]!==u||n[35]!==g||n[36]!==V||n[37]!==H||n[38]!==A||n[39]!==F||n[40]!==O||n[41]!==B||n[42]!==W?(G=c.jsxs("svg",babelHelpers.extends({},u,{"aria-labelledby":A,"data-visualcompletion":N,height:F,preserveAspectRatio:"none",ref:T,role:"img",style:g,viewBox:O,width:B,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[W,V,H]})),n[34]=u,n[35]=g,n[36]=V,n[37]=H,n[38]=A,n[39]=F,n[40]=O,n[41]=B,n[42]=W,n[43]=G):G=n[43],G}l.default=g}),98);
__d("BaseToastAnimationInternal.react",["react","stylex","useFadeEffect","useMergeRefs","useToasterStateManager","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useState,_=100,f={mount:{opacity:"x1hc1fzr",transform:"x3oybdh",transitionDuration:"xu6gjpd",transitionTimingFunction:"x7lz9yc",$$css:!0},root:{opacity:"xg01cxk",transitionDuration:"x16rnrhc",transitionProperty:"xwcsmn1",transitionTimingFunction:"xbxq160",$$css:!0}},g={bottom:{transform:"xswo3hg",$$css:!0},top:{transform:"x1cg7zye",$$css:!0}};function h(t){var n=t.children,o=t.expired,a=o===void 0?!1:o,i=t.id,l=t.position,s=t.toasterPosition,c=s===void 0?"bottom":s,h=t.xstyle,y=p(!1),C=y[0],b=y[1],v=r("useToasterStateManager")(),S=u.Children.only(n),R=d(function(){v.resetTimer(i)},[i,v]),L=d(function(){v.stopTimer(i)},[i,v]),E=d(function(){v.shown(i)},[i,v]),k=d(function(){v.hidden(i)},[i,v]),I=d(function(e){S.props.onActionPress!=null&&S.props.onActionPress(e),e.defaultPrevented||v.expire(i)},[S.props,i,v]),T=r("useVisibilityObserver")({onHidden:k,onVisible:E,options:{activityMonitorOverride:null}}),D=r("useFadeEffect")(!a),x=D[0],$=D[1],P=D[2],N=r("useMergeRefs")(P,T);return m(function(){$===!0&&b(!0)},[$]),x?u.jsx("li",{className:(e||(e=r("stylex")))(f.root,g[c],$&&f.mount,h),onBlur:R,onFocus:L,onMouseEnter:L,onMouseLeave:R,ref:N,style:{bottom:_*l},children:C&&u.cloneElement(S,{onActionPress:I})}):null}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),98);
__d("CaptionsTextSizeMapping",[],(function(t,n,r,o,a,i){"use strict";var e={BIG:"21px",BIGGER:"25px",BIGGEST:"25px",DEFAULT:"17px",MEDIUM:"19px",SMALL:"13px",SMALLEST:"8px"},l={BIG:"20px",BIGGER:"21px",BIGGEST:"21px",DEFAULT:"17px",MEDIUM:"19px",SMALL:"13px",SMALLEST:"8px"},s={BIG:"17px",BIGGER:"17px",BIGGEST:"17px",DEFAULT:"17px",MEDIUM:"17px",SMALL:"17px",SMALLEST:"17px"},u={BIG:"1.7vw",BIGGER:"2.0vw",BIGGEST:"2.2vw",DEFAULT:"1.1vw",MEDIUM:"1.4vw",SMALL:"0.825vw",SMALLEST:"0.55vw"};i.AdjustedCaptionsTextSizeMapFeedUnit=e,i.AdjustedCaptionsTextSizeMapWNS=l,i.FixedCaptionsTextSizeMap=s,i.DynamicCaptionsTextSizeMap=u}),66);
__d("Duration.react",["ServerTime","clearTimeout","react","react-strict-dom","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=500,c=1e3,d=60,m=60,p=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={duration:0},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.$2()},n.componentWillUnmount=function(){r("clearTimeout")(this.$1)},n.$2=function(){var e=this,t;this.props.useLocalTime?t=Date.now():t=o("ServerTime").getMillis(),this.setState({duration:Math.max(t-this.props.startTime,0)}),this.$1=r("setTimeout")(function(){return e.$2()},u)},n.render=function(){var e=Math.floor(this.state.duration/c),t=e%d,n=Math.floor(e/d),r=n%m,a=Math.floor(n/m),i="";a>0&&(i=a+":");var l=r+":";l.length<3&&i.length>0&&(l="0"+l);var u=""+t;return u.length<2&&(u="0"+u),s.jsxs(o("react-strict-dom").html.span,{children:[i,l,u]})},t})(s.Component);p.defaultProps={useLocalTime:!1},l.default=p}),98);
__d("XCometGamingControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/gaming/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("GamingVideoBackLink.react",["fbt","ix","CometImage.react","CometPressable.react","XCometGamingControllerRouteBuilder","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=u("370949"),m=r("XCometGamingControllerRouteBuilder").buildURL({});function p(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Go to Facebook Gaming"),e[0]=t):t=e[0];var n=t,a;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(r("CometPressable.react"),{linkProps:{url:m},children:function(t){var e=t.hovered;return c.jsxs("div",{className:"x78zum5 x1q0g3np",children:[c.jsx("span",babelHelpers.extends({},{0:{className:"x3nfvp2 x1qo4wvw xbyyjgo x1d8287x x19991ni xl405pv"},1:{className:"x3nfvp2 x1hc1fzr x1d8287x x19991ni xl405pv"}}[!!e<<0],{children:c.jsx(r("CometImage.react"),{alt:s._(/*BTDS*/"Close"),src:d})})),c.jsx("div",babelHelpers.extends({},{0:{className:"x1s85apg"},1:{className:"xe2km65 x1lliihq xf159sx x1n2onr6 x1bvjpef xndqk7f"}}[!!e<<0],{children:n}))]})}}),e[1]=a):a=e[1],a}l.default=p}),226);
__d("VideoBlurBackgroundContainer_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoBlurBackgroundContainer_video",selections:[{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("getPreviewDataFromImagePreviewPayload",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="data:image/jpeg;base64,",s=160,u=162,c=42;function d(e,t){t===void 0&&(t=0);var n=atob(e);if(n.length<=3)throw r("FBLogger")("comet_infra").mustfixThrow("The preview payload was %s byte(s) long when it should be 4 or more. The first byte is the version, the second the width, and the third the height. The 4th byte and onward is the image data.",n.length);for(var o=new Uint8Array(n.length+t),a=0;a<n.length;a++)o[t+a]=n.charCodeAt(a);return o}var m;function p(){return m==null&&(m=d("/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEABsaGikdKUEmJkFCLy8vQkc/Pj4/R0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0cBHSkpNCY0PygoP0c/NT9HR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR//AABEIABQAKgMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AA==")),m}function _(t){var n=p(),o;try{var a=d(t,n.length-3),i=a[n.length-1],l=a[n.length-3],m=a[n.length-2];if(i>c)throw r("FBLogger")("comet_infra").mustfixThrow("Tried to decode a payload whose height was %s. The maximum is %s.",i,c);if(m>c)throw r("FBLogger")("comet_infra").mustfixThrow("Tried to decode a payload whose width was %s. The maximum is %s.",m,c);return a.set(n,0),a[s]=i,a[u]=m,o=btoa(String.fromCharCode.apply(null,a)),{dataURI:""+e+o,height:i,width:m,version:l}}catch(e){var _=r("getErrorSafe")(e),f=r("FBLogger")("images_infra");return f.catching(_),f.warn("Failed to decode a preview image payload. Falling back with a blank image."),null}}l.default=_}),98);
__d("VideoBlurBackgroundContainer.react",["BaseBlurryImagePreview.react","CometImage.react","CometRelay","VideoBlurBackgroundContainer_video.graphql","getPreviewDataFromImagePreviewPayload","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d={blurryImage:{filter:"x1hedwgd",transform:"x4zgh4k",$$css:!0},image:{bottom:"x1ey2m1c",boxSizing:"x9f619",height:"x5yr21d",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,opacity:"xti2d7y",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",zIndex:"x1ja2u2z",$$css:!0},lightBackgroundInLightMode:{backgroundColor:"x2bj2ny",$$css:!0},root:{backgroundColor:"xal61yo",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function m(t){var a,i,l=o("react-compiler-runtime").c(16),u=t.children,m=t.lightBackgroundInLightMode,p=t.ref,_=t.video,f=t.xstyle,g=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoBlurBackgroundContainer_video.graphql"),_),h=(a=g.preferred_thumbnail)==null?void 0:a.image_preview_payload,y;if(h!=null){var C;l[0]!==h?(C=r("getPreviewDataFromImagePreviewPayload")(h),l[0]=h,l[1]=C):C=l[1];var b=C;if(b!=null){var v;l[2]===Symbol.for("react.memo_cache_sentinel")?(v="x1ey2m1c x9f619 x5yr21d xtijo5x x1o0tod xti2d7y x10l6tqk x13vifvy xh8yej3 x1ja2u2z",l[2]=v):v=l[2];var S;l[3]!==b?(S=c.jsx(r("BaseBlurryImagePreview.react"),{className:v,previewData:b}),l[3]=b,l[4]=S):S=l[4],y=S}}var R=(i=g.preferred_thumbnail)==null||(i=i.image)==null?void 0:i.uri;if(y==null&&R!=null){var L;l[5]===Symbol.for("react.memo_cache_sentinel")?(L=[d.blurryImage,d.image],l[5]=L):L=l[5];var E;l[6]!==R?(E=c.jsx(r("CometImage.react"),{src:R,xstyle:L}),l[6]=R,l[7]=E):E=l[7],y=E}var k;l[8]!==m||l[9]!==f?(k=(s||(s=r("stylex"))).props(d.root,f,m===!0&&d.lightBackgroundInLightMode),l[8]=m,l[9]=f,l[10]=k):k=l[10];var I;return l[11]!==y||l[12]!==u||l[13]!==p||l[14]!==k?(I=c.jsxs("div",babelHelpers.extends({},k,{ref:p,children:[y,u]})),l[11]=y,l[12]=u,l[13]=p,l[14]=k,l[15]=I):I=l[15],I}var p=m;l.default=p}),98);
__d("VideoPlayerActionButton.react",["FDSIcon.react","FDSLink.react","FDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(21),n=e.icon,a=e.label,i=e.onPress,l=e.shouldJustifyContentCenter,u=e.showSingleButton,c=e.testid,d=e.useVerticalLayout,m=l===void 0?!1:l,p=u===void 0?!1:u,_=d===void 0?!1:d,f;t[0]!==m||t[1]!==p||t[2]!==_?(f={0:{},8:{className:"x6s0dn4 x78zum5 x1q0g3np xyamay9 xv54qhq x1l90r2v xf7dkkf"},4:{className:"xl56j7k"},12:{className:"x6s0dn4 x78zum5 x1q0g3np xyamay9 xv54qhq x1l90r2v xf7dkkf xl56j7k"},2:{className:"x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid"},10:{className:"x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid"},6:{className:"xl56j7k x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid"},14:{className:"xl56j7k x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid"},1:{className:"xja02kk"},9:{className:"x6s0dn4 x78zum5 x1q0g3np xyamay9 xv54qhq x1l90r2v xf7dkkf xja02kk"},5:{className:"xl56j7k xja02kk"},13:{className:"x6s0dn4 x78zum5 x1q0g3np xyamay9 xv54qhq x1l90r2v xf7dkkf xl56j7k xja02kk"},3:{className:"x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid xja02kk"},11:{className:"x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid xja02kk"},7:{className:"xl56j7k x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid xja02kk"},15:{className:"xl56j7k x6s0dn4 x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x2b8uid xja02kk"}}[(_!==!0)<<3|!!m<<2|(_===!0)<<1|(p!==!0)<<0],t[0]=m,t[1]=p,t[2]=_,t[3]=f):f=t[3];var g;t[4]!==_?(g={0:{},2:{className:"xgjxtca x8tsxso x1lqxvo2 x158ip91 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf xbmvrgn x889kno x2vl965 x1a8lsjc xe2zdcy"},1:{className:"xgjxtca x8tsxso x1lqxvo2 x158ip91 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf xod5an3 x889kno x2vl965 x1a8lsjc xe2zdcy"},3:{className:"xbmvrgn xgjxtca x8tsxso x1lqxvo2 x158ip91 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf xod5an3 x889kno x2vl965 x1a8lsjc xe2zdcy"}}[(_!==!0)<<1|(_===!0)<<0],t[4]=_,t[5]=g):g=t[5];var h;t[6]!==n||t[7]!==a||t[8]!==i?(h=s.jsx(r("FDSIcon.react"),{"aria-label":a,color:"white",hideHoverOverlay:!0,icon:n,onPress:i}),t[6]=n,t[7]=a,t[8]=i,t[9]=h):h=t[9];var y;t[10]!==g||t[11]!==h?(y=s.jsx("div",babelHelpers.extends({},g,{children:h})),t[10]=g,t[11]=h,t[12]=y):y=t[12];var C;t[13]!==a||t[14]!==i?(C=s.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:s.jsx(r("FDSLink.react"),{onClick:i,children:a})}),t[13]=a,t[14]=i,t[15]=C):C=t[15];var b;return t[16]!==f||t[17]!==y||t[18]!==C||t[19]!==c?(b=s.jsxs("div",babelHelpers.extends({},f,{"data-testid":void 0,children:[y,C]})),t[16]=f,t[17]=y,t[18]=C,t[19]=c,t[20]=b):b=t[20],b}l.default=u}),98);
__d("useNavigateToTahoePassthroughProps",["CometProductTagFunnelIDContext","CometTrackingCodeContext","CometTrackingNodesContext","CometWarningScreenContext","VideoPlayerHooks","getAggregatedStoryTrackingNodeIndex","react","react-compiler-runtime","useIsVideoHomePlayerOriginFromTracePolicy","usePlayerOriginRouteTracePolicy","useVideoPlayerPortalingPassthroughProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useContext;function c(){var e=o("react-compiler-runtime").c(13),t=r("useVideoPlayerPortalingPassthroughProps")(),n=u(r("CometTrackingCodeContext")),a=u(r("CometTrackingNodesContext")),i=u(r("CometProductTagFunnelIDContext")),l=o("CometWarningScreenContext").useIsOverlayShown(),c=o("CometWarningScreenContext").useHasOverlay(),d;e[0]!==a?(d=r("getAggregatedStoryTrackingNodeIndex")(a),e[0]=a,e[1]=d):d=e[1];var m=d,p=(s||(s=o("VideoPlayerHooks"))).useVideoPlayerInitialTracePolicy(),_=r("usePlayerOriginRouteTracePolicy")(),f=r("useIsVideoHomePlayerOriginFromTracePolicy")(_),g=p!=null?p:_,h;e[2]!==f?(h=f?{caller:"CHANNEL_VIEW_FROM_VIDEO_HOME"}:{},e[2]=f,e[3]=h):h=e[3];var y;return e[4]!==i||e[5]!==m||e[6]!==c||e[7]!==l||e[8]!==t||e[9]!==g||e[10]!==h||e[11]!==n?(y=babelHelpers.extends({bypassAutoplaySettings:!0},t,{index:m,initialTracePolicy:g,origOverlayShown:l,overlayExists:c,productTagFunnelID:i,trackingCode:n},h),e[4]=i,e[5]=m,e[6]=c,e[7]=l,e[8]=t,e[9]=g,e[10]=h,e[11]=n,e[12]=y):y=e[12],y}l.default=c}),98);
__d("VideoPlayerCometNavigateToTahoeControl.react",["fbt","ix","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime","useNavigateToTahoePassthroughProps"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(12),n=e.onPress,a=e.reactionVideoChannelType,i=e.subOrigin,l=e.videoTahoeUrl,d=r("useNavigateToTahoePassthroughProps")(),m;t[0]!==d||t[1]!==a||t[2]!==i?(m=babelHelpers.extends({},d,{playerSubOrigin:i,reactionVideoChannelType:a}),t[0]=d,t[1]=a,t[2]=i,t[3]=m):m=t[3];var p=m,_;t[4]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Enlarge"),t[4]=_):_=t[4];var f=_,g;t[5]===Symbol.for("react.memo_cache_sentinel")?(g=o("fbicon")._(u("517763"),20),t[5]=g):g=t[5];var h;t[6]!==p||t[7]!==l?(h={passthroughProps:p,url:l},t[6]=p,t[7]=l,t[8]=h):h=t[8];var y;return t[9]!==n||t[10]!==h?(y=c.jsx(r("VideoPlayerControlIcon.react"),{icon:g,label:f,linkProps:h,onPress:n,tooltip:f}),t[9]=n,t[10]=h,t[11]=y):y=t[11],y}l.default=d}),226);
__d("VideoPlayerCometWatchInjectionControl.react",["fbt","FDSResizeUpFilled20Icon","VideoPlayerControlIcon.react","react","react-compiler-runtime","useCometRouterState","useVideoPlayerPortalingPassthroughProps"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(16),n=e.isARLTW,a=e.onPress,i=e.routeTracePolicy,l=e.subOrigin,c=e.videoPlayerSessionID,d=e.videoWatchUrl,m=r("useVideoPlayerPortalingPassthroughProps")(),p=m.portableVideoID,_=r("useCometRouterState")(),f=_==null?void 0:_.main.route.tabKey,g;t[0]!==f?(g=f!=="watch"?s._(/*BTDS*/"Open in Video"):s._(/*BTDS*/"Enlarge"),t[0]=f,t[1]=g):g=t[1];var h=g,y;t[2]!==n||t[3]!==p||t[4]!==i||t[5]!==l||t[6]!==c?(y={isARLTW:n,portableVideoID:p,portalingRouteTracePolicy:i,portalingSubOrigin:l,unmute:!0,videoPlayerSessionID:c},t[2]=n,t[3]=p,t[4]=i,t[5]=l,t[6]=c,t[7]=y):y=t[7];var C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C={navigation_source:"video_expand"},t[8]=C):C=t[8];var b;t[9]!==y||t[10]!==d?(b={passthroughProps:y,traceParams:C,url:d},t[9]=y,t[10]=d,t[11]=b):b=t[11];var v;return t[12]!==h||t[13]!==a||t[14]!==b?(v=u.jsx(r("VideoPlayerControlIcon.react"),{icon:r("FDSResizeUpFilled20Icon"),label:h,linkProps:b,onPress:a,tooltip:h}),t[12]=h,t[13]=a,t[14]=b,t[15]=v):v=t[15],v}l.default=c}),226);
__d("VideoPlayerNavigateToTahoeOrFullScreenControl.react",["CometTrackingNodeProvider.react","VideoPlayerCometNavigateToTahoeControl.react","VideoPlayerFullscreenControl.react","gkx","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.isAdVideo,a=e.isBroadcast,i=e.onPressFullscreenControl,l=e.onPressTahoeControl,u=e.onUserInteraction,c=e.reactionVideoChannelType,d=e.shouldUnmute,m=e.subOrigin,p=e.videoTahoeUrl,_=r("gkx")("24206"),f;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==u||t[5]!==c||t[6]!==d||t[7]!==m||t[8]!==p?(f=s.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:144,children:(!n||a===!0&&r("qex")._("4408")===!0)&&m!=null&&p!=null&&p!==""&&!_?s.jsx(r("VideoPlayerCometNavigateToTahoeControl.react"),{onPress:l,reactionVideoChannelType:c,subOrigin:m,videoTahoeUrl:p}):s.jsx(r("VideoPlayerFullscreenControl.react"),{onPress:i,onUserInteraction:u,shouldUnmute:d})}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u,t[5]=c,t[6]=d,t[7]=m,t[8]=p,t[9]=f):f=t[9],f}l.default=u}),98);
__d("VideoPlayerReshareButton_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerReshareButton_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_share",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"creation_story",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shareable",plural:!1,selections:[{alias:"wwwUrl",args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerReshareButton.react",["fbt","ix","CometRelay","CometTrackingNodeProvider.react","VideoPlayerActionButton.react","VideoPlayerReshareButton_video.graphql","createEmptyCometComposerViewState","fbicon","react","react-compiler-runtime","useFeedComposerCometDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=c.useCallback;function p(e){var t=o("react-compiler-runtime").c(18),n=e.renderActionButton,a=e.shouldJustifyContentCenter,i=e.url,l=e.useVerticalLayout,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c={composerEntryPointName:"reshare_from_feed",composerSourceSurface:"share_dialog",composerType:"share",title:s._(/*BTDS*/"Write post"),tracePolicy:"comet.composer.shareVideo"},t[0]=c):c=t[0];var m=r("useFeedComposerCometDialog")(c),p=m[0],_;t[1]!==i?(_=r("createEmptyCometComposerViewState")({attachmentArea:{activeAttachmentType:"SHARE"},linkAttachment:{url:i},submitText:s._(/*BTDS*/"Share")}),t[1]=i,t[2]=_):_=t[2];var f=_,g;t[3]!==f||t[4]!==p?(g=function(){p({beginningViewState:f})},t[3]=f,t[4]=p,t[5]=g):g=t[5];var h=g,y,C;t[6]===Symbol.for("react.memo_cache_sentinel")?(y=o("fbicon")._(u("484394"),16),C=s._(/*BTDS*/"Share"),t[6]=y,t[7]=C):(y=t[6],C=t[7]);var b;t[8]!==h||t[9]!==a||t[10]!==l?(b=d.jsx(r("VideoPlayerActionButton.react"),{icon:y,label:C,onPress:h,shouldJustifyContentCenter:a,useVerticalLayout:l}),t[8]=h,t[9]=a,t[10]=l,t[11]=b):b=t[11];var v=b,S;t[12]!==v||t[13]!==h||t[14]!==n?(S=n!=null?n({onPress:h}):v,t[12]=v,t[13]=h,t[14]=n,t[15]=S):S=t[15];var R=S,L;return t[16]!==R?(L=d.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:17,children:R}),t[16]=R,t[17]=L):L=t[17],L}function _(t){var r,a=o("react-compiler-runtime").c(6),i=t.renderActionButton,l=t.shouldJustifyContentCenter,s=t.useVerticalLayout,u=t.video,c=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerReshareButton_video.graphql"),u),m=c==null?void 0:c.can_viewer_share,_=c==null||(r=c.creation_story)==null||(r=r.shareable)==null?void 0:r.wwwUrl,f;return a[0]!==m||a[1]!==i||a[2]!==l||a[3]!==_||a[4]!==s?(f=m===!0&&_!=null?d.jsx(p,{renderActionButton:i,shouldJustifyContentCenter:l,url:_,useVerticalLayout:s}):null,a[0]=m,a[1]=i,a[2]=l,a[3]=_,a[4]=s,a[5]=f):f=a[5],f}l.default=_}),226);
__d("VideoPlayerWatchAgainButton.react",["fbt","ix","CometTrackingNodeProvider.react","VideoPlayerActionButton.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(9),n=e.useVerticalLayout,a=(c||(c=o("VideoPlayerHooks"))).useController(),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("fbicon")._(u("534218"),16),t[0]=i):i=t[0];var l;t[1]!==n?(l=n===!0?s._(/*BTDS*/"Replay Video"):s._(/*BTDS*/"Watch again"),t[1]=n,t[2]=l):l=t[2];var m;t[3]!==a?(m=function(){return a.play("user_initiated")},t[3]=a,t[4]=m):m=t[4];var p;return t[5]!==l||t[6]!==m||t[7]!==n?(p=d.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:188,children:d.jsx(r("VideoPlayerActionButton.react"),{icon:i,label:l,onPress:m,useVerticalLayout:n})}),t[5]=l,t[6]=m,t[7]=n,t[8]=p):p=t[8],p}l.default=m}),226);
__d("VideoPlayerWithAudioOverlay_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWithAudioOverlay_video",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"2wvKjr"}],concreteType:null,kind:"LinkedField",name:"comet_video_player_audio_overlay_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerWithAudioOverlay_video",fragmentName:"CometVideoPlayerWithPodcastOverlayRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometVideoPlayerWithPodcastOverlayRenderer",abstractKey:null}],storageKey:'comet_video_player_audio_overlay_renderer(supported:"2wvKjr")'}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerWithAudioOverlay.react",["CometRelay","VideoPlayerWithAudioOverlay_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(7),a=t.playerFormat,i=t.pressInteraction,l=t.video,s=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerWithAudioOverlay_video.graphql"),l),c=s==null?void 0:s.comet_video_player_audio_overlay_renderer;if(c==null)return null;var d;r[0]===Symbol.for("react.memo_cache_sentinel")?(d={className:"x6s0dn4 x78zum5 x5yr21d xl56j7k"},r[0]=d):d=r[0];var m;r[1]!==a||r[2]!==i?(m={playerFormat:a,pressInteraction:i},r[1]=a,r[2]=i,r[3]=m):m=r[3];var p;return r[4]!==c||r[5]!==m?(p=u.jsx("div",babelHelpers.extends({},d,{children:u.jsx(o("CometRelay").MatchContainer,{match:c,props:m})})),r[4]=c,r[5]=m,r[6]=p):p=r[6],p}l.default=c}),98);
__d("VideoPlayerWithLiveVideoIndicator_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWithLiveVideoIndicator_video",selections:[{alias:"breakingStatus",args:null,kind:"ScalarField",name:"breaking_status",storageKey:null},{alias:"videoId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"isPremiere",args:null,kind:"ScalarField",name:"is_premiere",storageKey:null},{alias:"liveViewerCount",args:null,kind:"ScalarField",name:"live_viewer_count_read_only",storageKey:null},{alias:"rehearsalInfo",args:null,concreteType:"LiveVideoRehearsalInfo",kind:"LinkedField",name:"rehearsal_info",plural:!1,selections:[{alias:"typeName",args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"publish_time",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerWithLiveVideoIndicator.react",["fbt","ix","CometImage.react","CometPlaceholder.react","CometRelay","CometRouteRenderType","Duration.react","FBLogger","FDSText.react","GamingVideoBackLink.react","VideoBroadcastStatus","VideoPlayerHooks","VideoPlayerWithLiveVideoIndicator_video.graphql","clearTimeout","cr:541","deferredLoadComponent","gkx","intlSummarizeNumber","react","react-compiler-runtime","requireDeferred","setTimeout","stylex","useVideoPlayerUnifiedCVCProvider"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m,p=d||(d=o("react")),_=d,f=_.useEffect,g=_.useRef,h=_.useState,y=r("deferredLoadComponent")(r("requireDeferred")("LiveVideoCometNuxForCVC.react").__setRef("VideoPlayerWithLiveVideoIndicator.react")),C="xv3vjy1-B",b={positionTop:{display:"x78zum5",height:"xxk0z11",insetInlineStart:"x1r4y97",position:"x10l6tqk",top:"x1tk7jg1",$$css:!0},positionTopWithCometNavOverlay:{insetInlineStart:"xx5wi7t",top:"xoyzfg9",$$css:!0},positionTopWithCometNavOverlayWorkplace:{insetInlineStart:"xx5wi7t",top:"xoyzfg9",$$css:!0}};function v(t){var a,l,s,u,d=o("react-compiler-runtime").c(50),_=t.hasCometNavOverlay,C=t.includeGamingBackLink,v=t.renderedInLiveProducer,k=t.shouldExpand,I=t.shouldShowPrivacyNux,T=t.video,D=(m||(m=o("VideoPlayerHooks"))).useIsLive(),x=m.useIsLiveRewindActive(),$=m.useIsFullscreen(),P=o("CometRouteRenderType").useIsMain(),N=m.usePlaying(),M=g(null),w=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerWithLiveVideoIndicator_video.graphql"),T),A=(a=w==null?void 0:w.videoId)!=null?a:"";if(w==null||typeof A!="string"||A==="")throw r("FBLogger")("comet_live_video").mustfixThrow("Null video or bad videoId");var F=o("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCData(),O=h((l=w.liveViewerCount)!=null?l:0),B=O[0],W=O[1],q=h(!1),U=q[0],V=q[1],H=h(!1),G=H[0],z=H[1],j,K;d[0]!==F||d[1]!==D?(j=function(){D&&F!=null&&(S(F.bs)?W(F.c):(W(0),V(!0)))},K=[F,D],d[0]=F,d[1]=D,d[2]=j,d[3]=K):(j=d[2],K=d[3]),f(j,K);var Q,X;d[4]!==N?(Q=function(){return N?(z(!0),M.current=r("setTimeout")(function(){z(!1)},3e3)):M.current&&(z(!1),r("clearTimeout")(M.current)),function(){return r("clearTimeout")(M.current)}},X=[N],d[4]=N,d[5]=Q,d[6]=X):(Q=d[5],X=d[6]),f(Q,X);var Y,J;d[7]!==D||d[8]!==A?(Y=function(){D&&A&&(n("cr:541")==null||n("cr:541").loadImmediately(function(e){e.LiveProducerLiveActivated(A)}))},J=[D,A],d[7]=D,d[8]=A,d[9]=Y,d[10]=J):(Y=d[9],J=d[10]),f(Y,J);var Z=((s=w.rehearsalInfo)==null?void 0:s.typeName)==="LiveVideoRehearsalInfo",ee=(u=w.is_gaming_video)!=null?u:!1,te=C!=null?C:!1,ne=te&&P&&ee,re=!D||U;if(re)return null;var oe=r("gkx")("22889"),ae;d[11]!==_||d[12]!==$||d[13]!==P||d[14]!==v||d[15]!==k?(ae=(c||(c=r("stylex"))).props(b.positionTop,oe?k!==!0&&(_||P)&&!$&&!v&&b.positionTopWithCometNavOverlayWorkplace:_&&!$&&b.positionTopWithCometNavOverlay),d[11]=_,d[12]=$,d[13]=P,d[14]=v,d[15]=k,d[16]=ae):ae=d[16];var ie;d[17]!==ne?(ie=ne?p.jsx(r("GamingVideoBackLink.react"),{}):null,d[17]=ne,d[18]=ie):ie=d[18];var le;d[19]!==x||d[20]!==Z?(le={0:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v"},8:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z"},4:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1ciooss"},12:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1ciooss"},2:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1osi62z"},10:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1osi62z"},6:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1osi62z"},14:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1osi62z"},1:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},9:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},5:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},13:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},3:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},11:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},7:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},15:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"}}[!x<<3|!x<<2|!!x<<1|!!Z<<0],d[19]=x,d[20]=Z,d[21]=le):le=d[21];var se=Z?"primary":"white",ue;d[22]!==w?(ue=R(w),d[22]=w,d[23]=ue):ue=d[23];var ce;d[24]!==G||d[25]!==x||d[26]!==k||d[27]!==w.publish_time?(ce=k===!0&&G&&(w==null?void 0:w.publish_time)!=null&&!x&&E(w.publish_time),d[24]=G,d[25]=x,d[26]=k,d[27]=w.publish_time,d[28]=ce):ce=d[28];var de;d[29]!==se||d[30]!==ue||d[31]!==ce?(de=p.jsxs(r("FDSText.react"),{color:se,type:"bodyLink4",children:[ue,ce]}),d[29]=se,d[30]=ue,d[31]=ce,d[32]=de):de=d[32];var me;d[33]!==de||d[34]!==le?(me=p.jsx("div",babelHelpers.extends({},le,{"data-testid":void 0,children:de})),d[33]=de,d[34]=le,d[35]=me):me=d[35];var pe;d[36]!==B||d[37]!==w?(pe=L(w,B),d[36]=B,d[37]=w,d[38]=pe):pe=d[38];var _e;d[39]!==me||d[40]!==pe||d[41]!==ae||d[42]!==ie?(_e=p.jsxs("div",babelHelpers.extends({},ae,{children:[ie,me,pe]})),d[39]=me,d[40]=pe,d[41]=ae,d[42]=ie,d[43]=_e):_e=d[43];var fe;d[44]!==I||d[45]!==A?(fe=I===!0&&p.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:p.jsx("div",{className:"x1r4y97 x10l6tqk x1w1tb2m",children:p.jsx(y,{videoID:A})})}),d[44]=I,d[45]=A,d[46]=fe):fe=d[46];var ge;return d[47]!==_e||d[48]!==fe?(ge=p.jsxs(p.Fragment,{children:[_e,fe]}),d[47]=_e,d[48]=fe,d[49]=ge):ge=d[49],ge}function S(e){if(e==null)return!1;switch(e){case r("VideoBroadcastStatus").LIVE:case r("VideoBroadcastStatus").LIVE_STOPPED:case r("VideoBroadcastStatus").SEAL_STARTED:return!0;default:return!1}}function R(e){return(e==null?void 0:e.isPremiere)===!0?s._(/*BTDS*/"PREMIERE"):(e==null?void 0:e.breakingStatus)===!0?s._(/*BTDS*/"LIVE BREAKING"):s._(/*BTDS*/"LIVE")}R.displayName=R.name+" [from "+i.id+"]";function L(e,t){if(e===null||t==null||t===0)return null;var n=p.jsx(r("CometImage.react"),{alt:"",src:u("411339")}),o=p.jsx("span",{className:"x3nfvp2 x2fvf9 x1n2onr6",children:n});return p.jsxs("div",{"aria-label":s._(/*BTDS*/"_j{\"*\":\"{number} people currently watching this video.\",\"_1\":\"1 person currently watching this video.\"}",[s._plural(t,"number",r("intlSummarizeNumber")(t))]),className:"x6s0dn4 xrmyhay xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xdzw4kq xexx8yu x18d9i69 x25sj25 x1icxu4v","data-testid":void 0,role:"img",children:[o,p.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"body4",children:r("intlSummarizeNumber")(t)})]})}L.displayName=L.name+" [from "+i.id+"]";function E(e){return p.jsx("div",{className:"x3nfvp2 xdwrcjd",children:p.jsx(r("Duration.react"),{startTime:e*1e3,useLocalTime:!0})})}E.displayName=E.name+" [from "+i.id+"]",l.default=v}),226);
__d("VideoPlayerWithVideoHomeLogging.react",["VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(e){var t=o("react-compiler-runtime").c(5),n=e.feedAggregationType,r=e.reactionVideoChannelType,a=(s||(s=o("VideoPlayerHooks"))).useController(),i,l;return t[0]!==a||t[1]!==n||t[2]!==r?(i=function(){r!=null&&a.setLoggingToVPLAdditionalData("reaction_video_channel_type",r),n!=null&&a.setLoggingToVPLAdditionalData("feed_aggregation_type",n)},l=[a,n,r],t[0]=a,t[1]=n,t[2]=r,t[3]=i,t[4]=l):(i=t[3],l=t[4]),u(i,l),null}l.default=c}),98);
__d("XPlatReactToasterView.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={visibleToasts:[]},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromProps=function(t,n){for(var e=n!=null?n.visibleToasts.slice(0,t.maxVisible):[],r=0,o=t.filterToasts,a=t.toasterState,i={},l=o!=null?Object.keys(a).filter(function(e){var n,r=a[e];i[e]=r;var l=r==null?void 0:r.shown,s=r==null||(n=r.value)==null||(n=n.type)==null?void 0:n.name;return r==null||s==null?!0:o.has(s)&&!l?(t.onExpireToast(e),!1):!0}):Object.keys(a),s=e.reduce(function(e,t){return t!=null&&e.add(t.id),e},new Set),u=0;r<t.maxVisible;){var c=e[r],d=Object.keys(i).length>0?i:t.toasterState;if(c!=null){var m=Object.prototype.hasOwnProperty.call(d,c.id);if(m){var p=a[c.id];e[r]={expired:p.expired,id:p.id,toast:p.value},r++;continue}else e[r]=null}for(var _=null;_==null&&u<l.length;){var f=l[u++],g=s.has(f);g||(_=t.toasterState[f])}_!=null&&(e[r]={expired:_.expired,id:_.id,toast:_.value}),r++}return{visibleToasts:e}};var n=t.prototype;return n.render=function(){var e=this;return s.jsx(s.Fragment,{children:this.state.visibleToasts.map(function(t,n){return t!=null?e.props.children(t.toast,t.id,t.expired,n):null})})},t})(s.PureComponent);u.defaultProps={maxVisible:1},l.default=u}),98);
__d("useVideoOriginalDimensionsRelay_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoOriginalDimensionsRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_rotation",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoOriginalDimensionsRelay",["CometRelay","computeAspectRatio","react-compiler-runtime","useVideoOriginalDimensionsRelay_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=o("react-compiler-runtime").c(7),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoOriginalDimensionsRelay_video.graphql"),t),l=i==null?void 0:i.original_rotation,s=l==="ROTATE_LEFT"||l==="ROTATE_RIGHT",u=s?i==null?void 0:i.original_height:i==null?void 0:i.original_width,c=s?i==null?void 0:i.original_width:i==null?void 0:i.original_height,d;a[0]!==c||a[1]!==u?(d=r("computeAspectRatio")(u,c),a[0]=c,a[1]=u,a[2]=d):d=a[2];var m=d,p;return a[3]!==m||a[4]!==c||a[5]!==u?(p={originalAspectRatio:m,originalHeight:c,originalWidth:u},a[3]=m,a[4]=c,a[5]=u,a[6]=p):p=a[6],p}l.default=s}),98);/*FB_PKG_DELIM*/
__d("CometBatchNotificationsStateChangeSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="30300156509571373"}),null);
__d("CometBatchNotificationsStateChangeSubscription.graphql",["CometBatchNotificationsStateChangeSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"environment"},t={defaultValue:null,kind:"LocalArgument",name:"input"},r=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"BatchNotificationStateChangeSubscribeResponsePayload",kind:"LinkedField",name:"batch_notification_state_change_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"aggregated_notifications",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_state",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_update_timestamp",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"CometBatchNotificationsStateChangeSubscription",selections:r,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"CometBatchNotificationsStateChangeSubscription",selections:r},params:{id:n("CometBatchNotificationsStateChangeSubscription_facebookRelayOperation"),metadata:{subscriptionName:"batch_notification_state_change_subscribe"},name:"CometBatchNotificationsStateChangeSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("CometBatchNotificationsStateChangeSubscription",["CometBatchNotificationsStateChangeSubscription.graphql","CometRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometBatchNotificationsStateChangeSubscription.graphql");function u(e){return o("CometRelay").requestSubscription(e,{subscription:s,variables:{environment:"MAIN_SURFACE",input:{environment:"MAIN_SURFACE",query_flags:["INCLUDE_WA_P2B_NOTIFS"]}}})}l.subscription=s,l.batchSubscribe=u}),98);
__d("CometNotificationsStateChangeSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23864641996495578"}),null);
__d("CometNotificationsStateChangeSubscription.graphql",["CometNotificationsStateChangeSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"environment"},t={defaultValue:null,kind:"LocalArgument",name:"input"},r=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"NotificationStateChangeSubscribeResponsePayload",kind:"LinkedField",name:"notification_state_change_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"notification",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"notif_cache_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cache_timestamp",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_state",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"CometNotificationsStateChangeSubscription",selections:r,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"CometNotificationsStateChangeSubscription",selections:r},params:{id:n("CometNotificationsStateChangeSubscription_facebookRelayOperation"),metadata:{subscriptionName:"notification_state_change_subscribe"},name:"CometNotificationsStateChangeSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("CometNotificationsStateChangeSubscription",["CometNotificationsStateChangeSubscription.graphql","CometRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometNotificationsStateChangeSubscription.graphql");function u(e){return o("CometRelay").requestSubscription(e,{subscription:s,updater:function(t,n){if(n){var e=n.notification_state_change_subscribe;if(e){var r=e==null?void 0:e.notification,o=e==null?void 0:e.seen_state;if(!(!r||!o)&&r.id!=null&&r.id!==""){var a=t.get(r.id);a&&a.setValue(o,"seen_state")}}}},variables:{environment:"MAIN_SURFACE",input:{environment:"MAIN_SURFACE",query_flags:["INCLUDE_WA_P2B_NOTIFS"]}}})}var c={subscribe:u,subscription:s};l.default=c}),98);
__d("FDSArrowsCircleFilled24Icon",["cr:14428"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14428")}),98);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(1).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=void 0:(r=a.item,n[9]=new t.Map,n[9].set("group_id",r.groupId),n[9].set("current_cursor",r.currentCursor),n[9].set("sync_status",r.syncStatus),n[9].set("sync_params",r.syncParams),n[9].set("send_sync_params",r.sendSyncParams),n[9].set("min_time_to_sync_timestamp_ms",r.minTimeToSyncTimestampMs),n[9].set("can_ignore_timestamp",r.canIgnoreTimestamp),n[9].set("sync_channel",r.syncChannel),n[9].set("last_sync_request_timestamp_ms",r.lastSyncRequestTimestampMs),n[0]=n[9])})},function(r){var o;return n[0]?n[2]=!1:n[2]=!0,n[2]?t.resolve((o=[e[0],void 0,t.i64.cast([0,4]),void 0,!1],n[3]=o[0],n[4]=o[1],n[5]=o[2],n[6]=o[3],n[7]=o[4],o)):t.sequence([function(e){return n[9]=n[0].get("group_id"),t.filter(t.db.table(3).fetch(),function(e){return t.i64.neq(e.epochId,void 0)&&t.i64.eq(e.syncDatabaseId,n[9])}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[10]=!1:(t=o.item,n[10]=!0)})},function(r){var o;return n[10]?t.resolve((n[17]=n[0].get("group_id"),o=[n[17],void 0,t.i64.cast([0,4]),void 0,!1],n[12]=o[0],n[13]=o[1],n[14]=o[2],n[15]=o[3],n[16]=o[4])):t.sequence([function(r){return n[17]=t.i64.of_float(Date.now()),n[18]=n[0].get("min_time_to_sync_timestamp_ms"),n[19]=n[0].get("last_sync_request_timestamp_ms"),n[20]=n[0].get("can_ignore_timestamp"),n[20]&&e[1]||t.i64.ge(n[17],n[18])?t.sequence([function(r){return e[1]?t.resolve(n[28]=t.i64.cast([0,0])):t.sequence([function(e){return n[29]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[29]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[30]=t.i64.cast([0,0]):(r=a.item,n[30]=r.failureCount)})},function(e){return n[32]=t.i64.mul(t.i64.sub(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.lt(t.i64.cast([0,15]),n[30])?t.i64.cast([0,15]):n[30])),t.i64.cast([0,1])),t.i64.cast([0,500])),n[33]=t.i64.sub(t.i64.add(n[19]==null?t.i64.cast([0,0]):n[19],t.i64.lt(n[32],t.i64.cast([0,3e4]))?n[32]:t.i64.cast([0,3e4])),n[17]),n[28]=t.i64.gt(n[33],t.i64.cast([0,0]))?n[33]:t.i64.cast([0,0])}])},function(e){return n[21]=n[28]}]):t.resolve(n[21]=t.i64.sub(n[18],n[17]))},function(e){return n[22]=n[0].get("group_id"),t.i64.gt(n[21],t.i64.cast([0,0]))?t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastDelayedRequestTimestampMs:n[28]})})},function(e){var r;return r=[n[22],n[21],t.i64.cast([0,3]),void 0,!1],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4],r}]):t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[n[22]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[28]})})},function(e){return n[29]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[29]})})},function(e){return n[30]=n[0].get("group_id"),n[31]=t.i64.of_float(Date.now()),n[32]=t.i64.random(),n[45]=t.i64.and_(t.i64.or_(t.i64.lsl_(n[31],t.i64.to_int32(t.i64.cast([0,22]))),t.i64.and_(n[32],t.i64.cast([0,4194303]))),t.i64.cast([2147483647,4294967295])),t.db.table(3).fetch([[["",n[30]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?t.db.table(3).add({syncDatabaseId:n[30],taskQueueName:"",failureCount:t.i64.cast([0,0]),lastSentTimestampMs:t.i64.cast([0,0]),lastSyncRequestTimestampMs:t.i64.cast([0,0]),epochId:n[45]}):(r=a.item,t.forEach(t.db.table(3).fetch([[["",n[30]]]]),function(e){var t=e.update,r=e.item;return t({epochId:n[45]})}))})},function(e){return n[34]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[34]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[35]=t.i64.cast([0,0]):(r=a.item,n[35]=r.failureCount)})},function(e){var r;return n[37]=n[0].get("send_sync_params"),n[38]=n[0].get("sync_params"),n[39]=n[0].get("current_cursor"),n[40]=new t.Map,n[40].set("database",n[34]),n[40].set("version",t.i64.cast([-1,4294967295])),n[40].set("epoch_id",n[45]),n[40].set("last_applied_cursor",n[39]),n[40].set("sync_params",n[37]?n[38]:void 0),n[40].set("failure_count",t.i64.gt(n[35],t.i64.cast([0,0]))?n[35]:void 0),n[41]=n[0].get("current_cursor"),n[41]===void 0?n[42]=t.i64.cast([0,1]):n[42]=t.i64.cast([0,2]),n[43]=new t.Map,n[43].set("type",n[42]),n[43].set("request_payload",n[40]),n[44]=n[0].get("sync_channel"),r=[n[30],void 0,t.i64.cast([0,1]),n[43],t.i64.eq(n[44],t.i64.cast([0,2]))],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4]}])},function(e){var t;return t=[n[23],n[24],n[25],n[26],n[27]],n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=t[3],n[16]=t[4],t}])},function(e){var t;return t=[n[12],n[13],n[14],n[15],n[16]],n[3]=t[0],n[4]=t[1],n[5]=t[2],n[6]=t[3],n[7]=t[4],t}])},function(e){return n[8]=new t.Map,n[8].set("sync_group_id",n[3]),n[8].set("next_sync_ms",n[4]),n[8].set("work_item_type",n[5]),n[8].set("network_payload",n[6]),n[8].set("skip_realtime_gateway",n[7]),r[0]=n[8]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure",e.__tables__=["sync_groups","network_requests"],a.exports=e}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.createArray(),t.forEach(t.db.table(1).fetch(),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSBeginHandlingSyncForSyncGroup"),a.groupId,e[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(e){return r[2]=(r[0].push(r[1]),r[0])}])})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSyncForSyncGroup"),a.syncGroupId,a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSync"),a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCheckThreadConsistency",["LSIssueNewFireAndForgetTask","LSIssueNewTask","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return r("gkx")("15730")?(o[0]=new t.Map,o[0].set("threads",e[0]),o[0].set("metadata",e[1]),o[1]=t.toJSON(o[0]),t.storedProcedure(n("LSIssueNewFireAndForgetTask"),"fire_forget",t.i64.cast([0,18]),o[1])):(o[0]=new t.Map,o[0].set("threads",e[0]),o[0].set("metadata",e[1]),o[1]=t.toJSON(o[0]),t.storedProcedure(n("LSIssueNewTask"),"check-thread-consistency",t.i64.cast([0,160019]),o[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))},function(e){return t.resolve(a)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckThreadConsistencyStoredProcedure",e.__tables__=[];var s=e;l.default=s}),98);
__d("LSCheckThreadConsistencyStoredProcedure",["LSCheckThreadConsistency","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCheckThreadConsistency"),a.threads,a.metadata);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e=r("LSJSInMemoryStorage")(o("LSMetadata").schema);l.default=e}),98);
__d("LSPlatformSyncSystemMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSPlatformClientInit",["FBLogger","LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDatabaseAfterInitSyncSingleton","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformSyncSystemMaybeEagerly","MessengerLogHistory","cr:3411","cr:5083","cr:6044","cr:7528","cr:8131","emptyFunction","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MessengerLogHistory").getInstance("client_init");function u(e){var t=r("emptyFunction");return n("cr:8131")!=null&&r("gkx")("23914")&&(t=n("cr:8131").listenForChangesToBackupState(e)),function(){t&&t()}}function c(t,n){var a=n==="Connected"?(e||(e=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED):(e||(e=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").NOT_CONNECTED);s.debug("Platform client sync connection status: ",n),r("promiseDone")(t.runInTransaction(function(e){return r("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(r("LSFactory")(e),{internetConnectionState:a})},"readwrite",void 0,void 0,i.id+":77"),function(){s.debug("Platform client sync connection status set successfully")},function(e){throw s.error("Platform client sync connection status set failed: "+(e==null?void 0:e.message)),e})}async function d(e,t,a,i,l,d){var m;s.debug("Platform client sync starting..."),(m=o("LSPlatformLsInitLog")).addPoint("onstart_callback"),i(),m.addPoint("onstart_callback_end"),s.debug("Getting datascript evaluator..."),m.addPoint("ds_eval_registration");var p=await t.getEval();s.debug("Getting datascript evaluator success");var _;try{_=n("cr:3411")!=null?n("cr:3411").registerEval(p)()(e):p()(e)}catch(t){r("FBLogger")("ls_web_init").catching(r("getErrorSafe")(t)).mustfix("fail to register datascriptEvaluator"),_=p()(e)}o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),s.debug("Clearing epoch before resume sync..."),d.didEvaluateInitSyncEagerly||(o("LSPlatformLsInitLog").addPoint("ls_clear_epoch"),await o("LSClearEpochBeforeResumeSync").call(e),o("LSPlatformLsInitLog").addPoint("ls_clear_epoch_end"),s.debug("Clearing epoch before resume sync success"),o("LSPlatformLsInitLog").addPoint("create_client_end"),t.sendHardcodedInitSync&&(s.debug("Starting hard-coded init sync..."),await o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(t,_,e,a),s.debug("Starting hard-coded init sync success"))),o("LSDatabaseAfterInitSyncSingleton").resolveInitSync(Promise.resolve(e)),s.debug("Starting realtime transport");var f=await t.realtimeUnderylingTransport();o("LSPlatformLsInitLog").addPoint("realtime_underlying_transport_end");var g=await n("cr:5083").load().then(function(e){var n=e.LSPlatformRealtimeTransport;return n(f,t.appId,a)});o("LSPlatformLsInitLog").addPoint("platform_realtime_transport_end"),s.debug("Starting task system");var h=await Promise.all([n("cr:7528").load(),n("cr:6044").load()]).then(function(n){var r=n[0],o=n[1];return new r(e,new o(e,g,_,t.schemaVersion))});o("LSPlatformLsInitLog").addPoint("platform_task_system_end"),s.debug("Starting sync system");var y=null;r("promiseDone")(r("LSPlatformSyncSystemMaybeEagerly")(),function(n){y=n(e,g,_,t.schemaVersion,a,t.executeGraphQLLightSpeedRequest)}),s.debug("Starting backup state listeners");var C=u(e);o("LSPlatformLsInitLog").addPoint("init_listeners_backup_state_end");var b;return s.debug("Watching for expired traces"),r("promiseDone")(o("LSDataTraceFlushDeferred").watchForExpiredTraces(e).then(function(e){b=e})),s.debug("Subscribing to mqtt sync status change events"),g.onConnectionStatusChange(function(t){c(e,t)}),s.debug("Platform client sync starting sucess"),o("LSPlatformLsInitLog").endSuccess(),{cleanup:function(){var t;s.debug("Platform client sync cleaning up"),l(e),h==null||h.cleanup(),(t=y)==null||t.cleanup(),g.cleanup(),C(),b==null||b()},db:e}}l.init=d}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","cr:10018","emptyFunction","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("emptyFunction").thatReturns(Promise.resolve());function u(e,t,n){var a,i=async function(){var i=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");a=await o("LSPlatformClientInit").init(e,t,i,r("emptyFunction"),r("emptyFunction"),n)};return{cleanup:function(){var e;(e=a)==null||e.cleanup()},db:e,start:i}}async function c(e,t,a){if(n("cr:10018")==null)throw r("FBLogger")("messenger_web").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");var i=await n("cr:10018").make(e,t,a);return i.isTabWithoutClient()===!0&&(o("MAWMIC").addPoint("ls_init_end"),o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end),o("MAWMIC").addBoolAnnotation("LsInitSkipped",!0),o("LSPlatformLsInitLog").addPoint("no_ls_sync"),o("LSPlatformLsInitLog").endSuccess()),{cleanup:r("emptyFunction"),db:e,start:s}}async function d(t,a){if(o("LSPlatformLsInitLog").addPoint("make_client"),(e||(e=r("ExecutionEnvironment"))).canUseDOM){o("LSPlatformLsInitLog").addPoint("create_client_get_db");var i=await t.getDb();if(o("LSPlatformLsInitLog").addPoint("create_client_start"),o("LSDatabaseProviderType").isProviderPersisted(i)&&n("cr:10018")!==null)try{return c(i,t,a)}catch(e){throw o("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:r("getErrorSafe")(e).message}}),o("LSPlatformLsInitLog").fail("client_for_pdb_error"),e}return u(i,t,a)}return{cleanup:r("emptyFunction"),db:r("LSCometSSRDatabase"),start:s}}l.make=d}),98);
__d("LSPlatformDGWTransport",["DGWClient","DGWExponentialBackoff","DGWLoggingContext","DGWStream","DGWStreamGroupCallbacks","FBLogger","LSIntEnum","LSLogHistory","LSPlatformDGWHostnameOverride","LSPlatformRealtimeTransport","LSStreamGroupRef","MWPBumpEntityKey","MessengerWebRegion","MqttConfig","NetworkStatus","QuickPerformanceLogger","Random","getErrorSafe","gkx","justknobx","promiseDone","qex","qpl","setTimeout","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=r("gkx")("3218"),h=r("gkx")("12101"),y=(e=r("qex")._("2084"))!=null?e:!1,C=(s=r("qex")._("2085"))!=null?s:!1,b=(u=r("qex")._("2088"))!=null?u:!1,v=(c=r("qex")._("2090"))!=null?c:!1,S=(d=r("qex")._("2092"))!=null?d:!1,R=(m=r("qex")._("4209"))!=null?m:!1,L=(p=r("qex")._("2102"))!=null?p:3e4,E=r("justknobx")._("1573"),k=r("justknobx")._("3666"),I=r("qpl")._(701246226,"1285"),T=15,D=0,x=!1,$=new Map,P=null,N=!1,M=!1,w=null,A={contents:function(){}},F={contents:new Promise(function(e,t){A.contents=e})};function O(e){var t=1*Math.pow(2,e);return t=Math.max(t,1),t=Math.min(t,64),Math.ceil(t*(1e3+o("Random").random()*200))}function B(e,t,n,a){var i;if(N){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"SkipReconnectAttempt","","deviceId:"+e);return}N=!0;var s=O(D++);b&&D>T&&(D=0);var u="deviceId:"+e+", reconnectMs:"+s+", attempt:"+D+", isClosedLocally:"+String(M);(i=o("LSStreamGroupRef").streamGroupRef.current)==null||i.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ScheduleReconnect","",u),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"scheduleReconnect"),w=r("setTimeout")(function(){W(e,t,n,a),N=!1},s)}function W(e,t,n,a){var i=r("uuidv4")();o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId=i;var l={authToken:n,authType:a,connectTimeoutMs:k,deviceId:e,keepAliveMs:E,loggingId:i,serviceId:"lightspeed",streamGroupAppHeaders:{},verboseLoggingEnabled:g};h&&(l.trafficTracing="dgw-"+i),o("MessengerWebRegion").regionNullable!=null&&(l.regionHint=o("MessengerWebRegion").regionNullable);var s={onStreamGroupError:function(r){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Error")),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError",o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r),"deviceId:"+e),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r)),o("DGWStreamGroupCallbacks").isRetryableError(r)?(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isRetryableError"),B(e,"reconnect_on_streamgrouperror."+o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r),n,a)):o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isNotRetryableError")},onStreamGroupMustDrain:function(r){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamGroupMustDrain."+r),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain",r,"deviceId:"+e),B(e,"reconnect_on_streamgroupmustdrain",n,a)},onStreamGroupTransportClose:function(){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var r;(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Close")),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose","","deviceId:"+e),B(e,"onStreamGroupTransportClose",n,a)}};$.clear(),o("LSStreamGroupRef").streamGroupRef.status="Connecting",F.contents=new Promise(function(e,t){A.contents=e});var u=r("DGWClient")().createStreamGroup(s,l),c="deviceId:"+e+", runtime_site_is_comet_fb_web:"+String(r("gkx")("2116"))+", endpoint:"+r("MqttConfig").endpoint+", reason:"+t;return u.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"CreatingStreamGroupTransport","",c),r("promiseDone")(u.initTransport(),function(n){var r;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var a;(a=o("LSStreamGroupRef").streamGroupRef.current)==null||a.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSLogHistory").log("StreamGroupTransport Connected","debug"),o("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(o("LSStreamGroupRef").streamGroupRef.status="Connected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Connected")),x&&o("LSStreamGroupRef").streamGroupRef.reconnectHandler&&o("LSStreamGroupRef").streamGroupRef.reconnectHandler(3),x=!0,(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen","","deviceId:"+e+", reason:"+t),D=0,A.contents()},function(t){var r;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSLogHistory").log("StreamGroupTransport onError","debug"),o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected",t)),(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError",String(t),"deviceId:"+e),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"WebSocketOnError"),t!==o("DGWStream").StreamError.UNAUTHORIZED&&B(e,"reconnect_on_streamgrouptransportonerror."+String(t),n,a)}),o("LSStreamGroupRef").streamGroupRef.current=u,o("LSStreamGroupRef").streamGroupRef.current}async function q(e,t,n,a){n===void 0&&(n=!0);var i=o("LSStreamGroupRef").streamGroupRef.current;if(i==null)throw r("FBLogger")("ls_web_init").mustfixThrow("LS Stream Group not initialized");var l=new TextDecoder,s={};o("LSPlatformDGWHostnameOverride").useHostNameOverride&&o("LSPlatformDGWHostnameOverride").hostNameOverride!=null&&(s["javascript-sandbox"]=o("LSPlatformDGWHostnameOverride").hostNameOverride);try{var u=r("uuidv4")(),c=R?await o("DGWExponentialBackoff").callWithExponentialBackoff(function(){return i.establishStream({ackTimeoutMs:L,groupedStreamHeaders:s,loggingId:u,verboseLoggingEnabled:g},{onClose:function(){o("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(t){var e=l.decode(t);e.length>0&&o("LSStreamGroupRef").streamGroupRef.subscribers.forEach(function(t){t(e)})},onError:function(t){o("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(t){o("LSLogHistory").log("Stream finished sending data","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),t.close()},onStreamMustDrain:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),o("LSLogHistory").log("Stream must drain","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),t.close()}},t,n,a)},{backoffFactor:2,baseRetryInterval:1e3,maxRetries:2}):await i.establishStream({ackTimeoutMs:L,groupedStreamHeaders:s,loggingId:u,verboseLoggingEnabled:g},{onClose:function(){o("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(t){var e=l.decode(t);e.length>0&&o("LSStreamGroupRef").streamGroupRef.subscribers.forEach(function(t){t(e)})},onError:function(t){o("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(t){o("LSLogHistory").log("Stream finished sending data","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),t.close()},onStreamMustDrain:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),o("LSLogHistory").log("Stream must drain","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),t.close()}},t,n,a);return o("LSLogHistory").log("Stream Connected","debug"),c}catch(t){throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamFailure."+e),o("LSLogHistory").log("Error Establishing Stream. Disconnected","debug"),t}}var U="Disconnected",V=function(){return U};function H(e,t,n,r){return P||(P=G(e,t,"init_single_transport_instance",n,r)),P}function G(e,t,n,a,i){var l=new TextEncoder;W(t,n,a,i);var s=r("NetworkStatus").onChange(function(e){var n=e.online;C&&n&&w!=null&&(window.clearTimeout(w),w=null,N=!1,D=0,B(t,"network_status_change",a,i))});return{cleanup:function(){var e;M=!0,s.remove(),(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.close(),o("LSStreamGroupRef").streamGroupRef.reconnectHandler=null,o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null,o("LSStreamGroupRef").streamGroupRef.subscribers.clear()},logEvent:function(t){var e;(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,t)},onConnectionStatusChange:function(t){return o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=t,function(){o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null}},onReconnect:function(t){return o("LSStreamGroupRef").streamGroupRef.reconnectHandler=t,function(){o("LSStreamGroupRef").streamGroupRef.reconnectHandler=null}},publish:async function(n,s,u){var e=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);(f||(f=r("QuickPerformanceLogger"))).markerStart(I,e),f.markerAnnotate(I,{int:{database:u},string:{streamGroupId:o("LSStreamGroupRef").getTransportId()}},{instanceKey:e});var c=(_||(_=o("LSIntEnum"))).toNumber(s);try{o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream."+(_||(_=o("LSIntEnum"))).toNumber(s)),o("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(S&&o("LSStreamGroupRef").streamGroupRef.status==="Disconnected"&&(w!=null&&(window.clearTimeout(w),w=null,D=0,N=!1),(f||(f=r("QuickPerformanceLogger"))).markerPoint(I,"reconnect",{instanceKey:e}),W(t,"reconnect_when_publish",a,i)),(f||(f=r("QuickPerformanceLogger"))).markerPoint(I,"wait_for_connection",{instanceKey:e}),await F.contents.catch(function(){var e;return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ConnectionTimeout."+c),(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","ConnectionTimeout",String(c)),Promise.reject({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})})),(f||(f=r("QuickPerformanceLogger"))).markerPoint(I,"send_message",{instanceKey:e});var d=(_||(_=o("LSIntEnum"))).unwrapIntEnum(s)===1||(_||(_=o("LSIntEnum"))).unwrapIntEnum(s)===2;if(d&&$.has(u)){var m=$.get(u);await(m==null?void 0:m.send(l.encode(n)))}else{var p=(_||(_=o("LSIntEnum"))).unwrapIntEnum(s)!==4,g={int:{databaseType:u,requestType:c}},h=await q(c,l.encode(n),p,g);p&&(f||(f=r("QuickPerformanceLogger"))).markerPoint(I,"send_message_acked",{instanceKey:e}),(f||(f=r("QuickPerformanceLogger"))).markerEnd(I,2,e),d&&$.set(u,h)}}catch(n){var C;if(n===o("DGWStream").StreamError.ACK_TIMEOUT&&(f||(f=r("QuickPerformanceLogger"))).markerPoint(I,"ack_timeout",{instanceKey:e}),(f||(f=r("QuickPerformanceLogger"))).markerEnd(I,3,e),r("getErrorSafe")(n).message==="Max number of stream IDs reached"){var b;o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamIdLimitExceeded."+c),(b=o("LSStreamGroupRef").streamGroupRef.current)==null||b.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream","StreamIdLimitExceeded",c.toString())}o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamError."+c),(C=o("LSStreamGroupRef").streamGroupRef.current)==null||C.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","Failed to publish payload",c.toString());var R=y&&(_||(_=o("LSIntEnum"))).unwrapIntEnum(s)===3;return R?Promise.resolve():(v&&n===o("DGWStream").StreamError.ACK_TIMEOUT&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",w!=null&&(window.clearTimeout(w),w=null,D=0,N=!1),W(t,"stream_ack_timeout",a,i)),Promise.reject(n))}},subscribe:function(t){return o("LSStreamGroupRef").streamGroupRef.subscribers.set(t,t),function(){o("LSStreamGroupRef").streamGroupRef.subscribers.delete(t)}}}}l.getStatusForDebugging=V,l.LSPlatformDGWTransport=H}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","ReQL","gkx","promiseDone","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){var d=o("MessengerLogHistory").getInstance("client_sync"),m=new(r("LSPlatformServerResponseHandler"))(a),p=o("LSDatabaseProviderType").isProviderPersisted(t),_=function(r){return t.runInTransaction(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.network_requests).getKeyRange("",r));n!=null&&await t.network_requests.put({epochId:void 0,failureCount:(e||(e=o("I64"))).add(n.failureCount,e.one),lastDelayedRequestTimestampMs:n.lastDelayedRequestTimestampMs,lastSentTimestampMs:n.lastSentTimestampMs,lastSyncRequestTimestampMs:n.lastSyncRequestTimestampMs,networkTaskIdentifier:n.networkTaskIdentifier,syncDatabaseId:n.syncDatabaseId,taskQueueName:n.taskQueueName})},"readwrite",void 0,void 0,i.id+":78")},f=new(r("LSPlatformRequestScheduler")),g=async function(d,_){var i=o("LSShape").toRecord(_),f=o("LSShape").toRecord(i.request_payload),g=i.type,h=r("LSPlatformRequestId").generate(),y=o("LSJson").stringify(o("LSShape").ofRecord({database:f.database,epoch_id:f.epoch_id,failure_count:f.failure_count,last_applied_cursor:f.last_applied_cursor,sync_params:f.sync_params,version:(e||(e=o("I64"))).of_string(l)})),C=(e||(e=o("I64"))).equal(d.sync_group_id,(s||(s=o("LSIntEnum"))).ofNumber(1))&&r("gkx")("26386")===!0;if(!C&&d.skip_realtime_gateway){var b=await o("LSPlatformGraphQLTransport").publish(u,h,g,y,c),v=b[0],S=b[1],R=b[2],L=b[3],E={experiments:R,syncScript:S,target:L};return p?m.maybeEvalInOrderReceived(v,E):a(E)}else{var k=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(d.sync_group_id)),I=(s||(s=o("LSIntEnum"))).ofNumber(2),T=(e||(e=o("I64"))).to_int32(f.database),D=o("LSMailboxInitialSyncCursor").dgwDisabledSyncGroups.split(",").includes(String(T)),x;k!=null&&(e||(e=o("I64"))).equal(k.syncChannel,I)?x=I:x=D?(s||(s=o("LSIntEnum"))).ofNumber(1):o("LSMailboxInitialSyncCursor").syncChannel;var $=r("qex")._("2071");if(k!=null&&$!=null&&$!=="default"){var P=(s||(s=o("LSIntEnum"))).unwrapIntEnum(g);if(P===1||P===2||P===5){var N=$+"."+(s||(s=o("LSIntEnum"))).toNumber(x)+"."+s.toNumber(g)+"."+s.toNumber(k.groupId);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",N)}}return n.publish({databaseType:T,payload:y,queueName:void 0,requestId:h,syncChannel:x,type_:g}).then(function(){return Promise.resolve()})}},h=function(a){var n=function(n){return t.runInTransaction(function(e){return r("LSBeginHandlingSyncForSyncGroupStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1,syncGroupId:n})},"readwrite",void 0,void 0,i.id+":216").then(function(e){return h(e[0])})},l=function(a,i){f.schedule(function(){r("promiseDone")(n(a))},(e||(e=o("I64"))).to_string(a),e.to_float(i))},u=o("LSShape").toRecord(a),c=u.work_item_type;if((e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(5))){var m=r("qex")._("2071");if(m!=null&&m!=="default"){var p=m+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",p)}var y=u.network_payload;return y!=null?g(u,y).catch(function(e){if(m!=null&&m!=="default"){var t=m+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.notconnected")}if(e.message===o("LSPlatformGraphQLTransport").ServerError)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout||e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),d.debug("Publish timed out");else if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an JS error while publishing a LS sync request");else{var a="";try{a=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("Encountered an JS error while publishing a LS sync request %s",a)}return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(s||(s=o("LSIntEnum"))).toNumber(o("LSShape").toRecord(y).type)+"."+s.toNumber(u.sync_group_id)),_(u.sync_group_id).then(function(){return n(u.sync_group_id)})}):(r("FBLogger")("ls_web_init").mustfix("Expected networkpayload for sync request but didn't get any"),Promise.resolve())}if(!(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(3)))return(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(4))||!(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(2))||r("FBLogger")("ls_web_init").mustfix("Native handling for sync group not implemented yet"),Promise.resolve();var C=u.next_sync_ms;return C!=null?(l(u.sync_group_id,C),Promise.resolve()):(r("FBLogger")("ls_web_init").mustfix("Expected delay for delayed sync request but didn't get any"),Promise.resolve())},y=function(t){return Promise.all(r("LSVec").toArray(t[0]).map(function(e){return h(e)}))},C=function(){r("promiseDone")(t.runInTransaction(function(e){return r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,i.id+":394").then(y))},b=r("throttle")(C,500),v=function(){return o("ReQL").fromTableAscending(t.tables.sync_groups).subscribe(function(){return b()})},S=function(){return n.subscribeToNonTaskResponses(function(e,t){var n=t.ex,a=t.payload,i={experiments:n,sp:t.sp,syncScript:a,target:t.target};r("promiseDone")(m.maybeEvalInOrderReceived(e,i),function(){return b()},function(e){if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,e.message);else{var t="";try{t=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,t)}})})},R=function(){return n.onReconnect(function(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),!(o("LSMailboxInitialSyncCursor").isWebApp&&e===1&&r("qex")._("2072")===!0&&r("qex")._("2080")===!0)&&(d.debug("Sync System reconnecting"),r("promiseDone")(t.runInTransaction(async function(e){var n,a=await(n=o("ReQL")).toArrayAsync(n.mergeJoin(n.fromTableAscending(t.tables.sync_groups),n.fromTableAscending(t.tables.network_requests).getKeyRange("")));return await Promise.all(a.map(function(t){var n=t[1];return e.network_requests.put({epochId:void 0,failureCount:n.failureCount,lastDelayedRequestTimestampMs:n.lastDelayedRequestTimestampMs,lastSentTimestampMs:n.lastSentTimestampMs,lastSyncRequestTimestampMs:n.lastSyncRequestTimestampMs,networkTaskIdentifier:n.networkTaskIdentifier,syncDatabaseId:n.syncDatabaseId,taskQueueName:n.taskQueueName})})),r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,i.id+":488").then(y)))})},L=v(),E=S(),k=R();return b(),{cleanup:function(){L(),k(),E()}}}l.default=u}),98);
__d("MAWThreadConsistencyLogger",["FBLogger","I64","LSAuthorityLevel","LSCheckThreadConsistencyStoredProcedure","LSDatabaseSingleton","LSFactory","LSMessagingThreadTypeUtil","LSShape","LSVec","ODS","ReQL","WAArrayZip","clearInterval","gkx","justknobx","promiseDone","qex","setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=20,d=r("justknobx")._("3207"),m=!r("gkx")("5457"),p=!1,_=null;function f(){p||m||(p=!0,r("clearInterval")(_),_=r("setInterval")(function(){document.visibilityState==="visible"&&r("promiseDone")(g())},d*1e3))}async function g(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;r("promiseDone")(t.runInTransaction(async function(e){(s||(s=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","initiate_snapshot");var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(e.threads.index("lastActivityTimestampMs")).filter(h).take(c));if(t.length===0){(s||(s=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","no_e2ee_threads_fetched_on_client");return}var n;r("qex")._("18")?n=await Promise.all(t.map(function(t){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(t.threadKey))})):n=await Promise.all(t.map(function(t){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.messages.index("messageDisplayOrder")).getKeyRange(t.threadKey))}));var a=o("WAArrayZip").zip(t,n).map(function(e){var t=e[0],n=e[1];return o("LSShape").ofRecord({is_last_activity_optimistic:y(n),last_activity_timestamp_ms:t.lastActivityTimestampMs,last_read_timestamp_ms:t.lastReadWatermarkTimestampMs,thread_key:t.threadKey})});return r("LSCheckThreadConsistencyStoredProcedure")(r("LSFactory")(e),{metadata:o("LSShape").ofRecord({client_snapshot_timestamp_ms:(u||(u=o("I64"))).of_float(Date.now()),session_timestamp_ms:u.of_int32(Math.round(window.performance.now()))}),threads:r("LSVec").ofArray(a)})},"readonly",void 0,void 0,i.id+":59"),function(){return(s||(s=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","send_snapshot")},function(e){r("FBLogger")("maw_tc_metric").catching(e).warn("failed to send tc metric snapshot")})}function h(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&e.folderName==="inbox"&&(u||(u=o("I64"))).to_int32(e.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE}function y(e){return e==null?!1:(u||(u=o("I64"))).to_int32(e.authorityLevel)<r("LSAuthorityLevel").AUTHORITATIVE}l.startMAWThreadConsistencyLogger=f,l.MAWThreadConsistencyLoggerTakeSnapshot=g}),98);
__d("getLSMediaContactProfilePictureLargeUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.profilePictureLargeUrlExpirationTimestampMs;if(t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)){var n;return(n=e.profilePictureLargeFallbackUrl)!=null?n:e.profilePictureLargeUrl}else return e.profilePictureLargeUrl}l.default=e}),98);
__d("MWDesktopNotifications",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlAttachment","LSMessagingThreadTypeUtil","MAWAttachmentBlob.react","MAWGetAttachmentThumbnailBlob","MessagingAttachmentType","ReQL","cr:2472","getLSMediaContactProfilePictureLargeUrl","getLSMediaContactProfilePictureUrl","getLSMediaThreadPictureUrl","getMWPAttachmentMessageAnnouncement","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;async function c(t,n,a){var i,l,s;if(((i=Notification)==null?void 0:i.permission)==="granted"){var u=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n.threadKey)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n.senderId)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.participants).getKeyRange(n.threadKey,n.senderId)),o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.attachments).getKeyRange(n.threadKey,n.messageId))]),c=u[0],_=u[1],f=u[2],g=u[3];if(!(c==null||_==null||f==null)){var h=o("LSMessagingThreadTypeUtil").isGroup(c.threadType),y=d(h,c.threadName,f.nickname,_.name),C=m(n,g),b=await p(g,o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType)),v=new Notification(y,{body:C,icon:(l=(s=r("getLSMediaThreadPictureUrl")(c))!=null?s:r("getLSMediaContactProfilePictureLargeUrl")(_))!=null?l:r("getLSMediaContactProfilePictureUrl")(_),image:b,tag:n.messageId,timestamp:(e||(e=o("I64"))).to_float(n.timestampMs)});v.onclick=function(){window.focus(),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n.threadKey)),function(e){e!=null&&a.openInbox({threadKey:n.threadKey,threadType:e.threadType},"desktopNotification")})}}}}function d(e,t,n,r){var o=n!=null?n:r;return e&&t!=null?s._(/*BTDS*/"{senderName} to {threadName}",[s._param("senderName",o),s._param("threadName",t)]).toString():e?s._(/*BTDS*/"{senderName} to your group",[s._param("senderName",o)]).toString():o}function m(e,t){var o,a=e.text,i=a!=null?n("cr:2472")==null?a:n("cr:2472").unvault(a):null;return i!=null&&i!==""?i:(o=r("getMWPAttachmentMessageAnnouncement")(t,!1))==null?void 0:o.toString()}async function p(t,n){if(t.length!==0){var a=t[0];if(!n)return o("LSMediaUrlAttachment").previewUrl(a);var i=a.attachmentFbid,l=a.attachmentType,s=a.authorityLevel;if(!(i===(e||(e=o("I64"))).to_string((e||(e=o("I64"))).max_int)&&(e||(e=o("I64"))).equal(s,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))))switch(!0){case(e||(e=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)):try{return o("MAWGetAttachmentThumbnailBlob").getThumbnailBlob_CausesSuspense(a,"MWDesktopNotifications",void 0,a.attachmentFbid+"_MWDesktopNotifications")}catch(e){if(e instanceof Promise)return e;throw e}case(e||(e=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)):if(a.previewUrl!=null)return o("LSMediaUrlAttachment").previewUrl(a);try{return o("MAWAttachmentBlob.react").getInfoUrlXMA_CausesSuspense(a,"preview","MWDesktopNotifications")}catch(e){if(e instanceof Promise)return e;throw e}case(e||(e=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)):case(e||(e=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)):case(e||(e=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)):try{return o("MAWAttachmentBlob.react").getAttachmentBlobNonOptional_CausesSuspense(a.attachmentFbid,"MWDesktopNotifications",void 0,a.attachmentFbid+"_MWDesktopNotifications")}catch(e){if(e instanceof Promise)return e;throw e}}}}l.triggerLocalNotification=c}),226);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPathGated",["cr:8129","cr:8784"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:8784"))!=null?e:n("cr:8129"),u=s;l.default=u}),98);
__d("useMAWEncryptedBackupsRestoreToast",["fbt","ix","BaseToasterStateManager","FDSArrowsCircleFilled24Icon","FDSCheckmarkFilled24Icon","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","SVGIcon","cr:1376","cr:4027","cr:6570","mwPushToast","react","react-compiler-runtime","useLabyrinthLogging"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useRef;function _(){var e=o("react-compiler-runtime").c(10),t=p(null),a=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),i=a.startFlow,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=n("cr:6570")?c.jsx(n("cr:6570"),{color:"primary",icon:r("FDSArrowsCircleFilled24Icon"),size:24}):void 0,e[0]=l):l=e[0];var d=l,m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=n("cr:1376")?new(n("cr:1376"))(u("685423"),32,32):void 0,e[1]=m):m=e[1];var _=m,f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=r("BaseToasterStateManager").getInstance(),e[2]=f):f=e[2];var g=f,h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=function(){t.current!=null&&(g.expire(t.current),t.current=null)},e[3]=h):h=e[3];var y=h,C;e[4]!==i?(C=function(){y(),t.current=o("mwPushToast").mwPushToast({body:s._(/*BTDS*/"Restoring messages..."),icon:{comet:d,mds:_},testid:"mw-chat-encrypted-backups-restore-in-progress-toast"}),i({event:o("MWChatEncryptedBackupsQPLEvents").messageRestoreQplEvent}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").messageRestoreQplEvent,"restore_begin_toast")},e[4]=i,e[5]=C):C=e[5];var b=C,v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=function(){y(),o("mwPushToast").mwPushErrorToast({body:s._(/*BTDS*/"Failed to restore end-to-end encrypted messages. Try again.")})},e[6]=v):v=e[6];var S=v,R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R=function(){var e=n("cr:6570")?c.jsx(n("cr:6570"),{icon:r("FDSCheckmarkFilled24Icon"),size:24}):void 0,a=n("cr:4027")?o("SVGIcon").svgIcon(n("cr:4027")):void 0;y(),t.current=o("mwPushToast").mwPushToast({body:s._(/*BTDS*/"End-to-end encrypted messages restored."),icon:{comet:e,mds:a},testid:"mw-chat-encrypted-backups-restore-successful-toast"}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").messageRestoreQplEvent,"restore_successful_toast"),o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").messageRestoreQplEvent})},e[7]=R):R=e[7];var L=R,E;return e[8]!==b?(E={hideToast:y,showErrorToast:S,showInProgressToast:b,showSuccessToast:L},e[8]=b,e[9]=E):E=e[9],E}l.default=_}),226);/*FB_PKG_DELIM*/
__d("fbs",["fbt","invariant","FbtHooks","FbtPureStringResult"],(function(t,n,r,o,a,i,l,s){var e,u={},c=babelHelpers.extends({},l,{_param:function(t,r,o){return typeof r=="string"||r instanceof n("FbtPureStringResult")||s(0,11709,r,typeof r),l._param(t,r,o)},_plural:function(t,r,o){return o==null||typeof o=="string"||o instanceof n("FbtPureStringResult")||s(0,47119,o,typeof o),l._plural(t,r,o)},_wrapContent:function(r,o,a,i){var t=typeof r=="string"?[r]:r,l=(e||(e=n("FbtHooks"))).getErrorListener({hash:a,translation:o});return e.getFbsResult({contents:t,errorListener:l,extraOptions:i,patternHash:a,patternString:o})},cachedResults:u}),d=c;a.exports=d}),null);
__d("formatNumber",["fbs","intlNumUtils"],(function(t,n,r,o,a,i){"use strict";function e(e,t){return n("intlNumUtils").formatNumber(e,t)}function l(e,t){return n("fbs")._(/*BTDS*/"_j{\"*\":\"{number}+\"}",[n("fbs")._param("number",n("intlNumUtils").formatNumberWithThousandDelimiters(e,t),[0,e])])}function s(e,t){return n("fbs")._(/*BTDS*/"_j{\"*\":\"\\u003C{number}\"}",[n("fbs")._param("number",n("intlNumUtils").formatNumberWithThousandDelimiters(e,t),[0,e])])}function u(e,t,r){return e>t?l(t,r):n("intlNumUtils").formatNumberWithThousandDelimiters(e,r)}function c(e,t,r){return e<t?s(t,r):n("intlNumUtils").formatNumberWithThousandDelimiters(e,r)}e.withThousandDelimiters=n("intlNumUtils").formatNumberWithThousandDelimiters,e.withMaxLimit=u,e.withMinLimit=c,a.exports=e}),130);
__d("BaseNumber.react",["formatNumber","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.decimals,a=e.number,i;return t[0]!==n||t[1]!==a?(i=r("formatNumber").withThousandDelimiters(a,n),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}var c=s.memo(u);l.default=c}),98);
__d("useBaseProgressRingSvg.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useRef,m=2;function p(e){var t=o("react-compiler-runtime").c(48),n=e.backgroundColor,r=e.foregroundColor,a=e.isHidden,i=e.size,l=d(null),u=d(null),c=d(null),p=(i-m)*Math.PI,_,f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"},t[0]=f):f=t[0];var g="0 0 "+i+" "+i,h=i/2,y=i/2,C=(i-m)/2,b;t[1]!==n||t[2]!==h||t[3]!==y||t[4]!==C?(b=s.jsx("circle",{cx:h,cy:y,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:C,stroke:n,strokeLinecap:"round",strokeWidth:m}),t[1]=n,t[2]=h,t[3]=y,t[4]=C,t[5]=b):b=t[5];var v;t[6]!==i||t[7]!==g||t[8]!==b?(v=s.jsx("svg",babelHelpers.extends({},f,{height:i,ref:l,viewBox:g,width:i,children:b})),t[6]=i,t[7]=g,t[8]=b,t[9]=v):v=t[9];var S,R;t[10]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1ey2m1c xtijo5x xbudbmw x6ikm8r x10wlt62 x10l6tqk x13vifvy"},S={className:"x1ey2m1c x9f619 xtijo5x xyj9dbu x10l6tqk x13vifvy x1jpgh95"},t[10]=S,t[11]=R):(S=t[10],R=t[11]);var L="0 0 "+i+" "+i,E=i/2,k=i/2,I=(i-m)/2,T=p/2,D=3*p/4,x=a?"hidden":void 0,$;t[12]!==x?($={visibility:x},t[12]=x,t[13]=$):$=t[13];var P;t[14]!==r||t[15]!==E||t[16]!==k||t[17]!==I||t[18]!==T||t[19]!==D||t[20]!==$?(P=s.jsx("circle",{cx:E,cy:k,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:I,stroke:r,strokeDasharray:T,strokeDashoffset:D,strokeWidth:m,style:$}),t[14]=r,t[15]=E,t[16]=k,t[17]=I,t[18]=T,t[19]=D,t[20]=$,t[21]=P):P=t[21];var N;t[22]!==i||t[23]!==L||t[24]!==P?(N=s.jsx("div",babelHelpers.extends({},R,{children:s.jsx("svg",babelHelpers.extends({},S,{height:i,ref:u,viewBox:L,width:i,children:P}))})),t[22]=i,t[23]=L,t[24]=P,t[25]=N):N=t[25];var M,w;t[26]===Symbol.for("react.memo_cache_sentinel")?(M={className:"x1ey2m1c x1dkd41z x1o0tod x6ikm8r x10wlt62 x10l6tqk x13vifvy"},w={className:"x1ey2m1c x9f619 x1h4o2ik x1o0tod x10l6tqk x13vifvy x1jpgh95"},t[26]=M,t[27]=w):(M=t[26],w=t[27]);var A="0 0 "+i+" "+i,F=i/2,O=i/2,B=(i-m)/2,W=p/2,q=p/4,U=a?"hidden":void 0,V;t[28]!==U?(V={visibility:U},t[28]=U,t[29]=V):V=t[29];var H;t[30]!==r||t[31]!==F||t[32]!==O||t[33]!==B||t[34]!==W||t[35]!==q||t[36]!==V?(H=s.jsx("circle",{cx:F,cy:O,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:B,stroke:r,strokeDasharray:W,strokeDashoffset:q,strokeWidth:m,style:V}),t[30]=r,t[31]=F,t[32]=O,t[33]=B,t[34]=W,t[35]=q,t[36]=V,t[37]=H):H=t[37];var G;t[38]!==i||t[39]!==A||t[40]!==H?(G=s.jsx("div",babelHelpers.extends({},M,{children:s.jsx("svg",babelHelpers.extends({},w,{height:i,ref:c,viewBox:A,width:i,children:H}))})),t[38]=i,t[39]=A,t[40]=H,t[41]=G):G=t[41];var z;t[42]!==N||t[43]!==G||t[44]!==v?(z=s.jsxs(s.Fragment,{children:[v,N,G]}),t[42]=N,t[43]=G,t[44]=v,t[45]=z):z=t[45],_=z;var j=_,K;return t[46]!==j?(K={backgroundRef:l,leftCircleRef:c,progressRing:j,rightCircleRef:u},t[46]=j,t[47]=K):K=t[47],K}l.default=p}),98);
__d("BaseProgressRing.react",["BaseLoadingStateElement.react","FBLogger","FDSProgressRingUtils","performanceNavigationStart","react","useBaseProgressRingSvg.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useLayoutEffect,p=u.useRef,_=u.useState,f={rootDiv:{position:"x1n2onr6",$$css:!0},rootSizing:function(t,n){return[{height:n!=null?"x16ye13r":n,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}},g=o("FDSProgressRingUtils").getCubicBezierPercentageFunc(.45,0,.25,.85);function h(e){var t=e["aria-label"],n=e["aria-labelledby"],o=e.backgroundColor,a=e.beginningPercentage,i=e.duration,l=e.explicitStartTime,u=e.foregroundColor,h=e.onComplete,b=e.pause,v=e.percentage,S=e.size,R=e.type;R!=="default"&&v!=null&&r("FBLogger")("comet_ui").mustfix("percentage should only be applied to default type");var L=p(null),E=p(null),k=_(!0),I=k[0],T=k[1],D=y(R,v,a),x=D.completedPercentage,$=D.finalPercentage,P=D.startPercentage,N=p(P),M=p($),w=p(x),A=r("useBaseProgressRingSvg.react")({backgroundColor:o,foregroundColor:u,isHidden:I,size:S}),F=A.backgroundRef,O=A.leftCircleRef,B=A.progressRing,W=A.rightCircleRef,q=c(function(e){var t=W.current,n=O.current;if(!(t==null||n==null)&&!(!(t instanceof SVGSVGElement)||!(n instanceof SVGSVGElement))&&!((R==="default"||R==="count-down")&&b===!0)){if(E.current==null&&(E.current=l!=null?l-r("performanceNavigationStart")():e),R==="estimated")if(w.current>75)w.current+=.3*Math.pow((100-w.current)/50,2);else{var o=(e-E.current)/i/1e3,a=g(o);w.current=a*75}else if(R==="default"&&w.current<M.current){var s=(e-E.current)/1e3/i*100;w.current=Math.min(s,100)}else if(R==="count-down"&&w.current>M.current){var u=(e-E.current)/1e3/i*100;w.current=N.current-u,w.current=Math.max(w.current,0)}var c=Math.max(0,Math.min(100,w.current))/100*360;t.style.transform="rotate("+Math.min(c,180)+"deg)",n.style.transform="rotate("+Math.max(c-180,0)+"deg)",C(R,w.current,v)?(window.cancelAnimationFrame(L.current),t.style.opacity="0",n.style.opacity="0",E.current=null,L.current=null,F.current instanceof SVGSVGElement&&(F.current.style.opacity="0"),h&&h()):L.current=window.requestAnimationFrame(q)}},[F,i,l,O,h,b,v,W,R]);return m(function(){I&&T(!I)},[I]),d(function(){if(window.requestAnimationFrame!=null)return L.current=window.requestAnimationFrame(q),function(){L.current!=null&&(E.current=null,window.cancelAnimationFrame(L.current),L.current=null)}},[S,q]),s.jsx(r("BaseLoadingStateElement.react"),{"aria-label":t,"aria-labelledby":n,xstyle:[f.rootDiv,f.rootSizing(S,S)],children:B})}h.displayName=h.name+" [from "+i.id+"]";function y(e,t,n){switch(e){case"default":return{completedPercentage:n!=null?n:0,finalPercentage:t!=null?t:100,startPercentage:n!=null?n:0};case"count-down":return{completedPercentage:100,finalPercentage:0,startPercentage:100};case"estimated":return{completedPercentage:0,finalPercentage:75,startPercentage:0};default:return{completedPercentage:0,finalPercentage:0,startPercentage:0}}}function C(e,t,n){return e==="count-down"?t<=0||t>100:t>=(n!=null?n:100)}l.default=h}),98);
__d("VirtualizationConfig",[],(function(t,n,r,o,a,i){"use strict";var e={isVisible:!0,nodeHeight:null},l=4e3,s=0,u=!1;i.DEFAULT_INIT_RENDER_CONFIG=e,i.VERTICAL_HIDEABLE_MARGIN=l,i.HORIZONTAL_HIDEABLE_MARGIN=s,i.IS_INTERSECTION_MARGIN_SUPPORTED=u}),66);
__d("VirtualizationContainerContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=s.createContext();l.default=u}),98);
__d("useWeightedScrollSpeedRef.react",["VirtualizationContainerContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect,d=10,m=typeof WeakMap=="function"?WeakMap:Map,p=new m,_=new m;function f(e){var t,n;e===void 0&&(e=null);var o=u(r("VirtualizationContainerContext")),a=typeof e=="function"?e():o==null||(t=o.rootElementRef)==null?void 0:t.current,i=a!=null?a:window,l=(n=_.get(i))!=null?n:{lastScrollY:0,lastTime:Date.now(),speedHistory:[],weightedSpeed:0};return _.set(i,l),c(function(){if(!p.has(i)){var e=function(){var e,t=l.lastScrollY,n=l.lastTime,r=l.speedHistory,o=(e=i===window?window.scrollY:a==null?void 0:a.scrollTop)!=null?e:0,s=Date.now(),u=o-t,c=s-n;if(c>0&&u>0&&c>0){var m=Math.abs(u/(c/1e3));r.push({speed:m}),r.length>d&&r.shift()}l.lastScrollY=o,l.lastTime=s;var p=0,_=0;r.forEach(function(e,t){var n=e.speed,r=t+1;p+=n*r,_+=r}),l.weightedSpeed=_>0?p/_:0};i.addEventListener("scroll",e),p.set(i,{handleScroll:e,subscribers:0})}var t=p.get(i);return t&&t.subscribers++,function(){t&&--t.subscribers===0&&(i.removeEventListener("scroll",t.handleScroll),p.delete(i),_.delete(i))}},[i,l,a]),l}l.default=f}),98);
__d("useDynamicVirtualizationMargin.react",["ExecutionEnvironment","VirtualizationContainerContext","justknobx","react","react-compiler-runtime","useDebouncedComet","useWeightedScrollSpeedRef.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useContext,d=u.useEffect,m=u.useRef,p=u.useState,_=r("justknobx")._("3655")/10,f=r("justknobx")._("3656"),g=r("justknobx")._("3657"),h=r("justknobx")._("3658"),y=r("justknobx")._("3659");function C(e,t){return e.bottom===t.bottom&&e.left===t.left&&e.right===t.right&&e.top===t.top}function b(t,n,a,i,l){var s=o("react-compiler-runtime").c(19),u=t===void 0?!1:t,b=i===void 0?!1:i,v=l===void 0?null:l,S;s[0]!==n||s[1]!==a?(S={bottom:a,left:n,right:n,top:a},s[0]=n,s[1]=a,s[2]=S):S=s[2];var R=p(S),L=R[0],E=R[1],k=m(0),I=r("useWeightedScrollSpeedRef.react")(v),T=c(r("VirtualizationContainerContext")),D;s[3]!==a||s[4]!==u||s[5]!==b||s[6]!==I?(D=function(t){if(u){var e=t(),n=e>k.current;k.current=e,E(function(e){var t=window.innerHeight,r=I.weightedSpeed,o=r===0?1:r/y,i=h*o,l=b?1:_,s=b?_:1,u=Math.min(a*l,t),c=Math.min(a*s,t),d=t/g,m;return n?m=babelHelpers.extends({},e,{bottom:Math.min(c,e.bottom+i),top:Math.min(u,Math.max(d,e.top-i))}):m=babelHelpers.extends({},e,{bottom:Math.min(c,Math.max(d,e.bottom-i)),top:Math.min(u,e.top+i)}),C(e,m)?e:m})}},s[3]=a,s[4]=u,s[5]=b,s[6]=I,s[7]=D):D=s[7];var x=D,$;s[8]===Symbol.for("react.memo_cache_sentinel")?($={wait:f},s[8]=$):$=s[8];var P=r("useDebouncedComet")(x,$),N;s[9]!==P||s[10]!==u||s[11]!==v||s[12]!==(T==null?void 0:T.rootElementRef)?(N=function(){if(u){var t=typeof v=="function"?v():T==null?void 0:T.rootElementRef.current,n=!t,o=n?window:t;if(!(!(e||(e=r("ExecutionEnvironment"))).canUseDOM||typeof window=="undefined")){var a=function(){var e=n?window.scrollY:t==null?void 0:t.scrollTop;return e!=null?e:0},i=function(){P(a)};return o==null||o.addEventListener("scroll",i,{passive:!0}),function(){o==null||o.removeEventListener("scroll",i)}}}},s[9]=P,s[10]=u,s[11]=v,s[12]=T==null?void 0:T.rootElementRef,s[13]=N):N=s[13];var M=T==null?void 0:T.rootElementRef,w;return s[14]!==P||s[15]!==u||s[16]!==v||s[17]!==M?(w=[v,M,P,u],s[14]=P,s[15]=u,s[16]=v,s[17]=M,s[18]=w):w=s[18],d(N,w),L}l.default=b}),98);
__d("MutationObserver",[],(function(t,n,r,o,a,i){var e,l,s=(function(){function e(e){}var t=e.prototype;return t.observe=function(t,n){},t.disconnect=function(){},t.takeRecords=function(){return[]},e})(),u=(e=(l=t.MutationObserver)!=null?l:t.WebKitMutationObserver)!=null?e:s,c=u;i.default=c}),66);
__d("useMutationObserver",["MutationObserver","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e,t){var n=c({observer:null,callback:e}),o=c(null),a=c({element:null,options:null,observer:null}),i=u(function(){var e=a.current,r=e.observer,i=e.element,l=e.options,s=n.current.observer,u=o.current;(i!=u||t!=l||s!=r)&&(r&&r.disconnect(),s&&u&&s.observe(u,t),a.current={observer:s,element:u,options:t})},[t]);return(n.current.observer==null||n.current.callback!==e)&&(n.current.observer!=null&&n.current.observer.disconnect(),n.current={observer:new(r("MutationObserver"))(e),callback:e}),i(),u(function(e){o.current=e,i()},[i])}l.default=d}),98);
__d("useMutationStableChecker",["react","useMutationObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=[];return e.forEach(function(e){e instanceof HTMLElement&&(e.matches(t)&&n.push(e),n.push.apply(n,Array.from(e.querySelectorAll(t))))}),n}function _(e,t,n,r){r===void 0&&(r=!1);var o=p(t,n);return o.length===0?e:r?new Set([].concat(Array.from(e).filter(function(e){return!o.includes(e)}))):new Set([].concat(Array.from(e),o))}var f={childList:!0,subtree:!0};function g(e,t,n){var o=m(!0),a=o[0],i=o[1],l=d(),s=d(new Set),p=r("useMutationObserver")(function(t){t.forEach(function(e){if(e.type==="childList"){var t=e.addedNodes,r=e.removedNodes;n!=null&&(s.current=_(_(s.current,t,n,!1),r,n,!0))}}),g(e)},f),g=u(function(e){l.current!=null&&window.clearTimeout(l.current),l.current=window.setTimeout(function(){s.current.size>0?g(e):(i(!0),p(null))},e)},[p]);return c(function(){return e>0?(p(t.current!=null?t.current:null),i(!1)):p(null),function(){l.current!=null&&window.clearTimeout(l.current),p(null)}},[e,p,t]),a}l.default=g}),98);
__d("useTimeoutStateSinceFirstMounting.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(2),n=d(e<=0),r=n[0],a=n[1],i=c(e),l=c(!1),s,m;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=function(){var e=window.setTimeout(function(){l.current||(l.current=!0,a(!0))},i.current);return function(){window.clearTimeout(e)}},m=[],t[0]=s,t[1]=m):(s=t[0],m=t[1]),u(s,m),r}l.default=m}),98);
__d("useVirtualizationContext",["VirtualizationContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useMemo,m=s.useRef;function p(){var e=o("react-compiler-runtime").c(11),t=c(r("VirtualizationContext")),n=m(0),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,e[0]=a):a=e[0];var i=m(a),l=m(!1),s=m(null);if(s.current==null){var u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=new Map,e[1]=u):u=e[1],s.current=u}var d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=function(t){var e;n.current=n.current+1;var r=n.current;return(e=s.current)==null||e.set(r,t),function(){var e;(e=s.current)==null||e.delete(r)}},e[2]=d):d=e[2];var p=d,_;e[3]===Symbol.for("react.memo_cache_sentinel")?(_=function(){return s.current==null?!1:s.current.size>0},e[3]=_):_=e[3];var f=_,g=m(null);if(g.current==null){var h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h=new Map,e[4]=h):h=e[4],g.current=h}var y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=function(t,r){n.current=n.current+1;var e=n.current,o=null,a=g.current;if(a!=null){var i;a.has(t)||a.set(t,new Map),o=a.get(t),(i=o)==null||i.set(e,r)}return function(){var n,r;(n=o)==null||n.delete(e),((r=o)==null?void 0:r.size)===0&&(a==null||a.delete(t))}},e[5]=y):y=e[5];var C=y,b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=function(t){var e,n;return(e=(n=g.current)==null?void 0:n.has(t))!=null?e:!1},e[6]=b):b=e[6];var v=b,S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=function(t){return i.current.add(t),t(l.current),function(){i.current.delete(t)}},e[7]=S):S=e[7];var R=S,L;e[8]===Symbol.for("react.memo_cache_sentinel")?(L=function(t){l.current=t,i.current.forEach(function(e){e(t)})},e[8]=L):L=e[8];var E=L,k=m(null),I,T;e[9]!==t?(T=t!=null?t:{contentWrapperRef:k,createFlag:C,createPin:p,hasFlag:v,hasPin:f,onVirtualizationChange:E,subscribeToVirtualizationStatus:R},e[9]=t,e[10]=T):T=e[10],I=T;var D=I;return D}l.default=p}),98);
__d("CometVirtualization.react",["BaseView.react","BaseViewHideable.react","FBLogger","HiddenSubtreeContextProvider.react","HiddenSubtreePassiveContext","VirtualizationConfig","VirtualizationContainerContext","VirtualizationContext","gkx","intersectionObserverEntryIsIntersecting","justknobx","nullIntersectionObserverEntryLogger","react","react-compiler-runtime","stylex","useDynamicVirtualizationMargin.react","useIntersectionObserver","useMergeRefs","useMutationStableChecker","usePrevious","useTimeoutStateSinceFirstMounting.react","useVirtualizationContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.unstable_Activity,m=c.useCallback,p=c.useContext,_=c.useEffect,f=c.useRef,g=c.useState,h=(function(){var e=null;return function(){if(e===null){var t,n=(t=document)==null?void 0:t.documentElement;if(n==null)throw r("FBLogger")("comet_infra").mustfixThrow("Scroll anchoring feature detection called in an environment without a documentElement");e=n.style.overflowAnchor!=null}return e}})();function y(e,t){var n=o("react-compiler-runtime").c(3),r=e===void 0?null:e,a=t===void 0?!1:t,i=g(r),l=i[0],s=i[1],u,c;return n[0]!==l?(u=function(){l===null&&s(C)},c=[l],n[0]=l,n[1]=u,n[2]=c):(u=n[1],c=n[2]),_(u,c),a||(l!=null?l:!1)}function C(){return h()}var b={invisible:{display:"x1s85apg",$$css:!0},resetBlockFormattingContext:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0}},v=r("justknobx")._("1003");function S(e){return typeof e.replace=="function"?e.replace(/\n/g," ").replace(/\s+/g," "):""}function R(){return typeof IntersectionObserver!="function"||typeof IntersectionObserver.toString!="function"?!1:S(IntersectionObserver.toString()).endsWith("{ [native code] }")}var L=R();function E(t){var n=arguments,a,i=o("react-compiler-runtime").c(97),l=t.activityOnlyMode,s=t.allowVirtualizationWithNullNodeHeight,c=t.children,m=t.deferVirtualizationInMs,h=t.deferVirtualizationMutationIntervalInMs,C=t.deferVirtualizationPlaceholderSelector,S=t.delayHeightPlaceholderMs,R=t.disableHiding,E=t.fasterSizeMeasurement,k=t.hiddenMode,I=t.initialRenderConfig,T=t.innerContentXStyle,D=t.isInfiniteScrollUp,x=t.leftRightMargin,$=t.mountXStyle,P=t.nullState,N=t.pinChildrenOnInteraction,M=t.pinChildrenWithPlayer,w=t.ref,A=t.scrollport,F=t.skipScrollAnchoringCheck_UNSAFE,O=t.smartMargin,B=t.testid,W=t.textSearchable,q=t.topBottomMargin,U=t.unmountHiddenChildren,V=t.unmountXStyle,H=t.xstyle,G=l===void 0?!1:l,z=s===void 0?!1:s,j=m===void 0?0:m,K=h===void 0?0:h,Q=S===void 0?0:S,X=E===void 0?!1:E,Y=k===void 0?"legacy":k,J=I===void 0?o("VirtualizationConfig").DEFAULT_INIT_RENDER_CONFIG:I,Z=D===void 0?!1:D,ee=x===void 0?o("VirtualizationConfig").HORIZONTAL_HIDEABLE_MARGIN:x,te=P===void 0?null:P,ne=A===void 0?null:A,re=F===void 0?!1:F,oe=O===void 0?!1:O,ae=B===void 0?"hideable":B,ie=W===void 0?!1:W,le=q===void 0?o("VirtualizationConfig").VERTICAL_HIDEABLE_MARGIN:q,se=f(null),ue=f(null),ce=p(r("HiddenSubtreePassiveContext")),de=g(!1),me=de[0],pe=de[1],_e=f(!0),fe=g(J.isVisible),ge=fe[0],he=fe[1],ye=g(J.nodeHeight),Ce=ye[0],be=ye[1],ve=g(""),Se=ve[0],Re=ve[1],Le=r("usePrevious")(ge),Ee=r("useTimeoutStateSinceFirstMounting.react")(j),ke=r("useVirtualizationContext")(),Ie=p(r("VirtualizationContainerContext")),Te=f(null),De=$!=null?$:H,xe=V!=null?V:H,$e;i[0]!==X||i[1]!==ge||i[2]!==Ce||i[3]!==ie?($e=function(){var e=_e.current||Ce==null&&!ge;if(ue.current!=null&&e){if(X||be(ue.current.getBoundingClientRect().height),ie){var t,n;Re((t=(n=ue.current)==null||(n=n.innerText)==null?void 0:n.trim())!=null?t:"")}window.clearTimeout(Te.current)}},i[0]=X,i[1]=ge,i[2]=Ce,i[3]=ie,i[4]=$e):$e=i[4];var Pe;i[5]!==X||i[6]!==ge||i[7]!==Ce||i[8]!==ie||i[9]!==Le?(Pe=[X,ge,Ce,Le,ie],i[5]=X,i[6]=ge,i[7]=Ce,i[8]=ie,i[9]=Le,i[10]=Pe):Pe=i[10],_($e,Pe);var Ne=Q!=null&&Q>0,Me;i[11]!==Q||i[12]!==X||i[13]!==ce||i[14]!==Ne||i[15]!==ie?(Me=function(t){r("nullIntersectionObserverEntryLogger")(t,"IntersectionObserverEntry is null. num_arguments="+n.length);var e=ce.getCurrentState().hiddenOrBackgrounded_FIXME;if(r("intersectionObserverEntryIsIntersecting")(t))Ne?Te.current=window.setTimeout(function(){be(null)},Q):(window.clearTimeout(Te.current),be(null)),he(!0);else if(!e){var o,a=X?(o=t==null?void 0:t.boundingClientRect)!=null?o:{}:t.target.getBoundingClientRect(),i=a.height,l=a.width;if(i>0&&l>0&&(he(!1),X&&be(i),Ne&&(window.clearTimeout(Te.current),be(i),ie))){var s,u;Re((s=(u=se.current)==null||(u=u.innerText)==null?void 0:u.trim())!=null?s:"")}}},i[11]=Q,i[12]=X,i[13]=ce,i[14]=Ne,i[15]=ie,i[16]=Me):Me=i[16];var we=Me,Ae=r("useMutationStableChecker")(K,ue,C),Fe,Oe;i[17]===Symbol.for("react.memo_cache_sentinel")?(Fe=function(){_e.current&&(_e.current=!1)},Oe=[],i[17]=Fe,i[18]=Oe):(Fe=i[17],Oe=i[18]),_(Fe,Oe);var Be;i[19]!==ee||i[20]!==le?(Be={bottom:le,left:ee,right:ee,top:le},i[19]=ee,i[20]=le,i[21]=Be):Be=i[21];var We=Be,qe=r("useDynamicVirtualizationMargin.react")(oe,ee,le,Z,ne),Ue=oe?qe:We,Ve;i[22]!==ne||i[23]!==(Ie==null?void 0:Ie.rootElementRef)?(Ve=function(){var e=ne!=null?ne==null?void 0:ne():Ie==null?void 0:Ie.rootElementRef.current;return e instanceof Element?e:null},i[22]=ne,i[23]=Ie==null?void 0:Ie.rootElementRef,i[24]=Ve):Ve=i[24];var He=Ve,Ge,ze;i[25]!==Ue?(Ge=babelHelpers.extends({},Ue),ze=babelHelpers.extends({},Ue),i[25]=Ue,i[26]=Ge,i[27]=ze):(Ge=i[26],ze=i[27]);var je;i[28]!==Ge||i[29]!==ze||i[30]!==He?(je={root:He,rootMargin:Ge,scrollMargin:ze,threshold:0},i[28]=Ge,i[29]=ze,i[30]=He,i[31]=je):je=i[31];var Ke=r("useIntersectionObserver")(we,je),Qe=p(r("VirtualizationContext")),Xe=r("useMergeRefs")(Qe==null?ke.contentWrapperRef:null,Ke,se,w),Ye;e:{if(!me&&Ce!==null&&(!z||Ce!=null&&Ce>0)&&U!==!1&&(Ne||!ge)){var Je;i[32]!==Ce?(Je={minHeight:Ce},i[32]=Ce,i[33]=Je):Je=i[33],Ye=Je;break e}Ye=void 0}var Ze=Ye,et=!ge&&(Ce!=null||z===!0),tt=y((a=J.hasScrollAnchoring)!=null?a:null,re),nt=v&&tt,rt=nt?Xe:w;if(r("gkx")("22947")){var ot;i[34]===Symbol.for("react.memo_cache_sentinel")?(ot={className:"x78zum5 xdt5ytf"},i[34]=ot):ot=i[34];var at;return i[35]!==c?(at=u.jsx("div",babelHelpers.extends({},ot,{children:u.jsx(r("BaseView.react"),{children:c})})),i[35]=c,i[36]=at):at=i[36],at}var it;i[37]!==N?(it=function(){N===!0&&pe(!0)},i[37]=N,i[38]=it):it=i[38];var lt=it,st=(M!=null?M:!1)&&ke.hasFlag("HAS_PLAYER"),ut;i[39]!==nt||i[40]!==Ee||i[41]!==st||i[42]!==et||i[43]!==Ae||i[44]!==me||i[45]!==U||i[46]!==ke?(ut=L&&nt&&U===!0&&et&&!me&&!ke.hasPin()&&!st&&Ee&&Ae,i[39]=nt,i[40]=Ee,i[41]=st,i[42]=et,i[43]=Ae,i[44]=me,i[45]=U,i[46]=ke,i[47]=ut):ut=i[47];var ct=ut;ke.onVirtualizationChange(ct);var dt=nt&&!(R!=null&&R)&&et&&Y!=="none",mt=ie&&Se!=="";if(G){var pt=ct?xe:De,_t;i[48]!==pt?(_t=(e||(e=r("stylex")))(b.resetBlockFormattingContext,pt),i[48]=pt,i[49]=_t):_t=i[49];var ft;i[50]!==mt||i[51]!==Se?(ft=mt?u.jsx("div",{className:"xqtp20y x6ikm8r x10wlt62 xnalus7",children:Se}):null,i[50]=mt,i[51]=Se,i[52]=ft):ft=i[52];var gt;i[53]!==T?(gt=(e||(e=r("stylex")))(T),i[53]=T,i[54]=gt):gt=i[54];var ht=ct?"hidden":"visible",yt;i[55]!==c||i[56]!==ht?(yt=u.jsx(d,{mode:ht,children:c}),i[55]=c,i[56]=ht,i[57]=yt):yt=i[57];var Ct;i[58]!==gt||i[59]!==yt?(Ct=u.jsx("div",{className:gt,ref:ue,children:yt}),i[58]=gt,i[59]=yt,i[60]=Ct):Ct=i[60];var bt;i[61]!==lt||i[62]!==Ze||i[63]!==rt||i[64]!==ct||i[65]!==_t||i[66]!==ft||i[67]!==Ct||i[68]!==ae?(bt=u.jsxs("div",{className:_t,"data-testid":void 0,"data-virtualized":ct,onClickCapture:lt,onFocusCapture:lt,onKeyPressCapture:lt,ref:rt,style:Ze,children:[ft,Ct]}),i[61]=lt,i[62]=Ze,i[63]=rt,i[64]=ct,i[65]=_t,i[66]=ft,i[67]=Ct,i[68]=ae,i[69]=bt):bt=i[69];var vt;return i[70]!==bt||i[71]!==ke?(vt=u.jsx(r("VirtualizationContext").Provider,{value:ke,children:bt}),i[70]=bt,i[71]=ke,i[72]=vt):vt=i[72],vt}var St=ct?xe:De,Rt;i[73]!==St?(Rt=(e||(e=r("stylex")))(b.resetBlockFormattingContext,St),i[73]=St,i[74]=Rt):Rt=i[74];var Lt;i[75]!==mt||i[76]!==Se?(Lt=mt?u.jsx("div",{className:"xqtp20y x6ikm8r x10wlt62 xnalus7",children:Se}):null,i[75]=mt,i[76]=Se,i[77]=Lt):Lt=i[77];var Et;i[78]!==c||i[79]!==Y||i[80]!==T||i[81]!==dt||i[82]!==te||i[83]!==ct?(Et=Y==="legacy"?u.jsx(r("BaseViewHideable.react"),{hidden:dt,ref:ue,xstyle:[T,dt&&b.invisible],children:ct?null:u.jsx(r("HiddenSubtreeContextProvider.react"),{isHidden:dt,children:c})}):u.jsx("div",{className:(e||(e=r("stylex")))(T),ref:ue,children:ct?te:c}),i[78]=c,i[79]=Y,i[80]=T,i[81]=dt,i[82]=te,i[83]=ct,i[84]=Et):Et=i[84];var kt;i[85]!==lt||i[86]!==Ze||i[87]!==rt||i[88]!==ct||i[89]!==Rt||i[90]!==Lt||i[91]!==Et||i[92]!==ae?(kt=u.jsxs("div",{className:Rt,"data-testid":void 0,"data-virtualized":ct,onClickCapture:lt,onFocusCapture:lt,onKeyPressCapture:lt,ref:rt,style:Ze,children:[Lt,Et]}),i[85]=lt,i[86]=Ze,i[87]=rt,i[88]=ct,i[89]=Rt,i[90]=Lt,i[91]=Et,i[92]=ae,i[93]=kt):kt=i[93];var It;return i[94]!==kt||i[95]!==ke?(It=u.jsx(r("VirtualizationContext").Provider,{value:ke,children:kt}),i[94]=kt,i[95]=ke,i[96]=It):It=i[96],It}l.default=E}),98);
__d("VirtualizationExperimentConfig",[],(function(t,n,r,o,a,i){"use strict";var e=4e3,l=!0,s=!1,u=!1,c=!1,d="static",m=!1,p=!1,_=new Set(["static","dynamic"]),f=new Set(["thread_view"]),g={polaris_feed_story_tray_item:{hiding_disabled:!1,pin_children_on_interaction:!0,react_activity_mode:!1,surface_enabled:!0}},h={comet_feed_unit_card:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:4e3,surface_enabled:!0},marketplace_item:{surface_enabled:!1}},y={comet_feed_unit_card:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!0,root_margin_top_bottom:500,surface_enabled:!0,virtualization_strategy:"dynamic"},comet_profile_photos:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:1e3,surface_enabled:!0},comet_tofu_stories_container:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:1e3,surface_enabled:!0},comet_watch_tab:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:4e3,surface_enabled:!0,virtualization_strategy:"dynamic"},marketplace_item:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:1e3,surface_enabled:!0},thread_list:{hiding_disabled:!1,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:500,surface_enabled:!0},thread_view:{hiding_disabled:!1,is_at_bottom_scroll_up:!0,pin_children_on_interaction:!0,pin_children_with_player:!1,root_margin_top_bottom:500,surface_enabled:!0}};i.DEFAULT_TOP_BOTTOM_MARGIN=e,i.DEFAULT_PIN_CHILDREN_ON_INTERACTION=l,i.DEFAULT_PIN_CHILDREN_WITH_PLAYER=s,i.DEFAULT_DISABLE_HIDING=u,i.DEFAULT_ACTIVITY_MODE_ON=c,i.DEFAULT_VIRTUALIZATION_STRATEGY=d,i.DEFAULT_AT_BOTTOM_SCROLL_UP=m,i.DEFAULT_TEXT_SEARCHABLE=p,i.VALID_STRATEGIES=_,i.infiniteScrollUpSurfaces=f,i.ROLLOUT_CONFIG=g,i.GK_HOLDOUT_CONFIG=h,i.GK_ROLLOUT_CONFIG=y}),66);
__d("VirtualizationExperimentSettings",["QE2Logger","VirtualizationExperimentConfig","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=r("gkx")("2548"),h=r("gkx")("221");function y(e){return Object.prototype.hasOwnProperty.call(o("VirtualizationExperimentConfig").ROLLOUT_CONFIG,e)?o("VirtualizationExperimentConfig").ROLLOUT_CONFIG:g&&Object.prototype.hasOwnProperty.call(o("VirtualizationExperimentConfig").GK_HOLDOUT_CONFIG,e)?o("VirtualizationExperimentConfig").GK_HOLDOUT_CONFIG:h&&Object.prototype.hasOwnProperty.call(o("VirtualizationExperimentConfig").GK_ROLLOUT_CONFIG,e)?o("VirtualizationExperimentConfig").GK_ROLLOUT_CONFIG:null}var C=function(t){var e=y(t);return e==null?void 0:e[t]},b=new Set(((e=r("qex")._("641"))!=null?e:"").split(",").map(function(e){return e.trim()}));function v(e){var t=new Map;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}}function S(e){var t;if(b.has(e))return!0;var n=C(e);return(t=n==null?void 0:n.surface_enabled)!=null?t:!1}var R=v(S);function L(e){var t=new Map;return e.split(",").forEach(function(e){var n,r,o=e.trim(),a=o.split(":"),i=a[0],l=a[1],s=(n=i==null?void 0:i.trim())!=null?n:"",u=parseInt((r=l==null?void 0:l.trim())!=null?r:"",10);s.length>0&&!Number.isNaN(u)&&t.set(s,u)}),t}var E=L((s=r("qex")._("628"))!=null?s:"");function k(e){var t;if(E.has(e)){var n;return(n=E.get(e))!=null?n:o("VirtualizationExperimentConfig").DEFAULT_TOP_BOTTOM_MARGIN}var r=C(e);return(t=r==null?void 0:r.root_margin_top_bottom)!=null?t:o("VirtualizationExperimentConfig").DEFAULT_TOP_BOTTOM_MARGIN}var I=v(k),T=new Set(((u=r("qex")._("642"))!=null?u:"all").split(",")),D=new Set;function x(e){D.has(e)||((T.has("all")||T.has(e))&&o("QE2Logger").logExposureForActingAccount("comet_front_end_virtualization"),D.add(e))}var $=(c=r("qex")._("4937"))!=null?c:o("VirtualizationExperimentConfig").DEFAULT_ACTIVITY_MODE_ON;function P(e){var t;if(b.has(e))return $!=null?$:!1;var n=C(e);return(t=n==null?void 0:n.react_activity_mode)!=null?t:!1}var N=v(P),M=(d=r("qex")._("648"))!=null?d:o("VirtualizationExperimentConfig").DEFAULT_PIN_CHILDREN_ON_INTERACTION;function w(e){var t;if(b.has(e))return M!=null?M:!0;var n=C(e);return(t=n==null?void 0:n.pin_children_on_interaction)!=null?t:!0}var A=v(w),F=(m=r("qex")._("339"))!=null?m:"default",O=F==="disable"?!0:F==="enable"?!1:null;function B(e){var t;if(b.has(e))return O!=null?O:o("VirtualizationExperimentConfig").DEFAULT_DISABLE_HIDING;var n=C(e);return(t=n==null?void 0:n.hiding_disabled)!=null?t:o("VirtualizationExperimentConfig").DEFAULT_DISABLE_HIDING}var W=v(B),q=(p=r("qex")._("885"))!=null?p:o("VirtualizationExperimentConfig").DEFAULT_PIN_CHILDREN_WITH_PLAYER;function U(e){var t;if(b.has(e))return q!=null?q:o("VirtualizationExperimentConfig").DEFAULT_PIN_CHILDREN_WITH_PLAYER;var n=C(e);return(t=n==null?void 0:n.pin_children_with_player)!=null?t:o("VirtualizationExperimentConfig").DEFAULT_PIN_CHILDREN_WITH_PLAYER}var V=v(U);function H(e){var t=new Map;return e.split(",").forEach(function(e){var n,r=e.trim(),a=r.split(":"),i=a[0],l=a[1],s=(n=i==null?void 0:i.trim())!=null?n:"",u=l==null?void 0:l.trim(),c=o("VirtualizationExperimentConfig").VALID_STRATEGIES.has(u)?u:o("VirtualizationExperimentConfig").DEFAULT_VIRTUALIZATION_STRATEGY;s.length>0&&t.set(s,c)}),t}var G=H((_=r("qex")._("1851"))!=null?_:"");function z(e){var t;if(G.has(e)){var n;return(n=G.get(e))!=null?n:o("VirtualizationExperimentConfig").DEFAULT_VIRTUALIZATION_STRATEGY}var r=C(e);return(t=r==null?void 0:r.virtualization_strategy)!=null?t:o("VirtualizationExperimentConfig").DEFAULT_VIRTUALIZATION_STRATEGY}function j(){var e=r("gkx")("221"),t=r("gkx")("6600");return e&&t}var K=v(z),Q=function(t){var e=C(t);return(e==null?void 0:e.is_at_bottom_scroll_up)===!0||o("VirtualizationExperimentConfig").infiniteScrollUpSurfaces.has(t)?!0:o("VirtualizationExperimentConfig").DEFAULT_AT_BOTTOM_SCROLL_UP},X=(f=r("qex")._("5027"))!=null?f:o("VirtualizationExperimentConfig").DEFAULT_TEXT_SEARCHABLE;function Y(e){var t;if(b.has(e))return X!=null?X:o("VirtualizationExperimentConfig").DEFAULT_TEXT_SEARCHABLE;var n=C(e);return(t=n==null?void 0:n.text_searchable)!=null?t:o("VirtualizationExperimentConfig").DEFAULT_TEXT_SEARCHABLE}var J=v(Y);l.isSurfaceEnabled=R,l.getTopBottomMargin=I,l.logQEExposureOnceWhenNecessary=x,l.getActivityModeOn=N,l.getPinChildrenOnInteration=A,l.isHidingDisabled=W,l.getPinChildrenWithPlayer=V,l.getSkipScrollAnchoringCheck=j,l.getVirtualizationStrategy=K,l.getIsInfiniteScrollUp=Q,l.getTextSearchable=J}),98);
__d("CometHideableComponentExperiment.react",["CometVirtualization.react","VirtualizationExperimentSettings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(39),n=e.callingSurface,a=e.children,i=e.disableHiding,l=e.mountXStyle,c=e.scrollport,d=e.topBottomMarginOverride,m=e.unmountXStyle,p=e.xstyle,_=c===void 0?null:c,f;t[0]!==n?(f=o("VirtualizationExperimentSettings").isSurfaceEnabled(n),t[0]=n,t[1]=f):f=t[1];var g=f,h;t[2]!==n||t[3]!==i||t[4]!==g?(h=i!=null?i:o("VirtualizationExperimentSettings").isHidingDisabled(n)||!g,t[2]=n,t[3]=i,t[4]=g,t[5]=h):h=t[5];var y=h,C,b;t[6]!==n?(C=function(){return o("VirtualizationExperimentSettings").logQEExposureOnceWhenNecessary(n)},b=[n],t[6]=n,t[7]=C,t[8]=b):(C=t[7],b=t[8]),u(C,b);var v=o("VirtualizationExperimentSettings").getVirtualizationStrategy(n),S=v!=="static",R;t[9]!==n?(R=o("VirtualizationExperimentSettings").getActivityModeOn(n),t[9]=n,t[10]=R):R=t[10];var L=R,E;t[11]===Symbol.for("react.memo_cache_sentinel")?(E=o("VirtualizationExperimentSettings").getSkipScrollAnchoringCheck(),t[11]=E):E=t[11];var k=E,I;t[12]!==n?(I=o("VirtualizationExperimentSettings").getIsInfiniteScrollUp(n),t[12]=n,t[13]=I):I=t[13];var T=I,D;t[14]!==n?(D=o("VirtualizationExperimentSettings").getTextSearchable(n),t[14]=n,t[15]=D):D=t[15];var x=D,$;t[16]!==n||t[17]!==g?($=g&&o("VirtualizationExperimentSettings").getPinChildrenOnInteration(n),t[16]=n,t[17]=g,t[18]=$):$=t[18];var P;t[19]!==n?(P=o("VirtualizationExperimentSettings").getPinChildrenWithPlayer(n),t[19]=n,t[20]=P):P=t[20];var N;t[21]!==n||t[22]!==d?(N=d!=null&&d>=0?d:o("VirtualizationExperimentSettings").getTopBottomMargin(n),t[21]=n,t[22]=d,t[23]=N):N=t[23];var M;return t[24]!==L||t[25]!==a||t[26]!==g||t[27]!==y||t[28]!==T||t[29]!==S||t[30]!==l||t[31]!==_||t[32]!==$||t[33]!==P||t[34]!==N||t[35]!==x||t[36]!==m||t[37]!==p?(M=s.jsx(r("CometVirtualization.react"),{activityOnlyMode:L,disableHiding:y,isInfiniteScrollUp:T,mountXStyle:l,pinChildrenOnInteraction:$,pinChildrenWithPlayer:P,scrollport:_,skipScrollAnchoringCheck_UNSAFE:k,smartMargin:S,textSearchable:x,topBottomMargin:N,unmountHiddenChildren:g,unmountXStyle:m,xstyle:p,children:a}),t[24]=L,t[25]=a,t[26]=g,t[27]=y,t[28]=T,t[29]=S,t[30]=l,t[31]=_,t[32]=$,t[33]=P,t[34]=N,t[35]=x,t[36]=m,t[37]=p,t[38]=M):M=t[38],M}l.default=c}),98);
__d("FDSProgressRing.react",["BaseProgressRing.react","FDSProgressRingUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(15),n=e.beginningPercentage,a=e.color,i=e.duration,l=e.explicitStartTime,u=e.onComplete,c=e.pause,d=e.percentage,m=e.size,p=e.type,_=e["aria-label"],f=e["aria-labelledby"],g;t[0]!==a?(g=o("FDSProgressRingUtils").getRingColor(a),t[0]=a,t[1]=g):g=t[1];var h=g,y=h.backgroundColor,C=h.foregroundColor,b;return t[2]!==_||t[3]!==f||t[4]!==y||t[5]!==n||t[6]!==i||t[7]!==l||t[8]!==C||t[9]!==u||t[10]!==c||t[11]!==d||t[12]!==m||t[13]!==p?(b=s.jsx(r("BaseProgressRing.react"),{"aria-label":_,"aria-labelledby":f,backgroundColor:y,beginningPercentage:n,duration:i,explicitStartTime:l,foregroundColor:C,onComplete:u,pause:c,percentage:d,size:m,type:p}),t[2]=_,t[3]=f,t[4]=y,t[5]=n,t[6]=i,t[7]=l,t[8]=C,t[9]=u,t[10]=c,t[11]=d,t[12]=m,t[13]=p,t[14]=b):b=t[14],b}l.default=u}),98);
__d("useQPLInstanceKey",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState,u=0;function c(){return s(function(){return++u})[0]}l.default=c}),98);/*FB_PKG_DELIM*/
__d("EBMinosWasm.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={},Y={},J={},Z={},ee={},te={},ne={},re={},oe={},ae={};s.name="MinosMessageMetadata",s.internalSpec={mekId:[1,(e=o("WAProtoConst")).FLAGS.REQUIRED|e.TYPES.BYTES],timestamp:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],messageId:[3,e.FLAGS.REQUIRED|e.TYPES.STRING],threadId:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES]},u.name="MinosClientConfig",u.internalSpec={preferredMessageEncryptionVersion:[1,e.FLAGS.REQUIRED|e.TYPES.INT32],preferredMekEncryptionVersion:[2,e.FLAGS.REQUIRED|e.TYPES.INT32]},c.name="MinosEncryptAndSignMessageInput",c.internalSpec={transportSigningSk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mek:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],plaintext:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],metadata:[4,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,s],transportSigningPk:[5,e.TYPES.BYTES],conf:[6,e.TYPES.MESSAGE,u]},d.name="MinosEncryptAndSignMessageResult",d.internalSpec={ciphertext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[3,e.FLAGS.REQUIRED|e.TYPES.INT32]},m.name="MinosDecryptAndVerifyMessageInput",m.internalSpec={transportSigningPk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mek:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],encryptedMessageCiphertext:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],encryptedMessageSignature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],metadata:[5,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,s],messageEncryptionVersion:[6,e.TYPES.INT32],conf:[7,e.TYPES.MESSAGE,u]},p.name="MinosDecryptAndVerifyMessageResult",p.internalSpec={plaintext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},_.name="MekBundle",_.internalSpec={key:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mekId:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},f.name="GenerateMekInput",f.internalSpec={epochHeads:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},g.name="GenerateMekResult",g.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_]},h.name="GenerateMekRosterHashInput",h.internalSpec={epochHeads:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},y.name="GenerateMekRosterHashResult",y.internalSpec={rosterHash:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},C.name="EncryptMekForDistributionInput",C.internalSpec={senderEpochHead:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],toMailboxPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],fromKeypair:[3,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,b],mek:[4,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_],toEpochHead:[5,e.TYPES.BYTES],conf:[6,e.TYPES.MESSAGE,u]},b.name="EncryptMekForDistributionInput$MailboxAuthKP",b.internalSpec={sk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],pk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},v.name="EncryptMekForDistributionResult",v.internalSpec={ciphertext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},S.name="DecryptMekForDistributionInput",S.internalSpec={toMailboxSk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],fromPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],mekId:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],senderEpochHead:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[5,e.FLAGS.REQUIRED|e.TYPES.BYTES],ciphertext:[6,e.FLAGS.REQUIRED|e.TYPES.BYTES],toEpochHead:[7,e.TYPES.BYTES],mekEncryptionVersion:[8,e.TYPES.INT32],conf:[9,e.TYPES.MESSAGE,u]},R.name="DecryptMekForDistributionResult",R.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},L.name="EncryptMeksForDistributionFromTransportSenderInput",L.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_],transportSigningKp:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,E],recipientMailboxEncryptionPks:[3,e.FLAGS.REPEATED|e.TYPES.BYTES],recipientEpochHeads:[4,e.FLAGS.REPEATED|e.TYPES.BYTES],conf:[5,e.TYPES.MESSAGE,u]},E.name="EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKP",E.internalSpec={sk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],pk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},k.name="EncryptMeksForDistributionFromTransportSenderResult",k.internalSpec={encryptedMeks:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],ephemeralEncryptionPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],signingPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64]},I.name="DecryptMekForDistributionFromTransportSenderInput",I.internalSpec={mekDistribution:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,T],mekId:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],recipientEncSk:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64],conf:[6,e.TYPES.MESSAGE,u]},T.name="DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipient",T.internalSpec={encryptedMek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],ephemeralEncryptionPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],signingPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],recipientEpochHead:[5,e.TYPES.BYTES]},D.name="DecryptMekForDistributionFromTransportSenderResult",D.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},x.name="WrapTransportSigningPublicKeyInput",x.internalSpec={keyBytes:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},$.name="WrapTransportSigningPublicKeyResult",$.internalSpec={prefixedKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},P.name="WrapTransportSigningSecretKeyInput",P.internalSpec={keyBytes:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},N.name="WrapTransportSigningSecretKeyResult",N.internalSpec={prefixedKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},M.name="DeriveMailboxSigningKeypairInput",M.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},w.name="DeriveMailboxSigningKeypairResult",w.internalSpec={mailboxSigningPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxSigningPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},A.name="DeriveMailboxEncryptionKeypairInput",A.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},F.name="DeriveMailboxEncryptionKeypairResult",F.internalSpec={mailboxEncryptionPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxEncryptionPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},O.name="DeriveMailboxAuthKeypairInput",O.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},B.name="DeriveMailboxAuthKeypairResult",B.internalSpec={mailboxAuthPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxAuthPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},W.name="DeriveAttachmentAccessTokenSecretInput",W.internalSpec={mediaKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},q.name="DeriveAttachmentAccessTokenSecretResult",q.internalSpec={attachmentAccessTokenSecret:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},U.name="DeriveAttachmentPrimaryKeySecretInput",U.internalSpec={mediaKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},V.name="DeriveAttachmentPrimaryKeySecretResult",V.internalSpec={attachmentPrimaryKeySecret:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},H.name="EpochPublicData",H.internalSpec={epochNumber:[1,e.FLAGS.REQUIRED|e.TYPES.UINT64],userFbid:[2,e.FLAGS.REQUIRED|e.TYPES.STRING],mailboxSigningPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxEncryptionPk:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxAuthPk:[5,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousEpochHead:[6,e.TYPES.BYTES]},G.name="EpochSignatures",G.internalSpec={selfSignature:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],prevSignature:[2,e.TYPES.BYTES]},z.name="MinosSignedEpoch",z.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,H],signatures:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,G],epochHead:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},j.name="MinosOpenInitialEpochInput",j.internalSpec={userFbid:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],exportRootKey:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},K.name="MinosOpenInitialEpochResult",K.internalSpec={minosSignedEpoch:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z]},Q.name="MinosOpenEpochInput",Q.internalSpec={userFbid:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],exportRootKey:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousExportRootKey:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousEpochNumber:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64],previousEpochHead:[6,e.FLAGS.REQUIRED|e.TYPES.BYTES]},X.name="MinosOpenEpochResult",X.internalSpec={minosSignedEpoch:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z]},Y.name="MinosValidateEpochInput",Y.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,H],previousEpochPublicData:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,H],signatures:[3,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,G]},J.name="MinosValidateEpochResult",J.internalSpec={valid:[1,e.TYPES.BOOL],errorMessage:[2,e.TYPES.STRING],__oneofs__:{result:["valid","errorMessage"]}},Z.name="MinosVerifySingleEpochInput",Z.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,H],signature:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},ee.name="MinosVerifySingleEpochResult",ee.internalSpec={valid:[1,e.FLAGS.REQUIRED|e.TYPES.BOOL]},te.name="MinosThreadIdFromOneToOneThreadInput",te.internalSpec={actThreadId:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],selfFbid:[2,e.FLAGS.REQUIRED|e.TYPES.STRING]},ne.name="MinosThreadIdFromOneToOneThreadResult",ne.internalSpec={threadId:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},re.name="MinosThreadIdFromActThreadIdInput",re.internalSpec={actThreadId:[1,e.FLAGS.REQUIRED|e.TYPES.STRING]},oe.name="MinosThreadIdFromActThreadIdResult",oe.internalSpec={threadId:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},ae.name="MinosCommand",ae.internalSpec={encryptAndSignMessage:[1,e.TYPES.MESSAGE,c],decryptAndVerifyMessage:[2,e.TYPES.MESSAGE,m],generateMek:[3,e.TYPES.MESSAGE,f],generateMekRosterHash:[4,e.TYPES.MESSAGE,h],encryptMekForDistribution:[5,e.TYPES.MESSAGE,C],decryptMekForDistribution:[6,e.TYPES.MESSAGE,S],encryptMeksForDistributionFromTransportSender:[7,e.TYPES.MESSAGE,L],decryptMekForDistributionFromTransportSender:[8,e.TYPES.MESSAGE,I],wrapTransportSigningPublicKey:[9,e.TYPES.MESSAGE,x],wrapTransportSigningSecretKey:[10,e.TYPES.MESSAGE,P],deriveMailboxSigningKeypair:[11,e.TYPES.MESSAGE,M],deriveMailboxEncryptionKeypair:[12,e.TYPES.MESSAGE,A],deriveMailboxAuthKeypair:[13,e.TYPES.MESSAGE,O],deriveAttachmentAccessTokenSecret:[14,e.TYPES.MESSAGE,W],deriveAttachmentPrimaryKeySecret:[15,e.TYPES.MESSAGE,U],minosOpenInitialEpoch:[16,e.TYPES.MESSAGE,j],minosOpenEpoch:[17,e.TYPES.MESSAGE,Q],minosValidateEpoch:[18,e.TYPES.MESSAGE,Y],minosVerifySingleEpoch:[19,e.TYPES.MESSAGE,Z],minosThreadIdFromOneToOneThread:[20,e.TYPES.MESSAGE,te],minosThreadIdFromActThreadId:[21,e.TYPES.MESSAGE,re],__oneofs__:{commandInput:["encryptAndSignMessage","decryptAndVerifyMessage","generateMek","generateMekRosterHash","encryptMekForDistribution","decryptMekForDistribution","encryptMeksForDistributionFromTransportSender","decryptMekForDistributionFromTransportSender","wrapTransportSigningPublicKey","wrapTransportSigningSecretKey","deriveMailboxSigningKeypair","deriveMailboxEncryptionKeypair","deriveMailboxAuthKeypair","deriveAttachmentAccessTokenSecret","deriveAttachmentPrimaryKeySecret","minosOpenInitialEpoch","minosOpenEpoch","minosValidateEpoch","minosVerifySingleEpoch","minosThreadIdFromOneToOneThread","minosThreadIdFromActThreadId"]}},l.MinosMessageMetadataSpec=s,l.MinosClientConfigSpec=u,l.MinosEncryptAndSignMessageInputSpec=c,l.MinosEncryptAndSignMessageResultSpec=d,l.MinosDecryptAndVerifyMessageInputSpec=m,l.MinosDecryptAndVerifyMessageResultSpec=p,l.MekBundleSpec=_,l.GenerateMekInputSpec=f,l.GenerateMekResultSpec=g,l.GenerateMekRosterHashInputSpec=h,l.GenerateMekRosterHashResultSpec=y,l.EncryptMekForDistributionInputSpec=C,l.EncryptMekForDistributionInput$MailboxAuthKPSpec=b,l.EncryptMekForDistributionResultSpec=v,l.DecryptMekForDistributionInputSpec=S,l.DecryptMekForDistributionResultSpec=R,l.EncryptMeksForDistributionFromTransportSenderInputSpec=L,l.EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKPSpec=E,l.EncryptMeksForDistributionFromTransportSenderResultSpec=k,l.DecryptMekForDistributionFromTransportSenderInputSpec=I,l.DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipientSpec=T,l.DecryptMekForDistributionFromTransportSenderResultSpec=D,l.WrapTransportSigningPublicKeyInputSpec=x,l.WrapTransportSigningPublicKeyResultSpec=$,l.WrapTransportSigningSecretKeyInputSpec=P,l.WrapTransportSigningSecretKeyResultSpec=N,l.DeriveMailboxSigningKeypairInputSpec=M,l.DeriveMailboxSigningKeypairResultSpec=w,l.DeriveMailboxEncryptionKeypairInputSpec=A,l.DeriveMailboxEncryptionKeypairResultSpec=F,l.DeriveMailboxAuthKeypairInputSpec=O,l.DeriveMailboxAuthKeypairResultSpec=B,l.DeriveAttachmentAccessTokenSecretInputSpec=W,l.DeriveAttachmentAccessTokenSecretResultSpec=q,l.DeriveAttachmentPrimaryKeySecretInputSpec=U,l.DeriveAttachmentPrimaryKeySecretResultSpec=V,l.EpochPublicDataSpec=H,l.EpochSignaturesSpec=G,l.MinosSignedEpochSpec=z,l.MinosOpenInitialEpochInputSpec=j,l.MinosOpenInitialEpochResultSpec=K,l.MinosOpenEpochInputSpec=Q,l.MinosOpenEpochResultSpec=X,l.MinosValidateEpochInputSpec=Y,l.MinosValidateEpochResultSpec=J,l.MinosVerifySingleEpochInputSpec=Z,l.MinosVerifySingleEpochResultSpec=ee,l.MinosThreadIdFromOneToOneThreadInputSpec=te,l.MinosThreadIdFromOneToOneThreadResultSpec=ne,l.MinosThreadIdFromActThreadIdInputSpec=re,l.MinosThreadIdFromActThreadIdResultSpec=oe,l.MinosCommandSpec=ae}),98);
__d("EBGetMinosWasm",["WAWasmModuleCache","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("31853")),s=function(){return o("WAWasmModuleCache").loadWasmModule(e)};l.getMinosWasm=s}),98);
__d("WASIContext",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e,n,r,o,a,i;this.fs=(e=t==null?void 0:t.fs)!=null?e:{},this.args=(n=t==null?void 0:t.args)!=null?n:[],this.env=(r=t==null?void 0:t.env)!=null?r:{},this.stdin=(o=t==null?void 0:t.stdin)!=null?o:function(){return null},this.stdout=(a=t==null?void 0:t.stdout)!=null?a:function(){},this.stderr=(i=t==null?void 0:t.stderr)!=null?i:function(){},this.debug=t==null?void 0:t.debug,this.isTTY=!!(t!=null&&t.isTTY)};i.WASIContext=e}),66);
__d("WASISnapshotPreview1",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=Object.freeze({SUCCESS:0,E2BIG:1,EACCESS:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EAGAIN:6,EALREADY:7,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTSUP:58,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75,ENOTCAPABLE:76}),s=(e=n("$InternalEnum"))({REALTIME:0,MONOTONIC:1,PROCESS_CPUTIME_ID:2,THREAD_CPUTIME_ID:3}),u=e({SET:0,CUR:1,END:2}),c=e({UNKNOWN:0,BLOCK_DEVICE:1,CHARACTER_DEVICE:2,DIRECTORY:3,REGULAR_FILE:4,SOCKET_DGRAM:5,SOCKET_STREAM:6,SYMBOLIC_LINK:7}),d=e({DIR:0}),m=e({CLOCK:0,FD_READ:1,FD_WRITE:2}),p={SYMLINK_FOLLOW:1},_={CREAT:1,DIRECTORY:2,EXCL:4,TRUNC:8},f={APPEND:1,DSYNC:2,NONBLOCK:4,RSYNC:8,SYNC:16},g={FD_DATASYNC:BigInt(1)<<BigInt(0),FD_READ:BigInt(1)<<BigInt(1),FD_SEEK:BigInt(1)<<BigInt(2),FD_FDSTAT_SET_FLAGS:BigInt(1)<<BigInt(3),FD_SYNC:BigInt(1)<<BigInt(4),FD_TELL:BigInt(1)<<BigInt(5),FD_WRITE:BigInt(1)<<BigInt(6),FD_ADVISE:BigInt(1)<<BigInt(7),FD_ALLOCATE:BigInt(1)<<BigInt(8),PATH_CREATE_DIRECTORY:BigInt(1)<<BigInt(9),PATH_CREATE_FILE:BigInt(1)<<BigInt(10),PATH_LINK_SOURCE:BigInt(1)<<BigInt(11),PATH_LINK_TARGET:BigInt(1)<<BigInt(12),PATH_OPEN:BigInt(1)<<BigInt(13),FD_READDIR:BigInt(1)<<BigInt(14),PATH_READLINK:BigInt(1)<<BigInt(15),PATH_RENAME_SOURCE:BigInt(1)<<BigInt(16),PATH_RENAME_TARGET:BigInt(1)<<BigInt(17),PATH_FILESTAT_GET:BigInt(1)<<BigInt(18),PATH_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(19),PATH_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(20),FD_FILESTAT_GET:BigInt(1)<<BigInt(21),FD_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(22),FD_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(23),PATH_SYMLINK:BigInt(1)<<BigInt(24),PATH_REMOVE_DIRECTORY:BigInt(1)<<BigInt(25),PATH_UNLINK_FILE:BigInt(1)<<BigInt(26),POLL_FD_READWRITE:BigInt(1)<<BigInt(27),SOCK_SHUTDOWN:BigInt(1)<<BigInt(28),SOCK_ACCEPT:BigInt(1)<<BigInt(29)},h={ATIM:1,ATIM_NOW:2,MTIM:4,MTIM_NOW:8},y={SUBSCRIPTION_CLOCK_ABSTIME:1},C={FD_READWRITE_HANGUP:1},b=64,v=48,S=32;i.RESULT=l,i.Clock=s,i.Whence=u,i.FileType=c,i.PreopenType=d,i.EventType=m,i.LookupFlags=p,i.OpenFlags=_,i.FileDescriptorFlags=f,i.RightsFlags=g,i.FileStatTimestampFlags=h,i.SubscriptionClockFlags=y,i.EventReadWriteFlags=C,i.FILESTAT_SIZE=b,i.SUBSCRIPTION_SIZE=v,i.EVENT_SIZE=S}),66);
__d("WATextEncoding",[],(function(t,n,r,o,a,i){"use strict";var e=TextEncoder,l=TextDecoder,s=e,u=l;function c(){return new s}function d(){return new u}function m(e){s=e}function p(e){u=e}i.newTextEncoder=c,i.newTextDecoder=d,i.setTextEncoderClass=m,i.setTextDecoderClass=p}),66);
__d("WASIDrive",["WASISnapshotPreview1","WATextEncoding"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.nextFD=10,this.openMap=new Map,this.fs=babelHelpers.extends({},e),this.openMap.set(3,new c(this.fs,"/"))}var t=e.prototype;return t.$1=function(t,n,r){var e=new s(t,r);n&&(e.buffer=new Uint8Array(new ArrayBuffer(1024),0,0));var a=this.nextFD;return this.openMap.set(a,e),this.nextFD++,[o("WASISnapshotPreview1").RESULT.SUCCESS,a]},t.$2=function(t,n){var e=new c(t,n),r=this.nextFD;return this.openMap.set(r,e),this.nextFD++,[o("WASISnapshotPreview1").RESULT.SUCCESS,r]},t.$3=function(t,n){return n==="."?!0:t.containsDirectory(n)},t.open=function(t,n,r,a){var e,i=!!(r&(e=o("WASISnapshotPreview1")).OpenFlags.CREAT),l=!!(r&e.OpenFlags.DIRECTORY),s=!!(r&e.OpenFlags.EXCL),u=!!(r&e.OpenFlags.TRUNC),d=this.openMap.get(t);if(!(d instanceof c))return[o("WASISnapshotPreview1").RESULT.EBADF];if(d.containsFile(n)){if(l)return[o("WASISnapshotPreview1").RESULT.ENOTDIR];if(s)return[o("WASISnapshotPreview1").RESULT.EEXIST];var m=d.get(n);return this.$1(m,u,a)}else if(this.$3(d,n)){if(n===".")return this.$2(this.fs,"/");var p="/"+n+"/",_=Object.entries(this.fs).filter(function(e){var t=e[0];return t.startsWith(p)});return this.$2(Object.fromEntries(_),p)}else{if(i){var f=d.fullPath(n);return this.fs[f]={path:f,mode:"binary",content:new Uint8Array(0),timestamps:{access:new Date,modification:new Date,change:new Date}},this.$1(this.fs[f],u,a)}return[o("WASISnapshotPreview1").RESULT.ENOTCAPABLE]}},t.close=function(t){if(!this.openMap.has(t))return o("WASISnapshotPreview1").RESULT.EBADF;var e=this.openMap.get(t);return e instanceof s&&e.sync(),this.openMap.delete(t),o("WASISnapshotPreview1").RESULT.SUCCESS},t.read=function(t,n){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.read(n)]},t.pread=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.pread(n,r)]},t.write=function(t,n){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.write(n),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.pwrite=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.pwrite(n,r),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.sync=function(t){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.seek=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.seek(n,r)]},t.tell=function(t){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.tell()]},t.renumber=function(t,n){if(!this.exists(t)||!this.exists(n))return o("WASISnapshotPreview1").RESULT.EBADF;if(t===n)return o("WASISnapshotPreview1").RESULT.SUCCESS;this.close(n);var e=this.openMap.get(t);return this.openMap.set(n,e),o("WASISnapshotPreview1").RESULT.SUCCESS},t.unlink=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(!e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOENT;for(var r of Object.keys(this.fs))(r===e.fullPath(n)||r.startsWith(e.fullPath(n)+"/"))&&delete this.fs[r];return o("WASISnapshotPreview1").RESULT.SUCCESS},t.rename=function(t,n,r,a){var e=this.openMap.get(t),i=this.openMap.get(r);if(!(e instanceof c)||!(i instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(!e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOENT;if(i.contains(a))return o("WASISnapshotPreview1").RESULT.EEXIST;var l=e.fullPath(n),s=i.fullPath(a);for(var u of Object.keys(this.fs))if(u.startsWith(l)){var d=u.replace(l,s);this.fs[d]=this.fs[u],this.fs[d].path=d,delete this.fs[u]}return o("WASISnapshotPreview1").RESULT.SUCCESS},t.list=function(t){var e=this.openMap.get(t);return e instanceof c?[o("WASISnapshotPreview1").RESULT.SUCCESS,e.list()]:[o("WASISnapshotPreview1").RESULT.EBADF]},t.stat=function(t){var e=this.openMap.get(t);return e instanceof s?[o("WASISnapshotPreview1").RESULT.SUCCESS,e.stat()]:[o("WASISnapshotPreview1").RESULT.EBADF]},t.pathStat=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return[o("WASISnapshotPreview1").RESULT.EBADF];if(e.containsFile(n)){var r=e.fullPath(n),a=new s(this.fs[r],0).stat();return[o("WASISnapshotPreview1").RESULT.SUCCESS,a]}else if(this.$3(e,n)){if(n===".")return[o("WASISnapshotPreview1").RESULT.SUCCESS,new c(this.fs,"/").stat()];var i="/"+n+"/",l=Object.entries(this.fs).filter(function(e){var t=e[0];return t.startsWith(i)}),u=new c(Object.fromEntries(l),i).stat();return[o("WASISnapshotPreview1").RESULT.SUCCESS,u]}else return[o("WASISnapshotPreview1").RESULT.ENOTCAPABLE]},t.setFlags=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setFlags(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setSize=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setSize(Number(n)),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setAccessTime=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setAccessTime(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setModificationTime=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setModificationTime(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.pathSetAccessTime=function(t,n,r){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;var a=e.get(n);if(a==null)return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var i=new s(a,0);return i.setAccessTime(r),i.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS},t.pathSetModificationTime=function(t,n,r){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;var a=e.get(n);if(a==null)return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var i=new s(a,0);return i.setModificationTime(r),i.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS},t.pathCreateDir=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var r=e.fullPath(n)+"/.runno";return this.fs[r]={path:r,timestamps:{access:new Date,modification:new Date,change:new Date},mode:"string",content:""},o("WASISnapshotPreview1").RESULT.SUCCESS},t.exists=function(t){return this.openMap.has(t)},t.fileType=function(t){var e=this.openMap.get(t);return e?e instanceof s?o("WASISnapshotPreview1").FileType.REGULAR_FILE:o("WASISnapshotPreview1").FileType.DIRECTORY:o("WASISnapshotPreview1").FileType.UNKNOWN},t.fileFdflags=function(t){var e=this.openMap.get(t);return e instanceof s?e.fdflags:0},e})(),s=(function(){function e(e,t){if(this.$1=BigInt(0),this.isDirty=!1,this.file=e,this.file.mode==="string"){var n=this.file.content,r=o("WATextEncoding").newTextEncoder();this.buffer=r.encode(n)}else this.buffer=this.file.content;this.fdflags=t,this.flagAppend=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.APPEND),this.flagDSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.DSYNC),this.flagNonBlock=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.NONBLOCK),this.flagRSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.RSYNC),this.flagSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.SYNC)}var t=e.prototype;return t.getOffset=function(){return Number(this.$1)},t.read=function(t){var e=this.buffer.subarray(this.getOffset(),this.getOffset()+t);return this.$1+=BigInt(e.length),e},t.pread=function(t,n){return this.buffer.subarray(n,n+t)},t.write=function(t){if(this.isDirty=!0,this.flagAppend){var e=this.buffer.length;this.$2(e+t.byteLength),this.buffer.set(t,e)}else{var n=Math.max(this.getOffset()+t.byteLength,this.buffer.byteLength);this.$2(n),this.buffer.set(t,this.getOffset()),this.$1+=BigInt(t.byteLength)}(this.flagDSync||this.flagSync)&&this.sync()},t.pwrite=function(t,n){if(this.isDirty=!0,this.flagAppend){var e=this.buffer.length;this.$2(e+t.byteLength),this.buffer.set(t,e)}else{var r=Math.max(n+t.byteLength,this.buffer.byteLength);this.$2(r),this.buffer.set(t,n)}(this.flagDSync||this.flagSync)&&this.sync()},t.sync=function(){if(this.isDirty){if(this.isDirty=!1,this.file.mode==="binary"){this.file.content=new Uint8Array(this.buffer);return}var e=o("WATextEncoding").newTextDecoder();this.file.content=e.decode(this.buffer)}},t.seek=function(t,n){switch(n){case o("WASISnapshotPreview1").Whence.SET:this.$1=t;break;case o("WASISnapshotPreview1").Whence.CUR:this.$1+=t;break;case o("WASISnapshotPreview1").Whence.END:this.$1=BigInt(this.buffer.length)+t;break}return this.$1},t.tell=function(){return this.$1},t.stat=function(){return{path:this.file.path,timestamps:this.file.timestamps,type:o("WASISnapshotPreview1").FileType.REGULAR_FILE,byteLength:this.buffer.length}},t.setFlags=function(t){this.fdflags=t},t.setSize=function(t){this.$2(t)},t.setAccessTime=function(t){this.file.timestamps.access=t},t.setModificationTime=function(t){this.file.timestamps.modification=t},t.$2=function(t){if(t<=this.buffer.buffer.byteLength){this.buffer=new Uint8Array(this.buffer.buffer,0,t);return}var e;this.buffer.buffer.byteLength===0?e=new ArrayBuffer(t<1024?1024:t*2):t>this.buffer.buffer.byteLength*2?e=new ArrayBuffer(t*2):e=new ArrayBuffer(this.buffer.buffer.byteLength*2);var n=new Uint8Array(e,0,t);n.set(this.buffer),this.buffer=n},e})();function u(e,t){var n=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),r=new RegExp("^"+n);return e.replace(r,"")}var c=(function(){function e(e,t){this.dir=e,this.prefix=t}var t=e.prototype;return t.containsFile=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n===t)return!0}return!1},t.containsDirectory=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n.startsWith(t+"/"))return!0}return!1},t.contains=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n===t||n.startsWith(t+"/"))return!0}return!1},t.get=function(t){return this.dir[this.fullPath(t)]},t.fullPath=function(t){return""+this.prefix+t},t.list=function(){var e=[],t=new Set;for(var n of Object.keys(this.dir)){var r=u(n,this.prefix);if(r.includes("/")){var a=r.split("/")[0];if(t.has(a))continue;t.add(a),e.push({name:a,type:o("WASISnapshotPreview1").FileType.DIRECTORY})}else e.push({name:r,type:o("WASISnapshotPreview1").FileType.REGULAR_FILE})}return e},t.stat=function(){return{path:this.prefix,timestamps:{access:new Date,modification:new Date,change:new Date},type:o("WASISnapshotPreview1").FileType.DIRECTORY,byteLength:0}},e})();l.WASIDrive=e}),98);
__d("WASMMemoryLogger",["FBLogger","QPLFlow","WAHashStringToNumber","justknobx","qpl","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("168"),s=(function(){function e(){var e=this;this.$1=new FinalizationRegistry(function(t){e.$3-=t.numBytes;var n=t.wasmModule;if(n!=null){var r=e.$2.get(n);if(r!=null){var o=r-t.numBytes;o<=0?e.$2.delete(n):e.$2.set(n,o)}}}),this.$3=0,this.$2=new Map}var t=e.prototype;return t.addWasmInstanceToSet=function(t,n){var e=t.buffer.byteLength;if(this.$1.register(t,{numBytes:e,wasmModule:n}),this.$3+=e,n!=null){var r,o=(r=this.$2.get(n))!=null?r:0;this.$2.set(n,o+e)}},t.getCurrentWasmMemoryUsage=function(){return this.$3},t.getWasmMemoryUsagePerModuleAnnotationsObject=function(){var e={};return this.$2.forEach(function(t,n){e["wasm_memory_usage_"+n]=t}),e},e})(),u;function c(){if(u==null){if(typeof FinalizationRegistry!="function"){r("FBLogger")("wmi").warn("unable to run wasm memory logger - finalization registry not supported in browser");return}u=new s,window.setInterval(function(){var e=r("qpl")._(994782764,"418"),t=o("WAHashStringToNumber").hashStringToNumber(r("uuidv4")()),n=u.getWasmMemoryUsagePerModuleAnnotationsObject(),a=o("QPLFlow").startQPLFlow(e,{annotations:{int:babelHelpers.extends({},n,{wasm_total_memory_usage:u.getCurrentWasmMemoryUsage()})},instanceKey:t});a.endSuccess()},e)}return u}l.getOrInitWasmMemoryLogger=c}),98);
__d("WASI",["WACryptoDependencies","WASIContext","WASIDrive","WASISnapshotPreview1","WASMMemoryLogger","WATextEncoding","err","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t,n=new(o("WASIContext")).WASIContext(e),a=new(o("WASIDrive")).WASIDrive(n.fs);function i(){return Object.entries(n.env).map(function(e){var t=e[0],n=e[1];return t+"="+n})}var l={args_get:function(r,a){var e=r,i=a,l=new DataView(t.buffer);for(var s of n.args){l.setUint32(e,i,!0),e+=4;var u=o("WATextEncoding").newTextEncoder().encode(s+"\0"),c=new Uint8Array(t.buffer,i,u.byteLength);c.set(u),i+=u.byteLength}return o("WASISnapshotPreview1").RESULT.SUCCESS},args_sizes_get:function(r,a){var e=n.args,i=e.reduce(function(e,t){return e+o("WATextEncoding").newTextEncoder().encode(t+"\0").byteLength},0),l=new DataView(t.buffer);return l.setUint32(r,e.length,!0),l.setUint32(a,i,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},clock_res_get:function(){throw r("err")("clock_res_get is not implemented")},clock_time_get:function(n,r,a){var e=o("WASISnapshotPreview1").Clock.cast(n);if(e==null)return o("WASISnapshotPreview1").RESULT.EINVAL;switch(e){case o("WASISnapshotPreview1").Clock.REALTIME:case o("WASISnapshotPreview1").Clock.MONOTONIC:case o("WASISnapshotPreview1").Clock.PROCESS_CPUTIME_ID:case o("WASISnapshotPreview1").Clock.THREAD_CPUTIME_ID:{var i=new DataView(t.buffer);return i.setBigUint64(a,f(new Date),!0),o("WASISnapshotPreview1").RESULT.SUCCESS}}},environ_get:function(n,r){var e=n,a=r,l=new DataView(t.buffer);for(var s of i()){l.setUint32(e,a,!0),e+=4;var u=o("WATextEncoding").newTextEncoder().encode(s+"\0"),c=new Uint8Array(t.buffer,a,u.byteLength);c.set(u),a+=u.byteLength}return o("WASISnapshotPreview1").RESULT.SUCCESS},environ_sizes_get:function(n,r){var e=i().reduce(function(e,t){return e+o("WATextEncoding").newTextEncoder().encode(t+"\0").byteLength},0),a=new DataView(t.buffer);return a.setUint32(n,i().length,!0),a.setUint32(r,e,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_advise:function(){throw r("err")("fd_advise is not implemented")},fd_allocate:function(){throw r("err")("fd_allocate is not implemented")},fd_close:function(t){return a.close(t)},fd_datasync:function(){throw r("err")("fd_datasync is not implemented")},fd_fdstat_get:function(r,i){if(r<3){var e;if(n.isTTY){var l=c^o("WASISnapshotPreview1").RightsFlags.FD_SEEK^o("WASISnapshotPreview1").RightsFlags.FD_TELL;e=p(o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0,l)}else e=p(o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0);var s=new Uint8Array(t.buffer,i,e.byteLength);return s.set(e),o("WASISnapshotPreview1").RESULT.SUCCESS}if(!a.exists(r))return o("WASISnapshotPreview1").RESULT.EBADF;var u=a.fileType(r),d=a.fileFdflags(r),m=p(u,d),_=new Uint8Array(t.buffer,i,m.byteLength);return _.set(m),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_fdstat_set_flags:function(t,n){return a.setFlags(t,n)},fd_fdstat_set_rights:function(){return o("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_get:function(n,r){if(n<3){var e;switch(n){case 0:e="/dev/stdin";break;case 1:e="/dev/stdout";break;case 2:e="/dev/stderr";break;default:e="/dev/undefined";break}var i=m({path:e,byteLength:0,timestamps:{access:new Date,modification:new Date,change:new Date},type:o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE}),l=new Uint8Array(t.buffer,r,i.byteLength);return l.set(i),o("WASISnapshotPreview1").RESULT.SUCCESS}var s=a.stat(n);if(s.length===1)return s[0];var u=s[1],c=m(u),d=new Uint8Array(t.buffer,r,c.byteLength);return d.set(c),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_set_size:function(){throw r("err")("fd_filestat_set_size is not implemented")},fd_filestat_set_times:function(){throw r("err")("fd_filestat_set_times is not implemented")},fd_pread:function(){throw r("err")("fd_pread is not implemented")},fd_prestat_dir_name:function(n,r,a){if(n!==3)return o("WASISnapshotPreview1").RESULT.EBADF;var e=o("WATextEncoding").newTextEncoder().encode("/"),i=new Uint8Array(t.buffer,r,a);return i.set(e.subarray(0,a)),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_prestat_get:function(n,r){if(n!==3)return o("WASISnapshotPreview1").RESULT.EBADF;var e=o("WATextEncoding").newTextEncoder().encode("."),a=new DataView(t.buffer,r);return a.setUint8(0,o("WASISnapshotPreview1").PreopenType.DIR),a.setUint32(4,e.byteLength,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_pwrite:function(){throw r("err")("fd_pwrite is not implemented")},fd_read:function(r,i,l,s){if(r===1||r===2)return o("WASISnapshotPreview1").RESULT.ENOTSUP;var e=new DataView(t.buffer),u=d(e,i,l),c=o("WATextEncoding").newTextEncoder(),m=0,p=o("WASISnapshotPreview1").RESULT.SUCCESS;for(var _ of u){var f=void 0;if(r===0){var g=n.stdin(_.byteLength);if(g==null)break;f=c.encode(g)}else{var h=a.read(r,_.byteLength);if(h.length===1){p=h[0];break}else f=h[1]}var y=Math.min(_.byteLength,f.byteLength);_.set(f.subarray(0,y)),m+=y}return e.setUint32(s,m,!0),p},fd_readdir:function(){throw r("err")("fd_readdir is not implemented")},fd_renumber:function(){throw r("err")("fd_renumber is not implemented")},fd_seek:function(n,i,l,s){var e=o("WASISnapshotPreview1").Whence.cast(l);if(e==null)throw r("err")("fd_seek: invalid whence");var u=a.seek(n,i,e);if(u.length===1)return u[0];var c=u[0],d=u[1],m=new DataView(t.buffer);return m.setBigUint64(s,d,!0),c},fd_sync:function(){throw r("err")("fd_sync is not implemented")},fd_tell:function(n,r){var e=a.tell(n);if(e.length===1)return e[0];var o=e[0],i=e[1],l=new DataView(t.buffer);return l.setBigUint64(r,i,!0),o},fd_write:function(r,i,l,s){if(r===0)return o("WASISnapshotPreview1").RESULT.ENOTSUP;var e=new DataView(t.buffer),u=d(e,i,l),c=o("WATextEncoding").newTextDecoder(),m=0,p=o("WASISnapshotPreview1").RESULT.SUCCESS;for(var _ of u)if(_.byteLength!==0){if(r===1||r===2){var f=r===1?n.stdout:n.stderr,g=c.decode(_);f(g)}else if(p=a.write(r,_),p!==o("WASISnapshotPreview1").RESULT.SUCCESS)break;m+=_.byteLength}return e.setUint32(s,m,!0),p},path_create_directory:function(){throw r("err")("path_create_directory is not implemented")},path_filestat_get:function(){throw r("err")("path_filestat_get is not implemented")},path_filestat_set_times:function(){throw r("err")("path_filestat_set_times is not implemented")},path_link:function(){throw r("err")("path_link is not implemented")},path_open:function(n,r,o,i,l,s,u,c,d){var e=new DataView(t.buffer),m=_(t,o,i),p=a.open(n,m,l,c);if(p.length===1)return p[0];var f=p[0],g=p[1];return e.setUint32(d,g,!0),f},path_readlink:function(){throw r("err")("path_readlink is not implemented")},path_remove_directory:function(){throw r("err")("path_remove_directory is not implemented")},path_rename:function(){throw r("err")("path_rename is not implemented")},path_symlink:function(){throw r("err")("path_symlink is not implemented")},path_unlink_file:function(){throw r("err")("path_unlink_file is not implemented")},poll_oneoff:function(){throw r("err")("poll_oneoff is not implemented")},proc_exit:function(t){throw new u(t)},proc_raise:function(){throw r("err")("proc_raise is not implemented")},random_get:function(n,r){var e=new Uint8Array(t.buffer,n,r);return o("WACryptoDependencies").getCrypto().getRandomValues(e),o("WASISnapshotPreview1").RESULT.SUCCESS},sched_yield:function(){throw r("err")("sched_yield is not implemented")},sock_accept:function(){throw r("err")("sock_accept is not implemented")},sock_recv:function(){throw r("err")("sock_recv is not implemented")},sock_send:function(){throw r("err")("sock_send is not implemented")},sock_shutdown:function(){throw r("err")("sock_shutdown is not implemented")}};return{getImportObject:function(){return{wasi_snapshot_preview1:l}},start:function(i){var n=i.exports.memory;if(n instanceof WebAssembly.Memory){if(t=n,r("gkx")("4444")){var l=o("WASMMemoryLogger").getOrInitWasmMemoryLogger();l!=null&&l.addWasmInstanceToSet(t,e.moduleName)}}else throw r("err")("Expected memory object");var s=i.exports._start;try{s()}catch(e){if(e instanceof u)return{exitCode:e.code,fs:a.fs};if(e instanceof WebAssembly.RuntimeError)return{exitCode:134,fs:a.fs};throw e}return{exitCode:0,fs:a.fs}},initialize:function(n){var e=n.exports.memory;if(e instanceof WebAssembly.Memory)t=e;else throw r("err")("Expected memory object");var o=n.exports;if("_initialize"in o){var i=o._initialize;i()}return{exports:o,drive:a}}}}var u=(function(e){function t(t){var n;return n=e.call(this)||this,n.code=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),c=(e=o("WASISnapshotPreview1")).RightsFlags.FD_DATASYNC|e.RightsFlags.FD_READ|e.RightsFlags.FD_SEEK|e.RightsFlags.FD_FDSTAT_SET_FLAGS|e.RightsFlags.FD_SYNC|e.RightsFlags.FD_TELL|e.RightsFlags.FD_WRITE|e.RightsFlags.FD_ADVISE|e.RightsFlags.FD_ALLOCATE|e.RightsFlags.PATH_CREATE_DIRECTORY|e.RightsFlags.PATH_CREATE_FILE|e.RightsFlags.PATH_LINK_SOURCE|e.RightsFlags.PATH_LINK_TARGET|e.RightsFlags.PATH_OPEN|e.RightsFlags.FD_READDIR|e.RightsFlags.PATH_READLINK|e.RightsFlags.PATH_RENAME_SOURCE|e.RightsFlags.PATH_RENAME_TARGET|e.RightsFlags.PATH_FILESTAT_GET|e.RightsFlags.PATH_FILESTAT_SET_SIZE|e.RightsFlags.PATH_FILESTAT_SET_TIMES|e.RightsFlags.FD_FILESTAT_GET|e.RightsFlags.FD_FILESTAT_SET_SIZE|e.RightsFlags.FD_FILESTAT_SET_TIMES|e.RightsFlags.PATH_SYMLINK|e.RightsFlags.PATH_REMOVE_DIRECTORY|e.RightsFlags.PATH_UNLINK_FILE|e.RightsFlags.POLL_FD_READWRITE|e.RightsFlags.SOCK_SHUTDOWN|e.RightsFlags.SOCK_ACCEPT;function d(e,t,n){for(var r=new Array(n),o=t,a=0;a<n;a++){var i=e.getUint32(o,!0);o+=4;var l=e.getUint32(o,!0);o+=4,r[a]=new Uint8Array(e.buffer,i,l)}return r}function m(e){var t=new Uint8Array(o("WASISnapshotPreview1").FILESTAT_SIZE),n=new DataView(t.buffer);return n.setBigUint64(0,BigInt(0),!0),n.setBigUint64(8,BigInt(g(e.path)),!0),n.setUint8(16,e.type),n.setBigUint64(24,BigInt(1),!0),n.setBigUint64(32,BigInt(e.byteLength),!0),n.setBigUint64(40,f(e.timestamps.access),!0),n.setBigUint64(48,f(e.timestamps.modification),!0),n.setBigUint64(56,f(e.timestamps.change),!0),t}function p(e,t,n){var r=n!=null?n:c,o=n!=null?n:c,a=new Uint8Array(24),i=new DataView(a.buffer,0,24);return i.setUint8(0,e),i.setUint32(2,t,!0),i.setBigUint64(8,r,!0),i.setBigUint64(16,o,!0),a}function _(e,t,n){return o("WATextEncoding").newTextDecoder().decode(new Uint8Array(e.buffer,t,n))}function f(e){return BigInt(e.getTime())*BigInt(1e6)}function g(e,t){t===void 0&&(t=0);for(var n=3735928559^t,r=1103547991^t,o=0,a;o<e.length;o++)a=e.charCodeAt(o),n=Math.imul(n^a,2654435761),r=Math.imul(r^a,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}l.createWasi=s}),98);
__d("WAWasmReactor",["FBLogger","WAPromiseQueue","WAResultOrError","WASI","WASISnapshotPreview1","WASMMemoryLogger","decodeProtobuf","encodeProtobuf","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["WasmReactor"])},m=3e4;function p(e){var t=e.stderr,n=e.stdout;return{stderr:t,stdout:n}}var _=(function(){function t(e,t){this.$1=null,this.$4=e,this.$3=t}var n=t.prototype;return n.init=async function(n){var t=this,a=function(r){d().tags([t.$4]).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),r)},i=function(t){d().INFO(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)},l=o("WASI").createWasi(p({stderr:a,stdout:i})),u=l.getImportObject,c=l.initialize,m=await n(),_=await WebAssembly.instantiate(m,u()),f=_.exports.memory,g=r("gkx")("4444"),h=o("WASMMemoryLogger").getOrInitWasmMemoryLogger();f instanceof WebAssembly.Memory&&g&&h!=null&&h.addWasmInstanceToSet(f,this.$4),this.$1=await c(_)},n.createWasmCommand=function(n){var e=n.InputSpec,a=n.ResultSpec,i=n.validateResult,l=this;return function(s){return l.$3.enqueue(async function(){var n=l.$1;if(n==null)return d().tags([l.$4]).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAWasmReactor not initialized"]))),o("WAResultOrError").makeError("wasm-internal-not-initialized");var m=n.drive,p="input",_="output";try{var f=o("encodeProtobuf").encodeProtobuf(e,s).readBuffer();t.$5(m,p,new Uint8Array(f),l.$4),t.$5(m,_,new Uint8Array(0),l.$4),await n.exports.execute_command();var g=t.$6(m,_,l.$4);if(g.length===0)return o("WAResultOrError").makeError("wasm-internal-runtime-error");var h=o("decodeProtobuf").decodeProtobuf(a,g);return i(h)}catch(e){var y=r("getErrorSafe")(e);return d().tags([l.$4]).catching(y).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unexpected runtime error: ",""])),y.message),o("WAResultOrError").makeError("wasm-internal-runtime-error")}finally{var C=t.$2;m.unlink(C,p),m.unlink(C,_)}})}},t.$5=function(n,r,a,i){var e=n.open(t.$2,r,o("WASISnapshotPreview1").OpenFlags.CREAT||o("WASISnapshotPreview1").OpenFlags.TRUNC,0);if(e[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw d().tags([i]).mustfixThrow("Failed to open file for writing: ",r);var l=e[1];n.write(l,a),n.close(l)},t.$6=function(n,r,a){var e=n.open(t.$2,r,0,0);if(e[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw d().tags([a]).mustfixThrow("Failed to open file for reading: ",r);var i=e[1],l=n.stat(i);if(l[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw n.close(i),d().tags([a]).mustfixThrow("Failed to stat file: ",r);var s=l[1].byteLength,u=n.read(i,s);if(n.close(i),u[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw d().tags([a]).mustfixThrow("Failed to read from file ",r);return u[1]},t})();_.$2=3;async function f(e,t){var n=new(o("WAPromiseQueue")).PromiseQueue(m),r=new _(t,n);return await r.init(e),r}l.WAWasmReactor=_,l.createWasmInstance=f}),98);
__d("EBMinosWasmReactorSingleton",["EBGetMinosWasm","WAWasmReactor","memoizeWithArgs"],(function(t,n,r,o,a,i,l){"use strict";var e="Minos_REPL",s=r("memoizeWithArgs")(function(){return o("WAWasmReactor").createWasmInstance(o("EBGetMinosWasm").getMinosWasm,e)},function(){return"cache"}),u=async function(t,n){var e=t.InputSpec,r=t.ResultSpec,o=t.validateResult,a=await s();return a.createWasmCommand({InputSpec:e,ResultSpec:r,validateResult:o})(n)};l.minosCommand=u}),98);
__d("EBMinosWasmVerifySingleEpoch",["EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.valid;return o("WAResultOrError").makeResult({valid:t})}return async function(n){var t=n.epochPublicData,r=n.signature;return await o("EBMinosWasmReactorSingleton").minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").MinosVerifySingleEpochResultSpec,validateResult:e},{minosVerifySingleEpoch:{epochPublicData:t,signature:r}})}}var s=e();l.verifySingleEpoch=s}),98);
__d("EBAPIMinosVerifySingleEpoch",["EBMinosLogger","EBMinosWasmVerifySingleEpoch","WAGetSafeQPLError"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){o("EBMinosLogger").minosLogger.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["minosVerifySingleEpoch start"])));var n=t.qplFlow,r=t.minosEpochAnonId,a=t.minosMailboxAuthPublicKey,i=t.minosMailboxEncryptionPublicKey,l=t.minosMailboxSigningPublicKey,u=t.userId,c=t.selfEpochSignature;try{var d={epochNumber:r,mailboxAuthPk:a,mailboxEncryptionPk:i,mailboxSigningPk:l,previousEpochHead:t.previousEpochHead==null?void 0:t.previousEpochHead,userFbid:u};n.addPoint("verify_single_epoch_start");var m=await o("EBMinosWasmVerifySingleEpoch").verifySingleEpoch({epochPublicData:d,signature:c});return n.addPoint("verify_single_epoch_end"),m.success?(n.endSuccess(),m.value.valid):(o("EBMinosLogger").minosLogger.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to verify epoch - WASM error ",""])),m.error),n.endFailWithError("invalid-result",m.error),!1)}catch(e){return n.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(e)),!1}}l.minosVerifySingleEpoch=u}),98);
__d("EBMinosHasNewerMailboxKeys",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return t==null||n==null?!1:(e==null?void 0:e.epoch_head)==null||(e==null?void 0:e.epoch_head_creation_time)==null?!0:e.epoch_head_creation_time!==n&&n>e.epoch_head_creation_time}i.hasNewerMailboxKeys=e}),66);
__d("EBMinosSaveNewMailboxKey",["EBMinosDb"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a,i,l){var e=await o("EBMinosDb").getEBMinosDb();await e.runInTransaction(["secure_minos_mailbox_keys"],"readwrite",function(e){return e.stores.secure_minos_mailbox_keys.bulkPut([{contact_id:t,encryption_public_key:n,epoch_anon_id:r,epoch_head:a,epoch_head_creation_time:i,public_key_fbid:l}])},"SaveNewMailboxKey")};l.saveNewMailboxKey=e}),98);
__d("EBMinosLoadMailboxKeys",["EBMinosDb"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t){var e=await o("EBMinosDb").getEBMinosDb(),n=await e.runInTransaction(["secure_minos_mailbox_keys"],"readonly",function(e){return e.stores.secure_minos_mailbox_keys.get(t)},"LoadMailboxKeys");return n};l.loadMailboxKeys=e}),98);
__d("EBMinosSecureMailboxKeysForContact",["EBMinosLoadMailboxKeys","EBMinosTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("EBMinosLoadMailboxKeys").loadMailboxKeys(o("EBMinosTypes").unsafeCastToUserFbId(e))}l.getSecureMailboxKeysForContact=e}),98);
__d("EBMinosWriteMinosPublicKeysForRecipient",["EBMinosHasNewerMailboxKeys","EBMinosLogger","EBMinosSaveNewMailboxKey","EBMinosSecureMailboxKeysForContact"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){var n=t.contactId,r=t.encryptionPublicKey,a=t.epochAnonId,i=t.epochHead,l=t.epochHeadCreationTime,u=t.publicKeyFbid,c=await o("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(n);if(i==null||l==null){(c==null?void 0:c.epoch_head)!=null&&(c==null?void 0:c.epoch_head_creation_time)!=null&&(o("EBMinosLogger").minosLogger.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Deleting mailbox keys for contact: ",""])),n),await o("EBMinosSaveNewMailboxKey").saveNewMailboxKey(n,r,a,i,l,u));return}o("EBMinosHasNewerMailboxKeys").hasNewerMailboxKeys(c,i,l)&&(o("EBMinosLogger").minosLogger.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing new mailbox keys for contact: ",""])),n),await o("EBMinosSaveNewMailboxKey").saveNewMailboxKey(n,r,a,i,l,u))}l.writeMinosMailboxKeysForRecipient=u}),98);
__d("EBAPIWriteMinosPublicKeysForRecipient",["EBMinosWriteMinosPublicKeysForRecipient"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.contactId,n=e.encryptionPublicKey,r=e.epochAnonId,a=e.epochHead,i=e.epochHeadCreationTime,l=e.publicKeyFbid;return o("EBMinosWriteMinosPublicKeysForRecipient").writeMinosMailboxKeysForRecipient({contactId:t,encryptionPublicKey:n,epochAnonId:r,epochHead:a,epochHeadCreationTime:i,publicKeyFbid:l})}l.writeMinosMailboxKeysForRecipientAPI=e}),98);/*FB_PKG_DELIM*/
__d("getEmojiSize",["CometComposerStylingConstants","CometLexicalEmojiNode","getResolvedShouldShrink"],(function(t,n,r,o,a,i,l){"use strict";var e=["emojiSizeOverride","formattedTextStyling","textLength"];function s(t){var n,a=t.emojiSizeOverride,i=t.formattedTextStyling,l=t.textLength,s=babelHelpers.objectWithoutPropertiesLoose(t,e);if(a!=null)return a;var u=l>=o("CometComposerStylingConstants").MAX_DYNAMIC_TEXT_LENGTH,c=r("getResolvedShouldShrink")(babelHelpers.extends({formattedTextStyling:i,textExceedsLength:u},s));return(n=i==null?void 0:i.fontSize)!=null?n:c?o("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_SMALL:o("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_LARGE}l.default=s}),98);
__d("CometComposerEmojiPluginForLexical.react",["CometLexicalEmojiNode","Lexical","LexicalText","getEmojiSize","getUpgradedCometEmojiComposerHandler","react","react-compiler-runtime","useCometStatusAreaTextData","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e=["editor","emojiSizeOverride"],s,u=s||(s=o("react")),c=u.useLayoutEffect,d=u.useRef;function m(e){var t,n=o("react-compiler-runtime").c(35),a=e.activeAttachmentType,i=e.alwaysShrinkText,l=e.editor,s=e.emojiSizeOverride,u=e.formattedTextPreset,m=e.formattingType,_=(t=r("useCometStatusAreaTextData")(u))==null?void 0:t.formattedTextStyling,f;n[0]!==a||n[1]!==i||n[2]!==s||n[3]!==_||n[4]!==m?(f=s!=null?s:r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,formattedTextStyling:_,formattingType:m,textLength:0}),n[0]=a,n[1]=i,n[2]=s,n[3]=_,n[4]=m,n[5]=f):f=n[5];var g=d(f),h;n[6]===Symbol.for("react.memo_cache_sentinel")?(h=new Set,n[6]=h):h=n[6];var y=d(h),C;n[7]===Symbol.for("react.memo_cache_sentinel")?(C=function(t,n){y.current.forEach(function(e){n.update(function(){var n=o("Lexical").$getNodeByKey(e);n!==null&&n.setSize(t)})}),g.current=t},n[7]=C):C=n[7];var b=C,v,S;n[8]!==l?(v=function(){if(l!=null){var e=y.current;return l.getEditorState().read(function(){o("Lexical").$nodesOfType(o("CometLexicalEmojiNode").EmojiNode).forEach(function(t){e.add(t.getKey())})}),l.registerMutationListener(o("CometLexicalEmojiNode").EmojiNode,function(t){t.forEach(function(t,n){t==="created"?e.add(n):t==="destroyed"&&e.delete(n)})},{skipInitialization:!0})}},S=[l],n[8]=l,n[9]=v,n[10]=S):(v=n[9],S=n[10]),c(v,S);var R,L;n[11]!==a||n[12]!==i||n[13]!==l||n[14]!==s||n[15]!==_||n[16]!==m?(R=function(){if(l!=null)return p({activeAttachmentType:a,alwaysShrinkText:i,editor:l,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m})},L=[l,a,i,_,m,s],n[11]=a,n[12]=i,n[13]=l,n[14]=s,n[15]=_,n[16]=m,n[17]=R,n[18]=L):(R=n[17],L=n[18]),c(R,L);var E,k;n[19]!==a||n[20]!==i||n[21]!==l||n[22]!==s||n[23]!==_||n[24]!==m?(E=function(){l!=null&&l.update(function(){var e=l.getEditorState().read(o("LexicalText").$rootTextContent).length,t=r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m,textLength:e});g.current!==t&&b(t,l)})},k=[l,a,i,_,m,s],n[19]=a,n[20]=i,n[21]=l,n[22]=s,n[23]=_,n[24]=m,n[25]=E,n[26]=k):(E=n[25],k=n[26]),c(E,k);var I,T;n[27]!==a||n[28]!==i||n[29]!==l||n[30]!==s||n[31]!==_||n[32]!==m?(I=function(){if(l!=null)return l.registerTextContentListener(function(e){var t=r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m,textLength:e.length});g.current!==t&&b(t,l)})},T=[l,a,i,_,m,s],n[27]=a,n[28]=i,n[29]=l,n[30]=s,n[31]=_,n[32]=m,n[33]=I,n[34]=T):(I=n[33],T=n[34]),c(I,T)}function p(t){var n=t.editor,o=t.emojiSizeOverride,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=function(){},l=n.registerTextContentListener(function(e){var t=r("getEmojiSize")(babelHelpers.extends({emojiSizeOverride:o,textLength:e.length},a));i(),i=r("getUpgradedCometEmojiComposerHandler")(n,t)});return function(){i(),l()}}var _=r("withComposerViewStatePart")(m,function(e){var t,n;return{activeAttachmentType:(t=e.attachmentArea)==null?void 0:t.activeAttachmentType,editor:e.lexicalEditor,emojiSizeOverride:e.emojiSizeOverride,formattedTextPreset:(n=e.formattedText)==null?void 0:n.currentFormattedTextPreset,formattingType:e.formattingType}});l.default=_}),98);
__d("CometComposerHashtagPluginForLexical.react",["react","react-compiler-runtime","requireDeferred","useDeferredModuleOnReady","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=r("requireDeferred")("getUpgradedCometHashtagComposerHandler").__setRef("CometComposerHashtagPluginForLexical.react");function c(e){var t=o("react-compiler-runtime").c(4),n=e.editor,a=r("useDeferredModuleOnReady")(u),i,l;t[0]!==n||t[1]!==a?(i=function(){if(n!=null&&a!=null)return a(n)},l=[n,a],t[0]=n,t[1]=a,t[2]=i,t[3]=l):(i=t[2],l=t[3]),s(i,l)}var d=r("withComposerViewStatePart")(c,function(e){return{editor:e.lexicalEditor}});l.default=d}),98);
__d("FeedComposerCometHashtagTypeheadListItem.react",["CometSearchMentionsBaseViewItem.react","FDSTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(11),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=a.label,s=a.rawData.subtext,c;n[3]===Symbol.for("react.memo_cache_sentinel")?(c={className:"x1y1aw1k xf159sx xwib8y2 xmzvs34 x168biu4"},n[3]=c):c=n[3];var d;n[4]!==l||n[5]!==s?(d=u.jsx("div",babelHelpers.extends({},c,{children:u.jsx(r("FDSTextPairing.react"),{headline:l,level:4,meta:s})})),n[4]=l,n[5]=s,n[6]=d):d=n[6];var m;return n[7]!==a||n[8]!==i||n[9]!==d?(m=u.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},i,{entry:a,children:d})),n[7]=a,n[8]=i,n[9]=d,n[10]=m):m=n[10],m}l.default=c}),98);
__d("cometHashtagsLexicalCreateNodeStrategy",["CometLexicalGenericEntityNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(t,n,r,o,a,i,l){"use strict";var e=r("cometBaseMentionsLexicalCreateNodeStrategy")(function(e){return o("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:e.key,text:r("cometMentionsDataEntryText")(e),type:"Hashtag"})}),s=e;l.default=s}),98);
__d("getHashtagRegexForTypeahead",["getHashtagRegexString"],(function(t,n,r,o,a,i,l){function e(){return new RegExp(r("getHashtagRegexString")()+"$","i")}l.default=e}),98);
__d("createCometHashtagMatchStrategy",["getHashtagRegexForTypeahead"],(function(t,n,r,o,a,i,l){"use strict";var e=["#","\\uFF03"];function s(t){var n=t.minMatchLength;return{findMentionableString:function(o){if(e.includes(o))return{leadOffset:0,matchingString:o,replaceableString:o};var t=new RegExp(r("getHashtagRegexForTypeahead")()),a=t.exec(o);if(a!==null){var i=a[1].length,l=a[0].substring(i);if(l!=null&&l.length>=n)return{leadOffset:i,matchingString:l,replaceableString:l}}return null},name:"HashtagMatchStrategy("+n.toString()+")"}}l.default=s}),98);
__d("createFeedComposerCometHashtagDataEntry_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"context"},{kind:"RootArgument",name:"scopeID"}],kind:"Fragment",metadata:{mask:!1},name:"createFeedComposerCometHashtagDataEntry_data",selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},{kind:"Variable",name:"scope_id",variableName:"scopeID"}],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],type:"TypeaheadHashtagResultV2",abstractKey:null};a.exports=e}),null);
__d("createFeedComposerCometHashtagDataEntry",["createFeedComposerCometHashtagDataEntry_data.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;e!==void 0||(e=n("createFeedComposerCometHashtagDataEntry_data.graphql"));function s(e){var t=e==null?void 0:e.node;if(t==null)return null;var n=t.id,r=t.name,o=t.typeahead_snippets,a=o!=null&&o.length>=1?o[0]:null;return n==null||r==null?null:{key:n,label:r,rawData:{id:n,name:r,subtext:a},type:"entry"}}l.default=s}),98);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23922566980694168"}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql",["useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"context"},t={defaultValue:!1,kind:"LocalArgument",name:"includeImageUrls"},r={defaultValue:!1,kind:"LocalArgument",name:"includeMetatext"},o={defaultValue:null,kind:"LocalArgument",name:"limit"},a={defaultValue:null,kind:"LocalArgument",name:"query"},i={defaultValue:null,kind:"LocalArgument",name:"scopeID"},l={defaultValue:null,kind:"LocalArgument",name:"sessionID"},s={kind:"Variable",name:"scope_id",variableName:"scopeID"},u=[{alias:null,args:[{fields:[{kind:"Variable",name:"context",variableName:"context"},{kind:"Variable",name:"include_image_urls",variableName:"includeImageUrls"},{kind:"Variable",name:"include_metatext",variableName:"includeMetatext"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"query",variableName:"query"},s,{kind:"Variable",name:"session_id",variableName:"sessionID"}],kind:"ObjectValue",name:"argument"}],concreteType:"TypeaheadHashtagResultV2",kind:"LinkedField",name:"hashtag_typeahead_v2",plural:!0,selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},s],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l],kind:"Fragment",metadata:null,name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:u,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,l,o,e,t,r,i],kind:"Operation",name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:u},params:{id:n("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSource",["createFeedComposerCometHashtagDataEntry","react-compiler-runtime","useCometTypeaheadGraphQLDataSource","useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql");function u(e){var t=o("react-compiler-runtime").c(8),n=e.context,a=e.includeMetatext,i=e.limit,l=e.scopeID,u;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(u=function(t){var e=t.query;return{context:n,includeMetatext:a,limit:i,query:e,scopeID:l,sessionID:""}},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u):u=t[4];var d;return t[5]!==i||t[6]!==u?(d={gqlQuery:s,limit:i,normalize:c,queryVariablesBuilderFunction:u},t[5]=i,t[6]=u,t[7]=d):d=t[7],r("useCometTypeaheadGraphQLDataSource")(d)}function c(e){var t=e==null?void 0:e.hashtag_typeahead_v2;return t==null?[]:t.map(function(e){if(e!=null)return r("createFeedComposerCometHashtagDataEntry")(e)}).filter(Boolean)}l.default=u}),98);
__d("useFeedComposerCometHashtagsDataSourceResolverConfig",["createCometHashtagMatchStrategy","react","react-compiler-runtime","useCometMentionsDataSourceResolverConfig","useCometTypeaheadCompositeDataSource","useFeedComposerCometHashtagTypeaheadDataSource"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(14),n=e.context,a=e.includeMetatext,i=e.limit,l=e.payloadDecorators,s=e.scopeID,u;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==s?(u={context:n,includeMetatext:a,limit:i,scopeID:s},t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=u):u=t[4];var c=r("useFeedComposerCometHashtagTypeaheadDataSource")(u),d;t[5]!==l?(d=l!=null?l:[],t[5]=l,t[6]=d):d=t[6];var m;t[7]!==i||t[8]!==c||t[9]!==d?(m={limit:i,networkDataSource:c,payloadDecorators:d},t[7]=i,t[8]=c,t[9]=d,t[10]=m):m=t[10];var p=r("useCometTypeaheadCompositeDataSource")(m),_,f;t[11]===Symbol.for("react.memo_cache_sentinel")?(f=r("createCometHashtagMatchStrategy")({minMatchLength:0}),t[11]=f):f=t[11];var g;t[12]!==p?(g=[{dataSource:p,matchStrategy:f}],t[12]=p,t[13]=g):g=t[13],_=g;var h=_;return r("useCometMentionsDataSourceResolverConfig")(h,!0)}l.default=u}),98);
__d("CometComposerHashtagTypeaheadPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometHashtagTypeheadListItem.react","cometHashtagsLexicalCreateNodeStrategy","cr:2971","react","react-compiler-runtime","useCometTypeaheadViewListStrategy","useFeedComposerCometHashtagsDataSourceResolverConfig","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e=["editor"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),r,a;if(n[0]!==t?(r=t.editor,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),r==null)return null;var i;return n[3]!==r||n[4]!==a?(i=u.jsx(d,babelHelpers.extends({},a,{editor:r})),n[3]=r,n[4]=a,n[5]=i):i=n[5],i}function d(e){var t=o("react-compiler-runtime").c(9),a=e.editor,i=e.groupID,l=i==null?"MAIN_COMPOSER":"GROUP_COMPOSER",s=i,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=n("cr:2971")!=null?[n("cr:2971")({limit:1})]:void 0,t[0]=c):c=t[0];var d;t[1]!==l||t[2]!==s?(d={context:l,includeMetatext:!0,limit:6,payloadDecorators:c,scopeID:s},t[1]=l,t[2]=s,t[3]=d):d=t[3];var m=r("useFeedComposerCometHashtagsDataSourceResolverConfig")(d),p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p={viewItemStrategyRenderer:r("FeedComposerCometHashtagTypeheadListItem.react")},t[4]=p):p=t[4];var _=r("useCometTypeaheadViewListStrategy")(p),f;return t[5]!==m||t[6]!==a||t[7]!==_?(f=u.jsx(r("CometMentionsForLexical.react"),{createNodeStrategy:r("cometHashtagsLexicalCreateNodeStrategy"),dataSourceResolverConfig:m,editor:a,layoutStrategyRenderer:r("CometMentionsLayoutStrategy.react"),viewStrategyRenderer:_}),t[5]=m,t[6]=a,t[7]=_,t[8]=f):f=t[8],f}var m=r("withComposerViewStatePart")(c,function(e){return{editor:e.lexicalEditor}});l.default=m}),98);
__d("CometComposerIsDirtyPluginForLexical.react",["LexicalText","composerLexicalEditorViewStateReducer","react","react-compiler-runtime","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(5),n=e.editor,a=e.lexicalIsDirty;r("useComposerViewStateReducer")(r("composerLexicalEditorViewStateReducer"));var i=r("useComposerViewStateDispatcher")(),l,u;t[0]!==i||t[1]!==n||t[2]!==a?(l=function(){if(n!=null){var e=n.getEditorState().read(o("LexicalText").$rootTextContent).length>0;return e===!0&&e!==a&&i({isDirty:!0,type:"SET_LEXICAL_DIRTY_STATE"}),n.registerTextContentListener(function(t){var n=t.length>0;n!==e&&i({isDirty:n,type:"SET_LEXICAL_DIRTY_STATE"})})}},u=[i,n,a],t[0]=i,t[1]=n,t[2]=a,t[3]=l,t[4]=u):(l=t[3],u=t[4]),s(l,u)}var c=r("withComposerViewStatePart")(u,function(e){return{editor:e.lexicalEditor,lexicalIsDirty:e.lexicalEditorIsDirty}});l.default=c}),98);
__d("composerLinkAttachmentChecker",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n,r,o=e==null||(n=e.attachmentArea)==null?void 0:n.activeAttachmentType,a=t==null||(r=t.attachmentArea)==null?void 0:r.activeAttachmentType,i=e==null?void 0:e.linkAttachment,l=t==null?void 0:t.linkAttachment;return o!=null&&a==null||i!=null&&l==null?"DELETED":(a==="LINK"||a==="SHARE")&&(i==null?void 0:i.url)!==(l==null?void 0:l.url)?"UPDATED":"UNCHANGED"}i.default=e}),66);
__d("composerLinkAttachmentReducer",["composerAttachmentAreaReducer","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,o,a,i;if(((n=e.attachmentArea)==null?void 0:n.activeAttachmentType)==="FORMATTED_TEXT"||((r=e.attachmentArea)==null?void 0:r.activeAttachmentType)==="SHARE")return e;var l=t.url,s=[].concat(((o=(a=e.linkAttachment)==null?void 0:a.urlStack)!=null?o:[]).filter(function(e){return!e.startsWith(l)&&!l.startsWith(e)}),[l]),u=(i=e.linkAttachment)==null?void 0:i.selectedLinkPreview;return u!=null&&(s=s.filter(function(e){return e!==u}).concat(u)),babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{url:s[s.length-1],urlStack:s})})}function s(e,t){var n,r,o,a,i=(n=(r=e.linkAttachment)==null?void 0:r.urlStack)!=null?n:[],l=i[i.length-1],s=((o=(a=e.linkAttachment)==null?void 0:a.removedAttachmentPreviewUrls)!=null?o:new Set).add(l);if(i.length<=1){var u;return t.onRemovedLast(!0),babelHelpers.extends({},e,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(u=e.linkAttachment)==null?void 0:u.isLinkAttachmentEnabled,removedAttachmentPreviewUrls:s}})}var c=i.slice(0,-1),d=c[c.length-1];return t.onRemovedLast(!1),babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{removedAttachmentPreviewUrls:s,selectedLinkPreview:void 0,url:d,urlStack:c})})}function u(e){var t;return babelHelpers.extends({},e,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(t=e.linkAttachment)==null?void 0:t.isLinkAttachmentEnabled}})}function c(e,t){var n;return e.useOriginalContentLinkAttachment===!0?babelHelpers.extends({},e,{originalContentLinkAttachment:babelHelpers.extends({},e.originalContentLinkAttachment,{linkPreview:{share_scrape_data:t.shareScrapeData},url:t.url})}):((n=e.linkAttachment)==null?void 0:n.url)!==t.url?e:babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{linkPreview:{share_scrape_data:t.shareScrapeData},url:t.url})})}function d(e,t){return babelHelpers.extends({},e,{useOriginalContentLinkAttachment:t.useOriginalContentLinkAttachment})}function m(e,t){var n,r,o=((n=(r=e.linkAttachment)==null?void 0:r.urlStack)!=null?n:[]).filter(function(e){return e!==t.selectedLinkPreview}).concat(t.selectedLinkPreview);return babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{selectedLinkPreview:t.selectedLinkPreview,url:t.selectedLinkPreview,urlStack:o})})}function p(e,t){var n,r=e.linkAttachment,o=(n=r==null?void 0:r.customAttachments)!=null?n:[],a=o[0].throwback_card;return r==null||a==null?e:babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},r,{customAttachments:[{throwback_card:babelHelpers.extends({},a,{media_ids:t.mediaIds})}]})})}function _(t,n){switch(n.type){case"ADD_LINK_URL":return e(t,n);case"REMOVE_LINK_URL":return s(t,n);case"REMOVE_ATTACHMENT_TYPE":{var a=o("composerAttachmentAreaReducer").getCanAlterAttachmentData(n,"LINK",t);return a?s(t,{onRemovedLast:r("emptyFunction"),type:"REMOVE_LINK_URL"}):t}case"REMOVE_ALL_LINKS":return u(t);case"SET_LINK_PREVIEW":return c(t,n);case"SET_USE_ORIGINAL_CONTENT":return d(t,n);case"SET_SELECTED_LINK_PREVIEW":return m(t,n);case"SET_THROWBACK_MEDIA":return p(t,n)}return t}l.default=_}),98);
__d("CometComposerLinksPluginForLexical.react",["CometDebounce","ConstUriUtils","Lexical","LexicalLink","LexicalUtils","Promise","URLMatcher","composerLinkAttachmentChecker","composerLinkAttachmentReducer","gkx","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=/[,;\s]/;function p(e){return m.test(e)}function _(e){return e[e.length-1]}function f(e){return r("gkx")("14048")?r("URLMatcher").permissiveHostPathMatch(e):r("URLMatcher").match(e)}function g(e){return o("ConstUriUtils").isValidUri(e)}function h(e,t){for(var n=t,r="";n>0&&!p(e[n-1]);)r=e[n-1]+r,n--;for(var o=t;o<e.length&&!p(e[o]);)r+=e[o],o++;return{text:r,textOffset:n}}function y(e,t){var n=e.getKey(),r=e.getTextContent(),a=o("Lexical").$getSelection(),i=o("Lexical").$getEditor().getEditorState(),l=i.read(function(){var t=o("Lexical").$getNodeByKey(e.getKey()),n=null;return o("Lexical").$isTextNode(t)&&t.isSimpleText()&&(n=t.getTextContent()),[n,o("Lexical").$getSelection()]}),s=l[0],u=l[1];if(s===null||!o("Lexical").$isRangeSelection(u)||!u.isCollapsed()||u.anchor.key!==n||!o("Lexical").$isRangeSelection(a)||!a.isCollapsed()||a.anchor.key!==n)return null;var c=r.length,d=s.length,m=a.anchor.offset,p=u.anchor.offset,_=m===p+1&&c===d+1&&r.substring(0,m-1)+r.substring(m)===s,f=m+1===p&&c+1===d&&r===s.substring(0,m)+s.substring(m+1),g=m===p&&c+1===d&&r===s.substring(0,m)+s.substring(0,m+1);return _||f||g?h(r,m):null}function C(e){return o("Lexical").$getEditor().getEditorState().read(function(){var t=o("Lexical").$getNodeByKey(e);return o("Lexical").$isTextNode(t)&&t.isSimpleText()?t.getTextContent():null})}function b(e,t){var n,r=e.getTextContent(),o=(n=t==null?void 0:t.text)!=null?n:C(e.getKey());if(o===null)return null;for(var a=r.length,i=o.length,l=0;l<a&&l<i&&r[l]===o[l];)l++;for(var s=a,u=i;s>l&&u>l&&r[s-1]===o[s-1];)s--,u--;s++;for(var c=r.substring(l,s);l-1>=0&&!p(r[l-1]);)l--,c=r[l]+c;for(;s+1<r.length&&!p(r[s+1]);)s++,c+=r[s+1];return{text:c,textOffset:l}}function v(e,t){var n;return e.getTextContent()===((n=t==null?void 0:t.text)!=null?n:C(e.getKey()))?{text:"",textOffset:0}:null}function S(e,t,n,r,o){var a=e.getTextContent(),i=a,l=0;if(!r){var s,u,c=(s=(u=v(e,t))!=null?u:y(e,t))!=null?s:b(e,t);if(c!==null&&(i=c.text,l=c.textOffset,i.split(m).some(function(e){return e.length>100}))){var d=l+i.length,p={textOffsetEnd:d,textOffsetStart:l},_=n.get(e.getKey());_!=null&&(p.textOffsetStart=Math.min(p.textOffsetStart,_.textOffsetStart),p.textOffsetEnd=Math.max(p.textOffsetEnd,_.textOffsetEnd)),n.set(e.getKey(),p);return}}R(e,i,l,o)}function R(e,t,n,r){for(var a=e.getTextContent(),i=a.length,l=t,s=0,u=n,c=e,d=0,m;(m=f(l))!=null&&m!=null;){u+=l.indexOf(m);var h=s+u,y=m.length,C=void 0;if(h>0)C=p(a[h-1]);else{var b=e.getPreviousSibling();o("Lexical").$isElementNode(b)&&(b=b.getLastDescendant()),b===null?C=!0:C=o("Lexical").$isLineBreakNode(b)||o("Lexical").$isTextNode(b)&&p(_(b.getTextContent()))}var v=void 0;if(h+y<i)v=p(a[h+y]);else{var S=e.getNextSibling();if(o("Lexical").$isElementNode(S)&&(S=S.getFirstDescendant()),S===null)v=!0;else{var R;v=o("Lexical").$isLineBreakNode(S)||o("Lexical").$isTextNode(S)&&p((R=S.getTextContent()[0])!=null?R:"")}}if(C&&v&&g(m)){var L=void 0;if(u===0){var E=c.splitText(y);L=E[0],c=E[1]}else{var k=c.splitText(u+d,u+y+d);L=k[1],c=k[2]}var I=o("LexicalLink").$createAutoLinkNode(m);I.append(o("Lexical").$createTextNode(m)),L.replace(I),r(I),d=0}else d=u+y;var T=u+y;l=l.substring(T),s+=T,u=0}}function L(e){for(var t=e.getChildren(),n=t.length,r=0;r<n;r++){var a=t[r];if(!o("Lexical").$isTextNode(a)||!a.isSimpleText()){k(e);return}}var i=e.getTextContent();if(f(i)!==i||!g(i)){k(e);return}var l=e.getPreviousSibling();if(o("Lexical").$isElementNode(l)&&(l=l.getLastDescendant()),l!==null&&!(o("Lexical").$isLineBreakNode(l)||o("Lexical").$isTextNode(l)&&p(_(l.getTextContent())))){k(e);return}var s=e.getNextSibling();if(o("Lexical").$isElementNode(s)&&(s=s.getFirstDescendant()),s!==null&&!(o("Lexical").$isLineBreakNode(s)||o("Lexical").$isTextNode(s)&&p(s.getTextContent()[0]))){k(e);return}var u=e.getURL();u!==i&&e.setURL(i)}function E(e){var t=e.getPreviousSibling(),n=e.getNextSibling(),r=e.getTextContent();o("LexicalLink").$isAutoLinkNode(t)&&!o("Lexical").$isLineBreakNode(t)&&!p(r[0])&&k(t),o("LexicalLink").$isAutoLinkNode(n)&&!o("Lexical").$isLineBreakNode(n)&&!p(_(r))&&k(n)}function k(e){for(var t=e.getChildren(),n=t.length,r=n-1;r>=0;r--)e.insertAfter(t[r]);return e.remove(),t.map(function(e){return e.getLatest()})}function I(t){var a=t.editor,i=t.isLinkAttachmentEnabled,l=t.removedAttachmentPreviewUrls;r("useComposerViewStateReducer")(r("composerLinkAttachmentReducer"),r("composerLinkAttachmentChecker"));var s=r("useComposerViewStateDispatcher")(),u=c(function(t,r){l!=null&&l.has(t)&&r!==!0||(s({type:"ADD_LINK_URL",url:t}),(i||r===!0)&&s({attachmentType:"LINK",onRemove:function(r){return new(e||(e=n("Promise")))(function(e){r({onRemovedLast:e,type:"REMOVE_LINK_URL"})})},type:"ACTIVATE_ATTACHMENT_TYPE"}))},[s,i,l]);d(function(){if(a!=null){var e=function(r){var e=r.getParentOrThrow();if(o("LexicalLink").$isAutoLinkNode(e)){L(e);var a=e.getLatest();c(a)}else r.isSimpleText()&&S(r,n,t,l(),c),E(r)},t=new Map,n=null,i=a.getEditorState(),l=function(){return a.getEditorState()===i},s=r("CometDebounce")(function(e,t){u(e.__url,t)},{wait:1e3}),c=function(t){return s(t,!1)},d=function(t){return s(t,!0)},m=r("CometDebounce")(function(){var e=function(){var e=r[0];n=r[1];var t=n.textOffsetEnd,i=n.textOffsetStart;a.update(function(){var n=o("Lexical").$getNodeByKey(e);if(o("Lexical").$isTextNode(n)&&n.isSimpleText()){var r=n.getTextContent().substring(i,t);R(n,r,i,c)}})},n;for(var r of t.entries())e()},{wait:200});return o("LexicalUtils").mergeRegister(a.registerUpdateListener(function(){m()}),a.registerMutationListener(o("LexicalLink").AutoLinkNode,function(e){var t=new WeakSet;a.getEditorState().read(function(){var n=function(){var e=r[0],n=r[1],i=a.getElementByKey(e);(n==="created"||n==="updated")&&i!==null&&!t.has(i)&&(t.add(i),i.addEventListener("click",function(t){a.getEditorState().read(function(){var t=o("Lexical").$getNodeByKey(e);t!=null&&d(t)})}))};for(var r of e)n()})},{skipInitialization:!0}),a.registerNodeTransform(o("Lexical").RootNode,function(){var t=a._compositionKey;if(t!==null){if(n===null)n={key:t,text:C(t)};else if(n.key!==t){var r=o("Lexical").$getNodeByKey(n.key);o("Lexical").$isTextNode(r)&&r.isAttached()&&e(r),n={key:t,text:C(t)}}}else if(n!==null){var i=o("Lexical").$getNodeByKey(n.key);o("Lexical").$isTextNode(i)&&i.isAttached()&&e(i),n=null}}),a.registerNodeTransform(o("Lexical").TextNode,function(t){e(t)}),a.registerNodeTransform(o("LexicalLink").AutoLinkNode,function(e){L(e);var t=e.getLatest();c(t)}),function(){s.reset(),m.reset()})}},[u,a,i])}var T=r("withComposerViewStatePart")(I,function(e){var t,n,r;return{editor:e.lexicalEditor,isLinkAttachmentEnabled:(t=(n=e.linkAttachment)==null?void 0:n.isLinkAttachmentEnabled)!=null?t:!0,removedAttachmentPreviewUrls:(r=e.linkAttachment)==null?void 0:r.removedAttachmentPreviewUrls}});l.segment=h,l.$handleLinkCreationOnKeyboardInput=y,l.$getPreviousNodeTextForSimpleTextNode=C,l.$handleLinkCreationOnSingleDiff=b,l.$handleLinkCreationOnNoDiff=v,l.CometComposerLinksPlugin=T}),98);
__d("CometComposerLinksPluginForLexicalWithDefaultExport.react",["CometComposerLinksPluginForLexical.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("CometComposerLinksPluginForLexical.react").CometComposerLinksPlugin}),98);
__d("getInitialComposerLinkData",["Lexical","LexicalLink"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=new Map;return e.getEditorState().read(function(){return o("Lexical").$nodesOfType(o("LexicalLink").AutoLinkNode).forEach(function(e){return t.set(e.getKey(),e.getTextContent())})}),t}return new Map}l.default=e}),98);
__d("handlePendingMisinformationOnComposerSubmit",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){for(var r=0;r<e.length;r++){var o=t[e[r]];if(o!=null){var a=o.status;switch(a){case"ACCEPTED":case"CLEAN":case"FAILED":break;case"DECISION_DEFERRED":{var i=[].concat(n.current);n.current.length=0,i.forEach(function(e){var t=e.onHalt;t()});return}case"DIRTY_AWAITING_DECISION":case"FETCHING":return;default:return a}}}var l=[].concat(n.current);n.current.length=0,l.forEach(function(e){var t=e.onContinue;t()})}i.default=e}),66);
__d("hasNoLinksToAnalyze",["Lexical","LexicalLink"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a,i=Array.from(e);if(n!=null){var l=new Set([]);n==null||n.getEditorState().read(function(){return o("Lexical").$nodesOfType(o("LexicalLink").AutoLinkNode).forEach(function(e){return l.add(e.getURL())})}),r!=null&&l.add(r),a=i.filter(function(e){return l.has(e)})}return(a!=null?a:i).every(function(e){var n=t[e];if(n==null)return!0;var r=n.status;switch(r){case"ACCEPTED":case"CLEAN":case"FAILED":return!0;case"DECISION_DEFERRED":case"DIRTY_AWAITING_DECISION":case"FETCHING":return!1;default:return r}})}l.default=e}),98);
__d("onCloseConfirmationDialog",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){switch(n){case"ACCEPTED":e({__type:"ACCEPT_URL",url:t});break;case"NO_DECISION":e({__type:"ENTER_COOLDOWN_PERIOD"});break;default:return n}}i.default=e}),66);
__d("maybeTriggerMisinformationDialog",["onCloseConfirmationDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.composedURLs,o=e.composerPhase,a=e.composerType,i=e.dialogIsOpen,l=e.dispatch,s=e.misinformationRecords,u=t.onCloseDialog,c=t.onTriggerDialog,d=t.openConfirmationDialog;if(i.current!==!0){var m=Array.from(n).find(function(e){var t;return((t=s[e])==null?void 0:t.status)==="DIRTY_AWAITING_DECISION"});if(m!=null){var p=s[m];if(p==null)return;var _=p.confirmationRenderer;if(_==null)return;c(),d({composerPhase:o,composerType:a,confirmationRenderer:_},function(e){u(),r("onCloseConfirmationDialog")(l,m,e)})}}}l.default=e}),98);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29607129502264490"}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql",["cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],t=[{kind:"Variable",name:"params",variableName:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[a];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:t,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMisinformationLinkComposerConfirmationDialog_confirmationRenderer"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:t,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cid",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_for_comet",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description_for_comet",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"ManualFactCheck",kind:"LinkedField",name:"fact_checks",plural:!0,selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"FactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"external_uri",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment_thumbnail",plural:!1,selections:[r,{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:i,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:i,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:i,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:i,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:i,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_page_admin_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_rating_badge",storageKey:null}],type:"MisinformationComposerPostConfirmationRenderer",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"),metadata:{},name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducer",["CometRelay","FBLogger","WebPixelRatio","cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql");function u(e,t){return d(e,t,"ADD")}function c(e,t){return d(e,t,"REMOVE")}function d(e,t,n){if(e.composedURLs.has(t)===(n==="ADD"))return e;var r=new Set(e.composedURLs);return n==="ADD"?r.add(t):r.delete(t),babelHelpers.extends({},e,{composedURLs:r})}function m(e,t,n){var o,a=e.misinformationRecords[t];if(a==null)return r("FBLogger")("misinformation").mustfix("Tried to update a misinformation record for a URL that was not being tracked."),e;var i=Object.entries(n).find(function(e){var t=e[0],n=e[1];return a[t]!==n});return i===!1?e:babelHelpers.extends({},e,{misinformationRecords:babelHelpers.extends({},e.misinformationRecords,(o={},o[t]=babelHelpers.extends({},a,n),o))})}function p(e,t){var n;switch(t.__type){case"ACCEPT_URL":return m(e,t.url,{status:"ACCEPTED"});case"ENTER_COOLDOWN_PERIOD":return Object.keys(e.misinformationRecords).reduce(function(t,n){var r,o=(r=t.misinformationRecords[n])==null?void 0:r.status;if(o==null)return t;switch(o){case"ACCEPTED":case"CLEAN":case"DECISION_DEFERRED":case"FAILED":case"FETCHING":return e;case"DIRTY_AWAITING_DECISION":return m(t,n,{status:"DECISION_DEFERRED"});default:return o}},e);case"EXIT_COOLDOWN_PERIOD":return Object.keys(e.misinformationRecords).reduce(function(t,n){var r,o=(r=t.misinformationRecords[n])==null?void 0:r.status;if(o==null)return t;switch(o){case"ACCEPTED":case"CLEAN":case"DIRTY_AWAITING_DECISION":case"FAILED":case"FETCHING":return e;case"DECISION_DEFERRED":return m(t,n,{status:"DIRTY_AWAITING_DECISION"});default:return o}},e);case"MARK_URL_FAILED_DETECTION":return m(e,t.url,{status:"FAILED"});case"SET_DETECTION_RESULT":return m(e,t.url,{confirmationRenderer:t.confirmationRenderer,status:t.confirmationRenderer!=null?"DIRTY_AWAITING_DECISION":"CLEAN"});case"TRACK_COMPOSED_URL":if(e.misinformationRecords[t.url]!=null)return u(e,t.url);var r,a,i={confirmationRenderer:void 0,dispose:function(){r&&(r.unsubscribe(),r=null),a&&(a.dispose(),a=null)},status:"FETCHING"},l={input:{url:t.url},scale:o("WebPixelRatio").get()},d=o("relay-runtime").getRequest(s),p=o("relay-runtime").createOperationDescriptor(d,l);a=e.environment.retain(p);var _=!0;return r=o("CometRelay").fetchQuery(e.environment,s,l).subscribe({error:function(){t.dispatch({__type:"MARK_URL_FAILED_DETECTION",url:t.url})},next:function(n){var e,r=(e=n.link_preview)==null?void 0:e.composer_post_confirmation_renderer;_?i.confirmationRenderer=r:t.dispatch({__type:"SET_DETECTION_RESULT",confirmationRenderer:r,url:t.url})}}),_=!1,babelHelpers.extends({},u(e,t.url),{misinformationRecords:babelHelpers.extends({},e.misinformationRecords,(n={},n[t.url]=i,n))});case"UNTRACK_COMPOSED_URL":return c(e,t.url);default:return t.__type}}l.default=p}),98);
__d("useMisinformationState",["CometRelay","cometMisinformationLinkDetectorPluginInternalStateReducer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useMemo,c=s.useReducer,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(10),n=o("CometRelay").useRelayEnvironment(),a,i;t[0]!==e?(i=new Set(e==null?void 0:e.values()),t[0]=e,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={},t[2]=l):l=t[2];var s;t[3]!==n||t[4]!==i?(s={composedURLs:i,environment:n,misinformationRecords:l},t[3]=n,t[4]=i,t[5]=s):s=t[5],a=s;var u=a,m=c(r("cometMisinformationLinkDetectorPluginInternalStateReducer"),u),p=m[0],_=m[1],f=p.composedURLs,g=p.misinformationRecords,h=d("COMPOSING"),y=h[0],C=h[1],b;return t[6]!==f||t[7]!==y||t[8]!==g?(b={composedURLs:f,composerPhase:y,dispatch:_,misinformationRecords:g,setComposerPhase:C},t[6]=f,t[7]=y,t[8]=g,t[9]=b):b=t[9],b}l.default=m}),98);
__d("CometComposerMisinformationLinkDetectorPluginForLexical.react",["JSResourceForInteraction","Lexical","LexicalLink","getInitialComposerLinkData","handlePendingMisinformationOnComposerSubmit","hasNoLinksToAnalyze","maybeTriggerMisinformationDialog","react","react-compiler-runtime","useCometLazyDialog","useComposerPreSubmitHook","useMisinformationState","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useMemo,m=s.useRef,p=r("JSResourceForInteraction")("CometMisinformationLinkComposerConfirmationDialog.react").__setRef("CometComposerMisinformationLinkDetectorPluginForLexical.react");function _(e){var t=o("react-compiler-runtime").c(43),n=e.composerType,a=e.editor,i=e.linkAttachment,l,s;t[0]!==a?(s=r("getInitialComposerLinkData")(a),t[0]=a,t[1]=s):s=t[1],l=s;var u=l,d=r("useMisinformationState")(u),_=d.composedURLs,g=d.composerPhase,h=d.dispatch,y=d.misinformationRecords,C=d.setComposerPhase,b=m(u),v=m(null),S=r("useCometLazyDialog")(p),R=S[0],L=m(!1),E;t[2]!==_||t[3]!==h?(E=function(t,n){var e=n.getEditorState().read(function(){return t.getTextContent()}),r=b.current;r.has(t.getKey())||r.set(t.getKey(),e),_.has(e)||h({__type:"TRACK_COMPOSED_URL",dispatch:h,url:e})},t[2]=_,t[3]=h,t[4]=E):E=t[4];var k=E,I;t[5]!==h||t[6]!==(i==null?void 0:i.url)?(I=function(t){var e=b.current,n=e.get(t);n!=null&&(i==null?void 0:i.url)!==n&&h({__type:"UNTRACK_COMPOSED_URL",url:n}),e.delete(t)},t[5]=h,t[6]=i==null?void 0:i.url,t[7]=I):I=t[7],i==null||i.url;var T=I,D;t[8]!==_||t[9]!==h||t[10]!==(i==null?void 0:i.url)?(D=function(){var e=i==null?void 0:i.url;e!=null&&(_.has(e)||h({__type:"TRACK_COMPOSED_URL",dispatch:h,url:e}))},t[8]=_,t[9]=h,t[10]=i==null?void 0:i.url,t[11]=D):D=t[11];var x;t[12]!==_||t[13]!==h||t[14]!==i?(x=[_,h,i],t[12]=_,t[13]=h,t[14]=i,t[15]=x):x=t[15],c(D,x);var $,P;t[16]!==_||t[17]!==g||t[18]!==n||t[19]!==h||t[20]!==y||t[21]!==R?($=function(){if(n!=="share"){v.current=y;var e=function(){L.current=!0},t=function(){L.current=!1};r("maybeTriggerMisinformationDialog")({composedURLs:_,composerPhase:g,composerType:n,dialogIsOpen:L,dispatch:h,misinformationRecords:y},{onCloseDialog:t,onTriggerDialog:e,openConfirmationDialog:R})}},P=[_,g,n,h,y,R],t[16]=_,t[17]=g,t[18]=n,t[19]=h,t[20]=y,t[21]=R,t[22]=$,t[23]=P):($=t[22],P=t[23]),c($,P);var N;t[24]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[24]=N):N=t[24];var M=m(N),w,A;t[25]!==_||t[26]!==y?(w=function(){var e=Array.from(_);r("handlePendingMisinformationOnComposerSubmit")(e,y,M)},A=[_,y],t[25]=_,t[26]=y,t[27]=w,t[28]=A):(w=t[27],A=t[28]),c(w,A);var F;t[29]!==_||t[30]!==h||t[31]!==a||t[32]!==(i==null?void 0:i.url)||t[33]!==y||t[34]!==C?(F=function(t){var e=t.onContinue,n=t.onHalt;C("COMMITTING"),M.current.push({onContinue:function(){C("COMPOSING"),e()},onHalt:function(){C("COMPOSING"),n()}});var o=r("hasNoLinksToAnalyze")(_,y,a,i==null?void 0:i.url);if(o){var l=[].concat(M.current);M.current.length=0,l.forEach(f)}else h({__type:"EXIT_COOLDOWN_PERIOD"})},t[29]=_,t[30]=h,t[31]=a,t[32]=i==null?void 0:i.url,t[33]=y,t[34]=C,t[35]=F):F=t[35];var O=F;r("useComposerPreSubmitHook")(O);var B,W;t[36]===Symbol.for("react.memo_cache_sentinel")?(B=function(){return function(){var e=v.current;e!==null&&Object.keys(e).forEach(function(t){var n=e[t];n!=null&&n.dispose()})}},W=[],t[36]=B,t[37]=W):(B=t[36],W=t[37]),c(B,W);var q,U;t[38]!==T||t[39]!==a||t[40]!==k?(q=function(){if(a!=null)return a.registerMutationListener(o("LexicalLink").AutoLinkNode,function(e){var t=a.getEditorState();e.forEach(function(e,n){var r=t.read(function(){return o("Lexical").$getNodeByKey(n)});e==="created"&&r!=null?k(r,a):e==="destroyed"&&T(n)})},{skipInitialization:!0})},U=[T,a,k],t[38]=T,t[39]=a,t[40]=k,t[41]=q,t[42]=U):(q=t[41],U=t[42]),c(q,U)}function f(e){var t=e.onContinue;t()}var g=r("withComposerViewStatePart")(_,function(e){return{editor:e.lexicalEditor,linkAttachment:e.linkAttachment}});l.default=g}),98);/*FB_PKG_DELIM*/
__d("CometFeedMessageTextWithEntities_textWithEntities.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedMessageTextWithEntities_textWithEntities",selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],type:"TextWithEntities",abstractKey:null};a.exports=e}),null);
__d("GroupsCometGroupRuleRenderer_entity.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:{mask:!1},name:"GroupsCometGroupRuleRenderer_entity",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"comet"}],kind:"ScalarField",name:"url",storageKey:'url(site:"comet")'}],type:"Entity",abstractKey:"__isEntity"};a.exports=e}),null);
__d("GroupsCometGroupRuleRenderer",["FDSLink.react","GroupsCometGroupRuleLink.react","GroupsCometGroupRuleRenderer_entity.graphql","react","react-compiler-runtime","useRenderLinkedEntity"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));e!==void 0||(e=n("GroupsCometGroupRuleRenderer_entity.graphql"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.entity,a=e.entityIsWeakReference,i=e.node,l=o("useRenderLinkedEntity").useRenderWeakReferenceEntity(a),s=l==null?void 0:l.colorProp,c=l==null?void 0:l.icon;if(n.id!=null){var d;return t[0]!==n.id||t[1]!==i?(d=u.jsx(r("GroupsCometGroupRuleLink.react"),{groupRuleID:n.id,children:i}),t[0]=n.id,t[1]=i,t[2]=d):d=t[2],d}var m=c!=null?c:null,p;return t[3]!==s||t[4]!==n.url||t[5]!==i||t[6]!==m?(p=u.jsxs(r("FDSLink.react"),babelHelpers.extends({href:n.url},s,{children:[m,i]})),t[3]=s,t[4]=n.url,t[5]=i,t[6]=m,t[7]=p):p=t[7],p}var d=function(t,n,r,o,a){return u.jsx(c,{entity:n,entityIsWeakReference:a!=null?a:null,node:t})};l.default=d}),98);
__d("CometFeedStoryFormattedBackgroundTextContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(Object.freeze({}));function d(){return u(c)}l.CometFeedStoryFormattedBackgroundTextContext=c,l.useCometFeedStoryFormattedBackgroundTextContextContext=d}),98);
__d("FDSAppWhatsappFilled12Icon",["cr:14375"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14375")}),98);
__d("FDSAppWhatsappOutline20Icon",["cr:14112"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14112")}),98);
__d("FDSAppWhatsappOutline24Icon",["cr:14377"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14377")}),98);
__d("PageWhatsAppNumberCometRenderer_entity.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:{mask:!1},name:"PageWhatsAppNumberCometRenderer_entity",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"deep_link_number",storageKey:null}],type:"PageWhatsAppNumber",abstractKey:null}],type:"Entity",abstractKey:"__isEntity"};a.exports=e}),null);
__d("PagesCometPageContext.react",["Actor","CometRouteParams","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo,c=s.createContext({isAdminView:!1,isAdminViewAsPublic_DO_NOT_USE:!1,pageID:void 0});function d(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.pageID,a=o("Actor").useActor(),i=a[0],l=o("CometRouteParams").useRouteParams(),u=l.view_public_for,d=i===r,m=u===r,p,_;t[0]!==d||t[1]!==m||t[2]!==r?(_={isAdminView:d,isAdminViewAsPublic_DO_NOT_USE:m,pageID:r},t[0]=d,t[1]=m,t[2]=r,t[3]=_):_=t[3],p=_;var f=p,g;return t[4]!==n||t[5]!==f?(g=s.jsx(c.Provider,{value:f,children:n}),t[4]=n,t[5]=f,t[6]=g):g=t[6],g}l.PagesCometPageContext=c,l.PagesCometPageContextProvider=d}),98);
__d("PageWhatsAppNumberCometRenderer",["CometFeedStoryContext","CometFeedStoryFormattedBackgroundTextContext.react","ConstUriUtils","FDSAppWhatsappFilled12Icon","FDSAppWhatsappOutline20Icon","FDSAppWhatsappOutline24Icon","FDSIcon.react","FDSLink.react","FDSTextContext","PageWhatsAppNumberCometRenderer_entity.graphql","PagesCometPageContext.react","react","react-compiler-runtime","requireDeferred","useRenderLinkedEntity"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=r("requireDeferred")("WhatsappDeeplinkClickedFalcoEvent").__setRef("PageWhatsAppNumberCometRenderer"),_=r("requireDeferred")("WhatsappDeeplinkRenderedFalcoEvent").__setRef("PageWhatsAppNumberCometRenderer");e!==void 0||(e=n("PageWhatsAppNumberCometRenderer_entity.graphql"));var f={icon:{marginBottom:"xu06os2",$$css:!0}},g={icon:{marginBottom:"xahult9",$$css:!0}};function h(e){var t,n=o("react-compiler-runtime").c(27),a=e.entity,i=e.entityIsWeakReference,l=e.node,s=o("useRenderLinkedEntity").useRenderWeakReferenceEntity(i),c=s==null?void 0:s.colorProp,h=o("FDSTextContext").useFDSTextContext(),b=o("CometFeedStoryContext").useCometFeedStoryContext(),v=h==null,S=(h==null?void 0:h.type)==="body1",R=o("CometFeedStoryFormattedBackgroundTextContext.react").useCometFeedStoryFormattedBackgroundTextContextContext(),L=(t=b==null?void 0:b.whatsapp_action_link)!=null?t:"",E=o("ConstUriUtils").getUri(L),k=d(o("PagesCometPageContext.react").PagesCometPageContext).pageID,I,T;n[0]!==a.deep_link_number||n[1]!==k?(I=function(){_.onReady(function(e){e.log(function(){return{page_id:k,whatsapp_number:a.deep_link_number}})})},T=[a.deep_link_number,k],n[0]=a.deep_link_number,n[1]=k,n[2]=I,n[3]=T):(I=n[2],T=n[3]),m(I,T);var D;n[4]!==a.deep_link_number||n[5]!==k?(D=function(){p.onReady(function(e){e.log(function(){return{page_id:k,whatsapp_number:a.deep_link_number}})})},n[4]=a.deep_link_number,n[5]=k,n[6]=D):D=n[6];var x=D;if(L.length===0){var $;return n[7]!==l?($=u.jsxs("span",{children:[" ",l," "]}),n[7]=l,n[8]=$):$=n[8],$}var P="ltr",N=R==null?void 0:R.textColor,M;n[9]!==N?(M=C(N),n[9]=N,n[10]=M):M=n[10];var w;n[11]!==v||n[12]!==S?(w=y(v,S),n[11]=v,n[12]=S,n[13]=w):w=n[13];var A=S||v?f.icon:g.icon,F;n[14]!==M||n[15]!==w||n[16]!==A?(F=u.jsx(r("FDSIcon.react"),{color:M,icon:w,xstyle:A}),n[14]=M,n[15]=w,n[16]=A,n[17]=F):F=n[17];var O=r("FDSLink.react"),B=E==null?void 0:E.toString(),W;n[18]!==O||n[19]!==c||n[20]!==l||n[21]!==x||n[22]!==B?(W=u.jsx(O,babelHelpers.extends({href:B},c,{onClick:x,children:l})),n[18]=O,n[19]=c,n[20]=l,n[21]=x,n[22]=B,n[23]=W):W=n[23];var q;return n[24]!==W||n[25]!==F?(q=u.jsxs("span",{dir:P,children:[F,W]}),n[24]=W,n[25]=F,n[26]=q):q=n[26],q}var y=function(t,n){return r(t?"FDSAppWhatsappOutline24Icon":n?"FDSAppWhatsappOutline20Icon":"FDSAppWhatsappFilled12Icon")},C=function(t){switch(t){case"rgba(255,255,255,1)":return"white";case"rgba(0,0,0,1)":return"black";default:return"blueLink"}},b=function(t,n,r,o,a){return u.jsx(h,{entity:n,entityIsWeakReference:a!=null?a:null,node:t})};l.default=b}),98);
__d("SearchCometBlueHashtagExperiment",[],(function(t,n,r,o,a,i){"use strict";function e(e){switch(e){case"semibold_blue":return{color_DEPRECATED:"blueLink",weight_DEPRECATED:"semibold"};case"blue":return{color_DEPRECATED:"blueLink",weight_DEPRECATED:"normal"}}return null}function l(){return e("blue")}function s(){return e("blue")}var u={entityMentionStyle:l(),hashtagStyle:s()};i.default=u}),66);
__d("CometFeedStoryMessageBodyRenderers",["CometBoldedEntityRenderer","CometFeedSeeMoreAnchorEntityRenderer","CometHovercardEntityRenderer","CometKGTickerNodeEntityRenderer","CometShortenedExternalUrlEntityRenderer","CometTextDelightCampaignEntityRenderer","CometTrackingNodeRenderer","GroupsCometGroupRuleRenderer","PageWhatsAppNumberCometRenderer","SearchCometBlueHashtagExperiment","cr:1077","cr:13723","cr:4641","cr:4814","cr:5863","cr:6625","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("gkx")("20836"),c={Event:[e=r("CometHovercardEntityRenderer"),s=r("CometBoldedEntityRenderer")],Group:[e,s],GroupRule:[r("GroupsCometGroupRuleRenderer")],Page:[e,s],User:[e,s]},d={Event:[e],Group:[e],GroupRule:[r("GroupsCometGroupRuleRenderer")],Page:[e],PageWhatsAppNumber:[r("PageWhatsAppNumberCometRenderer")],User:[e]},m=u?c:r("SearchCometBlueHashtagExperiment").entityMentionStyle!=null&&r("SearchCometBlueHashtagExperiment").entityMentionStyle.weight_DEPRECATED==="normal"?d:c,p=u?void 0:{KGTickerNode:[r("CometKGTickerNodeEntityRenderer")]},_=babelHelpers.extends({},m,p,{"*":[n("cr:13723"),r("CometTrackingNodeRenderer")],ExternalUrl:[r("CometShortenedExternalUrlEntityRenderer"),n("cr:1077")].filter(Boolean),Photo:[n("cr:4814")].filter(Boolean),SeeMoreTruncation:[r("CometFeedSeeMoreAnchorEntityRenderer")],TextDelightCampaign:[r("CometTextDelightCampaignEntityRenderer")],Video:[n("cr:5863")].filter(Boolean),XFBProdQuartzVizirSnapshot:[n("cr:4641")].filter(Boolean),XFBWorkCustomEmoji:[n("cr:6625")].filter(Boolean)});l.default=_}),98);
__d("CometFeedStoryMessageBodyTransforms",["CometEmojiTransform","CometEmoticonTransform","CometLineBreakTransform"],(function(t,n,r,o,a,i,l){"use strict";var e=[r("CometEmoticonTransform")(),r("CometEmojiTransform")(),r("CometLineBreakTransform")];l.default=e}),98);
__d("FeedStoryMessageExpandedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("433"),s=o("FalcoLoggerInternal").create("feed_story_message_expanded",e),u=s;l.default=u}),98);
__d("useCometFeedInlineExpandNavigationEventLogger",["CometTrackingNodesContext","encodeTrackingNode","react","react-compiler-runtime","useCometFeedNoRoutingNavigationEventLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=o("react-compiler-runtime").c(3),t=s(r("CometTrackingNodesContext")),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("encodeTrackingNode")(44),e[0]=n):n=e[0];var a;return e[1]!==t?(a=[n].concat(t),e[1]=t,e[2]=a):a=e[2],t=a,r("useCometFeedNoRoutingNavigationEventLogger")(t)}l.default=u}),98);
__d("useCometFeedMaximumMessageLength",["useCometFeedStandardAttachedStoryNestingLevel"],(function(t,n,r,o,a,i,l){"use strict";var e=800,s=267;function u(){var t=r("useCometFeedStandardAttachedStoryNestingLevel")()>0;return t?s:e}l.default=u}),98);
__d("useCometSeeMoreKeyCommand",["cometGetKeyCommandConfig","react","react-compiler-runtime","useKeyCommands"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){var n=o("react-compiler-runtime").c(5),a;e:{if(!e){var i;n[0]!==t?(i=o("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","seeMore",t),n[0]=t,n[1]=i):i=n[1];var l;n[2]!==i?(l=[i],n[2]=i,n[3]=l):l=n[3],a=l;break e}var s;n[4]===Symbol.for("react.memo_cache_sentinel")?(s=[],n[4]=s):s=n[4],a=s}var u=a;r("useKeyCommands")(u,!0)}l.default=u}),98);
__d("CometFeedMessageTextWithEntities.react",["CometAdPreviewContext","CometFeedMessageTextWithEntities_textWithEntities.graphql","CometFeedStoryMessageBodyRenderers","CometFeedStoryMessageBodyTransforms","CometFeedUnitQueryVariablesContext","CometHighlightTransform","CometRelay","CometSearchMatchedTermsContext","CometTextWithEntitiesRelay.react","CometTrackingCodeContext","DateConsts","FeedStoryMessageExpandedFalcoEvent","gkx","react","react-strict-dom","useCometFeedInlineExpandNavigationEventLogger","useCometFeedMaximumMessageLength","useCometSeeMoreKeyCommand"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useLayoutEffect,_=c.useRef,f=c.useState,g=.229,h=20,y=0,C=656,b=150,v={pointerEvents:"auto"};function S(t){var a=t.maxLines,i=t.showAttachments,l=t.suffix,s=t.textWithEntities,c=t.truncationStyle,S=t.withoutLineBreaks,R=S===void 0?!1:S,L=m(r("CometSearchMatchedTermsContext")),E=o("CometRelay").useFragment(e!==void 0?e:e=n("CometFeedMessageTextWithEntities_textWithEntities.graphql"),s),k=L!=null&&L.matches.length>0?[].concat(r("CometFeedStoryMessageBodyTransforms"),[r("CometHighlightTransform")({matches:L.matches})]):r("CometFeedStoryMessageBodyTransforms"),I=m(r("CometFeedUnitQueryVariablesContext")),T=r("useCometFeedMaximumMessageLength")(),D=c==="see-more"?h:y,x=f(a!=null?a*b-D:T),$=x[0],P=x[1],N=_(null),M=(I==null?void 0:I.feedLocation)==="SERVICES_LOCAL_BUSINESS_DISCOVERY",w=r("useCometFeedInlineExpandNavigationEventLogger")(),A=f(!1),F=A[0],O=A[1],B=m(r("CometTrackingCodeContext")),W=d(function(){O(function(e){return i&&i(!e),!e}),F||(w(Date.now()/o("DateConsts").MS_PER_SEC,null,"inline_expand"),r("FeedStoryMessageExpandedFalcoEvent").log(function(){return{tracking:B.encrypted_tracking[0].toString()}}))},[F,w,i,B.encrypted_tracking]);r("useCometSeeMoreKeyCommand")(F,W),p(function(){var e=N.current;if(e!=null&&a!=null){var t=e.clientWidth;if(t>0&&t<C&&r("gkx")("15025")){var n=Math.floor(t*g),o=a*n-D;P(o)}}},[a,D]);var q=o("CometAdPreviewContext").useCometAdPreviewContext()?v:null;return u.jsx(o("react-strict-dom").html.div,{ref:N,children:u.jsx(r("CometTextWithEntitiesRelay.react"),{expanded:F,maxLength:M?b:$,maxLines:a!=null?a:5,onToggleExpanded:W,preserveWhiteSpace:!0,renderers:r("CometFeedStoryMessageBodyRenderers"),seeMoreLinkProps:{style:q!=null?q:void 0},suffix:l,textWithEntities:E,transforms:k,truncationStyle:c,withLineBreaks:!R,withParagraphs:!M})})}S.displayName=S.name+" [from "+i.id+"]",l.default=S}),98);
__d("CometFeedStoryTranslatedContentQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24659775897017795"}),null);
__d("TrackingNodeTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({HEADLINE:1,USER_NAME:2,ACTOR_PHOTO:3,ACTION_LINKS:4,LIKE_LINK:5,UNLIKE_LINK:6,PARTICIPANT:7,PRONOUN:8,ROBOTEXT:9,TITLE:10,MEDIA_GENERIC:11,PHOTO:12,VIDEO:13,MUSIC:14,ATTACHMENT:15,NAME_LIST:16,SHARE_LINK:17,USER_MESSAGE:18,SUBTITLE:19,DESCRIPTION:20,SOURCE:21,BLINGBOX:22,OTHER:23,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,SUBSTORY:28,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,BAD_AGGREGATION_LINK:33,ADD_COMMENT_BOX:34,APP_CALL_TO_ACTION:35,UFI:36,OG_LEFT_SLIDE_PAGER:37,OG_RIGHT_SLIDE_PAGER:38,EXP_CALL_TO_ACTION:39,LARGE_MEDIA_ATTACHMENT:40,FAN_PAGE:42,UNFAN_PAGE:43,SEE_MORE:44,COLLECTION_ROBOTEXT_LINK:45,COLLECTION_ACTION_LINK:46,COLLECTION_TICKER_LINK:47,SPONSORED_LINK:49,PAGE_LINK:50,SOCIAL_CONTEXT:51,SOCIAL_ACTOR_PHOTO:52,OFFERS_CLAIM:53,OFFERS_CLICK:54,DROPDOWN_BUTTON:55,EVENT_VIEW:56,EVENT_RSVP:57,ADS_SHIMMED_LINK:58,COLLECTION_ADD_BUTTON:59,EVENT_INVITE_FRIENDS:60,RHC_AD:61,AD_CREATIVE_TITLE:62,AD_CREATIVE_BODY:63,AD_CREATIVE_IMAGE:64,AD_SOCIAL_SENTENCE:65,APP_NAME:66,GROUP_JOIN:67,PAGE_COVER_PHOTO:68,PAGE_PROFILE_PIC:69,AD_IDENTITY:70,UNHIDE_LINK:71,TRENDING_TOPIC_LINK:72,RELATED_SHARE_ARTICLE:73,OFFERS_USE_NOW:74,RELATED_SHARE_VIDEO:75,RHC_CARD:76,RHC_CARD_HIDE:77,RHC_SIMPLIFICATION:78,RHC_SIMPLIFICATION_HIDE:79,TOPIC_PIVOT_HEADER:80,ADD_FRIEND_BUTTON:81,SNOWLIFT:82,SNOWLIFT_MESSAGE:83,OFFERS_RESEND:84,RHC_LINK_OPEN:85,GENERIC_CALL_TO_ACTION_BUTTON:86,AD_LOGOUT:87,RHC_PHOTO_SLIDER:88,RHC_COMMENT_BUTTON:89,HASHTAG:90,NOTE:91,RELATED_SHARE_ARTICLE_HIDE:92,RELATED_SHARE_VIDEO_HIDE:93,NEKO_PREVIEW:94,OG_COMPOSER_OBJECT:95,INSTALL_ACTION:96,SPONSORED_CONTEXT:97,DIGITAL_GOOD:98,STORY_FOOTER:99,STORY_LOCATION:100,ADD_PHOTO_ACTION:101,ACTION_ICON:102,EGO_FEED_UNIT:103,PLACE_STAR_SURVEY:104,REVIEW_MENU:105,SAVE_ACTION:106,PHOTO_GALLERY:107,SUB_ATTACHMENT:108,FEEDBACK_SECTION:109,ALBUM:110,ALBUM_COLLAGE:111,AVATAR_LIST:112,STORY_LIST:113,MEDIA_CONTROLS:114,ZERO_UPSELL_BUY:115,ZERO_UPSELL_FEED_UNIT:116,RATING:117,PERMALINK_COMMENT:118,LIKE_COUNT:119,RETRY_BUTTON:120,TIMELINE_GIFTS:121,NEARBY_FRIENDS_LIST:122,PRESENCE_UNIT:123,EVENT_INVITE_SENT:124,ATTACHMENT_TITLE:125,HSCROLL_PAGER:126,STORY_MESSAGE:127,STATUS_LINK:128,ADD_MEDIA_LINK:129,ADD_QUESTION_LINK:130,START_Q_AND_A_LINK:131,FEED_STORY_MESSAGE_FLYOUT:132,START_CONVERSATION_LINK:133,ATTACH_LIFE_EVENT_LINK:134,ATTACH_PLACE_LINK:135,COVER_PHOTO_EDIT_LINK:136,SHOW_LIKES:137,ROTATE_LEFT_BUTTON:138,ROTATE_RIGHT_BUTTON:139,TAG_LINK:140,CLOSE_BUTTON:141,PAGER_NEXT:142,PAGER_PREVIOUS:143,FULLSCREEN_BUTTON:144,ACTIONS:145,CURATION_MENU:146,PROFILE_PIC_EDIT_LINK:147,VIEW_ALL_SHARES:148,THUMBNAIL_LINK:149,EDIT_HISTORY:150,ADD_TO_THREAD:151,SIDEBAR:152,HOME_SIDENAV:153,BUDDYLIST_NUB:154,TITLEBAR:155,SEND_BUTTON:156,CONVERSATION:157,CHAT_FLYOUT:158,INPUT:159,EMOTICONS:160,VIDEOCHAT:161,TYPEAHEAD:162,OPTIONS_MENU:163,BOOST_POST_BUTTON:164,TOGGLE_BUTTON:165,CHAT_SIDEBAR_FOOTER:166,GRIPPER:167,BOOKMARK_ITEM:168,BOOKMARKS_SECTION:169,BOOKMARKS_NAV:170,RHC:171,RHC_HEADER:172,SIDE_ADS:173,BUDDY_LIST:174,SHOW_ADS_FEED:184,VIDEO_IN_PLAY_CALL_TO_ACTION_BUTTON:185,VIDEO_ENDSCREEN_CALL_TO_ACTION_BUTTON:186,INLINE_PHOTO_PIVOTS_HIDE:187,VIDEO_CALL_TO_ACTION_ENDSCREEN_REPLAY:188,APP_ATTACHMENT:189,ACTIVITY_LINK:190,SAVE_BUTTON:191,SEE_MORE_PHOTO_PAGE_POST_BUTTON:192,BUY_VIRTUAL_GOOD:193,SAVE_SECONDARY_MENU:194,MPP_INSIGHTS:195,GROUP_CANCEL:197,GROUP_LEAVE:198,MESSAGE_LINK:199,VIDEO_SPONSORSHIP_LABEL:200,MULTI_ATTACHMENT_PAGER_NEXT:201,MULTI_ATTACHMENT_PAGER_PREV:202,WEB_CLICK:203,COMPOSER_POST:204,MULTI_ATTACHMENT_VIDEO:205,VIDEO_CALL_TO_ACTION_PAUSESCREEN_RESUME:206,VOICECHAT:207,PAGE_INVITE_FRIEND:208,SEE_MORE_REDIRECT:209,VIDEO_CALL_TO_ACTION_ATTACHMENT:210,PAGE_POST_SEE_FIRST:211,PAGE_POST_DEFAULT:212,TOPIC_FEED_CUSTOMIZATION_UNIT_SUBMIT:213,TOPIC_FEED_CUSTOMIZATION_UNIT_OPTION:214,LEAD_GEN_OPEN_POPOVER:215,LEAD_GEN_SUBMIT_CLICK:216,LEAD_GEN_PRIVACY_CLICK:217,LEAD_GEN_OFFSITE_CLICK:218,EVENT_YOU_MAY_LIKE_HSCROLL:219,LEAD_GEN_CONTEXT_CARD_CLOSE:220,LEAD_GEN_CONTEXT_CARD_CTA_CLICK:221,FEED_STORY_PLACE_ATTACHMENT:222,PAGE_CALL_TO_ACTION_UNIT:224,TRANSLATION:225,FEED_STORY_ATTACHMENT_MISINFO_WARNING:226,RELATED_LOCAL_NEWS_ATTACHMENT_LINK:227,RELATED_LOCAL_NEWS_ATTACHMENT_SHARE:228,STORY_TIMESTAMP:229,STORY_HEADER:230,SPONSORED_STORY:231,EVENT_CTA_BUTTON:232,RELATED_PAGE_POSTS_ATTACHMENT_CLICK:233,RELATED_PAGE_POSTS_ATTACHMENT_SHARE:234,RELATED_PAGE_POSTS_ATTACHMENT_XOUT:235,RELATED_PAGE_POSTS_UNIT_XOUT:236,CAROUSEL_CARD_STORY:237,OFFERS_DETAILS_POPOVER:238,SPOTLIGHT:239,INSTREAM_CALL_TO_ACTION_BUTTON:240,INSTREAM_CALL_TO_ACTION_ATTACHMENT:241,SEARCH_AD_ATTACHMENT_CLICK:242,SEARCH_AD_CTA_CLICK:243,SEARCH_AD_OFFSITE_CLICK:244,MULTI_SHARE_GRID_EXPERIMENT_CARD_1:245,MULTI_SHARE_GRID_EXPERIMENT_CARD_2:246,MULTI_SHARE_GRID_EXPERIMENT_CARD_3:247,MULTI_SHARE_GRID_EXPERIMENT_CARD_4:248,MULTI_SHARE_GRID_EXPERIMENT_SEE_MORE:249,HOVERCARD:250,INSTANT_GAME_PLAYER:251,POLITICAL_AD_STORY_HEADER_CLICK:252,PHOTO_VOICE:253,PHOTO_TAG:254,ANDROID_PLAYSTORE_WATCH_AND_INSTALL_BUTTON:255,VIDEO_POLLING_IN_CREATIVE_CTA_BUTTON:256,VIDEO_SETTINGS:257,PLAYABLE_CALL_TO_ACTION_BUTTON:258,ATTACHMENT_FOOTER:259,LEAD_GEN_THANK_YOU_PAGE:260,SHOW_MENTIONS_PLUGIN:261,AD_BREAK_FULL_VIDEO_INDICATOR:262,INSTREAM_AD_IMAGE:263,INSTREAM_AD_CONTEXT:264,ATTACHMENT_FOOTER_DISCLAIMER:265,INSTREAM_LONGER_AD_CLICK_WATCH_AND_MORE:266,INSTREAM_POST_ROLL_LONGER_AD_ENDING_SCREEN:267,ACTIVATE_OFFER_CTA_BUTTON:268,INSTREAM_COLLECTION_AD_FOOTER_TITLE:269,INSTREAM_COLLECTION_AD_CONTEXT_FOOTER_SUBIMAGE:270,INSTREAM_COLLECTION_AD_DEFERRED_FOOTER_SUBIMAGE:271,WATCH_AND_MORE:272,INSTREAM_CONTEXT_CARD_IMAGE:273,INSTREAM_CONTEXT_CARD_HEADLINE:274,INSTREAM_CONTEXT_CARD_DISPLAY_LINK:275,INSTREAM_CONTEXT_CARD_STORY_MESSAGE:276,INSTREAM_CONTEXT_CARD_MAI_RATING:277,INSTREAM_DEFERRED_CTA_IMAGE:278,INSTREAM_DEFERRED_CTA_HEADLINE:279,INSTREAM_DEFERRED_CTA_DISPLAY_LINK:280,INSTREAM_DEFERRED_CTA_STORY_MESSAGE:281,BIZ_DISCO_PERSISTENT_CTA:282,STORY:301,PERMALINK_STORY:302,ARTICLE_CONTEXT_TRIGGER:303,LINK:304,ATTACHMENT_FOLLOW:305,SNOWFLAKE_STORY:306,SNOWFLAKE_PHOTO:307,BIRTHDAY_REMINDER:308,FRIEND_REQUEST:309,PYMK_JEWEL:310,BROWSE_RESULT:311,PROFILE_LINK:312,USER_PROFILE_PIC:313,GROUP_MEMBER:314,GROUP_SUGGESTION:315,REACTION_BROWSER:316,GROUP_MEMBER_SUGGESTION:317,PROFILE_NAV_ITEM:318,NOTIFICATION_JEWEL:319,NOTIFICATION_ITEM:320,SNACKS:321,PROFILE_TILE:322,FRIEND_PROFILE_TILE:323,INTRO_PROFILE_TILE:324,SUGGEST_FRIENDS_DIALOG:325,APP_COLLECTION:326,ALL_FRIENDS_COLLECTION:327,MUTUAL_FRIENDS_COLLECTION:328,OUTGOING_FRIEND_REQUESTS:329,INSTANT_ARTICLE_RECIRCULATION_STORY:330,FRIEND_CENTER_PYMK:331,PARTICIPANTS_DIALOG:332,FEED_COMPOSER:333,CONFIRM_FRIEND_REQUEST:334,GENERIC_PROFILE_BROWSER:335,INSTANT_ARTICLE_NATIVE_STORY:336,INSTANT_EXPERIENCE_DOCUMENT:337,LIVE_VIDEO_CONTEXT:338,COMMENT_ACTION:339,ATTACHED_STORY:340,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_1:341,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_2:342,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_3:343,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_4:344,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_5:345,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_6:346,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_7:347,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_8:348,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_9:349,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_10:350,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_11:351,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_12:352,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_13:353,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_14:354,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_15:355,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_16:356,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_17:357,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_18:358,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_19:359,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_20:360,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_21:361,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_22:362,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_23:363,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_24:364,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_25:365,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_26:366,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_27:367,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_28:368,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_29:369,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_30:370,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_31:371,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_32:372,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_33:373,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_34:374,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_35:375,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_36:376,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_37:377,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_38:378,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_39:379,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_40:380,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_41:381,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_42:382,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_43:383,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_44:384,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_45:385,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_46:386,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_47:387,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_48:388,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_49:389,GHOST_OWL_GENERIC_CALL_TO_ACTION_BUTTON_50:390,AGGREGATED_STORY:391,THREADED_POSITION:392,AR_ADS_OPEN_CAMERA:393,AR_ADS_TAP_TO_CAMERA:394,AR_ADS_CTA_SWIPE:395,WORK_GALAHAD_NAV_ITEM:400,WORK_GALAHAD_TAB_HOME:401,WORK_GALAHAD_TAB_NOTIFICATIONS:402,WORK_GALAHAD_TAB_CHATS:403,WORK_GALAHAD_TAB_PROFILE:404,WORK_GALAHAD_LIST_SHORTCUTS:405,WORK_GALAHAD_LIST_GROUPS:406,WORK_GALAHAD_LIST_PEOPLE:407,WORK_GALAHAD_TAB_ADMIN_PANEL:408,WORK_GALAHAD_TAB_RESELLER_CONSOLE:409,HSCROLL_LEFT_ARROW:410,HSCROLL_RIGHT_ARROW:411,GET_SHOWTIMES_CALL_TO_ACTION:412,INTERESTED_CALL_TO_ACTION:413,OTHER_CALL_TO_ACTION:414,WORK_GALAHAD_TAB_DIRECT:415,WORK_GALAHAD_LIST_BOTS:416,INTERACTIVE_POLL_OPTION:417,INTERACTIVE_POLL_BACKGROUND_CARD:418,HSCROLL_PREVIOUS_BUTTON:419,HSCROLL_NEXT_BUTTON:420,WORK_GALAHAD_TAB_MEETING:421,WORK_GALAHAD_LIST_SEE_FIRST_GROUPS:422,AR_ADS_CTA:423,PBIA_PROFILE:424,PRODUCT_TAG:425,WAM_ENTRY_POINT:426,WORK_GALAHAD_TAB_CALL:427,WORK_GALAHAD_TAB_FILES:428,VIEW_PRODUCTS:429,USER_TAG:430,VIDEO_VIEWER_LIST:431,PRODUCT_DETAIL_PAGE:432,SHOPPING_SHEET_BUTTON:433,WORK_TEAMWORK_TAB_SEARCH:434,WORK_TEAMWORK_TAB_EXPLORE:435,WORK_GALAHAD_TAB_TOOLS:436,WORK_GALAHAD_TAB_VC:437,INSTAGRAM_EXPLORE:438,REMINDER_AD_CTA_BUTTON:439,CTC_POST_CLICK_CTA:440,KNOWLEDGE_NOTE:441,CTA_MARGIN_AREA:442,WORKPLATFORM_TAB:443,FB_SHOPS_PRODUCT:444,FB_SHOPS_FOOTER:445,WORK_GARDEN_TAB_HOME:446,KNOWLEDGE_COLLECTION:447,COMMUNITY_VIEW_INLINE:448,MORE_VIDEOS_ON_WATCH:449,VIDEO_AD_VIEWER:450,BUSINESS_CONTACT_THIRD_PARTY:451,BUSINESS_CONTACT_PHONE:452,BUSINESS_CONTACT_MESSAGE:453,BUSINESS_CONTACT_WEBSITE:454,BUSINESS_CONTACT_WHATSAPP:455,MEDIA_TO_DESTINATION:456,BUSINESS_IMAGE:460,FACEBOOK_REELS_LIKE_BS_FLOATING_CTA:461,FACEBOOK_REELS_COMMENT_BS_FLOATING_CTA:462,FACEBOOK_REELS_PROFILE_FLOATING_CTA:463,FACEBOOK_GENERIC_FLOATING_CTA:464,FACEBOOK_GENERIC_FLOATING_CTA_COMMENT:527,FACEBOOK_GENERIC_FLOATING_CTA_PERMALINK:535,FACEBOOK_GENERIC_FLOATING_CTA_GROUP:550,WORK_GALAHAD_TAB_WATCH:465,IG_STORY_SHOWCASE_ADS_CLICK:466,FACEBOOK_REELS_POST_LOOP_CONTEXT_CARD_CLICK:467,FACEBOOK_REELS_POST_LOOP_DEFERRED_CARD_CLICK:468,COLLECTION_PRODUCT_TILE:469,WORKPLACE_EMBED_HEADER:470,WORKPLACE_EMBED_UFI:471,WORKPLACE_EMBED_COMMENT_CTA:472,INLINE_COMMENT:473,STICKER_ADS_CTA_BUTTON:474,STICKER_ADS_TOOLTIP:475,STICKER_ADS_PROFILE_NAME:476,FB_NOTE:477,WORKPLACE_KNOWLEDGE_LIBRARY:478,SHOP_TILE:479,WORK_GALAHAD_TAB_SHIFTS:480,FACEBOOK_REELS:482,FACEBOOK_REELS_BANNER_ADS_CLICK:483,WORKSTREAM:484,EXPLORE_GRID_ADS_CTA_BUTTON:485,EXPLORE_GRID_ADS_PROFILE_NAME:486,FACEBOOK_REELS_BANNER_ADS_CLICK_PROFILE:487,COMMERCE_BUY_SELL_GROUPS_STORY_ATTACHMENT:488,COMMERCE_BUY_SELL_GROUPS_STORY_ATTACHMENT_MESSAGE_CTA:489,COMMERCE_BUY_SELL_GROUPS_GROUP_MALL_SELL_PILL:490,COMMERCE_MARKETPLACE_SELLING_CREATE_LISTING:491,COMMERCE_MARKETPLACE_CREATE_LISTING_DROPDOWN:492,COMMERCE_MARKETPLACE_YOUR_COMMERCE_PROFILE:493,COMMERCE_MARKETPLACE_FEED_CARD:494,COMMERCE_BUY_SELL_GROUPS_GROUP_MALL_COMPOSER:496,COMMERCE_MARKETPLACE_EDIT_LISTING_DROPDOWN:497,COMMERCE_MARKETPLACE_YOUR_LISTING_EDIT_BUTTON:498,COMMERCE_MARKETPLACE_DELETE_LISTING_DROPDOWN:499,COMMERCE_BUY_SELL_GROUPS_YOUR_ITEMS_TAB:501,COMMERCE_BUY_SELL_GROUPS_YOUR_ITEMS_TAB_AVAILABLE_LISTING:502,COMMERCE_MARKETPLACE_YOUR_LISTING_DELETE_BUTTON:503,COMMERCE_MARKETPLACE_SELL_HUB:506,COMMERCE_BUY_SELL_GROUPS_GROUP_MALL_YOUR_LISTINGS_PLINK:507,COMMERCE_MARKETPLACE_YOU_SURFACE_SELLING_SECTION:511,COMMERCE_MARKETPLACE_SELLING_ACTIVITY_MODULE:512,COMMERCE_MARKETPLACE_SURFACE_HIGHLIGHTS_MODULE:513,COMMERCE_YOU_SURFACE_COMMERCE_PROFILE:514,COMMERCE_BUY_SELL_GROUPS_PDP_ACTION_BAR:515,COMMERCE_MARKETPLACE_LIST_IN_MORE_PLACES_CTA:516,COMMERCE_MARKETPLACE_UNIFIED_SEE_POSTS_ACTION_CTA:517,COMMERCE_MARKETPLACE_SELLER_LISTING_NOTICE:518,COMMERCE_MARKETPLACE_BUYER_SELLER_FLYWHEEL:519,COMMERCE_MARKETPLACE_MANAGE_YOUR_LISTINGS_FEED_UNIT:520,COMMERCE_MARKETPLACE_ACTIVE_LISTINGS_FEED_UNIT:521,COMMERCE_MARKETPLACE_BAN_WARNING_BOTTOMSHEET:522,COMMERCE_MARKETPLACE_COMMERCE_PROFILE_FEED_CARD:523,COMMERCE_SHOPS__NAVIGATION_BAR__CART_BUTTON:600,COMMERCE_SHOPS__NAVIGATION_BAR__STOREFRONT_ENTRY:601,FACEBOOK_REELS_ADS_END_SCENE:495,SAVES_LIST_CELL:500,CONTEXTUAL_TRAY:504,CONTEXTUAL_TRAY_CARD:505,WORK_GALAHAD_TAB_CONTENT_MANAGER:508,PLINK:509,KNOWLEDGE_BUNDLE:510,PAPER_DOCUMENT_CASE:524,ADS_PRODUCT_PAGE:525,ADS_TEXT_OVERLAY:526,FACEBOOK_REELS_H_SCROLL:528,CONTEXTUAL_FEED_PROFILE:529,CONTEXTUAL_FEED_SEARCH:530,SEARCH_GRID_ADS_CTA_BUTTON:531,SEARCH_GRID_ADS_PROFILE_NAME:532,WHATSAPP_CTA_BUTTON_IN_IAB:533,TOOLTIP_CTA:534,FACEBOOK_REELS_MULTI_CARD_END_CARD:536,FACEBOOK_REELS_ADS_SWIPE_LEFT:537,AD_EXTENSIONS_CARD:41,COLLECTION_HERO_MEDIA:549,COLLECTION_TILE:538,COLLECTION_HSCROLL_TILE:539,HIDE_AD:540,REPORT_AD:541,WAIST_AD:542,BOTTOM_SHEET:543,SHARE_BROWSER:544,WORK_MEETINGS_TAB_HOME:545,IAB_FOOTER:546,IAB_PRODUCT_TILE:547,ATTRIBUTION_ROW_PILL:548,WORK_GALAHAD_TAB_EVENTS:551,UFI_COPY_LINK:552,WATCH_AND_NAVIGATION:553,WATCH_AND_NAVIGATION_CTA:554,WATCH_AND_NAVIGATION_SE:555,WATCH_AND_NAVIGATION_PE:556,AD_ACTION_CHIP:557,MUTE:558,EXPAND_TO_FULLSCREEN:559,THREE_DOTS:560,COMMENT_TIMESTAMP:561,SPONSORED_LABEL:562,UNDO:563,FACEBOOK_REELS_ADS_CTA_LONG_PRESS:648,FACEBOOK_REELS_ADS_MIDSCENE_LONG_PRESS:649,FACEBOOK_REELS_ADS_TOOLTIP:564,FACEBOOK_REELS_ADS_CAPTION_BROWSE:565,FACEBOOK_REELS_ADS_LONG_PRESS:566,FACEBOOK_FEED_ADS_LONG_PRESS:642,PROFILE_TAB_PRODUCT_TILE:567,FACEBOOK_REELS_ADS_CREATIVE:568,VIDEO_HIGHLIGHTS:569,VIDEO_ENDSCENE_CARD:570,SOCIAL_CONTEXT_SHEET:571,DYNAMIC_LANDING_PAGE:572,DYNAMIC_LANDING_PAGE_CTA:573,DYNAMIC_LANDING_PAGE_SE:574,DYNAMIC_LANDING_PAGE_PE:575,DYNAMIC_LANDING_PAGE_PE_SAVE_FOR_LATER:576,DYNAMIC_LANDING_PAGE_PE_CTA:577,DYNAMIC_LANDING_PAGE_PROFILE_PHOTO:578,DYNAMIC_LANDING_PAGE_PROFILE_NAME:579,DYNAMIC_LANDING_PAGE_SE_CTA:626,BIZ_AI_AGENT_ACTION_CHIP:580,BIZ_AI_AGENT_IAB_ACTION_CHIP:651,WATCH_AND_NAVIGATION_FOOTER:581,END_SCENE_CTA:582,END_SCENE_TOOLTIP_CTA:583,END_SCENE_PROFILE_PHOTO:584,FACEBOOK_REELS_ADS_POST_SCROLL:585,SKIP_BUTTON:586,PRODUCT_RECOMMENDER_PRODUCT_TILE:587,HALF_SHEET_EXPANSION:588,DESTINATION_AUTOMATION_IX_LANDING_PAGE:589,FEED_PHONE_NUMBER_PERMALINK:590,FINDS_PRODUCT_COMPARE_UNIT:591,PLAY_PAUSE_BUTTON:592,METADATA_BOTTOMSHEET_CTA_BUTTON:593,PROFILE_AND_BROWSE_PROFILE_CLICK:594,FB_REELS_SINGLE_IMAGE_MEDIA_TAP:595,FB_REELS_MID_SCENE_CTA:596,FB_REELS_MULTIADS_MEDIA:597,FB_REELS_ADS_PROFILE_BROWSE:598,COMMENT_KEYWORDS_IN_PRECLICK:599,COMMENT_KEYWORSD_IN_DYNAMIC_LANDING_PAGE:606,FB_FEED_HEADER_ENTITY_BASED_METADATA:602,WATCH_AND_INSTALL_APP_DETAILS_PAGE_CTA:603,FB_REELS_END_SCENE_CTA:604,SEE_LESS:605,NON_CTA_VIDEO_AD:607,MARKETPLACE_ADS_HEADER_MINI_PAGE:608,MARKETPLACE_ADS_HEADER_MINI_PAGE_PAGE_CLICK:609,MARKETPLACE_ADS_HEADER_MINI_PAGE_LINK_CLICK:610,COMMENT_PRODUCT_LINK:611,COMMENT_PRODUCT_LINK_PREVIEW:612,FACEBOOK_REELS_ADS_SCRUBBER_SWIPE_UP:613,FACEBOOK_REELS_ADS_PRODUCT_EXTENSIONS:614,PAGE_LIKE_AD_CTA:615,AD_UGC_FEED_EXTENSION_END_CARD:616,AD_UGC_FEED_EXTENSION_CARD:617,AD_UGC_POST_VIEWER_CTA:618,IG_X_AND_BROWSE:619,IG_X_AND_BROWSE_WITH_SCREENSHOT:620,IG_FEED_DESTINATION_INFO:621,IG_INSTREAM_VIEWER_CTA:622,IG_INSTREAM_RETURN_TO_AD_VIEWER_CTA:623,IG_INSTREAM_RETURN_TO_AD_CTA:624,X_AND_BROWSE_PLACEHOLDER_WEBVIEW:625,GROUP_TOPICS_STORY_TAG:628,PAGE_REVIEWS_KEYWORDS_IN_PRECLICK:629,WATCH_AND_NAVIGATION_BLOKS:630,DYNAMIC_LANDING_PAGE_FULLSCREEN:631,DYNAMIC_LANDING_PAGE_PRIMITIVES_SE:632,IG_STORY_PRODUCT_STICKER:633,FB_REELS_IMAGE_CTA:634,IG_REELS_CONSIDERATION_MID_CARD:635,AD_LIKE:636,IG_OVERFLOW_MENU_CTA:637,IG_COMMENT_LINK_PREVIEW_CARD:638,BAU_COLLECTION_LITE:639,BAU_PDP_LITE:640,IG_MEDIA_LONG_PRESS:641,INSTANT_EXPERIENCE_PRODUCT:643,IG_REELS_MIDSCENE_PILL:644,IG_COMMENT_THIRD_PARTY_REVIEW:645,FB_REELS_ADS_PRODUCT_EXTENSIONS_CTA_END_SCENE:646,METAMATE_IN_WORKPLACE:647,AFFILIATE_PRODUCT_BANNER:650,MARKETING_MESSAGE_TEMPLATE:652,MARKETING_MESSAGE_TEMPLATE_CTA:653,MARKETING_MESSAGE_TEMPLATE_MEDIA:654,MARKETING_MESSAGE_BODY_LINK:655,IG_STORY_TOOLTIP_PREVIEW_IMAGE:656,IG_STORY_MOASIC_TILE:657,FACEBOOK_REELS_ADS_POST_SCROLL_CTA:658});i.default=e}),66);
__d("TrackingNodes",["DataAttributeUtils","TrackingNodeConstants","TrackingNodeTypes","decodeTrackingNode","encodeTrackingNode","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={types:r("TrackingNodeTypes"),BASE_CODE_START:o("TrackingNodeConstants").BASE_CODE_START,BASE_CODE_END:o("TrackingNodeConstants").BASE_CODE_END,BASE_CODE_SIZE:o("TrackingNodeConstants").BASE_CODE_SIZE,PREFIX_CODE_START:o("TrackingNodeConstants").PREFIX_CODE_START,PREFIX_CODE_END:o("TrackingNodeConstants").PREFIX_CODE_END,PREFIX_CODE_SIZE:o("TrackingNodeConstants").PREFIX_CODE_SIZE,ENCODE_NUMBER_MAX:o("TrackingNodeConstants").ENCODE_NUMBER_MAX,ENCODED_STRING_WITH_THREE_SYMBOLS_PREFIX_CODE:o("TrackingNodeConstants").ENCODED_STRING_WITH_THREE_SYMBOLS_PREFIX_CODE,ENCODED_STRING_WITH_TWO_SYMBOLS_PREFIX_CODE:o("TrackingNodeConstants").ENCODED_STRING_WITH_TWO_SYMBOLS_PREFIX_CODE,TN_URL_PARAM:o("TrackingNodeConstants").TN_URL_PARAM,encodeTN:r("encodeTrackingNode"),decodeTN:r("decodeTrackingNode"),parseTrackingNodeString:function(t){for(var e=[];t.length>0;){var n=u.decodeTN(t);if(n.length==1)return[];e.push(n[1]),t=t.substring(n[0])}return e},getTrackingInfo:function(t,n){return'{"tn":"'+u.encodeTN(t,n).replace("\\","\\\\")+'"}'},addDataAttribute:function(t,n,o){n!==void 0&&["data-ft","data-gt"].forEach(function(e){var a;if(t.getAttribute)a=r("DataAttributeUtils").getDataAttribute(t,e)||"{}";else if(t.props)a=t.props[e]||"{}";else return;var i=u.encodeTN(n,o);try{if(a=JSON.parse(a),a.tn&&a.tn===i)return;if(a.tn=i,t.setAttribute)t.setAttribute(e,JSON.stringify(a));else if(t.props)t.props[e]=JSON.stringify(a);else return}catch(e){}})}};i.exports=u}),34);
__d("getAggregatedStoryTrackingNodeIndex",["TrackingNodes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=r("TrackingNodes").parseTrackingNodeString(e.join("")),n=0,o=0;o<t.length;o++)if(t[o][0]===340&&t[o].length>1)return n=t[o][1],n;return n}l.default=e}),98);