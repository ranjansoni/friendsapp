;/*FB_PKG_DELIM*/

__d("FBIconDots3HorizontalOutline20.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:s.jsx(o("XPlatReactSVG").Path,{d:"M458 408a2 2 0 1 1-4 0 2 2 0 0 1 4 0m6 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m-12 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("LSCancelTaskByQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.forEach(t.filter(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(n){return n.queueName===e[0]&&n.context===t.i64.to_string(e[1])}),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSComputeOptimisticThreadCapabilities",["LSArrayGetObjectAt","LSComputeParticipantCapabilities","LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.createArray(),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return t.forEach(t.db.table(14).fetch([[[e[0],{lt:r[1]}],[e[0],{gt:r[1]}]]]),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),a.contactId,e[0]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[32]=(r[0].push(r[31]),r[0])}])})},function(e){return r[2]=t.i64.cast([0,1073741823]),r[3]=t.i64.of_int32(r[0].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[0],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[2]=t.i64.and_(r[2],r[32])}])}):t.resolve()},function(n){return r[4]=t.i64.of_int32(r[0].length),t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?t.sequence([function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[31]=!1:(n=a.item,r[31]=!!t.i64.eq(n.contactTypeExact,t.i64.cast([0,16])))})},function(e){return r[5]=r[31]}]):(o=i.item,r[5]=!!t.i64.eq(o.threadType,t.i64.cast([0,201])))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=!1:(n=a.item,r[7]=t.i64.eq(n.threadType,t.i64.cast([0,206])))})},function(n){var o,a,i,l;return r[9]=t.i64.cast([0,1083495711]),r[10]=t.i64.cast([0,1024]),r[11]=t.i64.cast([0,0]),r[12]=t.i64.cast([0,0]),r[13]=t.i64.cast([0,134217728]),r[14]=t.i64.cast([0,1083495711]),r[15]=t.i64.cast([0,1024]),r[16]=t.i64.cast([0,0]),r[17]=t.i64.cast([0,134217728]),r[18]=t.i64.cast([0,0]),r[5]?(r[31]=t.i64.cast([0,8650752]),r[32]=t.i64.cast([0,1024]),r[33]=t.i64.cast([0,0]),r[34]=t.i64.cast([0,0]),r[35]=t.i64.cast([0,0]),o=[r[31],r[32],r[33],r[34],r[35]],r[19]=o[0],r[20]=o[1],r[21]=o[2],r[22]=o[3],r[23]=o[4]):(r[7]?(r[36]=t.i64.cast([0,8700166]),r[37]=t.i64.cast([0,1024]),r[38]=t.i64.cast([0,0]),r[39]=t.i64.cast([0,0]),r[40]=t.i64.cast([0,0]),a=[r[36],r[37],r[38],r[39],r[40]],r[31]=a[0],r[32]=a[1],r[33]=a[2],r[34]=a[3],r[35]=a[4]):(i=[r[14],r[15],r[16],r[17],r[18]],r[31]=i[0],r[32]=i[1],r[33]=i[2],r[34]=i[3],r[35]=i[4]),l=[r[31],r[32],r[33],r[34],r[35]],r[19]=l[0],r[20]=l[1],r[21]=l[2],r[22]=l[3],r[23]=l[4]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[r[19],t.i64.cast([0,1])],r[24]=o[0],r[25]=o[1],o):(n=l.item,a=[r[19],n.threadType],r[24]=a[0],r[25]=a[1])})},function(e){return r[27]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[28]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))),r[30]=t.i64.and_(t.i64.and_(!t.i64.eq(r[25],t.i64.cast([0,1]))||t.i64.eq(r[4],t.i64.cast([0,0]))?t.i64.eq(t.i64.and_(r[24],r[27]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[27]):r[24],t.i64.eq(r[25],t.i64.cast([0,2]))?t.i64.eq(t.i64.and_(r[24],r[28]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[28]):r[24]),t.i64.eq(r[25],t.i64.cast([0,1]))&&t.i64.neq(r[4],t.i64.cast([0,0]))?r[24]:t.i64.xor(r[24],t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))))),t.i64.eq(r[25],t.i64.cast([0,206]))?t.resolve(r[29]=r[30]):t.sequence([function(e){return r[31]=t.createArray(),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,6]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,6]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,0]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,7]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,1]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,72]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,72]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,8]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,2]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,9]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,9]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,10]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,4]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,5]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,5]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,11]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,11]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,12]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,13]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,13]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,18]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,14]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,20]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,15]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,3]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(void 0,void 0)||t.i64.neq(t.i64.and_(t.i64.cast([0,0]),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,30]))):t.i64.cast([0,0])),r[31]),r[32]=t.i64.cast([0,0]),r[33]=t.i64.of_int32(r[31].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[31],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[32]=t.i64.add(r[32],r[35])}])}):t.resolve()},function(e){return r[29]=t.i64.and_(r[32],r[30])}])},function(e){return o[0]=r[29]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxComputeOptimisticThreadCapabilitiesStoredProcedure",e.__tables__=["participants","threads","contacts"],a.exports=e}),null);
__d("LSGetFirstAvailableQuickReplyCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(20).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableQuickReplyCTAIDStoredProcedure",e.__tables__=["quick_reply_ctas"],a.exports=e}),null);
__d("LSInsertQuickReplyCTA",["LSArrayGetObjectAt","LSGetFirstAvailableQuickReplyCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=t.i64.of_int32(e[3].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.sequence([function(n){return t.forEach(t.db.table(20).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(e){return t.storedProcedure(n("LSGetFirstAvailableQuickReplyCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=r[1],r[3]=t.i64.of_int32(e[3].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[7]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(n){return r[10]=r[8].get("title"),r[11]=r[8].get("type"),r[12]=r[8].get("image_url"),r[13]=r[8].get("platform_token"),t.db.table(20).add({threadKey:e[0],messageId:e[1],ctaId:r[2],messageTimestampMs:e[2],title:r[10],type_:r[11],imageUrl:r[12],platformToken:r[13]})},function(e){return r[2]=t.i64.add(r[2],t.i64.cast([0,1]))}])}):t.resolve()},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("quick_reply_type"),t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(e){var t=e.update,n=e.item;return t({hasQuickReplies:!0,quickReplyType:r[6]})})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertQuickReplyCTAStoredProcedure",e.__tables__=["quick_reply_ctas","messages"],a.exports=e}),null);
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.eq(e[3],t.i64.cast([0,1]))?t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2421884758]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2676961947]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3298086032]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3873263038]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2616853333]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}]):t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,4002265907]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2663996736]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2868699317]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2688620547]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3544071775]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}])},function(e){return o[0]=r[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxGetLocalizedReplySnippetStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSetMessageViewFlags",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,r.primarySortKey,r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey],n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetch([[[e[0],{gt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.gt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.ge(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=o[0],n[11]=o[1],n[12]=o[2],n[13]=o[3],n[14]=o[4],n[15]=o[5],n[16]=o[6],n[17]=o[7],n[18]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=a[0],n[11]=a[1],n[12]=a[2],n[13]=a[3],n[14]=a[4],n[15]=a[5],n[16]=a[6],n[17]=a[7],n[18]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetchDesc([[[e[0],{lt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.lt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.le(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=o[0],n[21]=o[1],n[22]=o[2],n[23]=o[3],n[24]=o[4],n[25]=o[5],n[26]=o[6],n[27]=o[7],n[28]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=a[0],n[21]=a[1],n[22]=a[2],n[23]=a[3],n[24]=a[4],n[25]=a[5],n[26]=a[6],n[27]=a[7],n[28]=a[8])})},function(r){return n[32]=t.i64.or_(t.i64.cast([0,2]),t.i64.or_(!n[3]&&!e[3]?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.or_(n[3]?t.i64.cast([0,0]):t.i64.cast([0,1]),t.i64.or_(t.i64.eq(n[5],t.i64.cast([0,60]))||t.i64.eq(n[5],t.i64.cast([0,80]))?t.i64.cast([0,1048576]):t.i64.cast([0,0]),t.i64.neq(n[6],t.i64.cast([85970,924785702]))&&t.i64.neq(n[6],t.i64.cast([85970,1004785694]))&&t.i64.neq(n[6],t.i64.cast([85970,1044785690]))?t.i64.cast([0,0]):t.i64.cast([0,2097152]))))),n[14]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[12],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[13]&&!(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[12],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[32],t.i64.cast([0,16])):n[32],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[10],n[14]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[10])&&r.messageId===n[14]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[35]})})},function(e){return n[30]=n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]}]):t.resolve(n[30]=n[32])},function(r){return n[24]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[30],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[3]&&!(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[30],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[22],t.i64.cast([0,16])):n[22],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[20],n[24]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[20])&&r.messageId===n[24]}),function(e){var r=e.update,o=e.item;return r({viewFlags:n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]})})},function(e){return n[31]=n[35]}]):t.resolve(n[31]=n[30])},function(r){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[0],n[4]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[0])&&r.messageId===n[4]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[31]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetMessageViewFlagsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSLocalize","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.sequence([function(e){return t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[1]=t.i64.to_string(r[9])}])},function(o){return r[8]=e[4]==null?e[3]:e[4],t.sequence([function(e){return t.islc(t.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.lastActivityTimestampMs)})},function(o){return r[11]=t.i64.add(r[9],t.i64.cast([0,1])),r[13]=t.i64.gt(r[0],r[11])?r[0]:r[11],t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return(function(e){t.logger(e).info(e)})("localApplyOptimisticMessage insert optimistic thread"),t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,40]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:e[2],clientThreadKey:e[1],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,40])})},function(n){return t.i64.eq(e[2],t.i64.cast([0,13]))||t.i64.eq(e[2],t.i64.cast([0,7]))||t.i64.eq(e[2],t.i64.cast([0,1]))?t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[1],contactId:e[1],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}]):t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=!1:(t=o.item,r[14]=t.errorShouldBeShown)})},function(e){return r[14]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[16]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[17]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[16],r[17],void 0,void 0)}]):t.resolve()}]):(a=l.item,t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(n.threadType,e[2])}),function(t){var n=t.update,o=t.item;return n({lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(o){return t.sequence([function(n){return t.islc(t.db.table(12).fetchDesc([[[e[1],t.i64.cast([0,80])],[e[1],t.i64.cast([0,60])],[e[1],t.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?(r[33]=t.i64.of_float(Date.now()),r[9]=r[33]):(n=a.item,r[9]=n.primarySortKey)})},function(o){var a,i,l;return e[8]!==void 0&&(t.i64.eq(e[9],t.i64.cast([0,1]))||t.i64.eq(e[10],t.i64.cast([0,1])))?t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[8]==null?"":e[8]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===(e[8]==null?"":e[8])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(i=[e[8],void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15],i):(a=s.item,t.sequence([function(o){var i,l,s;return r[54]=a.senderId,r[53]=a.stickerId,t.i64.neq(r[53],void 0)?(i=[r[53],t.i64.cast([0,4])],r[56]=i[0],r[57]=i[1]):(l=[void 0,void 0],r[56]=l[0],r[57]=l[1]),s=[r[56],r[57]],r[50]=s[0],r[51]=s[1],r[55]=a.replyType==null?t.i64.cast([0,0]):a.replyType,t.sequence([function(o){return t.storedProcedure(n("LSGetLocalizedReplySnippet"),e[1],e[0],r[54],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(n){return r[52]=t.i64.eq(e[10],t.i64.cast([0,1]))?r[56]:""}])},function(n){var o;return o=[e[8],e[9],e[10],t.i64.cast([0,1]),r[52],r[54],a.text,r[50],r[51],void 0,void 0,void 0,void 0,void 0,void 0,r[55]],r[33]=o[0],r[34]=o[1],r[35]=o[2],r[36]=o[3],r[37]=o[4],r[38]=o[5],r[39]=o[6],r[40]=o[7],r[41]=o[8],r[42]=o[9],r[43]=o[10],r[44]=o[11],r[45]=o[12],r[46]=o[13],r[47]=o[14],r[48]=o[15],o}]))})},function(e){var t;return t=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=t[0],r[12]=t[1],r[13]=t[2],r[14]=t[3],r[15]=t[4],r[16]=t[5],r[17]=t[6],r[18]=t[7],r[19]=t[8],r[20]=t[9],r[21]=t[10],r[22]=t[11],r[23]=t[12],r[24]=t[13],r[25]=t[14],r[26]=t[15],t}]):t.resolve((e[8]===void 0||t.i64.eq(e[9],t.i64.cast([0,0]))||t.i64.eq(e[10],t.i64.cast([0,0]))?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=a[0],r[34]=a[1],r[35]=a[2],r[36]=a[3],r[37]=a[4],r[38]=a[5],r[39]=a[6],r[40]=a[7],r[41]=a[8],r[42]=a[9],r[43]=a[10],r[44]=a[11],r[45]=a[12],r[46]=a[13],r[47]=a[14],r[48]=a[15]):(i=[e[8],e[9],e[10],t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15]),l=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4],r[16]=l[5],r[17]=l[6],r[18]=l[7],r[19]=l[8],r[20]=l[9],r[21]=l[10],r[22]=l[11],r[23]=l[12],r[24]=l[13],r[25]=l[14],r[26]=l[15]))},function(n){var o,a;return e[13]?r[27]=!1:r[27]=!0,r[27]?(a=[void 0,void 0,void 0,void 0],r[28]=a[0],r[29]=a[1],r[30]=a[2],r[31]=a[3]):(r[33]=e[13].get("mention_offsets"),r[34]=e[13].get("mention_lengths"),r[35]=e[13].get("mention_ids"),r[36]=e[13].get("mention_types"),o=[r[33],r[34],r[35],r[36]],r[28]=o[0],r[29]=o[1],r[30]=o[2],r[31]=o[3]),e[11]?r[32]=t.i64.cast([0,3]):r[32]=r[13],t.i64.eq(t.i64.cast([0,20]),t.i64.cast([0,20]))?t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[9],secondarySortKey:r[0],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]}):t.sequence([function(e){return t.db.table(12).fetch([[[r[1]]],"optimistic"]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[r[9],r[0],void 0],r[33]=n[0],r[34]=n[1],r[35]=n[2],n):(t=i.item,o=[t.primarySortKey,t.secondarySortKey,t.localDataId],r[33]=o[0],r[34]=o[1],r[35]=o[2])})},function(e){return t.forEach(t.filter(t.db.table(12).fetch([[[r[1]]],"optimistic"]),function(e){return e.offlineThreadingId===r[1]&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[33],secondarySortKey:r[34],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),localDataId:r[35],replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]})}])}])},function(o){return r[2]=t.createArray(),r[3]=(r[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),r[2]),r[4]=(r[2].push("localApplyOptimisticMessage"),r[2]),r[5]=(r[2].push(e[1]),r[2]),r[6]=(r[2].push(r[1]),r[2]),r[7]=t.toJSON(r[2]),(function(e){t.logger(e).info(e)})(r[7]),e[14]?t.sequence([function(o){return t.storedProcedure(n("LSSetMessageViewFlags"),e[1],r[1],r[0],t.i64.eq(e[2],t.i64.cast([0,1])))},function(o){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[1],r[0],e[3],!1,t.i64.neq(e[6],void 0))}]):t.resolve()},function(e){var t;return t=[r[1],r[0]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageStoredProcedure",e.__tables__=["threads","participants","user_visible_network_connectivity_error","messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetViewerFBID","LSInsertQuickReplyCTA","LSIssueNewTask","LSLocalApplyOptimisticMessage"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("page_id"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[2]=r[26]}]):t.resolve(r[2]=void 0)},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("product_type"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[3]=r[26]}]):t.resolve(r[3]=void 0)},function(e){var o,a;return r[3]==="CTM"?(r[2]!==void 0?r[19]=t.i64.from_string(r[2]):r[19]=r[1],r[4]=r[19]):r[4]=r[1],r[5]=t.i64.cast([0,1083495711]),r[6]=t.i64.cast([0,1024]),r[7]=t.i64.cast([0,0]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,134217728]),r[10]=!0,r[10]?(t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,205]))?r[19]=void 0:r[19]="",a=[r[19],void 0,void 0,void 0,void 0],r[11]=a[0],r[12]=a[1],r[13]=a[2],r[14]=a[3],r[15]=a[4]):(r[19]=(void 0).get("nullstate_description_text1"),r[19]!==void 0?r[20]=r[19]:r[20]="",r[21]=(void 0).get("nullstate_description_text2"),r[22]=(void 0).get("nullstate_description_text3"),r[23]=(void 0).get("nullstate_description_text4"),r[24]=(void 0).get("nullstate_description_text5"),o=[r[20],r[21],r[22],r[23],r[24]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.forEach(t.filter(t.db.table(9).fetch([[[r[4]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[4],mailboxType:t.i64.cast([0,0]),threadType:t.i64.cast([0,2]),clientThreadKey:r[4],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:t.i64.cast([0,0]),lastReadWatermarkTimestampMs:t.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:r[16],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),capabilities:r[5],capabilities2:r[6],capabilities3:r[7],capabilities4:r[8],capabilities5:r[9],nullstateDescriptionText1:r[11],nullstateDescriptionText2:r[12],nullstateDescriptionText3:r[13],threadName:e[2]})},function(e){return r[17]=t.createArray(),t.resolve()},function(n){return e[3]!==void 0?t.db.table(312).add({threadKey:r[4],metadata:e[3]}):t.resolve()},function(o){return r[18]=t.i64.of_int32(e[0].length),t.i64.gt(r[18],t.i64.cast([0,0]))?t.loopAsync(r[18],function(o){return r[19]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return t.forEach(t.filter(t.db.table(14).fetch([[[r[4],r[20]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.contactId,r[20])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(14).add({threadKey:r[4],contactId:r[20],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}])}):t.resolve()},function(e){return o[0]=r[4]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticGroupThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_metadata","participants"],a.exports=e}),null);
__d("LSCreateGroupThreadWithAdminText",["LSCreateOfflineThreadingID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],e[1],e[2],void 0).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return e[2],t.sequence([function(e){return r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[1]).then(function(e){var t;return t=e,r[2]=t[0],t})},function(e){return t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(e){var n=e.update,o=e.item;return n({otidOfFirstMessage:t.i64.to_string(r[2])})})},function(o){return r[3]=new t.Map,r[3].set("thread_id",r[0]),r[3].set("otid",t.i64.to_string(r[2])),r[3].set("source",t.i64.cast([0,0])),r[3].set("send_type",t.i64.cast([0,8])),e[3]!==void 0&&r[3].set("text",e[3]),r[4]=new t.Map,r[4].set("participants",e[0]),r[4].set("send_payload",r[3]),e[2]!==void 0&&r[4].set("thread_name",e[2]),r[5]=r[4].get("send_payload"),r[6]=r[5].get("thread_id"),r[7]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[6]),t.i64.cast([0,130]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxCreateGroupThreadWithAdminTextStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSLocalCreateOptimisticGroupThread",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){var a,i;return r[0]=!0,r[0]?(i=["",void 0,void 0,void 0,void 0],r[1]=i[0],r[2]=i[1],r[3]=i[2],r[4]=i[3],r[5]=i[4]):(r[8]=(void 0).get("nullstate_description_text1"),r[8]!==void 0?r[9]=r[8]:r[9]="",r[10]=(void 0).get("nullstate_description_text2"),r[11]=(void 0).get("nullstate_description_text3"),r[12]=(void 0).get("nullstate_description_text4"),r[13]=(void 0).get("nullstate_description_text5"),a=[r[9],r[10],r[11],r[12],r[13]],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4]),r[6]=new t.Map,r[6].set("nullstate_description_text1",r[1]),r[6].set("nullstate_description_text2",r[2]),r[6].set("nullstate_description_text3",r[3]),r[6].set("nullstate_description_text4",r[4]),r[6].set("nullstate_description_text5",r[5]),t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],void 0,e[2],e[4]).then(function(e){var t;return t=e,r[7]=t[0],t})},function(o){return e[3]===!0&&t.i64.neq(t.i64.cast([0,2]),t.i64.cast([0,206]))?t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,5]))?e[4]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[8]=t[0],t})},function(o){return r[9]=t.i64.cast([0,0]),r[10]=t.i64.of_int32(e[0].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[11]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[11]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){return t.i64.neq(r[12],r[8])?r[14]=r[12]:r[14]=r[9],r[9]=r[14]}])}):t.resolve()},function(o){return e[4]!==void 0?(r[11]=new t.Map,r[11].set("seller_id",r[9]),r[11].set("thread_metadata",e[4]),r[11].set("client_thread_key",r[7]),r[12]=r[11].get("client_thread_key"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,646]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve((function(e){t.logger(e).mustfix(e)})("Marketplace thread metadata cannot be null")):(r[8]=new t.Map,r[8].set("participants",e[0]),r[8].set("client_thread_key",r[7]),r[8].set("sync_group",t.i64.cast([0,1])),r[9]=r[8].get("client_thread_key"),r[10]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[9]),t.i64.cast([0,153]),r[10],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(e){return o[0]=r[7]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrl}function u(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrlLarge}function c(e){var t=e.playableUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.playableUrlFallback:e.playableUrl}function d(e){var t=e.imageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.imageUrlFallback:e.imageUrl}function m(e){var t=e.faviconUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.faviconUrlFallback:e.faviconUrl}function p(t){try{var n=t.listItemContactUrlExpirationTimestampList1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList1:t.listItemContactUrlList1}catch(e){return t.listItemContactUrlList1}}function _(t){try{var n=t.listItemContactUrlExpirationTimestampList2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList2:t.listItemContactUrlList2}catch(e){return t.listItemContactUrlList2}}function f(t){try{var n=t.listItemContactUrlExpirationTimestampList3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList3:t.listItemContactUrlList3}catch(e){return t.listItemContactUrlList3}}function g(e){var t=e.headerImageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.headerImageUrlFallback:e.headerImageUrl}function h(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback1:t.listItemProfilePictureUrl1}catch(e){return t.listItemProfilePictureUrl1}}function y(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback2:t.listItemProfilePictureUrl2}catch(e){return t.listItemProfilePictureUrl2}}function C(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback3:t.listItemProfilePictureUrl3}catch(e){return t.listItemProfilePictureUrl3}}l.previewUrl=s,l.previewUrlLarge=u,l.playableUrl=c,l.imageUrl=d,l.faviconUrl=m,l.listItemContactUrlList1=p,l.listItemContactUrlList2=_,l.listItemContactUrlList3=f,l.headerImageUrl=g,l.listItemProfilePictureUrl1=h,l.listItemProfilePictureUrl2=y,l.listItemProfilePictureUrl3=C}),98);
__d("LSMessagePointQuery",["LSIssueNewTask","LSVerifyThreadRowExists"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[1]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(r){return t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[2],t.i64.cast([0,1]))},function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[1]=r[6])})},function(o){return r[3]=new t.Map,r[3].set("thread_key",e[0]),r[3].set("message_id",e[1]),r[3].set("sync_group",r[1]),r[3].set("num_context_messages",e[3]),r[4]=r[3].get("thread_key"),r[5]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[4]),t.i64.cast([0,19]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,r[1]=a.timestampMs,t.filter(t.db.table(13).fetch([[[e[0],{lte:r[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,r[1])&&t.i64.ge(n.maxTimestampMs,r[1])}).next().then(function(o){var a=o.done,i=o.value;return a?t.sequence([function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[2]=r[7])})},function(o){return r[4]=new t.Map,r[4].set("thread_key",e[0]),r[4].set("message_id",e[1]),r[4].set("sync_group",r[2]),r[4].set("num_context_messages",e[3]),r[5]=r[4].get("thread_key"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,19]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):0}))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMessagePointQueryStoredProcedure",e.__tables__=["messages","messages_ranges_v2__generated","threads"],a.exports=e}),null);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.eq(e[1],t.i64.cast([0,5]))?r[0]=t.i64.cast([-1,4294967284]):r[0]=t.i64.cast([0,0]),t.storedProcedure(n("LSVerifyThreadExistsV2"),e[0],e[1],"inbox",r[0],e[3],!1,e[2],!1,!1)},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadRowExistsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadView",["LSArrayGetObjectAt","LSComputeOptimisticThreadCapabilities","LSCreateGroupThreadWithAdminText","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSInsertNewMessageRange","LSIssueNewTask","LSLocalCreateOptimisticGroupThread","LSMessagePointQuery","LSVerifyContactRowExists","LSVerifyThreadRowExists","LSVerifyThreadRowExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return r[4]=new t.Map,r[5]=r[3].keys(),r[6]=t.i64.of_int32(r[5].length),t.i64.gt(r[6],t.i64.cast([0,0]))?t.loopAsync(r[6],function(e){return r[8]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[8]).then(function(e){var t;return t=e,r[9]=t[0],r[10]=t[1],t})},function(e){return r[11]=r[3].get(r[9]),r[4].set(r[9],r[11])}])}):t.resolve()},function(e){return r[7]=r[4].get("product_type"),r[0]=r[7]}]):t.resolve(r[0]=void 0)},function(o){var a;return t.i64.eq(e[1],t.i64.cast([0,7]))?t.resolve((a=[e[0],t.i64.cast([0,1024])],r[1]=a[0],r[2]=a[1],a)):t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(t.i64.eq(e[0],t.i64.cast([0,0]))?r[12]=e[0]:r[12]=void 0,a=[r[12],void 0,t.i64.cast([0,20])],r[3]=a[0],r[4]=a[1],r[5]=a[2]):(o=s.item,i=[o.threadKey,o.clientThreadKey,o.authorityLevel],r[3]=i[0],r[4]=i[1],r[5]=i[2])})},function(o){return r[12]=t.i64.of_int32(e[6].length),t.i64.eq(e[1],t.i64.cast([0,1]))&&t.i64.gt(r[12],t.i64.cast([0,0]))?(r[13]=t.i64.of_int32(e[6].length),t.i64.gt(r[13],t.i64.cast([0,0]))?t.loopAsync(r[13],function(o){return r[14]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[14]).then(function(e){var t;return t=e,r[15]=t[0],r[16]=t[1],t})},function(e){return r[17]=r[15].get("contact_id"),r[18]=r[15].get("contact_type"),r[19]=r[15].get("contact_name"),r[20]=r[15].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[17],t.i64.cast([0,0]),r[20],r[19],r[18],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()):t.resolve()},function(o){return e[5]!==void 0?t.sequence([function(r){return t.storedProcedure(n("LSMessagePointQuery"),e[0],e[5],e[1],void 0)},function(t){var n;return n=[e[0],void 0],r[7]=n[0],r[8]=n[1],n}]):t.sequence([function(o){return([t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})||r[0]==="CTM")&&t.i64.eq(e[0],t.i64.cast([0,0]))?t.sequence([function(o){return r[14]=t.createArray(),r[15]=t.i64.of_int32(e[6].length),t.i64.gt(r[15],t.i64.cast([0,0]))?t.loopAsync(r[15],function(o){return r[28]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return r[31]=r[29].get("contact_id"),r[32]=r[29].get("contact_type"),r[33]=r[29].get("contact_name"),r[34]=r[29].get("contact_profile_photo"),r[35]=(r[14].push(r[31]),r[14])}])}):t.resolve()},function(e){return r[16]=t.i64.of_int32(r[14].length),r[17]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[14].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[18]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[14].some(function(n){return t.i64.eq(e.contactId,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[17].push(e.threadKey),r[17]):0})},function(e){return r[19]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[17].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[17],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[20]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[17].some(function(n){return t.i64.eq(e.threadKey,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[19].push(e.threadKey),r[19]):0})},function(e){return t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[19].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[21]=r[30]}])},function(n){return t.islc(t.filter(t.db.table(9).fetchDesc([[[t.merge({lt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},e[1])],[t.merge(t.i64.cast([0,5]),{lt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),{gt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),e[1])]],"threadTypeLastActivityTimestampMs"]),function(n){return r[19].some(function(e){return t.i64.eq(n.threadKey,e)})&&(t.i64.neq(n.threadType,t.i64.cast([0,5]))&&n.threadName===void 0||t.i64.eq(n.threadType,t.i64.cast([0,5]))&&n.threadName===e[2])&&(t.i64.neq(n.threadType,t.i64.cast([0,206]))||t.i64.le(n.authorityLevel,t.i64.cast([0,20])))&&t.i64.eq(n.threadType,e[1])}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[void 0,void 0,t.i64.cast([0,20])],r[22]=o[0],r[23]=o[1],r[24]=o[2],o):(n=l.item,a=[n.threadKey,n.clientThreadKey,n.authorityLevel],r[22]=a[0],r[23]=a[1],r[24]=a[2])})},function(o){return t.i64.neq(r[22],void 0)?t.sequence([function(o){return r[0]==="CTM"?t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=r[38].get(r[47]),r[39].set(r[47],r[49])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[46]=new t.Map,r[47]=r[42].keys(),r[48]=t.i64.of_int32(r[47].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[49]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[47],r[49]).then(function(e){var t;return t=e,r[50]=t[0],r[51]=t[1],t})},function(e){return r[52]=r[42].get(r[50]),r[46].set(r[50],r[52])}])}):t.resolve()},function(e){return r[44]=r[46]}])},function(e){return r[44]!==void 0?(r[46]=r[44].get("__typename"),r[46]==="XMSGClickToMessengerAdExtras"?r[47]=r[44]:r[47]=void 0,r[47]!==void 0?(r[49]=r[47].get("page_id"),r[48]=r[49]):r[48]=void 0,r[45]=r[48]):r[45]=void 0,r[30]=r[45]}]):t.resolve(r[30]=void 0)},function(e){return r[31]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[33]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(o){return r[30]!==void 0?r[37]=t.i64.from_string(r[30]):r[37]=r[32],e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[45]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[45]).then(function(e){var t;return t=e,r[46]=t[0],r[47]=t[1],t})},function(e){return r[48]=r[38].get(r[46]),r[39].set(r[46],r[48])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[45]=new t.Map,r[46]=r[42].keys(),r[47]=t.i64.of_int32(r[46].length),t.i64.gt(r[47],t.i64.cast([0,0]))?t.loopAsync(r[47],function(e){return r[48]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],r[48]).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[51]=r[42].get(r[49]),r[45].set(r[49],r[51])}])}):t.resolve()},function(e){return r[44]=r[45]}])},function(e){return r[44]!==void 0?(r[45]=r[44].get("__typename"),r[45]==="XMSGClickToMessengerAdExtras"?r[46]=r[44]:r[46]=void 0,r[46]!==void 0?(r[47]=new t.Map,r[47].set("product_extras",r[46]),r[47].set("client_thread_key",r[37]),r[47].set("offline_threading_id",t.i64.to_string(r[34])),r[47].set("admin_text_otid",t.i64.to_string(r[36])),r[48]=r[47].get("client_thread_key"),r[49]=t.toJSON(r[47]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[48]),t.i64.cast([0,1020]),r[49],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()):t.resolve()}]):t.resolve()}]):t.resolve()},function(o){return t.i64.eq(r[24],t.i64.cast([0,20])),t.sequence([function(o){return[t.i64.cast([0,5]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return t.storedProcedure(n("LSVerifyThreadRowExistsV2"),r[22],e[1],t.i64.cast([0,1]),t.i64.cast([0,20]))},function(e){return r[30]=t.i64.cast([0,20])}]):t.sequence([function(o){return t.i64.eq(r[24],t.i64.cast([0,80])),r[31]=t.i64.cast([0,40]),t.storedProcedure(n("LSVerifyThreadRowExists"),r[22],e[1],t.i64.cast([0,1]))},function(e){return r[30]=r[31]}])},function(e){var t;return t=[r[22],r[30]],r[28]=t[0],r[29]=t[1],t}])},function(e){var t;return t=[r[28],r[29]],r[26]=t[0],r[27]=t[1],t}]):t.sequence([function(o){return r[36]=t.i64.of_int32(e[6].length),t.i64.gt(r[36],t.i64.cast([0,0]))?t.loopAsync(r[36],function(o){return r[37]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=r[38].get("contact_id"),r[41]=r[38].get("contact_type"),r[42]=r[38].get("contact_name"),r[43]=r[38].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[40],t.i64.cast([0,0]),r[43],r[42],r[41],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()},function(o){var a,i;return r[28]=!0,r[28]?(i=["",void 0,void 0,void 0,void 0],r[29]=i[0],r[30]=i[1],r[31]=i[2],r[32]=i[3],r[33]=i[4]):(r[36]=(void 0).get("nullstate_description_text1"),r[36]!==void 0?r[37]=r[36]:r[37]="",r[38]=(void 0).get("nullstate_description_text2"),r[39]=(void 0).get("nullstate_description_text3"),r[40]=(void 0).get("nullstate_description_text4"),r[41]=(void 0).get("nullstate_description_text5"),a=[r[37],r[38],r[39],r[40],r[41]],r[29]=a[0],r[30]=a[1],r[31]=a[2],r[32]=a[3],r[33]=a[4]),t.sequence([function(o){return r[36]=new t.Map,r[36].set("nullstate_description_text1",r[29]),r[36].set("nullstate_description_text2",r[30]),r[36].set("nullstate_description_text3",r[31]),r[36].set("nullstate_description_text4",r[32]),r[36].set("nullstate_description_text5",r[33]),t.storedProcedure(n("LSLocalCreateOptimisticGroupThread"),r[14],"",e[2],!0,e[8]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.storedProcedure(n("LSInsertNewMessageRange"),r[37],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0)},function(e){var t;return t=[r[37],void 0],r[34]=t[0],r[35]=t[1],t}])},function(e){var t;return t=[r[34],r[35]],r[26]=t[0],r[27]=t[1],t}])},function(e){var t;return t=[r[26],r[27]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(o){return[t.i64.cast([0,19]),t.i64.cast([0,28])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return r[16]=new t.Map,r[16].set("thread_fbid",e[0]),r[16].set("force_upsert",!1),r[16].set("use_open_messenger_transport",!1),r[16].set("sync_group",t.i64.cast([0,104])),r[16].set("metadata_only",!1),r[16].set("preview_only",!0),r[17]=r[16].get("thread_fbid"),r[18]=t.toJSON(r[16]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[17]),t.i64.cast([0,209]),r[18],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}]):t.sequence([function(r){return t.i64.eq(e[1],t.i64.cast([0,5]))?t.storedProcedure(n("LSVerifyThreadRowExistsV2"),e[0],e[1],t.i64.cast([0,1]),t.i64.cast([0,20])):t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[1],t.i64.cast([0,1]))},function(o){return t.i64.lt(r[5],t.i64.cast([0,60]))?t.storedProcedure(n("LSInsertNewMessageRange"),e[0],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0):t.resolve()},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}])},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[7]=t[0],r[8]=t[1],t}])},function(o){return t.i64.eq(r[8]==null?r[5]:r[8],t.i64.cast([0,20]))?t.sequence([function(o){return t.i64.neq(e[4],void 0)?t.resolve(r[12]=e[4]):t.sequence([function(e){return t.storedProcedure(n("LSComputeOptimisticThreadCapabilities"),r[7]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[12]=r[13]}])},function(e){return t.forEach(t.db.table(9).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({capabilities:r[12]})})}]):t.resolve()},function(e){return t.db.table(9).fetch([[[r[7]]]]).next().then(function(e,n){var o,a,i,l,s=e.done,u=e.value;return s?(o=[r[7],t.i64.cast([0,0])],r[9]=o[0],r[10]=o[1],o):(n=u.item,n.isDisappearingMode?(a=[n.disappearingThreadKey,t.i64.cast([0,1024])],r[12]=a[0],r[13]=a[1]):(i=[r[7],n.mailboxType],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[9]=l[0],r[10]=l[1])})},function(e){var t;return t=[r[9],r[10]],r[1]=t[0],r[2]=t[1],t}])},function(e){var t;return t=[r[1],r[2]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadViewStoredProcedure",e.__tables__=["threads","participants"],a.exports=e}),null);
__d("LSVerifyThreadViewStoredProcedure",["LSSynchronousPromise","LSVerifyThreadView","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadView"),a.threadKey,a.threadType,a.threadName,a.threadPictureUrl,a.threadCapabilities,a.messageId,a.contacts,a.mailboxType,a.threadMetadata,a.enableCcThreadMetadataFix);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","cr:10030"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){n("cr:10030")&&await n("cr:10030").deleteIndexedDB(e),await o("MAWIndexedDBDeletion").deleteMAWPersistence(),(t==null?void 0:t.deleteEncryptionDB)===!0&&await o("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs")}l.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=e}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e="MAWEARKeychainDecryptionError",t="error";try{return await o("MAWSetupWorker").terminateWorker(e),o("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(t,{deleteEncryptionDB:!0})}catch(o){var n=r("getErrorSafe")(o);r("FBLogger")("messenger_web").catching(n).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",t,e)}}l.handleEARKeychainError=e}),98);
__d("MWEBEntrypointsKillswitch.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({JEWEL_THREADLIST:"jewel_threadlist",IN_THREAD_GAP_UI:"in_thread_gap_ui",IN_THREAD_SCROLL_BANNER:"in_thread_scroll_banner",IN_THREAD_SEARCH:"in_thread_search",INBOX_INTERSTITIAL:"inbox_interstitial",INBOX_THREADLIST:"inbox_threadlist",INBOX_THREADLIST_UNIVERSAL_SEARCH:"inbox_threadlist_universal_search",MEDIA_GALLERY_RESTORE:"media_gallery_restore",EB_SETTINGS:"eb_settings",AUTO_RESTORE:"auto_restore",DYI:"dyi",IGD_NO_KILLSWITCH_APPLICABLE:"igd_no_killswitch_applicable",NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:"not_an_entrypoint_no_killswitch_applicable",IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:"in_development_add_a_todo_comment_with_a_task_above_this_to_add_a_killswitch",PINNED_MESSAGES:"pinned_messages",BUMP_MESSAGES:"bump_messages",SIDEBAR_SETTINGS_PRIVACY_MENU:"sidebar_settings_privacy_menu",JEWEL_EVERGREEN_PIN_UPSELL:"jewel_evergreen_pin_upsell"}),l=e;i.default=l}),66);
__d("MWFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(t,n,r,o,a,i,l){"use strict";l.createFocusTable=o("FocusTable.react").createFocusTable,l.tabbableScopeQuery=o("focusScopeQueries").tabbableScopeQuery}),98);
__d("MWThreadListFocusableTable.react",["MWFocusTable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("MWFocusTable.react").createFocusTable(o("MWFocusTable.react").tabbableScopeQuery),c=u[0],d=u[1],m=u[2],p=d,_=m;function f(e){var t=o("react-compiler-runtime").c(2),n=e.children,r;return t[0]!==n?(r=s.jsx(c,{allowModifiers:!0,tabScopeQuery:o("MWFocusTable.react").tabbableScopeQuery,wrapX:!0,children:n}),t[0]=n,t[1]=r):r=t[1],r}l.MWThreadListFocusableTableRow=p,l.MWThreadListFocusableTableCell=_,l.MWThreadListFocusableTableScopeQuery=o("MWFocusTable.react").tabbableScopeQuery,l.MWThreadListFocusableTable=f}),98);
__d("MWXMenu.react",["cr:6941"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6941")}),98);
__d("MWXMenuItem.react",["BaseTheme.react","FDSTextWebUtils","MWXSvgIcon","MWXThreadThemeColor","MessengerWebUXLogger","cr:2466","cr:4318","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["icon","iconColor","loggingEvent","onClick","primaryColor","secondaryColor"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useMemo;function _(t){var a=o("react-compiler-runtime").c(39),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u,d,m,p,_,g,h;if(a[3]!==i){var y=i;u=y.icon,d=y.iconColor,m=y.loggingEvent,p=y.onClick,g=y.primaryColor,h=y.secondaryColor,_=babelHelpers.objectWithoutPropertiesLoose(y,s),a[3]=i,a[4]=u,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=g,a[10]=h}else u=a[4],d=a[5],m=a[6],p=a[7],_=a[8],g=a[9],h=a[10];var C=d instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?"primary":d,b=r("MessengerWebUXLogger").useInteractionLogger(),v;a[11]!==b||a[12]!==m||a[13]!==p?(v=function(t){p==null||p(t),m&&(b==null||b(m))},a[11]=b,a[12]=m,a[13]=p,a[14]=v):v=a[14];var S=v;if(n("cr:4318")!=null){var R;a[15]!==S||a[16]!==u||a[17]!==C||a[18]!==_||a[19]!==l?(R=c.jsx(n("cr:4318"),babelHelpers.extends({icon:u,iconColor:C,onClick:S},_,{ref:l})),a[15]=S,a[16]=u,a[17]=C,a[18]=_,a[19]=l,a[20]=R):R=a[20];var L;return a[21]!==d||a[22]!==R?(L=c.jsx(f,{iconColor:d,children:R}),a[21]=d,a[22]=R,a[23]=L):L=a[23],L}if(n("cr:2466")!=null){var E=u instanceof o("MWXSvgIcon").MWXSvgMenuItemIcon?u.component:u,k;a[24]!==g?(k=o("FDSTextWebUtils").getFDSHeadlineColor(g),a[24]=g,a[25]=k):k=a[25];var I;a[26]!==h?(I=o("FDSTextWebUtils").getFDSMetaColor(h),a[26]=h,a[27]=I):I=a[27];var T;a[28]!==S||a[29]!==C||a[30]!==_||a[31]!==l||a[32]!==E||a[33]!==k||a[34]!==I?(T=c.jsx(n("cr:2466"),babelHelpers.extends({icon:E,iconColor:C,isIconDecorative:!0,onClick:S,primaryColor_DEPRECATED:k,secondaryColor:I},_,{ref:l})),a[28]=S,a[29]=C,a[30]=_,a[31]=l,a[32]=E,a[33]=k,a[34]=I,a[35]=T):T=a[35];var D;return a[36]!==d||a[37]!==T?(D=c.jsx(f,{iconColor:d,children:T}),a[36]=d,a[37]=T,a[38]=D):D=a[38],D}return null}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.iconColor,i,l;t[0]!==a?(l=a instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":a.color},light:{"primary-icon":a.color},type:"VARIABLES"}:void 0,t[0]=a,t[1]=l):l=t[1],i=l;var s=i;if(s==null)return n;var u;return t[2]!==n||t[3]!==s?(u=c.jsx(r("BaseTheme.react"),{config:s,children:n}),t[2]=n,t[3]=s,t[4]=u):u=t[4],u}l.default=_}),98);
__d("MWXPopoverLoadingState.react",["cr:8235"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8235")}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4148"),s=o("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",e),u=s;l.default=u}),98);
__d("isMWEBEntrypointEnabled",["MWEBEntrypointsKillswitch.enum","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL:return r("justknobx")._("2598");case r("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST:return r("justknobx")._("2599");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST:return r("justknobx")._("2600");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI:return r("justknobx")._("2601");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SCROLL_BANNER:return r("justknobx")._("2602");case r("MWEBEntrypointsKillswitch.enum").AUTO_RESTORE:return r("justknobx")._("2603");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SEARCH:return r("justknobx")._("2604");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST_UNIVERSAL_SEARCH:return r("justknobx")._("2768");case r("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE:return r("justknobx")._("2841");case r("MWEBEntrypointsKillswitch.enum").PINNED_MESSAGES:return r("justknobx")._("2937");case r("MWEBEntrypointsKillswitch.enum").BUMP_MESSAGES:return r("justknobx")._("3682");case r("MWEBEntrypointsKillswitch.enum").SIDEBAR_SETTINGS_PRIVACY_MENU:return r("justknobx")._("4788");case r("MWEBEntrypointsKillswitch.enum").JEWEL_EVERGREEN_PIN_UPSELL:return r("justknobx")._("1878");case r("MWEBEntrypointsKillswitch.enum").DYI:case r("MWEBEntrypointsKillswitch.enum").EB_SETTINGS:case r("MWEBEntrypointsKillswitch.enum").IGD_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:return!0}}l.default=e}),98);
__d("mwEBCheckIfEBKeysExistInDisk",["EBDB","FBLogger","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("415");async function u(t){if(!s||t==="true")return Promise.resolve();try{var n=await o("EBDB").getEBDB(),a=await n.store("secure_encrypted_backups_client_state").count();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:(a>0).toString()}})}catch(t){var i=r("getErrorSafe")(t);throw r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:"failed_to_open_db"}}),r("FBLogger")("wmi_eb").catching(i).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to check if EB keys exists"]))),i}}l.default=u}),98);
__d("useMWEBBackupStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBBackupStateQuery",selections:[{kind:"RequiredField",field:e,action:"LOG",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBBackupStateQuery",selections:[e]},params:{cacheID:"780695c71d771c39c4d001bd676844c7",id:null,metadata:{},name:"useMWEBBackupStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBBackupStateUtil",["isMWEBEntrypointEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return!r("isMWEBEntrypointEnabled")(e)||t?0:n!=null?n:1}l.default=e}),98);
__d("useMWEBBackupState",["CometRelay","react-compiler-runtime","useMWEBBackupStateQuery.graphql","useMWEBBackupStateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a,i=o("react-compiler-runtime").c(2),l=t.entrypoint,s,u;i[0]===Symbol.for("react.memo_cache_sentinel")?(s=e!==void 0?e:e=n("useMWEBBackupStateQuery.graphql"),u={},i[0]=s,i[1]=u):(s=i[0],u=i[1]);var c=o("CometRelay").useClientQuery(s,u);return r("useMWEBBackupStateUtil")(l,(c==null?void 0:c.viewer)==null,c==null||(a=c.viewer)==null?void 0:a.backup_state)}l.default=s}),98);