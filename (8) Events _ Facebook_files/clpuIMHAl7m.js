;/*FB_PKG_DELIM*/

__d("DirectMessagingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2051"),s=o("FalcoLoggerInternal").create("direct_messaging",e),u=s;l.default=u}),98);
__d("FBReelsFeedbackRightRailGlimmer.react",["CometColumn.react","CometColumnItem.react","FDSGlimmer.react","ReelsCardHeaderGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={textGlimmer:{borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",height:"x1v9usgg",width:"xh8yej3",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("CometColumnItem.react"),{paddingTop:16,children:s.jsx(r("ReelsCardHeaderGlimmer.react"),{})}),e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsxs(r("CometColumn.react"),{paddingHorizontal:16,spacing:12,children:[t,s.jsx(r("CometColumnItem.react"),{children:s.jsx(r("FDSGlimmer.react"),{index:0,xstyle:u.textGlimmer})})]}),e[1]=n):n=e[1],n}l.default=c}),98);
__d("Keys",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({BACKSPACE:8,TAB:9,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRAKET:221,SINGLE_QUOTE:222});i.default=e}),66);
__d("MWChatSearchSurfaces",["LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s={broadcast:(e||(e=o("LSIntEnum"))).ofNumber(6),cmCommunityInviteAllMembers:e.ofNumber(21),cmCommunityInviteFbFriends:e.ofNumber(22),cmInviteAllMembers:e.ofNumber(14),cmInviteFbFriends:e.ofNumber(20),cmMemberList:e.ofNumber(16),cmThreadParticipantSearch:e.ofNumber(17),instagramAll:e.ofNumber(15),omnipicker:e.ofNumber(5),omnipickerArmadillo:e.ofNumber(11),universal:e.ofNumber(1)},u=s;l.default=u}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchResultType","MWChatSearchSurfaces","MessengerMSplitFlag","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=e.map(function(e){return e.searchSource==="server"?!1:!!(d(e,t)||c(e))}),r=e.filter(function(e,t){return n[t]===!1});return r}async function u(e,t,n,r,o){n===void 0&&(n=!1),r===void 0&&(r=!0),o===void 0&&(o=!1);var a=e;if(n&&(a=e.filter(function(e){var t=e.key,n=e.rawData;return n.isE2EE})),t==null)return a;var i=await Promise.all(a.map(async function(e){return!(await g(e,t)||await h(e,t,n,r)||o&&e.rawData.isAiBot===!0||p(e)||m(e)||C(e))})),l=e.filter(function(e,t){return i[t]});return l}function c(e){return e.isContact===!0&&e.isViewerUnconnected===!0}function d(e,t){return t===r("MWChatSearchSurfaces").instagramAll?!1:e.isInstagramAccount===!0}function m(e){var t=e.rawData,n=t.canViewerMessage,r=t.isRestrictedByViewer;return r!==!0&&n===!1}function p(e){var t=e.rawData,n=t.isAiBot,o=t.isViewerUnconnected;return n!==!0?!1:r("MessengerMSplitFlag").is_msplit_account||o!==!1}function _(e){var t=[],n=new Set;return e.forEach(function(e){n.has(e.key)||(t.push(e),n.add(e.key))}),t}function f(e,t){return t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):e!=null?e.isE2EE===!0:!1}async function g(t,n){var a=t.rawData,i=a.defaultE2eeThreadOneToOne,l=a.id,s=a.isE2EE,u=a.otherUserId,c=a.threadType;return!s||c==null||!o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(c)?!1:i===!0?!0:await r("hasDefaultThreadOneToOneCapability")((e||(e=o("I64"))).of_string_opt(u!=null?u:l),n)}function h(e,t,n,r){return r===void 0&&(r=!0),n?Promise.resolve(!1):r?y(e,t):Promise.resolve(!1)}async function y(t,n){var a=t.rawData;if(a.resultType!==r("MWChatSearchResultType").GROUP||n==null)return!1;var i=a.hasCutoverThread,l=a.isE2EE,s=a.otherUserId;if(!l)return!1;if(s!=null){if(i===!0)return!0;var u=await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(n),(e||(e=o("I64"))).of_string(s));return u}return!1}function C(e){var t=e.rawData.isRestrictedByViewer;return t===!0}l.filterLocalSearchResults=s,l.filterSearchResults=u,l.dedupeByThreadKey=_,l.getIsE2ee=f}),98);
__d("MWThreadCreationUtil",["FBLogger","I64","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchFilteringUtils","MWChatSearchResultType","ReQL","ReQLSuspense","gkx","isTlcSearchEnabled","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useCallback,m=c.useMemo,p=10;function _(e,t){var n=C(e),r=o("ReQLSuspense").toArray(o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey"]).filter(function(e){return n.has((s||(s=o("I64"))).to_string(e.contactId))}).map(function(e){return[(s||(s=o("I64"))).to_string(e.threadKey),s.to_string(e.contactId)]}),i.id+":51"),a=[],l=new Map;return r!=null&&r.forEach(function(t){var n=l.get(t[0]),r=n!=null?n+1:1;l.set(t[0],r),r===e.length&&a.push(t[0])}),a}function f(e,t,n){var a=!1;return r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.tables.threads.index("lastActivityTimestampMs")).filter(function(t){return e.includes((s||(s=o("I64"))).to_string(t.threadKey))&&t.threadName==null})).then(function(e){e!=null&&(a=!0,n(o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)))}).catch(function(e){r("FBLogger")("messenger_web_creation").mustfix("Issue getting and navigating to the most recent thread",e)})),a}function g(e,t){for(var n=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(t.tables.contacts).filter(function(t){return e.has((s||(s=o("I64"))).to_string(t.id))})},[e,t],i.id+":118"),r=m(function(){return n.map(function(e){return(s||(s=o("I64"))).to_string(e.id)})},[n]),a=m(function(){return new Set(Array.from(e).filter(function(e){return!r.includes(e)}))},[r,e]),l=!0,u=0;u<n.length;u++)if(n[u]!=null){var c=o("LSContactBitOffset").has(80,n[u]);if(!c){l=!1;break}}return[l,a]}function h(e,t){for(var n=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(t.tables.server_search_results).filter(function(t){return e.has(t.resultId.toString())})},[e,t],i.id+":164"),r=m(function(){return n.map(function(e){return e.resultId.toString()})},[n]),a=m(function(){return new Set(Array.from(e).filter(function(e){return!r.includes(e)}))},[e,r]),l=!0,s=0;s<n.length;s++)if(n[s]!=null&&(n[s].defaultE2eeThreads===null||n[s].defaultE2eeThreads===!1)){l=!1;break}return[l,a]}function y(e,t){var n=o("react-compiler-runtime").c(7),a,i;n[0]!==e?(i=C(e),n[0]=e,n[1]=i):i=n[1],a=i;var l=a,s=g(l,t),u=s[0],c=s[1],d=h(c,t),m=d[0],p=d[1],_;return n[2]!==u||n[3]!==m||n[4]!==p||n[5]!==c?(_=function(){return r("gkx")("5338")?c.size===0||!u?u:p.size===0?m:(r("FBLogger")("messenger_web_creation").warn("Tokens not in the Contacts table or Server Search Results table"),!1):!1},n[2]=u,n[3]=m,n[4]=p,n[5]=c,n[6]=_):_=n[6],_}function C(e){var t=new Set;return e.forEach(function(e){var n=e.rawData.otherUserId!=null?e.rawData.otherUserId:e.key;t.add(n)}),t}function b(e){return e.rawData.hasCutoverThread===!0||v()&&e.rawData.defaultE2eeThreadOneToOne===!0}function v(){return r("isTlcSearchEnabled")()}async function S(e,t,n){var a=o("MWChatSearchFilteringUtils").getIsE2ee(e.rawData);if(a)return{isSecureThread:!0,reason:"e2ee"};var i=e.rawData.id,l=e.rawData.hasCutoverThread===!0||e.rawData.defaultE2eeThreadOneToOne===!0,u="not_touched";e.rawData.isContact||e.rawData.resultType===r("MWChatSearchResultType").USER?u=await o("MAWVerifyThreadCutover").verifyContactCutoverOrDefaultE2EEWhenReady(Promise.resolve(n),t,(s||(s=o("I64"))).of_string(i)):await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(n),(s||(s=o("I64"))).of_string(i))&&(u="cutover");var c=u!=null;if(u!=="not_touched"&&l!==c&&r("FBLogger")("messenger_web").warn("Inconsistency for cutover or default e2ee status found and covered by the fix: cutoverOrDefaultE2eeType after the fix is %s",u),u==="cutover"||u==="on_demand_cutover")return{isSecureThread:!0,reason:u};var d=b(e)||u==="default_e2ee";if(d){var m=await o("MAWVerifyThreadCutover").getCutoverThread(Promise.resolve(n),(s||(s=o("I64"))).of_string(e.rawData.id));return m!=null&&r("FBLogger")("messenger_web").warn("Cutover thread inconsistency: default e2ee thread created but still would have been treated as new thread"),{defaultE2eeThreadCreated:m!=null,isSecureThread:!0,reason:"default_e2ee"}}return{isSecureThread:!1}}async function R(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(e.key)));return n}function L(e,t){return e!==r("MWChatSearchResultType").GROUP?t?(u||(u=o("LSIntEnum"))).ofNumber(15):(u||(u=o("LSIntEnum"))).ofNumber(1):t?(u||(u=o("LSIntEnum"))).ofNumber(16):(u||(u=o("LSIntEnum"))).ofNumber(2)}function E(e,t,n,r,o,a){e.openTabOrInbox({clientThreadKey:t,threadKey:n,threadType:L(r,o)},"search",void 0,a)}l.E2EE_GROUP_SIZE_LIMIT=p,l.getExistingThreadsWithTheTokens=_,l.maybeUpdateIsSecureBasedOnUnnamedRecentThread=f,l.useCheckE2EEligibilityForEachContact=y,l.passesWebSearchDefaultE2eeThreadCreationGating=v,l.getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2=S,l.checkIfThreadExistsInThreadTable=R,l.navigateToThread=E}),98);
__d("getMAWCanThreadBeCutoverOnDemand",["I64","LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","MWPreloadableQueries","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n){if(t.isTargetE2E===!0||t.targetType!=="USER")return!1;var r=(e||(e=o("I64"))).of_string(t.targetID),a=await Promise.resolve(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(r))),i=a!=null&&o("LSContactBitOffset").has(76,a);if(!i)return!1;var l=await Promise.resolve(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(r))),s=l?o("LSMessagingThreadTypeUtil").isOpenOneToOne(l.threadType):!1;if(!s)return!1;var u=await Promise.resolve(o("ReQL").firstAsync(o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,r)));if(u)return!1;var c=await o("MAWThreadCutover").isCutoverThreadKey(r);return!c}l.default=s}),98);
__d("MaybeTriggerOnDemandCutover",["FBLogger","I64","MAWCreateAndWaitForAuthoritativeOneToOneThread","MAWOnDemandCutoverQPLLogger","MAWOnDemandCutoverTrigger","getErrorSafe","getMAWCanThreadBeCutoverOnDemand"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a){var i=await r("getMAWCanThreadBeCutoverOnDemand")(t,n);if(i){var l=(e||(e=o("I64"))).of_string(t.targetID);o("MAWOnDemandCutoverTrigger").triggerOnDemandCutover(n,l,a);var s=babelHelpers.extends({},t);try{s.targetID=(e||(e=o("I64"))).to_string(await new Promise(function(e){r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(n,l,"maybeTriggerOnDemandCutover",function(t){o("MAWOnDemandCutoverQPLLogger").addPoint(l,"secure_thread_created"),e(t)})})),s.isTargetE2E=!0}catch(e){var u=r("getErrorSafe")(e);r("FBLogger")("messenger_web").mustfix("Failed to get cutover thread for forward/sharing: %s",u.message)}return Promise.resolve(s)}}l.default=s}),98);
__d("MaybeUpdateTargetBasedOnDefaultE2eeEligibility",["FBLogger","I64","MAWCreateAndWaitForAuthoritativeOneToOneThread","MWThreadCreationUtil","ensureContactsExistAndUpdatedSync","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a){if(t.isTargetE2E===!0||t.targetType!=="USER")return Promise.resolve(t);var i=(e||(e=o("I64"))).of_string(t.targetID);await r("ensureContactsExistAndUpdatedSync")(n,a,i);var l=await r("hasDefaultThreadOneToOneCapability")(i,n),s=babelHelpers.extends({},t);if(o("MWThreadCreationUtil").passesWebSearchDefaultE2eeThreadCreationGating()&&l)try{s.targetID=(e||(e=o("I64"))).to_string(await new Promise(function(e){r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(n,i,"maybeUpdateTargetBasedOnDefaultE2eeEligibility",function(t){return e(t)})})),s.isTargetE2E=!0}catch(e){r("FBLogger")("messenger_web").mustfix("Failed to create e2ee thread for forward/sharing",e)}return Promise.resolve(s)}l.maybeUpdateTargetBasedOnDefaultE2eeEligibility=s}),98);
__d("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EE",["I64","MaybeTriggerOnDemandCutover","MaybeUpdateTargetBasedOnDefaultE2eeEligibility","ensureContactsExistAndUpdatedSync","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i,l,s){var u,c=await n;o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_ensure_contact_exists_start");var d=function(t){o("sendToSentQPLLogger").markSendToSentPoint(l,t)};await r("ensureContactsExistAndUpdatedSync")(c,a,(e||(e=o("I64"))).of_string(t.targetID),d,s),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_ensure_contact_exists_end"),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_trigger_on_demand_cutover_start");var m=(u=await r("MaybeTriggerOnDemandCutover")(t,c,i))!=null?u:t;return o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_trigger_on_demand_cutover_end"),m.targetID===t.targetID&&(o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_update_target_based_on_eligibility_start"),m=await o("MaybeUpdateTargetBasedOnDefaultE2eeEligibility").maybeUpdateTargetBasedOnDefaultE2eeEligibility(t,c,a),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_update_target_based_on_eligibility_end")),m}l.default=s}),98);
__d("isSoftNewlineEvent",["Keys"],(function(t,n,r,o,a,i){"use strict";function e(e){return e.which===n("Keys").RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))}a.exports=e}),null);