;/*FB_PKG_DELIM*/

__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="_@_",m="3b",p="CacheStorageVersion",_={length:0,getItem:c=r("emptyFunction"),setItem:c,clear:c,removeItem:c,key:c},f=(function(){function e(e){this._store=e}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);n!=null&&e.push(n)}return e},t.get=function(t){return this._store.getItem(t)},t.set=function(t,n){this._store.setItem(t,n)},t.remove=function(t){this._store.removeItem(t)},t.clear=function(){this._store.clear()},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r!=null&&r.startsWith(t)&&this.remove(r)}},e})(),g=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getLocalStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getLocalStorage()},n})(f),h=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getSessionStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getSessionStorage()},n})(f),y=(function(){function e(){this._store={}}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){return Object.keys(this._store)},t.get=function(t){return this._store[t]===void 0?null:this._store[t]},t.set=function(t,n){this._store[t]=n},t.remove=function(t){t in this._store&&delete this._store[t]},t.clear=function(){this._store={}},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r.startsWith(t)&&this.remove(r)}},e.available=function(){return!0},e})(),C={memory:y,localstorage:g,sessionstorage:h},b=(function(){function t(e,t){this._changeCallbacks=[],this._key_prefix="_cs_";var o;this._exception=null,t&&(this._key_prefix=t),e==="AUTO"||!e?o="memory":o=e,o&&(!C[o]||!C[o].available()?((s||(s=r("ExecutionEnvironment"))).canUseDOM,this._backend=new y):this._backend=new C[o]);var a=this.useBrowserStorage();a&&n("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));var i=a?this._backend.getStore().getItem(p):this._backend.getStore()[p];i!==m&&this.clearOwnKeys()}var o=t.prototype;return o.useBrowserStorage=function(){return this._backend.getStore()===(e||(e=r("WebStorage"))).getLocalStorage()||this._backend.getStore()===(e||(e=r("WebStorage"))).getSessionStorage()},o.addValueChangeCallback=function(t){var e=this;return this._changeCallbacks.push(t),{remove:function(){e._changeCallbacks.slice(e._changeCallbacks.indexOf(t),1)}}},o._onBrowserValueChanged=function(t){this._changeCallbacks&&String(t.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(e){e(t.key,t.oldValue,t.newValue)})},o.keys=function(){var e=this,t=[];return(u||(u=r("ErrorGuard"))).guard(function(){if(e._backend)for(var n=e._backend.keys(),r=e._key_prefix.length,o=0;o<n.length;o++)n[o].substr(0,r)==e._key_prefix&&t.push(n[o].substr(r))},{name:"CacheStorage"})(),t},o.set=function(o,a,i){if(this._backend){if(this.useBrowserStorage()&&t._persistentWritesDisabled)return this._exception=r("err")("writes disabled"),!1;var e;typeof a=="string"?e=d+a:i?e=n("cr:8958").stringify(a):(e={__t:Date.now(),__v:a},e=n("cr:8958").stringify(e));for(var l=this._backend,s=this._key_prefix+o,u=!0,c=null;u;)try{c=null,l.set(s,e),u=!1}catch(e){c=e;var m=l.keys().length;this._evictCacheEntries(),u=l.keys().length<m}return c!==null?(this._exception=c,!1):(this._exception=null,!0)}return this._exception=r("err")("no back end"),!1},o.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null},o.getLastSetException=function(){return this._exception},o.getStorageKeyCount=function(){var e=this._backend;return e?e.keys().length:0},o._evictCacheEntries=function(){var e=[],r=this._backend;r.keys().forEach(function(o){if(o!==p){var a=r.get(o);if(a===void 0){r.remove(o);return}if(!t._hasMagicPrefix(a)){try{a=n("cr:8958").parse(a,i.id)}catch(e){r.remove(o);return}a&&a.__t!==void 0&&a.__v!==void 0&&e.push([o,a.__t])}}}),e.sort(function(e,t){return e[1]-t[1]});for(var o=0;o<Math.ceil(e.length/2);o++)r.remove(e[o][0])},o.get=function(o,a){var e;if(this._backend)if((u||(u=r("ErrorGuard"))).applyWithGuard(function(){e=this._backend.get(this._key_prefix+o)},this,[],{onError:function(){e=null},name:"CacheStorage:get"}),e!=null)if(t._hasMagicPrefix(e))e=e.substr(d.length);else try{e=n("cr:8958").parse(e,i.id),e&&e.__t!==void 0&&e.__v!==void 0&&(e=e.__v)}catch(t){e=void 0}else e=void 0;return e===void 0&&a!==void 0&&(e=a,this.set(o,e)),e},o.remove=function(t){this._backend&&(u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+t],{name:"CacheStorage:remove"})},o._setVersion=function(){var e=this;(u||(u=r("ErrorGuard"))).applyWithGuard(function(){e.useBrowserStorage()?e._backend.getStore().setItem(p,m):e._backend.getStore()[p]=m},this,[],{name:"CacheStorage:setVersion"})},o.clear=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())},o.clearOwnKeys=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())},t.getAllStorageTypes=function(){return Object.keys(C)},t._hasMagicPrefix=function(t){return t.substr(0,d.length)===d},t.disablePersistentWrites=function(){t._persistentWritesDisabled=!0},t})();b._persistentWritesDisabled=!1,i.exports=b}),34);
__d("DGWStreamGroupHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(t){this.$1(t)},t.onStreamGroupMustDrain=function(t){this.$2(t)},t.onStreamGroupTransportClose=function(){this.$3()},e})();i.default=e}),66);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(t,n,r,o,a,i){"use strict";i.default=n("CometEventListener")}),66);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(t,n,r,o,a,i){var e="client_event",l="navigation",s=18e4,u="marauder",c="marauder_last_event_time",d="marauder_last_session_id",m={},p=[],_=!1,f=null,g=null,h=null,y=0,C,b,v=!1,S=null;function R(){P().set(c,L())}n("Banzai").subscribe(n("Banzai").SHUTDOWN,R);function L(){return C=C||P().get(c)||0,C}function E(){v||(b=P().get(d),v=!0);var e=Date.now();return(!b||e-s>L())&&(b=e.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),P().set(d,b)),b}function k(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function I(){return{locale:navigator.language}}function T(e,t,n,r,o,a,i){var l=i!=null&&i!=0?i:Date.now();C=i!=null&&i!=0?Date.now():l;var s=t!=null&&t!=""?t:f;return{name:e,time:l/1e3,module:s,obj_type:r,obj_id:o,uuid:a,extra:n}}function D(e,t,n){return T("content",null,{flags:t},null,null,e,n)}function x(e){var t=window.__mrdr;if(t)for(var n in t){var r=t[n];if(r[3]!==0){if(delete t[n],n==="1")if(h!==null)n=h;else continue;e.push(D(n,1,r[1])),e.push(D(n,2,r[2])),e.push(D(n,3,r[3]))}}}function $(t,r){if(x(t),t.length!==0){_&&t.push(T("counters",null,m));var o=n("Banzai").BASIC;r==="vital"&&(o=n("Banzai").VITAL);var a=n("MarauderConfig").gk_enabled;if(y===0&&a&&(t.push(T("device_status",null,I())),o={delay:5e3}),r==="signal"&&(o={signal:!0}),a&&Math.random()<.01&&t.push(T("device_info",null,k())),h!==null)for(var i=0;i<t.length;i++){var l=t[i];l.uuid==null&&(l.uuid=h)}var s={app_ver:n("MarauderConfig").app_version,data:t,device_id:void 0,log_type:e,seq:y++,session_id:E()},c=P().get("device_id");c&&(s.device_id=c),m={},_=!1,n("Banzai").post(u,s,o)}}function P(){return S||(S=new(n("CacheStorage"))("localstorage","")),S}function N(e){m[e]||(m[e]=0),m[e]++,_=!0}function M(e,t,n,r,o,a,i,l){$([T(e,t,n,r,o,a,i)],l)}function w(e,t){f!==t&&(p.push(T(l,f,{dest_module:t,source_url:g,destination_url:e})),f=t,g=e)}function A(e,t){f!==t&&(h=null,w(e,t))}function F(e,t,n){M(t?"show_module":"hide_module",e,n)}function O(e){f=e}function B(){return f}function W(e){h===null&&(h=e,e!==null&&($(p),p=[]))}a.exports={count:N,log:M,navigateTo:A,navigateWithinSession:w,toggleModule:F,setUUID:W,setNavigationModule:O,getNavigationModule:B}}),null);
__d("MqttConfig",["MqttWebConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MqttWebConfig")}),98);
__d("MqttEnvWebSocket",[],(function(t,n,r,o,a,i){"use strict";function e(e){return new WebSocket(e)}i.createWebSocket=e}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15}),s=(function(){function e(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var t=e.prototype;return t.random=function(){return this.$1!=null?this.$1():Math.random()},t.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0},t.setIsUserLoggedInNow=function(t){this.$2=t},t.clearTimeout=function(t){if(this.$3!=null){this.$3(t);return}r("clearTimeout")(t)},t.setTimeout=function(t,n){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return this.$4!=null?this.$4.apply(null,arguments):r("setTimeout").apply(null,arguments)},t.getLoggerInstance=function(){return this.$5!=null?this.$5():u.getInstance()},t.genGk=function(t){return this.$6!=null?this.$6(t):!1},t.createSocket=function(t,n){return this.$7!=null?this.$7(t,n):o("MqttEnvWebSocket").createWebSocket(t)},t.scheduleCallback=function(t){return this.$8!=null?this.$8(t):t()},t.scheduleLoggingCallback=function(t){return this.$9!=null?this.$9(t):t()},t.configRead=function(t,n){return this.$10!=null?this.$10(t,n):n},t.configWrite=function(t,n){this.$11!=null&&this.$11(t,n)},t.initialize=function(t,n,r,o,a,i,l,s,u,c,d){this.$1=t,this.$2=n,this.$3=r,this.$4=o,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$11=d},e})(),u=(function(){function e(){}e.getInstance=function(){return new e};var t=e.prototype;return t.setAppId=function(t){},t.eventLogConnect=function(t){},t.eventLogPull=function(t){},t.eventLogPullFinish=function(t){},t.eventLogDisconnect=function(t){},t.eventLogOutgoingPublish=function(t){},t.eventLogIncomingPublish=function(t){},t.eventLogPublishTimeout=function(t){},t.eventLogMiscellaneousError=function(t){},t.logIfLoggedOut=function(){},t.logError=function(t){},t.logErrorWarn=function(t){},t.logWarn=function(t){},t.debugTrace=function(t){},t.bumpCounter=function(t){},t.getBrowserConnectivity=function(){return!0},e})(),c=new s;function d(e){c.setIsUserLoggedInNow(e)}l.MqttGkNames=e,l.Env=c,l.setIsUserLoggedInNow=d}),98);
__d("MqttProtocolUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e==null)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e,t){var n=t,r=0,o=1,a;do{if(n===e.length)return null;a=e[n++],r+=(a&127)*o,o*=128}while((a&128)!==0);return{offset:n,value:r}}function u(e){for(var t=e,n=new Array(1),r=0;r<4;r++){var o=t%128;if(t>>=7,t>0)n[r]=o|128;else{n[r]=o;break}}return n}function c(e,t,n){var r=n;return t[r++]=e>>8,t[r++]=e%256,r}function d(e,t){return 256*e[t]+e[t+1]}function m(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);o<128?t+=1:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,n++):t+=3}return t}function p(e,t,n,r){var o=c(t,n,r);return _(e,n,o),o+t}function _(e,t,n){for(var r=n,o=0,a=e.length;o<a;o++){var i=e.charCodeAt(o);i<128?t[r++]=i:i<2048?(t[r++]=192|i>>6,t[r++]=128|i&63):i<55296||i>=57344?(t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|i&63):(i=65536+((i&1023)<<10|e.charCodeAt(++o)&1023),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|i&63)}}function f(e,t,n){for(var r=[],o=t,a=0;o<t+n;){var i=e[o++];if(i<128)r[a++]=String.fromCharCode(i);else if(i>191&&i<224){var l=e[o++];r[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){var s=e[o++],u=e[o++],c=e[o++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;r[a++]=String.fromCharCode(55296+(d>>10)),r[a++]=String.fromCharCode(56320+(d&1023))}else{var m=e[o++],p=e[o++];r[a++]=String.fromCharCode((i&15)<<12|(m&63)<<6|p&63)}}return r.join("")}var g=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$5=n,this.$6=r,this.$4=!1}var t=e.prototype;return t.$7=function(){var e=this;this.$4?(this.$4=!1,this.$5(),this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},this.$2()*1e3)):this.$6()},t.reset=function(){var e=this;this.$4=!0,this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var t=this.$1()*1e3;t>0&&(this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},t))},t.cancel=function(){this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)},e})();l.UTF8Length=m,l.convertStringToUTF8=_,l.concatBuffers=e,l.decodeMultiByteInt=s,l.convertUTF8ToString=f,l.encodeMultiByteInt=u,l.writeUInt16BE=c,l.readUInt16BE=d,l.writeString=p,l.Pinger=g}),98);
__d("MqttUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(e,"sid",t.toString())}function s(e,t){var n=e;return t.forEach(function(e,t){n=u(n,t,e)}),n}function u(e,t,n){return e.indexOf("?")>0?e+"&"+t+"="+n:e+"?"+t+"="+n}function c(){return Math.floor(o("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function d(e,t,n){var r=arguments.length>1?e.then(t,n):e;r.then(null,function(e){o("MqttEnv").Env.setTimeout(function(){throw e instanceof Error?e:new Error("promiseDone")},0)})}function m(e,t,n,r){var a=!1;o("MqttEnv").Env.setTimeout(function(){a||(a=!0,n(new Error("promise timeout")))},r),d(e,function(e){a||(a=!0,t(e))},function(e){a||(a=!0,n(e))})}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0;return e.replace(/%s/g,function(){return String(n[o++])})}l.endpointWithSessionId=e,l.endpointWithExtraParameters=s,l.endpointWithExtraParameter=u,l.generateSessionId=c,l.promiseDone=d,l.promiseDoneWithTimeout=m,l.sprintf=p}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),s=[0,6,77,81,73,115,100,112,3];function u(t,n){var a=n,i=a,l=t[a],s=l>>4;a+=1;var u=o("MqttProtocolUtils").decodeMultiByteInt(t,a);if(u==null)return{position:i,wireMessage:null};a=u.offset;var c=a+u.value;if(c>t.length)return{position:i,wireMessage:null};var d;switch(s){case e.CONNACK:{var p=t[a++],h=!!(p&1),y=t[a++];d=new f(h,y);break}case e.PUBLISH:{var v=l&15,S=v>>1&3,R=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var L=o("MqttProtocolUtils").convertUTF8ToString(t,a,R);a+=R;var E=null;S===1&&(E=o("MqttProtocolUtils").readUInt16BE(t,a),a+=2);var k=C.createWithBytes(t.subarray(a,c)),I=(v&1)===1,T=(v&8)===8;d=new b(L,k,S,E,I,T);break}case e.PINGREQ:d=new m("PINGREQ");break;case e.PINGRESP:d=new m("PINGRESP");break;case e.PUBACK:case e.UNSUBACK:{var D=o("MqttProtocolUtils").readUInt16BE(t,a);d=new g(s===e.PUBACK?"PUBACK":"UNSUBACK",D);break}case e.SUBACK:{var x=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var $=t.subarray(a,c);d=new _(x,$);break}default:throw r("err")(o("MqttUtils").sprintf("Invalid MQTT message type %s.",s))}return{position:c,wireMessage:d}}function c(e){for(var t=[],n=0;n<e.length;){var r=u(e,n),o=r.wireMessage;if(n=r.position,o)t.push(o);else break}var a=null;return n<e.length&&(a=e.subarray(n)),{messages:t,remaining:a}}var d=(function(){function t(t){this.messageType=e[t]}var n=t.prototype;return n.encode=function(){throw new TypeError("Cannot abstract class WireMessage")},t})(),m=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e);return t[0]=(this.messageType&15)<<4,e},t})(d),p=(function(e){function t(){return e.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=new ArrayBuffer(2),n=new Uint8Array(t);return n[0]=e,n.set(o("MqttProtocolUtils").encodeMultiByteInt(0),1),t},t})(d),_=(function(e){function t(t,n){var r;return r=e.call(this,"SUBACK")||this,r.messageIdentifier=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),f=(function(e){function t(t,n){var r;return r=e.call(this,"CONNACK")||this,r.sessionPresent=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),g=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.messageIdentifier=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=2,n=o("MqttProtocolUtils").encodeMultiByteInt(t),r=n.length+1,a=new ArrayBuffer(t+r),i=new Uint8Array(a);return i[0]=e,i.set(n,1),r=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,i,r),a},t})(d),h=(function(e){function t(t,n){var r;return r=e.call(this,"CONNECT")||this,r.clientId=t,r.connectOptions=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e,t=(this.messageType&15)<<4,n=s.length+3;n+=(e=o("MqttProtocolUtils")).UTF8Length(this.clientId)+2,n+=e.UTF8Length(this.connectOptions.userName)+2;var r=e.encodeMultiByteInt(n),a=new ArrayBuffer(1+r.length+n),i=new Uint8Array(a);i[0]=t;var l=1;i.set(r,1),l+=r.length,i.set(s,l),l+=s.length;var u=130;return i[l++]=u,l=e.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),i,l),l=e.writeString(this.clientId,e.UTF8Length(this.clientId),i,l),l=e.writeString(this.connectOptions.userName,e.UTF8Length(this.connectOptions.userName),i,l),a},t})(d),y=(function(t){function n(e,n,r,a){var i;if(i=t.call(this,e)||this,i.topic=n,r<0&&r>1||r===1&&a==null)throw new TypeError(o("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",r,e));return i.qos=r,i.messageIdentifier=a,i}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.encode=function(){var t=(this.messageType&15)<<4;t|=2;var n=o("MqttProtocolUtils").UTF8Length(this.topic),r=2+n+2;this.messageType===e.SUBSCRIBE&&(r+=1);var a=o("MqttProtocolUtils").encodeMultiByteInt(r),i=new ArrayBuffer(1+a.length+r),l=new Uint8Array(i);l[0]=t;var s=1;return l.set(a,1),s+=a.length,this.messageIdentifier!=null&&(s=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,l,s)),s=o("MqttProtocolUtils").writeString(this.topic,n,l,s),this.messageType===e.SUBSCRIBE&&this.qos!=null&&(l[s++]=this.qos),i},n})(d),C=(function(){function e(e,t){this.payloadString=e,this.payloadBytes=t}e.createWithString=function(n){var t=new Uint8Array(new ArrayBuffer(o("MqttProtocolUtils").UTF8Length(n)));return o("MqttProtocolUtils").convertStringToUTF8(n,t,0),new e(n,t)},e.createWithBytes=function(n){var t=o("MqttProtocolUtils").convertUTF8ToString(n,0,n.length);return new e(t,n)};var t=e.prototype;return t.string=function(){return this.payloadString},t.bytes=function(){return this.payloadBytes},e})(),b=(function(e){function t(t,n,r,o,a,i){var l;if(l=e.call(this,"PUBLISH")||this,l.topic=t,l.payloadMessage=n,l.qos=r,l.messageIdentifier=o,l.retained=a!=null?a:!1,l.duplicate=i!=null?i:!1,l.qos===1&&l.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;this.duplicate&&(e|=8),e=e|=this.qos<<1,this.retained&&e!=1;var t=o("MqttProtocolUtils").UTF8Length(this.topic),n=t+2,r=this.qos===0?0:2;n+=r;var a=this.payloadMessage.bytes();n+=a.byteLength;var i=o("MqttProtocolUtils").encodeMultiByteInt(n),l=new ArrayBuffer(1+i.length+n),s=new Uint8Array(l);s[0]=e,s.set(i,1);var u=1+i.length;return u=o("MqttProtocolUtils").writeString(this.topic,t,s,u),this.qos!==0&&this.messageIdentifier!=null&&(u=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,s,u)),s.set(a,u),l},t})(d),v=C.createWithString,S=C.createWithBytes,R={Base:d,ConnAck:f,Connect:h,Disconnect:p,Ping:m,PubAckUnsubAck:g,Publish:b,Subscription:y};l.MESSAGE_TYPE=e,l.decodeMessage=u,l.decodeByteMessages=c,l.Message=C,l.createMessageWithString=v,l.createMessageWithBytes=S,l.WireMessage=R}),98);
__d("MqttTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r){this.errorCode=t,this.errorName=n,this.errorMessage=r},l=Object.freeze({APP_DISCONNECT:new e(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new e(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new e(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new e(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new e(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new e(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new e(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new e(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new e(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new e(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new e(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")}),s=function(t,n){this.mqttError=t,this.connAck=n},u=(function(e){function t(t,n,r){var o;return r===void 0&&(r=null),o=e.call(this,n)||this,o.isRecoverable=t,o.originalError=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MqttError=e,i.MqttErrors=l,i.ConnectFailure=s,i.MqttChannelError=u}),66);
__d("MqttUserNameUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null?e:typeof document=="object"&&document&&document.hasFocus&&document.hasFocus()}function l(){return navigator.userAgent}i.getMqttForegroundStatus=e,i.getUserAgent=l}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,a,i,l,s,u,c,d,m){l===void 0&&(l=null),s===void 0&&(s=""),u===void 0&&(u="websocket"),c===void 0&&(c=null),d===void 0&&(d=null),m===void 0&&(m=null),this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=o("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=l,this.$9=s,this.$10=u,this.$11=c,this.$12=d,this.$13=m}var t=e.prototype;return t.gen=function(t,n,r,a){a===void 0&&(a=[]);var e=o("MqttUserNameUtils").getMqttForegroundStatus(this.$7),i=r.map(function(e){var t={isBase64Publish:!1,messageId:e.messageId,payload:e.payload,qos:e.qos,topic:e.topic};return typeof t.payload!="string"&&(t.payload=btoa(String.fromCharCode.apply(null,t.payload)),t.isBase64Publish=!0),t}),l={a:o("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:e,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:a,php_override:this.$9,pm:i,s:t,st:n,u:this.$1};return JSON.stringify(l)},t.setForegroundState=function(t){this.$7=t},t.setChatVisibility=function(t){this.$6=t},t.getEndpointCapabilities=function(){return this.$2},t.getDeviceId=function(){return this.$4},t.setEndpointCapabilities=function(t){this.$2=t},t.getIsGuestAuthStringPresent=function(){return this.$8!==null},e})();l.default=e}),98);
__d("MqttWebSocketUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"WebSocket"in t&&t.WebSocket!=null&&"CLOSING"in t.WebSocket.prototype}i.hasWSSupport=e}),66);