;/*FB_PKG_DELIM*/

__d("GroupsCometPendingPostsBulkDeclineDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25356591377266808"}),null);
__d("LSApplyAdminMessageCTAV2",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetFirstAvailableAdminMessageCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetFirstAvailableAdminMessageCTAID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(27).put({threadKey:e[0],messageId:e[2],ctaId:r[0],timestampMs:e[1],adClientToken:e[5],adPreferenceUrl:e[6],adHelpUrl:e[7],showAdChoiceIcon:e[8],title:e[3],actionUrl:e[9],adminMessageNicknameParticipantId:e[10],targetId:e[11],targetTitle:e[12],actionContentBlob:e[15]})},function(o){return t.filter(t.db.table(12).fetch([[[e[2]]],"messageId"]),function(n){return e[2]===n.messageId&&t.i64.eq(e[0],n.threadKey)}).next().then(function(e,o){var a=e.done,i=e.value;return a?r[1]=void 0:(o=i.item,t.sequence([function(e){return r[7]=o.metadataDataclass,r[7]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[7]).then(function(e){var t;return t=e,r[8]=t[0],t})},function(e){return r[9]=new t.Map,r[10]=r[8].keys(),r[11]=t.i64.of_int32(r[10].length),t.i64.gt(r[11],t.i64.cast([0,0]))?t.loopAsync(r[11],function(e){return r[12]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[12]).then(function(e){var t;return t=e,r[13]=t[0],r[14]=t[1],t})},function(e){return r[15]=r[8].get(r[13]),r[9].set(r[13],r[15])}])}):t.resolve()},function(e){return r[6]=r[9]}]):t.resolve((r[8]=new t.Map,r[6]=r[8]))},function(e){return r[1]=r[6]}]))})},function(n){return r[1]?r[3]=!1:r[3]=!0,r[3]||(r[6]=new t.Map,r[6].set("ad_client_token",e[5]),r[6].set("ad_preference_url",e[6]),r[6].set("ad_help_url",e[7]),r[6].set("show_ad_choice_icon",e[8]),r[6].set("title",e[3]),r[6].set("action_url",e[9]),t.i64.neq(e[10],void 0)?r[7]=t.i64.to_string(e[10]):r[7]=void 0,r[6].set("admin_message_nickname_participant_id",r[7]),t.i64.neq(e[11],void 0)?r[8]=t.i64.to_string(e[11]):r[8]=void 0,r[6].set("target_id",r[8]),r[6].set("target_title",e[12]),r[6].set("identifier_name",e[14]),r[1].set("admin_message",r[6])),r[1]?r[4]=!1:r[4]=!0,r[4]?r[5]=void 0:(r[6]=t.toJSON(r[1]),r[5]=r[6]),t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[1])&&n.messageId===e[2]}),function(t){var n=t.update,o=t.item;return n({adminMsgCtaId:r[0],adminMsgCtaTitle:e[3],adminMsgCtaType:e[4],metadataDataclass:r[5]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxApplyAdminMessageCTAV2StoredProcedure",e.__tables__=["admin_message_ctas","messages"],a.exports=e}),null);